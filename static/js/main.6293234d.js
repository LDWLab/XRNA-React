/*! For license information please see main.6293234d.js.LICENSE.txt */
!function(){var e={7105:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return Tt},BASE_PAIR_CLASS_NAME:function(){return Kt},HTML_ELEMENT_ID_DELIMITER:function(){return qt},LABEL_CLASS_NAME:function(){return Vt},LEFT_PANEL_WIDTH:function(){return kt},MARGIN_LEFT:function(){return Wt},MOUSE_OVER_TEXT_HTML_ID:function(){return Dt},NO_STROKE_CLASS_NAME:function(){return Xt},NUCLEOTIDE_CLASS_NAME:function(){return Ht},PARENT_DIV_HTML_ID:function(){return Ot},SVG_BACKGROUND_HTML_ID:function(){return zt},SVG_ELEMENT_HTML_ID:function(){return Lt},SVG_SCENE_GROUP_HTML_ID:function(){return Gt},TEST_SPACE_ID:function(){return jt},VIEWPORT_SCALE_GROUP_0_HTML_ID:function(){return Zt},VIEWPORT_SCALE_GROUP_1_HTML_ID:function(){return Ft},VIEWPORT_TRANSLATE_GROUP_0_HTML_ID:function(){return Bt},VIEWPORT_TRANSLATE_GROUP_1_HTML_ID:function(){return Ut},default:function(){return $t}});var r=n(4165),o=n(5861),a=n(1413),i=n(3433),l=n(7762),s=n(9439),u=n(4942),c=n(2791),d=n(4212),f=n(7361),p=n(4164),h=n(8573),m=n.n(h),v=n(3038),x=n.n(v),g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g(e,t)};function y(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)};function N(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var E=function(e,t,n,r){switch(t){case"debounce":return m()(e,n,r);case"throttle":return x()(e,n,r);default:return e}},I=function(e){return"function"===typeof e},C=function(){return"undefined"===typeof window},S=function(e){return e instanceof Element||e instanceof HTMLDocument},_=function(e,t,n,r){return function(o){var a=o.width,i=o.height;t((function(t){return t.width===a&&t.height===i||t.width===a&&!r||t.height===i&&!n?t:(null===e||void 0===e||e(a,i),{width:a,height:i})}))}};!function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!C()){t&&t.current&&(n.targetRef.current=t.current);var o=n.getElement();o&&(n.observableElement&&n.observableElement===o||(n.observableElement=o,n.resizeObserver.observe(o,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(C())return null;if(t)return document.querySelector(t);if(r&&S(r))return r;if(n.targetRef&&S(n.targetRef.current))return n.targetRef.current;var o=(0,p.findDOMNode)(n);if(!o)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,o=void 0===r||r,a=t.handleHeight,i=void 0===a||a,l=t.onResize;if(o||i){var s=_(l,n.setState.bind(n),o,i);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,o=t.height;!n.skipOnMount&&!C()&&s({width:r,height:o}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,r=e.children;return I(t)?"renderProp":I(r)?"childFunction":(0,c.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,o=t.refreshMode,a=t.refreshRate,i=void 0===a?1e3:a,l=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.targetRef=(0,c.createRef)(),n.observableElement=null,C()||(n.resizeHandler=E(n.createResizeHandler,o,i,l),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}y(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){C()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e=this.props,t=e.render,n=e.children,r=e.nodeType,o=void 0===r?"div":r,a=this.state,i={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return null===t||void 0===t?void 0:t(i);case"childFunction":return null===n||void 0===n?void 0:n(i);case"child":var l=n;if(l.type&&"string"===typeof l.type){var s=N(i,["targetRef"]);return(0,c.cloneElement)(l,s)}return(0,c.cloneElement)(l,i);case"childArray":return n.map((function(e){return!!e&&(0,c.cloneElement)(e,i)}));default:return c.createElement(o,null)}}}(c.PureComponent);var A=C()?c.useEffect:c.useLayoutEffect;var P=n(6048),T=n(7084),R=n(7089),M=n(3871),w=n(433),k=n(6176);var O=n(9287),L=1.2;var j,D,Z=n(6745),F=n(1579);var B={x:{max:576,min:36},y:{max:756,min:36}},U={x:.5*(B.x.min+B.x.max),y:.5*(B.y.min+B.y.max)},z=(j={},(0,u.Z)(j,T.default.JSON,T.default.JSON),(0,u.Z)(j,T.default.SVG,T.default.SVG),(0,u.Z)(j,T.default.XRNA,T.default.XRNA),(0,u.Z)(j,T.default.CSV,T.default.CSV),(0,u.Z)(j,T.default.TR,T.default.TR),(0,u.Z)(j,T.default.BPSEQ,T.default.BPSEQ),j),G=Object.values(z),W=(D={},(0,u.Z)(D,z.xrna,(function(e,t){var n=document.implementation.createDocument(null,null,null),r=n.createElement("ComplexDocument");r.setAttribute("Name",t),n.appendChild(r);var o=n.createElement("SceneNodeGeom");return o.setAttribute("CenterX","0"),o.setAttribute("CenterY","0"),o.setAttribute("Scale","1"),r.appendChild(o),Object.values(e).forEach((function(e){var t=n.createElement("Complex");t.setAttribute("Name",e.name),r.appendChild(t);var o=e.basePairs;Object.entries(e.rnaMoleculeProps).forEach((function(e){var r=(0,s.Z)(e,2),a=r[0],i=r[1],u=i.firstNucleotideIndex,c=n.createElement("RNAMolecule");c.setAttribute("Name",a),t.appendChild(c);var d=n.createElement("NucListData");d.setAttribute("StartNucID","".concat(u)),d.setAttribute("DataType","NucChar.NucID.XPos.YPos");var f=Object.entries(i.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));d.innerHTML=f.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps;return[n.symbol,"".concat(t+u),n.x.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),n.y.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)].join(" ")})).join("\n"),c.appendChild(d);var p=n.createElement("Nuc");p.setAttribute("RefIDs","".concat(u,"-").concat(u+f.length-1)),p.setAttribute("Color","0"),p.setAttribute("FontID","0"),p.setAttribute("FontSize","8"),c.appendChild(p),f.forEach((function(e){var t,r,o=e.nucleotideIndex,a=e.singularNucleotideProps,i=u+o,l=null!==(t=a.font)&&void 0!==t?t:w.default.DEFAULT;if((p=n.createElement("Nuc")).setAttribute("RefID","".concat(i)),p.setAttribute("Color",(0,M.toHexadecimal)(null!==(r=a.color)&&void 0!==r?r:M.BLACK)),p.setAttribute("FontID",w.PartialFont.toFontId(l).toString()),p.setAttribute("FontSize",l.size.toString()),c.appendChild(p),void 0!==a.labelLineProps||void 0!==a.labelContentProps){(p=n.createElement("Nuc")).setAttribute("RefID","".concat(i)),c.appendChild(p);var s=n.createElement("LabelList"),d=[];if(void 0!==a.labelLineProps){var f,h,m=a.labelLineProps,v=m.points,x=v[0],g=v[v.length-1];d.push(["l",x.x.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),x.y.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),g.x.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),g.y.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),(null!==(f=m.strokeWidth)&&void 0!==f?f:k.DEFAULT_STROKE_WIDTH).toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),(0,M.toHexadecimal)(null!==(h=m.color)&&void 0!==h?h:M.BLACK),"0.0","0","0","0","0"].join(" "))}if(void 0!==a.labelContentProps){var y,b,N=a.labelContentProps,E=null!==(y=N.font)&&void 0!==y?y:w.default.DEFAULT;d.push(["s",N.x.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),N.y.toFixed(k.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),"0.0",E.size,w.PartialFont.toFontId(E),(0,M.toHexadecimal)(null!==(b=N.color)&&void 0!==b?b:M.BLACK),'"'.concat(N.content,'"')].join(" "))}s.innerHTML=d.join("\n"),p.appendChild(s)}}));var h=o[a];Object.entries(h).forEach((function(e){var t,r=(0,s.Z)(e,2),o=r[0],i=r[1],d=Number.parseInt(o),f={nucleotideIndex:d,rnaMoleculeName:a},p=(0,l.Z)(i);try{for(p.s();!(t=p.n()).done;){var h=t.value;if((0,P.compareBasePairKeys)(f,h)<=0){var m=n.createElement("BasePairs");m.setAttribute("nucID",(d+u).toString()),m.setAttribute("length","1"),m.setAttribute("bpNucID",(h.nucleotideIndex+u).toString()),m.setAttribute("bpName",h.rnaMoleculeName),c.appendChild(m)}}}catch(v){p.e(v)}finally{p.f()}}))}))})),(new XMLSerializer).serializeToString(n.documentElement)})),(0,u.Z)(D,z.json,(function(e){var t=[],n=[],r={},o={},i={},c={},d="";function f(e){var n,r=t.findIndex((function(t){return t["font-family"]===e.family&&t["font-size"]==="".concat(e.size)&&t["font-weight"]===e.weight&&t["font-style"]===e.style}));-1===r?(d="font#".concat(t.length),t.push((n={name:d},(0,u.Z)(n,"font-family",e.family),(0,u.Z)(n,"font-size","".concat(e.size)),(0,u.Z)(n,"font-weight",e.weight),(0,u.Z)(n,"font-style",e.style),n))):d="font#".concat(r)}var p="";function h(e){var t,r=(0,M.toCSS)(e.stroke),o=n.findIndex((function(t){return t["stroke-width"]==="".concat(e.strokeWidth)&&t.stroke===r}));-1===o?(p="stroke#".concat(n.length),n.push((t={name:p},(0,u.Z)(t,"stroke-width","".concat(e.strokeWidth)),(0,u.Z)(t,"stroke",r),t))):p="stroke#".concat(o)}var m=Object.values(e);return m.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var t,n,a=(0,s.Z)(e,2),l=a[0],u=a[1],c=Number.parseInt(l);f(null!==(t=u.font)&&void 0!==t?t:w.default.DEFAULT),i[c]=["text-"+(0,M.toCSS)(null!==(n=u.color)&&void 0!==n?n:M.BLACK),d];var m,v,x=u.labelContentProps;void 0!==x&&(f(null!==(m=x.font)&&void 0!==m?m:w.default.DEFAULT),r[c]=["text-"+(0,M.toCSS)(null!==(v=x.color)&&void 0!==v?v:M.BLACK),d]);var g,y,b=u.labelLineProps;void 0!==b&&(h({stroke:null!==(g=b.color)&&void 0!==g?g:M.BLACK,strokeWidth:null!==(y=b.strokeWidth)&&void 0!==y?y:k.DEFAULT_STROKE_WIDTH}),o[c]=[p])}))}))})),JSON.stringify({classes:t.concat(n),rnaComplexes:m.map((function(e){var t=Object.entries(e.rnaMoleculeProps),n=e.basePairs,u=new Array;return{name:e.name,rnaMolecules:t.map((function(t){for(var d=(0,s.Z)(t,2),f=d[0],m=d[1],v=new Array,x=n[f],g=0,y=Object.entries(x);g<y.length;g++){var b,N=(0,s.Z)(y[g],2),E=N[0],I=N[1],C=Number.parseInt(E),S=(0,l.Z)(I);try{for(S.s();!(b=S.n()).done;){var _,A,T,w=b.value;if((0,P.isRelevantBasePairKeySetInPair)({rnaMoleculeName:f,nucleotideIndex:C},w)){var O=null!==(_=w.basePairType)&&void 0!==_?_:(0,R.getBasePairType)(m.nucleotideProps[C].symbol,e.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol);h({strokeWidth:null!==(A=w.strokeWidth)&&void 0!==A?A:k.DEFAULT_STROKE_WIDTH,stroke:null!==(T=w.color)&&void 0!==T?T:M.BLACK}),c[C]=[p];var L={basePairType:O,classes:c[C],residueIndex1:m.firstNucleotideIndex+C,residueIndex2:m.firstNucleotideIndex+w.nucleotideIndex,points:w.points},j=f,D=w.rnaMoleculeName;if(R.default.isRedundantLeontisWesthofType(L.basePairType)){L.basePairType=R.default.reverseDirectedTypeMap[L.basePairType];var Z=j;j=D,D=Z;var F=L.residueIndex1;L.residueIndex1=L.residueIndex2,L.residueIndex2=F}j===D?v.push(L):u.push((0,a.Z)((0,a.Z)({},L),{},{rnaMoleculeName1:j,rnaMoleculeName2:D}))}}}catch(z){S.e(z)}finally{S.f()}}var B=new Array,U=Object.entries(m.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));return U.forEach((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,a=n.labelContentProps,i=n.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:t+m.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[t],label:a.content,x:a.x,y:-a.y}),void 0!==i&&(l.labelLine={classes:o[t],points:i.points.map((function(e){return{x:e.x,y:-e.y}}))}),B.push(l)}})),{name:f,basePairs:v,labels:B,sequence:U.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps;return{classes:i[t],residueIndex:t+m.firstNucleotideIndex,residueName:n.symbol,x:n.x,y:-n.y}}))}})),basePairs:u}}))})})),(0,u.Z)(D,z.csv,(function(e,t){var n=[["resNum","unModResName","X","Y","resColor","FontSize","LineX1","LineY1","LineX2","LineY2","LineThickness","LineColor","LabelX","LabelY","LabelSymbol","LabelFontSize","LabelColor","rnaComplexName"].join(",")];function r(e){void 0===e&&(e=w.default.DEFAULT);var t=0;if("number"===typeof e.size)t=e.size;else{var n=/^-?[\d.]+/.exec(e.size);if(null===n)throw"Unrecognized font-size format: ".concat(e.size);t=Number.parseFloat(n[0])}return t=Math.abs(y)*t}function o(e){return void 0===e&&(e=M.BLACK),(0,M.toHexadecimal)(e).toLocaleLowerCase()}for(var a={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},l=0,s=Object.values(e);l<s.length;l++)for(var u=s[l],c=0,d=Object.values(u.rnaMoleculeProps);c<d.length;c++)for(var f=d[c],p=0,h=Object.values(f.nucleotideProps);p<h.length;p++){var m=h[p],v=m.x,x=m.y;v<a.x.min&&(a.x.min=v),v>a.x.max&&(a.x.max=v),x<a.y.min&&(a.y.min=x),x>a.y.max&&(a.y.max=x)}var g=Math.min((B.x.max-B.x.min)/(a.x.max-a.x.min),(B.y.max-B.y.min)/(a.y.max-a.y.min)),y=-g,b=.5*(a.x.min+a.x.max),N=.5*(a.y.min+a.y.max);for(var E in e){var I=Number.parseInt(E),C=e[I];for(var S in C.rnaMoleculeProps){var _=C.rnaMoleculeProps[S];for(var A in _.nucleotideProps){var P=Number.parseInt(A),T=P+_.firstNucleotideIndex,R=_.nucleotideProps[P],j=R.labelLineProps,D=Array(6).fill(""),Z=g*(R.x-b)+U.x,F=y*(R.y-N)+U.y,z=Math.round(r(R.font)*L);if(void 0!==j){var G,W=j.points[0],H=j.points[1];D=[(0,k.numberToFormattedStringHelper)(Z+g*W.x),(0,k.numberToFormattedStringHelper)(F+y*W.y)].concat((0,i.Z)(void 0===H?["",""]:[(0,k.numberToFormattedStringHelper)(Z+g*H.x),(0,k.numberToFormattedStringHelper)(F+y*H.y)]),[(0,k.numberToFormattedStringHelper)(null!==(G=j.strokeWidth)&&void 0!==G?G:k.DEFAULT_STROKE_WIDTH),o(j.color)])}var K=R.labelContentProps,V=Array(5).fill("");if(void 0!==K){var X=document.getElementById((0,O.getLabelContentHtmlElementId)(I,S,P));if(null===X)throw"Unfound LabelContent SVG element.";var q=X.getBoundingClientRect(),Y=Math.round(r(K.font));V=[(0,k.numberToFormattedStringHelper)(Z+g*(K.x-.5*q.width)),(0,k.numberToFormattedStringHelper)(F+y*K.y+.5*z),K.content,"".concat(Y),o(K.color)]}n.push(["".concat(S,":").concat(T),R.symbol,(0,k.numberToFormattedStringHelper)(Z,3),(0,k.numberToFormattedStringHelper)(F,3),o(R.color),"".concat(z)].concat((0,i.Z)(D),(0,i.Z)(V),[C.name]).join(","))}}}return n.join("\n")})),(0,u.Z)(D,z.bpseq,(function(e,t){var n=new Array;for(var r in e){var o=e[Number.parseInt(r)],a=o.basePairs;for(var i in n.push('# RNA complex "'.concat(o.name,'"')),o.rnaMoleculeProps){n.push('# RNA molecule "'.concat(i,'"'));var s=o.rnaMoleculeProps[i],u=a[i];for(var c in s.nucleotideProps){var d=Number.parseInt(c),f=s.nucleotideProps[d];if(d in u){var p,h=u[d],m=(0,l.Z)(h);try{for(m.s();!(p=m.n()).done;){var v=p.value,x=v.rnaMoleculeName,g=o.rnaMoleculeProps[x],y="".concat(d+s.firstNucleotideIndex," ").concat(f.symbol," ").concat(v.nucleotideIndex+g.firstNucleotideIndex);i!==x&&(y+=' # RNA molecule "'.concat(x,'"')),n.push(y)}}catch(b){m.e(b)}finally{m.f()}}else n.push("".concat(d+s.firstNucleotideIndex," ").concat(f.symbol," 0"))}}}return n.join("\n")})),(0,u.Z)(D,z.tr,(function(e,t){for(var n={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},r=0,o=Object.values(e);r<o.length;r++)for(var a=o[r],i=0,l=Object.values(a.rnaMoleculeProps);i<l.length;i++)for(var s=l[i],u=0,c=Object.values(s.nucleotideProps);u<c.length;u++){var d=c[u],f=d.x,p=d.y;f<n.x.min&&(n.x.min=f),f>n.x.max&&(n.x.max=f),p<n.y.min&&(n.y.min=p),p>n.y.max&&(n.y.max=p)}var h=.5*(n.x.min+n.x.max),m=.5*(n.y.min+n.y.max),v=Math.min((B.x.max-B.x.min)/(n.x.max-n.x.min),(B.y.max-B.y.min)/(n.y.max-n.y.min)),x=-v,g=new Array;for(var y in e){var b=e[Number.parseInt(y)];g.push('\x3c!-- <rnaComplex name="'.concat(b.name.replace('"','\\"'),'"> --\x3e'));var N=b.rnaMoleculeProps;for(var E in N){g.push('<structure name="'.concat(E.replace('"','\\"'),'">'));var I=N[E],C=I.nucleotideProps;for(var S in C){var _=Number.parseInt(S),A=_+I.firstNucleotideIndex,P=C[_],T=v*(P.x-h)+U.x,R=x*(P.y-m)+U.y;g.push('<point x="'.concat((0,k.numberToFormattedStringHelper)(T,3),'" y="').concat((0,k.numberToFormattedStringHelper)(R,3),'" b="').concat(P.symbol,'" numbering-label="').concat(A,'" />'))}g.push("</structure>")}g.push("\x3c!-- </rnaComplex> --\x3e")}return g.join("\n")})),(0,u.Z)(D,z.svg,(function(e,t){var n,r=document.querySelector("#".concat(Gt)).getBBox(),o=document.getElementById(Lt).cloneNode(!0),a=o.querySelector("#".concat(zt));a&&a.remove();var i=o.querySelector("#".concat(Dt));i&&i.remove(),o.setAttribute("fill","none"),o.setAttribute("filter","none"),o.setAttribute("stroke","none"),o.style.removeProperty("top"),o.style.removeProperty("left"),o.style.removeProperty("position");var s=o.querySelector("#".concat(Gt)),c=r.width+40,d=r.height+40;o.setAttribute("viewBox","".concat(r.x-20," ").concat(r.y-20," ").concat(c," ").concat(d)),o.setAttribute("width",c.toString()),o.setAttribute("height",d.toString()),s.setAttribute("transform","scale(1, -1) translate(0, ".concat(-(2*r.y+r.height),")"));for(var f="Miscellaneous",p=(n={},(0,u.Z)(n,F.SvgPropertyXrnaType.NUCLEOTIDE,"Nucleotides"),(0,u.Z)(n,F.SvgPropertyXrnaType.BASE_PAIR,"BasePairs"),(0,u.Z)(n,F.SvgPropertyXrnaType.LABEL_LINE,"LabelLines"),(0,u.Z)(n,F.SvgPropertyXrnaType.LABEL_CONTENT,"LabelContents"),(0,u.Z)(n,F.SvgPropertyXrnaType.PATH,"Paths"),(0,u.Z)(n,F.SvgPropertyXrnaType.CENTERLINE,"Centerline"),n),h=["Nucleotides","BasePairs","LabelLines","LabelContents","Paths","Centerline",f],m={},v=0,x=h;v<x.length;v++){var g=x[v],y=document.createElement("g");y.setAttribute("id",g),m[g]=y}function b(e,t){var n=t.getAttribute("transform"),r=(0,Z.identity)();if(null!==n){var o,a=n.replaceAll(/\)\s*(?!$)/g,")|").split("|"),i=(0,l.Z)(a);try{for(i.s();!(o=i.n()).done;){var s=o.value;r=(0,Z.multiplyAffineMatrices)(r,(0,Z.parseAffineMatrix)(s))}}catch(v){i.e(v)}finally{i.f()}}e=(0,Z.multiplyAffineMatrices)(e,r);var u,c=t.getAttribute(F.SVG_PROPERTY_XRNA_TYPE);if("g"!==t.tagName||[F.SvgPropertyXrnaType.BASE_PAIR,F.SvgPropertyXrnaType.LABEL_LINE].includes(null!==c&&void 0!==c?c:""))u=null!==c&&c in p?m[p[c]]:m[f],t.setAttribute("transform",(0,Z.affineMatrixToString)(e)),u.appendChild(t);else for(var d=0,h=Array.from(t.children);d<h.length;d++){b(e,h[d])}}for(var N=0,E=Array.from(s.children);N<E.length;N++){var I=E[N];b((0,Z.identity)(),I),I.remove()}for(var C=0,S=h;C<S.length;C++){var _=m[S[C]];_&&_.children.length>0&&s.appendChild(_)}var A,P=(0,l.Z)(s.querySelectorAll("animate"));try{for(P.s();!(A=P.n()).done;){A.value.remove()}}catch(T){P.e(T)}finally{P.f()}return o.innerHTML=s.outerHTML,o.outerHTML})),D),H=(0,a.Z)((0,a.Z)({},W),{},(0,u.Z)({},z.json,(function(e){var t=[],n=[],r={},o={},i={},c={},d="";function p(e){var n,r=t.findIndex((function(t){return t["font-family"]===e.family&&t["font-size"]==="".concat(e.size)&&t["font-weight"]===e.weight&&t["font-style"]===e.style}));-1===r?(d="font#".concat(t.length),t.push((n={name:d},(0,u.Z)(n,"font-family",e.family),(0,u.Z)(n,"font-size","".concat(e.size)),(0,u.Z)(n,"font-weight",e.weight),(0,u.Z)(n,"font-style",e.style),n))):d="font#".concat(r)}var h="";function m(e){var t,r=(0,M.toCSS)(e.stroke),o=n.findIndex((function(t){return t["stroke-width"]==="".concat(e.strokeWidth)&&t.stroke===r}));-1===o?(h="stroke#".concat(n.length),n.push((t={name:h},(0,u.Z)(t,"stroke-width","".concat(e.strokeWidth)),(0,u.Z)(t,"stroke",r),t))):h="stroke#".concat(o)}var v=Object.values(e);return v.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var t,n,a=(0,s.Z)(e,2),l=a[0],u=a[1],c=Number.parseInt(l);p(null!==(t=u.font)&&void 0!==t?t:w.default.DEFAULT),i[c]=["text-"+(0,M.toCSS)(null!==(n=u.color)&&void 0!==n?n:M.BLACK),d];var f,v,x=u.labelContentProps;void 0!==x&&(p(null!==(f=x.font)&&void 0!==f?f:w.default.DEFAULT),r[c]=["text-"+(0,M.toCSS)(null!==(v=x.color)&&void 0!==v?v:M.BLACK),d]);var g,y,b=u.labelLineProps;void 0!==b&&(m({stroke:null!==(g=b.color)&&void 0!==g?g:M.BLACK,strokeWidth:null!==(y=b.strokeWidth)&&void 0!==y?y:k.DEFAULT_STROKE_WIDTH}),o[c]=[h])}))}))})),JSON.stringify({classes:t.concat(n),rnaComplexes:v.map((function(e){var t=Object.entries(e.rnaMoleculeProps),n=e.basePairs,u=new Array;return{name:e.name,rnaMolecules:t.map((function(t){for(var d=(0,s.Z)(t,2),p=d[0],v=d[1],x=new Array,g=n[p],y=0,b=Object.entries(g);y<b.length;y++){var N,E=(0,s.Z)(b[y],2),I=E[0],C=E[1],S=(0,l.Z)(C);try{for(S.s();!(N=S.n()).done;){var _,A,T,w=N.value,O=Number.parseInt(I);if((0,P.isRelevantBasePairKeySetInPair)({rnaMoleculeName:p,nucleotideIndex:O},w)){var L=null!==(_=w.basePairType)&&void 0!==_?_:(0,R.getBasePairType)(v.nucleotideProps[O].symbol,e.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol);m({strokeWidth:null!==(A=w.strokeWidth)&&void 0!==A?A:k.DEFAULT_STROKE_WIDTH,stroke:null!==(T=w.color)&&void 0!==T?T:M.BLACK}),c[O]=[h];var j={basePairType:L,classes:c[O],residueIndex1:v.firstNucleotideIndex+O,residueIndex2:v.firstNucleotideIndex+w.nucleotideIndex,points:w.points},D=p,Z=w.rnaMoleculeName;if(R.default.isRedundantLeontisWesthofType(j.basePairType)){j.basePairType=R.default.reverseDirectedTypeMap[j.basePairType];var F=D;D=Z,Z=F;var B=j.residueIndex1;j.residueIndex1=j.residueIndex2,j.residueIndex2=B}D===Z?x.push(j):u.push((0,a.Z)((0,a.Z)({},j),{},{rnaMoleculeName1:D,rnaMoleculeName2:Z}))}}}catch(G){S.e(G)}finally{S.f()}}var U=new Array,z=Object.entries(v.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));return z.forEach((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,a=n.labelContentProps,i=n.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:t+v.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[t],label:a.content,x:a.x+n.x,y:-(a.y+n.y)}),void 0!==i&&(l.labelLine={classes:o[t],points:i.points.map((function(e){var t=(0,f.add)(e,n);return t.y=-t.y,t}))}),U.push(l)}})),{name:p,basePairs:x,labels:U,sequence:z.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps;return{classes:i[t],residueIndex:t+v.firstNucleotideIndex,residueName:n.symbol,x:n.x,y:-n.y}}))}})),basePairs:u}}))})}))),K=n(8467),V=n(9750),X=n(3413),q=n(7457),Y=n(9967);function Q(e){if(0===e.length)return 0;var t=(0,i.Z)(e).sort((function(e,t){return e-t})),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]}function $(e,t){if(e>t){var n=e;e=t,t=n}var r=R.BasePair.typeRecord,o=void 0;return e in r&&(o=r[e][t]),void 0===o?R.BasePair.Type.MISMATCH:o}var J,ee=n.p+"static/media/loading.b29632a55bfb1d07d50fd6492383786b.svg",te=n(5910),ne=n(974),re=n(920),oe=n(1702),ae=n(4914),ie=n(6768),le=n(184);function se(e,t,n,r,o,a,i,l){var s=e.rnaMoleculeProps[t],u=e.rnaMoleculeProps[n];if(s&&u)for(var c=l[V.pE.CANONICAL_BASE_PAIR_DISTANCE],d=l[V.pE.WOBBLE_BASE_PAIR_DISTANCE],p=l[V.pE.MISMATCH_BASE_PAIR_DISTANCE],h=l[V.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],m=0;m<a;m++){var v=r+m,x=o-m;if(!(v in s.nucleotideProps)||!(x in u.nucleotideProps))break;var g=s.nucleotideProps[v],y=u.nucleotideProps[x],b=i;if(g.symbol&&y.symbol)try{b=(0,R.getBasePairType)(g.symbol,y.symbol)}catch(F){b=R.BasePair.Type.MISMATCH}var N=c;if(b===R.BasePair.Type.WOBBLE?N=d:b===R.BasePair.Type.MISMATCH&&(N=p),0===m){var E={x:(g.x+y.x)/2,y:(g.y+y.y)/2},I=(0,f.subtract)(y,g);if((0,f.magnitude)(I)>0){var C=(0,f.normalize)(I),S=N/2;g.x=E.x-C.x*S,g.y=E.y-C.y*S,y.x=E.x+C.x*S,y.y=E.y+C.y*S}}else{var _=r+m-1,A=o-m+1;if(_ in s.nucleotideProps&&A in u.nucleotideProps){var P=s.nucleotideProps[_],T=u.nucleotideProps[A],M={x:(P.x+T.x)/2,y:(P.y+T.y)/2},w={x:(g.x+y.x)/2,y:(g.y+y.y)/2},k=(0,f.subtract)(w,M);if((0,f.magnitude)(k)>0){var O=(0,f.normalize)(k),L=(0,f.add)(M,(0,f.scaleUp)(O,h)),j=(0,f.subtract)(y,g);if((0,f.magnitude)(j)>0){var D=(0,f.normalize)(j),Z=N/2;g.x=L.x-D.x*Z,g.y=L.y-D.y*Z,y.x=L.x+D.x*Z,y.y=L.y+D.y*Z}}}}}}!function(e){var t,n;!function(e){function t(e){var t=e.singularNucleotideProps.labelContentProps,n=(0,c.useContext)(X._.OrientationEditor.ResetDataTrigger),r=(0,c.useState)(t.x),o=(0,s.Z)(r,2),a=o[0],i=o[1],l=(0,c.useState)(t.y),u=(0,s.Z)(l,2),d=u[0],f=u[1],p=(0,c.useState)(t.content),h=(0,s.Z)(p,2),m=h[0],v=h[1];return(0,c.useEffect)((function(){i(t.x),f(t.y),v(t.content)}),[n]),(0,le.jsxs)(re.z.Component,{title:"Content",children:[(0,le.jsxs)("label",{children:["x:\xa0",(0,le.jsx)(oe.Z.Number,{value:a,setValue:function(t){i(t),e.rerender(t,d,m)}})]}),(0,le.jsx)("br",{}),(0,le.jsxs)("label",{children:["y:\xa0",(0,le.jsx)(oe.Z.Number,{value:d,setValue:function(t){f(t),e.rerender(a,t,m)}})]}),(0,le.jsx)("br",{}),(0,le.jsxs)("label",{children:["content:\xa0",(0,le.jsx)("input",{type:"text",value:m,onChange:function(t){var n=t.target.value;v(n),e.rerender(a,d,n)}})]})]})}function n(e){var t=e.singularNucleotideProps.labelLineProps.points,n=(0,c.useContext)(X._.OrientationEditor.ResetDataTrigger),r=(0,c.useState)(0),o=(0,s.Z)(r,2),i=o[0],l=o[1],u=(0,c.useState)(0),d=(0,s.Z)(u,2),p=d[0],h=d[1],m=(0,c.useState)(0),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=(0,c.useState)(void 0),b=(0,s.Z)(y,2),N=b[0],E=b[1];function I(){var n=t[0];E({initialCenter:{x:0,y:0},positions:t,onUpdatePositions:function(){e.rerender(C.x,C.y,i),h(C.x),g(C.y)},normal:(0,f.orthogonalize)(n),initialAngle:(0,f.asAngle)(n),initialScale:(0,f.magnitude)(n)})}var C=(0,c.useMemo)((function(){return t[i]}),[i,t]);return(0,c.useEffect)((function(){h(C.x),g(C.y)}),[C]),(0,c.useEffect)((function(){h(C.x),g(C.y),I()}),[n]),(0,le.jsxs)(re.z.Component,{title:"Line Positions",children:[(0,le.jsxs)(re.z.Component,{title:"Single position",children:[(0,le.jsxs)("label",{children:["Edit position #\xa0",(0,le.jsx)(oe.Z.Integer,{value:i+1,setValue:function(e){var n=e-1,r=t[n];l(n),h(r.x),g(r.y)},min:1,max:t.length})]}),(0,le.jsx)("br",{}),(0,le.jsxs)("label",{children:["x:\xa0",(0,le.jsx)(oe.Z.Number,{value:p,setValue:function(t){h(t),C.x=t,e.rerender(t,x,i),I()}})]}),(0,le.jsx)("br",{}),(0,le.jsxs)("label",{children:["y:\xa0",(0,le.jsx)(oe.Z.Number,{value:x,setValue:function(t){g(t),C.y=t,e.rerender(p,t,i),I()}})]})]}),N&&(0,le.jsx)(ae.Y.Component,(0,a.Z)({},N))]})}e.Component=function(e){var r=e.singularNucleotideWithLabelContentProps,o=e.singularNucleotideWithLabelLineProps,l=e.rerender;return(0,le.jsxs)(le.Fragment,{children:[void 0!==r&&(0,le.jsx)(t,{singularNucleotideProps:r,rerender:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{x:e,y:t,content:n}),l()}))}),void 0!==o&&(0,le.jsx)(n,{singularNucleotideProps:o,rerender:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){var r=o.labelLineProps.points,s=r[n];s.x=e,s.y=t,o.labelLineProps=(0,a.Z)((0,a.Z)({},o.labelLineProps),{},{points:(0,i.Z)(r)}),l()}))})]})}}(t||(t={})),(n||(n={})).Component=function(e){var t=e.rerender,n=e.labelContentProps,r=e.labelLineProps,o=(0,c.useContext)(X._.App.Settings)[V.pE.USE_DEGREES],a=(0,c.useMemo)((function(){var e=new Array;e.push.apply(e,(0,i.Z)(n));var t,o=(0,l.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value.points;e.push.apply(e,(0,i.Z)(a))}}catch(s){o.e(s)}finally{o.f()}return{initialCenter:{x:0,y:0},positions:[],normal:{x:1,y:0},relativePositions:e}}),[n,r]),s=a.initialCenter,u=a.positions,d=a.normal,f=a.relativePositions;return(0,le.jsx)(re.z.Component,{title:"Positions",children:(0,le.jsx)(ie.U.Component,{initialCenter:s,positions:u,onUpdatePositions:function(){var e=f[0];n[0].x=e.x,n[0].y=e.y,t()},normal:d,relativePositions:f,useDegreesFlag:o,applyCenterToRelativePositionsFlag:!0})})},e.Component=function(e){var r=e.rnaComplexProps,o=e.indicesOfAffectedNucleotides,u=e.setNucleotideKeysToRerender,d=(0,c.useMemo)((function(){for(var e,u,c=new Array,d=new Array,f={},p=0,h=Object.entries(o);p<h.length;p++){var m=(0,s.Z)(h[p],2),v=m[0],x=m[1],g=Number.parseInt(v),y=r[g].rnaMoleculeProps;g in f||(f[g]={});for(var b=f[g],N=0,E=Object.entries(x);N<E.length;N++){var I=(0,s.Z)(E[N],2),C=I[0],S=I[1],_=y[C].nucleotideProps;C in b||(b[C]=[]);var A,P=b[C],T=(0,l.Z)(S.values());try{for(T.s();!(A=T.n()).done;){var k=A.value,O=_[k],L=O.labelContentProps,j=O.labelLineProps,D=!1;void 0!==L&&(c.push(O),D=!0),void 0!==j&&(d.push(O),D=!0),D&&P.push(k)}}catch(re){T.e(re)}finally{T.f()}P.sort(q.subtractNumbers)}}var Z=void 0;if(c.length>0){var F;Z=null!==(F=c[0].labelContentProps.font)&&void 0!==F?F:w.default.DEFAULT;for(var B=1;B<c.length;B++){var U=c[B].labelContentProps.font;if(!w.default.areEqual(Z,null!==U&&void 0!==U?U:w.default.DEFAULT)){Z=void 0;break}}}var z=void 0;if(c.length>0){var G;z=null!==(G=c[0].labelContentProps.color)&&void 0!==G?G:M.BLACK;for(var W=1;W<c.length;W++){var H=c[W].labelContentProps.color;if(!(0,M.areEqual)(z,null!==H&&void 0!==H?H:M.BLACK)){z=void 0;break}}if(void 0!==z)for(var K=1;K<d.length;K++){var V=d[K].labelLineProps.color;if(!(0,M.areEqual)(z,null!==V&&void 0!==V?V:M.BLACK)){z=void 0;break}}}else{var X;z=null!==(X=d[0].labelLineProps.color)&&void 0!==X?X:M.BLACK;for(var Y=1;Y<d.length;Y++){var Q=d[Y].labelLineProps.color;if(!(0,M.areEqual)(z,null!==Q&&void 0!==Q?Q:M.BLACK)){z=void 0;break}}}var $,J=c.length,ee=d.length;switch(Math.max(J,ee)){case 0:$=(0,le.jsx)(le.Fragment,{});break;case 1:$=(0,le.jsx)(t.Component,{rerender:R,singularNucleotideWithLabelContentProps:c[0],singularNucleotideWithLabelLineProps:d[0]});break;default:var te=c.map((function(e){return e.labelContentProps})),ne=d.map((function(e){return e.labelLineProps.points}));$=(0,le.jsx)(n.Component,{rerender:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=0;e<c.length;e++){var t=c[e],n=te[e];t.labelContentProps=(0,a.Z)((0,a.Z)({},t.labelContentProps),{},{x:n.x,y:n.y})}for(var r=0;r<d.length;r++){var o=d[r];ne[r];o.labelLineProps=(0,a.Z)((0,a.Z)({},o.labelLineProps),{},{points:(0,i.Z)(ne[r])})}R()})),labelContentProps:c.map((function(e){return e.labelContentProps})),labelLineProps:d.map((function(e){return e.labelLineProps}))})}return{nucleotidePropsWithLabelContentProps:c,nucleotidePropsWithLabelLineProps:d,nucleotideKeysToRerender:f,initialColor:null!==(e=z)&&void 0!==e?e:structuredClone(M.BLACK),initialFont:null!==(u=Z)&&void 0!==u?u:structuredClone(w.default.DEFAULT),positionsEditor:$}}),[o]),f=d.nucleotidePropsWithLabelContentProps,p=d.nucleotidePropsWithLabelLineProps,h=d.nucleotideKeysToRerender,m=d.initialColor,v=d.initialFont,x=d.positionsEditor,g=(0,c.useState)(!0),y=(0,s.Z)(g,2),b=y[0],N=y[1],E=(0,c.useState)(!0),I=(0,s.Z)(E,2),C=I[0],S=I[1],_=(0,c.useState)(v),A=(0,s.Z)(_,2),P=A[0],T=A[1];function R(){u(structuredClone(h))}return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("b",{children:"Edit label(s) per constraint:"}),(0,le.jsx)("br",{}),(0,le.jsxs)(te.S.Component,{color:m,setColorHelper:function(e){if(b){var t,n=(0,l.Z)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{color:e})}}catch(u){n.e(u)}finally{n.f()}}if(C){var o,i=(0,l.Z)(p);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.labelLineProps=(0,a.Z)((0,a.Z)({},s.labelLineProps),{},{color:e})}}catch(u){i.e(u)}finally{i.f()}}R()},children:[(0,le.jsx)("b",{children:"Recolor:"}),(0,le.jsxs)("ul",{style:{margin:0},children:[(0,le.jsx)("li",{children:(0,le.jsxs)("label",{children:["Text\xa0",(0,le.jsx)("input",{type:"checkbox",checked:b,onChange:function(){N(!b)}})]})}),(0,le.jsx)("li",{children:(0,le.jsxs)("label",{children:["Lines\xa0",(0,le.jsx)("input",{type:"checkbox",checked:C,onChange:function(){S(!C)}})]})})]})]}),(0,le.jsx)(ne.f.Component,(0,a.Z)((0,a.Z)({},P),{},{setFont:function(e){var t,n=(0,l.Z)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{font:e})}}catch(o){n.e(o)}finally{n.f()}T(structuredClone(e)),R()}})),x]})}}(J||(J={}));n(3508);var ue=n(7587),ce=n(700),de=(0,ce.Z)("pencil-ruler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),fe=function(e){var t=e.width,n=void 0===t?kt:t,r=e.children,o=(0,ue.Fg)().theme;return(0,le.jsxs)("div",{style:{width:"number"===typeof n?"".concat(n,"px"):n,height:"100%",display:"flex",flexDirection:"column",background:o.colors.background,borderRight:"2px solid ".concat(o.colors.border),boxShadow:o.shadows.xl,position:"relative",overflow:"hidden",transition:o.transitions.default,zIndex:1e3},children:[(0,le.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.primary,", ").concat(o.colors.accent,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,le.jsx)("div",{style:{padding:"7px 10px 7px 20px",borderBottom:"1px solid ".concat(o.colors.borderLight),background:o.colors.surface,flexShrink:0},children:(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,le.jsx)(de,{size:24}),(0,le.jsxs)("div",{children:[(0,le.jsx)("h1",{style:{fontSize:o.typography.fontSize.xl,fontWeight:"700",color:o.colors.text,margin:"0 0 2px 0"},children:"Exornata"}),(0,le.jsx)("p",{style:{fontSize:o.typography.fontSize.md,fontWeight:"500",color:o.colors.textSecondary,margin:0},children:"Visualize, Edit, Share"})]})]})}),(0,le.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"6px",overflow:"auto",background:o.colors.backgroundSecondary},children:r}),(0,le.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.borderLight,", ").concat(o.colors.border,")"),position:"absolute",bottom:0,left:0,right:0,zIndex:10}})]})},pe=function(e){var t=e.title,n=e.children,r=e.borderRadius,o=void 0===r?12:r,a=(0,ue.Fg)().theme;return(0,le.jsxs)("div",{style:{background:a.colors.surface,border:"1px solid ".concat(a.colors.border),borderRadius:o,margin:"0 0 10px 0",boxShadow:a.shadows.sm,transition:a.transitions.default,overflow:"hidden"},children:[(0,le.jsx)("div",{style:{padding:"8px 16px",background:a.colors.surfaceHover,fontSize:a.typography.fontSize.sm,fontWeight:"700",letterSpacing:"0.5px",color:a.colors.text,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(a.colors.border),textTransform:"uppercase"},children:(0,le.jsx)("span",{style:{fontSize:a.typography.fontSize.xs,fontWeight:"700",color:a.colors.textSecondary},children:t})}),(0,le.jsx)("div",{style:{padding:"16px",minHeight:"48px",background:a.colors.surface},children:n})]})},he=n(1959),me={Primitives:[Y.Uq.Enum.SINGLE_NUCLEOTIDE,Y.Uq.Enum.SINGLE_BASE_PAIR],Fragments:[Y.Uq.Enum.RNA_SINGLE_STRAND,Y.Uq.Enum.RNA_HELIX,Y.Uq.Enum.RNA_STACKED_HELIX,Y.Uq.Enum.RNA_CYCLE],Units:[Y.Uq.Enum.RNA_SUB_DOMAIN,Y.Uq.Enum.RNA_MOLECULE,Y.Uq.Enum.RNA_COMPLEX],Scope:[Y.Uq.Enum.SINGLE_COLOR,Y.Uq.Enum.ENTIRE_SCENE]},ve=function(e){var t=e.constraint,n=e.isActive,r=e.onClick,o=e.disabled,a=void 0!==o&&o,i=(0,ue.Fg)().theme,l=c.useState(!1),d=(0,s.Z)(l,2);d[0],d[1];return(0,le.jsx)(he.z,{label:function(e){var t;return(t={},(0,u.Z)(t,Y.Uq.Enum.SINGLE_NUCLEOTIDE,"Nucleotide"),(0,u.Z)(t,Y.Uq.Enum.SINGLE_BASE_PAIR,"Base Pair"),(0,u.Z)(t,Y.Uq.Enum.RNA_SINGLE_STRAND,"Strand"),(0,u.Z)(t,Y.Uq.Enum.RNA_HELIX,"Helix"),(0,u.Z)(t,Y.Uq.Enum.RNA_STACKED_HELIX,"Stacked"),(0,u.Z)(t,Y.Uq.Enum.RNA_SUB_DOMAIN,"Domain"),(0,u.Z)(t,Y.Uq.Enum.RNA_CYCLE,"Cycle"),(0,u.Z)(t,Y.Uq.Enum.RNA_MOLECULE,"Molecule"),(0,u.Z)(t,Y.Uq.Enum.RNA_COMPLEX,"Complex"),(0,u.Z)(t,Y.Uq.Enum.SINGLE_COLOR,"Color"),(0,u.Z)(t,Y.Uq.Enum.ENTIRE_SCENE,"Scene"),t)[e]||e}(t),onClick:r,disabled:a,variant:n?"simpleHighlight":"secondary",icon:function(e){var t,n=i.colors.primary;return(t={},(0,u.Z)(t,Y.Uq.Enum.SINGLE_NUCLEOTIDE,(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,le.jsx)("text",{x:"12",y:"12",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"central",children:"N"})]})),(0,u.Z)(t,Y.Uq.Enum.SINGLE_BASE_PAIR,(0,le.jsxs)("svg",{width:"48",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("circle",{cx:"0",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,le.jsx)("text",{x:"0",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"C"}),(0,le.jsx)("line",{x1:"9.5",y1:"12",x2:"20",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("circle",{cx:"25",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,le.jsx)("text",{x:"25",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"G"})]})),(0,u.Z)(t,Y.Uq.Enum.RNA_SINGLE_STRAND,(0,le.jsxs)("svg",{width:"28",height:"24",viewBox:"0 0 64 48",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("circle",{cx:"10",cy:"28",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("path",{d:"M 18 26 Q 26 18 32 20",stroke:i.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,le.jsx)("circle",{cx:"32",cy:"20",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("path",{d:"M 40 22 Q 46 26 54 28",stroke:i.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,le.jsx)("circle",{cx:"54",cy:"28",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"})]})),(0,u.Z)(t,Y.Uq.Enum.RNA_HELIX,(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("path",{d:"M 6 4 Q 4 8 6 12 Q 8 16 6 20",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 18 4 Q 20 8 18 12 Q 16 16 18 20",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"6",y1:"7",x2:"18",y2:"7",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("line",{x1:"6",y1:"17",x2:"18",y2:"17",stroke:i.colors.borderDark,strokeWidth:"1.5"})]})),(0,u.Z)(t,Y.Uq.Enum.RNA_STACKED_HELIX,(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("path",{d:"M 6 3 Q 4 5 6 7",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 18 3 Q 20 5 18 7",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"6",y1:"5",x2:"18",y2:"5",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("path",{d:"M 6 10 Q 4 12 6 14",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 18 10 Q 20 12 18 14",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("path",{d:"M 6 17 Q 4 19 6 21",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 18 17 Q 20 19 18 21",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"6",y1:"19",x2:"18",y2:"19",stroke:i.colors.borderDark,strokeWidth:"1.5"})]})),(0,u.Z)(t,Y.Uq.Enum.RNA_SUB_DOMAIN,(0,le.jsxs)("svg",{width:"32",height:"24",viewBox:"0 0 28 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("path",{d:"M 12 22 L 12 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 16 22 L 16 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"12",y1:"20",x2:"16",y2:"20",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("line",{x1:"12",y1:"17",x2:"16",y2:"17",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("line",{x1:"12",y1:"14",x2:"16",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("line",{x1:"12",y1:"11",x2:"16",y2:"11",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,le.jsx)("path",{d:"M 12 8 A 2 2 0 0 1 16 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 12 15 L 6 15 L 6 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 12 13 L 8 13 L 8 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"6",y1:"14",x2:"8",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("line",{x1:"6",y1:"13",x2:"8",y2:"13",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("path",{d:"M 6 12 A 1 1 0 0 0 8 12",stroke:n,strokeWidth:"2",fill:"none"}),(0,le.jsx)("path",{d:"M 16 15 L 22 15 L 22 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("path",{d:"M 16 13 L 20 13 L 20 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,le.jsx)("line",{x1:"20",y1:"14",x2:"22",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("line",{x1:"20",y1:"13",x2:"22",y2:"13",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,le.jsx)("path",{d:"M 20 12 A 1 1 0 0 1 22 12",stroke:n,strokeWidth:"2",fill:"none"})]})),(0,u.Z)(t,Y.Uq.Enum.RNA_CYCLE,(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,le.jsx)("circle",{cx:"12",cy:"12",r:"6",stroke:n,strokeWidth:"2",fill:"none"}),(0,le.jsx)("circle",{cx:"12",cy:"12",r:"7",stroke:i.colors.borderDark,strokeWidth:"0.5",fill:"none"}),(0,le.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:i.colors.borderDark,strokeWidth:"0.5",fill:"none"})]})),(0,u.Z)(t,Y.Uq.Enum.SINGLE_COLOR,(0,le.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,le.jsxs)("g",{transform:"translate(12 12) scale(1.3) translate(-12 -12)",children:[(0,le.jsx)("path",{d:"M 12 4 Q 6 4 4 8 Q 2 12 4 16 Q 6 20 12 20 Q 14 20 16 19 L 18 16 Q 20 14 18 12 Q 16 10 14 11 Q 12 12 12 10 Q 12 6 12 4 Z",fill:n,stroke:"none",strokeWidth:"1.5"}),(0,le.jsx)("circle",{cx:"8",cy:"9.5",r:"2",fill:i.colorPalleteCircleFills[0],stroke:"none",strokeWidth:"0.8"}),(0,le.jsx)("circle",{cx:"10",cy:"14",r:"2",fill:i.colorPalleteCircleFills[1],stroke:"none",strokeWidth:"0.8"}),(0,le.jsx)("circle",{cx:"14.5",cy:"15",r:"2",fill:i.colorPalleteCircleFills[2],stroke:"none",strokeWidth:"0.8"})]})})),(0,u.Z)(t,Y.Uq.Enum.RNA_MOLECULE,(0,le.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,le.jsx)("path",{d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})),(0,u.Z)(t,Y.Uq.Enum.RNA_COMPLEX,(0,le.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,le.jsxs)("g",{transform:"translate(0, 2.5) scale(0.8)",children:[(0,le.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,le.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:i.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})),(0,u.Z)(t,Y.Uq.Enum.ENTIRE_SCENE,(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,le.jsx)("rect",{x:"1",y:"1",width:"22",height:"22",stroke:i.colors.text,strokeWidth:"1",fill:"none",rx:"1"}),(0,le.jsx)("path",{transform:"scale(0.5)",d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,le.jsxs)("g",{transform:"translate(16, 7) scale(0.5) translate(0, 3.5) rotate(45)",children:[(0,le.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,le.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:i.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]})),t)[e]||(0,le.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,le.jsx)("circle",{cx:"6",cy:"6",r:"2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}(t)})},xe=function(e){var t,n=e.constraint,r=e.onConstraintChange,o=(0,ue.Fg)().theme,a=c.useState("Primitives"),i=(0,s.Z)(a,2),l=i[0],u=i[1];return(0,le.jsx)(pe,{title:"Constraints modes",borderRadius:8,children:(0,le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(0,le.jsxs)("div",{children:[(0,le.jsx)("div",{style:{display:"flex",gap:"4px",marginBottom:"4px",borderBottom:"1px solid ".concat(o.colors.border)},children:Object.keys(me).map((function(e){return(0,le.jsx)("button",{onClick:function(){return u(e)},style:{height:o.buttonSizes.md.height,padding:o.buttonSizes.md.padding,border:"none",background:l===e?o.colors.primary:"transparent",color:l===e?o.colors.textInverse:o.colors.text,borderRadius:"".concat(o.borderRadius.md," ").concat(o.borderRadius.md," 0 0"),fontSize:o.buttonSizes.sm.fontSize,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"1px"},children:e},e)}))}),(0,le.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",minHeight:"30px",alignItems:"flex-start",alignContent:"flex-start"},children:null===(t=me[l])||void 0===t?void 0:t.map((function(e){return(0,le.jsx)(ve,{constraint:e,isActive:n===e,onClick:function(){return null===r||void 0===r?void 0:r(e)},disabled:!r},e)}))})]})})})},ge=(0,ce.Z)("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),ye=(0,ce.Z)("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),be=(0,ce.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ne=(0,ce.Z)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Ee=function(e){var t=e.onUndo,n=e.onRedo,r=e.canUndo,o=e.canRedo,a=(e.onResetViewport,e.undoStack,e.redoStack,e.onJumpToHistory,e.onResetToLastCheckpoint),i=(e.mode,e.constraint,e.onFreezeSelected,e.onUnfreezeSelected,e.onUnfreezeAll),l=e.hasFrozenNucleotides,s=void 0!==l&&l,u=(e.hasSelectedNucleotides,(0,ue.Fg)().theme);return(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,le.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[(0,le.jsx)(he.z,{onClick:t,disabled:!r,icon:(0,le.jsx)(ge,{size:14}),label:"Undo",hint:"Undo last action",variant:"secondary"}),(0,le.jsx)(he.z,{onClick:n,disabled:!o,icon:(0,le.jsx)(ye,{size:14}),label:"Redo",hint:"Redo last action",variant:"secondary"}),(0,le.jsx)(he.z,{onClick:a,disabled:!a,icon:(0,le.jsx)(be,{size:14}),label:"Restore",hint:"Restore to last checkpoint",variant:"danger"}),(0,le.jsx)(he.z,{onClick:i,disabled:!i||!s,icon:(0,le.jsx)(Ne,{size:14}),label:"Unlock",hint:"Unlock all nucleotides (allows movement)",variant:"danger"})]}),(0,le.jsxs)("div",{style:{fontSize:"12px",color:u.colors.textSecondary,marginTop:"8px",lineHeight:"1.4"},children:[(0,le.jsx)("strong",{children:"Tip:"})," Use Middle-click to toggle (lock/unlock) nucleotides in place while moving others."]})]})},Ie=(0,ce.Z)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),Ce=(0,ce.Z)("cable",[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]]),Se=(0,ce.Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),_e=(0,ce.Z)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ae=function(e){var t=e.tab,n=e.isActive,r=e.onClick,o=e.disabled,a=void 0!==o&&o,i=(0,ue.Fg)().theme,l=c.useState(!1),u=(0,s.Z)(l,2),f=u[0],p=u[1];return(0,le.jsxs)("button",{onClick:r,disabled:a,onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"6px",height:i.buttonSizes.sm.height,padding:i.buttonSizes.sm.padding,border:"none",borderRadius:i.buttonSizes.sm.borderRadius,fontSize:i.buttonSizes.sm.fontSize,fontWeight:"600",cursor:a?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:a?.4:1,flex:1,background:a?i.colors.surfaceHover:n?i.colors.primary:f?i.colors.surfaceHover:"transparent",color:a?i.colors.textMuted:n?i.colors.textInverse:f?i.colors.primary:i.colors.textSecondary,boxShadow:n?i.shadows.md:"none",transform:n?"scale(1.02)":"scale(1)"},children:[function(e){switch(e){case d.OK.EDIT:return(0,le.jsx)(Ie,{size:12});case d.OK.FORMAT:return(0,le.jsx)(Ce,{size:12});case d.OK.ANNOTATE:return(0,le.jsx)(Se,{size:12});default:return(0,le.jsx)(_e,{size:12})}}(t),(0,le.jsx)("span",{style:{fontSize:i.typography.fontSize.sm,fontWeight:"600",textAlign:"center"},children:function(e){switch(e){case d.OK.EDIT:return"Edit";case d.OK.FORMAT:return"Format";case d.OK.ANNOTATE:return"Annotate";default:return e}}(t)})]})},Pe=function(e){var t=e.mode,n=e.onModeChange,r=e.onUndo,o=e.onRedo,a=e.canUndo,i=e.canRedo,l=e.onResetViewport,s=e.undoStack,u=e.redoStack,c=e.onJumpToHistory,f=e.onResetToLastCheckpoint,p=e.constraint,h=e.onFormatModeClick,m=e.onFreezeSelected,v=e.onUnfreezeSelected,x=e.onUnfreezeAll,g=e.hasFrozenNucleotides,y=e.hasSelectedNucleotides,b=(0,ue.Fg)().theme;return(0,le.jsx)(pe,{title:"drawing tools",borderRadius:8,children:(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,le.jsx)("div",{children:(0,le.jsx)("div",{style:{display:"flex",gap:"6px",background:b.colors.surfaceHover,padding:"4px",borderRadius:b.borderRadius.lg},children:d.eA.filter((function(e){return[d.OK.EDIT,d.OK.FORMAT,d.OK.ANNOTATE].includes(e)})).map((function(e){return(0,le.jsx)(Ae,{tab:e,isActive:t===e,onClick:function(){e===d.OK.FORMAT&&h?h():n&&n(e)}},e)}))})}),(0,le.jsx)(Ee,{onUndo:r,onRedo:o,canUndo:a,canRedo:i,onResetViewport:l,undoStack:s,redoStack:u,onJumpToHistory:c,onResetToLastCheckpoint:f,mode:t,constraint:p,onFreezeSelected:m,onUnfreezeSelected:v,onUnfreezeAll:x,hasFrozenNucleotides:g,hasSelectedNucleotides:y})]})})},Te=(0,ce.Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Re=(0,ce.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Me=(0,ce.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),we=(0,ce.Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),ke=function(e){e.onToggleBasePairEditor,e.onTogglePropertiesDrawer;var t=e.onToggleSettingsDrawer,n=e.onToggleAboutDrawer,r=e.onOpenDocs,o=e.onLoadExample;return(0,le.jsx)(pe,{title:"Utilities",borderRadius:8,children:(0,le.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(o||n||t||r)&&(0,le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px 12px"},children:[o&&(0,le.jsx)(he.z,{onClick:o,icon:(0,le.jsx)(Te,{size:12}),label:"Load Example",hint:"Load sample structure",variant:"secondary"}),n&&(0,le.jsx)(he.z,{onClick:n,icon:(0,le.jsx)(Re,{size:12}),label:"Quickstart",hint:"Quickstart guide",variant:"secondary"}),t&&(0,le.jsx)(he.z,{onClick:t,icon:(0,le.jsx)(Me,{size:12}),label:"Settings",hint:"Edit settings",variant:"secondary"}),r&&(0,le.jsx)(he.z,{onClick:r,icon:(0,le.jsx)(we,{size:12}),label:"User Guide",hint:"Open documentation",variant:"primary"})]})})})},Oe=function(e){var t=e.constraint,n=e.onConstraintChange,r=e.mode,o=e.onModeChange,a=e.onUndo,i=e.onRedo,l=e.canUndo,s=e.canRedo,u=e.onResetViewport,c=e.onToggleBasePairEditor,f=e.onTogglePropertiesDrawer,p=e.onToggleSettingsDrawer,h=e.onToggleAboutDrawer,m=e.onOpenDocs,v=e.onLoadExample,x=e.undoStack,g=e.redoStack,y=e.onJumpToHistory,b=e.onResetToLastCheckpoint,N=e.onFreezeSelected,E=e.onUnfreezeSelected,I=e.onUnfreezeAll,C=e.hasFrozenNucleotides,S=e.hasSelectedNucleotides;return(0,le.jsxs)(fe,{children:[(0,le.jsx)(xe,{constraint:t,onConstraintChange:n}),(0,le.jsx)(Pe,{mode:r||d.OK.EDIT,onModeChange:o,onUndo:a,onRedo:i,canUndo:l,canRedo:s,onResetViewport:u,undoStack:x,redoStack:g,onJumpToHistory:y,onResetToLastCheckpoint:b,constraint:t,onFreezeSelected:N,onUnfreezeSelected:E,onUnfreezeAll:I,hasFrozenNucleotides:C,hasSelectedNucleotides:S}),(0,le.jsx)(ke,{onToggleBasePairEditor:c,onTogglePropertiesDrawer:f,onToggleSettingsDrawer:p,onToggleAboutDrawer:h,onOpenDocs:m,onLoadExample:v})]})},Le=(n(8161),n(6088)),je=(0,ce.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),De=(0,ce.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Ze=function(e){var t=e.open,n=e.onClose,r=e.settings,o=e.setSettings,i=e.getDistanceDefaults,l=(0,ue.Fg)(),s=l.theme,d=(l.isDarkMode,(0,c.useRef)(null)),f=(0,c.useRef)(null);return(0,le.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"600px",background:s.colors.background,boxShadow:s.shadows.xl,transform:t?"translateX(0)":"translateX(100%)",transition:s.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"2px solid ".concat(s.colors.border)},children:[(0,le.jsxs)("div",{style:{padding:"24px 28px 20px 28px",borderBottom:"1px solid ".concat(s.colors.borderLight),display:"flex",alignItems:"center",justifyContent:"space-between",background:s.colors.surface,flexShrink:0,position:"relative"},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,le.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, ".concat(s.colors.primary,"20, ").concat(s.colors.accent,"20)"),borderRadius:s.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",color:s.colors.primary,border:"1px solid ".concat(s.colors.primary,"30")},children:(0,le.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,le.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73v.18a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,le.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,le.jsxs)("div",{children:[(0,le.jsx)("h2",{style:{fontSize:s.typography.fontSize.xxl,fontWeight:"700",color:s.colors.text,margin:"0 0 4px 0",letterSpacing:"-0.02em"},children:"Settings"}),(0,le.jsx)("p",{style:{fontSize:s.typography.fontSize.md,color:s.colors.textWeak||s.colors.textSecondary,margin:0,lineHeight:"1.4"},children:"Configure your application preferences and behavior"})]})]}),(0,le.jsx)("button",{onClick:n,style:{border:"1px solid ".concat(s.colors.border),background:s.colors.surface,cursor:"pointer",fontSize:s.typography.fontSize.md,color:s.colors.textSecondary,padding:"10px",borderRadius:s.borderRadius.lg,width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:s.transitions.default,boxShadow:s.shadows.sm},onMouseEnter:function(e){e.currentTarget.style.background=s.colors.surfaceHover,e.currentTarget.style.borderColor=s.colors.borderDark,e.currentTarget.style.color=s.colors.text,e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:function(e){e.currentTarget.style.background=s.colors.surface,e.currentTarget.style.borderColor=s.colors.border,e.currentTarget.style.color=s.colors.textSecondary,e.currentTarget.style.transform="scale(1)"},children:(0,le.jsx)(Le.Z,{size:18})})]}),(0,le.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"28px 28px 48px 28px",background:s.colors.backgroundSecondary},children:[(0,le.jsx)(pe,{title:"Import/Export",borderRadius:12,children:(0,le.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,le.jsxs)("button",{onClick:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.click()},style:(0,a.Z)((0,a.Z)({},Fe(s)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,le.jsx)(je,{size:16}),"Upload JSON"]}),(0,le.jsxs)("button",{onClick:function(){var e=f.current,t={};if(i)try{t=i()||{}}catch(c){}for(var n=(0,a.Z)({},t),o=0,l=Object.keys(r);o<l.length;o++){var s=l[o],u=r[s];n[s]="number"===typeof u&&Number.isNaN(u)?1:u}e.href="data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(n))),e.click()},style:(0,a.Z)((0,a.Z)({},Be(s)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,le.jsx)(De,{size:16}),"Download JSON"]}),(0,le.jsx)("input",{ref:d,type:"file",accept:".json",style:{display:"none"},onChange:function(e){var t=e.target.files;if(t&&0!==t.length){var n=new FileReader;n.addEventListener("load",(function(e){try{for(var t=JSON.parse(e.target.result),n=Object.keys(t),i=0,l=n;i<l.length;i++){var s=l[i],u=t[s];if(!(0,V.OP)(s)||typeof u!==V.kR[s])throw new Error("Unrecognized settings schema")}for(var c={},d=0,f=n;d<f.length;d++){var p=f[d];c[p]=t[p]}o((0,a.Z)((0,a.Z)({},r),c))}catch(h){}})),n.readAsText(t[0])}}}),(0,le.jsx)("a",{ref:f,style:{display:"none"},download:"xrna_settings.json"})]})}),(0,le.jsx)("div",{style:{height:"24px"}}),(0,le.jsx)(pe,{title:"Preferences",borderRadius:12,children:(0,le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",rowGap:"20px",columnGap:"24px",alignItems:"center"},children:V.Xd.filter((function(e){return!e.startsWith("grid_")})).map((function(e,t){var n=(0,le.jsx)(le.Fragment,{});switch(V.kR[e]){case"boolean":n=(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,le.jsx)("input",{type:"checkbox",checked:r[e],onChange:function(){return o((0,a.Z)((0,a.Z)({},r),{},(0,u.Z)({},e,!r[e])))},style:{width:"20px",height:"20px",accentColor:s.colors.primary,cursor:"pointer"}})});break;case"number":n=(0,le.jsx)("div",{style:{minWidth:"140px"},children:(0,le.jsx)(oe.Z.Number,{value:r[e],setValue:function(t){return o((0,a.Z)((0,a.Z)({},r),{},(0,u.Z)({},e,t)))}})});break;case"string":n=(0,le.jsx)("div",{style:{minWidth:"140px"},children:(0,le.jsx)("input",{type:"text",value:r[e],onChange:function(t){return o((0,a.Z)((0,a.Z)({},r),{},(0,u.Z)({},e,t.target.value)))},placeholder:"Enter value...",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid ".concat(s.colors.border),background:s.colors.surface,color:s.colors.text,fontSize:"14px"}})});break;default:n=(0,le.jsx)(le.Fragment,{})}return(0,le.jsxs)(c.Fragment,{children:[(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,le.jsx)("label",{title:V.GO[e],style:{color:s.colors.textStrong||s.colors.text,fontSize:"15px",fontWeight:"600",lineHeight:"1.4",cursor:"pointer"},children:V.zT[e]}),(0,le.jsx)("div",{style:{fontSize:"13px",color:s.colors.textWeak||s.colors.textSecondary,lineHeight:"1.4",maxWidth:"400px"},children:V.GO[e]})]}),(0,le.jsx)("div",{children:n})]},t)}))})})]})]})};function Fe(e){return{padding:"10px 16px",borderRadius:"10px",border:"1px solid ".concat(e.colors.border),background:e.colors.surface,color:e.colors.textStrong||e.colors.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:e.transitions.default,display:"flex",alignItems:"center",gap:"6px",boxShadow:e.shadows.sm}}function Be(e){return(0,a.Z)((0,a.Z)({},Fe(e)),{},{background:e.colors.primary,color:e.colors.textInverse,border:"1px solid ".concat(e.colors.primary),fontWeight:"600",boxShadow:e.shadows.md})}var Ue=function(e){var t=e.open,n=e.onClose,r=e.renderTabInstructions,o=(0,ue.Fg)().theme;return(0,le.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"720px",background:o.colors.backgroundSecondary,transform:t?"translateX(0)":"translateX(100%)",transition:o.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(o.colors.border)},children:[(0,le.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(o.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:o.colors.surfaceHover,flexShrink:0,position:"relative"},children:[(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,le.jsx)("span",{style:{fontSize:o.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:o.colors.text},children:"Quickstart"})}),(0,le.jsx)("button",{onClick:n,style:{border:"1px solid ".concat(o.colors.border),background:o.colors.surface,cursor:"pointer",fontSize:o.typography.fontSize.md,color:o.colors.text,padding:"6px 8px",borderRadius:o.borderRadius.md,width:"28px",height:"28px"},children:(0,le.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,le.jsx)("path",{d:"M9 3L3 9M3 3l6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,le.jsxs)("div",{style:{flex:1,overflow:"auto",padding:16},children:[(0,le.jsx)(pe,{title:"Quickstart",borderRadius:8,children:(0,le.jsx)("div",{style:{fontSize:o.typography.fontSize.md,color:o.colors.text},children:r(d.OK.ABOUT)})}),(0,le.jsx)("div",{style:{height:12}})]})]})},ze=(0,ce.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ge=(0,ce.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function We(e){if(!e)return{};if(e===R.default.Type.CANONICAL||e===R.default.Type.WOBBLE||e===R.default.Type.MISMATCH)return{};var t=String(e).split("_");if(0===t.length)return{};var n=t[0];if("cis"!==n&&"trans"!==n)return{};var r=n,o=1;function a(){var e=t[o],n=t[o+1];return"watson"===e&&"crick"===n?(o+=2,"watson_crick"):"sugar"===e&&"edge"===n?(o+=2,"sugar_edge"):"hoogsteen"===e?(o+=1,"hoogsteen"):void 0}var i=a(),l=a();return i&&l?{orientation:r,edgeA:i,edgeB:l}:{orientation:r}}function He(e,t,n){if(e&&t&&n)return"".concat(e,"_").concat(t,"_").concat(n)}function Ke(e){if(!e)return"auto";switch(e){case R.default.Type.CANONICAL:return"canonical";case R.default.Type.WOBBLE:return"wobble";case R.default.Type.MISMATCH:return"mismatch";default:return"custom"}}function Ve(e){return"custom"===e?"LW schema":e}function Xe(e){var t=e.title,n=e.onClick,r=e.kind,o=e.theme,a={width:28,height:28,borderRadius:6,border:"1px solid ".concat(o.colors.border),background:o.colors.background,color:o.colors.text,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"},i={edit:Se,delete:ze,save:Ge,cancel:Le.Z}[r];return(0,le.jsx)("button",{title:t,onClick:n,style:a,children:(0,le.jsx)(i,{size:16})})}var qe=c.memo(Xe);var Ye=function(e){var t,n,d,f,p,h,m,v,x,g,y=e.open,b=e.onClose,N=e.rnaComplexProps,E=e.globalHelices,I=e.errorMessage,C=e.constrainRelevantHelices,S=e.handleNewBasePair,_=e.removeBasePair,A=e.reformatSelectedHelices,T=(0,ue.Fg)().theme,M=(0,c.useState)(360),w=(0,s.Z)(M,2),k=w[0],O=w[1],L=(0,c.useState)(!1),j=(0,s.Z)(L,2),D=j[0],Z=j[1],F=(0,c.useState)("Base Pairs"),B=(0,s.Z)(F,2),U=B[0],z=B[1],G=(0,c.useState)("Constrained"),W=(0,s.Z)(G,2),H=W[0],K=W[1],q=(0,c.useRef)(null),Y=(0,c.useRef)(0),Q=(0,c.useRef)(360),$=(0,c.useRef)(E);$.current=E;var J=(0,c.useRef)(null),ee=(0,c.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],oe=(0,c.useState)(!1),ae=(0,s.Z)(oe,2),ie=ae[0],ce=ae[1],de=(0,c.useRef)(ie);de.current=ie;var fe=(0,c.useState)(!0),pe=(0,s.Z)(fe,2),he=pe[0],me=pe[1],ve=(0,c.useState)(!0),xe=(0,s.Z)(ve,2),ge=xe[0],ye=xe[1],be=(0,c.useState)((function(){var e=he?Number.parseInt(Object.keys(N)[0]):void 0,t=void 0,n=void 0;if(void 0!==e&&N[e]){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(t=r[0],n=r[0])}return{typeBase:"auto",rnaComplexIndex:e,rnaMoleculeName0:t,rnaMoleculeName1:n,length:1}})),Ne=(0,s.Z)(be,2),Ee=Ne[0],Ie=Ne[1],Ce=(0,c.useState)(null),Se=(0,s.Z)(Ce,2),_e=Se[0],Ae=Se[1],Pe=(0,c.useState)({}),Te=(0,s.Z)(Pe,2),Re=Te[0],Me=Te[1],we=(0,c.useState)(!1),ke=(0,s.Z)(we,2),Oe=(ke[0],ke[1]),Le=(0,c.useRef)(N);Le.current=N;var Ze=(0,c.useRef)(D);Ze.current=D;var Fe=(0,c.useContext)(X._.BasePair.SetKeysToEdit),Be=((0,c.useRef)(Fe),(0,c.useContext)(X._.App.PushToUndoStack));(0,c.useRef)(Be).current=Be;var Ue=(0,c.useContext)(X._.App.Settings),ze=(0,c.useContext)(X._.BasePair.AverageDistances);(0,c.useRef)(ze).current=ze,(0,c.useRef)(Ue).current=Ue,(0,c.useEffect)((function(){function e(e){if(Ze.current){var t=Y.current-e.clientY,n=Math.min(Math.max(Q.current+t,220),window.innerHeight-80);O(n)}}function t(){Ze.current&&Z(!1)}return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}}),[]);var Ge=(0,c.useMemo)((function(){return"Constrained"===H?C(E):E}),[H,C,E]),Xe=(0,c.useRef)(Ge);Xe.current=Ge;var Ye=(0,c.useMemo)((function(){var e,t=[],n=[],r=(0,l.Z)(Ge);try{var o=function(){for(var r=e.value,o=r.rnaComplexIndex,a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,l=r.start,s=r.stop,u=N[o],c=u.rnaMoleculeProps[a],d=u.rnaMoleculeProps[i],f=Math.abs(l[0]-s[0])+1,p=Math.sign(s[0]-l[0]),h=Math.sign(s[1]-l[1]),m=l[0],v=l[1],x=void 0,g=0;g<f;g++){var y=u.basePairs[a],b=null===y||void 0===y?void 0:y[m],E=null===b||void 0===b?void 0:b.find((function(e){return e.rnaMoleculeName===i&&e.nucleotideIndex===v}));if(E){var I=E.basePairType;void 0===x?x=null!==I&&void 0!==I?I:null:x!==I&&(x=null),t.push({rnaComplexIndex:o,rnaComplexName:u.name,rnaMoleculeName0:a,nucleotideIndex0:m,formattedNucleotideIndex0:c.firstNucleotideIndex+m,rnaMoleculeName1:i,nucleotideIndex1:v,formattedNucleotideIndex1:d.firstNucleotideIndex+v,type:I}),m+=p,v+=h}else m+=p,v+=h}n.push({rnaComplexIndex:o,rnaComplexName:u.name,rnaMoleculeName0:a,nucleotideIndex0Start:l[0],nucleotideIndex0End:s[0],formattedNucleotideIndex0Start:l[0]+c.firstNucleotideIndex,formattedNucleotideIndex0End:s[0]+c.firstNucleotideIndex,rnaMoleculeName1:i,nucleotideIndex1Start:l[1],nucleotideIndex1End:s[1],formattedNucleotideIndex1Start:l[1]+d.firstNucleotideIndex,formattedNucleotideIndex1End:s[1]+d.firstNucleotideIndex,type:null===x?void 0:x,length:f,isGrouped:!0})};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return{selectedBasePairs:t,selectedHelices:n}}),[N,Ge]),Qe=Ye.selectedBasePairs,$e=Ye.selectedHelices,Je=(0,c.useMemo)((function(){return"Base Pairs"===U?Qe:$e}),[U,$e,Qe]),et=(0,c.useCallback)((function(e){if(null==e)return"";var t=/[",\n]/.test(e),n=e.replace(/"/g,'""');return t?'"'.concat(n,'"'):n}),[]),tt=(0,c.useCallback)((function(e){for(var t=[],n="",r=!1,o=0;o<e.length;o++){var a=e[o];r?'"'===a?o+1<e.length&&'"'===e[o+1]?(n+='"',o++):r=!1:n+=a:","===a?(t.push(n),n=""):'"'===a?r=!0:n+=a}return t.push(n),t}),[]),nt=(0,c.useCallback)((function(e){return!0===e.isGrouped}),[]),rt=(0,c.useCallback)((function(){var e,t=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"].join(","),n=[],r=(0,l.Z)(Je);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(nt(o))for(var a=o.nucleotideIndex1End>o.nucleotideIndex1Start?1:-1,s=o.formattedNucleotideIndex1End>o.formattedNucleotideIndex1Start?1:-1,u=0;u<o.length;u++)n.push({rnaComplexIndex:o.rnaComplexIndex,rnaComplexName:o.rnaComplexName,rnaMoleculeName0:o.rnaMoleculeName0,nucleotideIndex0:o.nucleotideIndex0Start+u,formattedNucleotideIndex0:o.formattedNucleotideIndex0Start+u,rnaMoleculeName1:o.rnaMoleculeName1,nucleotideIndex1:o.nucleotideIndex1Start+u*a,formattedNucleotideIndex1:o.formattedNucleotideIndex1Start+u*s,type:o.type});else n.push(o)}}catch(m){r.e(m)}finally{r.f()}var c=n.map((function(e){var t=Ke(e.type),n=We(e.type),r=n.orientation,o=n.edgeA,a=n.edgeB;return[et(e.rnaComplexName),et(e.rnaMoleculeName0),String(e.formattedNucleotideIndex0),et(e.rnaMoleculeName1),String(e.formattedNucleotideIndex1),et(t),et(null!==r&&void 0!==r?r:""),et(null!==o&&void 0!==o?o:""),et(null!==a&&void 0!==a?a:"")].join(",")})),d=[t].concat((0,i.Z)(c)).join("\n"),f=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(f),h=document.createElement("a");h.href=p,h.download="base_pairs.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(p)}),[nt,et,Je]),ot=(0,c.useCallback)((function(e){var t=Le.current,n=e.replace(/\r\n?/g,"\n").split("\n").filter((function(e){return e.trim().length>0}));if(0===n.length)throw"CSV is empty.";var r=tt(n[0]).map((function(e){return e.trim()})),o=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"];if(r.length!==o.length||!o.every((function(e,t){return r[t]===e})))throw"CSV header is invalid. Expected: ".concat(o.join(","));for(var a=[],u=new Set(["auto","canonical","wobble","mismatch","custom"]),c=new Set(["cis","trans"]),d=new Set(["watson_crick","hoogsteen","sugar_edge"]),f=function(){var e=n[p];if(0===e.trim().length)return"continue";var r=tt(e).map((function(e){return e.trim()}));if(r.length!==o.length)throw"Line #".concat(p+1," has ").concat(r.length," column(s); expected ").concat(o.length,".");var i=(0,s.Z)(r,9),l=i[0],f=i[1],h=i[2],m=i[3],v=i[4],x=i[5],g=i[6],y=i[7],b=i[8],N=Object.entries(t).find((function(e){return(0,s.Z)(e,2)[1].name===l}));if(!N)throw"Line #".concat(p+1,": Unknown RNA complex name '").concat(l,"'.");var E=parseInt(N[0]),I=t[E];if(!(f in I.rnaMoleculeProps))throw"Line #".concat(p+1,": Unknown RNA molecule #1 '").concat(f,"'.");if(!(m in I.rnaMoleculeProps))throw"Line #".concat(p+1,": Unknown RNA molecule #2 '").concat(m,"'.");var C=I.rnaMoleculeProps[f],S=I.rnaMoleculeProps[m];if(!/^[-+]?\d+$/.test(h))throw"Line #".concat(p+1,": formattedNucleotideIndex0 is not an integer.");if(!/^[-+]?\d+$/.test(v))throw"Line #".concat(p+1,": formattedNucleotideIndex1 is not an integer.");var _=parseInt(h),A=parseInt(v),P=_-C.firstNucleotideIndex,T=A-S.firstNucleotideIndex;if(!(P in C.nucleotideProps))throw"Line #".concat(p+1,": Nucleotide #1 index '").concat(_,"' does not exist in '").concat(f,"'.");if(!(T in S.nucleotideProps))throw"Line #".concat(p+1,": Nucleotide #2 index '").concat(A,"' does not exist in '").concat(m,"'.");var M,w=x.toLowerCase();if(!u.has(w))throw"Line #".concat(p+1,": Invalid typeBase '").concat(x,"'.");if("auto"===w)M=void 0;else if("canonical"===w)M=R.default.Type.CANONICAL;else if("wobble"===w)M=R.default.Type.WOBBLE;else if("mismatch"===w)M=R.default.Type.MISMATCH;else if("custom"===w){var k=g,O=y,L=b;if(!c.has(k))throw"Line #".concat(p+1,": orientation must be 'cis' or 'trans' for custom types.");if(!d.has(O)||!d.has(L))throw"Line #".concat(p+1,": edgeA/edgeB must be one of watson_crick, hoogsteen, sugar_edge.");if(!(M=He(k,O,L)))throw"Line #".concat(p+1,": invalid custom type configuration.")}a.push({rnaComplexIndex:E,mol0:f,idx0:P,mol1:m,idx1:T,type:M})},p=1;p<n.length;p++)f();for(var h={},m=0,v=Object.entries(t);m<v.length;m++){var x=(0,s.Z)(v[m],2),g=x[0],y=x[1],b=parseInt(g);h[b]=[];for(var N=0,E=Object.entries(y.basePairs);N<E.length;N++)for(var I=(0,s.Z)(E[N],2),C=I[0],S=I[1],_=0,A=Object.entries(S);_<A.length;_++){var T,M=(0,s.Z)(A[_],2),w=M[0],k=M[1],O=parseInt(w),L=(0,l.Z)(k);try{for(L.s();!(T=L.n()).done;){var j=T.value,D={rnaMoleculeName:C,nucleotideIndex:O},Z=[D,{rnaMoleculeName:j.rnaMoleculeName,nucleotideIndex:j.nucleotideIndex}].sort(P.compareBasePairKeys),F=(0,s.Z)(Z,2),B=F[0],U=F[1];B.rnaMoleculeName===D.rnaMoleculeName&&B.nucleotideIndex===D.nucleotideIndex&&h[b].push({keys0:B,keys1:U})}}catch(fe){L.e(fe)}finally{L.f()}}}for(var z={},G=0,W=a;G<W.length;G++){var H=W[G];H.rnaComplexIndex in z||(z[H.rnaComplexIndex]=[]);var K=[{rnaMoleculeName:H.mol0,nucleotideIndex:H.idx0},{rnaMoleculeName:H.mol1,nucleotideIndex:H.idx1}].sort(P.compareBasePairKeys),V=(0,s.Z)(K,2),X=V[0],q=V[1];z[H.rnaComplexIndex].push({keys0:X,keys1:q})}Be();for(var Y=0,Q=Object.entries(t);Y<Q.length;Y++){var $=(0,s.Z)(Q[Y],2),J=$[0],ee=$[1];parseInt(J);ee.basePairs={}}for(var te=0,ne=a;te<ne.length;te++){var re=ne[te],oe=t[re.rnaComplexIndex];(0,P.insertBasePair)(oe,re.mol0,re.idx0,re.mol1,re.idx1,P.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:re.type})}var ae,ie={},le=new Set([].concat((0,i.Z)(Object.keys(t).map((function(e){return parseInt(e)}))),(0,i.Z)(a.map((function(e){return e.rnaComplexIndex}))))),se=(0,l.Z)(le);try{for(se.s();!(ae=se.n()).done;){var ue,ce,de=ae.value;ie[de]={add:null!==(ue=z[de])&&void 0!==ue?ue:[],delete:null!==(ce=h[de])&&void 0!==ce?ce:[]}}}catch(fe){se.e(fe)}finally{se.f()}Fe(ie)}),[tt,Fe,Be]),at=(0,c.useCallback)((function(){var e;return null===(e=J.current)||void 0===e?void 0:e.click()}),[]),it=(0,c.useCallback)(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(n=t.target.files)||void 0===n?void 0:n[0],t.currentTarget.value="",o){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o.text();case 6:a=e.sent;try{ot(a)}catch(r){alert("string"===typeof r?r:r.message)}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ot]),lt=(0,c.useCallback)((function(e,t,n){var r,o=Le.current[e];if(!o)return"UNK";var a=o.rnaMoleculeProps[t];if(!a)return"UNK";var i=n-a.firstNucleotideIndex;if(!(i in a.nucleotideProps))return"UNK";var l=null===(r=a.nucleotideProps[i])||void 0===r?void 0:r.symbol;return l?l.toUpperCase():"UNK"}),[]),st=(0,c.useCallback)((function(e){var t=Le.current,n=($.current,t[e.rnaComplexIndex]);if(n){Be();var r=n.basePairs[e.rnaMoleculeName0];if(r&&e.nucleotideIndex0 in r){var o=r[e.nucleotideIndex0],a=o.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName1&&t.nucleotideIndex===e.nucleotideIndex1}));-1!==a&&(1===o.length?delete r[e.nucleotideIndex0]:o.splice(a,1))}var i=n.basePairs[e.rnaMoleculeName1];if(i&&e.nucleotideIndex1 in i){var l=i[e.nucleotideIndex1],c=l.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName0&&t.nucleotideIndex===e.nucleotideIndex0}));-1!==c&&(1===l.length?delete i[e.nucleotideIndex1]:l.splice(c,1))}var d=[{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}].sort(P.compareBasePairKeys),f=(0,s.Z)(d,2),p=f[0],h=f[1];Fe((0,u.Z)({},e.rnaComplexIndex,{add:[],delete:[{keys0:p,keys1:h}]})),_(e.rnaComplexIndex,e.rnaMoleculeName0,e.rnaMoleculeName1,e.nucleotideIndex0,e.nucleotideIndex1)}}),[Be,Fe,_]),ut=(0,c.useCallback)((function(){var e,t=Le.current,n=de.current,r=Ee;if(null!=r.rnaComplexIndex){var o=t[r.rnaComplexIndex];if(o){var a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,l=o.rnaMoleculeProps[a],c=o.rnaMoleculeProps[i];if(l&&c&&null!=r.formattedNucleotideIndex0&&null!=r.formattedNucleotideIndex1){var d=r.formattedNucleotideIndex0-l.firstNucleotideIndex,f=r.formattedNucleotideIndex1-c.firstNucleotideIndex;if(d in l.nucleotideProps&&f in c.nucleotideProps){var p=null!==(e=r.length)&&void 0!==e?e:1,h="custom"===r.typeBase?He(r.orientation,r.edgeA,r.edgeB):"canonical"===r.typeBase?R.default.Type.CANONICAL:"wobble"===r.typeBase?R.default.Type.WOBBLE:"mismatch"===r.typeBase?R.default.Type.MISMATCH:void 0;Be(),n&&se(o,a,i,d,f,p,h,Ue);for(var m=[],v=0;v<p;v++){var x=d+v,g=f-v;if(!(x in l.nucleotideProps)||!(g in c.nucleotideProps))break;(0,P.insertBasePair)(o,a,x,i,g,P.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING,{basePairType:h});var y=[{rnaMoleculeName:a,nucleotideIndex:x},{rnaMoleculeName:i,nucleotideIndex:g}].sort(P.compareBasePairKeys),b=(0,s.Z)(y,2),N=b[0],E=b[1];m.push({keys0:N,keys1:E})}Fe((0,u.Z)({},r.rnaComplexIndex,{add:m,delete:[]})),re(!1),Ie({typeBase:"auto"}),S({rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName0,nucleotideIndex:d},{rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName1,nucleotideIndex:f})}}}}}),[Ee,Fe,Be,S]),ct=(0,c.useCallback)((function(e){var t=Le.current;Ae("".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1));var n=t[e.rnaComplexIndex],r=n.rnaMoleculeProps[e.rnaMoleculeName0],o=n.rnaMoleculeProps[e.rnaMoleculeName1],a=We(e.type);Me({rnaComplexIndex:e.rnaComplexIndex,rnaMoleculeName0:e.rnaMoleculeName0,formattedNucleotideIndex0:e.nucleotideIndex0+r.firstNucleotideIndex,rnaMoleculeName1:e.rnaMoleculeName1,formattedNucleotideIndex1:e.nucleotideIndex1+o.firstNucleotideIndex,typeBase:Ke(e.type),orientation:a.orientation,edgeA:a.edgeA,edgeB:a.edgeB})}),[]),dt=(0,c.useCallback)((function(e){var t=Re;if(null!=t.rnaComplexIndex&&t.rnaMoleculeName0&&t.rnaMoleculeName1&&null!=t.formattedNucleotideIndex0&&null!=t.formattedNucleotideIndex1){var n=t.rnaMoleculeName0,r=t.rnaMoleculeName1,o=N[t.rnaComplexIndex],a=o.rnaMoleculeProps[n],i=o.rnaMoleculeProps[r],l=t.formattedNucleotideIndex0-a.firstNucleotideIndex,s=t.formattedNucleotideIndex1-i.firstNucleotideIndex;if(l in a.nucleotideProps&&s in i.nucleotideProps){Be();var c=N[e.rnaComplexIndex],d=c.basePairs[e.rnaMoleculeName0];if(d&&e.nucleotideIndex0 in d){var f=d[e.nucleotideIndex0],p=f.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName1&&t.nucleotideIndex===e.nucleotideIndex1}));-1!==p&&(1===f.length?delete d[e.nucleotideIndex0]:f.splice(p,1))}var h=c.basePairs[e.rnaMoleculeName1];if(h&&e.nucleotideIndex1 in h){var m=h[e.nucleotideIndex1],v=m.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName0&&t.nucleotideIndex===e.nucleotideIndex0}));-1!==v&&(1===m.length?delete h[e.nucleotideIndex1]:m.splice(v,1))}var x=void 0;"custom"===t.typeBase?x=He(t.orientation,t.edgeA,t.edgeB):"canonical"===t.typeBase?x=R.default.Type.CANONICAL:"wobble"===t.typeBase?x=R.default.Type.WOBBLE:"mismatch"===t.typeBase&&(x=R.default.Type.MISMATCH),(0,P.insertBasePair)(c,n,l,r,s,P.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING,{basePairType:x});var g=[{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}].sort(P.compareBasePairKeys),y=g[0],b=g[1],E=[{rnaMoleculeName:n,nucleotideIndex:l},{rnaMoleculeName:r,nucleotideIndex:s}].sort(P.compareBasePairKeys),I=E[0],C=E[1];Fe((0,u.Z)({},e.rnaComplexIndex,{add:[{keys0:I,keys1:C}],delete:[{keys0:y,keys1:b}]})),Ae(null)}}}),[Re]),ft=(0,c.useCallback)((function(e){var t=We(e.type).orientation;if(t)return t;var n=Ke(e.type);return"canonical"===n||"wobble"===n||"mismatch"===n?"cis":"auto"===n?"auto":"cis"}),[]),pt=(0,c.useCallback)((function(e){var t=We(e.type).edgeA;if(t)return t;var n=Ke(e.type);return"auto"===n?"auto":"canonical"===n||"wobble"===n?"watson_crick":"unknown"}),[]),ht=(0,c.useCallback)((function(e){var t=We(e.type).edgeB;if(t)return t;var n=Ke(e.type);return"auto"===n?"auto":"canonical"===n?"watson_crick":"wobble"===n?"hoogsteen":"unknown"}),[]),mt=(0,c.useCallback)((function(e){return{position:"sticky",top:0,zIndex:1,textAlign:"center",fontSize:13,textTransform:"uppercase",letterSpacing:.3,padding:"10px 12px",minWidth:e,maxWidth:e,whiteSpace:"nowrap",background:T.colors.surfaceHover,borderBottom:"1px solid ".concat(T.colors.border),borderInline:"1px solid ".concat(T.colors.border),color:T.colors.text}}),[T]),vt=(0,c.useCallback)((function(e){return{padding:"8px 12px",minWidth:e,maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:12,textAlign:"center",color:T.colors.text}}),[T]),xt=(0,c.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{width:130,padding:"6px 8px",border:"1px solid ".concat(T.colors.border),borderRadius:6,fontSize:12,background:T.colors.background,color:T.colors.text,opacity:e?1:.6}}),[T]),gt=(0,c.useCallback)((function(){return{width:100,padding:"6px 8px",border:"1px solid ".concat(T.colors.border),borderRadius:6,fontSize:12,color:T.colors.text,background:T.colors.background}}),[T]),yt=((0,c.useCallback)((function(){return{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(T.colors.border),background:T.colors.background,fontSize:12,fontWeight:600,color:T.colors.text,cursor:"pointer"}}),[T]),(0,c.useCallback)((function(){return{width:"100%",padding:"4px 6px",border:"1px solid ".concat(T.colors.border),borderRadius:6,fontSize:12,color:T.colors.text,background:T.colors.background}}),[T])),bt=((0,c.useCallback)((function(){return{padding:"4px 8px",borderRadius:6,border:"1px solid ".concat(T.colors.border),background:T.colors.background,fontSize:11,fontWeight:600,color:T.colors.text,cursor:"pointer"}}),[T]),(0,c.useMemo)((function(){return Ue[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}),[Ue]));(0,c.useRef)(bt).current=bt;var Nt=(0,c.useCallback)((function(){return A(Xe.current)}),[]);return(0,c.useEffect)((function(){var e=1===Object.keys(N).length;me(e),ye(e&&1===Object.keys(Object.values(N)[0].rnaMoleculeProps).length)}),[N]),(0,le.jsxs)("div",{ref:q,style:{position:"fixed",left:429,right:0,bottom:0,height:y?k:0,transform:y?"translateY(0)":"translateY(100%)",transition:"transform 0.3s ease, height 0.3s ease",background:T.colors.surface,borderTop:"1px solid ".concat(T.colors.border),zIndex:2100,display:"flex",flexDirection:"column"},children:[(0,le.jsx)("div",{onMouseDown:function(e){Z(!0),Y.current=e.clientY,Q.current=k},style:{height:10,cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,le.jsx)("div",{style:{width:48,height:4,borderRadius:2,background:T.colors.border}})}),(0,le.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid ".concat(T.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:T.colors.surface},children:[(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",gap:10},children:(0,le.jsxs)("div",{style:{display:"flex",gap:6,background:T.colors.surfaceHover,padding:"4px",borderRadius:8},children:[["Base Pairs","Helices"].map((function(e){return(0,le.jsx)("button",{onClick:function(){return z(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:U===e?T.colors.background:"transparent",color:T.colors.text,boxShadow:U===e?T.shadows.sm:"none",cursor:"pointer"},children:e},e)})),"\xa0|\xa0",["Constrained","Global"].map((function(e){return(0,le.jsx)("button",{onClick:function(){return K(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:H===e?T.colors.background:"transparent",color:T.colors.text,boxShadow:H===e?T.shadows.sm:"none",cursor:"pointer"},children:e},e)}))]})}),(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,le.jsx)("input",{ref:J,type:"file",accept:".csv,text/csv",style:{display:"none"},onChange:it}),(0,le.jsxs)("button",{onClick:rt,title:"Export table to CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(T.colors.border),background:T.colors.background,color:T.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,le.jsx)(De,{size:14})," Export"]}),(0,le.jsxs)("button",{onClick:at,title:"Import table from CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(T.colors.border),background:T.colors.background,color:T.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,le.jsx)(je,{size:14})," Import"]}),(0,le.jsx)("button",{onClick:Nt,title:"Re-format all base pairs",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(T.colors.primary),background:T.colors.primary,color:T.colors.textInverse,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer"},children:"Re-format all"}),(0,le.jsx)("button",{onClick:b,style:{border:"none",background:"transparent",fontSize:16,color:T.colors.textSecondary,cursor:"pointer"},children:"\u2715"})]})]}),(0,le.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 12px",gap:8},children:[ne&&(0,le.jsxs)("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",borderTop:"1px dashed ".concat(T.colors.border),borderBottom:"1px dashed ".concat(T.colors.border)},children:[!he&&(0,le.jsxs)("select",{value:null!==(t=Ee.rnaComplexIndex)&&void 0!==t?t:"",onChange:function(e){var t=""===e.target.value?void 0:parseInt(e.target.value),n=void 0!==t&&1===Object.keys(N[t].rnaMoleculeProps).length;ye(n);var r={rnaComplexIndex:t};if(void 0!==t){var o=Object.keys(N[t].rnaMoleculeProps);o.length>0&&(r.rnaMoleculeName0=o[0],r.rnaMoleculeName1=o[0])}Ie((function(e){return(0,a.Z)((0,a.Z)({},e),{},{newAddForm:r})}))},style:(0,a.Z)((0,a.Z)({},xt()),{},{marginRight:8}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"Complex Name"}),Object.entries(N).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,le.jsx)("option",{value:n,children:r.name},n)}))]}),!ge&&(0,le.jsxs)("select",{value:null!==(n=Ee.rnaMoleculeName0)&&void 0!==n?n:"",onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt()),{},{marginRight:8,opacity:null==Ee.rnaComplexIndex?.6:1,cursor:null==Ee.rnaComplexIndex?"not-allowed":"text",background:null==Ee.rnaComplexIndex?T.colors.surfaceHover:T.colors.background,color:null==Ee.rnaComplexIndex?T.colors.textSecondary:T.colors.text}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"Mol Name #1"}),(void 0==Ee.rnaComplexIndex?[]:Object.entries(N[Ee.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,le.jsx)("option",{value:n,children:n},n)})),"disabled = ",null==Ee.rnaComplexIndex]}),(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=Ee.rnaComplexIndex,t=Ee.formattedNucleotideIndex0,n="UNK";if(null!=e&&null!=t){var r=Ee.rnaMoleculeName0;if(r){var o=lt(e,r,t);n="UNK"===o?"UNK":o[0].toUpperCase()}}return(0,le.jsx)("span",{title:n,style:{fontWeight:700},children:n})}(),(0,le.jsx)("input",{type:"number",placeholder:"nt #1",value:null!==(d=Ee.formattedNucleotideIndex0)&&void 0!==d?d:"",onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},disabled:null==Ee.rnaMoleculeName0,style:(0,a.Z)((0,a.Z)({},yt()),{},{opacity:null==Ee.rnaMoleculeName0?.6:1,cursor:null==Ee.rnaMoleculeName0?"not-allowed":"text",background:null==Ee.rnaMoleculeName0?T.colors.surfaceHover:T.colors.background,color:null==Ee.rnaMoleculeName0?T.colors.textSecondary:T.colors.text})})]}),!ge&&(0,le.jsxs)("select",{value:null!==(f=Ee.rnaMoleculeName1)&&void 0!==f?f:"",onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt()),{},{marginRight:8,opacity:null==Ee.rnaComplexIndex?.6:1,cursor:null==Ee.rnaComplexIndex?"not-allowed":"text",background:null==Ee.rnaComplexIndex?T.colors.surfaceHover:T.colors.background,color:null==Ee.rnaComplexIndex?T.colors.textSecondary:T.colors.text}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"Mol Name #2"}),(void 0==Ee.rnaComplexIndex?[]:Object.entries(N[Ee.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,le.jsx)("option",{value:n,children:n},n)})),"disabled = ",null==Ee.rnaComplexIndex]}),(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=Ee.rnaComplexIndex,t=Ee.formattedNucleotideIndex1,n="UNK";if(null!=e&&null!=t){var r=Ee.rnaMoleculeName1;if(r){var o=lt(e,r,t);n="UNK"===o?"UNK":o[0].toUpperCase()}}return(0,le.jsx)("span",{title:n,style:{fontWeight:700},children:n})}(),(0,le.jsx)("input",{type:"number",placeholder:"nt #2",value:null!==(p=Ee.formattedNucleotideIndex1)&&void 0!==p?p:"",onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:(0,a.Z)((0,a.Z)({},yt()),{},{opacity:null==Ee.rnaMoleculeName1?.6:1,cursor:null==Ee.rnaMoleculeName1?"not-allowed":"text",background:null==Ee.rnaMoleculeName1?T.colors.surfaceHover:T.colors.background,color:null==Ee.rnaMoleculeName1?T.colors.textSecondary:T.colors.text}),disabled:null==Ee.rnaMoleculeName1})]}),(0,le.jsxs)("select",{value:Ee.typeBase,onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{typeBase:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt(!0)),{},{marginRight:8}),children:[(0,le.jsx)("option",{value:"auto",children:"auto"}),(0,le.jsx)("option",{value:"canonical",children:"canonical"}),(0,le.jsx)("option",{value:"wobble",children:"wobble"}),(0,le.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,le.jsx)("option",{value:"custom",children:Ve("custom")})]}),(0,le.jsxs)("select",{value:null!==(h=Ee.orientation)&&void 0!==h?h:"",disabled:"custom"!==Ee.typeBase,onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{orientation:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt("custom"===Ee.typeBase)),{},{marginRight:8}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"orientation (auto)"}),(0,le.jsx)("option",{value:"cis",children:"cis"}),(0,le.jsx)("option",{value:"trans",children:"trans"})]}),(0,le.jsxs)("select",{value:null!==(m=Ee.edgeA)&&void 0!==m?m:"",disabled:"custom"!==Ee.typeBase,onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeA:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt("custom"===Ee.typeBase)),{},{marginRight:8}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"edge A (auto)"}),(0,le.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,le.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,le.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,le.jsxs)("select",{value:null!==(v=Ee.edgeB)&&void 0!==v?v:"",disabled:"custom"!==Ee.typeBase,onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeB:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},xt("custom"===Ee.typeBase)),{},{marginRight:8}),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"edge B (auto)"}),(0,le.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,le.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,le.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,le.jsx)("input",{type:"number",min:"1",max:"100",placeholder:"Length",value:null!==(x=Ee.length)&&void 0!==x?x:"",onChange:function(e){return Ie((function(t){return(0,a.Z)((0,a.Z)({},t),{},{length:""===e.target.value?void 0:Math.max(1,parseInt(e.target.value)||1)})}))},style:(0,a.Z)((0,a.Z)({},gt()),{},{width:80,marginRight:8}),title:"Number of consecutive base pairs to create"}),(0,le.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",marginRight:"8px",padding:"4px 8px",borderRadius:"4px",backgroundColor:ie?T.colors.primary+"20":"transparent",border:ie?"1px solid ".concat(T.colors.primary):"1px solid transparent",transition:"all 0.2s ease",cursor:"pointer"},children:[(0,le.jsx)("input",{type:"checkbox",checked:ie,onChange:function(e){return ce(e.target.checked)},style:{margin:0,transform:"scale(0.9)"}}),(0,le.jsx)("span",{style:{fontSize:"11px",fontWeight:ie?"600":"400",color:ie?T.colors.primary:T.colors.text,whiteSpace:"nowrap"},children:"Reposition"})]}),(0,le.jsx)("button",{onClick:ut,style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(T.colors.border),background:T.colors.background,fontSize:12,fontWeight:700,color:T.colors.text},disabled:null==Ee.rnaComplexIndex||void 0===Ee.rnaMoleculeName0||void 0===Ee.rnaMoleculeName1||null==Ee.formattedNucleotideIndex0||null==Ee.formattedNucleotideIndex1||(null!==(g=Ee.length)&&void 0!==g?g:1)<1,children:"Add"})]}),(0,le.jsx)("button",{onClick:function(){if(!ne){var e=he?Number.parseInt(Object.keys(N)[0]):void 0,t=void 0,n=void 0;if(void 0!==e){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(t=r[0],n=r[0])}Ie({rnaComplexIndex:e,rnaMoleculeName0:t,rnaMoleculeName1:n,formattedNucleotideIndex0:void 0,formattedNucleotideIndex1:void 0,length:1,typeBase:"auto"})}re(!ne)},style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(T.colors.border),background:T.colors.background,fontSize:12,fontWeight:600,color:T.colors.text,marginLeft:"auto"},children:ne?"Cancel":"Add Base Pair"})]}),(0,le.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,le.jsx)("thead",{children:(0,le.jsxs)("tr",{children:[!he&&(0,le.jsx)("th",{style:mt(120),children:"Complex"}),!ge&&(0,le.jsx)("th",{style:mt(80),children:"Mol#1"}),(0,le.jsx)("th",{style:mt(80),children:"Nt (index) a"}),!ge&&(0,le.jsx)("th",{style:mt(80),children:"Mol#2"}),(0,le.jsx)("th",{style:mt(80),children:"Nt (index) b"}),"Helices"===U&&(0,le.jsx)("th",{style:mt(60),children:"Length"}),(0,le.jsx)("th",{style:mt(120),children:"Type"}),(0,le.jsx)("th",{style:mt(100),children:"Orientation"}),(0,le.jsx)("th",{style:mt(130),children:"Edge A"}),(0,le.jsx)("th",{style:mt(130),children:"Edge B"}),(0,le.jsx)("th",{style:mt(90),children:"Action"})]})}),(0,le.jsxs)("tbody",{children:[Je.map((function(e,t){var n,r,o,i,l,u,c,d=nt(e),f=d?"".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0Start,"-").concat(e.nucleotideIndex0End,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1Start,"-").concat(e.nucleotideIndex1End):"".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1),p=!d&&_e===f,h=p&&null!==(n=Re.typeBase)&&void 0!==n?n:Ke(e.type),m=We(e.type),v=p?null!==(r=null!==(o=Re.orientation)&&void 0!==o?o:m.orientation)&&void 0!==r?r:"auto"===h?void 0:"cis":void 0,x=p&&null!==(i=Re.edgeA)&&void 0!==i?i:void 0,g=p&&null!==(l=Re.edgeB)&&void 0!==l?l:void 0;return(0,le.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(T.colors.border),background:t%2===0?T.colors.background:T.colors.surface},children:[!he&&(0,le.jsx)("td",{style:vt(120),children:e.rnaComplexName}),!ge&&(0,le.jsx)("td",{style:vt(60),children:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:p?(0,le.jsx)("select",{value:null!==(u=Re.rnaMoleculeName0)&&void 0!==u?u:e.rnaMoleculeName0,onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,le.jsx)("option",{value:n,children:n},n)}))}):(0,le.jsx)("span",{children:e.rnaMoleculeName0})})}),(0,le.jsx)("td",{style:vt(60),children:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var t,n;if(d){var r=lt(e.rnaComplexIndex,e.rnaMoleculeName0,e.formattedNucleotideIndex0Start),o="UNK"===r?"UNK":r[0].toUpperCase();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,le.jsx)("span",{children:e.formattedNucleotideIndex0Start})]})}var i=lt(e.rnaComplexIndex,e.rnaMoleculeName0,p&&null!==(t=Re.formattedNucleotideIndex0)&&void 0!==t?t:e.formattedNucleotideIndex0),l="UNK"===i?"UNK":i[0].toUpperCase();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(i,")"),style:{fontWeight:700},children:l}),p?(0,le.jsx)("input",{type:"number",value:null!==(n=Re.formattedNucleotideIndex0)&&void 0!==n?n:e.formattedNucleotideIndex0,onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:yt()}):(0,le.jsx)("span",{children:e.formattedNucleotideIndex0})]})}()})}),!ge&&(0,le.jsx)("td",{style:vt(60),children:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:p?(0,le.jsx)("select",{value:null!==(c=Re.rnaMoleculeName1)&&void 0!==c?c:e.rnaMoleculeName1,onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,le.jsx)("option",{value:n,children:n},n)}))}):(0,le.jsx)("span",{children:e.rnaMoleculeName1})})}),(0,le.jsx)("td",{style:vt(60),children:(0,le.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var t,n;if(d){var r=lt(e.rnaComplexIndex,e.rnaMoleculeName1,e.formattedNucleotideIndex1Start),o="UNK"===r?"UNK":r[0].toUpperCase();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,le.jsx)("span",{children:e.formattedNucleotideIndex1Start})]})}var i=lt(e.rnaComplexIndex,e.rnaMoleculeName1,p&&null!==(t=Re.formattedNucleotideIndex1)&&void 0!==t?t:e.formattedNucleotideIndex1),l="UNK"===i?"UNK":i[0].toUpperCase();return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(i,")"),style:{fontWeight:700},children:l}),p?(0,le.jsx)("input",{type:"number",value:null!==(n=Re.formattedNucleotideIndex1)&&void 0!==n?n:e.formattedNucleotideIndex1,onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:yt()}):(0,le.jsx)("span",{children:e.formattedNucleotideIndex1})]})}()})}),"Helices"===U&&(0,le.jsx)("td",{style:vt(60),children:(0,le.jsx)("span",{style:{fontSize:12,color:T.colors.text},children:d?e.length:1})}),(0,le.jsx)("td",{style:vt(120),children:p?(0,le.jsxs)("select",{value:h,onChange:function(t){var n=t.target.value;if("custom"===n){var r,o,i,l,s,u,c=We(e.type),d=Ke(e.type),f=null!==(r=null!==(o=Re.orientation)&&void 0!==o?o:c.orientation)&&void 0!==r?r:"cis",p=null!==(i=null!==(l=Re.edgeA)&&void 0!==l?l:c.edgeA)&&void 0!==i?i:"watson_crick",h=null!==(s=null!==(u=Re.edgeB)&&void 0!==u?u:c.edgeB)&&void 0!==s?s:"wobble"===d?"hoogsteen":"watson_crick";Me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeBase:n,orientation:f,edgeA:p,edgeB:h})}))}else Me((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeBase:n})}))},style:xt(!0),children:[(0,le.jsx)("option",{value:"auto",children:"auto"}),(0,le.jsx)("option",{value:"canonical",children:"canonical"}),(0,le.jsx)("option",{value:"wobble",children:"wobble"}),(0,le.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,le.jsx)("option",{value:"custom",children:Ve("custom")})]}):(0,le.jsx)("span",{style:{fontSize:12,color:T.colors.text},children:Ve(Ke(e.type))})}),(0,le.jsx)("td",{style:vt(100),children:p&&"custom"===h?(0,le.jsxs)("select",{value:null!==v&&void 0!==v?v:"",onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{orientation:e.target.value||void 0})}))},style:xt(!0),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,le.jsx)("option",{value:"cis",children:"cis"}),(0,le.jsx)("option",{value:"trans",children:"trans"})]}):(0,le.jsx)("span",{style:{fontSize:12,color:T.colors.text},children:ft(e)})}),(0,le.jsx)("td",{style:vt(130),children:p&&"custom"===h?(0,le.jsxs)("select",{value:null!==x&&void 0!==x?x:"",onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeA:e.target.value||void 0})}))},style:xt(!0),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,le.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,le.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,le.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,le.jsx)("span",{style:{fontSize:12,color:T.colors.text},children:pt(e)})}),(0,le.jsx)("td",{style:vt(130),children:p&&"custom"===h?(0,le.jsxs)("select",{value:null!==g&&void 0!==g?g:"",onChange:function(e){return Me((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeB:e.target.value||void 0})}))},style:xt(!0),children:[(0,le.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,le.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,le.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,le.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,le.jsx)("span",{style:{fontSize:12,color:T.colors.text},children:ht(e)})}),(0,le.jsx)("td",{style:(0,a.Z)((0,a.Z)({},vt(70)),{},{textAlign:"center"}),children:d?(0,le.jsx)("span",{style:{fontSize:11,color:T.colors.textSecondary},children:"\u2014"}):p?(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,le.jsx)(qe,{title:"Save",onClick:function(){dt(e),Oe((function(e){return!e}))},kind:"save",theme:T}),(0,le.jsx)(qe,{title:"Cancel",onClick:function(){return Ae(null)},kind:"cancel",theme:T})]}):(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,le.jsx)(qe,{title:"Edit",onClick:function(){return ct(e)},kind:"edit",theme:T}),(0,le.jsx)(qe,{title:"Delete",onClick:function(){st(e),Oe((function(e){return!e}))},kind:"delete",theme:T})]})})]},"".concat(f,":").concat(t))})),I&&(0,le.jsx)("tr",{children:(0,le.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:T.colors.error},children:I})}),!I&&0===Je.length&&(0,le.jsx)("tr",{children:(0,le.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:T.colors.textSecondary},children:'No base pairs found. Use the "Add Base Pair" button above to create new ones.'})})]})]})]})]})},Qe=c.memo(Ye),$e=function(e){var t=e.rnaComplexProps,n=(0,c.useState)(!1),r=(0,s.Z)(n,2),o=r[0],a=r[1],d=(0,c.useState)(""),f=(0,s.Z)(d,2),p=f[0],h=f[1],m=(0,c.useState)([]),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=(0,c.useState)(-1),b=(0,s.Z)(y,2),N=b[0],E=b[1],I=(0,c.useRef)(null),C=(0,c.useRef)(null),S=(0,c.useContext)(X._.BasePair.SetKeysToEdit),_=(0,c.useContext)(X._.Nucleotide.SetKeysToRerender),A=(0,c.useContext)(X._.App.PushToUndoStack),T=(0,ue.Fg)().theme,w=(0,c.useMemo)((function(){return["add","delete","edit","reformat","color"]}),[]),k=(0,c.useMemo)((function(){var e=p.trim(),t=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(?/.exec(e);if(!t)return null;switch(t[1].toLowerCase()){case"add":return{signature:"add(nt1_index:int, nt2_index:int, complex:str?, bp_type:str=auto, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index: required integer (formatted index)","nt2_index: required integer (formatted index)","complex: optional string; required in multi-complex scenes","bp_type: 'auto'|'canonical'|'wobble'|'mismatch' (ignored if subtype provided)","subtype: optional custom directed type like cWW/tHS","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++ (default 1)","safe: boolean (default True); True=error on duplicates, False=warn and add"]};case"delete":return{signature:"delete(nt1_index:int, nt2_index:int, complex:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index, nt2_index: required integers","complex: optional string; required in multi-complex scenes","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: boolean (default True); True=error if not found, False=warn and skip"]};case"edit":return{signature:"edit(nt1_index:int, nt2_index:int, complex:str?, bp_type:str, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["Requires bp_type or subtype","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: True=error if not found, False=warn and create"]};case"reformat":return{signature:"reformat(start:int?, end:int?)",lines:["If both omitted: full reformat","If provided: repositions nucleotides only within [start, end]"]};case"color":return{signature:"color(target:int|string, color_value:string)",lines:["target: 'start-end' for a range, or single index; multiple segments separated by ';'","color_value: CSS color name or hex (e.g., 'red', '#FF0000')"]};default:return null}}),[p]);function O(e,t){g((function(n){return[].concat((0,i.Z)(n),[{ts:new Date,level:e,text:t}])}))}function L(e){if(e)for(var n=0,r=Object.entries(t);n<r.length;n++){var o=(0,s.Z)(r[n],2),a=o[0];if(o[1].name.toLowerCase()===e.toLowerCase())return parseInt(a)}else{var i=Object.keys(t);if(1===i.length)return parseInt(i[0])}}function j(e,n){var r=t[e];if(r)for(var o=0,a=Object.entries(r.rnaMoleculeProps);o<a.length;o++){var i=(0,s.Z)(a[o],2),l=i[0],u=i[1];if(n-u.firstNucleotideIndex in u.nucleotideProps)return l}}function D(e,t,n,r,o){var a,i=null===(a=e.basePairs[t])||void 0===a?void 0:a[n];return!!i&&!!i.find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}))}function Z(e){return e.replace(/^['"]|['"]$/g,"")}function F(){var e=p;if(e.trim()){O("command","> ".concat(e)),E(-1);try{var n=function(e){var t=e.trim(),n=/^([a-zA-Z_][a-zA-Z0-9_]*)\((.*)\)$/.exec(t);if(!n)return{error:"Syntax error: commands must be in form name(arg1, ..., key=value, ...)"};var r,o=n[1],a=n[2].trim(),i=a.length?a.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})):[],s=[],u={},c=(0,l.Z)(i);try{for(c.s();!(r=c.n()).done;){var d=r.value,f=d.indexOf("=");if(-1===f)s.push(d);else{var p=d.slice(0,f).trim(),h=d.slice(f+1).trim();if(!p)return{error:"Syntax error: empty parameter name"};u[p]=Z(h)}}}catch(C){c.e(C)}finally{c.f()}var m=o.toLowerCase();if("reformat"===m){var v=void 0!==u.start?parseInt(u.start):void 0,x=void 0!==u.end?parseInt(u.end):void 0;return void 0!==u.start&&Number.isNaN(v)||void 0!==u.end&&Number.isNaN(x)?{error:"Type error: reformat parameters start/end must be integers"}:{kind:"reformat",start:v,end:x}}if("color"===m)return 2!==s.length?{error:"Syntax error: color(target, color_value)"}:{kind:"color",target:Z(s[0]),color:Z(s[1])};if("add"!==m&&"delete"!==m&&"edit"!==m)return{error:"Unknown command: ".concat(o)};if(s.length<2)return{error:"Syntax error: first two positional arguments must be nt1_index, nt2_index"};if(s.length>2)return{error:"Syntax error: too many positional arguments"};var g=parseInt(s[0]),y=parseInt(s[1]);if(Number.isNaN(g)||Number.isNaN(y))return{error:"Type error: nt1_index and nt2_index must be integers"};var b=u.complex,N=u.bp_type,E=u.subtype,I=void 0!==u.length?parseInt(u.length):1;return Number.isNaN(I)||0===I?{error:"Type error: length must be a non-zero integer"}:{kind:m,nt1:g,nt2:y,complexName:b,bpType:N,subtype:E,length:I,safe:void 0===u.safe||"true"===u.safe.toLowerCase()||"false"!==u.safe.toLowerCase()&&function(){throw new Error("Type error: safe must be true or false")}()}}(e);n.error?O("error",n.error):function(e){if("reformat"===e.kind){if(void 0===e.start&&void 0===e.end)window.dispatchEvent(new CustomEvent("triggerReformatAll")),O("success","Reformat triggered");else{var n=e.start,r=e.end;window.dispatchEvent(new CustomEvent("triggerReformatRange",{detail:{start:n,end:r}})),O("success","Reformat range ".concat(null!==n&&void 0!==n?n:"-\u221e","..").concat(null!==r&&void 0!==r?r:"+\u221e"," triggered"))}return}if("color"===e.kind){var o=L(void 0);if(void 0===o)return void O("error","Ambiguous complex: specify a single complex in scene to use color()");var a=t[o],i=e,c=i.target,d=i.color;try{var f=function(e){var t=e.trim().replace(/^['"]|['"]$/g,"");if(/^#?[0-9a-fA-F]{3,4}$/.test(t)||/^#?[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$/.test(t)){var n=t.startsWith("#")?t:"#".concat(t);return(0,M.fromCssString)(n,void 0,M.HandleUndefined.THROW_ERROR)}return(0,M.fromCssString)(t.toLowerCase(),void 0,M.HandleUndefined.THROW_ERROR)}(d),p=function(e){var t=e.split(";").map((function(e){return e.trim()})).filter(Boolean);if(0===t.length)throw new Error("color(): target is empty");var n,r=[],o=(0,l.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(/^\d+$/.test(a)){var i=parseInt(a);r.push({start:i,end:i})}else{var s=/^(\d+)\s*-\s*(\d+)$/.exec(a);if(!s)throw new Error("color(): invalid target segment '".concat(a,"'"));var u=parseInt(s[1]),c=parseInt(s[2]),d=Math.min(u,c),f=Math.max(u,c);r.push({start:d,end:f})}}}catch(p){o.e(p)}finally{o.f()}return r}(c);A();for(var h=0,m=0,v=Object.entries(a.rnaMoleculeProps);m<v.length;m++)for(var x=(0,s.Z)(v[m],2),g=(x[0],x[1]),y=0,b=Object.entries(g.nucleotideProps);y<b.length;y++){var N=(0,s.Z)(b[y],2),E=N[0],I=N[1];if(U(parseInt(E)+g.firstNucleotideIndex,p)){var C;I.color=f;var T=null!==(C=I.labelContentProps)&&void 0!==C?C:{};T.color=f,I.labelContentProps=T,h++}}var w={};if(h>0){for(var k=0,Z=Object.entries(a.rnaMoleculeProps);k<Z.length;k++){for(var F=(0,s.Z)(Z[k],2),B=F[0],z=F[1],G=[],W=0,H=Object.entries(z.nucleotideProps);W<H.length;W++){var K=(0,s.Z)(H[W],1)[0],V=parseInt(K);U(V+z.firstNucleotideIndex,p)&&G.push(V)}G.length&&(w[B]=G)}_((0,u.Z)({},o,w))}O("success","Applied color to ".concat(h," nucleotide(s)"))}catch(Ke){var X;O("error",null!==(X=null===Ke||void 0===Ke?void 0:Ke.message)&&void 0!==X?X:String(Ke))}return}var q=e,Y=L(q.complexName);if(void 0===Y){var Q;if(Object.keys(t).length>1&&!q.complexName)O("error","Ambiguous complex: specify complex=[name]");else O("error","Unknown complex: ".concat(null!==(Q=q.complexName)&&void 0!==Q?Q:"(unspecified)"));return}for(var $=t[Y],J=q.length>0?1:-1,ee=-J,te=Math.abs(q.length),ne=[],re=0;re<te;re++){var oe=q.nt1+re*J,ae=q.nt2+re*ee,ie=j(Y,oe),le=j(Y,ae);if(ie&&le){var se=$.rnaMoleculeProps[ie],ue=$.rnaMoleculeProps[le],ce=oe-se.firstNucleotideIndex,de=ae-ue.firstNucleotideIndex;ce in se.nucleotideProps&&de in ue.nucleotideProps?ne.push({idx1:oe,idx2:ae,mol0:ie,mol1:le,i0:ce,i1:de}):ne.push({error:"Out of bounds: (".concat(oe,", ").concat(ae,")")})}else ne.push({error:"Out of bounds: (".concat(oe,", ").concat(ae,")")})}var fe=ne.find((function(e){return"error"in e}));if(fe)return void O("error",fe.error);var pe=void 0;if("delete"!==q.kind&&"custom_error"===(pe=function(e,t){if(t){var n=function(e){if(!/^[ct][WHS]{2}$/.test(e))return null;var t={W:"watson_crick",H:"hoogsteen",S:"sugar_edge"};return{orientation:"c"===e[0]?"cis":"trans",edgeA:t[e[1]],edgeB:t[e[2]]}}(t);if(!n)return"custom_error";var r=n.orientation,o=n.edgeA,a=n.edgeB;return"".concat(r,"_").concat(o,"_").concat(a)}switch((e||"auto").toLowerCase()){case"auto":return;case"canonical":return R.BasePair.Type.CANONICAL;case"wobble":return R.BasePair.Type.WOBBLE;case"mismatch":return R.BasePair.Type.MISMATCH;default:return"custom_error"}}(q.bpType,q.subtype)))return void O("error","Invalid type: provide bp_type=[auto|canonical|wobble|mismatch] or subtype like cWW/tHS");if("add"===q.kind){if(q.safe){var he,me=(0,l.Z)(ne);try{for(me.s();!(he=me.n()).done;){var ve=he.value;if(D($,ve.mol0,ve.i0,ve.mol1,ve.i1))return void O("error","Base pair already exists at (".concat(ve.idx1,", ").concat(ve.idx2,")"))}}catch(Ve){me.e(Ve)}finally{me.f()}}A();var xe,ge=[],ye=(0,l.Z)(ne);try{for(ye.s();!(xe=ye.n()).done;){var be=xe.value;D($,be.mol0,be.i0,be.mol1,be.i1)&&!q.safe&&O("warning","Duplicate at (".concat(be.idx1,", ").concat(be.idx2,") \u2014 adding anyway")),(0,P.insertBasePair)($,be.mol0,be.i0,be.mol1,be.i1,P.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:pe});var Ne=[{rnaMoleculeName:be.mol0,nucleotideIndex:be.i0},{rnaMoleculeName:be.mol1,nucleotideIndex:be.i1}].sort(P.compareBasePairKeys),Ee=(0,s.Z)(Ne,2),Ie=Ee[0],Ce=Ee[1];ge.push({keys0:Ie,keys1:Ce})}}catch(Ve){ye.e(Ve)}finally{ye.f()}return S((0,u.Z)({},Y,{add:ge,delete:[]})),void O("success","Added ".concat(ne.length," base pair(s)"))}if("delete"===q.kind){if(q.safe){var Se,_e=(0,l.Z)(ne);try{for(_e.s();!(Se=_e.n()).done;){var Ae=Se.value;if(!D($,Ae.mol0,Ae.i0,Ae.mol1,Ae.i1))return void O("error","No base pair at (".concat(Ae.idx1,", ").concat(Ae.idx2,")"))}}catch(Ve){_e.e(Ve)}finally{_e.f()}}A();var Pe,Te=[],Re=(0,l.Z)(ne);try{var Me=function(){var e=Pe.value;if(!D($,e.mol0,e.i0,e.mol1,e.i1))return O("warning","No base pair at (".concat(e.idx1,", ").concat(e.idx2,") \u2014 skipping")),"continue";var t=$.basePairs[e.mol0];if(t&&e.i0 in t){var n=t[e.i0],r=n.findIndex((function(t){return t.rnaMoleculeName===e.mol1&&t.nucleotideIndex===e.i1}));-1!==r&&(1===n.length?delete t[e.i0]:n.splice(r,1))}var o=$.basePairs[e.mol1];if(o&&e.i1 in o){var a=o[e.i1],i=a.findIndex((function(t){return t.rnaMoleculeName===e.mol0&&t.nucleotideIndex===e.i0}));-1!==i&&(1===a.length?delete o[e.i1]:a.splice(i,1))}var l=[{rnaMoleculeName:e.mol0,nucleotideIndex:e.i0},{rnaMoleculeName:e.mol1,nucleotideIndex:e.i1}].sort(P.compareBasePairKeys),u=(0,s.Z)(l,2),c=u[0],d=u[1];Te.push({keys0:c,keys1:d})};for(Re.s();!(Pe=Re.n()).done;)Me()}catch(Ve){Re.e(Ve)}finally{Re.f()}return Te.length&&S((0,u.Z)({},Y,{add:[],delete:Te})),void O("success","Deleted ".concat(Te.length," base pair(s)"))}if("edit"===q.kind){if(void 0===pe)return void O("error","edit requires bp_type or subtype");var we=pe;if(q.safe){var ke,Oe=(0,l.Z)(ne);try{for(Oe.s();!(ke=Oe.n()).done;){var Le=ke.value;if(!D($,Le.mol0,Le.i0,Le.mol1,Le.i1))return void O("error","No base pair at (".concat(Le.idx1,", ").concat(Le.idx2,")"))}}catch(Ve){Oe.e(Ve)}finally{Oe.f()}}A();var je,De=[],Ze=[],Fe=(0,l.Z)(ne);try{for(Fe.s();!(je=Fe.n()).done;){var Be=je.value,Ue=D($,Be.mol0,Be.i0,Be.mol1,Be.i1);Ue||q.safe||O("warning","No base pair at (".concat(Be.idx1,", ").concat(Be.idx2,") \u2014 creating new")),(0,P.insertBasePair)($,Be.mol0,Be.i0,Be.mol1,Be.i1,Ue?P.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING:P.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:we});var ze=[{rnaMoleculeName:Be.mol0,nucleotideIndex:Be.i0},{rnaMoleculeName:Be.mol1,nucleotideIndex:Be.i1}].sort(P.compareBasePairKeys),Ge=(0,s.Z)(ze,2),We=Ge[0],He=Ge[1];De.push({keys0:We,keys1:He}),Ue&&Ze.push({keys0:We,keys1:He})}}catch(Ve){Fe.e(Ve)}finally{Fe.f()}S((0,u.Z)({},Y,{add:De,delete:Ze})),O("success","Edited ".concat(ne.length," base pair(s)"))}}(n)}catch(o){var r;O("error",null!==(r=null===o||void 0===o?void 0:o.message)&&void 0!==r?r:String(o))}finally{h("")}}}(0,c.useEffect)((function(){function e(e){"Backquote"===e.code&&(e.preventDefault(),a((function(e){return!e})))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,c.useEffect)((function(){o&&setTimeout((function(){var e;return null===(e=I.current)||void 0===e?void 0:e.focus()}),0)}),[o]),(0,c.useEffect)((function(){var e;null===(e=C.current)||void 0===e||e.scrollTo({top:C.current.scrollHeight})}),[x.length]);var B=(0,c.useMemo)((function(){var e=p.trim(),t=/^([a-zA-Z_]*)$/.exec(e),n=t?t[1]:"";return w.filter((function(e){return e.startsWith(n)})).slice(0,4)}),[p,w]);function U(e,t){var n,r=(0,l.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(e>=o.start&&e<=o.end)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}return o?(0,le.jsxs)("div",{style:{position:"fixed",left:0,right:0,bottom:0,height:260,background:T.colors.surface,color:T.colors.text,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',borderTop:"1px solid ".concat(T.colors.border),boxShadow:T.shadows.lg,zIndex:2500,display:"flex",flexDirection:"column"},onClick:function(){var e;return null===(e=I.current)||void 0===e?void 0:e.focus()},children:[(0,le.jsxs)("div",{style:{padding:"6px 10px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid ".concat(T.colors.border)},children:[(0,le.jsx)("div",{style:{fontWeight:700,fontSize:T.typography.fontSize.sm,color:T.colors.primary},children:"XRNA Terminal"}),(0,le.jsx)("div",{style:{fontSize:T.typography.fontSize.xs,color:T.colors.textSecondary},children:"Press ~ to hide"})]}),(0,le.jsx)("div",{ref:C,style:{flex:1,overflowY:"auto",padding:"8px 10px"},children:x.map((function(e,t){return(0,le.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"baseline",whiteSpace:"pre-wrap"},children:[(0,le.jsxs)("span",{style:{color:T.colors.textSecondary,fontSize:T.typography.fontSize.xs},children:["[",z(e.ts),"]"]}),(0,le.jsx)("span",{style:{color:G(e.level)},children:e.text})]},t)}))}),(0,le.jsxs)("div",{style:{padding:"8px 10px",borderTop:"1px solid ".concat(T.colors.border)},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,le.jsx)("span",{style:{color:T.colors.primary},children:">"}),(0,le.jsx)("input",{ref:I,value:p,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)return e.preventDefault(),void F();if("ArrowUp"===e.key){var t;e.preventDefault();var n=x.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),r=N<0?n.length-1:Math.max(0,N-1);return E(r),void h(null!==(t=n[r])&&void 0!==t?t:p)}if("ArrowDown"===e.key){var o;e.preventDefault();var a=x.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),i=N<0?-1:Math.min(a.length-1,N+1);return E(i),void h(-1===i?"":null!==(o=a[i])&&void 0!==o?o:"")}if("Tab"!==e.key);else{e.preventDefault();var l=p.trim(),s=/^([a-zA-Z_]*)$/.exec(l);if(s){var u=s[1],c=w.find((function(e){return e.startsWith(u)}));c&&h(c+"()")}}},style:{flex:1,background:"transparent",border:"none",outline:"none",color:T.colors.text,fontFamily:"inherit",fontSize:T.typography.fontSize.md},placeholder:"add(1, 150, length=3)"})]}),(B.length>0||k)&&(0,le.jsxs)("div",{style:{marginTop:6},children:[B.length>0&&(0,le.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:k?6:0},children:B.map((function(e){return(0,le.jsx)("span",{style:{background:T.colors.surfaceHover,border:"1px solid ".concat(T.colors.border),borderRadius:T.borderRadius.md,padding:"2px 6px",fontSize:T.typography.fontSize.xs,color:T.colors.textSecondary},children:e},e)}))}),k&&(0,le.jsxs)("div",{style:{background:T.colors.backgroundSecondary,border:"1px solid ".concat(T.colors.border),borderRadius:T.borderRadius.md,padding:"6px 8px"},children:[(0,le.jsx)("div",{style:{fontSize:T.typography.fontSize.xs,color:T.colors.text,marginBottom:4},children:k.signature}),(0,le.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",rowGap:2},children:k.lines.map((function(e,t){return(0,le.jsxs)("div",{style:{fontSize:T.typography.fontSize.xs,color:T.colors.textSecondary},children:["- ",e]},t)}))})]})]})]})]}):(0,le.jsx)("div",{style:{display:"none"}});function z(e){var t=function(e){return e.toString().padStart(2,"0")};return"".concat(t(e.getHours()),":").concat(t(e.getMinutes()),":").concat(t(e.getSeconds()))}function G(e){switch(e){case"command":return T.colors.primary;case"error":return T.colors.error;case"warning":return T.colors.warning;case"success":return T.colors.success;default:return T.colors.text}}},Je=c.memo($e),et=function(e){var t=e.open,n=e.onClose,r=e.children,o=(0,ue.Fg)().theme;return(0,le.jsxs)("div",{style:{position:"fixed",top:56,right:0,height:"100%",width:"480px",background:o.colors.backgroundSecondary,transform:t?"translateX(0)":"translateX(100%)",transition:o.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(o.colors.border)},children:[(0,le.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(o.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,le.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:o.colors.primary}}),(0,le.jsx)("span",{style:{fontSize:o.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:o.colors.text},children:"Properties Panel"})]}),(0,le.jsx)("button",{onClick:n,style:{border:"none",background:o.colors.surfaceHover,cursor:"pointer",fontSize:o.typography.fontSize.md,color:o.colors.text,padding:"6px 8px",borderRadius:o.borderRadius.md,width:"28px",height:"28px"},children:"\u2715"})]}),(0,le.jsx)("div",{style:{flex:1,overflow:"auto"},children:r})]})},tt=c.memo(et);function nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nucleotide",r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex;try{var l,s,u,c=t[r];if(!c)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var d=null===(l=c.rnaMoleculeProps)||void 0===l?void 0:l[o];if(!d)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var f=null===(s=d.nucleotideProps)||void 0===s?void 0:s[a];if(!f){var p=d.firstNucleotideIndex;if(void 0!==p&&!Number.isNaN(p)){var h,m=a-p;(f=null===(h=d.nucleotideProps)||void 0===h?void 0:h[m])&&(e.nucleotideIndex=m)}}if(!f){var v=d.firstNucleotideIndex;if(void 0!==v&&!Number.isNaN(v)){var x,g=a+v;f=null===(x=d.nucleotideProps)||void 0===x?void 0:x[g]}}if(!f)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var y,b,N,E,I={type:n,nucleotideSymbol:f.symbol,nucleotideIndex:a,rnaComplexIndex:r,rnaMoleculeName:o,complexName:c.name||"Complex ".concat(r),moleculeName:o,position:{x:f.x||0,y:f.y||0}};if(f.color)I.color=(null===(y=(b=f.color).asHex)||void 0===y?void 0:y.call(b))||(null===(N=(E=f.color).toString)||void 0===N?void 0:N.call(E))||"Unknown";var C=null===(u=c.basePairs)||void 0===u?void 0:u[o];if(C){var S=C[a];if(S){var _,A,P=S.partnerMolecule||o,T=null===(_=c.rnaMoleculeProps)||void 0===_?void 0:_[P],R=null===T||void 0===T||null===(A=T.nucleotideProps)||void 0===A?void 0:A[S.partnerIndex];I.basePairType=S.type||"Watson-Crick",I.basePairPartner={nucleotideIndex:S.partnerIndex,nucleotideSymbol:null===R||void 0===R?void 0:R.symbol,rnaMoleculeName:P}}}I.structureInfo=function(e,t,n,r){try{var o,a=(null===(o=n.basePairs)||void 0===o?void 0:o[r])||{},l=t.nucleotideProps||{},s=a[e];if(s){for(var u=s.partnerIndex,c=e,d=e,f=u,p=u;c>1;){var h=a[c-1];if(!h||h.partnerIndex!==f+1)break;c--,f++}for(var m=Math.max.apply(Math,(0,i.Z)(Object.keys(l).map(Number)));d<m;){var v=a[d+1];if(!v||v.partnerIndex!==p-1)break;d++,p--}var x=d-c+1;if(x>=2){for(var g=0,y=c;y<=d;y++){var b=l[y];!b||"G"!==b.symbol&&"C"!==b.symbol||g++}var N=Math.round(g/x*100);return{type:x>=4?"helix":"stacked_helix",name:"Helix (".concat(c,"-").concat(d,")"),range:{start:c,end:d},helixInfo:{length:x,gcContent:N}}}}for(var E=e,I=e;E>1&&!a[E-1];)E--;for(var C=Math.max.apply(Math,(0,i.Z)(Object.keys(l).map(Number)));I<C&&!a[I+1];)I++;if(I>E){var S=I-E+1,_=a[E-1]||a[I+1],A="single_strand",P="Single Strand (".concat(E,"-").concat(I,")");return _&&(S<=3?(A="bulge",P="Bulge (".concat(E,"-").concat(I,")")):S<=10?(A="loop",P="Loop (".concat(E,"-").concat(I,")")):(A="junction",P="Junction (".concat(E,"-").concat(I,")"))),{type:A,name:P,range:{start:E,end:I}}}return{type:"unknown",name:"Unknown Structure"}}catch(T){return console.warn("Error detecting structure info:",T),{type:"unknown",name:"Unknown Structure"}}}(a,d,c,o),"label"===n&&f.labelContentProps&&(I.labelContent=f.labelContentProps.text||f.labelContentProps.content);var M,w={};if(f.labelLineProps)w.hasLabelLine=!0,w.labelLinePoints=(null===(M=f.labelLineProps.points)||void 0===M?void 0:M.length)||0;return f.labelContentProps&&(w.hasLabelContent=!0,f.labelContentProps.font&&(w.labelFont=f.labelContentProps.font)),Object.keys(w).length>0&&(I.additionalInfo=w),I}catch(k){return console.warn("Error extracting element info:",k),{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a}}}for(var rt,ot,at=n(6902),it=(0,ce.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),lt=(0,ce.Z)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),st=(0,ce.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ut=(0,ce.Z)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),ct=function(e){var t=e.value,n=e.options,r=e.onChange,o=e.theme,a=(0,c.useState)(!1),i=(0,s.Z)(a,2),l=i[0],u=i[1],d=(0,c.useState)(null),f=(0,s.Z)(d,2),p=f[0],h=f[1],m=(0,c.useRef)(null),v=n.find((function(e){return e.value===t}));return(0,c.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&(u(!1),h(null))};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[]),(0,c.useEffect)((function(){l||h(null)}),[l]),(0,le.jsxs)("div",{ref:m,style:{position:"relative",minWidth:80},children:[(0,le.jsxs)("button",{onClick:function(){return u(!l)},style:{height:o.buttonSizes.md.height,padding:o.buttonSizes.md.padding,border:"1px solid ".concat(o.colors.border),borderRadius:o.buttonSizes.md.borderRadius,fontSize:o.buttonSizes.md.fontSize,background:o.colors.background,color:o.colors.text,cursor:"pointer",outline:"none",transition:o.transitions.default,fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeight.normal,display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"100%"},onFocus:function(e){e.currentTarget.style.borderColor=o.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(o.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=o.colors.border,e.currentTarget.style.boxShadow="none"},children:[(0,le.jsx)("span",{children:(null===v||void 0===v?void 0:v.label)||"Select"}),(0,le.jsx)(it,{size:16,style:{transition:o.transitions.default,transform:l?"rotate(180deg)":"rotate(0deg)"}})]}),l&&(0,le.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:o.colors.surface,border:"1px solid ".concat(o.colors.border),borderRadius:o.borderRadius.md,boxShadow:o.shadows.lg,zIndex:1e3,maxHeight:240,overflowY:"auto",marginTop:4},children:n.map((function(e){return(0,le.jsx)("div",{onClick:function(){r(e.value),u(!1),h(null)},style:{padding:"8px 12px",cursor:"pointer",fontSize:o.typography.fontSize.sm,fontFamily:o.typography.fontFamily,borderBottom:"1px solid ".concat(o.colors.borderLight),transition:o.transitions.fast,background:e.value===t?o.colors.primary:"transparent",color:e.value===t?o.colors.textInverse:o.colors.text},onMouseEnter:function(n){if(e.value!==t&&(n.currentTarget.style.background=o.colors.surfaceHover),e.tooltip){var r=n.currentTarget.getBoundingClientRect();h({text:e.tooltip,x:Math.max(r.left+r.width/2,100),y:r.top-8})}},onMouseLeave:function(n){e.value!==t&&(n.currentTarget.style.background="transparent"),h(null)},children:e.label},e.value)}))}),p&&(0,le.jsxs)("div",{style:{position:"fixed",left:p.x,top:p.y,transform:"translateX(-50%) translateY(-100%)",background:o.colors.surface,color:o.colors.text,padding:"8px 12px",borderRadius:o.borderRadius.md,border:"1px solid ".concat(o.colors.border),boxShadow:o.shadows.lg,fontSize:o.typography.fontSize.sm,fontFamily:o.typography.fontFamily,whiteSpace:"nowrap",zIndex:1001,pointerEvents:"none"},children:[p.text,(0,le.jsx)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid ".concat(o.colors.surface),filter:"drop-shadow(0 1px 1px ".concat(o.colors.border,")")}})]})]})},dt=(rt={},(0,u.Z)(rt,z.json,"Structured format, maximum support for all features"),(0,u.Z)(rt,z.bpseq,"Base Pair Sequence - No support for non-canonical base pairs"),(0,u.Z)(rt,z.svg,"Scalable Vector Graphics - Suitable for publications"),(0,u.Z)(rt,z.csv,"Comma Separated Values - No support for non-canonical base pairs"),(0,u.Z)(rt,z.tr,"Traveler Format - No support for non-canonical base pairs"),(0,u.Z)(rt,z.xrna,"XRNA native format - No support for non-canonical base pairs"),rt),ft=G.map((function(e){return{value:e,label:e.toUpperCase(),tooltip:dt[e]||"Export as ".concat(e.toUpperCase()," format")}})),pt=56,ht=function(e){var t=e.onOpenFile,n=e.onSave,r=e.onExportWithFormat,o=e.fileName,a=void 0===o?"":o,i=e.onFileNameChange,l=e.exportFormat,s=e.exportFormats,u=void 0===s?ft:s,c=e.onExportFormatChange,d=e.downloadButtonReference,f=e.fileNameInputReference,p=e.saveButtonsDisabledFlag,h=e.onDownload,m=(0,ue.Fg)().theme;return(0,le.jsxs)("div",{style:{position:"absolute",top:0,left:kt,right:0,height:pt,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",background:m.colors.surface,borderBottom:"1px solid ".concat(m.colors.border),zIndex:1200,transition:m.transitions.default},children:[(0,le.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(m.colors.accent,", ").concat(m.colors.primary,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,le.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,le.jsx)(he.z,{label:"Open",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.click()},variant:"secondary",icon:(0,le.jsx)(lt,{size:12})}),(0,le.jsx)("input",{ref:function(e){null!==e&&(f.current=e)},style:{display:"none"},type:"file",accept:K.inputFileExtensions.map((function(e){return".".concat(e)})).join(","),onChange:t,onClick:function(e){e.currentTarget.value=""}}),(0,le.jsx)("input",{type:"text",placeholder:"Filename",value:a,onChange:function(e){return null===i||void 0===i?void 0:i(e.target.value)},style:{height:m.buttonSizes.md.height,padding:m.buttonSizes.md.padding,border:"1px solid ".concat(m.colors.border),borderRadius:m.buttonSizes.md.borderRadius,fontSize:m.buttonSizes.md.fontSize,background:m.colors.background,color:m.colors.text,minWidth:180,transition:m.transitions.default},onFocus:function(e){e.currentTarget.style.borderColor=m.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(m.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=m.colors.border,e.currentTarget.style.boxShadow="none"}}),(0,le.jsx)(ct,{value:null!==l&&void 0!==l?l:"",options:u,onChange:function(e){return null===c||void 0===c?void 0:c(e)},theme:m}),n&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(he.z,{label:"Save",onClick:n,disabled:p||!l,variant:"secondary",icon:(0,le.jsx)(st,{size:12}),ref:d}),(0,le.jsx)(he.z,{label:"Export",variant:"primary",icon:(0,le.jsx)(ut,{size:12}),disabled:p||!l,onClick:function(){l&&(null===r||void 0===r||r(a,l))}})]}),!n&&(0,le.jsx)(he.z,{label:"Download",onClick:h,disabled:p||!l,variant:"secondary",icon:(0,le.jsx)(De,{size:12}),ref:d})]}),(0,le.jsx)(at.T,{})]})},mt=function(e){var t,n,r=e.mouseOverText,o=e.mouseOverTextDimensions,a=e.mouseUIPosition,i=e.parentDivResizeDetector,l=e.TOPBAR_HEIGHT,s=e.MOUSE_OVER_TEXT_FONT_SIZE,u=e.mouseOverTextSvgTextElementReference,d=(0,c.useMemo)((function(){return 0===r.length?null:(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("rect",{x:0,y:0,width:o.width+16,height:o.height+16,fill:"#f8fafc",stroke:"#cbd5e1",rx:8,ry:8,strokeWidth:1.5}),(0,le.jsx)("text",{fill:"#1e293b",stroke:"none",x:8,y:8+s,ref:u,xmlSpace:"preserve",fontFamily:"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontSize:s,fontWeight:"500",children:r.split("\n").map((function(e,t){return(0,le.jsx)("tspan",{x:8,dy:0===t?0:1.4*s,children:e},t)}))})]})}),[r,o,s,u]),f=Math.max(0,Math.min(a.x+12,Math.max((null!==(t=i.width)&&void 0!==t?t:0)-kt,0)-(o.width+12))),p=Math.max(0,Math.min(a.y+12,Math.max((null!==(n=i.height)&&void 0!==n?n:0)-l,0)-(o.height+12)));return(0,le.jsx)("g",{id:"structure-tooltip",style:{display:"inline",filter:"url(#xrTooltipShadow)"},transform:"translate(".concat(f,", ").concat(p,")"),children:d})},vt=function(e){var t=e.settings,n=e.viewportWidth,r=e.viewportHeight,o=e.viewportScale,a=(0,ue.Fg)().isDarkMode,i=(t[V.pE.GRID_ENABLED],t[V.pE.GRID_HORIZONTAL_LINES]),l=t[V.pE.GRID_VERTICAL_LINES],s=t[V.pE.GRID_LEFT_RIGHT_DIAGONAL],u=t[V.pE.GRID_RIGHT_LEFT_DIAGONAL],d=t[V.pE.GRID_CONCENTRIC_CIRCLES],f=t[V.pE.GRID_DOTTED],p=t[V.pE.GRID_SPACING],h=t[V.pE.GRID_COLOR],m=(0,c.useMemo)((function(){return h||(a?"#E0E0E0":"#404040")}),[h,a]),v=Math.max(10,.5*p),x=Math.max(1,v*o),g=Math.max(.3,Math.max(.1,o)),y=(0,c.useMemo)((function(){if(x<=0)return{left:0,right:0,top:0,bottom:0};var e=.2*Math.max(n,r),t=-e,o=n+e,a=-e,i=r+e;return{left:Math.floor(t/x)*x,right:Math.ceil(o/x)*x,top:Math.floor(a/x)*x,bottom:Math.ceil(i/x)*x}}),[n,r,x]),b=(0,c.useMemo)((function(){if(!i)return[];for(var e=[],t=y.top;t<=y.bottom;t+=x)e.push((0,le.jsx)("line",{x1:y.left,y1:t,x2:y.right,y2:t,stroke:m,strokeWidth:g,opacity:.25},"h-".concat(t)));return e}),[i,y,x,m,g]),N=(0,c.useMemo)((function(){if(!l)return[];for(var e=[],t=y.left;t<=y.right;t+=x)e.push((0,le.jsx)("line",{x1:t,y1:y.top,x2:t,y2:y.bottom,stroke:m,strokeWidth:g,opacity:.25},"v-".concat(t)));return e}),[l,y,x,m,g]),E=(0,c.useMemo)((function(){if(!s)return[];for(var e=x*Math.sqrt(2),t=Math.max(n,r),o=y.left-t,a=y.right+t,i=[],l=0;l<=a-o;l+=e){var u=o+l,c=y.top,d=u+t,f=y.bottom;i.push((0,le.jsx)("line",{x1:u,y1:c,x2:d,y2:f,stroke:m,strokeWidth:g,opacity:.15},"lr-".concat(l)))}return i}),[s,y,x,m,g,n,r]),I=(0,c.useMemo)((function(){if(!u)return[];for(var e=x*Math.sqrt(2),t=Math.max(n,r),o=y.left-t,a=y.right+t,i=[],l=0;l<=a-o;l+=e){var s=o+l,c=y.bottom,d=s+t,f=y.top;i.push((0,le.jsx)("line",{x1:s,y1:c,x2:d,y2:f,stroke:m,strokeWidth:g,opacity:.15},"rl-".concat(l)))}return i}),[u,y,x,m,g,n,r]),C=(0,c.useMemo)((function(){if(!d)return[];for(var e=n/2,t=r/2,o=.6*Math.max(n,r),a=[],i=x;i<=o;i+=x)a.push((0,le.jsx)("circle",{cx:e,cy:t,r:i,stroke:m,strokeWidth:g,fill:"none",opacity:.15},"c-".concat(i)));return a}),[d,x,m,g,n,r]),S=(0,c.useMemo)((function(){if(!f)return[];for(var e=[],t=2*x,o=1.5*Math.max(n,r),a=-o;a<=o;a+=t){var i=a,l=a+o,s=o;e.push((0,le.jsx)("line",{x1:i,y1:0,x2:l,y2:s,stroke:m,strokeWidth:.5*g,opacity:.1},"cross-lr-".concat(a)))}for(var u=-o;u<=o;u+=t){var c=u,d=o,p=u+o;e.push((0,le.jsx)("line",{x1:c,y1:d,x2:p,y2:0,stroke:m,strokeWidth:.5*g,opacity:.1},"cross-rl-".concat(u)))}return e}),[f,x,m,g,n,r]);return i||l||s||u||d||f?(0,le.jsxs)("g",{id:"canvas-grid","data-theme-ignore":!0,pointerEvents:"none",children:[b,N,E,I,C,S]}):null},xt=(0,ce.Z)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),gt=(0,ce.Z)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),yt=(0,ce.Z)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),bt=(0,ce.Z)("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),Nt=(0,ce.Z)("move-horizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]),Et=(0,ce.Z)("move-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]]),It=(0,ce.Z)("move-up-left",[["path",{d:"M5 11V5H11",key:"3q78g9"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]]),Ct=(0,ce.Z)("move-up-right",[["path",{d:"M13 5H19V11",key:"1n1gyv"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]]),St=function(e){var t=e.settings,n=e.setSettings,r=e.onZoomIn,o=e.onZoomOut,i=e.onResetViewport,l=e.position,d=void 0===l?{top:80,right:20}:l,f=(0,ue.Fg)(),p=f.theme,h=f.isDarkMode,m=(0,c.useState)(!1),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=function(){return g(!x)},b=function(e,r){n((0,a.Z)((0,a.Z)({},t),{},(0,u.Z)({},e,r)))},N=function(e){var t=e.currentColor,n=e.onColorChange,r=e.label,o=(0,c.useState)(!1),a=(0,s.Z)(o,2),i=a[0],l=a[1],u=(0,c.useState)(t||"#808080"),d=(0,s.Z)(u,2),f=d[0],m=d[1],v=(0,c.useRef)(null);if((0,c.useEffect)((function(){if(i){var e=function(e){v.current&&(v.current.contains(e.target)||l(!1))};return document.addEventListener("mousedown",e),setTimeout((function(){var e;return null===(e=v.current)||void 0===e?void 0:e.focus()}),0),function(){return document.removeEventListener("mousedown",e)}}}),[i]),"Grid Lines"===r){var x=h?["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA"]:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"];return(0,le.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,le.jsx)("label",{style:{color:p.colors.text,fontSize:"13px"},children:r})}),(0,le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,le.jsxs)("div",{style:{position:"relative"},children:[(0,le.jsx)("button",{onClick:function(){i?l(!1):(m(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:h?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":p.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,le.jsxs)("div",{ref:v,style:{position:"absolute",top:"32px",left:0,background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var t=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(t),l(!1)}},children:[(0,le.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,le.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:"#808080",onChange:function(e){return m(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,le.jsx)("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.text,fontSize:"12px"}})]}),(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,le.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,le.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.primary),background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),x.map((function(e){return(0,le.jsx)("button",{onClick:function(){n(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})}var g=h?["#E0E0E0","#B0B0B0","#808080","#404040"]:["#404040","#606060","#808080","#A0A0A0"];return(0,le.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,le.jsx)("label",{style:{color:p.colors.text,fontSize:"13px"},children:r})}),(0,le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,le.jsxs)("div",{style:{position:"relative"},children:[(0,le.jsx)("button",{onClick:function(){i?l(!1):(m(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:h?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":p.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,le.jsxs)("div",{ref:v,style:{position:"absolute",top:"32px",left:0,background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var t=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(t),l(!1)}},children:[(0,le.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,le.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:"#808080",onChange:function(e){return m(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,le.jsx)("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.text,fontSize:"12px"}})]}),(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,le.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,le.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.primary),background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),g.map((function(e){return(0,le.jsx)("button",{onClick:function(){n(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})},E=function(e){var r=e.setting,o=e.icon,i=e.label,l=e.isActive,s=e.onMouseEnter,c=e.onMouseLeave;return(0,le.jsxs)("button",{onClick:function(){return function(e){n((0,a.Z)((0,a.Z)({},t),{},(0,u.Z)({},e,!t[e])))}(r)},onMouseEnter:s,onMouseLeave:c,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:l?p.colors.primary:"transparent",color:l?"#FFFFFF":p.colors.text,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:i,children:[(0,le.jsx)(o,{size:20}),(0,le.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:i})]})};return(0,le.jsxs)("div",{style:{position:"absolute",top:d.top,right:d.right,zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-end"},children:[(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[(0,le.jsx)("button",{onClick:r,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom In",children:(0,le.jsx)(xt,{size:20})}),(0,le.jsx)("button",{onClick:o,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom Out",children:(0,le.jsx)(gt,{size:20})}),(0,le.jsx)("button",{onClick:i,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Reset View",children:(0,le.jsx)(be,{size:20})})]}),(0,le.jsxs)("div",{style:{position:"relative"},children:[(0,le.jsx)("button",{onClick:y,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",transition:"all 0.2s ease",transform:x?"rotate(90deg)":"rotate(0deg)"},title:"View Settings",children:(0,le.jsx)(Me,{size:20})}),x&&(0,le.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"12px",background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"16px",padding:"20px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",minWidth:"320px",zIndex:1e3},children:[(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,le.jsx)("h3",{style:{margin:0,color:p.colors.text,fontSize:"18px",fontWeight:"600"},children:"View Settings"}),(0,le.jsx)("button",{onClick:y,style:{background:"none",border:"none",color:p.colors.text,cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,le.jsx)(Le.Z,{size:20})})]}),(0,le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,le.jsx)("h4",{style:{margin:"0 0 12px 0",color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Layout modes"}),(0,le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",padding:"4px",background:p.colors.backgroundSecondary,borderRadius:"10px"},children:[(0,le.jsxs)("button",{onClick:function(){return n((0,a.Z)((0,a.Z)({},t),{},(0,u.Z)({},V.pE.PATH_MODE,!1)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[V.pE.PATH_MODE]?"transparent":p.colors.primary,color:t[V.pE.PATH_MODE]?p.colors.text:"#FFFFFF",cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show nucleotide sequence text",children:[(0,le.jsx)(yt,{size:16}),"Sequence"]}),(0,le.jsxs)("button",{onClick:function(){return n((0,a.Z)((0,a.Z)({},t),{},(0,u.Z)({},V.pE.PATH_MODE,!0)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[V.pE.PATH_MODE]?p.colors.primary:"transparent",color:t[V.pE.PATH_MODE]?"#FFFFFF":p.colors.text,cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show path lines tracing nucleotide centers",children:[(0,le.jsx)(bt,{size:16}),"Path"]})]}),(0,le.jsx)("p",{style:{margin:"8px 0 0 0",color:p.colors.textSecondary,fontSize:"11px",lineHeight:"1.4"},children:t[V.pE.PATH_MODE]?"Path mode shows lines tracing nucleotide centers for an abstracted view of larger structures.":"Sequence mode displays nucleotide text with full details."})]}),(0,le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,le.jsx)("h4",{style:{margin:"0 0 12px 0",color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Types"}),(0,le.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[(0,le.jsx)(E,{setting:V.pE.GRID_HORIZONTAL_LINES,icon:Nt,label:"Horizontal",isActive:t[V.pE.GRID_HORIZONTAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,le.jsx)(E,{setting:V.pE.GRID_VERTICAL_LINES,icon:Et,label:"Vertical",isActive:t[V.pE.GRID_VERTICAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,le.jsx)(E,{setting:V.pE.GRID_LEFT_RIGHT_DIAGONAL,icon:It,label:"LR Diagonal",isActive:t[V.pE.GRID_LEFT_RIGHT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,le.jsx)(E,{setting:V.pE.GRID_RIGHT_LEFT_DIAGONAL,icon:Ct,label:"RL Diagonal",isActive:t[V.pE.GRID_RIGHT_LEFT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,le.jsx)(E,{setting:V.pE.GRID_CONCENTRIC_CIRCLES,icon:_e,label:"Circles",isActive:t[V.pE.GRID_CONCENTRIC_CIRCLES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,le.jsxs)("button",{onClick:function(){var e,r=(e={},(0,u.Z)(e,V.pE.GRID_ENABLED,V.Z[V.pE.GRID_ENABLED]),(0,u.Z)(e,V.pE.GRID_HORIZONTAL_LINES,V.Z[V.pE.GRID_HORIZONTAL_LINES]),(0,u.Z)(e,V.pE.GRID_VERTICAL_LINES,V.Z[V.pE.GRID_VERTICAL_LINES]),(0,u.Z)(e,V.pE.GRID_LEFT_RIGHT_DIAGONAL,V.Z[V.pE.GRID_LEFT_RIGHT_DIAGONAL]),(0,u.Z)(e,V.pE.GRID_RIGHT_LEFT_DIAGONAL,V.Z[V.pE.GRID_RIGHT_LEFT_DIAGONAL]),(0,u.Z)(e,V.pE.GRID_CONCENTRIC_CIRCLES,V.Z[V.pE.GRID_CONCENTRIC_CIRCLES]),(0,u.Z)(e,V.pE.GRID_DOTTED,V.Z[V.pE.GRID_DOTTED]),(0,u.Z)(e,V.pE.GRID_SPACING,V.Z[V.pE.GRID_SPACING]),(0,u.Z)(e,V.pE.GRID_COLOR,V.Z[V.pE.GRID_COLOR]),(0,u.Z)(e,V.pE.CANVAS_COLOR,V.Z[V.pE.CANVAS_COLOR]),e);n((0,a.Z)((0,a.Z)({},t),r))},onMouseEnter:function(e){e.currentTarget.style.background=p.colors.surfaceHover,e.currentTarget.style.borderColor=p.colors.borderDark,e.currentTarget.style.color=p.colors.text},onMouseLeave:function(e){e.currentTarget.style.background=p.colors.surface,e.currentTarget.style.borderColor=p.colors.border,e.currentTarget.style.color=p.colors.textSecondary},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:"transparent",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:"Reset all canvas and grid settings to default",children:[(0,le.jsx)(be,{size:20}),(0,le.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:"Reset"})]})]})]}),(0,le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,le.jsx)("label",{style:{color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Spacing"}),(0,le.jsx)("span",{style:{color:p.colors.textSecondary,fontSize:"12px"},children:t[V.pE.GRID_SPACING]})]}),(0,le.jsx)("input",{type:"range",min:"5",max:"100",step:"2",value:t[V.pE.GRID_SPACING],onChange:function(e){return n((0,a.Z)((0,a.Z)({},t),{},(0,u.Z)({},V.pE.GRID_SPACING,parseInt(e.target.value))))},style:{width:"100%",height:"6px",borderRadius:"3px",background:p.colors.border,outline:"none",cursor:"pointer"}})]}),(0,le.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,le.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,le.jsx)("h4",{style:{margin:0,color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Colors"})}),(0,le.jsx)(N,{currentColor:t[V.pE.CANVAS_COLOR],onColorChange:function(e){return b(V.pE.CANVAS_COLOR,e)},label:"Canvas Background"}),(0,le.jsx)(N,{currentColor:t[V.pE.GRID_COLOR],onColorChange:function(e){return b(V.pE.GRID_COLOR,e)},label:"Grid Lines"})]})]})]})]})},_t=c.memo(St),At={},Pt=-50;Pt<=50;Pt++)At[Pt]=Math.pow(k.SCALE_BASE,Pt);var Tt,Rt={top:80,right:17},Mt=function(){return function(){var e=new Date,t=function(e){return e.toString().padStart(2,"0")},n=[e.getFullYear().toString().slice(-2),t(e.getMonth()+1),t(e.getDate()),"_",t(e.getHours()),t(e.getMinutes())].join("");return"exo_".concat(n)}()},wt=[{shortcut:"Ctrl/cmd + O",action:"Open file picker"},{shortcut:"Ctrl/cmd + S",action:"Save"},{shortcut:"Ctrl/cmd + Shift + S",action:"Export as"},{shortcut:"Ctrl/cmd + 0",action:"Reset viewport"},{shortcut:"Left Click",action:"Select constraint"},{shortcut:"Right Click",action:"Open constraint menu"},{shortcut:"Ctrl/cmd + Z",action:"Undo change"},{shortcut:"Ctrl/cmd + Y",action:"Redo change"},{shortcut:"Middle Click",action:"Freeze selection"},{shortcut:"Ctrl/cmd + Click",action:"Break or create pair"},{shortcut:"Ctrl/cmd + Shift + Click",action:"Create & reposition pair"},{shortcut:"Shift + Click (on basepair)",action:"Recenter constraint"}],kt=420,Ot="parent_div",Lt="viewport",jt="testSpace",Dt="mouse_over_text_group",Zt="viewport_scale_group_0",Ft="viewport_scale_group_1",Bt="viewport_translate_group_0",Ut="viewport_translate_group_1",zt="svg_background",Gt="svg_scene_group",Wt=7,Ht="nucleotide",Kt="basePair",Vt="label",Xt="noStroke",qt="|",Yt=function(e){return e.URL_PARSING_ERROR="URL parsing error",e.NO_DATA="No data",e.DATA_IS_LOADING="Data is loading",e.DATA_IS_LOADED="Data is loaded",e.DATA_LOADING_FAILED="Data loading failed",e}(Yt||{}),Qt=(ot={},(0,u.Z)(ot,d.OK.EDIT,"red"),(0,u.Z)(ot,d.OK.FORMAT,"blue"),(0,u.Z)(ot,d.OK.ANNOTATE,"rgb(0,110,51)"),ot);(Tt||(Tt={})).Component=function(e){var t,n,p,h,m,v,x,g=e.r2dtLegacyVersionFlag,y=(0,c.useState)(""),N=(0,s.Z)(y,2),I=N[0],C=N[1],S=(0,c.useState)({}),T=(0,s.Z)(S,2),w=T[0],O=T[1],L=(0,c.useState)(0),j=(0,s.Z)(L,2),D=j[0],Z=j[1],B=(0,c.useState)(""),U=(0,s.Z)(B,2),G=(U[0],U[1]),te=(0,c.useState)(""),ne=(0,s.Z)(te,2),re=ne[0],oe=ne[1],ae=(0,c.useState)(z.json),ie=(0,s.Z)(ae,2),ue=ie[0],ce=ie[1],de=(0,c.useState)({x:0,y:0,width:1,height:1}),fe=(0,s.Z)(de,2),pe=fe[0],he=fe[1],me=(0,c.useState)({}),ve=(0,s.Z)(me,2),xe=ve[0],ge=ve[1],ye=(0,c.useState)(!1),be=(0,s.Z)(ye,2),Ne=be[0],Ee=(be[1],(0,c.useState)({})),Ie=(0,s.Z)(Ee,2),Ce=Ie[0],Se=Ie[1],_e=(0,c.useState)([]),Ae=(0,s.Z)(_e,2),Pe=Ae[0],Te=Ae[1],Re=(0,c.useState)([]),Me=(0,s.Z)(Re,2),we=Me[0],ke=Me[1],Le=(0,c.useState)(d.OK.EDIT),je=(0,s.Z)(Le,2),De=je[0],Fe=je[1],Be=(0,c.useRef)(d.OK.EDIT);(0,c.useEffect)((function(){Be.current=De}),[De]),(0,c.useEffect)((function(){var e=function(e){if("f"===e.key||"F"===e.key){var t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;e.preventDefault();var n=ma.current,r=ha.current;if(!(Object.keys(n).length>0))return;for(var o=!1,a=0,u=Object.entries(n);a<u.length;a++){var c=(0,s.Z)(u[a],2),d=c[0],f=c[1],p=Number.parseInt(d);if(p in r)for(var h=0,m=Object.entries(f);h<m.length;h++){var v=(0,s.Z)(m[h],2),x=v[0],g=v[1];if(x in r[p]){var y,b=(0,l.Z)(g);try{for(b.s();!(y=b.n()).done;){var N=y.value;if(r[p][x].has(N)){o=!0;break}}}catch(J){b.e(J)}finally{b.f()}}if(o)break}if(o)break}if(o){for(var E=structuredClone(r),I=0,C=Object.entries(n);I<C.length;I++){var S=(0,s.Z)(C[I],2),_=S[0],A=S[1],P=Number.parseInt(_);if(P in E){for(var T=0,R=Object.entries(A);T<R.length;T++){var M=(0,s.Z)(R[T],2),w=M[0],k=M[1];if(w in E[P]){var O,L=(0,l.Z)(k);try{for(L.s();!(O=L.n()).done;){var j=O.value;E[P][w].delete(j)}}catch(J){L.e(J)}finally{L.f()}0===E[P][w].size&&delete E[P][w]}}0===Object.keys(E[P]).length&&delete E[P]}}Se(E)}else{for(var D=structuredClone(r),Z=0,F=Object.entries(n);Z<F.length;Z++){var B=(0,s.Z)(F[Z],2),U=B[0],z=B[1],G=Number.parseInt(U);G in D||(D[G]={});for(var W=0,H=Object.entries(z);W<H.length;W++){var K=(0,s.Z)(H[W],2),V=K[0],X=K[1];V in D[G]||(D[G][V]=new Set);var q,Y=(0,l.Z)(X);try{for(Y.s();!(q=Y.n()).done;){var Q=q.value;D[G][V].add(Q)}}catch(J){Y.e(J)}finally{Y.f()}}}Se(D)}var $=va.current;Te([].concat((0,i.Z)($),[structuredClone(r)])),ke([])}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]);var ze=(0,c.useState)(Y.Uq.Enum.SINGLE_NUCLEOTIDE),Ge=(0,s.Z)(ze,2),We=Ge[0],He=Ge[1],Ke=(0,c.useState)(V.Z),Ve=(0,s.Z)(Ke,2),Xe=Ve[0],qe=Ve[1],Ye=(0,c.useState)((0,le.jsx)(le.Fragment,{})),$e=(0,s.Z)(Ye,2),et=$e[0],rt=$e[1],ot=(0,c.useState)({}),at=(0,s.Z)(ot,2),it=at[0],lt=at[1],st=(0,c.useState)({}),ut=(0,s.Z)(st,2),ct=ut[0],dt=ut[1],ft=(0,c.useState)(Yt.NO_DATA),xt=(0,s.Z)(ft,2),gt=xt[0],yt=xt[1],bt=(0,c.useState)(""),Nt=(0,s.Z)(bt,2),Et=Nt[0],It=Nt[1],Ct=(0,c.useState)({width:0,height:0}),St=(0,s.Z)(Ct,2),Pt=St[0],Tt=St[1],Dt=(0,c.useState)({x:0,y:0}),qt=(0,s.Z)(Dt,2),$t=qt[0],Jt=qt[1],en=(0,c.useState)({x:0,y:0}),tn=(0,s.Z)(en,2),nn=tn[0],rn=tn[1],on=(0,c.useState)(void 0),an=(0,s.Z)(on,2),ln=an[0],sn=an[1],un=(0,c.useState)({x:0,y:0}),cn=(0,s.Z)(un,2),dn=cn[0],fn=cn[1],pn=(0,c.useState)(null),hn=(0,s.Z)(pn,2),mn=hn[0],vn=hn[1],xn=(0,c.useState)(!1),gn=(0,s.Z)(xn,2),yn=gn[0],bn=gn[1],Nn=(0,c.useState)(""),En=(0,s.Z)(Nn,2),In=En[0],Cn=En[1],Sn=(0,c.useState)(""),_n=(0,s.Z)(Sn,2),An=(_n[0],_n[1]),Pn=(0,c.useState)(""),Tn=(0,s.Z)(Pn,2),Rn=Tn[0],Mn=Tn[1],wn=(0,c.useState)(""),kn=(0,s.Z)(wn,2),On=kn[0],Ln=kn[1],jn=(0,c.useState)(Y.Uq.DEFAULT_OPTIONS),Dn=(0,s.Z)(jn,2),Zn=Dn[0],Fn=Dn[1],Bn=(0,c.useState)((0,le.jsx)(le.Fragment,{})),Un=(0,s.Z)(Bn,2),zn=Un[0],Gn=(Un[1],(0,c.useState)({})),Wn=(0,s.Z)(Gn,2),Hn=Wn[0],Kn=Wn[1],Vn=(0,c.useState)({}),Xn=(0,s.Z)(Vn,2),qn=Xn[0],Yn=Xn[1],Qn=(0,c.useState)({}),$n=(0,s.Z)(Qn,2),Jn=$n[0],er=$n[1],tr=(0,c.useState)({}),nr=(0,s.Z)(tr,2),rr=nr[0],or=nr[1],ar=(0,c.useState)(""),ir=(0,s.Z)(ar,2),lr=(ir[0],ir[1]),sr=(0,c.useState)(void 0),ur=(0,s.Z)(sr,2),cr=ur[0],dr=ur[1],fr=(0,c.useState)(0),pr=(0,s.Z)(fr,2),hr=pr[0],mr=pr[1],vr=(0,c.useState)(0),xr=(0,s.Z)(vr,2),gr=xr[0],yr=xr[1],br=(0,c.useState)(1),Nr=(0,s.Z)(br,2),Er=Nr[0],Ir=Nr[1],Cr=(0,c.useState)(0),Sr=(0,s.Z)(Cr,2),_r=Sr[0],Ar=Sr[1],Pr=(0,c.useState)([]),Tr=(0,s.Z)(Pr,2),Rr=Tr[0],Mr=Tr[1],wr=(0,c.useState)(void 0),kr=(0,s.Z)(wr,2),Or=kr[0],Lr=kr[1],jr=(0,c.useState)(0),Dr=(0,s.Z)(jr,2),Zr=Dr[0],Fr=Dr[1],Br=(0,c.useState)(0),Ur=(0,s.Z)(Br,2),zr=Ur[0],Gr=Ur[1],Wr=function(e){return e.NONE="none",e.PROPERTIES="properties",e.BASEPAIR="basepair",e.BASE_PAIR_EDITOR="basePairEditor",e.SETTINGS="settings",e.ABOUT="about",e}({}),Hr=(0,c.useState)(Wr.NONE),Kr=(0,s.Z)(Hr,2),Vr=Kr[0],Xr=Kr[1],qr=(0,c.useState)(!1),Yr=(0,s.Z)(qr,2),Qr=Yr[0],$r=Yr[1],Jr=(0,c.useState)(""),eo=(0,s.Z)(Jr,2),to=(eo[0],eo[1]),no=(0,c.useState)(void 0),ro=(0,s.Z)(no,2),oo=(ro[0],ro[1]),ao=(0,c.useState)({}),io=(0,s.Z)(ao,2),lo=io[0],so=io[1],uo=(0,c.useState)([]),co=(0,s.Z)(uo,2),fo=co[0],po=co[1],ho=(0,c.useRef)(fo);ho.current=fo;var mo=(0,c.useState)(void 0),vo=(0,s.Z)(mo,2),xo=vo[0],go=vo[1],yo=(0,c.useState)((function(){return function(e){return e}})),bo=(0,s.Z)(yo,2),No=bo[0],Eo=bo[1],Io=(0,c.useRef)(No);Io.current=No;var Co=(0,c.useState)(!1),So=(0,s.Z)(Co,2),_o=So[0],Ao=So[1],Po=(0,c.useRef)(_o);Po.current=_o;var To=(0,c.useState)(!1),Ro=(0,s.Z)(To,2),Mo=Ro[0],wo=Ro[1];function ko(e,t){null!==e&&fn(e.initiateDrag()),vn(e),or(t)}(0,c.useRef)(Mo).current=Mo;var Oo=(0,c.useRef)(null),Lo=(0,c.createRef)(),jo=function(e){void 0===e&&(e={});var t=e.skipOnMount,n=void 0!==t&&t,r=e.refreshMode,o=e.refreshRate,a=void 0===o?1e3:o,i=e.refreshOptions,l=e.handleWidth,s=void 0===l||l,u=e.handleHeight,d=void 0===u||u,f=e.targetRef,p=e.observerOptions,h=e.onResize,m=(0,c.useRef)(n),v=(0,c.useRef)(null),x=(0,c.useRef)(),g=null!==f&&void 0!==f?f:v,y=(0,c.useState)({width:void 0,height:void 0}),N=y[0],I=y[1];return A((function(){if(s||d){var e=_(h,I,s,d);x.current=E((function(t){(s||d)&&t.forEach((function(t){var n=t&&t.contentRect||{},r=n.width,o=n.height;!m.current&&e({width:r,height:o}),m.current=!1}))}),r,a,i);var t=new window.ResizeObserver(x.current);return g.current&&t.observe(g.current,p),function(){var e,n;t.disconnect(),null===(n=(e=x.current).cancel)||void 0===n||n.call(e)}}}),[r,a,i,s,d,h,p,g.current]),b({ref:g},N)}(),Do=(0,c.useRef)(We);Do.current=We;var Zo=(0,c.useRef)();Zo.current=De;var Fo=(0,c.useRef)(NaN);Fo.current=hr;var Bo=(0,c.useRef)(NaN);Bo.current=gr;var Uo=(0,c.useRef)();Uo.current=w;var zo=(0,c.useRef)(),Go=(0,c.useRef)();Go.current=Zn;var Wo=(0,c.useRef)();Wo.current=Hn;var Ho=(0,c.useRef)();Ho.current=qn;var Ko=(0,c.useRef)();Ko.current=mn;var Vo=(0,c.useRef)();Vo.current=nn;var Xo=(0,c.useRef)();Xo.current=dn;var qo=(0,c.useRef)(),Yo=(0,c.useRef)();Yo.current=Er;var Qo=(0,c.useRef)(),$o=(0,c.useRef)(),Jo=(0,c.useRef)();Jo.current=_r;var ea=(0,c.useRef)(),ta=(0,c.useRef)();ta.current=pe;var na=(0,c.useRef)();na.current=yn,(0,c.useRef)().current=zn;var ra=(0,c.useRef)();ra.current=Xe;var oa=(0,c.useRef)();oa.current=re;var aa=(0,c.useRef)();aa.current=ue;var ia=(0,c.useRef)(null);(0,c.useRef)().current=In;var la=(0,c.useRef)(null),sa=(0,c.useRef)(0);sa.current=D;var ua=(0,c.useRef)(),ca=(0,c.useRef)(),da=(0,c.useRef)();da.current=ln;var fa=(0,c.useRef)(),pa=(0,c.useRef)(),ha=(0,c.useRef)();ha.current=Ce;var ma=(0,c.useRef)();ma.current=Jn;var va=(0,c.useRef)();va.current=Pe;var xa=(0,c.useRef)();xa.current=we;var ga=(0,c.useRef)();ga.current=xe;var ya=(0,c.useRef)();ya.current=I;var ba=(0,c.useRef)();ba.current=Or;var Na=(0,c.useRef)();Na.current=cr,(0,c.useEffect)((function(){if((0,q.isEmpty)(w))return ia.current=null,void(""!==re&&(oe(""),oa.current=""));if(""===re){ia.current||(ia.current=Mt());var e=ia.current;null!==e&&(oe(e),oa.current=e)}}),[w,re]),(0,c.useEffect)((function(){(0,q.isEmpty)(w)||void 0!==ue||(ce(z.json),aa.current=z.json)}),[w,ue]);var Ea=g?H:W,Ia=(0,c.useMemo)((function(){return{initiateDrag:function(){return{x:Fo.current,y:Bo.current}},continueDrag:function(e){mr(e.x),yr(e.y)}}}),[]),Ca=(0,c.useMemo)((function(){var e=Object.entries(w);return Z(e.length),fa.current=e,e}),[w]),Sa=(0,c.useMemo)((function(){var e;return Math.max((null!==(e=jo.width)&&void 0!==e?e:0)-kt,0)}),[jo.width,kt]),_a=(0,c.useMemo)((function(){var e;return Math.max((null!==(e=jo.height)&&void 0!==e?e:0)-pt,0)}),[jo.height,pt]),Aa=(0,c.useMemo)((function(){return{width:1/(pe.width+Wt),height:1/pe.height}}),[pe]),Pa=(0,c.useMemo)((function(){return window.widthScale=Sa,window.heightScale=_a,Math.min(Sa*Aa.width,_a*Aa.height)}),[Sa,_a,Aa]);qo.current=Pa;var Ta=(0,c.useMemo)((function(){var e={x:-pe.x,y:-(pe.y+pe.height)},t={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return ua.current=t,t}),[pe]),Ra=(0,c.useMemo)((function(){var e={x:hr,y:gr},t={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return ca.current=t,t}),[hr,gr]),Ma=(0,c.useMemo)((function(){var e=Er*Pa;return{positiveScale:e,negativeScale:1/e,asTransform:["scale(".concat(Pa,")"),"scale(".concat(Er,")")]}}),[Er,Pa]);ea.current=Ma;var wa=(0,c.useMemo)((function(){if(!cr)return null;var e=cr.rnaComplexIndex,t=cr.rnaMoleculeName,n=cr.nucleotideIndex,r=Uo.current;if(!r||!(e in r))return null;var o=r[e].rnaMoleculeProps[t];if(!o||!(n in o.nucleotideProps))return null;var a=o.nucleotideProps[n],i=Math.max(1.5*zr,6*k.DEFAULT_STROKE_WIDTH);return(0,le.jsxs)("g",{children:[(0,le.jsx)("circle",{cx:a.x,cy:a.y,r:i+1,fill:"rgba(99, 102, 241, 0.12)",stroke:"rgba(99, 102, 241, 0.25)",strokeWidth:1,pointerEvents:"none"}),(0,le.jsx)("circle",{cx:a.x,cy:a.y,r:i,fill:"rgba(99, 102, 241, 0.15)",stroke:"none",strokeWidth:0,opacity:.8,pointerEvents:"none"})]})}),[cr,zr]),ka=(0,c.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Do.current;if(Zo.current===d.OK.EDIT){if(void 0===t||!Y.Uq.isEnum(t))return void Va((0,le.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{});var n=Uo.current,r=Go.current;try{var o=ha.current,a=new Y.Uq.record[t](n,lt,dt,Mr,De,o,r,e);Va((0,le.jsx)(J.Component,{rnaComplexProps:n,indicesOfAffectedNucleotides:a.indicesOfAffectedNucleotides,setNucleotideKeysToRerender:lt}),a.indicesOfAffectedNucleotides)}catch(i){if("object"!==typeof i||!("errorMessage"in i))throw i;Xr(Wr.PROPERTIES),Va((0,le.jsx)("b",{style:{color:"red"},children:i.errorMessage}),{})}}}}),[]),Oa=(0,c.useMemo)((function(){return function(e,t){var n=t.rnaComplexIndex,r=t.rnaMoleculeName,o=t.nucleotideIndex;if(e.ctrlKey&&e.button===k.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),Ba();var i=Uo.current[n].rnaMoleculeProps[r].nucleotideProps[o],l=!1;return void 0!==i.labelContentProps&&(delete i.labelContentProps,l=!0),void 0!==i.labelLineProps&&(delete i.labelLineProps,l=!0),void(l&&lt((0,u.Z)({},n,(0,u.Z)({},r,[o]))))}switch(e.button){case k.MouseButtonIndices.Left:var s=Ia;if(Zo.current===d.OK.EDIT){var c=Uo.current[n].rnaMoleculeProps[r].nucleotideProps[o],f=c.labelContentProps;void 0!==f&&(s={initiateDrag:function(){return{x:f.x,y:f.y}},continueDrag:function(e){c.labelContentProps=(0,a.Z)((0,a.Z)({},f),e),f.x=e.x,f.y=e.y,lt((0,u.Z)({},n,(0,u.Z)({},r,[o])))}})}var p=new Set;p.add(o),ko(s,(0,u.Z)({},n,(0,u.Z)({},r,p)));break;case k.MouseButtonIndices.Right:ka(t)}}}),[]),La=(0,c.useMemo)((function(){return function(e,t,n){var r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=t.nucleotideIndex;if(e.ctrlKey&&e.button===k.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),Ba();var i=Uo.current[r].rnaMoleculeProps[o].nucleotideProps[a],l=!1;return void 0!==i.labelContentProps&&(delete i.labelContentProps,l=!0),void 0!==i.labelLineProps&&(delete i.labelLineProps,l=!0),void(l&&lt((0,u.Z)({},r,(0,u.Z)({},o,[a]))))}var s=Uo.current[r].rnaMoleculeProps[o].nucleotideProps[a].labelLineProps;if(void 0!==s)switch(e.button){case k.MouseButtonIndices.Left:var c=Ia;if(Zo.current===d.OK.EDIT){var p=s.points[0],h=s.points.map((function(e){return(0,f.subtract)(e,p)}));c={initiateDrag:function(){return{x:p.x,y:p.y}},continueDrag:function(e){for(var t=0;t<s.points.length;t++){var i=s.points[t],l=(0,f.add)(e,h[t]);i.x=l.x,i.y=l.y}n(),lt((0,u.Z)({},r,(0,u.Z)({},o,[a])))}}}var m=new Set;m.add(a),ko(c,(0,u.Z)({},r,(0,u.Z)({},o,m)));break;case k.MouseButtonIndices.Right:ka(t)}}}),[]),ja=(0,c.useMemo)((function(){return function(e,t,n,r){var o=t.rnaComplexIndex,a=t.rnaMoleculeName,i=t.nucleotideIndex;if(e.ctrlKey&&e.button===k.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),Ba();var l=Uo.current[o].rnaMoleculeProps[a].nucleotideProps[i],s=!1;return void 0!==l.labelContentProps&&(delete l.labelContentProps,s=!0),void 0!==l.labelLineProps&&(delete l.labelLineProps,s=!0),void(s&&lt((0,u.Z)({},o,(0,u.Z)({},a,[i]))))}var c=Uo.current[o].rnaMoleculeProps[a].nucleotideProps[i].labelLineProps;if(void 0!==c)switch(e.button){case k.MouseButtonIndices.Left:var f=Ia;if(Zo.current===d.OK.EDIT){var p=c.points[n];f={initiateDrag:function(){return{x:p.x,y:p.y}},continueDrag:function(e){p.x=e.x,p.y=e.y,r(),lt((0,u.Z)({},o,(0,u.Z)({},a,[i])))}}}var h=new Set;h.add(i),ko(f,(0,u.Z)({},o,(0,u.Z)({},a,h)));break;case k.MouseButtonIndices.Right:Zo.current===d.OK.EDIT&&ka(t)}}}),[]),Da=(0,c.useMemo)((function(){return function(e,t,n){var r=ha.current,o=Go.current;try{var a=new Y.Uq.record[t](Uo.current,lt,dt,Mr,n,r,o,e);if(n===d.OK.FORMAT)return $r(!0),go(void 0),void Eo((function(){return function(e){return a.constrainRelevantHelices(e)}}));var i=a.createRightClickMenu(n);bn(!yn),Va(i,a.indicesOfAffectedNucleotides)}catch(l){if("object"!==typeof l||!("errorMessage"in l))throw l;return void(n===d.OK.FORMAT?($r(!0),go(l.errorMessage)):(Xr(Wr.PROPERTIES),Va((0,le.jsx)("b",{style:{color:"red"},children:l.errorMessage}),{})))}}}),[]),Za=(0,c.useCallback)((function(e,t){var n=ho.current,r=[e,t].sort(P.compareBasePairKeys),o=(0,s.Z)(r,2);e=o[0],t=o[1];for(var a=-1,i=-1,l=[],u=0;u<n.length;u++){var c=n[u],d=c.rnaComplexIndex,f=c.rnaMoleculeName0,p=c.rnaMoleculeName1,h=c.start,m=c.stop;if(d===e.rnaComplexIndex&&f===e.rnaMoleculeName&&p===t.rnaMoleculeName){var v=Math.abs(m[0]-h[0])+1,x=void 0,g=void 0;if(1===v){x=1;var y=t.nucleotideIndex-m[1];if(1!==Math.abs(y))continue;g=y}else x=Math.sign(m[0]-h[0]),g=Math.sign(m[1]-h[1]);var b={lesser:[m[0]+x,m[1]+g],greater:[h[0]-x,h[1]-g]};e.nucleotideIndex!==b.lesser[0]||t.nucleotideIndex!==b.lesser[1]||-1===v&&-1!==a?e.nucleotideIndex!==b.greater[0]||t.nucleotideIndex!==b.greater[1]||-1===v&&-1!==i||(i=u):a=u,l[u]=x*g}}if(-1!==a&&-1!==i&&l[a]*l[i]<0&&(l[a]<0?i=-1:a=-1),-1===a&&-1===i){var N={rnaComplexIndex:e.rnaComplexIndex,rnaMoleculeName0:e.rnaMoleculeName,rnaMoleculeName1:t.rnaMoleculeName,start:{0:e.nucleotideIndex,1:t.nucleotideIndex},stop:{0:e.nucleotideIndex,1:t.nucleotideIndex}};(0,q.sortedArraySplice)(n,(function(e){var t=e.rnaComplexIndex,n=e.rnaMoleculeName0,r=e.rnaMoleculeName1,o=e.start;return e.stop,t-N.rnaComplexIndex||n.localeCompare(N.rnaMoleculeName0)||r.localeCompare(N.rnaMoleculeName1)||o[0]-N.start[0]||o[1]-N.start[1]}),0,[N],q.HandleQueryNotFound.ADD)}else if(-1!==a&&-1!==i){var E=n[a],I=n[i];E.stop=structuredClone(I.stop),n.splice(i,1)}else if(-1!==a){var C=n[a],S=C.start,_=C.stop;if(1===Math.abs(_[0]-S[0])+1){var A=[S[0],e.nucleotideIndex].sort(q.subtractNumbers),T=(0,s.Z)(A,2),R=T[0],M=T[1],w=[S[1],t.nucleotideIndex].sort(q.subtractNumbers),k=(0,s.Z)(w,2),O=k[0],L=k[1];C.start=[R,L],C.stop=[M,O]}else C.stop=[e.nucleotideIndex,t.nucleotideIndex]}else{var j=n[i],D=j.start,Z=j.stop;if(1===Math.abs(Z[0]-D[0])+1){var F=[D[0],e.nucleotideIndex].sort(q.subtractNumbers),B=(0,s.Z)(F,2),U=B[0],z=B[1],G=[D[1],t.nucleotideIndex].sort(q.subtractNumbers),W=(0,s.Z)(G,2),H=W[0],K=W[1];j.start=[U,K],j.stop=[z,H]}else j.start=[e.nucleotideIndex,t.nucleotideIndex]}var V=structuredClone(n);po(V)}),[]),Fa=(0,c.useCallback)((function(e,t,n,r,o){var a=ho.current;if(0!==a.length){var i=structuredClone(a),l=i.findIndex((function(a){return a.rnaComplexIndex===e&&a.rnaMoleculeName0===t&&a.rnaMoleculeName1===n&&(r-a.start[0])*(r-a.stop[0])<=0&&(o-a.start[1])*(o-a.stop[1])<=0})),s=i[l];if(1===Math.abs(s.stop[0]-s.start[0])+1)i.splice(l,1);else{var u=Math.sign(s.stop[0]-s.start[0]),c=Math.sign(s.stop[1]-s.start[1]);if(r===s.start[0])s.start[0]+=u,s.start[1]+=c;else if(r===s.stop[0])s.stop[0]-=u,s.stop[1]-=c;else{var d=structuredClone(s),f=structuredClone(s);d.stop={0:r-u,1:o-c},f.start={0:r+u,1:o+c},i.splice(l,1,d,f)}}po(i)}}),[]),Ba=(0,c.useMemo)((function(){return function(){var e=Uo.current,t=ho.current,n=va.current;Te([].concat((0,i.Z)(n),[{rnaComplexProps:structuredClone(e),globalHelicesForFormatMenu:structuredClone(t)}])),ke([]),Ao(!0)}}),[]),Ua=(0,c.useMemo)((function(){return function(e,t){var n=ra.current;if(e.button===k.MouseButtonIndices.Left&&e.ctrlKey){var r,o;e.preventDefault(),e.stopPropagation(),Ba();var a=Na.current;if(!a)return void dr(t);if(a.rnaComplexIndex!==t.rnaComplexIndex)return void dr(t);var l=Uo.current[t.rnaComplexIndex];if(!l)return void dr(void 0);if(e.shiftKey)try{var c=ha.current,f=t.rnaComplexIndex,p=a.rnaMoleculeName,h=t.rnaMoleculeName,m=a.nucleotideIndex,v=t.nucleotideIndex,x=l,g=x.rnaMoleculeProps[p],y=x.rnaMoleculeProps[h];if(g&&y){var b,N,E,I,C,S,_,A=null!==(b=null===(N=c[f])||void 0===N||null===(E=N[p])||void 0===E?void 0:E.has(m))&&void 0!==b&&b,T=null!==(I=null===(C=c[f])||void 0===C||null===(S=C[h])||void 0===S?void 0:S.has(v))&&void 0!==I&&I;A||T||(se(x,p,h,m,v,1,void 0,ra.current),lt((0,u.Z)({},f,(_={},(0,u.Z)(_,p,[m]),(0,u.Z)(_,h,[v]),_))))}}catch(_e){}(0,P.insertBasePair)(l,a.rnaMoleculeName,a.nucleotideIndex,t.rnaMoleculeName,t.nucleotideIndex,P.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING,{});var M=null===(r=l.basePairs[a.rnaMoleculeName])||void 0===r||null===(o=r[a.nucleotideIndex])||void 0===o?void 0:o.find((function(e){return e.rnaMoleculeName===t.rnaMoleculeName&&e.nucleotideIndex===t.nucleotideIndex})),w=null===M||void 0===M?void 0:M.basePairType;void 0!==w&&!R.default.isCanonicalType(w)&&n[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||Za(a,t);var O=[{rnaMoleculeName:a.rnaMoleculeName,nucleotideIndex:a.nucleotideIndex},{rnaMoleculeName:t.rnaMoleculeName,nucleotideIndex:t.nucleotideIndex}].sort(P.compareBasePairKeys),L=(0,s.Z)(O,2),j=L[0],D=L[1];return ge((0,u.Z)({},t.rnaComplexIndex,{add:[{keys0:j,keys1:D}],delete:[]})),void dr(void 0)}var Z=Do.current;if(void 0!==Z&&Y.Uq.isEnum(Z)){var F=ha.current,B=Zo.current,U=Go.current,z={};switch(e.button){case k.MouseButtonIndices.Left:var G=Ia;if(B===d.OK.EDIT)try{var W=new Y.Uq.record[Z](Uo.current,lt,dt,Mr,B,F,U,t),H=W.drag();z=W.indicesOfAffectedNucleotides,void 0!=H&&(G=H)}catch(Ae){if("object"!==typeof Ae||!("errorMessage"in Ae))throw Ae;return Xr(Wr.PROPERTIES),void Va((0,le.jsx)("b",{style:{color:"red"},children:Ae.errorMessage}),{})}ko(G,z);break;case k.MouseButtonIndices.Middle:try{var K=Go.current,X=new Y.Uq.record[Z](Uo.current,lt,dt,Mr,B,F,K,t).indicesOfAffectedNucleotides,q=ma.current,Q=structuredClone(F),$=!0,J=t.rnaComplexIndex,ee=t.rnaMoleculeName,te=t.nucleotideIndex;if(J in F){var ne=F[J];ee in ne&&ne[ee].has(te)&&($=!1)}for(var re=!1,oe=0,ae=Object.entries(X);oe<ae.length;oe++)for(var ie=(0,s.Z)(ae[oe],2),ue=ie[0],ce=ie[1],de=Number.parseInt(ue),fe=0,pe=Object.entries(ce);fe<pe.length;fe++)for(var he=(0,s.Z)(pe[fe],2),me=he[0],ve=he[1],xe=0,ye=Array.from(ve);xe<ye.length;xe++){var be=ye[xe];de in Q||(Q[de]={});var Ne=Q[de];me in Ne||(Ne[me]=new Set);var Ee=Ne[me];if($?Ee.add(be):Ee.has(be)&&Ee.delete(be),de in q){var Ie=q[de];me in Ie&&Ie[me].has(be)&&(re=!0)}}Se(Q);var Ce=va.current;Te([].concat((0,i.Z)(Ce),[structuredClone(F)])),ke([]),re&&Va((0,le.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to a newly frozen nucleotide"}),{})}catch(Ae){if("object"!==typeof Ae||!("errorMessage"in Ae))throw Ae;Xr(Wr.PROPERTIES),Va((0,le.jsx)("b",{style:{color:"red"},children:Ae.errorMessage}),{})}break;case k.MouseButtonIndices.Right:Y.Uq.isSupportedTab(B)&&Da(t,Z,B)}}else Va((0,le.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{})}}),[Za,Ba]),za=(0,c.useMemo)((function(){return function(e,t,n){if(e.ctrlKey&&e.button===k.MouseButtonIndices.Left){Do.current;var r=Uo.current,o=(Zo.current,t.rnaComplexIndex),a=t.rnaMoleculeName,i=t.nucleotideIndex,l=n.rnaMoleculeName,c=n.nucleotideIndex;Ba();var f=r[o];if(f){var p=f.basePairs[a];if(p&&i in p){var h=p[i],m=h.findIndex((function(e){return e.rnaMoleculeName===l&&e.nucleotideIndex===c}));-1!==m&&(1===h.length?delete p[i]:h.splice(m,1))}var v=f.basePairs[l];if(v&&c in v){var x=v[c],g=x.findIndex((function(e){return e.rnaMoleculeName===a&&e.nucleotideIndex===i}));-1!==g&&(1===x.length?delete v[c]:x.splice(g,1))}var y=[{rnaMoleculeName:a,nucleotideIndex:i},{rnaMoleculeName:l,nucleotideIndex:c}].sort(P.compareBasePairKeys),b=(0,s.Z)(y,2),N=b[0],E=b[1];ge((0,u.Z)({},o,{add:[],delete:[{keys0:N,keys1:E}]}))}}else{var I=Do.current,C=Uo.current,S=ha.current,_=Go.current,A=Zo.current,T=ra.current;switch(e.button){case k.MouseButtonIndices.Left:if(e.shiftKey){var M=new Y.Uq.record[Y.Uq.Enum.RNA_HELIX](C,lt,dt,Mr,A,S,_,t,n).getHelices();Ei(M)}else ko(Ia,{});break;case k.MouseButtonIndices.Middle:var w=t.rnaComplexIndex,O=t.rnaMoleculeName,L=t.nucleotideIndex,j=n.rnaMoleculeName,D=n.nucleotideIndex;Ba();var Z,F=C[w];if(!F)break;var B=F.basePairs[O];if(B&&L in B){var U=B[L],z=U.findIndex((function(e){return e.rnaMoleculeName===j&&e.nucleotideIndex===D}));-1!==z&&U[z]&&(Z=U[z].basePairType,1===U.length?delete B[L]:U.splice(z,1))}var G=F.basePairs[j];if(G&&D in G){var W=G[D],H=W.findIndex((function(e){return e.rnaMoleculeName===O&&e.nucleotideIndex===L}));-1!==H&&(1===W.length?delete G[D]:W.splice(H,1))}var K=[{rnaMoleculeName:O,nucleotideIndex:L},{rnaMoleculeName:j,nucleotideIndex:D}].sort(P.compareBasePairKeys),X=(0,s.Z)(K,2),q=X[0],Q=X[1];ge((0,u.Z)({},w,{add:[],delete:[{keys0:q,keys1:Q}]})),void 0!==Z&&!R.default.isCanonicalType(Z)&&T[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||Fa(w,O,j,L,D);break;case k.MouseButtonIndices.Right:if(Y.Uq.isSupportedTab(A))try{var $=ha.current,J=new Y.Uq.record[I](C,lt,dt,Mr,A,$,_,t,n);if(A===d.OK.FORMAT)return $r(!0),go(void 0),void Eo((function(){return function(e){return J.constrainRelevantHelices(e)}}));bn(!yn);var ee=J.createRightClickMenu(A);Va(ee,J.indicesOfAffectedNucleotides)}catch(te){if("object"!==typeof te||!("errorMessage"in te))throw te;A===d.OK.FORMAT?($r(!0),go(te.errorMessage)):(Xr(Wr.PROPERTIES),Va((0,le.jsx)("b",{style:{color:"red"},children:te.errorMessage}),{}))}}}}}),[]),Ga=(0,c.useMemo)((function(){return function(e,t,n){for(var r=Uo.current[e],o=r.basePairs,a=0,i=Object.keys(r.rnaMoleculeProps);a<i.length;a++){var s=i[a];if(s in o)for(var c=o[s],d=0,f=Object.values(c);d<f.length;d++){var p,h=f[d],m=(0,l.Z)(h);try{for(m.s();!(p=m.n()).done;){var v=p.value;v.rnaMoleculeName===t&&(v.rnaMoleculeName=n)}}catch(g){m.e(g)}finally{m.f()}}}r.rnaMoleculeProps[n]=r.rnaMoleculeProps[t],delete r.rnaMoleculeProps[t];var x=o[t];delete o[t],o[n]=x,lt((0,u.Z)({},e,{}))}}),[]),Wa=(0,c.useMemo)((function(){return function(e,t){var n=Wo.current;Kn((0,a.Z)((0,a.Z)({},n),{},(0,u.Z)({},e,t)))}}),[]),Ha=(0,c.useMemo)((function(){return function(e,t,n){var r=Ho.current,o=structuredClone(r);e in o||(o[e]={});var i=o[e];i[t]=(0,a.Z)((0,a.Z)({},i[t]),n),Yn(o)}}),[]),Ka=(0,c.useMemo)((function(){return function(e){Va((0,le.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to updated interaction-constraint options."}),{}),Fn((0,a.Z)((0,a.Z)({},Go.current),e))}}),[]),Va=(0,c.useCallback)((function(e,t){var n=Uo.current;if(rt((0,le.jsx)("div",{style:{width:"auto",display:"inline-block"},children:e})),er(t),Object.keys(t).length>0){try{var r=parseInt(Object.keys(t)[0]),o=Object.keys(t[r])[0],a=Array.from(t[r][o]);if(a.length>0){var i={rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a[0]},l="nucleotide",s=e.toString();(s.includes("basepair")||s.includes("BasePair"))&&(l="basepair");var u=nt(i,n,l);oo(u)}}catch(c){console.warn("Error extracting element info:",c),oo(void 0)}Be.current!==d.OK.FORMAT&&(to("Properties"),Xr(Wr.PROPERTIES))}else oo(void 0)}),[]),Xa=(0,c.useMemo)((function(){var e,t=ga.current;return(0,le.jsx)(X._.App.RnaComplexProps.Provider,{value:w,children:(0,le.jsx)(X._.Nucleotide.LabelsOnlyFlag.Provider,{value:Ne&&De==d.OK.EDIT,children:(0,le.jsx)(X._.App.SetMouseOverText.Provider,{value:It,children:(0,le.jsx)(X._.Nucleotide.OnMouseDownHelper.Provider,{value:Ua,children:(0,le.jsx)(X._.Label.Content.OnMouseDownHelper.Provider,{value:Oa,children:(0,le.jsx)(X._.Label.Line.Body.OnMouseDownHelper.Provider,{value:La,children:(0,le.jsx)(X._.Label.Line.Endpoint.OnMouseDownHelper.Provider,{value:ja,children:(0,le.jsx)("g",(0,a.Z)((0,a.Z)({id:Gt},(e={},(0,u.Z)(e,F.SVG_PROPERTY_XRNA_TYPE,F.SvgPropertyXrnaType.SCENE),(0,u.Z)(e,F.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME,I),(0,u.Z)(e,F.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG,!0),(0,u.Z)(e,F.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG,!1),e)),{},{ref:function(e){null!==e&&(zo.current=e)},children:Ca.map((function(e){var n,r,o,i=(0,s.Z)(e,2),l=i[0],u=i[1],c=Number.parseInt(l);return(0,le.jsx)(X._.RnaComplex.Index.Provider,{value:c,children:(0,le.jsx)(X._.BasePair.DataToEditPerRnaComplex.Provider,{value:t[c],children:(0,le.jsx)(P.RnaComplex.Component,(0,a.Z)((0,a.Z)({},u),{},{nucleotideKeysToRerenderPerRnaComplex:null!==(n=it[c])&&void 0!==n?n:{},basePairKeysToRerenderPerRnaComplex:null!==(r=ct[c])&&void 0!==r?r:[],basePairUpdateTrigger:null!==(o=lo[c])&&void 0!==o?o:0}),c)})},c)}))}))})})})})})})})}),[w,it,ct,Ne&&De==d.OK.EDIT,xe,lo]),qa=(0,c.useMemo)((function(){for(var e=0,t=Object.entries(rr);e<t.length;e++){var n=(0,s.Z)(t[e],2),r=n[0],o=n[1],a=Number.parseInt(r);if(a in Jn)for(var i=Jn[a],u=0,c=Object.entries(o);u<c.length;u++){var d=(0,s.Z)(c[u],2),f=d[0],p=d[1];if(f in i){var h,m=i[f],v=(0,l.Z)(p.values());try{for(v.s();!(h=v.n()).done;){var x=h.value;if(m.has(x))return!0}}catch(g){v.e(g)}finally{v.f()}}}}return!1}),[Jn,rr]);$o.current=qa;var Ya=(0,c.useMemo)((function(){return Xe[V.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS]}),[Xe]);Qo.current=Ya;var Qa=(0,c.useMemo)((function(){return function(){he(zo.current.getBBox()),mr(0),yr(0),Ar(0),Ir(1)}}),[]),$a=(0,c.useMemo)((function(){return function(e,t,n){var r=ra.current;try{for(var o=(g?K.r2dtLegacyInputFileReadersRecord:K.inputFileReadersRecord)[t](e),i=new Set,c=0,d=Object.values(o.rnaComplexProps);c<d.length;c++){var p=d[c],h=p.name,m=p.basePairs;if(i.has(h))throw"RNA complexes must have distinct names.";i.add(h);for(var v=0,x=Object.entries(p.rnaMoleculeProps);v<x.length;v++){var y=(0,s.Z)(x[v],2),b=y[0],N=y[1];b in m||(m[b]={});for(var E=0,I=Object.values(N.nucleotideProps);E<I.length;E++){var S=I[E];if(void 0===S.color&&(S.color=structuredClone(M.BLACK)),void 0!==S.labelContentProps){var _=S.labelContentProps;void 0===_.color&&(_.color=structuredClone(M.BLACK))}if(void 0!==S.labelLineProps){var A=S.labelLineProps;void 0===A.color&&(A.color=structuredClone(M.BLACK))}}}}if(void 0===n&&(n=K.defaultInvertYAxisFlagRecord[t]),n){var P,T=(0,l.Z)(o.rnaComplexProps);try{for(T.s();!(P=T.n()).done;){var w=P.value;Object.values(w.rnaMoleculeProps).forEach((function(e){Object.values(e.nucleotideProps).forEach((function(e){if(e.y*=-1,void 0!==e.labelLineProps)for(var t=0;t<e.labelLineProps.points.length;t++)e.labelLineProps.points[t].y*=-1;void 0!==e.labelContentProps&&(e.labelContentProps.y*=-1)}))}))}}catch(j){T.e(j)}finally{T.f()}}Te([]),ke([]),ge({});var k=function(e){var t,n=[],r=[],o=[],a=[],i=(0,l.Z)(e);try{for(i.s();!(t=i.n()).done;)for(var u=t.value,c=0,d=Object.entries(u.rnaMoleculeProps);c<d.length;c++)for(var p=(0,s.Z)(d[c],2),h=p[0],m=p[1],v=0,x=Object.entries(m.nucleotideProps);v<x.length;v++){var g,y=(0,s.Z)(x[v],2),b=y[0],N=y[1],E=null===(g=u.basePairs[h])||void 0===g?void 0:g[parseInt(b)];if(E){var I,C=(0,l.Z)(E);try{for(C.s();!(I=C.n()).done;){var S,_=I.value,A=_.rnaMoleculeName,P=_.nucleotideIndex,T=null===(S=u.rnaMoleculeProps[A])||void 0===S?void 0:S.nucleotideProps[P];if(T){var M=(0,f.distance)(N,T);switch(_.basePairType||$(N.symbol,T.symbol)){case R.BasePair.Type.CANONICAL:case R.BasePair.Type.CIS_WATSON_CRICK_WATSON_CRICK:case R.BasePair.Type.TRANS_WATSON_CRICK_WATSON_CRICK:n.push(M);break;case R.BasePair.Type.WOBBLE:r.push(M);break;case R.BasePair.Type.MISMATCH:default:o.push(M)}}}}catch(j){C.e(j)}finally{C.f()}}}}catch(j){i.e(j)}finally{i.f()}var w,k=(0,l.Z)(e);try{for(k.s();!(w=k.n()).done;)for(var O=w.value,L=0,D=Object.entries(O.rnaMoleculeProps);L<D.length;L++)for(var Z=(0,s.Z)(D[L],2),F=Z[0],B=Z[1],U=Object.keys(B.nucleotideProps).map(Number).sort((function(e,t){return e-t})),z=0;z<U.length-1;z++){var G,W,H=U[z],K=U[z+1],V=null===(G=O.basePairs[F])||void 0===G?void 0:G[H],X=null===(W=O.basePairs[F])||void 0===W?void 0:W[K];if(V&&V.length>0&&X&&X.length>0){var q=B.nucleotideProps[H],Y=B.nucleotideProps[K],J=(0,f.distance)(q,Y);a.push(J)}}}catch(j){k.e(j)}finally{k.f()}var ee=Q(n);return{canonicalDistance:ee||1,wobbleDistance:Q(r)||ee||1,mismatchDistance:1.2*ee||1,contiguousDistance:Q(a)||1}}(o.rnaComplexProps);qe((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,u.Z)(t,V.pE.CANONICAL_BASE_PAIR_DISTANCE,k.canonicalDistance),(0,u.Z)(t,V.pE.WOBBLE_BASE_PAIR_DISTANCE,k.wobbleDistance),(0,u.Z)(t,V.pE.MISMATCH_BASE_PAIR_DISTANCE,k.mismatchDistance),(0,u.Z)(t,V.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,k.contiguousDistance),t))})),Xr(Wr.NONE),$r(!1),ge({}),O(o.rnaComplexProps),Ti(o.rnaComplexProps),Object.keys(o.rnaComplexProps).length>0?setTimeout((function(){r[V.pE.RESET_VIEWPORT_AFTER_FILE_UPLOAD]&&Qa();for(var e=0,t=0,n=0,o=Array.from(document.querySelectorAll(".".concat(Ht)));n<o.length;n++)e+=o[n].getBBox().height,t++;var i=0==t?1:e/t,l=.33*i;Fr(i),Gr(l),qe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,u.Z)({},V.pE.BASE_PAIR_RADIUS,l))})),setTimeout((function(){Qa(),yt(Yt.DATA_IS_LOADED)}),0)}),2e3):yt(Yt.NO_DATA),C(o.complexDocumentName)}catch(D){if(Xr(Wr.PROPERTIES),yt(Yt.DATA_LOADING_FAILED),"string"===typeof D)Mn(D),Ln(D);else if(D&&"string"===typeof D.message){var L;Mn(D.message),Ln(null!==(L=D.stack)&&void 0!==L?L:String(D))}else Mn("Failed to load data. The file may be in an unsupported format or contain invalid data."),Ln(String(null!==D&&void 0!==D?D:""))}}}),[g]),Ja=(0,c.useMemo)((function(){return function(e){fetch(e,{method:"GET"}).then((function(e){e.text().then((function(e){$a(e,K.InputFileExtension.json)}))}))}}),[]),ei=(0,c.useMemo)((function(){return function(e,t,n,r){var o=ha.current,a=Uo.current,l=(ma.current,ho.current);if(e.length>0){var s=(0,i.Z)(e),u=s.pop();if(n(s),r([].concat((0,i.Z)(t),"rnaComplexProps"in u?[{rnaComplexProps:structuredClone(a),globalHelicesForFormatMenu:structuredClone(l)}]:[structuredClone(o)])),"rnaComplexProps"in u){var c=u.rnaComplexProps,d=u.globalHelicesForFormatMenu;ge({}),O(c),po(d)}else Se(u)}}}),[]),ti=(0,c.useMemo)((function(){return function(){ei(va.current,xa.current,Te,ke)}}),[]),ni=(0,c.useMemo)((function(){return function(){ei(xa.current,va.current,ke,Te)}}),[]),ri=(0,c.useMemo)((function(){return va.current.length>0}),[va.current]),oi=(0,c.useMemo)((function(){return xa.current.length>0}),[xa.current]),ai=(0,c.useMemo)((function(){return function(e){var t=e.currentTarget.getBoundingClientRect();if(Jt({x:e.clientX-t.left,y:e.clientY-t.top}),0!==sa.current){var n={x:e.clientX,y:e.clientY},r=Ko.current;if(null!==r){var o=Vo.current,a=Xo.current,i=Yo.current,l=qo.current,s=Qo.current,u=$o.current,c=na.current,d=(0,f.subtract)(n,o);d.y=-d.y,r.continueDrag((0,f.add)(a,(0,f.scaleDown)(d,i*l)),s),u&&bn(!c)}var p=da.current,h=Zo.current;if(void 0!==p&&Y.Uq.isSupportedTab(h)){var m=vi(n),v=[p.x,m.x].sort(q.subtractNumbers),x=[p.y,m.y].sort(q.subtractNumbers),g=v[0],y=x[0];Mr([(0,le.jsx)("rect",{x:g,y:y,width:v[1]-g,height:x[1]-y,fill:"none",stroke:Qt[h],strokeWidth:k.DEFAULT_STROKE_WIDTH},0)])}e.preventDefault()}}}),[]),ii=(0,c.useMemo)((function(){return function(e){var t={x:e.clientX,y:e.clientY};switch(e.button){case k.MouseButtonIndices.Left:rn(t);break;case k.MouseButtonIndices.Right:var n=vi(t);sn(n)}}}),[]),li=(0,c.useMemo)((function(){return function(e){var t=ra.current[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED],n=Ko.current;null!==n&&(void 0!==n.terminateDrag&&n.terminateDrag(),ko(null,{}));var r=da.current,o=Zo.current;if(void 0!==r&&Y.Uq.isSupportedTab(o)){Mr([]);var a={x:e.clientX,y:e.clientY},i=vi(a),u=[r.x,i.x].sort(q.subtractNumbers),c=[r.y,i.y].sort(q.subtractNumbers),d=u[0],p=c[0],h=u[1],m=c[1];if(h-d>.5||m-p>.5){for(var v=function(e,t){var n=e.rnaMoleculeName,r=e.nucleotideIndex,o=t.x,a=t.y;if(o<d||o>h||a<p||a>m)return!1;n in g||(g[n]=new Set);var i=g[n];return!i.has(r)&&(i.add(r),!0)},x=new Array,g={},y=new Array,b=Uo.current,N=0,E=Object.entries(b);N<E.length;N++)for(var I=(0,s.Z)(E[N],2),C=I[0],S=I[1].rnaMoleculeProps,_=Number.parseInt(C),A=0,P=Object.entries(S);A<P.length;A++)for(var T=(0,s.Z)(P[A],2),R=T[0],M=T[1].nucleotideProps,w=0,k=Object.entries(M);w<k.length;w++){var O=(0,s.Z)(k[w],2),L=O[0],j=O[1],D=j.labelContentProps,Z=j.labelLineProps,F={rnaComplexIndex:_,rnaMoleculeName:R,nucleotideIndex:Number.parseInt(L)};if(v(F,j)&&x.push(F),void 0!==D&&v(F,(0,f.add)(j,D))&&y.push(F),void 0!==Z){var B,U=(0,l.Z)(Z.points);try{for(U.s();!(B=U.n()).done;){var z=B.value;v(F,(0,f.add)(j,z))&&y.push(F)}}catch(J){U.e(J)}finally{U.f()}}}var G=(0,Y.P7)(x,b,t);if(lr("Auto-detected"),void 0!==G){var W=G,H=W.fullKeys,K=W.interactionConstraint;He(K),Da(H,K,o)}else if(void 0!==(G=(0,Y.P7)(y,b,t))){var X=G,Q=X.fullKeys,$=X.interactionConstraint;He($),ka(Q,$)}}}sn(void 0)}}),[]),si=(0,c.useMemo)((function(){return function(){ko(null,{}),Mr([]),sn(void 0),It("")}}),[]),ui=(0,c.useMemo)((function(){return function(e){if(0!==sa.current){var t=Jo.current,n=ea.current,r=ta.current,o=Fo.current,a=Bo.current,i=qo.current,l=t-(0,q.sign)(e.deltaY),s=l in At?At[l]:Math.pow(k.SCALE_BASE,l);Ir(s),Ar(l);var u=e.clientX-kt-2,c=e.clientY-pt,d=n.negativeScale,f=u*d+r.x-o,p=c*d-r.y+a-r.height,h=u*(d=1/(s*i))-f+r.x,m=-(c*d-p-r.y-r.height);mr(h),yr(m)}}}),[]),ci=(0,c.useMemo)((function(){return function(){if(0!==sa.current){var e=Jo.current+1,t=e in At?At[e]:Math.pow(k.SCALE_BASE,e);e<=50&&(Ir(t),Ar(e))}}}),[]),di=(0,c.useMemo)((function(){return function(){if(0!==sa.current){var e=Jo.current-1,t=e in At?At[e]:Math.pow(k.SCALE_BASE,e);e>=-50&&(Ir(t),Ar(e))}}}),[]),fi=(0,c.useMemo)((function(){return function(e){switch(e.key.toLowerCase()){case"0":e.ctrlKey&&(e.preventDefault(),Qa());break;case"o":e.ctrlKey&&(e.preventDefault(),la.current.click());break;case"s":e.ctrlKey&&(e.preventDefault(),""==In?Oo.current.click():Mn(In));break;case"y":ni();break;case"z":e.shiftKey?ni():ti();break;case"escape":$r(!1),Xr(Wr.NONE);break;case"x":wo(!0)}}}),[la.current,Oo.current,In]),pi=(0,c.useCallback)((function(e){"x"===e.key.toLowerCase()&&wo(!1)}),[]),hi=(0,c.useMemo)((function(){return De===d.OK.EDIT?Vt:Xt}),[De]),mi=(0,c.useMemo)((function(){return De in Qt?Kt:Xt}),[De]),vi=(0,c.useCallback)((function(e){var t=qo.current,n=Yo.current,r=ua.current,o=ca.current,a=structuredClone(e);return a.x-=kt,(a=(0,f.scaleDown)(a,t*n)).y-=pt,a.y=-a.y,a=(0,f.subtract)(a,(0,f.add)(r.asVector,o.asVector))}),[]),xi=(0,c.useMemo)((function(){return function(){var e=fa.current,t=Zo.current,n="";if(0===e.length){var r="You must load a non-empty input file before attempting to ";switch(t){case d.OK.EDIT:n=r+"edit.";break;case d.OK.FORMAT:n=r+"format.";break;case d.OK.ANNOTATE:n=r+"annotate."}}else{var o="Right-click on a constraint to begin ";switch(t){case d.OK.EDIT:n=o+"editing.";break;case d.OK.FORMAT:n=o+"formating.";break;case d.OK.ANNOTATE:n=o+"annotating."}}Va((0,le.jsx)("b",{style:{color:"red",width:"100%"},children:n}),{})}}),[]),gi=(0,c.useMemo)((function(){return Xe[V.pE.DARK_MODE]?"#514646":"#F0F0F0"}),[Xe]),yi=(0,c.useMemo)((function(){if("showSaveFilePicker"in window&&"function"===typeof window.showSaveFilePicker){var e=window.showSaveFilePicker;return(0,o.Z)((0,r.Z)().mark((function e(){var n,o,a,i,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ba.current,o=n,void 0!==n){e.next=7;break}return e.next=5,t();case 5:o=e.sent,Lr(o);case 7:return a=aa.current,i=Uo.current,l=ya.current,e.next=12,o.createWritable();case 12:return s=e.sent,e.next=15,s.write(Ea[a](i,l));case 15:return e.next=17,s.close();case 17:Ao(!1);case 18:case"end":return e.stop()}}),e)})))}function t(){return n.apply(this,arguments)}function n(){return n=(0,o.Z)((0,r.Z)().mark((function t(){var n,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=oa.current,o=aa.current,t.next=4,e({suggestedName:"".concat(n,".").concat(o),types:[{description:"",accept:{"text/plain":[".".concat(o)]}}]});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}}),[]),bi=(0,c.useCallback)((function(){var e=oa.current,t=aa.current,n=Uo.current,r=ya.current,o=new Blob([Ea[t](n,r)],{type:"text/plain"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="".concat(e,".").concat(t),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),Ao(!1)}),[]),Ni=(0,c.useMemo)((function(){var e,t=ra.current,n=Wo.current;switch(Vr){case Wr.NONE:e=(0,le.jsx)(le.Fragment,{});break;case Wr.PROPERTIES:e=(0,le.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,le.jsx)("div",{style:{padding:"12px 10px",background:"var(--color-surface)",borderBottom:"1px solid var(--color-border)",fontSize:11,fontWeight:700,textTransform:"uppercase",color:"var(--color-text)"},children:"Selected Element"}),(0,le.jsx)("div",{style:{flex:1,overflow:"auto",padding:12},children:et})]});break;case Wr.SETTINGS:e=(0,le.jsx)(Ze,{open:!0,onClose:function(){return Xr(Wr.NONE)},settings:t,setSettings:qe,getDistanceDefaults:function(){var e=fa.current;if(e&&e.length>0){var t,r=Number.parseInt(e[0][0]),o=n[r],a=o.helixDistance,i=o.distances;if(null!=a&&i)return t={},(0,u.Z)(t,V.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,a),(0,u.Z)(t,V.pE.CANONICAL_BASE_PAIR_DISTANCE,i[R.default.Type.CANONICAL]),(0,u.Z)(t,V.pE.MISMATCH_BASE_PAIR_DISTANCE,i[R.default.Type.MISMATCH]),(0,u.Z)(t,V.pE.WOBBLE_BASE_PAIR_DISTANCE,i[R.default.Type.WOBBLE]),t}return{}}});break;case Wr.ABOUT:e=(0,le.jsx)(Ue,{open:!0,onClose:function(){return Xr(Wr.NONE)},renderTabInstructions:function(e){switch(e){case d.OK.INPUT_OUTPUT:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Upload and download RNA structure files in various formats including JSON, SVG, and more."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Upload files to import RNA structures"}),(0,le.jsx)("li",{children:"Download files to save your work"}),(0,le.jsx)("li",{children:"Support for multiple file formats"})]})]});case d.OK.VIEWPORT:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Control the viewport and navigation of your RNA structure."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Zoom in/out with mouse wheel"}),(0,le.jsx)("li",{children:"Pan by dragging the canvas"}),(0,le.jsx)("li",{children:"Reset viewport to default position"})]})]});case d.OK.EDIT:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Edit RNA structures by modifying nucleotides, positions, and properties."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Move nucleotides by dragging"}),(0,le.jsx)("li",{children:"Edit nucleotide properties"}),(0,le.jsx)("li",{children:"Modify labels and annotations"})]})]});case d.OK.FORMAT:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Format RNA structures by adjusting base pairs and structural elements."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Add/remove base pairs"}),(0,le.jsx)("li",{children:"Adjust base pair distances"}),(0,le.jsx)("li",{children:"Optimize structure layout"})]})]});case d.OK.ANNOTATE:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Add annotations and labels to your RNA structure."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Add text labels"}),(0,le.jsx)("li",{children:"Create annotation regions"}),(0,le.jsx)("li",{children:"Customize annotation styles"})]})]});case d.OK.SETTINGS:return(0,le.jsxs)("div",{children:[(0,le.jsx)("p",{children:"Configure application preferences and behavior."}),(0,le.jsxs)("ul",{children:[(0,le.jsx)("li",{children:"Adjust display settings"}),(0,le.jsx)("li",{children:"Configure interaction constraints"}),(0,le.jsx)("li",{children:"Import/export settings"})]})]});case d.OK.ABOUT:return(0,le.jsxs)("div",{className:"quickstart-panel",children:[(0,le.jsxs)("section",{className:"quickstart-section",children:[(0,le.jsxs)("div",{className:"quickstart-section__header",children:[(0,le.jsx)("h4",{className:"quickstart-section__title",children:"Key shortcuts"}),(0,le.jsx)("span",{className:"quickstart-section__subtitle",children:"Stay on the keyboard for faster edits."})]}),(0,le.jsx)("div",{className:"quickstart-shortcut-grid",children:wt.map((function(e){return(0,le.jsxs)("article",{className:"quickstart-shortcut-card",children:[(0,le.jsx)("div",{className:"quickstart-shortcut-hotkey",children:e.shortcut}),(0,le.jsx)("p",{className:"quickstart-shortcut-behavior",children:e.action})]},e.shortcut)}))}),null]}),(0,le.jsxs)("section",{className:"quickstart-section",children:[(0,le.jsx)("p",{className:"quickstart-paragraph",children:"Exornata is an interactive web app for editing, formatting, and annotating 2D RNA diagrams."}),(0,le.jsx)("h4",{className:"quickstart-section__title",children:"Quickstart checklist"}),(0,le.jsxs)("ol",{className:"quickstart-ordered-list",children:[(0,le.jsx)("li",{children:"Start in Edit mode on the blank canvas that opens by default."}),(0,le.jsxs)("li",{children:["Use ",(0,le.jsx)("em",{children:"Load example"})," to pull in the 5S rRNA reference structure."]}),(0,le.jsx)("li",{children:"Review the Units/Complex constraint and tighten it if you only need a subset."}),(0,le.jsx)("li",{children:"Drag, pan, or zoom to orient the structure before detailed edits."}),(0,le.jsx)("li",{children:"Jump to Format mode to refine base pairs and structural geometry."}),(0,le.jsx)("li",{children:"Switch into Annotate mode to apply labels or callouts."}),(0,le.jsx)("li",{children:"Export your edits as JSON, XRna, SVG, or other supported formats."}),(0,le.jsx)("li",{children:"Re-import the exported file later to resume exactly where you stopped."})]})]}),(0,le.jsx)("section",{className:"quickstart-section",children:(0,le.jsx)("a",{className:"quickstart-link",href:"https://github.com/LDWLab/XRNA-React/issues",target:"_blank",rel:"noopener noreferrer",children:(0,le.jsx)("h4",{className:"quickstart-section__title",children:"Something went wrong?"})})})]});default:return(0,le.jsx)("div",{children:"No instructions available for this tab."})}}});break;default:throw"Unhandled switch case."}return(0,le.jsx)(tt,{open:Vr!==Wr.NONE,onClose:function(){Xr(Wr.NONE),Va((0,le.jsx)(le.Fragment,{}),{}),oo(void 0)},children:e})}),[Xe,Hn,Vr,et]),Ei=(0,c.useCallback)((function(e){Ba();var t,n=ra.current,r=Uo.current,o=Wo.current,a={},i=(0,l.Z)(e);try{var s=function(){var e=t.value,i=e.rnaComplexIndex,l=e.rnaMoleculeName0,s=e.rnaMoleculeName1,u=e.start,c=e.stop,d=o[i],p=r[i],h=p.basePairs;i in a||(a[i]={add:[],delete:[]});for(var m=a[i],v=p.rnaMoleculeProps[l],x=h[l],g=p.rnaMoleculeProps[s],y={0:v,1:g},b=v.nucleotideProps[u[0]],N=g.nucleotideProps[u[1]],E=(0,f.scaleUp)((0,f.add)(b,N),.5),I=(0,f.subtract)(b,N),C=(0,f.normalize)(I),S=(0,f.orthogonalize)(C),_={},A=0,P=0,T=[0,1];P<T.length;P++){var M=T[P],w=Math.min(u[M],c[M]),k=Math.max(u[M],c[M]);_[M]={min:w,max:k};for(var O=w;O<=k;O++){var L=y[M].nucleotideProps[O];A+=Math.sign((0,f.dotProduct)((0,f.subtract)(L,E),S))}}A<0&&(S=(0,f.negate)(S));for(var j=n[V.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],D=Number.isNaN(j)?d.helixDistance:j,Z=(0,f.scaleUp)(S,D),F=u[0],B=u[1],U=Math.sign(c[0]-u[0]),z=Math.sign(c[1]-u[1]),G=_[0].max-_[0].min+1,W=0;W<G;W++){var H=y[0].nucleotideProps[F],K=y[1].nucleotideProps[B],X=x[F],q=null===X||void 0===X?void 0:X.find((function(e){return e.rnaMoleculeName===s&&e.nucleotideIndex===B})),Y=null===q||void 0===q?void 0:q.basePairType;if(void 0===Y)try{Y=(0,R.getBasePairType)(H.symbol,K.symbol)}catch(ae){Y=void 0}var Q=void 0;switch(Y){case R.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case R.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case R.default.Type.CANONICAL:var $=n[V.pE.CANONICAL_BASE_PAIR_DISTANCE];Q=Number.isNaN($)?d.distances[Y]:$;break;case R.default.Type.WOBBLE:var J=n[V.pE.WOBBLE_BASE_PAIR_DISTANCE];Q=Number.isNaN(J)?d.distances[Y]:J;break;default:var ee=n[V.pE.MISMATCH_BASE_PAIR_DISTANCE];Q=Number.isNaN(ee)?d.distances[R.default.Type.MISMATCH]:ee}var te={keys0:{rnaMoleculeName:l,nucleotideIndex:F},keys1:{rnaMoleculeName:s,nucleotideIndex:B}};m.add.push(te),m.delete.push(te);var ne=(0,f.scaleUp)(C,.5*Q),re=(0,f.add)(E,ne),oe=(0,f.subtract)(E,ne);H.x=re.x,H.y=re.y,K.x=oe.x,K.y=oe.y,E=(0,f.add)(E,Z),F+=U,B+=z}};for(i.s();!(t=i.n()).done;)s()}catch(p){i.e(p)}finally{i.f()}for(var u=0,c=Object.values(a);u<c.length;u++){var d=c[u];d.add.sort(P.compareFullBasePairKeys),d.delete.sort(P.compareFullBasePairKeys)}ge(a)}),[]),Ii=(0,c.useMemo)((function(){var e=Io.current;return(0,le.jsx)(Qe,{open:Qr,onClose:function(){$r(!1)},rnaComplexProps:w,globalHelices:fo,errorMessage:xo,constrainRelevantHelices:e,handleNewBasePair:Za,removeBasePair:Fa,reformatSelectedHelices:Ei})}),[Qr,w,fo,xo,No]),Ci=(0,c.useMemo)((function(){var e;return(0,le.jsx)(vt,{settings:Xe,viewportWidth:Sa,viewportHeight:Math.max((null!==(e=jo.height)&&void 0!==e?e:0)-pt,0),viewportScale:Er})}),[Xe,Sa,jo.height,pt,Er]),Si=!(0,q.isEmpty)(w),_i=""===re?null!==(t=ia.current)&&void 0!==t?t:"":re,Ai=(0,c.useMemo)((function(){return(0,le.jsx)(ht,{onOpenFile:function(e){var t=e.target.files;if(null!==t&&0!==t.length){yt(Yt.DATA_IS_LOADING);var n=t[0].name;pa.current=n,G(n);var r=/^(.*)\.(.+)$/.exec(n),o=r[1],a=r[2];Xe[V.pE.COPY_FILE_NAME]&&oe(o),Xe[V.pE.COPY_FILE_EXTENSION]&&a in Ea&&ce(a);var i=new FileReader;i.addEventListener("load",(function(e){$a(e.target.result,a.toLocaleLowerCase())})),i.readAsText(t[0])}},onSave:yi,onExportWithFormat:function(e,t){oe(e),ce(t),Lr(void 0),oa.current=e,aa.current=t,setTimeout((function(){var e;null===(e=Oo.current)||void 0===e||e.click()}),0)},onDownload:bi,fileName:_i,onFileNameChange:oe,exportFormat:ue,onExportFormatChange:ce,downloadButtonReference:Oo,fileNameInputReference:la,saveButtonsDisabledFlag:!Si})}),[_i,ue,Si,w]),Pi=(0,c.useMemo)((function(){return 1===Ca.length}),[Ca]),Ti=(0,c.useCallback)((function(e){var t,n=ra.current,r=[],o=(0,Y.qj)(e,n[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]),a=(0,l.Z)(o);try{for(a.s();!(t=a.n()).done;){var i,s=t.value,u=s.rnaComplexIndex,c=s.helixDataPerRnaMolecules,d=(0,l.Z)(c);try{for(d.s();!(i=d.n()).done;){var f,p=i.value,h=p.rnaMoleculeName0,m=p.helixData,v=(0,l.Z)(m);try{for(v.s();!(f=v.n()).done;){var x=f.value,g=x.rnaMoleculeName1,y=x.start,b=x.stop;r.push({rnaComplexIndex:u,rnaMoleculeName0:h,rnaMoleculeName1:g,start:y,stop:b})}}catch(N){v.e(N)}finally{v.f()}}}catch(N){d.e(N)}finally{d.f()}}}catch(N){a.e(N)}finally{a.f()}po(r)}),[]);return(0,c.useEffect)((function(){function e(){$r(!0)}function t(){var e=document.getElementById("__hidden_reformat_button__");null===e||void 0===e||e.click()}function n(e){var n=e.detail||{};if(void 0!==n.start&&void 0!==n.end){Math.min(n.start,n.end),Math.max(n.start,n.end);var r=document.getElementById("__hidden_reformat_button__");r?r.click():t()}else t()}return window.addEventListener("openBasepairBottomSheet",e),window.addEventListener("triggerReformatAll",t),window.addEventListener("triggerReformatRange",n),function(){window.removeEventListener("openBasepairBottomSheet",e),window.removeEventListener("triggerReformatAll",t),window.removeEventListener("triggerReformatRange",n)}}),[]),(0,c.useEffect)((function(){var e=function(e){var t=ra.current;if(Po.current&&!t[V.pE.DISABLE_NAVIGATE_AWAY_PROMPT])return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[]),(0,c.useEffect)((function(){var e=document.URL,t=e.indexOf("?");if(-1!=t){for(var n={},r=e.substring(t+1,e.length).split("&"),o=0;o<r.length;o++){var a=r[o].split("=");n[a[0]]=a[1]}var i="r2dt_job_id";i in n&&Ja("https://www.ebi.ac.uk/Tools/services/rest/r2dt/result/r2dt-".concat(n[i],"/json"));var l="source_url";if(l in n&&Ja(n[l]),"tab"in n){var s=n.tab,u=s.toLocaleLowerCase(),c=d.eA.find((function(e){return e.toLocaleLowerCase()===u}));void 0===c?(An('"'.concat(s,'" is not a valid, recognized Tab value.')),yt(Yt.URL_PARSING_ERROR)):Fe(c)}}}),[]),(0,c.useEffect)((function(){var e=Lo.current,t=null===e?{width:0,height:0}:e.getBBox();Tt(t)}),[Et]),(0,c.useEffect)(xi,[De,w]),(0,c.useEffect)((function(){if(0!==Object.keys(xe).length){for(var e={},t={},n=0,r=Object.entries(xe);n<r.length;n++){var o=(0,s.Z)(r[n],2),i=o[0],u=o[1],c=Number.parseInt(i);e[c]={},t[c]=[];var d,f=e[c],p=t[c],h=(0,l.Z)(u.add);try{for(h.s();!(d=h.n()).done;){var m=d.value,v=m.keys0,x=m.keys1;w(f,v),w(f,x),p.push(v,x)}}catch(k){h.e(k)}finally{h.f()}var g,y=(0,l.Z)(u.delete);try{for(y.s();!(g=y.n()).done;){var b=g.value,N=b.keys0,E=b.keys1;w(f,N),w(f,E),p.push(N,E)}}catch(k){y.e(k)}finally{y.f()}for(var I=0,C=Object.values(f);I<C.length;I++)C[I].sort(q.subtractNumbers);p.sort(P.compareBasePairKeys)}dt(t);for(var S=(0,a.Z)({},lo),_=0,A=Object.keys(xe);_<A.length;_++){var T,R=A[_],M=Number.parseInt(R);S[M]=(null!==(T=S[M])&&void 0!==T?T:0)+1}so(S),lt({}),dt({}),ge({})}function w(e,t){var n=t.rnaMoleculeName,r=t.nucleotideIndex;n in e||(e[n]=[]);var o=e[n];o.includes(r)||o.push(r)}}),[xe,lo]),(0,c.useEffect)((function(){var e="";(0,q.isEmpty)(w)?e="Import data to enable downloads.":void 0===ue&&(e="Select an export format to enable downloads."),Cn(e)}),[w,ue]),(0,c.useEffect)((function(){bn((function(e){return!e}))}),[et]),(0,c.useEffect)((function(){null!==mn&&mn!==Ia&&Ba()}),[mn]),(0,c.useEffect)((function(){var e=Go.current;Fn((0,a.Z)((0,a.Z)({},e),{},{treatNoncanonicalBasePairsAsUnpairedFlag:Xe[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}))}),[Xe[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,c.useEffect)((function(){Gr(Xe[V.pE.BASE_PAIR_RADIUS]);for(var e={},t=0,n=Object.entries(w);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1].basePairs,i=Number.parseInt(o);e[i]={add:[],delete:[]};for(var u=e[i],c=0,d=Object.entries(a);c<d.length;c++)for(var f=(0,s.Z)(d[c],2),p=f[0],h=f[1],m=0,v=Object.entries(h);m<v.length;m++){var x,g=(0,s.Z)(v[m],2),y=g[0],b=g[1],N={rnaMoleculeName:p,nucleotideIndex:Number.parseInt(y)},E=(0,l.Z)(b);try{for(E.s();!(x=E.n()).done;){var I=x.value;(0,P.isRelevantBasePairKeySetInPair)(N,I)||(u.delete.push({keys0:N,keys1:I}),u.add.push({keys0:N,keys1:I}))}}catch(A){E.e(A)}finally{E.f()}}}for(var C=0,S=Object.values(e);C<S.length;C++){var _=S[C];_.add.sort(P.compareFullBasePairKeys),_.delete.sort(P.compareFullBasePairKeys)}ge(e)}),[Xe[V.pE.BASE_PAIR_RADIUS]]),(0,c.useEffect)((function(){Xr(Wr.NONE),$r(!1)}),[Zo.current]),(0,c.useEffect)((function(){return $r(!1)}),[We]),(0,c.useEffect)((function(){return Ti(Uo.current)}),[Xe[V.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,le.jsx)(X._.MemoizedComponent,{settingsRecord:Xe,setSettingsRecord:qe,basePairOnMouseDownHelper:za,labelClassName:hi,basePairClassName:mi,pushToUndoStack:Ba,basePairRadius:zr,indicesOfFrozenNucleotides:Ce,labelContentDefaultStyles:qn,basePairAverageDistances:Hn,updateBasePairAverageDistances:Wa,updateLabelContentDefaultStyles:Ha,interactionConstraintOptions:Zn,updateInteractionConstraintOptions:Ka,setNucleotideKeysToRerender:lt,setBasePairKeysToRerender:dt,updateRnaMoleculeNameHelper:Ga,setBasePairKeysToEdit:ge,singularRnaComplexFlag:Pi,averageNucleotideBoundingRectHeight:Zr,children:(0,le.jsxs)("div",{id:Ot,onKeyDown:fi,onKeyUp:pi,ref:jo.ref,style:{position:"absolute",display:"block",width:"100%",height:"100%",overflow:"hidden",background:"var(--color-background)",color:"var(--color-text)",marginLeft:"".concat(Wt,"px"),transition:"var(--transition-default)"},children:[(0,le.jsxs)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:kt,zIndex:1e3},children:[(Object.keys(Ce).length,Object.keys(Jn).length,null),(0,le.jsx)(Oe,{onUndo:ti,onRedo:ni,canUndo:ri,canRedo:oi,onResetViewport:Qa,mode:De,onModeChange:Fe,constraint:We,onConstraintChange:He,onToggleBasePairEditor:function(){Va((0,le.jsx)(le.Fragment,{}),{}),$r((function(e){return!e}))},onTogglePropertiesDrawer:function(){"properties"===Vr?Xr(Wr.NONE):(to("Properties"),Xr(Wr.PROPERTIES))},onToggleSettingsDrawer:function(){"settings"===Vr?Xr(Wr.NONE):(Va((0,le.jsx)(le.Fragment,{}),{}),to("Settings"),Xr(Wr.SETTINGS))},onToggleAboutDrawer:function(){"about"===Vr?Xr(Wr.NONE):(Va((0,le.jsx)(le.Fragment,{}),{}),to("About XRNA"),Xr(Wr.ABOUT))},onOpenDocs:function(){window.location.hash="#/docs"},onLoadExample:(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,yt(Yt.DATA_IS_LOADING),e.next=4,fetch("".concat(".","/7k00_23_b.json"));case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Failed to load example (status ".concat(t.status,")"));case 7:return e.next=9,t.text();case 9:n=e.sent,$a(n,K.InputFileExtension.json),a="".concat(o="7k00_23_b",".json"),G(a),pa.current=a,Xe[V.pE.COPY_FILE_NAME]&&(oe(o),oa.current=o),Xe[V.pE.COPY_FILE_EXTENSION]&&(ce("json"),aa.current="json"),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),i=e.t0 instanceof Error?e.t0.message:String(e.t0),yt(Yt.DATA_LOADING_FAILED),Mn(i),Ln(i);case 25:case"end":return e.stop()}}),e,null,[[0,19]])}))),undoStack:Pe,redoStack:we,onJumpToHistory:function(e){var t=va.current,n=xa.current;if(!(e<0||e>t.length+n.length)&&e!==t.length)if(e<t.length){var r=t[e];if(r){if("rnaComplexProps"in r){var o=r.rnaComplexProps,a=r.globalHelicesForFormatMenu;ge({}),O(o),po(a)}else Se(r);var l=t.slice(0,e+1),s=[].concat((0,i.Z)(n),(0,i.Z)(t.slice(e+1).reverse()));Te(l),ke(s)}}else{var u=e-t.length,c=n[u];if(c){if("rnaComplexProps"in c){var d=c.rnaComplexProps,f=c.globalHelicesForFormatMenu;ge({}),O(d),po(f)}else Se(c);var p=[].concat((0,i.Z)(t),(0,i.Z)(n.slice(0,u+1))),h=n.slice(u+1);Te(p),ke(h)}}},onResetToLastCheckpoint:function(){var e=va.current;if(e.length>0){var t=e[0];if(t){if("rnaComplexProps"in t){var n=t.rnaComplexProps,r=t.globalHelicesForFormatMenu;ge({}),O(n),po(r)}else Se(t);var o=[].concat((0,i.Z)(xa.current),(0,i.Z)(e.slice(1).reverse()));Te([t]),ke(o)}}},onFreezeSelected:function(){if(Object.keys(Jn).length>0)return function(){for(var e=structuredClone(Ce),t=0,n=Object.entries(Jn);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1],u=Number.parseInt(o);u in e||(e[u]={});for(var c=0,d=Object.entries(a);c<d.length;c++){var f=(0,s.Z)(d[c],2),p=f[0],h=f[1];p in e[u]||(e[u][p]=new Set);var m,v=(0,l.Z)(h);try{for(v.s();!(m=v.n()).done;){var x=m.value;e[u][p].add(x)}}catch(y){v.e(y)}finally{v.f()}}}Se(e);var g=va.current;Te([].concat((0,i.Z)(g),[structuredClone(Ce)])),ke([])}}(),onUnfreezeSelected:function(){if(Object.keys(Jn).length>0)return function(){for(var e=structuredClone(Ce),t=0,n=Object.entries(Jn);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1],u=Number.parseInt(o);if(u in e){for(var c=0,d=Object.entries(a);c<d.length;c++){var f=(0,s.Z)(d[c],2),p=f[0],h=f[1];if(p in e[u]){var m,v=(0,l.Z)(h);try{for(v.s();!(m=v.n()).done;){var x=m.value;e[u][p].delete(x)}}catch(y){v.e(y)}finally{v.f()}0===e[u][p].size&&delete e[u][p]}}0===Object.keys(e[u]).length&&delete e[u]}}Se(e);var g=va.current;Te([].concat((0,i.Z)(g),[structuredClone(Ce)])),ke([])}}(),onUnfreezeAll:function(){if(Object.keys(Ce).length>0)return function(){if(window.confirm("Are you sure you want to unfreeze all nucleotides?")){var e=va.current;Te([].concat((0,i.Z)(e),[structuredClone(Ce)])),ke([]),Se({})}}}(),hasFrozenNucleotides:Object.keys(Ce).length>0,hasSelectedNucleotides:Object.keys(Jn).length>0})]}),Ai,(0,le.jsxs)("svg",{id:Lt,style:{top:pt,left:kt,position:"absolute"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Math.max((null!==(n=jo.width)&&void 0!==n?n:0)-kt,0)," ").concat(Math.max((null!==(p=jo.height)&&void 0!==p?p:0)-pt,0)),tabIndex:1,onMouseDown:ii,onMouseMove:ai,onMouseUp:li,onMouseLeave:si,onContextMenu:function(e){e.preventDefault()},onWheel:ui,fill:gi,stroke:Y.Uq.isSupportedTab(De)?Qt[De]:"none",filter:"none",overflow:"hidden",children:[(0,le.jsx)("style",{children:"\n              .".concat(Ht," { stroke:none; }\n              .").concat(Ht,":hover { stroke:inherit; }\n              .").concat(Kt," { stroke:none; }\n              .").concat(Kt,":hover { stroke:inherit; stroke-dasharray:0.5,0.5;}\n              .").concat(Vt," { stroke:none; }\n              .").concat(Vt,":hover { stroke:inherit; }\n              .").concat(Xt," { stroke:none; }\n            ")}),(0,le.jsxs)("defs",{children:[(0,le.jsxs)("filter",{id:"xrTooltipShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,le.jsx)("feDropShadow",{dx:"0",dy:"4",stdDeviation:"3",floodColor:"#000000",floodOpacity:"0.15"}),(0,le.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodColor:"#000000",floodOpacity:"0.05"})]}),(0,le.jsxs)("filter",{id:"xrTooltipGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,le.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,le.jsxs)("feMerge",{children:[(0,le.jsx)("feMergeNode",{in:"coloredBlur"}),(0,le.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,le.jsx)("rect",{id:zt,width:"100%",height:"100%",stroke:"none",fill:Xe[V.pE.CANVAS_COLOR]?Xe[V.pE.CANVAS_COLOR]:void 0,onMouseDown:function(e){e.button===k.MouseButtonIndices.Left&&(e.ctrlKey||void 0===cr||dr(void 0),ko(Ia,{}))}}),Ci,(0,le.jsx)("g",{style:{visibility:gt===Yt.DATA_IS_LOADED?"visible":"hidden"},id:Zt,transform:Ma.asTransform[0],children:(0,le.jsx)("g",{id:Ft,transform:Ma.asTransform[1],children:(0,le.jsx)("g",{id:Bt,transform:"scale(1, -1) "+Ta.asString,children:(0,le.jsxs)("g",{id:Ut,transform:Ra.asString,children:[Rr,Xa,wa]})})})}),(0,le.jsx)(mt,{mouseOverText:Et,mouseOverTextDimensions:Pt,mouseUIPosition:$t,parentDivResizeDetector:jo,TOPBAR_HEIGHT:pt,MOUSE_OVER_TEXT_FONT_SIZE:20,mouseOverTextSvgTextElementReference:Lo})]}),(0,le.jsx)(_t,{settings:Xe,setSettings:qe,onZoomIn:ci,onZoomOut:di,onResetViewport:Qa,position:Rt}),gt===Yt.DATA_IS_LOADING&&(0,le.jsx)("img",{style:{top:.5*(null!==(h=jo.height)&&void 0!==h?h:0)-100,left:.5*(null!==(m=jo.width)&&void 0!==m?m:0)-50,position:"absolute"},src:ee,alt:"Loading..."}),gt===Yt.DATA_LOADING_FAILED&&(0,le.jsxs)("div",{style:{position:"absolute",top:.5*(null!==(v=jo.height)&&void 0!==v?v:0)-60,left:.5*(null!==(x=jo.width)&&void 0!==x?x:0)-240,width:480,maxWidth:"90%",padding:"12px 16px",borderRadius:8,border:"1px solid #cc0000",background:"#fff5f5",color:"#7a1212",boxShadow:"0 4px 16px rgba(0,0,0,0.15)",zIndex:2e3,textAlign:"center",fontSize:13,lineHeight:1.4},children:[(0,le.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:"Failed to open file"}),(0,le.jsx)("div",{children:Rn||"Unsupported file format or invalid file contents."}),(0,le.jsx)("div",{style:{marginTop:10},children:(0,le.jsx)("button",{onClick:function(){var e=(null===On||void 0===On?void 0:On.trim())||"No additional error details available.";navigator.clipboard.writeText(e).catch((function(){}))},style:{marginTop:6,padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid #b02a2a",background:"#ffe3e3",color:"#7a1212",cursor:"pointer"},children:"Copy error details"})})]}),(0,le.jsx)("div",{style:{position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap",background:"inherit"},id:jt}),Ni,Ii,(0,le.jsx)(Je,{rnaComplexProps:w})]})})};var $t=Tt},4212:function(e,t,n){"use strict";n.d(t,{OK:function(){return r},eA:function(){return o}});var r=function(e){return e.INPUT_OUTPUT="Input/Output",e.VIEWPORT="Viewport",e.EDIT="Edit",e.FORMAT="Format",e.ANNOTATE="Annotate",e.SETTINGS="Settings",e.ABOUT="Quickstart",e}({}),o=Object.values(r);r.INPUT_OUTPUT},7089:function(e,t,n){"use strict";n.r(t),n.d(t,{BasePair:function(){return r},getBasePairType:function(){return h},isBasePairType:function(){return m}});var r,o=n(1413),a=n(4942),i=n(2791),l=n(3413),s=n(3871),u=n(7361),c=n(9287),d=n(1579),f=n(7457),p=n(184);function h(e,t){if((e=e.toUpperCase())>(t=t.toUpperCase())){var n=e;e=t,t=n}var o=r.typeRecord,a=void 0;if(e in o&&(a=o[e][t]),void 0===a)throw"Unsupported base-pair type between ".concat(e," and ").concat(t);return a}function m(e){return r.types.includes(e)}!function(e){var t,n,m,v,x,g,y,b,N,E,I,C,S=function(e){return e.CANONICAL="canonical",e.WOBBLE="wobble",e.MISMATCH="mismatch",e.CIS_WATSON_CRICK_WATSON_CRICK="cis_watson_crick_watson_crick",e.TRANS_WATSON_CRICK_WATSON_CRICK="trans_watson_crick_watson_crick",e.CIS_WATSON_CRICK_HOOGSTEEN="cis_watson_crick_hoogsteen",e.CIS_HOOGSTEEN_WATSON_CRICK="cis_hoogsteen_watson_crick",e.TRANS_WATSON_CRICK_HOOGSTEEN="trans_watson_crick_hoogsteen",e.TRANS_HOOGSTEEN_WATSON_CRICK="trans_hoogsteen_watson_crick",e.CIS_WATSON_CRICK_SUGAR_EDGE="cis_watson_crick_sugar_edge",e.CIS_SUGAR_EDGE_WATSON_CRICK="cis_sugar_edge_watson_crick",e.TRANS_WATSON_CRICK_SUGAR_EDGE="trans_watson_crick_sugar_edge",e.TRANS_SUGAR_EDGE_WATSON_CRICK="trans_sugar_edge_watson_crick",e.CIS_HOOGSTEEN_HOOGSTEEN="cis_hoogsteen_hoogsteen",e.TRANS_HOOGSTEEN_HOOGSTEEN="trans_hoogsteen_hoogsteen",e.CIS_HOOGSTEEN_SUGAR_EDGE="cis_hoogsteen_sugar_edge",e.CIS_SUGAR_EDGE_HOOGSTEEN="cis_sugar_edge_hoogsteen",e.TRANS_HOOGSTEEN_SUGAR_EDGE="trans_hoogsteen_sugar_edge",e.TRANS_SUGAR_EDGE_HOOGSTEEN="trans_sugar_edge_hoogsteen",e.CIS_SUGAR_EDGE_SUGAR_EDGE="cis_sugar_edge_sugar_edge",e.TRANS_SUGAR_EDGE_SUGAR_EDGE="trans_sugar_edge_sugar_edge",e}({});e.Type=S;e.types=Object.values(S);var _=e.DirectedType=(t={},(0,a.Z)(t,S.CIS_WATSON_CRICK_HOOGSTEEN,S.CIS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(t,S.CIS_HOOGSTEEN_WATSON_CRICK,S.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(t,S.TRANS_WATSON_CRICK_HOOGSTEEN,S.TRANS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(t,S.TRANS_HOOGSTEEN_WATSON_CRICK,S.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(t,S.CIS_WATSON_CRICK_SUGAR_EDGE,S.CIS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(t,S.CIS_SUGAR_EDGE_WATSON_CRICK,S.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(t,S.TRANS_WATSON_CRICK_SUGAR_EDGE,S.TRANS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(t,S.TRANS_SUGAR_EDGE_WATSON_CRICK,S.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(t,S.CIS_HOOGSTEEN_SUGAR_EDGE,S.CIS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(t,S.CIS_SUGAR_EDGE_HOOGSTEEN,S.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(t,S.TRANS_HOOGSTEEN_SUGAR_EDGE,S.TRANS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(t,S.TRANS_SUGAR_EDGE_HOOGSTEEN,S.TRANS_SUGAR_EDGE_HOOGSTEEN),t),A=e.directedTypes=Object.values(_),P=e.RedundantLeontisWesthofType=(n={},(0,a.Z)(n,S.CIS_SUGAR_EDGE_WATSON_CRICK,S.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(n,S.CIS_HOOGSTEEN_WATSON_CRICK,S.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(n,S.CIS_SUGAR_EDGE_HOOGSTEEN,S.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(n,S.TRANS_SUGAR_EDGE_WATSON_CRICK,S.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(n,S.TRANS_HOOGSTEEN_WATSON_CRICK,S.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(n,S.TRANS_SUGAR_EDGE_HOOGSTEEN,S.TRANS_SUGAR_EDGE_HOOGSTEEN),n),T=e.redundantLeontisWesthofTypes=Object.values(P);e.isRedundantLeontisWesthofType=function(e){return T.includes(e)};e.reverseDirectedTypeMap=(m={},(0,a.Z)(m,S.CIS_WATSON_CRICK_HOOGSTEEN,S.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(m,S.CIS_HOOGSTEEN_WATSON_CRICK,S.CIS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(m,S.TRANS_WATSON_CRICK_HOOGSTEEN,S.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(m,S.TRANS_HOOGSTEEN_WATSON_CRICK,S.TRANS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(m,S.CIS_WATSON_CRICK_SUGAR_EDGE,S.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(m,S.CIS_SUGAR_EDGE_WATSON_CRICK,S.CIS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(m,S.TRANS_WATSON_CRICK_SUGAR_EDGE,S.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(m,S.TRANS_SUGAR_EDGE_WATSON_CRICK,S.TRANS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(m,S.CIS_HOOGSTEEN_SUGAR_EDGE,S.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(m,S.CIS_SUGAR_EDGE_HOOGSTEEN,S.CIS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(m,S.TRANS_HOOGSTEEN_SUGAR_EDGE,S.TRANS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(m,S.TRANS_SUGAR_EDGE_HOOGSTEEN,S.TRANS_HOOGSTEEN_SUGAR_EDGE),m),e.shortenedTypeNameMap=(v={},(0,a.Z)(v,S.CANONICAL,"Can."),(0,a.Z)(v,S.WOBBLE,"Wob."),(0,a.Z)(v,S.MISMATCH,"Mis."),(0,a.Z)(v,S.CIS_WATSON_CRICK_WATSON_CRICK,"cWW"),(0,a.Z)(v,S.TRANS_WATSON_CRICK_WATSON_CRICK,"tWW"),(0,a.Z)(v,S.CIS_WATSON_CRICK_HOOGSTEEN,"cWH"),(0,a.Z)(v,S.CIS_HOOGSTEEN_WATSON_CRICK,"cHW"),(0,a.Z)(v,S.TRANS_WATSON_CRICK_HOOGSTEEN,"tWH"),(0,a.Z)(v,S.TRANS_HOOGSTEEN_WATSON_CRICK,"tHW"),(0,a.Z)(v,S.CIS_WATSON_CRICK_SUGAR_EDGE,"cWS"),(0,a.Z)(v,S.CIS_SUGAR_EDGE_WATSON_CRICK,"cSW"),(0,a.Z)(v,S.TRANS_WATSON_CRICK_SUGAR_EDGE,"tWS"),(0,a.Z)(v,S.TRANS_SUGAR_EDGE_WATSON_CRICK,"tSW"),(0,a.Z)(v,S.CIS_HOOGSTEEN_HOOGSTEEN,"cHH"),(0,a.Z)(v,S.TRANS_HOOGSTEEN_HOOGSTEEN,"tHH"),(0,a.Z)(v,S.CIS_HOOGSTEEN_SUGAR_EDGE,"cHS"),(0,a.Z)(v,S.CIS_SUGAR_EDGE_HOOGSTEEN,"cSH"),(0,a.Z)(v,S.TRANS_HOOGSTEEN_SUGAR_EDGE,"tHS"),(0,a.Z)(v,S.TRANS_SUGAR_EDGE_HOOGSTEEN,"tSH"),(0,a.Z)(v,S.CIS_SUGAR_EDGE_SUGAR_EDGE,"cSS"),(0,a.Z)(v,S.TRANS_SUGAR_EDGE_SUGAR_EDGE,"tSS"),v);var R=e.fullTypeNameMap=(x={},(0,a.Z)(x,S.CANONICAL,"canonical"),(0,a.Z)(x,S.WOBBLE,"wobble"),(0,a.Z)(x,S.MISMATCH,"mismatch"),(0,a.Z)(x,S.CIS_WATSON_CRICK_WATSON_CRICK,"cis Watson\u2013Crick/Watson\u2013Crick"),(0,a.Z)(x,S.TRANS_WATSON_CRICK_WATSON_CRICK,"trans Watson\u2013Crick/Watson\u2013Crick"),(0,a.Z)(x,S.CIS_WATSON_CRICK_HOOGSTEEN,"cis Watson\u2013Crick/Hoogsteen"),(0,a.Z)(x,S.CIS_HOOGSTEEN_WATSON_CRICK,"cis Hoogsteen/Watson\u2013Crick"),(0,a.Z)(x,S.TRANS_WATSON_CRICK_HOOGSTEEN,"trans Watson\u2013Crick/Hoogsteen"),(0,a.Z)(x,S.TRANS_HOOGSTEEN_WATSON_CRICK,"trans Hoogsteen/Watson\u2013Crick"),(0,a.Z)(x,S.CIS_WATSON_CRICK_SUGAR_EDGE,"cis Watson\u2013Crick/Sugar edge"),(0,a.Z)(x,S.CIS_SUGAR_EDGE_WATSON_CRICK,"cis Sugar edge/Watson\u2013Crick"),(0,a.Z)(x,S.TRANS_WATSON_CRICK_SUGAR_EDGE,"trans Watson\u2013Crick/Sugar edge"),(0,a.Z)(x,S.TRANS_SUGAR_EDGE_WATSON_CRICK,"trans Sugar edge/Watson\u2013Crick"),(0,a.Z)(x,S.CIS_HOOGSTEEN_HOOGSTEEN,"cis Hoogsteen/Hoogsteen"),(0,a.Z)(x,S.TRANS_HOOGSTEEN_HOOGSTEEN,"trans Hoogsteen/Hoogsteen"),(0,a.Z)(x,S.CIS_HOOGSTEEN_SUGAR_EDGE,"cis Hoogsteen/Sugar edge"),(0,a.Z)(x,S.CIS_SUGAR_EDGE_HOOGSTEEN,"cis Sugar edge/Hoogsteen"),(0,a.Z)(x,S.TRANS_HOOGSTEEN_SUGAR_EDGE,"trans Hoogsteen/Sugar edge"),(0,a.Z)(x,S.TRANS_SUGAR_EDGE_HOOGSTEEN,"trans Sugar edge/Hoogsteen"),(0,a.Z)(x,S.CIS_SUGAR_EDGE_SUGAR_EDGE,"cis Sugar edge/Sugar edge"),(0,a.Z)(x,S.TRANS_SUGAR_EDGE_SUGAR_EDGE,"trans Sugar edge/Sugar edge"),x);e.isDirectedType=function(e){return A.includes(e)};var M=e.CanonicalType=(g={},(0,a.Z)(g,S.CANONICAL,S.CANONICAL),(0,a.Z)(g,S.WOBBLE,S.WOBBLE),(0,a.Z)(g,S.MISMATCH,S.MISMATCH),(0,a.Z)(g,S.CIS_WATSON_CRICK_WATSON_CRICK,S.CIS_WATSON_CRICK_WATSON_CRICK),(0,a.Z)(g,S.TRANS_WATSON_CRICK_WATSON_CRICK,S.TRANS_WATSON_CRICK_WATSON_CRICK),g),w=e.canonicalTypes=Object.values(M);function k(e){return w.includes(e)}function O(e,t){return!t||r.isCanonicalType(e)}e.isCanonicalType=k,e.isEnabledBasePair=O,e.isNucleotideBasePaired=function(e,t,n,r,o,a){if(!(r in n))return!1;var i=n[r];return o in i&&i[o].filter((function(n){var r;return O(null!==(r=n.basePairType)&&void 0!==r?r:h(e,t.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),a)})).length>0};e.typeRecord=(E={},(0,a.Z)(E,c.Nucleotide.Symbol.A,(y={},(0,a.Z)(y,c.Nucleotide.Symbol.A,S.MISMATCH),(0,a.Z)(y,c.Nucleotide.Symbol.C,S.MISMATCH),(0,a.Z)(y,c.Nucleotide.Symbol.G,S.MISMATCH),(0,a.Z)(y,c.Nucleotide.Symbol.U,S.CANONICAL),y)),(0,a.Z)(E,c.Nucleotide.Symbol.C,(b={},(0,a.Z)(b,c.Nucleotide.Symbol.C,S.MISMATCH),(0,a.Z)(b,c.Nucleotide.Symbol.G,S.CANONICAL),(0,a.Z)(b,c.Nucleotide.Symbol.U,S.MISMATCH),b)),(0,a.Z)(E,c.Nucleotide.Symbol.G,(N={},(0,a.Z)(N,c.Nucleotide.Symbol.G,S.MISMATCH),(0,a.Z)(N,c.Nucleotide.Symbol.U,S.WOBBLE),N)),(0,a.Z)(E,c.Nucleotide.Symbol.U,(0,a.Z)({},c.Nucleotide.Symbol.U,S.MISMATCH)),E);var L=.5*Math.sqrt(3),j=.5*(3+Math.sqrt(3));function D(e){return function(t){var n=t.position0,r=t.position1;return e((0,o.Z)((0,o.Z)({},t),{},{position0:r,position1:n}))}}var Z=.5;function F(e,t,n){var r=n/(0,u.distance)(e,t),o=1-r;return{interpolatedPosition0:(0,u.interpolate)(e,t,r),interpolatedPosition1:(0,u.interpolate)(e,t,o)}}function B(e){var t=e.position0,n=e.position1,r=e.stroke,a=e.strokeWidth,i=e.svgPropertiesForXrna,l=e.onMouseOver,s=e.onMouseLeave,u=e.onMouseDown,c=e.className,d=e.basePairRadius,h=F(t,n,e.averageNucleotideBoundingRectHeight*Z),m=h.interpolatedPosition0,v=h.interpolatedPosition1;return(0,p.jsxs)("g",{children:[(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(m,v,!0,d),fill:"none",strokeWidth:a,onMouseOver:l,onMouseLeave:s,onMouseDown:u,className:c,pointerEvents:"all"}),(0,p.jsx)("line",(0,o.Z)((0,o.Z)({},i),{},{x1:m.x,y1:m.y,x2:v.x,y2:v.y,stroke:r,strokeWidth:a,pointerEvents:"none"}))]})}function U(e){var t=e.position0,n=e.position1,r=e.stroke,a=e.fill,i=e.strokeWidth,l=e.svgPropertiesForXrna,s=e.onMouseOver,u=e.onMouseLeave,c=e.onMouseDown,d=e.className,f=e.basePairRadius,h={x:.5*(t.x+n.x),y:.5*(t.y+n.y)};return(0,p.jsxs)("g",{children:[(0,p.jsx)("circle",(0,o.Z)((0,o.Z)({},l),{},{r:f,cx:h.x,cy:h.y,stroke:r,fill:a,strokeWidth:i,pointerEvents:"none"})),(0,p.jsx)("circle",{r:f,cx:h.x,cy:h.y,fill:"none",stroke:"red",strokeWidth:i,className:d,pointerEvents:"all",onMouseOver:s,onMouseLeave:u,onMouseDown:c})]})}function z(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.onMouseOver,c=e.onMouseLeave,d=e.onMouseDown,h=e.className,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.normalize)((0,u.subtract)(n,t)),E=(0,u.scaleUp)(N,m),I=(0,u.scaleUp)(N,1.5*m),C=(0,u.orthogonalize)(E),S=(0,u.subtract)(b,I),_=(0,u.add)(b,I),A=(0,u.subtract)(S,E),P=(0,u.add)(S,E),T=(0,u.subtract)(_,E),R=(0,u.add)(_,E),M=[(0,u.subtract)(T,C),(0,u.add)(T,C),(0,u.add)(R,C),(0,u.subtract)(R,C)],w=new Array;if((0,u.dotProduct)((0,u.subtract)(A,x),(0,u.subtract)(b,A))>0){var k={key:0,pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:A.x,y2:A.y};w.push((0,p.jsx)("line",(0,o.Z)({},k)))}var O={key:1,pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:S.x,cy:S.y,r:m},L={key:2,pointerEvents:"none",stroke:y,strokeWidth:l,x1:P.x,y1:P.y,x2:T.x,y2:T.y},j={key:3,d:"M ".concat(M[0].x," ").concat(M[0].y," L ").concat(M[1].x," ").concat(M[1].y," L ").concat(M[2].x," ").concat(M[2].y," L ").concat(M[3].x," ").concat(M[3].y," Z"),stroke:a,fill:i,pointerEvents:"none",strokeWidth:l};if(w.push((0,p.jsx)("circle",(0,o.Z)({},O)),(0,p.jsx)("line",(0,o.Z)({},L)),(0,p.jsx)("path",(0,o.Z)({},j))),(0,u.dotProduct)((0,u.subtract)(R,g),(0,u.subtract)(b,R))>0){var D={key:4,pointerEvents:"none",stroke:y,strokeWidth:l,x1:R.x,y1:R.y,x2:g.x,y2:g.y};w.push((0,p.jsx)("line",(0,o.Z)({},D)))}return(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[w,(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:s,onMouseLeave:c,onMouseDown:d,className:h,pointerEvents:"all"})]}))}var G=D(z);function W(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,c=e.onMouseOver,d=e.onMouseLeave,h=e.onMouseDown,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.normalize)((0,u.subtract)(n,t)),E=(0,u.scaleUp)(N,j*m),I=(0,u.scaleUp)(N,m),C=(0,u.scaleUp)((0,u.orthogonalize)(N),m),S=(0,u.add)((0,u.subtract)(b,E),I),_=(0,u.subtract)(S,I),A=(0,u.add)(S,I),P=(0,u.add)(S,(0,u.scaleUp)(N,2*m)),T=(0,u.add)(b,E),R=(0,u.add)(P,C),M=(0,u.subtract)(P,C),w=new Array;(0,u.dotProduct)((0,u.subtract)(_,x),(0,u.subtract)(b,_))>0&&w.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:_.x,y2:_.y},0));var k={key:1,pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:S.x,cy:S.y,r:m},O={key:3,d:"M ".concat(R.x," ").concat(R.y," L ").concat(M.x," ").concat(M.y," L ").concat(T.x," ").concat(T.y," Z"),stroke:a,fill:i,strokeWidth:l,pointerEvents:"none"};return w.push((0,p.jsx)("circle",(0,o.Z)({},k)),(0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:A.x,y1:A.y,x2:P.x,y2:P.y},2),(0,p.jsx)("path",(0,o.Z)({},O))),(0,u.dotProduct)((0,u.subtract)(T,g),(0,u.subtract)(b,T))>0&&w.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:T.x,y1:T.y,x2:g.x,y2:g.y},4)),(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[w,(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:c,onMouseLeave:d,onMouseDown:h,className:s,pointerEvents:"all"})]}))}var H=D(W);function K(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,c=e.onMouseOver,d=e.onMouseLeave,h=e.onMouseDown,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.normalize)((0,u.subtract)(n,t)),E=(0,u.scaleUp)(N,m),I=(0,u.scaleUp)((0,u.orthogonalize)(N),m),C=(0,u.subtract)(b,E),S=(0,u.add)(b,E),_=[(0,u.subtract)(C,I),(0,u.add)(C,I),(0,u.add)(S,I),(0,u.subtract)(S,I)],A=new Array;(0,u.dotProduct)((0,u.subtract)(C,x),(0,u.subtract)(b,C))>0&&A.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:C.x,y2:C.y},0));var P={key:1,d:"M ".concat(_[0].x," ").concat(_[0].y," L ").concat(_[1].x," ").concat(_[1].y," L ").concat(_[2].x," ").concat(_[2].y," L ").concat(_[3].x," ").concat(_[3].y," Z"),stroke:a,fill:i,strokeWidth:l,pointerEvents:"none"};return A.push((0,p.jsx)("path",(0,o.Z)({},P))),(0,u.dotProduct)((0,u.subtract)(S,g),(0,u.subtract)(b,S))>0&&A.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:S.x,y2:S.y},2)),(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[A,(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:c,onMouseLeave:d,onMouseDown:h,className:s,pointerEvents:"all"})]}))}function V(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,c=e.onMouseOver,d=e.onMouseLeave,h=e.onMouseDown,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.normalize)((0,u.subtract)(n,t)),E=(0,u.scaleUp)(N,j*m),I=(0,u.scaleUp)(N,m),C=(0,u.scaleUp)((0,u.orthogonalize)(N),m),S=(0,u.add)((0,u.subtract)(b,E),I),_=(0,u.subtract)(S,I),A=(0,u.add)(S,I),P=(0,u.add)(S,(0,u.scaleUp)(N,2*m)),T=(0,u.add)(b,E),R=[(0,u.subtract)(_,C),(0,u.add)(_,C),(0,u.add)(A,C),(0,u.subtract)(A,C)],M=(0,u.add)(P,C),w=(0,u.subtract)(P,C),k=new Array;(0,u.dotProduct)((0,u.subtract)(_,x),(0,u.subtract)(b,_))>0&&k.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:_.x,y2:_.y},0));var O={key:1,d:"M ".concat(R[0].x," ").concat(R[0].y," L ").concat(R[1].x," ").concat(R[1].y," L ").concat(R[2].x," ").concat(R[2].y," L ").concat(R[3].x," ").concat(R[3].y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"},L={key:3,d:"M ".concat(M.x," ").concat(M.y," L ").concat(w.x," ").concat(w.y," L ").concat(T.x," ").concat(T.y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"};return k.push((0,p.jsx)("path",(0,o.Z)({},O)),(0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:A.x,y1:A.y,x2:P.x,y2:P.y},2),(0,p.jsx)("path",(0,o.Z)({},L))),(0,u.dotProduct)((0,u.subtract)(T,g),(0,u.subtract)(b,T))>0&&k.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:T.x,y1:T.y,x2:g.x,y2:g.y},4)),(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[k,(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:c,onMouseLeave:d,onMouseDown:h,className:s,pointerEvents:"all"})]}))}var X=D(V);function q(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,c=e.onMouseOver,d=e.onMouseLeave,h=e.onMouseDown,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.normalize)((0,u.subtract)(n,t)),E=(0,u.scaleUp)(N,L*m),I=(0,u.scaleUp)((0,u.orthogonalize)(N),m),C=(0,u.subtract)(b,E),S=(0,u.add)(b,E),_=(0,u.add)(C,I),A=(0,u.subtract)(C,I),P=new Array;(0,u.dotProduct)((0,u.subtract)(C,x),(0,u.subtract)(b,C))>0&&P.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:C.x,y2:C.y},0));var T={key:1,d:"M ".concat(_.x," ").concat(_.y," L ").concat(A.x," ").concat(A.y," L ").concat(S.x," ").concat(S.y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"};return P.push((0,p.jsx)("path",(0,o.Z)({},T))),(0,u.dotProduct)((0,u.subtract)(C,x),(0,u.subtract)(b,C))>0&&P.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:S.x,y2:S.y},2)),(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[P,(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:c,onMouseLeave:d,onMouseDown:h,className:s,pointerEvents:"all"})]}))}var Y=(I={},(0,a.Z)(I,r.Type.CANONICAL,B),(0,a.Z)(I,r.Type.MISMATCH,U),(0,a.Z)(I,r.Type.WOBBLE,U),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_WATSON_CRICK,B),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_WATSON_CRICK,(function(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.onMouseOver,c=e.onMouseDown,d=e.onMouseLeave,h=e.className,m=e.basePairRadius,v=F(t,n,e.averageNucleotideBoundingRectHeight*Z),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,u.scaleUp)((0,u.add)(t,n),.5),N=(0,u.scaleUp)((0,u.normalize)((0,u.subtract)(n,t)),m),E=(0,u.subtract)(b,N),I=(0,u.add)(b,N),C=new Array;return(0,u.dotProduct)((0,u.subtract)(E,x),(0,u.subtract)(b,E))>0&&C.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:E.x,y2:E.y},0)),C.push((0,p.jsx)("circle",{pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:b.x,cy:b.y,r:m},1)),(0,u.dotProduct)((0,u.subtract)(I,g),(0,u.subtract)(b,I))>0&&C.push((0,p.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:I.x,y2:I.y},2)),(0,p.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[(0,p.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:s,onMouseLeave:d,onMouseDown:c,className:h,pointerEvents:"all"}),C]}))})),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_HOOGSTEEN,z),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_WATSON_CRICK,G),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_WATSON_CRICK,G),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_HOOGSTEEN,z),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_SUGAR_EDGE,W),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,W),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_WATSON_CRICK,H),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,H),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_HOOGSTEEN,K),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_HOOGSTEEN,K),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_SUGAR_EDGE,V),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,V),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_HOOGSTEEN,X),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,X),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,q),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,q),I);function Q(e){return{stroke:e,fill:"none"}}function $(e){return{stroke:"none",fill:e}}var J=(C={},(0,a.Z)(C,r.Type.CANONICAL,(function(e){return{stroke:e}})),(0,a.Z)(C,r.Type.WOBBLE,$),(0,a.Z)(C,r.Type.MISMATCH,Q),(0,a.Z)(C,r.Type.CIS_WATSON_CRICK_WATSON_CRICK,Q),(0,a.Z)(C,r.Type.TRANS_WATSON_CRICK_WATSON_CRICK,Q),(0,a.Z)(C,r.Type.CIS_WATSON_CRICK_HOOGSTEEN,$),(0,a.Z)(C,r.Type.TRANS_WATSON_CRICK_HOOGSTEEN,Q),(0,a.Z)(C,r.Type.CIS_HOOGSTEEN_WATSON_CRICK,$),(0,a.Z)(C,r.Type.TRANS_HOOGSTEEN_WATSON_CRICK,Q),(0,a.Z)(C,r.Type.CIS_WATSON_CRICK_SUGAR_EDGE,$),(0,a.Z)(C,r.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,Q),(0,a.Z)(C,r.Type.CIS_SUGAR_EDGE_WATSON_CRICK,$),(0,a.Z)(C,r.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,Q),(0,a.Z)(C,r.Type.CIS_HOOGSTEEN_HOOGSTEEN,$),(0,a.Z)(C,r.Type.TRANS_HOOGSTEEN_HOOGSTEEN,Q),(0,a.Z)(C,r.Type.CIS_HOOGSTEEN_SUGAR_EDGE,$),(0,a.Z)(C,r.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,Q),(0,a.Z)(C,r.Type.CIS_SUGAR_EDGE_HOOGSTEEN,$),(0,a.Z)(C,r.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,Q),(0,a.Z)(C,r.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,$),(0,a.Z)(C,r.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,Q),C);function ee(e){var t,n,u,c=e.position0,f=e.position1,h=e.mappedBasePair,m=e.rnaComplexIndex,v=e.rnaComplexName,x=e.rnaMoleculeName0,g=e.formattedNucleotideIndex0,y=e.rnaMoleculeName1,b=e.formattedNucleotideIndex1,N=(0,i.useContext)(l._.BasePair.AverageStrokeWidth),E=(0,i.useContext)(l._.App.SetMouseOverText),I=(0,i.useContext)(l._.BasePair.ClassName),C=(0,i.useContext)(l._.App.RnaComplexProps),S=(0,i.useContext)(l._.BasePair.OnMouseDownHelper),_=(0,i.useContext)(l._.App.SingularRnaComplexFlag),A=(0,i.useContext)(l._.RnaComplex.SingularRnaMoleculeFlag),P=(0,i.useContext)(l._.BasePair.Radius);Number.isNaN(P)&&(P=1);var T=(0,i.useContext)(l._.Nucleotide.AverageBoundingRectHeight);if(Number.isNaN(T)&&(T=.1),void 0===h)return null;var M=h.basePairType,w=C[m],O=w.rnaMoleculeProps[x],L=w.rnaMoleculeProps[y],j=g-O.firstNucleotideIndex,D=b-L.firstNucleotideIndex,Z=(O.nucleotideProps[j],L.nucleotideProps[D],(0,s.toCSS)(null!==(t=h.color)&&void 0!==t?t:k(M)?s.BLACK:s.BRIGHT_GRAY)),F=null!==(n=h.strokeWidth)&&void 0!==n?n:N;if(void 0!==h.points){var B=h.points.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ");return(0,p.jsx)("polyline",{stroke:Z,strokeWidth:F,pointerEvents:"none",points:B,fill:"none"})}var U=(u={},(0,a.Z)(u,d.SVG_PROPERTY_XRNA_TYPE,d.SvgPropertyXrnaType.BASE_PAIR),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_COMPLEX_NAME,v),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0,x),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1,y),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0,g),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1,b),(0,a.Z)(u,d.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE,M),u),z=x,G=y,W=j,H=D,K=M;if(r.isRedundantLeontisWesthofType(K)){K=r.reverseDirectedTypeMap[K];var V=z;z=G,G=V;var X=W;W=H,H=X}var q=w.rnaMoleculeProps[z],Q=w.rnaMoleculeProps[G],$=["Base Pair:"];return _||$.push("  Complex: ".concat(w.name)),A||$.push("  Mol(s): ".concat(Array.from(new Set([z,G])).join(" - "))),$.push("  Nucs:  ".concat(q.firstNucleotideIndex+W).concat(q.nucleotideProps[W].symbol," - ").concat(Q.firstNucleotideIndex+H).concat(Q.nucleotideProps[H].symbol),"  Type: ".concat(R[K])),(0,i.createElement)(Y[M],(0,o.Z)({position0:c,position1:f,basePairType:M,strokeWidth:F,svgPropertiesForXrna:U,onMouseOver:function(){E($.join("\n"))},onMouseLeave:function(){E("")},onMouseDown:function(e){S(e,{rnaComplexIndex:m,rnaMoleculeName:x,nucleotideIndex:j},{rnaComplexIndex:m,rnaMoleculeName:y,nucleotideIndex:D})},className:I,basePairRadius:P,averageNucleotideBoundingRectHeight:T},J[M](Z)))}e.Component=ee;e.MemoizedComponent=(0,i.memo)(ee)}(r||(r={})),t.default=r},9287:function(e,t,n){"use strict";n.r(t),n.d(t,{Nucleotide:function(){return x},getGraphicalAdjustment:function(){return N},getLabelContentHtmlElementId:function(){return b},getLabelLineHtmlElementId:function(){return y}});var r,o=n(1413),a=n(4942),i=n(9439),l=n(2791),s=n(7105),u=n(3413),c=n(3871),d=n(433),f=n(6176),p=n(1579),h=n(184);!function(e){function t(e){var t,n=e.content,r=e.x,s=e.y,m=e.fullKeys,v=e.id,x=(m.rnaComplexIndex,m.rnaMoleculeName),g=m.nucleotideIndex,y=(0,l.createRef)(),b=(0,l.useContext)(u._.Label.Content.OnMouseDownHelper),N=(0,l.useContext)(u._.Label.ClassName),E=(0,l.useContext)(u._.App.SetMouseOverText),I=(0,l.useContext)(u._.RnaMolecule.FirstNucleotideIndex),C=(0,l.useContext)(u._.RnaComplex.Name),S=(0,l.useContext)(u._.Nucleotide.Symbol),_=(0,l.useState)({width:0,height:0}),A=(0,i.Z)(_,2),P=A[0],T=A[1],R=(0,l.useState)({x:0,y:0}),M=(0,i.Z)(R,2),w=M[0],k=M[1],O=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:c.BLACK}),[e.color]),L=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]),j=(0,l.useMemo)((function(){var t;return null!==(t=e.font)&&void 0!==t?t:structuredClone(d.default.DEFAULT)}),[e.font]);return(0,l.useEffect)((function(){var e=y.current.getBBox();T({width:e.width,height:e.height})}),[n,j.size]),(0,l.useEffect)((function(){k({x:-.5*P.width,y:-.25*P.height})}),[P]),(0,h.jsx)("text",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.LABEL_CONTENT),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,C),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,x),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,g+I),t)),{},{id:v,ref:y,transform:"translate(".concat(r,", ").concat(s,") translate(").concat(w.x,", ").concat(w.y,") scale(1 -1)"),className:N+" noselect",fontSize:j.size,fontFamily:j.family,fontWeight:j.weight,fontStyle:j.style,strokeWidth:L,fill:(0,c.toCSS)(O),onMouseDown:function(e){b(e,m),e.preventDefault()},onMouseOver:function(e){E("nucleotide: ".concat(I+g,"\n")+"symbol:     ".concat(S,"\n")+"molecule:   ".concat(x,"\n")+"complex:    ".concat(C,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){E("")},children:n}))}e.Component=t;e.MemoizedComponent=(0,l.memo)(t)}(r||(r={}));var m,v=n(7457);!function(e){function t(e){var t,n=e.fullKeys,r=e.points,s=e.id,d=(0,l.useContext)(u._.Label.Line.Body.OnMouseDownHelper),m=(0,l.useContext)(u._.Label.Line.Endpoint.OnMouseDownHelper),x=(0,l.useContext)(u._.Label.ClassName),g=(0,l.useContext)(u._.App.SetMouseOverText),y=(0,l.useContext)(u._.RnaMolecule.FirstNucleotideIndex),b=(0,l.useContext)(u._.RnaComplex.Name),N=(0,l.useContext)(u._.Nucleotide.Symbol),E=n.nucleotideIndex,I=n.rnaMoleculeName,C=(n.rnaComplexIndex,(0,l.useState)({pathDAttribute:"",polylinePointsAttribute:""})),S=(0,i.Z)(C,2),_=S[0],A=S[1];function P(){for(var e=r[0],t=e,n=new Array,o=1;o<r.length;o++)t=r[o],n.push((0,v.getLineBoundingPath)(e,t)),e=t;A({pathDAttribute:n.join(" "),polylinePointsAttribute:r.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ")})}(0,l.useEffect)(P,[r]);var T=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:c.BLACK}),[e.color]),R=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]);return(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.LABEL_LINE),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,b),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,I),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,E+y),t)),{},{children:[(0,h.jsx)("polyline",{points:_.polylinePointsAttribute,pointerEvents:"none",stroke:(0,c.toCSS)(T),strokeWidth:R,fill:"none"}),r.map((function(e,t){return(0,h.jsx)("circle",{id:s,className:x,pointerEvents:"all",strokeWidth:f.DEFAULT_STROKE_WIDTH,fill:"none",cx:e.x,cy:e.y,r:1,onMouseDown:function(e){m(e,n,t,P)},onMouseOver:function(e){g("nucleotide: ".concat(y+E,"\n")+"symbol:     ".concat(N,"\n")+"molecule:   ".concat(I,"\n")+"complex:    ".concat(b,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){g("")}},t)})),(0,h.jsx)("path",{className:x,pointerEvents:"all",strokeWidth:f.DEFAULT_STROKE_WIDTH,fill:"none",d:_.pathDAttribute,onMouseDown:function(e){d(e,n,P),e.preventDefault()},onMouseOver:function(e){g("nucleotide: ".concat(y+E,"\n")+"symbol:     ".concat(N,"\n")+"molecule:   ".concat(I,"\n")+"complex:    ".concat(b,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){g("")}})]}))}e.Component=t;e.MemoizedComponent=(0,l.memo)(t)}(m||(m={}));var x,g=n(9750);n(3508);function y(e,t,n){return"".concat(e).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(t).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(n).concat(s.HTML_ELEMENT_ID_DELIMITER,"LabelLine")}function b(e,t,n){return"".concat(e).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(t).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(n).concat(s.HTML_ELEMENT_ID_DELIMITER,"LabelContent")}function N(e){return{x:-.5*e.width,y:-.3*e.height}}!function(e){var t=function(e){return e.FIVE_PRIME="5'",e.THREE_PRIME="3'",e.FIVE="5",e.THREE="3",e.A="A",e.C="C",e.G="G",e.U="U",e.N="N",e.a="a",e.c="c",e.g="g",e.n="n",e}({});e.Symbol=t;var n=e.symbols=Object.values(t);function v(e){var t,n=e.x,v=e.y,x=e.symbol,y=e.labelContentProps,E=e.labelLineProps,I=e.nucleotideIndex,C=(0,l.useContext)(u._.RnaComplex.Index),S=(0,l.useContext)(u._.RnaComplex.Name),_=(0,l.useContext)(u._.RnaMolecule.Name),A={nucleotideIndex:I,rnaMoleculeName:_,rnaComplexIndex:C},P=(0,l.useContext)(u._.RnaMolecule.FirstNucleotideIndex),T=(0,l.useContext)(u._.App.SetMouseOverText),R=(0,l.useContext)(u._.Nucleotide.OnMouseDownHelper),M=(0,l.useContext)(u._.Nucleotide.LabelsOnlyFlag),w=(0,l.useContext)(u._.App.Settings)[g.pE.PATH_MODE],k=(0,l.useContext)(u._.App.IndicesOfFrozenNucleotides),O=(0,l.useContext)(u._.App.SingularRnaComplexFlag),L=(0,l.useContext)(u._.RnaComplex.SingularRnaMoleculeFlag),j=!1;if(C in k){var D=k[C];if(_ in D)D[_].has(I)&&(j=!0)}var Z=(0,l.useState)({width:0,height:0}),F=(0,i.Z)(Z,2),B=F[0],U=F[1],z=(0,l.createRef)(),G=(0,l.useMemo)((function(){var t;return null!==(t=e.font)&&void 0!==t?t:structuredClone(d.default.DEFAULT)}),[e.font]),W=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:c.BLACK}),[e.color]),H=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]),K=(0,l.useMemo)((function(){return N(B)}),[B]);return(0,l.useEffect)((function(){U(z.current.getBBox())}),[x,G]),(0,h.jsxs)("g",{transform:"translate(".concat(n,", ").concat(v,")"),children:[(0,h.jsx)("text",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.NUCLEOTIDE),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,S),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,_),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,P),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX,I+P),t)),{},{ref:z,className:"".concat(s.NUCLEOTIDE_CLASS_NAME," noselect"),transform:"translate(".concat(K.x,", ").concat(K.y,") scale(1, -1)"),fontStyle:G.style,fontWeight:G.weight,fontFamily:G.family,fontSize:G.size,strokeWidth:H,fill:(0,c.toCSS)(W),fillOpacity:w?0:1,pointerEvents:M?"none":"all",onMouseDown:function(e){R(e,A)},onMouseOver:function(e){var t=P+I,n=[];O||n.push("Complex:    ".concat(S)),L||n.push("Molecule:   ".concat(_)),n.push("Nucleotide: ".concat(t),"Symbol:     ".concat(x),"status:     ".concat(j?"LOCKED (cannot move)":"unlocked (can move)")),T(n.join("\n"))},onMouseLeave:function(){T("")},children:x})),(0,h.jsxs)(u._.Nucleotide.Symbol.Provider,{value:x,children:[E&&(0,h.jsx)(m.Component,(0,o.Z)((0,o.Z)({},E),{},{id:b(C,_,I),fullKeys:A})),y&&(0,h.jsx)(r.Component,(0,o.Z)((0,o.Z)({},y),{},{id:b(C,_,I),fullKeys:A}))]})]})}e.isSymbol=function(e){return n.includes(e)};e.MemoizedComponent=(0,l.memo)(v)}(x||(x={}))},6048:function(e,t,n){"use strict";n.r(t),n.d(t,{DuplicateBasePairKeysHandler:function(){return I},RnaComplex:function(){return y},compareBasePairKeys:function(){return S},compareFullBasePairKeys:function(){return _},insertBasePair:function(){return C},isRelevantBasePairKeySetInPair:function(){return A},selectRelevantBasePairKeys:function(){return P}});var r,o=n(3433),a=n(1413),i=n(9439),l=n(7762),s=n(4942),u=n(2791),c=n(3413),d=n(7361),f=n(7089),p=n(9287),h=n(1579),m=n(3871),v=n(433),x=n(9750),g=n(184);(r||(r={})).Component=function(e){var t,n=e.firstNucleotideIndex,r=e.nucleotideProps,o=(e.nucleotideKeysToRerender,(0,u.useContext)(c._.RnaMolecule.Name)),d=(0,u.useContext)(c._.RnaComplex.Index),f=(0,u.useContext)(c._.Label.Content.UpdateDefaultStyle),y=(0,u.useContext)(c._.App.Settings),b=y[x.pE.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE],N=y[x.pE.CONTOUR_LINE_WIDTH],E=y[x.pE.PATH_MODE],I=y[x.pE.PATH_LINE_WIDTH],C=(0,u.useContext)(c._.App.IndicesOfFrozenNucleotides),S=(0,u.useMemo)((function(){var e=Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1],o=Number.parseInt(n),a=r;return a.key=o,a.nucleotideIndex=o,a}));return e.sort((function(e,t){return e.nucleotideIndex-t.nucleotideIndex})),e}),[r]),_=(0,u.useMemo)((function(){if(!(d in C))return[];var e=C[d];if(!(o in e))return[];var t,n=e[o],r=[],a=[],i=(0,l.Z)(S);try{for(i.s();!(t=i.n()).done;){var s=t.value;n.has(s.nucleotideIndex)?a.push({nucleotideIndex:s.nucleotideIndex,x:s.x,y:s.y,font:s.font}):a.length>0&&(r.push(a),a=[])}}catch(u){i.e(u)}finally{i.f()}return a.length>0&&r.push(a),r.map((function(e){var t,n,r=null!==(t=null===(n=e[0].font)||void 0===n?void 0:n.size)&&void 0!==t?t:v.default.DEFAULT_SIZE,o="string"===typeof r?(0,v.parseFontSize)(r):r,a=Math.max(o/12,.5);if(1===e.length){var i=e[0],s=o/2*1.3;return{type:"circle",x:i.x,y:i.y,radius:s,strokeWidth:a,indices:[i.nucleotideIndex]}}var c,d=o/2*1.3,f=[],p=(0,l.Z)(e);try{for(p.s();!(c=p.n()).done;)for(var h=c.value,m=0;m<8;m++){var x=m/8*2*Math.PI;f.push({x:h.x+d*Math.cos(x),y:h.y+d*Math.sin(x)})}}catch(u){p.e(u)}finally{p.f()}var g=function(e){if(e.length<3)return e;for(var t=e[0],n=1;n<e.length;n++)(e[n].y<t.y||e[n].y===t.y&&e[n].x<t.x)&&(t=e[n]);for(var r=e.slice().sort((function(e,n){var r=Math.atan2(e.y-t.y,e.x-t.x),o=Math.atan2(n.y-t.y,n.x-t.x);return r!==o?r-o:Math.hypot(e.x-t.x,e.y-t.y)-Math.hypot(n.x-t.x,n.y-t.y)})),o=[r[0],r[1]],a=2;a<r.length;a++){for(;o.length>1;){var i=o[o.length-2],l=o[o.length-1],s=r[a];if((l.x-i.x)*(s.y-i.y)-(l.y-i.y)*(s.x-i.x)>0)break;o.pop()}o.push(r[a])}return o}(f);if(g.length<3){var y=e[0];return{type:"circle",x:y.x,y:y.y,radius:d,strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}for(var b="M ".concat(g[0].x," ").concat(g[0].y),N=1;N<g.length;N++)b+=" L ".concat(g[N].x," ").concat(g[N].y);return{type:"path",path:b+=" Z",strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}))}),[S,C,d,o]);return(0,u.useEffect)((function(){for(var e=new Array,t=new Array,n=0,i=0,s=0,u=Object.values(r);s<u.length;s++){var c=u[s].labelContentProps;if(void 0!==c){var p=c.font,h=c.color;if(void 0!==p){i++,"string"===typeof p.size?n+=(0,v.parseFontSize)(p.size):n+=p.size;var x,g=!1,y=(0,l.Z)(t);try{for(y.s();!(x=y.n()).done;){var b=x.value;if(v.PartialFont.areEqual(p,b.font)){b.count++,g=!0;break}}}catch(O){y.e(O)}finally{y.f()}g||t.push({font:p,count:1})}if(void 0!==h){var N,E=!1,I=(0,l.Z)(e);try{for(I.s();!(N=I.n()).done;){var C=N.value;if((0,m.areEqual)(h,C.color)){C.count++,E=!0;break}}}catch(O){I.e(O)}finally{I.f()}E||e.push({color:h,count:1})}}}for(var S={font:structuredClone(v.default.DEFAULT),count:0},_=0,A=t;_<A.length;_++){var P=A[_];P.count>S.count&&(S=P)}for(var T={color:structuredClone(m.BLACK),count:0},R=0,M=e;R<M.length;R++){var w=M[R];w.count<T.count&&(T=w)}var k=0===i?v.default.DEFAULT_SIZE:n/i;f(d,o,{color:T.color,font:(0,a.Z)((0,a.Z)({},S.font),{},{size:k})})}),[d,o,r]),(0,g.jsxs)("g",(0,a.Z)((0,a.Z)({},(t={},(0,s.Z)(t,h.SVG_PROPERTY_XRNA_TYPE,h.SvgPropertyXrnaType.RNA_MOLECULE),(0,s.Z)(t,h.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,o),(0,s.Z)(t,h.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,n),t)),{},{children:[b&&(0,g.jsx)("polyline",{points:S.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" "),pointerEvents:"none",stroke:"var(--color-text)",strokeWidth:N,fill:"none"}),E&&!b&&function(){var e,t=function(e,t){if(e.length<2)return"";if(2===e.length||0===t)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var n=1-t,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,u=n,c=(l.x-a.x)*(1-u)/2,d=(l.y-a.y)*(1-u)/2,f=(s.x-i.x)*(1-u)/2,p=(s.y-i.y)*(1-u)/2,h=i.x+c/3,m=i.y+d/3,v=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(m,", ").concat(v," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r},n=[],r=null,o=(0,l.Z)(S);try{for(o.s();!(e=o.n()).done;){var a,i,s=e.value,u=s.pathColor?"rgb(".concat(s.pathColor.red,", ").concat(s.pathColor.green,", ").concat(s.pathColor.blue,")"):"var(--color-text)",c=null!==(a=s.pathLineWidth)&&void 0!==a?a:I,d=null!==(i=s.pathCurvature)&&void 0!==i?i:0;r&&r.color===u&&r.width===c&&r.curvature===d?r.points.push({x:s.x,y:s.y}):(r&&r.points.length>0&&(r.points.push({x:s.x,y:s.y}),n.push(r)),r={points:[{x:s.x,y:s.y}],color:u,width:c,curvature:d})}}catch(f){o.e(f)}finally{o.f()}return r&&r.points.length>0&&n.push(r),(0,g.jsx)(g.Fragment,{children:n.map((function(e,n){return(0,g.jsx)("path",{d:t(e.points,e.curvature),pointerEvents:"none",stroke:e.color,strokeWidth:e.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round","data-xrna_type":"path"},"path-segment-".concat(n))}))})}(),!b&&S.length>0&&function(){var e=function(e,t){if(e.length<2)return"";if(2===e.length||0===t)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var n=1-t,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,u=n,c=(l.x-a.x)*(1-u)/2,d=(l.y-a.y)*(1-u)/2,f=(s.x-i.x)*(1-u)/2,p=(s.y-i.y)*(1-u)/2,h=i.x+c/3,m=i.y+d/3,v=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(m,", ").concat(v," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r}(S.map((function(e){return{x:e.x,y:e.y}})),.5);return(0,g.jsx)("path",{d:e,pointerEvents:"none",stroke:"rgb(0, 0, 0)",strokeWidth:.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",visibility:"hidden","data-xrna_type":"centerline"})}(),!b&&(0,g.jsx)(c._.RnaMolecule.FirstNucleotideIndex.Provider,{value:n,children:S.map((function(e){return(0,u.createElement)(p.Nucleotide.MemoizedComponent,e)}))}),!b&&_.map((function(e,t){return"circle"===e.type?(0,g.jsx)("circle",{cx:e.x,cy:e.y,r:e.radius,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(t)):(0,g.jsx)("path",{d:e.path,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(t))}))]}))};var y,b=n(7457),N=n(6176),E=(0,s.Z)({},f.default.Type.WOBBLE,1.15),I=function(e){return e[e.DO_NOTHING=0]="DO_NOTHING",e[e.THROW_ERROR=1]="THROW_ERROR",e[e.DELETE_PREVIOUS_MAPPING=2]="DELETE_PREVIOUS_MAPPING",e}({});function C(e,t,n,r,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I.DO_NOTHING,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=e.basePairs;if(t in c&&n in c[t]){var d=c[t][n].find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}));if(void 0!==d){var p,h;d.basePairType=u.basePairType;var m=null===(p=c[r])||void 0===p||null===(h=p[o])||void 0===h?void 0:h.find((function(e){return e.rnaMoleculeName===t&&e.nucleotideIndex===n}));void 0!==m&&(m.basePairType=u.basePairType)}return[{keys0:{rnaMoleculeName:t,nucleotideIndex:n},keys1:{rnaMoleculeName:r,nucleotideIndex:o}}]}var v=new Array,x=[],g={rnaMoleculeName:t,nucleotideIndex:n,basePairedRnaMoleculeName:r,basePairedNucleotideIndex:o,basePairType:u.basePairType},y={rnaMoleculeName:r,nucleotideIndex:o,basePairedRnaMoleculeName:t,basePairedNucleotideIndex:n,basePairType:u.basePairType};delete(u=structuredClone(u)).basePairType,void 0!==g.basePairType&&f.default.isDirectedType(g.basePairType)&&(y.basePairType=f.default.reverseDirectedTypeMap[g.basePairType]);for(var b=0,N=[g,y];b<N.length;b++){var E=N[b],C=E.rnaMoleculeName,_=E.nucleotideIndex,A=E.basePairedRnaMoleculeName,P=E.basePairedNucleotideIndex,T=E.basePairType;C in c||(c[C]={});var R=c[C];if(_ in R){var M,w=R[_],k=(0,l.Z)(w);try{for(k.s();!(M=k.n()).done;){var O=M.value;switch(s){case I.DO_NOTHING:break;case I.DELETE_PREVIOUS_MAPPING:var L=[{rnaMoleculeName:C,nucleotideIndex:_},O].sort(S),j=(0,i.Z)(L,2),D=j[0],Z=j[1];v.push({keys0:D,keys1:Z}),delete c[O.rnaMoleculeName][O.nucleotideIndex];break;case I.THROW_ERROR:throw"Duplicate base-pair keys were found within this RNA complex. This is not allowed."}}}catch(H){k.e(H)}finally{k.f()}}x.push({basePairsPerRnaMolecule:R,nucleotideIndex:_,mappedBasePairInformation:(0,a.Z)((0,a.Z)({rnaMoleculeName:A,nucleotideIndex:P},u),{},{basePairType:T})})}for(var F=0,B=x;F<B.length;F++){var U=B[F],z=U.basePairsPerRnaMolecule,G=U.nucleotideIndex,W=U.mappedBasePairInformation;G in z||(z[G]=[]),z[G].push(W)}return v}function S(e,t){return e.rnaMoleculeName.localeCompare(t.rnaMoleculeName)||e.nucleotideIndex-t.nucleotideIndex}function _(e,t){return S(e.keys0,t.keys0)||S(e.keys1,t.keys1)}function A(e,t){return S(e,t)<=0}function P(e,t){return A(e,t)?e:t}!function(e){function t(e){var t=e.keys0,n=e.keys1;return"#".concat(t.nucleotideIndex," in ").concat(t.rnaMoleculeName," basepaired to #").concat(n.nucleotideIndex," in ").concat(n.rnaMoleculeName)}e.Component=function(e){var n,p=e.name,m=e.rnaMoleculeProps,v=e.basePairs,x=e.nucleotideKeysToRerenderPerRnaComplex,y=e.basePairKeysToRerenderPerRnaComplex,I=e.basePairUpdateTrigger,C=(0,u.useContext)(c._.RnaComplex.Index),P=(0,u.useContext)(c._.BasePair.DataToEditPerRnaComplex),T=(0,u.useContext)(c._.BasePair.AverageDistances),R=(0,u.useContext)(c._.BasePair.UpdateAverageDistances),M=Object.entries(m),w=(0,u.useMemo)((function(){var e=new Array;return Object.entries(v).forEach((function(n){var r=(0,i.Z)(n,2),o=r[0],a=r[1],s=m[o];Object.entries(a).forEach((function(n){var r,a=(0,i.Z)(n,2),u=a[0],c=a[1],d=Number.parseInt(u),h={rnaMoleculeName:o,nucleotideIndex:d},v=(0,l.Z)(c);try{for(v.s();!(r=v.n()).done;){var x=r.value;if(A(h,x)){var g=s.nucleotideProps[d],y=m[x.rnaMoleculeName],b=y.nucleotideProps[x.nucleotideIndex];void 0===x.basePairType&&(x.basePairType=(0,f.getBasePairType)(g.symbol,b.symbol)),e.push({key:t({keys0:h,keys1:x}),mappedBasePair:x,position0:g,position1:b,rnaComplexIndex:C,rnaComplexName:p,rnaMoleculeName0:o,nucleotideIndex0:d,formattedNucleotideIndex0:d+s.firstNucleotideIndex,rnaMoleculeName1:x.rnaMoleculeName,nucleotideIndex1:x.nucleotideIndex,formattedNucleotideIndex1:x.nucleotideIndex+y.firstNucleotideIndex,updateTrigger:0})}}}catch(N){v.e(N)}finally{v.f()}}))})),e.sort((function(e,t){return _({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},{keys0:{rnaMoleculeName:t.rnaMoleculeName0,nucleotideIndex:t.nucleotideIndex0},keys1:{rnaMoleculeName:t.rnaMoleculeName1,nucleotideIndex:t.nucleotideIndex1}})})),e}),[v,I]),k=(0,u.useMemo)((function(){for(var e=0,t=0,n=0,r=Object.keys(v);n<r.length;n++)for(var o=r[n],a=v[o],i=0,s=Object.keys(a);i<s.length;i++){var u,c=s[i],d=a[Number.parseInt(c)],f=(0,l.Z)(d);try{for(f.s();!(u=f.n()).done;){var p=u.value.strokeWidth;void 0!==p&&(e++,t+=p)}}catch(h){f.e(h)}finally{f.f()}}return 0===e?N.DEFAULT_STROKE_WIDTH:t/e}),[v]),O=(0,u.useMemo)((function(){var e=(0,o.Z)(w);if(void 0!==P){var n,r=(0,l.Z)(P.delete);try{var i=function(){var t=n.value;t.keys0,t.keys1;(0,b.sortedArraySplice)(e,(function(e){return _({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},t)}),1,[],b.HandleQueryNotFound.DO_NOTHING)};for(r.s();!(n=r.n()).done;)i()}catch(k){r.e(k)}finally{r.f()}var s,u=(0,l.Z)(P.add);try{var c=function(){var n=s.value,r=n.keys0,o=n.keys1,a=r.rnaMoleculeName,i=r.nucleotideIndex,l=v[a][i].find((function(e){return e.rnaMoleculeName===o.rnaMoleculeName&&e.nucleotideIndex===o.nucleotideIndex}));if(A(r,o)){var u=m[a],c=u.nucleotideProps[i],d=m[o.rnaMoleculeName],h=d.nucleotideProps[o.nucleotideIndex];void 0===l.basePairType&&(l.basePairType=(0,f.getBasePairType)(c.symbol,h.symbol));var x={mappedBasePair:l,position0:c,position1:h,rnaComplexIndex:C,rnaComplexName:p,rnaMoleculeName0:a,nucleotideIndex0:i,formattedNucleotideIndex0:i+u.firstNucleotideIndex,rnaMoleculeName1:o.rnaMoleculeName,nucleotideIndex1:o.nucleotideIndex,formattedNucleotideIndex1:o.nucleotideIndex+d.firstNucleotideIndex,key:t(n)};(0,b.sortedArraySplice)(e,(function(e){return _({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},n)}),0,[x],b.HandleQueryNotFound.ADD)}};for(u.s();!(s=u.n()).done;)c()}catch(k){u.e(k)}finally{u.f()}}var d,h=[],x={},g=(0,l.Z)(y);try{for(g.s();!(d=g.n()).done;){var N=d.value,E=N.rnaMoleculeName,I=N.nucleotideIndex;E in x&&x[E].has(I)||(h.push(N),E in x||(x[E]=new Set),x[E].add(I))}}catch(k){g.e(k)}finally{g.f()}for(var T=function(){var t=M[R],n=(0,b.binarySearch)(e,(function(e){return S({rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},t)}));if(null!==n){n.arrayIndex;for(var r=n.arrayIndex;r>=0;r--){var o=e[r];if(o.rnaMoleculeName0!==n.arrayEntry.rnaMoleculeName0||o.nucleotideIndex0!==n.arrayEntry.nucleotideIndex0)break;e[r]=(0,a.Z)((0,a.Z)({},o),{},{updateTrigger:Math.random()})}for(var i=n.arrayIndex;i<e.length;i++){var l=e[i];if(l.rnaMoleculeName0!==n.arrayEntry.rnaMoleculeName0||l.nucleotideIndex0!==n.arrayEntry.nucleotideIndex0)break;e[i]=(0,a.Z)((0,a.Z)({},l),{},{updateTrigger:Math.random()})}}},R=0,M=h;R<M.length;R++)T();return(0,o.Z)(e)}),[w,P,y]),L=(0,u.useMemo)((function(){return 1===M.length}),[M]);return(0,u.useEffect)((function(){var e,t={},n=(0,l.Z)(f.default.types);try{for(n.s();!(e=n.n()).done;){t[e.value]={count:0,distanceSum:0,distances:[]}}}catch(fe){n.e(fe)}finally{n.f()}for(var r=0,o=0,a=0,s=Object.entries(v);a<s.length;a++)for(var u=(0,i.Z)(s[a],2),c=u[0],p=u[1],h=0,x=Object.entries(p);h<x.length;h++){var g,y=(0,i.Z)(x[h],2),N=y[0],I=y[1],S=(0,l.Z)(I);try{for(S.s();!(g=S.n()).done;){var _,A=g.value,P=Number.parseInt(N),T=m[c].nucleotideProps[P],M=m[A.rnaMoleculeName].nucleotideProps[A.nucleotideIndex],w=(0,d.distance)(T,M);o+=w,r++;var k=t[null!==(_=A.basePairType)&&void 0!==_?_:(0,f.getBasePairType)(T.symbol,M.symbol)];k.count++,k.distanceSum+=w,k.distances.push(w)}}catch(fe){S.e(fe)}finally{S.f()}}for(var O=0,L=0,j={0:{nucleotideIndex:NaN,rnaMoleculeName:""},1:{nucleotideIndex:NaN,rnaMoleculeName:""},center:{x:NaN,y:NaN}},D=0,Z=Object.entries(v);D<Z.length;D++){var F,B=(0,i.Z)(Z[D],2),U=B[0],z=B[1],G=Object.entries(z).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),basePairsPerNucleotide:r}})),W=m[U],H=(0,l.Z)(G);try{for(H.s();!(F=H.n()).done;)for(var K=F.value,V=K.nucleotideIndex,X=K.basePairsPerNucleotide,q=0;q<X.length;q++){var Y=X[q],Q=W.nucleotideProps[V],$=m[Y.rnaMoleculeName].nucleotideProps[Y.nucleotideIndex],J={0:{nucleotideIndex:V,rnaMoleculeName:U},1:Y,center:(0,d.scaleUp)((0,d.add)(Q,$),.5)},ee=J[0].rnaMoleculeName===j[0].rnaMoleculeName&&J[1].rnaMoleculeName===j[1].rnaMoleculeName&&Math.abs(J[0].nucleotideIndex-j[0].nucleotideIndex)<=1&&Math.abs(J[1].nucleotideIndex-j[1].nucleotideIndex)<=1;ee&&(O+=(0,d.distance)(J.center,j.center),L++),(ee||q==X.length-1)&&(j=J)}}catch(fe){H.e(fe)}finally{H.f()}}var te,ne=o/(12*r),re={},oe=(0,l.Z)(f.default.types);try{for(oe.s();!(te=oe.n()).done;){var ae=te.value,ie=t[ae];re[ae]=(0,b.median)(ie.distances)}}catch(fe){oe.e(fe)}finally{oe.f()}var le=re[f.default.Type.CANONICAL];if(!Number.isNaN(le)){var se,ue=(0,l.Z)(f.default.types);try{for(ue.s();!(se=ue.n()).done;){var ce=se.value;if(Number.isNaN(re[ce])){var de=le;ce in E&&(de*=E[ce]),re[ce]=de}}}catch(fe){ue.e(fe)}finally{ue.f()}}R(C,{radius:ne,distances:re,helixDistance:O/L})}),[C,v]),C in T?T[C].radius:c._.BasePair.DEFAULT_RADIUS,(0,g.jsx)("g",(0,a.Z)((0,a.Z)({},(n={},(0,s.Z)(n,h.SVG_PROPERTY_XRNA_TYPE,h.SvgPropertyXrnaType.RNA_COMPLEX),(0,s.Z)(n,h.SVG_PROPERTY_XRNA_COMPLEX_NAME,p),n)),{},{children:(0,g.jsx)(c._.RnaComplex.Name.Provider,{value:p,children:(0,g.jsx)(c._.RnaComplex.SingularRnaMoleculeFlag.Provider,{value:L,children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("g",{children:(0,g.jsx)(c._.BasePair.AverageStrokeWidth.Provider,{value:k,children:O.map((function(e){return(0,g.jsx)(f.default.MemoizedComponent,(0,a.Z)({},e))}))})}),M.map((function(e){var t,n=(0,i.Z)(e,2),o=n[0],l=n[1];return(0,g.jsx)(c._.RnaMolecule.Name.Provider,{value:o,children:(0,g.jsx)(r.Component,(0,a.Z)((0,a.Z)({},l),{},{nucleotideKeysToRerender:null!==(t=x[o])&&void 0!==t?t:[]}),o)},o)}))]})})})}))}}(y||(y={}))},4914:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var r,o,a=n(1413),i=n(3433),l=n(7762),s=n(2791),u=n(6768),c=n(3413),d=n(9750),f=n(920),p=n(9287),h=n(184);(o=r||(r={})).Component=function(e){var t=(0,s.useContext)(c._.App.Settings),n=t[d.pE.USE_DEGREES],r=t[d.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],o=(0,s.useMemo)((function(){var t=void 0,n=e.onUpdatePositions;if(r){t=[];var o,a=new Array,s=(0,l.Z)(e.positions);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("symbol"in u&&"string"===typeof u.symbol&&p.Nucleotide.isSymbol(u.symbol)){var c,d=u,f=d.labelLineProps,h=d.labelContentProps;void 0!==h&&t.push(h),void 0!==f&&(a.push(f),(c=t).push.apply(c,(0,i.Z)(f.points)))}}}catch(m){s.e(m)}finally{s.f()}n=function(t){for(var n=0,r=a;n<r.length;n++){var o=r[n];o.points=(0,i.Z)(o.points)}e.onUpdatePositions(t)}}return{relativePositions:t,onUpdatePositions:n}}),[r,e.positions,e.onUpdatePositions]),m=o.relativePositions,v=o.onUpdatePositions;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(f.z.Component,{title:"Positions",children:(0,h.jsx)(u.U.Component,(0,a.Z)((0,a.Z)({},e),{},{useDegreesFlag:n,relativePositions:m,onUpdatePositions:v}))})})},o.Simplified=function(e){var t=(0,s.useContext)(c._.App.Settings),n=t[d.pE.USE_DEGREES],r=t[d.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],o=(0,s.useMemo)((function(){var t=void 0,n=e.onUpdatePositions;if(r){t=[];var o,a=new Array,s=(0,l.Z)(e.positions);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("symbol"in u&&"string"===typeof u.symbol&&p.Nucleotide.isSymbol(u.symbol)){var c,d=u,f=d.labelLineProps,h=d.labelContentProps;void 0!==h&&t.push(h),void 0!==f&&(a.push(f),(c=t).push.apply(c,(0,i.Z)(f.points)))}}}catch(m){s.e(m)}finally{s.f()}n=function(t){for(var n=0,r=a;n<r.length;n++){var o=r[n];o.points=(0,i.Z)(o.points)}e.onUpdatePositions(t)}}return{relativePositions:t,onUpdatePositions:n}}),[r,e.positions,e.onUpdatePositions]),m=o.relativePositions,v=o.onUpdatePositions;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(f.z.Component,{title:"Positions",children:(0,h.jsx)(u.U.Simplified,(0,a.Z)((0,a.Z)({},e),{},{useDegreesFlag:n,relativePositions:m,onUpdatePositions:v}))})})}},8161:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var r,o=n(4942),a=n(3433),i=n(1413),l=n(7762),s=n(9439),u=n(2791),c=n(3413),d=n(6048),f=n(7089),p=n(9750),h=n(1702),m=n(7457),v=n(7361),x=n(920),g=n(6176),y=n(184);!function(e){var t,n=12,r=!1,b=function(e){return e.TABLE_BASED="Table-based",e.TEXT_BASED="Text-based",e}({});e.EditorType=b;var N=Object.values(b);e.isEditorType=function(e){return N.includes(e)};var E,I=e.TextBasedEditor=(0,u.forwardRef)((function(e,t){var r=e.rnaComplexProps,o=e.setBasePairs,a=e.approveBasePairs,i=e.initialBasePairs,l=e.defaultRnaComplexIndex,c=e.defaultRnaMoleculeName0,d=e.defaultRnaMoleculeName1,p=(0,u.useState)(""),h=(0,s.Z)(p,2),m=h[0],v=h[1],x=(0,u.useState)(0),g=(0,s.Z)(x,2),b=g[0],N=g[1];function E(e){N(Math.min(e,5))}var I=(0,u.useMemo)((function(){return Object.values(r).map((function(e){return e.name}))}),[r]);return(0,u.useEffect)((function(){if(void 0!==i){var e=i.map((function(e){var t=e.rnaComplexIndex,n=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1,l=e.length,s=e.type,u=[null!==a&&void 0!==a?a:"#",null!==i&&void 0!==i?i:"#",null!==l&&void 0!==l?l:"#"];if(void 0===t){var c=void 0===n,d=void 0===o;c&&!d?u.push('"'+o+'"'):!c&&d?u.push('"'+n+'"'):c||d||u.push('"'+n+'"','"'+o+'"')}else u.push('"'+(null!==n&&void 0!==n?n:"")+'"','"'+(null!==o&&void 0!==o?o:"")+'"','"'+r[t].name+'"'),void 0!==s&&u.push('"'.concat(s,'"'));return u.join(" ")})).join("\n");v(e),E(i.length+1)}else v("")}),[i]),(0,u.useImperativeHandle)(t,(function(){return{updateAll:function(){var e=m.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));try{var t=e.map((function(e,t){var n=e.match(/^(-?\d+)\s+(-?\d+)\s+(\d+)(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?$/);if(null===n)throw"line #".concat(t+1," had an unrecognized format.");var o=n.slice(1).filter((function(e){return void 0!==e&&e.length>0}));if(o.length<3)throw"Too few arguments were found in line #".concat(t+1);var a=o[0],i=Number.parseInt(a),s="The provided nucleotide index #1 in line #".concat(t+1," is not an integer.");if(!/^-?\d+$/.test(a))throw s;if(Number.isNaN(i))throw s;var u=o[1],p=Number.parseInt(u),h="The provided nucleotide index #2 in line #".concat(t+1," is not an integer.");if(!/^-?\d+$/.test(u))throw h;if(Number.isNaN(p))throw h;var m=o[2],v="The provided helix length in line #".concat(t+1," is not a non-negative integer.");if(!/^\d+$/.test(m))throw v;var x,g=Number.parseInt(m);if(Number.isNaN(g))throw v;function y(e){var t=/^"(.*)"$/.exec(e);return null!==t&&(e=t[1]),e}if(o.length<6){if(void 0===l)throw"No name was provided for the RNA complex in line #".concat(t+1,".");x=l}else{var b=y(o[5]);if(-1===(x=I.findIndex((function(e){return b===e}))))throw"The provided RNA complex name in line #".concat(t+1," does not match any existing RNA complex's name.")}var N,E,C=r[x];if(o.length<4){if(void 0===c)throw"No name was provided for RNA-molecule #1 in line #".concat(t+1,".");N=c}else N=y(o[3]);if(!(N in C.rnaMoleculeProps))throw"The name provided for RNA molecule #1 in line #".concat(t+1," does not match any existing RNA molecule's name.");if(o.length<5){if(void 0===d)throw"No name was provided for RNA-molecule #2 in line #".concat(t+1,".");E=d}else E=y(o[4]);if(!(E in C.rnaMoleculeProps))throw"The name provided for RNA molecule #2 in line #".concat(t+1," does not match any existing RNA molecule's name.");for(var S=C.rnaMoleculeProps[N],_=C.rnaMoleculeProps[E],A=0;A<g;A++){var P=i+A,T=p-A;if(!(P in S.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(P,".");if(!(T in _.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(T,".")}var R=void 0,M=o[6];if(void 0!==M&&(M=y(M).toLocaleLowerCase(),void 0===(R=f.default.types.find((function(e){return e.toLocaleLowerCase()===M})))))throw'The provided base-pair type "'.concat(R,'" in line #').concat(t+1," was not recognized.");return{rnaComplexIndex:x,rnaMoleculeName0:N,rnaMoleculeName1:E,nucleotideIndex0:i,nucleotideIndex1:p,length:g,type:R}}));a(t),o(t)}catch(n){if("string"===typeof n)return void alert(n);throw n}}}})),(0,y.jsx)("textarea",{style:{width:"99%",height:"".concat(n*b,"px"),fontSize:"".concat(n,"px")},value:m,onInput:function(e){var t,n;E((null!==(t=null===(n=e.target.value.match(/\n/g))||void 0===n?void 0:n.length)&&void 0!==t?t:-1)+2)},onChange:function(e){var t=e.target.value;v(t)}})})),C=e.TableBasedEditor=(0,u.forwardRef)((function(e,t){var n=e.rnaComplexProps,r=e.setBasePairs,o=e.approveBasePairs,d=e.initialBasePairs,f=e.defaultRnaComplexIndex,p=e.defaultRnaMoleculeName0,h=e.defaultRnaMoleculeName1,v=e.setBasePairKeysToEdit,x=e.populateBasePairKeysToEdit,g=e.repositionWithCalculatedDistances,b=e.setRepositionWithCalculatedDistances;(0,u.useImperativeHandle)(t,(function(){return{updateAll:function(){R(I,new Set)}}}));var N=(0,u.useState)([]),E=(0,s.Z)(N,2),I=E[0],C=E[1],_=(0,u.useState)([]),A=(0,s.Z)(_,2),P=A[0],T=A[1];function R(e,t){try{o(e);var n=r(e,t);C(n)}catch(a){if("string"===typeof a)return void alert(a);throw a}}var M=(0,u.useContext)(c._.App.PushToUndoStack),w=(0,u.useMemo)((function(){return Object.entries(n).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{rnaComplexIndex:Number.parseInt(n),singularRnaComplexProps:r}}))}),[n]);return(0,u.useEffect)((function(){var e,t=new Array,n=new Array,r=(0,l.Z)(null!==d&&void 0!==d?d:[]);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=(0,i.Z)({rnaComplexIndex:f,rnaMoleculeName0:p,rnaMoleculeName1:h},o);void 0===a.rnaComplexIndex||void 0===a.rnaMoleculeName0||void 0===a.rnaMoleculeName1||void 0===a.nucleotideIndex0||void 0===a.nucleotideIndex1||void 0===a.length?n.push(a):t.push(a)}}catch(s){r.e(s)}finally{r.f()}C(t),0===n.length&&n.push({}),T(n)}),[d]),(0,y.jsx)("div",{className:"visible-scrollbar",style:{overflow:"scroll",overflowX:"hidden",background:"inherit",position:"sticky"},children:(0,y.jsxs)("table",{style:{border:"inherit",borderCollapse:"collapse",borderSpacing:0,width:"auto",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:[(0,y.jsx)("thead",{style:{border:"1px solid black",position:"sticky",top:-1,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:(0,y.jsxs)("tr",{style:{border:"inherit",position:"sticky",top:0,background:"inherit"},children:[(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA complex"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #1"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #1"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #2"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #2"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Length"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Type"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Edit"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Add / Delete"})]})}),(0,y.jsxs)("tbody",{style:{border:"inherit"},children:[I.map((function(e,t){var r=e.rnaComplexIndex,o=e.rnaMoleculeName0,i=e.rnaMoleculeName1,l=e.nucleotideIndex0,s=e.nucleotideIndex1,u=e.length,c=e.type,d=n[r];return(0,y.jsxs)("tr",{style:{textAlign:"center"},children:[(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:d.name}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:o}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:l}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:i}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:s}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:u}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:null!==c&&void 0!==c?c:"auto"}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,y.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){M();var n=P[0];void 0===n.rnaComplexIndex&&void 0===n.rnaMoleculeName0&&void 0===n.rnaMoleculeName1&&void 0===n.nucleotideIndex0&&void 0===n.nucleotideIndex1&&void 0===n.length&&void 0===n.type?T([e]):T([].concat((0,a.Z)(P),[e])),C([].concat((0,a.Z)(I.slice(0,t)),(0,a.Z)(I.slice(t+1))));var r={};x(e,r,"delete"),v(r)},children:"Edit"})}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,y.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){M();for(var e=new Set,n=0;n<I.length;n++)e.add(n);R([].concat((0,a.Z)(I.slice(0,t)),(0,a.Z)(I.slice(t+1))),e)},children:"Delete"})})]},t)})),(0,y.jsxs)("tr",{style:{border:"1px solid black",background:"black",height:10},children:[(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{})]}),P.map((function(e,t){function r(){for(var t=new Set,n=0;n<I.length-1;n++)t.add(n);var r=(0,a.Z)(I),o=structuredClone(e);(0,m.sortedArraySplice)(r,(function(e){var t=e.rnaComplexIndex,n=e.rnaMoleculeName0,r=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1;return t-o.rnaComplexIndex||n.localeCompare(o.rnaMoleculeName0)||r.localeCompare(o.rnaMoleculeName1)||a-o.nucleotideIndex0||i-o.nucleotideIndex1}),0,[o],m.HandleQueryNotFound.ADD),R(r,t)}var o=0===t?function(){M(),r(),e.rnaComplexIndex=void 0,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,e.length=void 0,e.type=void 0,T((0,a.Z)(P))}:function(){M(),r(),T([].concat((0,a.Z)(P.slice(0,t)),(0,a.Z)(P.slice(t+1))))};return(0,y.jsx)(S,(0,i.Z)((0,i.Z)({},e),{},{setRnaComplexIndex:function(t){e.rnaComplexIndex=t,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,T((0,a.Z)(P))},setRnaMoleculeName0:function(t){e.rnaMoleculeName0=t,e.nucleotideIndex0=void 0,T((0,a.Z)(P))},setRnaMoleculeName1:function(t){e.rnaMoleculeName1=t,e.nucleotideIndex1=void 0,T((0,a.Z)(P))},setNucleotideIndex0:function(t){e.nucleotideIndex0=t,T((0,a.Z)(P))},setNucleotideIndex1:function(t){e.nucleotideIndex1=t,T((0,a.Z)(P))},setLength:function(t){e.length=t,T((0,a.Z)(P))},setType:function(t){e.type=t,T((0,a.Z)(P))},rnaComplexProps:n,flattenedRnaComplexProps:w,addButtonOnClick:o,repositionWithCalculatedDistances:g,setRepositionWithCalculatedDistances:b}),t)}))]})]})})}));t={},(0,o.Z)(t,b.TEXT_BASED,I),(0,o.Z)(t,b.TABLE_BASED,C);function S(e){var t=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,i=e.nucleotideIndex0,l=e.nucleotideIndex1,s=e.length,c=e.type,d=e.flattenedRnaComplexProps,p=e.rnaComplexProps,m=e.setRnaComplexIndex,v=e.setRnaMoleculeName0,x=e.setRnaMoleculeName1,b=e.setNucleotideIndex0,N=e.setNucleotideIndex1,E=e.setLength,I=e.setType,C=e.addButtonOnClick,S=(0,u.useMemo)((function(){var e=void 0,n=new Array;return void 0!==t&&(e=p[t],n=Object.keys(e.rnaMoleculeProps)),{singularRnaComplexProps:e,rnaMoleculeNames:n}}),[t]),_=S.singularRnaComplexProps,A=S.rnaMoleculeNames,P=(0,u.useMemo)((function(){return void 0===r?void 0:_.rnaMoleculeProps[r]}),[r]),T=(0,u.useMemo)((function(){return void 0===o?void 0:_.rnaMoleculeProps[o]}),[o]);return(0,y.jsxs)("tr",{style:{border:"inherit",maxHeight:n},children:[(0,y.jsx)("td",{style:{border:"1px solid black"},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==t&&void 0!==t?t:-1,onChange:function(e){var t=Number.parseInt(e.target.value);m(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA complex"}),d.map((function(e){var t=e.rnaComplexIndex,n=e.singularRnaComplexProps;return(0,y.jsx)("option",{value:t,children:n.name},t)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===A.length,value:r,onChange:function(e){var t=e.target.value;v(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),A.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===P,value:null!==i&&void 0!==i?i:NaN,setValue:b,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0===t||t in P.nucleotideProps?t:{errorMessage:"Nucleotide #".concat(t," does not exist in RNA molecule #1")}}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===A.length,value:o,onChange:function(e){var t=e.target.value;x(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),A.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===T,value:null!==l&&void 0!==l?l:NaN,setValue:N,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0===t||t in T.nucleotideProps?t:{errorMessage:"Nucleotide #".concat(t," does not exist in RNA molecule #2")}}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{width:"100%",height:"100%"},value:null!==s&&void 0!==s?s:NaN,setValue:E,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0!==t&&t<0?{errorMessage:"Length must be non-negative"}:t}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==c&&void 0!==c?c:-1,onChange:function(e){var t=e.target.value;I("auto"===t?void 0:t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select a base-pair type"}),["auto"].concat((0,a.Z)(f.default.types)).map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n,textAlign:"center"},children:(0,y.jsx)("span",{style:{width:"100%",height:"100%",textAlign:"center"},children:"N/A"})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n,padding:"4px"},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"10px",whiteSpace:"nowrap"},children:[(0,y.jsx)("input",{type:"checkbox",checked:e.repositionWithCalculatedDistances||!1,onChange:function(t){var n;return null===(n=e.setRepositionWithCalculatedDistances)||void 0===n?void 0:n.call(e,t.target.checked)},style:{margin:0,transform:"scale(0.8)"}}),(0,y.jsx)("span",{children:"Reposition"})]}),(0,y.jsx)("button",{disabled:!(void 0!==t&&void 0!==r&&void 0!==o&&void 0!==i&&void 0!==l&&void 0!==s&&s>=0),style:{width:"100%",height:"20px",fontSize:"10px"},onClick:C,children:"Add"})]})})]})}e.Component=function(e){var t=e.rnaComplexProps,n=(e.approveBasePairs,e.initialBasePairs),o=(e.defaultRnaComplexIndex,e.defaultRnaMoleculeName0,e.defaultRnaMoleculeName1,(0,u.useContext)(c._.Nucleotide.SetKeysToRerender)),i=(0,u.useContext)(c._.BasePair.SetKeysToEdit),h=(0,u.useContext)(c._.App.Settings),g=(0,u.useContext)(c._.BasePair.AverageDistances),N=(0,u.useContext)(c._.App.IndicesOfFrozenNucleotides),E=(0,u.useContext)(c._.App.PushToUndoStack),I=(0,u.useState)(b.TABLE_BASED),C=(0,s.Z)(I,2),S=(C[0],C[1],(0,u.useState)(!1)),_=(0,s.Z)(S,2),A=_[0],P=(_[1],(0,u.useState)(r)),T=(0,s.Z)(P,2),R=T[0],M=T[1],w=(0,u.useState)(r),k=(0,s.Z)(w,2),O=k[0],L=k[1],j=(0,u.useState)(1),D=(0,s.Z)(j,2),Z=D[0],F=D[1],B=(0,u.useState)(1),U=(0,s.Z)(B,2),z=U[0],G=U[1],W=(0,u.useState)(1),H=(0,s.Z)(W,2),K=H[0],V=H[1],X=(0,u.useState)(1),q=(0,s.Z)(X,2),Y=q[0],Q=q[1],$=(0,u.useState)(!1),J=(0,s.Z)($,2),ee=J[0],te=J[1],ne=(0,u.useState)([]),re=(0,s.Z)(ne,2),oe=re[0],ae=re[1],ie=(0,u.useState)(n),le=(0,s.Z)(ie,2),se=(le[0],le[1]),ue=(0,u.useRef)();ue.current=oe;var ce=(0,u.useRef)();ce.current=A;var de=(0,u.useRef)();de.current=R;var fe=(0,u.useRef)();fe.current=O;var pe=(0,u.useRef)();pe.current=Z;var he=(0,u.useRef)();he.current=K;var me=(0,u.useRef)();me.current=z;var ve=(0,u.useRef)();ve.current=Y;var xe=(0,u.useRef)();xe.current=N;var ge=(0,u.useMemo)((function(){return function(e,n,r){var o=xe.current,i=new Array,u=e.rnaComplexIndex,c=e.rnaMoleculeName0,f=e.rnaMoleculeName1,p=e.nucleotideIndex0,h=e.nucleotideIndex1,m=e.length,v=e.type,x=e.types,g=ce.current;u in n||(n[u]={add:[],delete:[]});var y=n[u],b=y[r],N=y.delete,E=t[u],I=E.rnaMoleculeProps[c],C=E.rnaMoleculeProps[f];p-=I.firstNucleotideIndex,h-=C.firstNucleotideIndex;for(var S=(u in o?o[u]:{}),_=(c in S?S[c]:new Set),A=(f in S?S[f]:new Set),P=[],T=[],R=function(){var e=p+M,t=h-M,n=_.has(e)||A.has(t);if(!n&&c in E.basePairs){var o=E.basePairs[c];if(e in o){var u,m=o[e],y=(0,l.Z)(m);try{for(y.s();!(u=y.n()).done;){var I=u.value;if(I.rnaMoleculeName in S){var C=S[I.rnaMoleculeName];n||(n=C.has(p))}}}catch(V){y.e(V)}finally{y.f()}}}if(!n&&f in E.basePairs){var R=E.basePairs[f];if(t in R){var w,k=R[t],O=(0,l.Z)(k);try{for(O.s();!(w=O.n()).done;){var L=w.value;if(L.rnaMoleculeName in S){var j=S[L.rnaMoleculeName];n||(n=j.has(h))}}}catch(V){O.e(V)}finally{O.f()}}}if(n)return i.push(M),P.push(M),"continue";var D=[{rnaMoleculeName:c,nucleotideIndex:e},{rnaMoleculeName:f,nucleotideIndex:t}].sort(d.compareBasePairKeys),Z=(0,s.Z)(D,2),F={keys0:Z[0],keys1:Z[1]};if("add"===r)try{var B=(0,d.insertBasePair)(E,c,e,f,t,g?d.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING:d.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:null!==v&&void 0!==v?v:void 0===x?void 0:x[M]});N.push.apply(N,[F].concat((0,a.Z)(B)))}catch(X){if("string"===typeof X)return i.push(M),T.push(M),"continue";throw X}else if("delete"===r){var U=E.basePairs[c],z=E.basePairs[f];if(e in U){var G=U[e],W=G.findIndex((function(e){return e.rnaMoleculeName===f&&e.nucleotideIndex===t}));-1!==W&&(1===G.length?delete U[e]:U[e]=[].concat((0,a.Z)(G.slice(0,W)),(0,a.Z)(G.slice(W+1))))}if(t in z){var H=z[t],K=H.findIndex((function(t){return t.rnaMoleculeName===c&&t.nucleotideIndex===e}));-1!==K&&(1===H.length?delete z[t]:z[t]=[].concat((0,a.Z)(H.slice(0,K)),(0,a.Z)(H.slice(K+1))))}}b.push(F)},M=0;M<m;M++)R();var w=[];return P.length>0&&w.push(["The following base pairs were not ".concat({add:"added",delete:"deleted"}[r]," due to the involvement of frozen nucleotide(s):")].concat((0,a.Z)(P.map((function(e){return"Base pair #".concat(e+1)})))).join("\n")),T.length>0&&w.push(["The following base pairs were not added due to conflicting, preexisting base pair(s). Activate the relevant setting if you want to override them:"].concat((0,a.Z)(T.map((function(e){return"#".concat(e+1)})))).join("\n")),i}}),[]),ye=(0,u.useMemo)((function(){return function(e){var n,r=(0,l.Z)(e);try{var o=function(){var e=n.value,r=t[e.rnaComplexIndex],o=r.rnaMoleculeProps[e.rnaMoleculeName0],a=r.rnaMoleculeProps[e.rnaMoleculeName1],i=r.basePairs[e.rnaMoleculeName0];e.types=[];for(var l=function(){var t,n=e.nucleotideIndex0-o.firstNucleotideIndex+s,r=e.nucleotideIndex1-a.firstNucleotideIndex-s,l=i[n].find((function(t){var n=t.rnaMoleculeName,o=t.nucleotideIndex;return n===e.rnaMoleculeName1&&o===r}));e.types.push(null!==(t=l.basePairType)&&void 0!==t?t:(0,f.getBasePairType)(o.nucleotideProps[n].symbol,a.nucleotideProps[r].symbol))},s=0;s<e.length;s++)l()};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}ae(e)}}),[]),be=(0,u.useMemo)((function(){return function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,a=arguments.length>2?arguments[2]:void 0,s=de.current,u=fe.current,c=ue.current,x=pe.current,g=he.current,y=me.current,b=ve.current,N={},E=new Array,I=(0,l.Z)(c);try{for(I.s();!(n=I.n()).done;){var C,S=n.value,_=ge(S,N,"delete"),A=Number.NaN,P=(0,l.Z)(_);try{for(P.s();!(C=P.n()).done;){var T=C.value,R=S.rnaComplexIndex,M=S.rnaMoleculeName0,w=S.rnaMoleculeName1,k=S.nucleotideIndex0,O=S.nucleotideIndex1,L=S.type;if(T===A+1){var j=E[E.length-1];j.type===L?j.length++:E.push({rnaComplexIndex:R,rnaMoleculeName0:M,rnaMoleculeName1:w,nucleotideIndex0:k+T,nucleotideIndex1:O-T,length:1,type:L})}else E.push({rnaComplexIndex:R,rnaMoleculeName0:M,rnaMoleculeName1:w,nucleotideIndex0:k+T,nucleotideIndex1:O-T,length:1,type:L});A=T}}catch(Ye){P.e(Ye)}finally{P.f()}}}catch(Ye){I.e(Ye)}finally{I.f()}var D,Z=new Set,F=(0,l.Z)(e);try{for(F.s();!(D=F.n()).done;){var B,U=D.value,z=ge(U,N,"add"),G=U.rnaComplexIndex,W=U.rnaMoleculeName0,H=U.rnaMoleculeName1,K=U.nucleotideIndex0,V=U.nucleotideIndex1,X=U.length,q=U.type,Y=-1,Q=(0,l.Z)(z);try{for(Q.s();!(B=Q.n()).done;){var $=B.value;if(0!==$){var J=$-Y-1;E.push({rnaComplexIndex:G,rnaMoleculeName0:W,rnaMoleculeName1:H,nucleotideIndex0:K+$-J,nucleotideIndex1:V-$+J,length:J,type:q}),Y=$}Z.add($)}}catch(Ye){Q.e(Ye)}finally{Q.f()}Y!==X-1&&E.push({rnaComplexIndex:G,rnaMoleculeName0:W,rnaMoleculeName1:H,nucleotideIndex0:K+Y+1,nucleotideIndex1:V-(Y+1),length:X-Y-1,type:q})}}catch(Ye){F.e(Ye)}finally{F.f()}if(null!==a&&void 0!==a?a:s||u){for(var te={},ne=E.map((function(e,n){var o=t[e.rnaComplexIndex],a=o.rnaMoleculeProps[e.rnaMoleculeName0],i=o.rnaMoleculeProps[e.rnaMoleculeName1],l=e.nucleotideIndex0-a.firstNucleotideIndex,s=e.nucleotideIndex1-i.firstNucleotideIndex,u=new Array,c=e.rnaComplexIndex,d=e.rnaMoleculeName0,p=e.rnaMoleculeName1;c in te||(te[c]={});var h=te[c];d in h||(h[d]=[]);var m=h[d];p in h||(h[p]=[]);for(var v=h[p],x=function(){var t=l+g,c=s-g;m.push(t),v.push(c);var h=a.nucleotideProps[t],x=i.nucleotideProps[c],y=e.type;if(void 0===y&&d in o.basePairs){var b=o.basePairs[d];if(t in b){var N=b[t].find((function(e){return e.rnaMoleculeName===p&&e.nucleotideIndex===c}));void 0!==N&&(y=N.basePairType)}}void 0===y&&(y=(0,f.getBasePairType)(h.symbol,x.symbol));var E=!r.has(n),I=Ne.current;if(I){var C=t+a.firstNucleotideIndex,S=c+i.firstNucleotideIndex,_=(void 0===I.start||C>=I.start)&&(void 0===I.end||C<=I.end),A=(void 0===I.start||S>=I.start)&&(void 0===I.end||S<=I.end);E=_||A}u.push({0:h,1:x,basePairType:y,allowRepositioningFlag:E})},g=0;g<e.length;g++)x();return u})),re=0;re<ne.length;re++){var oe=ne[re];if(0!==oe.length){for(var ae=oe[0],ie=ae[0],le=ae[1],se=(0,v.scaleUp)((0,v.add)(ie,le),.5),ce=(0,v.normalize)((0,v.subtract)(le,ie)),xe=(0,v.orthogonalize)(ce),be=0,Ee=0;Ee<oe.length;Ee++)for(var Ie=oe[Ee],Ce=0,Se=[Ie[0],Ie[1]];Ce<Se.length;Ce++){var _e=Se[Ce];be+=(0,m.sign)((0,v.dotProduct)((0,v.subtract)(_e,se),xe))}be<0&&(xe=(0,v.negate)(xe));for(var Ae=0;Ae<oe.length;Ae++){var Pe=oe[Ae],Te=Pe[0],Re=Pe[1],Me=Pe.basePairType,we=(0,v.scaleUp)((0,v.add)(Te,Re),.5),ke=(0,v.subtract)(Re,Te),Oe=(0,v.normalize)(ke),Le=0;if(Pe.allowRepositioningFlag&&s)if(ee){var je=h[p.pE.CANONICAL_BASE_PAIR_DISTANCE],De=h[p.pE.MISMATCH_BASE_PAIR_DISTANCE],Ze=h[p.pE.WOBBLE_BASE_PAIR_DISTANCE];switch(Me){case f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.CANONICAL:Le=Number.isNaN(je)?x:je;break;case f.default.Type.MISMATCH:Le=Number.isNaN(De)?y:De;break;case f.default.Type.WOBBLE:Le=Number.isNaN(Ze)?g:Ze;break;default:Le=Number.isNaN(De)?y:De}}else switch(Me){case f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.CANONICAL:Le=x;break;case f.default.Type.MISMATCH:Le=y;break;case f.default.Type.WOBBLE:Le=g;break;default:Le=y}else Le=(0,v.magnitude)(ke);if(Le*=.5,Pe.allowRepositioningFlag&&u){var Fe=ee?Number.isNaN(h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS])?b:h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS]:b;we=(0,v.add)(se,(0,v.scaleUp)(xe,Ae*Fe)),Oe=ce}ke=(0,v.scaleUp)(Oe,Le);var Be=(0,v.subtract)(we,ke),Ue=(0,v.add)(we,ke);Te.x=Be.x,Te.y=Be.y,Re.x=Ue.x,Re.y=Ue.y}}}for(var ze=0,Ge=Object.values(te);ze<Ge.length;ze++)for(var We=Ge[ze],He=0,Ke=Object.values(We);He<Ke.length;He++){Ke[He].sort(m.subtractNumbers)}o(te)}for(var Ve=0,Xe=Object.values(N);Ve<Xe.length;Ve++){var qe=Xe[Ve];qe.add.sort(d.compareFullBasePairKeys),qe.delete.sort(d.compareFullBasePairKeys)}return i(N),ye(E),E}}),[]),Ne=(0,u.useRef)(null);return(0,u.useEffect)((function(){function e(e){Ne.current=e.detail||{},E(),be((0,a.Z)(oe),new Set)}return window.addEventListener("triggerReformatRange",e),function(){return window.removeEventListener("triggerReformatRange",e)}}),[oe]),(0,u.useEffect)((function(){var e,t={},n=(0,l.Z)(f.default.types);try{for(n.s();!(e=n.n()).done;){for(var r=e.value,o=[],a=0,i=Object.values(g);a<i.length;a++){var s=i[a].distances;o.push(s[r])}t[r]=(0,m.median)(o)}}catch(k){n.e(k)}finally{n.f()}var u=[t[f.default.Type.CANONICAL],t[f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK],t[f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]].filter((function(e){return!Number.isNaN(e)}));function c(e){return 1*e.reduce((function(e,t){return e+t}))/e.length}for(var d=0===u.length?1:c(u),v=f.default.types.filter((function(e){return e!==f.default.Type.CANONICAL&&e!==f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK&&e!==f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK&&e!==f.default.Type.WOBBLE})).map((function(e){return t[e]})).filter((function(e){return!Number.isNaN(e)})),x=0===v.length?1:c(v),y=t[f.default.Type.WOBBLE],N=0,E=0,I=0,C=Object.values(g);I<C.length;I++){var S=C[I].helixDistance;Number.isNaN(S)||(N+=S,E++)}var _=N/E,A=(b.TABLE_BASED,h[p.pE.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING]),P=h[p.pE.CANONICAL_BASE_PAIR_DISTANCE],T=h[p.pE.MISMATCH_BASE_PAIR_DISTANCE],R=h[p.pE.WOBBLE_BASE_PAIR_DISTANCE],w=h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS];M(A),L(A),F(Number.isNaN(P)?Number.isNaN(d)?1:d:P),G(Number.isNaN(T)?Number.isNaN(x)?1:x:T),V(Number.isNaN(R)?Number.isNaN(y)?1:y:R),Q(Number.isNaN(w)?Number.isNaN(_)?1:_:w)}),[g]),(0,u.useEffect)((function(){se(n),ye(void 0===n?[]:n.filter((function(e){return void 0!==e.rnaComplexIndex&&void 0!==e.rnaMoleculeName0&&void 0!==e.rnaMoleculeName1&&void 0!==e.nucleotideIndex0&&void 0!==e.nucleotideIndex1&&void 0!==e.length})))}),[n]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.z.Component,{title:"Base-pairs editor",initialCollapsedFlag:!1,children:[(0,y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",padding:"6px 8px",borderRadius:"4px",backgroundColor:ee?"#e8f5e8":"transparent",border:ee?"1px solid #4caf50":"1px solid transparent",transition:"all 0.2s ease"},children:[(0,y.jsx)("input",{type:"checkbox",checked:ee,onChange:function(e){return te(e.target.checked)},style:{margin:0}}),(0,y.jsx)("span",{style:{fontSize:"12px",fontWeight:ee?"600":"400",color:ee?"#2e7d32":"inherit"},children:"Reposition nucleotides with calculated distances"}),ee&&(0,y.jsx)("span",{style:{fontSize:"10px",color:"#666",fontStyle:"italic",marginLeft:"4px"},children:"(Using auto-calculated values from uploaded structure)"})]}),(0,y.jsx)("br",{})]}),(0,y.jsx)("div",{style:{display:"none"},children:(0,y.jsx)("button",{id:"__hidden_reformat_button__",onClick:function(){E(),be((0,a.Z)(oe),new Set)},children:"Re-format all"})})]})},(E||(E=e.EditorTypeSelector||(e.EditorTypeSelector={}))).Component=function(e){var t=e.editorType,n=e.onChange;return(0,y.jsx)("select",{value:t,onChange:function(e){n(e.target.value)},children:N.map((function(e,t){return(0,y.jsx)("option",{value:e,children:e},t)}))})},e.TableRow=S}(r||(r={}))},920:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r,o=n(1413),a=n(9439),i=n(2791),l=n(3413),s=n(184);(r||(r={})).Component=function(e){var t=e.initialCollapsedFlag,n=e.title,r=e.children,u=e.buttonStyle,c=e.divStyle,d=(0,i.useContext)(l._.Collapsible.Width),f=null!==d&&void 0!==d?d:"100%",p=(0,i.useState)(null===t||void 0===t||t),h=(0,a.Z)(p,2),m=h[0],v=h[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"collapsible",style:(0,o.Z)({width:f},u),onClick:function(){v(!m)},children:[(0,s.jsx)("span",{style:{display:"inline-block",textAlign:"left",width:"50%",whiteSpace:"nowrap"},children:n}),(0,s.jsx)("span",{style:{display:"inline-block",textAlign:"right",width:"50%"},children:m?"+":"-"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{style:(0,o.Z)({display:m?"none":"block",paddingLeft:"10px"},c),children:(0,s.jsx)(l._.Collapsible.Width.Provider,{value:"100%",children:r})})]})}},1702:function(e,t,n){"use strict";var r,o=n(1413),a=n(9439),i=n(2791),l=n(6176),s=n(7457),u=n(184);!function(e){var t=function(e){return e.VALUE="value",e.UNDEFINED="undefined",e.ERROR="error",e}({});function n(e){var n=e.disabledFlag,r=(0,i.useState)(e.valueToString(e.value)),l=(0,a.Z)(r,2),s=l[0],c=l[1],d=(0,i.useState)(!0),f=(0,a.Z)(d,2),p=f[0],h=f[1],m=(0,i.useState)(!0),v=(0,a.Z)(m,2),x=v[0],g=v[1],y=(0,i.useState)(void 0),b=(0,a.Z)(y,2),N=b[0],E=b[1];return(0,i.useEffect)((function(){x?c(e.valueToString(e.value)):(g(!0),h(!0))}),[e.value]),(0,u.jsx)("input",{style:(0,o.Z)({border:"1px solid ".concat(p?"black":"red")},e.style),type:e.htmlInputType,value:s,onChange:function(n){g(!1);var r=n.target.value;c(r);var o,a=e.stringToValue(r);switch(void 0===(o=a)?t.UNDEFINED:null!==o&&"object"===typeof o&&"errorMessage"in o?t.ERROR:t.VALUE){case t.VALUE:e.setValue(a),E(void 0),h(!0);break;case t.UNDEFINED:h(!1),E(void 0);break;case t.ERROR:h(!1),E(a.errorMessage)}},step:e.step,min:e.min,max:e.max,title:N,disabled:n})}e.StringToValueReturnType=t,e.Component=n,e.Number=function(e){var t,r,a;return(0,u.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:l.numberToFormattedStringHelper,stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseFloatReturnUndefinedOnFail)(t);if(void 0!==n){if(void 0!==e.min&&n<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&n>e.max)return{errorMessage:"Input value is greater than the maximum."}}return n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number"},e))},e.Integer=function(e){var t,r,a;return(0,u.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:function(e){return e.toString()},stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseIntReturnUndefinedOnFail)(t);if(void 0!==n){if(void 0!==e.min&&n<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&n>e.max)return{errorMessage:"Input value is greater than the maximum."}}return n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number"},e))},e.Angle=function(e){var t,r,a,c=(0,i.useMemo)((function(){var t;return(null!==(t=e.step)&&void 0!==t?t:e.useDegreesFlag)?1:(0,s.degreesToRadians)(1)}),[e.step]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:function(t){var n=e.useDegreesFlag?(0,s.radiansToDegrees)(t):t;return(0,l.numberToFormattedStringHelper)(n)},stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseFloatReturnUndefinedOnFail)(t);if(void 0!==n)return void 0!==e.min&&n<e.min?{errorMessage:"Input value is less than the minimum."}:void 0!==e.max&&n>e.max?{errorMessage:"Input value is greater than the maximum."}:e.useDegreesFlag?(0,s.degreesToRadians)(n):n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number",step:c},e)),e.useDegreesFlag?"\xb0":"radians"]})}}(r||(r={})),t.Z=r},5910:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var r,o=n(4942),a=n(1413),i=n(9439),l=n(2791),s=n(3871),u=n(649),c=n(5088),d=n(3869),f=n(920),p=n(3413),h=n(184);!function(e){var t=function(e){return e.RGBA="RGBA",e.Hexadecimal="Hexadecimal",e.ColorWheel="Color wheel",e}({}),n=Object.values(t);e.Component=function(e){var r,m=e.setColorHelper,v=e.color,x=e.children,g=(0,l.useState)(t.ColorWheel),y=(0,i.Z)(g,2),b=y[0],N=y[1],E=(0,l.useState)(0),I=(0,i.Z)(E,2),C=I[0],S=I[1],_=(0,l.useState)(0),A=(0,i.Z)(_,2),P=A[0],T=A[1],R=(0,l.useState)(0),M=(0,i.Z)(R,2),w=M[0],k=M[1],O=(0,l.useState)(0),L=(0,i.Z)(O,2),j=L[0],D=L[1],Z=(0,l.useState)(s.DEFAULT_COLOR_FORMAT),F=(0,i.Z)(Z,2),B=F[0],U=F[1],z=(0,l.useState)(""),G=(0,i.Z)(z,2),W=G[0],H=G[1],K=(0,l.useState)({h:0,s:0,v:100,a:0}),V=(0,i.Z)(K,2),X=V[0],q=V[1],Y=(0,l.useState)(!1),Q=(0,i.Z)(Y,2),$=Q[0],J=Q[1];function ee(e,t,n,r,o){H((0,s.toHexadecimal)({red:e,green:t,blue:n,alpha:r},o,!0))}function te(e,t,n,r){q((0,c.S7)({r:e,g:t,b:n,a:r}))}function ne(e){$||re(),m(e),J(!0)}var re=(0,l.useContext)(p._.App.PushToUndoStack);(0,l.useEffect)((function(){var e,t=null!==v&&void 0!==v?v:s.BLACK;S(t.red),T(t.green),k(t.blue);var n=null!==(e=t.alpha)&&void 0!==e?e:s.DEFAULT_ALPHA;D(n),ee(t.red,t.green,t.blue,n,B),te(t.red,t.green,t.blue,n)}),[v]);var oe=(r={},(0,o.Z)(r,t.RGBA,(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("label",{children:["Red:\xa0",(0,h.jsx)("input",{type:"number",min:0,max:255,step:1,value:C,onChange:function(e){var t=Number.parseInt(e.target.value);S(t),ne({red:t,green:P,blue:w,alpha:j}),ee(t,P,w,j,B),te(t,P,w,j)}})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("label",{children:["Green:\xa0",(0,h.jsx)("input",{type:"number",min:0,max:255,step:1,value:P,onChange:function(e){var t=Number.parseInt(e.target.value);T(t),ne({red:C,green:t,blue:w,alpha:j}),ee(C,t,w,j,B),te(C,t,w,j)}})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("label",{children:["Blue:\xa0",(0,h.jsx)("input",{type:"number",min:0,max:255,step:1,value:w,onChange:function(e){var t=Number.parseInt(e.target.value);k(t),ne({red:C,green:P,blue:t,alpha:j}),ee(C,P,t,j,B),te(C,P,t,j)}})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("label",{children:["Alpha:\xa0",(0,h.jsx)("input",{type:"number",min:0,max:255,step:1,value:j,onChange:function(e){var t=Number.parseInt(e.target.value);D(t),ne({red:C,green:P,blue:w,alpha:t}),ee(C,P,w,t,B),te(C,P,w,t)}})]})]})),(0,o.Z)(r,t.Hexadecimal,(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("label",{children:["Encoding:\xa0",(0,h.jsx)("select",{value:B,onChange:function(e){var t,n,r=e.target.value;U(r);var o=(0,s.fromHexadecimal)(W,r);S(o.red),T(o.green),k(o.blue),D(null!==(t=o.alpha)&&void 0!==t?t:s.DEFAULT_ALPHA),ne(o),te(o.red,o.green,o.blue,null!==(n=o.alpha)&&void 0!==n?n:s.DEFAULT_ALPHA)},children:s.colorFormats.map((function(e){return(0,h.jsx)("option",{children:e},e)}))})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("label",{children:["Hexadecimal:\xa0",(0,h.jsx)("input",{type:"text",value:W,onChange:function(e){var t,n,r=e.target.value;H(r);var o=(0,s.fromHexadecimal)(r,B);S(o.red),T(o.green),k(o.blue),D(null!==(t=o.alpha)&&void 0!==t?t:s.DEFAULT_ALPHA),ne(o),te(o.red,o.green,o.blue,null!==(n=o.alpha)&&void 0!==n?n:s.DEFAULT_ALPHA)}})]})]})),(0,o.Z)(r,t.ColorWheel,(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{hsva:X,onChange:function(e){var t=(0,a.Z)((0,a.Z)({},X),{},{v:e.v});q(t);var n=(0,c.MA)(t),r={red:n.r,green:n.g,blue:n.b,alpha:j};ne(r),S(r.red),T(r.green),k(r.blue),D(r.alpha),ee(r.red,r.green,r.blue,r.alpha,B)},width:"100%"}),(0,h.jsx)("br",{}),(0,h.jsx)(u.Z,{color:X,onChange:function(e){q((0,a.Z)((0,a.Z)({},X),e.hsva));var t={red:e.rgba.r,green:e.rgba.g,blue:e.rgba.b,alpha:j};ne(t),S(t.red),T(t.green),k(t.blue),D(t.alpha),ee(t.red,t.green,t.blue,t.alpha,B)}})]})),r);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(f.z.Component,{title:"Color",children:[x,"Edit mode:\xa0",(0,h.jsx)("select",{value:b,onChange:function(e){var t=e.target.value;N(t)},children:n.map((function(e){return(0,h.jsx)("option",{children:e},e)}))}),n.map((function(e){return(0,h.jsx)("div",{style:{display:b===e?"block":"none"},children:oe[e]},e)}))]})})}}(r||(r={}))},974:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var r,o=n(9439),a=n(2791),i=n(920),l=n(3413),s=n(184);!function(e){var t=e.commonFamilies=[{value:"serif",label:"Serif"},{value:"sans-serif",label:"Sans-serif"},{value:"monospace",label:"Monospace"},{value:"cursive",label:"Cursive"},{value:"fantasy",label:"Fantasy"},{value:"system-ui",label:"System"},{value:"Arial, sans-serif",label:"Arial"},{value:"Helvetica, Arial, sans-serif",label:"Helvetica"},{value:'"Times New Roman", Times, serif',label:"Times New Roman"},{value:"Georgia, serif",label:"Georgia"},{value:"Verdana, Geneva, sans-serif",label:"Verdana"},{value:"Tahoma, Geneva, sans-serif",label:"Tahoma"},{value:'"Courier New", Courier, monospace',label:"Courier New"},{value:'Consolas, "Courier New", monospace',label:"Consolas"}];e.Component=function(e){var n=e.family,r=e.style,u=e.weight,c=e.size,d=e.setFont,f=(0,a.useState)(!1),p=(0,o.Z)(f,2),h=p[0],m=p[1];function v(e){h||x(),d(e),m(!0)}var x=(0,a.useContext)(l._.App.PushToUndoStack);return(0,s.jsxs)(i.z.Component,{title:"Font",children:[(0,s.jsxs)("label",{children:["Family:\xa0",(0,s.jsx)("br",{}),"\xa0\xa0Common Families:\xa0",(0,s.jsxs)("select",{value:t.some((function(e){return e.value===n}))?n:"",onChange:function(e){v({family:e.target.value,style:r,weight:u,size:c})},children:[(0,s.jsx)("option",{value:"",disabled:!0,hidden:!1,children:"Pick One"}),t.map((function(e){var t=e.value,n=e.label;return(0,s.jsx)("option",{value:t,children:n},t)}))]}),(0,s.jsx)("br",{})]}),"\xa0\xa0Custom:\xa0",(0,s.jsx)("input",{type:"text",value:n,onChange:function(e){v({family:e.target.value,style:r,weight:u,size:c})}}),(0,s.jsx)("br",{}),(0,s.jsxs)("label",{children:["Style:\xa0",(0,s.jsx)("input",{type:"text",value:r,onChange:function(e){var t=e.target.value;v({family:n,style:t,weight:u,size:c})}})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("label",{children:["Weight:\xa0",(0,s.jsx)("input",{type:"text",value:u,onChange:function(e){var t=e.target.value;v({family:n,style:r,weight:t,size:c})}})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("label",{children:["Size:\xa0",(0,s.jsx)("input",{type:"text",value:c,onChange:function(e){var t=e.target.value;v({family:n,style:r,weight:u,size:t})}})]})]})}}(r||(r={}))},6768:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var r,o=n(9439),a=n(2791),i=n(7361),l=n(1702),s=n(3413),u=n(184);!function(e){function t(e){var t=e.initialCenter,n=e.positions,r=e.onUpdatePositions,c=e.useDegreesFlag,d=e.normal,f=e.initialAngle,p=e.initialScale,h=e.disabledFlag,m=e.relativePositions,v=e.applyCenterToRelativePositionsFlag,x=(0,a.useContext)(s._.OrientationEditor.ResetDataTrigger),g=(0,a.useContext)(s._.App.PushToUndoStack),y=(0,a.useMemo)((function(){return null!==f&&void 0!==f?f:0}),[f]),b=(0,a.useMemo)((function(){return null!==p&&void 0!==p?p:1}),[p]),N=(0,a.useMemo)((function(){return 1/b}),[b]),E=(0,a.useMemo)((function(){return n.map((function(e){return(0,i.toPolar)((0,i.subtract)(e,t))}))}),[t,n]),I=(0,a.useMemo)((function(){return(null!==m&&void 0!==m?m:[]).map(i.toPolar)}),[m,x]),C=(0,a.useMemo)((function(){return null!==h&&void 0!==h&&h}),[h]),S=(0,a.useState)(y),_=(0,o.Z)(S,2),A=_[0],P=_[1],T=(0,a.useState)(b),R=(0,o.Z)(T,2),M=R[0],w=R[1],k=(0,a.useState)(t.x),O=(0,o.Z)(k,2),L=O[0],j=O[1],D=(0,a.useState)(t.y),Z=(0,o.Z)(D,2),F=Z[0],B=Z[1],U=(0,a.useState)(!1),z=(0,o.Z)(U,2),G=z[0],W=z[1],H=(0,a.useState)(!1),K=(0,o.Z)(H,2),V=K[0],X=K[1];function q(e,t,o,a,l){V||(g(),X(!0));var s=o-y,u=a*N,c={x:e,y:t},f=[{cartesian:n,polar:E,cartesianCenter:c}];void 0!==m&&f.push({cartesian:m,polar:I,cartesianCenter:v?c:{x:0,y:0}});for(var p=0,h=f;p<h.length;p++){for(var x=h[p],b=x.cartesian,C=x.polar,S=x.cartesianCenter,_=0;_<b.length;_++){var A=b[_],P=structuredClone(C[_]);P.angle+=s,P.radius*=u;var T=(0,i.add)((0,i.toCartesian)(P),S);A.x=T.x,A.y=T.y}if(l)for(var R=Math.cos(s),M=Math.sin(s),w={x:d.x*R-d.y*M,y:d.x*M+d.y*R},k=0;k<b.length;k++){var O=b[k],L=(0,i.projectAndReject)((0,i.subtract)(O,S),w),j=(0,i.add)((0,i.subtract)(L.projection,L.rejection),S);O.x=j.x,O.y=j.y}}r(!1)}return(0,a.useRef)().current=M,(0,a.useEffect)((function(){P(y)}),[y]),(0,a.useEffect)((function(){w(b)}),[b]),(0,a.useEffect)((function(){j(t.x),B(t.y)}),[t]),(0,a.useEffect)((function(){W(!1),P(y),w(b),j(t.x),B(t.y)}),[x]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("label",{children:["x:\xa0",(0,u.jsx)(l.Z.Number,{value:L,setValue:function(e){j(e),q(e,F,A,M,G)},disabledFlag:C})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("label",{children:["y:\xa0",(0,u.jsx)(l.Z.Number,{value:F,setValue:function(e){B(e),q(L,e,A,M,G)},disabledFlag:C})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("label",{children:["\u03b8:\xa0",(0,u.jsx)(l.Z.Angle,{value:A,setValue:function(e){P(e),q(L,F,e,M,G)},useDegreesFlag:c,disabledFlag:C})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("label",{children:["scale:\xa0",(0,u.jsx)(l.Z.Number,{value:M,setValue:function(e){q(L,F,A,e,G),w(e)},disabledFlag:C})]}),(0,u.jsx)("br",{}),(0,u.jsx)("button",{onClick:function(){var e=!G;W(e),q(L,F,A,M,e)},disabled:C,children:"Flip"})]})}e.Component=t,e.Simplified=function(e){var n=e.boundingVector0,r=e.boundingVector1,o=e.positions,l=e.onUpdatePositions,c=e.useDegreesFlag,d=e.orthogonalizeHelper,f=e.initialAngle,p=e.initialScale,h=e.disabledFlag,m=e.relativePositions,v=(0,a.useContext)(s._.OrientationEditor.ResetDataTrigger),x=(0,a.useMemo)((function(){return(null!==d&&void 0!==d?d:i.orthogonalizeLeft)((0,i.subtract)(r,n))}),[d,n,r,v]),g=(0,a.useMemo)((function(){return(0,i.scaleUp)((0,i.add)(n,r),.5)}),[n,r,v]);return(0,u.jsx)(t,{initialCenter:g,positions:o,onUpdatePositions:l,useDegreesFlag:c,normal:x,initialAngle:null!==f&&void 0!==f?f:(0,i.asAngle)(x),initialScale:null!==p&&void 0!==p?p:(0,i.distance)(n,r),disabledFlag:h,relativePositions:m})}}(r||(r={}))},1959:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(1413),o=n(9439),a=n(2791),i=n(4164),l=n(7587),s=n(184),u=function(e){var t=e.hint,n=e.position,r=e.theme,o=document.body;return(0,i.createPortal)((0,s.jsx)("div",{style:{position:"fixed",left:"".concat(n.left,"px"),top:"".concat(n.top,"px"),transform:"translate(-30%, -20%)",padding:"6px 10px",borderRadius:"6px",background:r.colors.surface,color:r.colors.text,fontSize:r.typography.fontSize.md,fontWeight:600,whiteSpace:"nowrap",zIndex:1e3,boxShadow:r.shadows.md,animation:"fadeIn 0.2s ease-out",pointerEvents:"none"},children:t}),o)},c=a.forwardRef((function(e,t){var n=e.onClick,i=e.icon,c=e.label,d=e.description,f=e.hint,p=e.disabled,h=void 0!==p&&p,m=e.variant,v=void 0===m?"secondary":m,x=(0,l.Fg)().theme,g=a.useState(!1),y=(0,o.Z)(g,2),b=y[0],N=y[1],E=a.useState(!1),I=(0,o.Z)(E,2),C=I[0],S=I[1],_=a.useRef(null),A=a.useState({top:0,left:0}),P=(0,o.Z)(A,2),T=P[0],R=P[1],M=function(){switch(v){case"primary":return{background:h?x.colors.surfaceHover:C?x.colors.primaryActive:b?x.colors.primaryHover:x.colors.primary,color:x.colors.textInverse,border:"1px solid ".concat(x.colors.primary)};case"accent":return{background:h?x.colors.surfaceHover:C?x.colors.accent:b?x.colors.accentHover:"transparent",color:h?x.colors.textMuted:b?x.colors.accent:x.colors.textSecondary,border:"1px solid ".concat(b?x.colors.accent:x.colors.border)};case"danger":return{background:h?x.colors.surfaceHover:C?x.colors.error:b?x.colors.error+"20":"transparent",color:h?x.colors.textMuted:b?x.colors.error:x.colors.text,border:"1px solid ".concat(b?x.colors.error:x.colors.border)};case"simpleHighlight":return{background:"transparent",color:h?x.colors.textMuted:x.colors.text,border:"2px solid ".concat(x.colors.primary)};default:return{background:h||C||b?x.colors.surfaceHover:"transparent",color:h?x.colors.textMuted:x.colors.text,border:"1px solid ".concat(x.colors.border)}}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{ref:t||_,onClick:n,disabled:h,onMouseEnter:function(){if(_.current&&f&&!h){var e=_.current.getBoundingClientRect();R({top:e.top+e.height+10,left:e.right+10})}N(!0)},onMouseLeave:function(){return N(!1)},onMouseDown:function(){return S(!0)},onMouseUp:function(){return S(!1)},style:(0,r.Z)((0,r.Z)({position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"6px",height:x.buttonSizes.md.height,padding:x.buttonSizes.md.padding,borderRadius:x.buttonSizes.md.borderRadius,fontSize:x.buttonSizes.md.fontSize,fontWeight:"600",cursor:h?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:h?.4:1,flex:1,minWidth:"0"},M),{},{boxShadow:h?"none":C||b?x.shadows.sm:"none",transform:h?"none":C?"scale(0.95)":b?"translateY(-1px)":"translateY(0)"}),children:[(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:x.buttonSizes.md.iconSize,opacity:h?.5:1},children:i&&i}),(0,s.jsxs)("div",{style:{textAlign:"center",opacity:b?1:.9},children:[(0,s.jsx)("div",{style:{fontSize:x.typography.fontSize.sm,fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",maxWidth:"120px",opacity:b?1:.9},children:c}),d&&(0,s.jsx)("div",{style:{fontSize:x.typography.fontSize.xs,color:h?x.colors.textMuted:"primary"===v?x.colors.textInverse+"80":x.colors.textMuted,lineHeight:"1.2",maxWidth:"120px",opacity:b?1:.9},children:d})]})]}),b&&f&&!h&&(0,s.jsx)(u,{hint:f,position:T,theme:x})]})}))},6902:function(e,t,n){"use strict";n.d(t,{T:function(){return s},Z:function(){return u}});n(2791);var r=n(700),o=(0,r.Z)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),a=(0,r.Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i=n(7587),l=n(184),s=function(e){var t=(0,i.Fg)(),n=t.theme,r=t.isDarkMode,s=t.toggleTheme;return(0,l.jsx)("button",{onClick:s,className:"minimal-theme-toggle ".concat(e.className||""),style:{background:"transparent",border:"none",color:n.colors.textSecondary,fontSize:n.typography.fontSize.md,cursor:"pointer",padding:n.spacing.sm,borderRadius:n.borderRadius.md,transition:n.transitions.default,outline:"none"},onMouseEnter:function(e){e.currentTarget.style.color=n.colors.text,e.currentTarget.style.background=n.colors.surfaceHover},onMouseLeave:function(e){e.currentTarget.style.color=n.colors.textSecondary,e.currentTarget.style.background="transparent"},onFocus:function(e){e.currentTarget.style.boxShadow="0 0 0 2px ".concat(n.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.boxShadow="none"},title:r?"Switch to Light Mode":"Switch to Dark Mode",children:r?(0,l.jsx)(o,{size:18}):(0,l.jsx)(a,{size:18})})},u=s},3413:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r,o=n(1413),a=n(7762),i=n(2791),l=n(7089),s=n(9750),u=n(9967),c=n(6176),d=n(7587),f=n(184);!function(e){var t,n,r,p,h,m,v,x,g,y,b,N;function E(e){var n=e.children,r=e.settingsRecord,a=e.setSettingsRecord,i=e.basePairOnMouseDownHelper,l=e.labelClassName,s=e.basePairClassName,u=e.pushToUndoStack,c=e.basePairRadius,p=e.indicesOfFrozenNucleotides,h=e.labelContentDefaultStyles,m=e.basePairAverageDistances,x=e.updateBasePairAverageDistances,b=e.updateLabelContentDefaultStyles,N=e.interactionConstraintOptions,E=e.updateInteractionConstraintOptions,I=e.setNucleotideKeysToRerender,C=e.setBasePairKeysToRerender,S=e.updateRnaMoleculeNameHelper,_=e.setBasePairKeysToEdit,A=e.singularRnaComplexFlag,P=e.averageNucleotideBoundingRectHeight;return(0,f.jsx)(d.f6,{settingsRecord:r,updateSettings:function(e){var t=(0,o.Z)((0,o.Z)({},r),e);a(t)},children:(0,f.jsx)(g.OnMouseDownHelper.Provider,{value:i,children:(0,f.jsx)(t.PushToUndoStack.Provider,{value:u,children:(0,f.jsx)(t.IndicesOfFrozenNucleotides.Provider,{value:p,children:(0,f.jsx)(y.ClassName.Provider,{value:l,children:(0,f.jsx)(g.ClassName.Provider,{value:s,children:(0,f.jsx)(g.Radius.Provider,{value:c,children:(0,f.jsx)(g.AverageDistances.Provider,{value:m,children:(0,f.jsx)(g.UpdateAverageDistances.Provider,{value:x,children:(0,f.jsx)(y.Content.DefaultStyles.Provider,{value:h,children:(0,f.jsx)(y.Content.UpdateDefaultStyle.Provider,{value:b,children:(0,f.jsx)(t.InteractionConstraintOptions.Provider,{value:N,children:(0,f.jsx)(t.UpdateInteractionConstraintOptions.Provider,{value:E,children:(0,f.jsx)(v.SetKeysToRerender.Provider,{value:I,children:(0,f.jsx)(g.SetKeysToRerender.Provider,{value:C,children:(0,f.jsx)(t.Settings.Provider,{value:r,children:(0,f.jsx)(t.UpdateRnaMoleculeNameHelper.Provider,{value:S,children:(0,f.jsx)(g.SetKeysToEdit.Provider,{value:_,children:(0,f.jsx)(t.SingularRnaComplexFlag.Provider,{value:A,children:(0,f.jsx)(v.AverageBoundingRectHeight.Provider,{value:P,children:n})})})})})})})})})})})})})})})})})})})})}(n=t||(t=e.App||(e.App={}))).SetMouseOverText=(0,i.createContext)((function(e){})),n.Settings=(0,i.createContext)(s.Z),n.ComplexDocumentName=(0,i.createContext)(""),n.SetComplexDocumentName=(0,i.createContext)((function(e){})),n.UpdateRnaMoleculeNameHelper=(0,i.createContext)((function(e,t,n){})),n.InteractionConstraintOptions=(0,i.createContext)(u.Uq.DEFAULT_OPTIONS),n.UpdateInteractionConstraintOptions=(0,i.createContext)((function(e){})),n.IndicesOfFrozenNucleotides=(0,i.createContext)({}),n.PushToUndoStack=(0,i.createContext)((function(){})),n.RnaComplexProps=(0,i.createContext)(void 0),n.SingularRnaComplexFlag=(0,i.createContext)(void 0),(p=r||(r=e.RnaComplex||(e.RnaComplex={}))).Name=(0,i.createContext)(""),p.Index=(0,i.createContext)(NaN),p.BasePairs=(0,i.createContext)({}),p.SingularRnaMoleculeFlag=(0,i.createContext)(void 0),(m=h||(h=e.RnaMolecule||(e.RnaMolecule={}))).Name=(0,i.createContext)(""),m.FirstNucleotideIndex=(0,i.createContext)(NaN),(x=v||(v=e.Nucleotide||(e.Nucleotide={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t){})),x.OnMouseOverHelper=(0,i.createContext)((function(e,t){})),x.Index=(0,i.createContext)(NaN),x.SetKeysToRerender=(0,i.createContext)((function(e){})),x.LabelsOnlyFlag=(0,i.createContext)(!1),x.Symbol=(0,i.createContext)(""),x.AverageBoundingRectHeight=(0,i.createContext)(0),function(e){e.ClassName=(0,i.createContext)(void 0);var t,n=e.DEFAULT_RADIUS=1,r=e.DEFAULT_DISTANCES={},o=(0,a.Z)(l.BasePair.types);try{for(o.s();!(t=o.n()).done;){r[t.value]=12*n}}catch(s){o.e(s)}finally{o.f()}e.Radius=(0,i.createContext)(n),e.DataToEditPerRnaComplex=(0,i.createContext)({add:[],delete:[]}),e.SetKeysToEdit=(0,i.createContext)((function(e){})),e.SetKeysToRerender=(0,i.createContext)((function(e){})),e.UpdateAverageDistances=(0,i.createContext)((function(e,t){})),e.AverageDistances=(0,i.createContext)({}),e.AverageStrokeWidth=(0,i.createContext)(c.DEFAULT_STROKE_WIDTH),e.OnMouseDownHelper=(0,i.createContext)((function(e,t,n){}))}(g||(g=e.BasePair||(e.BasePair={}))),function(e){var t,n,r;e.ClassName=(0,i.createContext)(void 0);(n=t||(t=e.Content||(e.Content={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t){})),n.DefaultStyles=(0,i.createContext)({}),n.UpdateDefaultStyle=(0,i.createContext)((function(e,t,n){})),function(e){var t,n;(t||(t=e.Body||(e.Body={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n){})),(n||(n=e.Endpoint||(e.Endpoint={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n,r){}))}(r||(r=e.Line||(e.Line={})))}(y||(y=e.Label||(e.Label={}))),(b||(b=e.OrientationEditor||(e.OrientationEditor={}))).ResetDataTrigger=(0,i.createContext)(!1),(N||(N=e.Collapsible||(e.Collapsible={}))).Width=(0,i.createContext)(void 0),e.Component=E;e.MemoizedComponent=i.memo(E)}(r||(r={}))},7587:function(e,t,n){"use strict";n.d(t,{Fg:function(){return h},f6:function(){return p}});var r=n(4942),o=n(9439),a=n(2791),i=n(9750),l=n(184),s="#7491C8",u="#A47764",c={colors:{primary:s,primaryHover:"#6683BA",primaryActive:"#5A78AF",background:"#EFE8E0",backgroundSecondary:"#EAE2DA",surface:"#F4EEE7",surfaceHover:"#EDE5DD",border:"#D9CFC8",borderLight:"#E7DFD7",borderDark:"#C9BFB7",text:"#2C2320",textSecondary:"#5B4E48",textMuted:"#8E847E",textInverse:"#FFFFFF",success:"#899F6A",warning:"#D1A56C",error:"#C96B5A",info:s,accent:u,accentHover:"#8F6657",shadow:"rgba(61, 35, 19, 0.06)",overlay:"rgba(40, 26, 18, 0.40)",highlight:"#F2E9E2",successLight:"#EDF2E6",warningLight:"#FFF1DB",errorLight:"#F6E6E4",infoLight:"#E8EFF9",textStrong:"#1E1512",textWeak:"#A09088",surfaceStrong:"#E5DBD3",surfaceWeak:"#FAF7F2"},spacing:{xs:"4px",sm:"8px",md:"12px",lg:"16px",xl:"20px",xxl:"24px",xxxl:"32px"},typography:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:{xs:"12px",sm:"13px",md:"15px",lg:"17px",xl:"19px",xxl:"22px"},fontWeight:{light:"300",normal:"400",medium:"500",semibold:"600",bold:"700"},lineHeight:{tight:"1.3",normal:"1.6",relaxed:"1.8"}},borderRadius:{none:"0",sm:"4px",md:"8px",lg:"10px",xl:"14px",full:"9999px"},shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.05), 0 1px 1px rgba(0,0,0,0.03)",md:"0 3px 8px rgba(16,24,20,0.08)",lg:"0 8px 20px rgba(16,24,20,0.10)",xl:"0 16px 32px rgba(16,24,20,0.12)",inner:"inset 0 2px 4px rgba(0,0,0,0.04)"},buttonSizes:{sm:{height:"30px",padding:"0 10px",fontSize:"13px",iconSize:"16px",borderRadius:"6px"},md:{height:"38px",padding:"0 14px",fontSize:"15px",iconSize:"18px",borderRadius:"8px"},lg:{height:"46px",padding:"0 18px",fontSize:"17px",iconSize:"20px",borderRadius:"10px"}},transitions:{default:"all 0.18s ease-out",fast:"all 0.12s ease-out",slow:"all 0.28s ease-out"},colorPalleteCircleFills:["#E8C26A","#A9E890","#E890C0"]},d={colors:{primary:"#C89B85",primaryHover:"#BE8F79",primaryActive:"#B4836D",background:"#25211F",backgroundSecondary:"#292421",surface:"#2E2826",surfaceHover:"#352E2B",border:"#3A332F",borderLight:"#473F3B",borderDark:"#2E2724",text:"#F3EEEA",textSecondary:"#D9CFC8",textMuted:"#B7AAA4",textInverse:"#0F0E0D",success:"#94B17E",warning:"#D2A274",error:"#C77C6F",info:"#A1BDE6",accent:u,accentHover:"#B78976",shadow:"rgba(0, 0, 0, 0.45)",overlay:"rgba(14, 10, 8, 0.68)",highlight:"#302A27",successLight:"#1E261C",warningLight:"#272016",errorLight:"#261A18",infoLight:"#182231",textStrong:"#FAF7F4",textWeak:"#B9ADA7",surfaceStrong:"#292421",surfaceWeak:"#352E2B"},spacing:c.spacing,typography:c.typography,borderRadius:c.borderRadius,shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.22)",md:"0 4px 10px rgba(0,0,0,0.32)",lg:"0 10px 24px rgba(0,0,0,0.38)",xl:"0 18px 40px rgba(0,0,0,0.44)",inner:"inset 0 2px 4px rgba(0,0,0,0.28)"},buttonSizes:c.buttonSizes,transitions:c.transitions,colorPalleteCircleFills:["#4E7DA6","#7A9E3E","#C84E4E"]},f=(0,a.createContext)(void 0),p=function(e){var t=e.children,n=e.settingsRecord,s=e.updateSettings,u=(0,a.useState)(!1),p=(0,o.Z)(u,2),h=p[0],m=p[1],v=a.useRef(h);v.current=h;var x=a.useRef(s);x.current=s,(0,a.useEffect)((function(){if(n&&void 0!==n[i.pE.DARK_MODE])m(!!n[i.pE.DARK_MODE]);else if("undefined"!==typeof window&&window.matchMedia){var e=window.matchMedia("(prefers-color-scheme: dark)");m(e.matches)}}),[n]),(0,a.useEffect)((function(){var e;if((!n||void 0===n[i.pE.DARK_MODE])&&"undefined"!==typeof window&&window.matchMedia){var t=window.matchMedia("(prefers-color-scheme: dark)"),r=function(e){return m(e.matches)};return null===(e=t.addEventListener)||void 0===e||e.call(t,"change",r),function(){var e;return null===(e=t.removeEventListener)||void 0===e?void 0:e.call(t,"change",r)}}}),[n]);var g=(0,a.useCallback)((function(e){var t=x.current;m(e),t&&t((0,r.Z)({},i.pE.DARK_MODE,e))}),[]),y=(0,a.useCallback)((function(){return g(!v.current)}),[]),b=h?d:c;(0,a.useEffect)((function(){var e=document.documentElement,t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce((function(r,o){var a=n.length?n+"-":"";return"object"===typeof t[o]&&null!==t[o]?Object.assign(r,e(t[o],a+o)):r[a+o]=t[o],r}),{})},n={color:b.colors,spacing:b.spacing,"font-size":b.typography.fontSize,"font-weight":b.typography.fontWeight,"line-height":b.typography.lineHeight,"border-radius":b.borderRadius,shadow:b.shadows,transition:b.transitions};Object.entries(n).forEach((function(n){var r=(0,o.Z)(n,2),a=r[0],i=r[1],l=t(i);Object.entries(l).forEach((function(t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];e.style.setProperty("--".concat(a,"-").concat(r),i)}))})),e.style.setProperty("--font-family",b.typography.fontFamily),e.setAttribute("data-theme",h?"dark":"light")}),[b,h]);var N=(0,a.useMemo)((function(){return{theme:b,isDarkMode:h,toggleTheme:y,setTheme:g}}),[b,h,y,g]);return(0,l.jsx)(f.Provider,{value:N,children:t})},h=function(){var e=(0,a.useContext)(f);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}},6745:function(e,t){"use strict";t.__esModule=!0,t.affineMatrixToString=t.identity=t.transformVector=t.parseAffineMatrix=t.multiplyAffineMatrices=void 0,t.multiplyAffineMatrices=function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],l=e[5],s=t[0],u=t[1],c=t[2],d=t[3],f=t[4],p=t[5];return[n*s+o*u,r*s+a*u,n*c+o*d,r*c+a*d,n*f+o*p+i,r*f+a*p+l]};var n={minimum:1,maximum:1,parser:function(e){var t=e[0],n=Math.cos(t),r=Math.sin(t);return[n,r,-r,n,0,0]}},r={matrix:{minimum:6,maximum:6,parser:function(e){return e}},translate:{minimum:2,maximum:2,parser:function(e){return[1,0,0,1,e[0],e[1]]}},translatex:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,e[0],0]}},translatey:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,0,e[0]]}},scale:{minimum:1,maximum:2,parser:function(e){var t=e[0],n=t;return e.length>1&&(n=e[1]),[t,0,0,n,0,0]}},scalex:{minimum:1,maximum:1,parser:function(e){return[e[0],0,0,1,0,0]}},scaley:{minimum:1,maximum:1,parser:function(e){return[1,0,0,e[0],0,0]}},rotate:n,rotatez:n,skew:{minimum:1,maximum:2,parser:function(e){var t=e[0],n=0;return e.length>1&&(n=Math.tan(e[1])),[1,n,Math.tan(t),1,0,0]}},skewx:{minimum:1,maximum:1,parser:function(e){return[1,0,Math.tan(e[0]),1,0,0]}},skewy:{maximum:1,minimum:1,parser:function(e){return[1,Math.tan(e[0]),0,1,0,0]}}};t.parseAffineMatrix=function(e){var t=(e=e.toLowerCase()).match(/^\s*([a-z]+)\s*\(([\d.,\s-e]+)\)\s*$/);if(null==t)throw"Unrecognized input-text format";var n=t[1];if(!(n in r))throw"Unrecognized transform type.";var o=r[n],a=o.minimum,i=o.maximum,l=o.parser,s=t[2],u=(s=(s=(s=s.trim()).replaceAll(/\s*,\s*/g,",")).replaceAll(/\s+/g,",")).split(",").map(Number.parseFloat),c=u.length;if(c<a)throw"The number of input numbers (".concat(c,") is less than the minimum required (").concat(a,")");if(c>i)throw"The number of input numbers (".concat(c,") is greater than the maximum required (").concat(i,")");return l(u)},t.transformVector=function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],l=e[5],s=t.x,u=t.y;return{x:n*s+o*u+i,y:r*s+a*u+l}},t.identity=function(){return[1,0,0,1,0,0]},t.affineMatrixToString=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5];return"matrix(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,", ").concat(a,", ").concat(i,")")}},3871:function(e,t,n){"use strict";n.r(t),n.d(t,{BLACK:function(){return d},BRIGHT_GRAY:function(){return f},CHARCOAL_GRAY:function(){return p},ColorFormat:function(){return i},DEFAULT_ALPHA:function(){return u},DEFAULT_COLOR_FORMAT:function(){return c},FOREST_GREEN:function(){return h},HandleUndefined:function(){return b},areEqual:function(){return E},byteMaps:function(){return s},colorFormats:function(){return l},fromCssString:function(){return N},fromHexadecimal:function(){return v},fromNumber:function(){return x},toCSS:function(){return m},toHexadecimal:function(){return y},toNumber:function(){return g}});var r,o=n(1413),a=n(4942),i=function(e){return e.RGB="RGB",e.RGBA="RGBA",e.ARGB="ARGB",e.BGR="BGR",e.BGRA="BGRA",e.ABGR="ABGR",e}({}),l=Object.values(i),s=(r={},(0,a.Z)(r,i.RGB,{red:2,green:1,blue:0}),(0,a.Z)(r,i.RGBA,{red:3,green:2,blue:1,alpha:0}),(0,a.Z)(r,i.ARGB,{red:2,green:1,blue:0,alpha:3}),(0,a.Z)(r,i.BGR,{red:0,green:1,blue:2}),(0,a.Z)(r,i.BGRA,{red:1,green:2,blue:3,alpha:0}),(0,a.Z)(r,i.ABGR,{red:0,green:1,blue:2,alpha:3}),r),u=255,c=i.RGB,d={red:0,green:0,blue:0,alpha:u},f={red:192,green:192,blue:192,alpha:u},p={red:54,green:64,blue:79},h={red:1,green:68,blue:33};function m(e){var t="".concat(e.red,", ").concat(e.green,", ").concat(e.blue);return null==e.alpha||Number.isNaN(e.alpha)||255===e.alpha?"rgb(".concat(t,")"):"rgba(".concat(t,", ").concat(e.alpha/255,")")}function v(e,t){return x(Number.parseInt(e,16),t)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n={0:255&e,1:e>>>8&255,2:e>>>16&255,3:e>>>24&255},r=s[t],a={red:n[r.red],green:n[r.green],blue:n[r.blue]};return void 0!==r.alpha&&(a=(0,o.Z)((0,o.Z)({},a),{},{alpha:n[r.alpha]})),a}function g(e,t){var n=s[t],r=void 0===n.alpha||void 0===e.alpha?0:e.alpha<<8*n.alpha;return e.red<<8*n.red|e.green<<8*n.green|e.blue<<8*n.blue|r}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(e,t).toString(16).toUpperCase();return n?"0".repeat(2*t.length-r.length)+r:r}var b=function(e){return e.THROW_ERROR="throw error",e.RETURN_BLACK="return black",e.RETURN_TRANSPARENT="return transparent",e}({});function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.RETURN_BLACK,r=/^rgb\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})\)$/.exec(e);if(null!==r)return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3])};if(null!==(r=/^rgba\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^rgb\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3])};if(null!==(r=/^rgba\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^\d+$/.exec(e)))return x(Number.parseInt(r[0]),t);if(null!==(r=/^#([abcdefABCDEF\d]+)$/.exec(e)))return v(r[1],t);if("undefined"===e)switch(n){case b.RETURN_BLACK:return d;case b.RETURN_TRANSPARENT:return{red:0,green:0,blue:0,alpha:0};case b.THROW_ERROR:throw'Unsupported color literal "'.concat(e,'"');default:throw"Unhandled switch case"}switch(e){case"none":return{red:0,blue:0,green:0,alpha:0};case"black":return{red:0,green:0,blue:0};case"silver":case"silver":return{red:192,green:192,blue:192};case"gray":return{red:128,green:128,blue:128};case"white":case"white":return{red:255,green:255,blue:255};case"maroon":case"maroon":return{red:128,green:0,blue:0};case"red":case"red":return{red:255,green:0,blue:0};case"purple":case"pruple":return{red:128,green:0,blue:128};case"fuchsia":case"magenta":return{red:255,green:0,blue:255};case"green":return{red:0,green:128,blue:0};case"lime":case"lime":return{red:0,green:255,blue:0};case"olive":case"olive":return{red:128,green:128,blue:0};case"yellow":case"yellow":return{red:255,green:255,blue:0};case"navy":case"navy":return{red:0,green:0,blue:128};case"blue":return{red:0,green:0,blue:255};case"teal":case"teal":return{red:0,green:128,blue:128};case"aqua":case"cyan":return{red:0,green:255,blue:255};case"aliceblue":return{red:240,green:248,blue:255};case"antiquewhite":return{red:250,green:235,blue:215};case"aquamarine":return{red:127,green:255,blue:212};case"azure":return{red:240,green:255,blue:255};case"beige":return{red:245,green:245,blue:220};case"bisque":return{red:255,green:228,blue:196};case"blanchedalmond":return{red:255,green:235,blue:205};case"blueviolet":return{red:138,green:43,blue:226};case"brown":return{red:165,green:42,blue:42};case"burlywood":return{red:222,green:184,blue:135};case"cadetblue":return{red:95,green:158,blue:160};case"chartreuse":return{red:127,green:255,blue:0};case"chocolate":return{red:210,green:105,blue:30};case"coral":return{red:255,green:127,blue:80};case"cornflowerblue":return{red:100,green:149,blue:237};case"cornsilk":return{red:255,green:248,blue:220};case"crimson":return{red:220,green:20,blue:60};case"darkblue":return{red:0,green:0,blue:139};case"darkcyan":return{red:0,green:139,blue:139};case"darkgoldenrod":return{red:184,green:134,blue:11};case"darkgreen":return{red:0,green:100,blue:0};case"darkkhaki":return{red:189,green:183,blue:107};case"darkmagenta":return{red:139,green:0,blue:139};case"darkolivegreen":return{red:85,green:107,blue:47};case"darkorange":return{red:255,green:140,blue:0};case"darkorchid":return{red:139,green:0,blue:0};case"darksalmon":return{red:233,green:150,blue:122};case"darkseagreen":return{red:143,green:188,blue:143};case"darkslateblue":return{red:72,green:61,blue:139};case"darkslategray":return{red:47,green:79,blue:79};case"darkturqoise":return{red:0,green:206,blue:209};case"darkviolet":return{red:148,green:0,blue:211};case"deeppink":return{red:255,green:20,blue:147};case"deepskyblue":return{red:0,green:191,blue:255};case"dimgray":return{red:105,green:105,blue:105};case"dodgerblue":return{red:30,green:144,blue:255};case"firebrick":return{red:178,green:34,blue:34};case"floralwhite":return{red:255,green:250,blue:240};case"forestgreen":return{red:34,green:139,blue:34};case"gainsboro":return{red:220,green:220,blue:220};case"ghostwhite":return{red:248,green:248,blue:255};case"gold":return{red:255,green:215,blue:0};case"goldenrod":return{red:218,green:165,blue:32};case"greenyellow":return{red:173,green:255,blue:47};case"honeydew":return{red:240,green:255,blue:240};case"hotpink":return{red:255,green:105,blue:180};case"indianred":return{red:205,green:92,blue:92};case"indigo":return{red:75,green:0,blue:130};case"ivory":return{red:255,green:255,blue:240};case"khaki":return{red:240,green:230,blue:140};case"lavender":return{red:230,green:230,blue:250};case"lavenderblush":return{red:255,green:240,blue:245};case"lawngreen":return{red:124,green:252,blue:0};case"lemonchiffon":return{red:255,green:250,blue:205};case"lightblue":return{red:173,green:216,blue:230};case"lightcoral":return{red:240,green:128,blue:128};case"lightcyan":return{red:224,green:255,blue:255};case"lightgoldenrodyellow":return{red:250,green:250,blue:210};case"lightgray":case"lightgrey":return{red:211,green:211,blue:211};case"lightgreen":return{red:148,green:238,blue:144};case"lightpink":return{red:255,green:182,blue:193};case"lightsalmon":return{red:255,green:160,blue:122};case"lightseagreen":return{red:32,green:178,blue:170};case"lightskyblue":return{red:135,green:206,blue:250};case"lightslategray":case"lightslategrey":return{red:119,green:136,blue:153};case"lightsleetblue":return{red:176,green:196,blue:222};case"lightyellow":return{red:255,green:255,blue:224};case"limegreen":return{red:50,green:205,blue:50};case"linen":return{red:250,green:240,blue:230};case"mediumaquamarine":return{red:102,green:205,blue:170};case"mediumblue":return{red:0,green:0,blue:205};case"mediumorchid":return{red:186,green:85,blue:211};case"mediumpruple":return{red:147,green:112,blue:219};case"mediumseagreen":return{red:60,green:179,blue:113};case"mediumslateblue":return{red:123,green:104,blue:238};case"mediumspringgreen":return{red:0,green:250,blue:154};case"mediumturquiose":return{red:72,green:209,blue:204};case"mediumvioletred":return{red:199,green:21,blue:133};case"midnightblue":return{red:25,green:25,blue:112};case"mintcream":return{red:245,green:255,blue:250};case"mistyrose":return{red:255,green:228,blue:225};case"moccasin":return{red:255,green:228,blue:181};case"navajowhite":return{red:255,green:222,blue:173};case"oldlace":return{red:253,green:245,blue:230};case"olivedrab":return{red:107,green:142,blue:35};case"orange":return{red:255,green:165,blue:0};case"orangered":return{red:255,green:69,blue:0};case"orchid":return{red:218,green:112,blue:214};case"palegoldenrod":return{red:238,green:232,blue:170};case"palegreen":return{red:152,green:251,blue:152};case"paleturquoise":return{red:175,green:238,blue:238};case"palevioletred":return{red:219,green:112,blue:147};case"papayawhip":return{red:255,green:239,blue:213};case"peachpuff":return{red:255,green:218,blue:185};case"peru":return{red:205,green:133,blue:63};case"pink":return{red:255,green:192,blue:203};case"plum":return{red:221,green:160,blue:221};case"powderblue":return{red:176,green:224,blue:230};case"rosybrown":return{red:188,green:143,blue:143};case"royalblue":return{red:65,green:105,blue:225};case"saddlebrown":return{red:139,green:69,blue:19};case"salmon":return{red:250,green:128,blue:114};case"sandybrown":return{red:244,green:264,blue:96};case"seagreen":return{red:46,green:139,blue:87};case"seashell":return{red:255,green:245,blue:238};case"sienna":return{red:160,green:82,blue:45};case"skyblue":return{red:135,green:206,blue:235};case"slateblue":return{red:106,green:80,blue:205};case"slategray":case"slategrey":return{red:112,green:128,blue:144};case"snow":return{red:255,green:250,blue:250};case"springgreen":return{red:0,green:255,blue:127};case"steelblue":return{red:70,green:130,blue:180};case"tan":return{red:210,green:180,blue:140};case"thistle":return{red:216,green:191,blue:216};case"tomato":return{red:255,green:99,blue:71};case"turquoise":return{red:64,green:224,blue:208};case"violet":return{red:238,green:130,blue:238};case"wheat":return{red:245,green:222,blue:179};case"yellowgreen":return{red:154,green:205,blue:50};default:throw"Unsupported color literal: ".concat(e)}}function E(e,t){return e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha}},433:function(e,t,n){"use strict";n.r(t),n.d(t,{PartialFont:function(){return l},parseFontSize:function(){return s}});var r=n(136),o=n(516),a=n(5671),i=n(3144),l=function(){function e(t,n,r){(0,a.Z)(this,e),this.family=void 0,this.style=void 0,this.weight=void 0,this.family=t,this.style=n,this.weight=r}return(0,i.Z)(e,null,[{key:"fromFontId",value:function(t){switch(t){case 0:default:return new e("Helvetica","normal","normal");case 1:return new e("Helvetica","italic","normal");case 2:return new e("Helvetica","normal","bold");case 3:return new e("Helvetica","italic","bold");case 4:case 12:return new e("TimesRoman","normal","normal");case 5:return new e("TimesRoman","italic","normal");case 6:return new e("TimesRoman","normal","bold");case 7:return new e("TimesRoman","italic","bold");case 8:return new e("Courier","normal","normal");case 9:return new e("Courier","italic","normal");case 10:return new e("Courier","normal","bold");case 11:return new e("Courier","italic","bold");case 13:return new e("Dialog","normal","normal");case 14:return new e("Dialog","italic","normal");case 15:return new e("Dialog","normal","bold");case 16:return new e("Dialog","italic","bold");case 17:return new e("DialogInput","normal","normal");case 18:return new e("DialogInput","italic","normal");case 19:return new e("DialogInput","normal","bold");case 20:return new e("DialogInput","italic","bold")}}},{key:"toFontId",value:function(e){switch("".concat(e.family,"_").concat(e.style,"_").concat(e.weight)){default:case"Helvetica_normal_normal":return 0;case"Helvetica_italic_normal":return 1;case"Helvetica_normal_bold":return 2;case"Helvetica_italic_bold":return 3;case"TimesRoman_normal_normal":return 4;case"TimesRoman_italic_normal":return 5;case"TimesRoman_normal_bold":return 6;case"TimesRoman_italic_bold":return 7;case"Courier_normal_normal":return 8;case"Courier_italic_normal":return 9;case"Courier_normal_bold":return 10;case"Courier_italic_bold":return 11;case"TimesRoman_normal_normal":return 12;case"Dialog_normal_normal":return 13;case"Dialog_italic_normal":return 14;case"Dialog_normal_bold":return 15;case"Dialog_italic_bold":return 16;case"DialogInput_normal_normal":return 17;case"DialogInput_italic_normal":return 18;case"DialogInput_normal_bold":return 19;case"DialogInput_italic_bold":return 20}}},{key:"areEqual",value:function(e,t){return e.family===t.family&&e.weight===t.weight&&e.style===t.style}}]),e}();function s(e){var t=e.match(/^([\d.]+)/);if(null===t)throw"Unrecognized font-size format ".concat(e);return Number.parseFloat(t[1])}l.DEFAULT_FONT_ID=0,l.DEFAULT=l.fromFontId(l.DEFAULT_FONT_ID);var u=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,o){var i,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.DEFAULT_SIZE;return(0,a.Z)(this,n),(i=t.call(this,e,r,o)).size=void 0,i.size=l,i}return(0,i.Z)(n,null,[{key:"fromPartialFont",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_SIZE;return new n(e.family,e.style,e.weight,t)}},{key:"fromFontId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_SIZE;return n.fromPartialFont(l.fromFontId(e),t)}},{key:"areEqual",value:function(e,t){return e.family===t.family&&e.style===t.style&&e.weight===t.weight&&e.size===t.size}}]),n}(l);u.DEFAULT_SIZE=8,u.DEFAULT=u.fromPartialFont(l.DEFAULT,u.DEFAULT_SIZE),t.default=u},4838:function(e,t,n){"use strict";t.Yq=void 0;var r=n(7457),o=n(7361);function a(e,t,n){return void 0===n&&(n=(0,o.crossProduct)(e.direction,t.direction)),(0,o.crossProduct)((0,o.subtract)(t.anchor,e.anchor),t.direction)/n}function i(e,t){return(0,o.add)(e.anchor,(0,o.scaleUp)(e.direction,t))}function l(e,t,n){var r={anchor:(0,o.scaleUp)((0,o.add)(t,n),.5),direction:(0,o.orthogonalize)((0,o.subtract)(t,n))},l=i(r,a(r,{anchor:(0,o.scaleUp)((0,o.add)(e,n),.5),direction:(0,o.orthogonalize)((0,o.subtract)(e,n))}));return{center:l,radius:(0,o.distance)(l,e)}}t.Yq=function(e,t,n){var a=(0,o.subtract)(t,n),i=(0,o.subtract)(e,n);if(0===(0,r.sign)((0,o.crossProduct)(a,i))){var s=0,u=[a,i,(0,o.subtract)(t,e)].map(o.magnitudeSquared).reduce((function(e,t,n){return t>=e?(s=n,t):e})),c=.5*Math.sqrt(u),d=void 0;switch(s){case 0:d=[t,n];break;case 1:d=[e,n];break;case 2:d=[e,t];break;default:throw"This state should be impossible."}return{center:(0,o.scaleUp)((0,o.add)(d[0],d[1]),.5),radius:c}}return l(e,t,n)}},7361:function(e,t,n){"use strict";t.__esModule=!0,t.distanceSquaredBetweenVector2DAndLineSegment=t.rotationDirection=t.projectAndRejectUsingNormalDirection=t.rejectUsingNormalDirection=t.projectUsingNormalDirection=t.projectAndReject=t.reject=t.project=t.scalarProject=t.angleBetweenNormalVectors=t.angleBetween=t.toPolar=t.toCartesian=t.toNormalCartesian=t.asAngle=t.crossProduct=t.dotProduct=t.distance=t.distanceSquared=t.magnitude=t.magnitudeSquared=t.interpolate=t.orthogonalize=t.orthogonalizeLeft=t.orthogonalizeRight=t.normalize=t.scaleDown=t.scaleUp=t.negate=t.subtract=t.add=void 0;var r=n(7457);function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}function a(e,t){return{x:e.x*t,y:e.y*t}}function i(e,t){return a(e,1/t)}function l(e){var t=e.x;return{x:-e.y,y:t}}function s(e,t,n){var r=1-n;return{x:r*e.x+n*t.x,y:r*e.y+n*t.y}}function u(e){var t=e.x,n=e.y;return t*t+n*n}function c(e){return Math.sqrt(u(e))}function d(e,t){return u(o(e,t))}function f(e,t){return c(o(e,t))}function p(e,t){return e.x*t.x+e.y*t.y}function h(e,t){return e.x*t.y-e.y*t.x}function m(e){var t=e.x,n=e.y;return Math.atan2(n,t)}function v(e){return{x:Math.cos(e),y:Math.sin(e)}}function x(e,t){return a(t,p(e,t)/u(t))}function g(e,t){return a(t,p(e,t))}t.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.subtract=o,t.negate=function(e){return{x:-e.x,y:-e.y}},t.scaleUp=a,t.scaleDown=i,t.normalize=function(e){return i(e,c(e))},t.orthogonalizeRight=function(e){var t=e.x;return{x:e.y,y:-t}},t.orthogonalizeLeft=l,t.orthogonalize=l,t.interpolate=s,t.magnitudeSquared=u,t.magnitude=c,t.distanceSquared=d,t.distance=f,t.dotProduct=p,t.crossProduct=h,t.asAngle=m,t.toNormalCartesian=v,t.toCartesian=function(e){return a(v(e.angle),e.radius)},t.toPolar=function(e){return{radius:c(e),angle:m(e)}},t.angleBetween=function(e,t){return Math.acos(p(e,t)/Math.sqrt(u(e)*u(t)))},t.angleBetweenNormalVectors=function(e,t){return Math.acos(p(e,t))},t.scalarProject=function(e,t){return p(e,t)/c(t)},t.project=x,t.reject=function(e,t){return o(e,x(e,t))},t.projectAndReject=function(e,t){var n=x(e,t);return{projection:n,rejection:o(e,n)}},t.projectUsingNormalDirection=g,t.rejectUsingNormalDirection=function(e,t){return o(e,g(e,t))},t.projectAndRejectUsingNormalDirection=function(e,t){var n=g(e,t);return{projection:n,rejection:o(e,n)}},t.rotationDirection=function(e,t){return(0,r.sign)(h(e,t))},t.distanceSquaredBetweenVector2DAndLineSegment=function(e,t,n){void 0===n&&(n=r.DEFAULT_EPSILON*r.DEFAULT_EPSILON);var a=o(t.v1,t.v0);if(u(a)>=n)return f(e,t.v0);var i=p(o(e,t.v0),a);return i<0?i=0:i>1&&(i=1),d(e,s(t.v0,t.v1,i))}},814:function(e,t,n){"use strict";t.__esModule=!0,t.dotBracketInputFileHandler=void 0;var r=n(9287),o=n(6048),a="Dot-bracket import",i=40,l=6,s={"(":")","[":"]","{":"}","<":">"},u=Object.entries(s).reduce((function(e,t){var n=t[0];return e[t[1]]=n,e}),{});function c(e){return e.replace(/\s+/g,"").toUpperCase()}t.dotBracketInputFileHandler=function(e){var t=function(e){for(var t=e.split(/\r?\n/),n=new Array,r=a,o=0;o<t.length;){var i=t[o].trim();if(0!==i.length)if(i.startsWith("#"))r===a&&i.length>1&&(r=i.substring(1).trim()||a),o++;else{if(!i.startsWith(">"))throw new Error('Unexpected content while parsing dot-bracket file: "'.concat(i,'"'));var l=i.substring(1).trim()||"Entry ".concat(n.length+1);for(o++;o<t.length&&0===t[o].trim().length;)o++;if(o>=t.length)throw new Error('No sequence found for entry "'.concat(l,'".'));var s=t[o].trim();if(s.startsWith(">"))throw new Error('Sequence for entry "'.concat(l,'" is missing.'));if(s.startsWith("#"))throw new Error('Sequence for entry "'.concat(l,'" cannot be a comment.'));var u=c(s);o++;for(var d=void 0;o<t.length;){var f=t[o].trim();if(0!==f.length){if(!f.startsWith("#")){if(f.startsWith(">"))break;d=f.replace(/\s+/g,""),o++;break}o++}else o++}if(void 0!==d&&d.length!==u.length)throw new Error("Structure length (".concat(d.length,") does not match sequence length (").concat(u.length,') for entry "').concat(l,'".'));n.push({name:l,sequence:u,structure:d})}else o++}if(0===n.length)throw new Error("No entries were found in the provided dot-bracket file.");return{entries:n,documentName:r}}(e),n=t.entries,d=t.documentName,f=n.map((function(e,t){for(var n,a=e.name,c=e.sequence,d=e.structure,f=a,p=c.length>0?a:"RNA molecule ".concat(t+1),h={firstNucleotideIndex:1,nucleotideProps:{}},m={name:f,rnaMoleculeProps:(n={},n[p]=h,n),basePairs:{}},v=function(e){for(var t=Math.max(i,e*l),n=t+10,r=2*Math.PI/e,o=new Array(e),a=0;a<e;a++){var s=-Math.PI/2+a*r;o[a]={x:n+t*Math.cos(s),y:n+t*Math.sin(s)}}return o}(c.length||1),x=0;x<c.length;x++){var g=c[x],y="T"===g?r.Nucleotide.Symbol.U:g,b=r.Nucleotide.isSymbol(y)?y:r.Nucleotide.Symbol.N,N=v[x],E=N.x,I=N.y;h.nucleotideProps[x]={symbol:b,x:E,y:I}}if(void 0!==d)for(var C=function(e){for(var t={},n=new Array,r=0;r<e.length;r++){var o=e[r];if("."!==o){var a=/[a-z]/.test(o),i=/[A-Z]/.test(o);if(o in s||a)(m=o)in t||(t[m]=[]),t[m].push({openSymbol:m,index:r});else{var l=void 0;if(o in u?l=u[o]:i&&(l=o.toLowerCase()),void 0===l)throw new Error('Unrecognized structure character "'.concat(o,'" at position ').concat(r+1,"."));if(void 0===(p=t[l])||0===p.length)throw new Error('Unbalanced structure: found closing "'.concat(o,'" at position ').concat(r+1," without matching opening."));var c=p.pop().index;n.push([c,r])}}}for(var d=0,f=Object.entries(t);d<f.length;d++){var p,h=f[d],m=h[0];if((p=h[1]).length>0){var v=p[p.length-1].index;throw new Error('Unbalanced structure: opening "'.concat(m,'" at position ').concat(v+1," has no matching closing character."))}}return n}(d),S=0,_=C;S<_.length;S++){var A=_[S],P=A[0],T=A[1];(0,o.insertBasePair)(m,p,P,p,T,o.DuplicateBasePairKeysHandler.DO_NOTHING)}return m}));return{complexDocumentName:d,rnaComplexProps:f}}},7084:function(e,t){"use strict";var n,r;t.__esModule=!0,t.fileExtensions=t.fileExtensionDescriptions=t.FileExtension=void 0,function(e){e.XML="xml",e.JSON="json",e.SVG="svg",e.XRNA="xrna",e.CSV="csv",e.TR="tr",e.BPSEQ="bpseq",e.STR="str",e.DOT_BRACKET="dbn"}(r=t.FileExtension||(t.FileExtension={})),t.fileExtensionDescriptions=((n={})[r.XRNA]="the native input-file format of XRNA (an extension of .xml)",n[r.XML]="a data-file format native to the internet. Highly similar to .xrna",n[r.JSON]="a general-purpose data-file format native to the internet. Logically equivalent to .xrna",n[r.CSV]="a comma-separated-values file. Logically equivalent to .xrna. Intended for use with RiboVision",n[r.BPSEQ]="a simplified, linear representation of the nucleotide sequence of the scene.",n[r.TR]="an XML-like format for R2DT. Contains nucleotides with 2D coordinates.",n[r.SVG]="an image-file format. Can be converted to other image-file formats (e.g. .jpg) using external tools",n[r.STR]="an image-file format containing nucleotide sequences and base pairs",n[r.DOT_BRACKET]="a dot-bracket notation file describing nucleotide sequence and secondary structure",n),t.fileExtensions=Object.values(r),t.default=r},8467:function(e,t,n){"use strict";var r,o,a,i,l=this&&this.__assign||function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};t.__esModule=!0,t.defaultInvertYAxisFlagRecord=t.r2dtLegacyInputFileReadersRecord=t.inputFileReadersRecord=t.inputFileExtensions=t.InputFileExtension=void 0;var s=n(7084),u=n(7475),c=n(8479),d=n(4712),f=n(5481),p=n(814),h=n(1579);t.InputFileExtension=((r={})[s.default.XRNA]=s.default.XRNA,r[s.default.XML]=s.default.XML,r[s.default.JSON]=s.default.JSON,r[s.default.STR]=s.default.STR,r[s.default.SVG]=s.default.SVG,r[s.default.DOT_BRACKET]=s.default.DOT_BRACKET,r),t.inputFileExtensions=Object.values(t.InputFileExtension),t.inputFileReadersRecord=((o={})[t.InputFileExtension.xrna]=u.xrnaInputFileHandler,o[t.InputFileExtension.xml]=u.xrnaInputFileHandler,o[t.InputFileExtension.json]=d.jsonInputFileHandler,o[t.InputFileExtension.str]=f.strInputFileHandler,o[t.InputFileExtension.svg]=h.svgInputFileHandler,o[t.InputFileExtension.dbn]=p.dotBracketInputFileHandler,o),t.r2dtLegacyInputFileReadersRecord=l(l({},t.inputFileReadersRecord),((a={})[t.InputFileExtension.json]=c.jsonInputFileHandler,a)),t.defaultInvertYAxisFlagRecord=((i={})[t.InputFileExtension.xrna]=!1,i[t.InputFileExtension.xml]=!1,i[t.InputFileExtension.json]=!0,i[t.InputFileExtension.str]=!1,i[t.InputFileExtension.svg]=!1,i[t.InputFileExtension.dbn]=!1,i)},8479:function(e,t,n){"use strict";n.r(t),n.d(t,{jsonInputFileHandler:function(){return m},jsonObjectHandler:function(){return h}});var r=n(7762),o=n(1413),a=n(7089),i=n(9287),l=n(6048),s=n(3871),u=n(433),c=n(7361),d=n(6176);function f(e,t){if(!Array.isArray(e))throw"Variable ".concat(t," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(t,' should include "x" and "y" properties.');var n=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(n)||Number.isNaN(r))throw"x and y properties of each element in ".concat(t," should be numbers.");return{x:n,y:r}}))}function p(e,t,n,r,o,i,u){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var c;if([null,void 0].includes(e.basePairType))c=void 0;else{if("string"!==typeof e.basePairType||!(0,a.isBasePairType)(e.basePairType))throw"Unrecognized base-pair type.";c=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=(0,s.fromCssString)(e.stroke)}var d=structuredClone(r),p=e.classes;if(void 0!==p){if(!Array.isArray(p))throw'Base-pair "classes" variable should be an array.';p.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":o=Number.parseFloat(e[1]);break;case"stroke":case"color":d=(0,s.fromCssString)(e[1])}}))}))}var h=void 0;if("points"in e&&(h=f(e.points,"basePair.points")),void 0===i){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var m=e.rnaMoleculeName1;if("string"!==typeof m)throw"rnaMoleculeName1 should be a string.";i=m}if(void 0===u){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var v=e.rnaMoleculeName2;if("string"!==typeof v)throw"rnaMoleculeName2 should be a string.";u=v}for(var x=n.rnaMoleculeProps[i],g=n.rnaMoleculeProps[u],y=0,b=[i,u];y<b.length;y++){var N=b[y];if(!(N in n.rnaMoleculeProps))throw'RNA molecule "'.concat(N,'" does not exist in the RNA complex.')}var E=Number.parseInt(e.residueIndex1)-x.firstNucleotideIndex,I=Number.parseInt(e.residueIndex2)-g.firstNucleotideIndex;(0,l.insertBasePair)(n,i,E,u,I,l.DuplicateBasePairKeysHandler.DO_NOTHING,{color:d,strokeWidth:o,basePairType:c,points:h})}function h(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var t=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,n){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var a={name:"",rnaMoleculeProps:{},basePairs:{}};if(a.name=e.name,a.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var n={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},r={font:structuredClone(u.default.DEFAULT),color:structuredClone(s.BLACK)},l=e.classesForSequence;if(void 0!==l){if(!Array.isArray(l))throw'RNA-molecule "classesForSequence" variable should be an array;';l.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(r.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":r.font.family=e[1];break;case"font-size":r.font.size=e[1];break;case"font-weight":r.font.weight=e[1];break;case"font-style":r.font.style=e[1];break;case"color":r.color=(0,s.fromCssString)(e[1])}}))}))}var h=e.name;a.rnaMoleculeProps[h]=n,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var t=Number.parseInt(e.residueIndex);t<n.firstNucleotideIndex&&(n.firstNucleotideIndex=t)})),e.sequence.forEach((function(e){var o=Number.parseInt(e.residueIndex)-n.firstNucleotideIndex;if(!i.Nucleotide.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var a={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};a.font=structuredClone(r.font),a.color=structuredClone(r.color),n.nucleotideProps[o]=a;var l=e.classes;if(void 0!==l){if(!Array.isArray(l))throw'Nucleotide "classes" variable should be an array.';l.forEach((function(e){e.startsWith("text-")&&(a.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":a.font.family=e[1];break;case"font-size":a.font.size=e[1];break;case"font-weight":a.font.weight=e[1];break;case"font-style":a.font.style=e[1];break;case"color":a.color=(0,s.fromCssString)(e[1])}}))}))}}));var m={font:structuredClone(u.default.DEFAULT),color:structuredClone(s.BLACK),stroke:structuredClone(s.BLACK),strokeWidth:d.DEFAULT_STROKE_WIDTH},v=e.classesForLabels;if(void 0!==v){if(!Array.isArray(v))throw'RNA-molecule "classsesForLabels" variable should be an array.';v.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(m.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":m.font.family=e[1];break;case"font-size":m.font.size=e[1];break;case"font-weight":m.font.weight=e[1];break;case"font-style":m.font.style=e[1];break;case"stroke":m.stroke=(0,s.fromCssString)(e[1]);break;case"color":m.color=(0,s.fromCssString)(e[1]);break;case"stroke-width":m.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=n.nucleotideProps[Number.parseInt(e.residueIndex)-n.firstNucleotideIndex];if("labelContent"in e){var a=structuredClone(m.font),i=structuredClone(m.color),l=e.labelContent.classes;if(void 0!==l){if(!Array.isArray(l))throw'LabelContent "classes" variable should be an array.';l.forEach((function(e){e.startsWith("text-")&&(i=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":a.family=e[1];break;case"font-size":a.size=e[1];break;case"font-weight":a.weight=e[1];break;case"font-style":a.style=e[1];break;case"color":case"stroke":i=(0,s.fromCssString)(e[1])}}))}))}r.labelContentProps=(0,o.Z)((0,o.Z)({},(0,c.subtract)({x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y)},r)),{},{content:e.labelContent.label,font:a,color:i,strokeWidth:d.DEFAULT_STROKE_WIDTH})}if("labelLine"in e){var u=e.labelLine,p=structuredClone(m.stroke),h=m.strokeWidth,v=u.classes;if(void 0!==v){if(!Array.isArray(v))throw'Label-line "classes" variable should be an array.';v.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke":case"color":p=(0,s.fromCssString)(e[1]);break;case"stroke-width":h=Number.parseFloat(e[1])}}))}))}var x=[];if("points"in u)x=f(u.points,'label-line "points"');else{if(!("x1"in u&&"y1"in u&&"x2"in u&&"y2"in u))throw'Input label-line elements should have a "points" variable.';var g=Number.parseFloat(u.x1);if(Number.isNaN(g))throw'"x1" variable should be a number.';var y=Number.parseFloat(u.y1);if(Number.isNaN(y))throw'"y1" variable should be a number.';var b=Number.parseFloat(u.x2);if(Number.isNaN(b))throw'"x2" variable should be a number.';var N=Number.parseFloat(u.y2);if(Number.isNaN(N))throw'"y2" variable should be a number.';x.push({x:g,y:y},{x:b,y:N})}r.labelLineProps={points:x.map((function(e){return(0,c.subtract)(e,r)})),color:p,strokeWidth:h}}}));var x={strokeWidth:d.DEFAULT_STROKE_WIDTH,stroke:void 0},g=e.classesForBasePairs;if(void 0!==g){if(!Array.isArray(g))throw'RNA-molecule "classesForBasePairs" variable should be an array.';g.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":x.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":x.stroke=(0,s.fromCssString)(e[1])}}))}))}if("basePairs"in e){var y=e.basePairs;if(!Array.isArray(y))throw"The basePairs property of each input RNA molecule should be an array.";for(var b=0,N=e.basePairs;b<N.length;b++){p(N[b],null!==t&&void 0!==t?t:[],a,x.stroke,x.strokeWidth,h,h)}}return n})),"basePairs"in e){var l=e.basePairs;if(!Array.isArray(l))throw"The basePairs property of each input RNA complex should be an array.";var h,m=(0,r.Z)(e.basePairs);try{var v=function(){var n,r=h.value,o={strokeWidth:d.DEFAULT_STROKE_WIDTH,stroke:void 0},i=e.classesForBasePairs;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForBasePairs" variable should be an array.';i.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":o.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":o.stroke=(0,s.fromCssString)(e[1])}}))}))}p(r,null!==(n=e.classesForBasePairs)&&void 0!==n?n:[],a,o.stroke,o.strokeWidth)};for(m.s();!(h=m.n()).done;)v()}catch(x){m.e(x)}finally{m.f()}}return a})),complexDocumentName:"Unknown"}}var m=function(e){return h(JSON.parse(e))}},4712:function(e,t,n){"use strict";n.r(t),n.d(t,{jsonInputFileHandler:function(){return p},jsonObjectHandler:function(){return f}});var r=n(7762),o=n(7089),a=n(9287),i=n(6048),l=n(3871),s=n(433),u=n(6176);function c(e,t){if(!Array.isArray(e))throw"Variable ".concat(t," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(t,' should include "x" and "y" properties.');var n=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(n)||Number.isNaN(r))throw"x and y properties of each element in ".concat(t," should be numbers.");return{x:n,y:r}}))}function d(e,t,n,r,a,s,u){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var d;if([null,void 0].includes(e.basePairType))d=void 0;else{if("string"!==typeof e.basePairType||!(0,o.isBasePairType)(e.basePairType))throw"Unrecognized base-pair type.";d=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=(0,l.fromCssString)(e.stroke)}var f=structuredClone(r),p=e.classes;if(void 0!==p){if(!Array.isArray(p))throw'Base-pair "classes" variable should be an array.';p.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":a=Number.parseFloat(e[1]);break;case"stroke":case"color":f=(0,l.fromCssString)(e[1])}}))}))}var h=void 0;if("points"in e&&(h=c(e.points,"basePair.points")),void 0===s){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var m=e.rnaMoleculeName1;if("string"!==typeof m)throw"rnaMoleculeName1 should be a string.";s=m}if(void 0===u){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var v=e.rnaMoleculeName2;if("string"!==typeof v)throw"rnaMoleculeName2 should be a string.";u=v}for(var x=n.rnaMoleculeProps[s],g=n.rnaMoleculeProps[u],y=0,b=[s,u];y<b.length;y++){var N=b[y];if(!(N in n.rnaMoleculeProps))throw'RNA molecule "'.concat(N,'" does not exist in the RNA complex.')}var E=Number.parseInt(e.residueIndex1)-x.firstNucleotideIndex,I=Number.parseInt(e.residueIndex2)-g.firstNucleotideIndex;(0,i.insertBasePair)(n,s,E,u,I,i.DuplicateBasePairKeysHandler.DO_NOTHING,{color:f,strokeWidth:a,basePairType:d,points:h})}function f(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var t=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,n){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var o={name:"",rnaMoleculeProps:{},basePairs:{}};if(o.name=e.name,o.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var n={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},r={font:structuredClone(s.default.DEFAULT),color:structuredClone(l.BLACK)},i=e.classesForSequence;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForSequence" variable should be an array;';i.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(r.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":r.font.family=e[1];break;case"font-size":r.font.size=e[1];break;case"font-weight":r.font.weight=e[1];break;case"font-style":r.font.style=e[1];break;case"color":r.color=(0,l.fromCssString)(e[1])}}))}))}var f=e.name;o.rnaMoleculeProps[f]=n,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var t=Number.parseInt(e.residueIndex);t<n.firstNucleotideIndex&&(n.firstNucleotideIndex=t)})),e.sequence.forEach((function(e){var o=Number.parseInt(e.residueIndex)-n.firstNucleotideIndex;if(!a.Nucleotide.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var i={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};i.font=structuredClone(r.font),i.color=structuredClone(r.color),n.nucleotideProps[o]=i;var s=e.classes;if(void 0!==s){if(!Array.isArray(s))throw'Nucleotide "classes" variable should be an array.';s.forEach((function(e){e.startsWith("text-")&&(i.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":i.font.family=e[1];break;case"font-size":i.font.size=e[1];break;case"font-weight":i.font.weight=e[1];break;case"font-style":i.font.style=e[1];break;case"color":i.color=(0,l.fromCssString)(e[1])}}))}))}}));var p={font:structuredClone(s.default.DEFAULT),color:structuredClone(l.BLACK),stroke:structuredClone(l.BLACK),strokeWidth:u.DEFAULT_STROKE_WIDTH},h=e.classesForLabels;if(void 0!==h){if(!Array.isArray(h))throw'RNA-molecule "classsesForLabels" variable should be an array.';h.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(p.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":p.font.family=e[1];break;case"font-size":p.font.size=e[1];break;case"font-weight":p.font.weight=e[1];break;case"font-style":p.font.style=e[1];break;case"stroke":p.stroke=(0,l.fromCssString)(e[1]);break;case"color":p.color=(0,l.fromCssString)(e[1]);break;case"stroke-width":p.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=n.nucleotideProps[Number.parseInt(e.residueIndex)-n.firstNucleotideIndex];if("labelContent"in e){var o=structuredClone(p.font),a=structuredClone(p.color),i=e.labelContent.classes;if(void 0!==i){if(!Array.isArray(i))throw'LabelContent "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":o.family=e[1];break;case"font-size":o.size=e[1];break;case"font-weight":o.weight=e[1];break;case"font-style":o.style=e[1];break;case"color":case"stroke":a=(0,l.fromCssString)(e[1])}}))}))}r.labelContentProps={x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y),content:e.labelContent.label,font:o,color:a,strokeWidth:u.DEFAULT_STROKE_WIDTH}}if("labelLine"in e){var s=e.labelLine,d=structuredClone(p.stroke),f=p.strokeWidth,h=s.classes;if(void 0!==h){if(!Array.isArray(h))throw'Label-line "classes" variable should be an array.';h.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke":case"color":d=(0,l.fromCssString)(e[1]);break;case"stroke-width":f=Number.parseFloat(e[1])}}))}))}var m=[];if("points"in s)m=c(s.points,'label-line "points"');else{if(!("x1"in s&&"y1"in s&&"x2"in s&&"y2"in s))throw'Input label-line elements should have a "points" variable.';var v=Number.parseFloat(s.x1);if(Number.isNaN(v))throw'"x1" variable should be a number.';var x=Number.parseFloat(s.y1);if(Number.isNaN(x))throw'"y1" variable should be a number.';var g=Number.parseFloat(s.x2);if(Number.isNaN(g))throw'"x2" variable should be a number.';var y=Number.parseFloat(s.y2);if(Number.isNaN(y))throw'"y2" variable should be a number.';m.push({x:v,y:x},{x:g,y:y})}r.labelLineProps={points:m,color:d,strokeWidth:f}}}));var m={strokeWidth:u.DEFAULT_STROKE_WIDTH,stroke:void 0},v=e.classesForBasePairs;if(void 0!==v){if(!Array.isArray(v))throw'RNA-molecule "classesForBasePairs" variable should be an array.';v.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":m.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":m.stroke=(0,l.fromCssString)(e[1])}}))}))}if("basePairs"in e){var x=e.basePairs;if(!Array.isArray(x))throw"The basePairs property of each input RNA molecule should be an array.";for(var g=0,y=e.basePairs;g<y.length;g++){d(y[g],null!==t&&void 0!==t?t:[],o,m.stroke,m.strokeWidth,f,f)}}return n})),"basePairs"in e){var i=e.basePairs;if(!Array.isArray(i))throw"The basePairs property of each input RNA complex should be an array.";var f,p=(0,r.Z)(e.basePairs);try{var h=function(){var n,r=f.value,a={strokeWidth:u.DEFAULT_STROKE_WIDTH,stroke:void 0},i=e.classesForBasePairs;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForBasePairs" variable should be an array.';i.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":a.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":a.stroke=(0,l.fromCssString)(e[1])}}))}))}d(r,null!==(n=e.classesForBasePairs)&&void 0!==n?n:[],o,a.stroke,a.strokeWidth)};for(p.s();!(f=p.n()).done;)h()}catch(m){p.e(m)}finally{p.f()}}return o})),complexDocumentName:"Unknown"}}var p=function(e){return f(JSON.parse(e))}},5495:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.parseGraphicalData=void 0;var a=n(7089),i=n(6048),l=n(7361),s=n(7457),u=1e-8,c={line:5,center:10},d={loose:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos((0,s.degreesToRadians)(160))},normal:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos((0,s.degreesToRadians)(170))},strict:{minimumDistanceRatio:.895,dotProductThreshold:Math.cos((0,s.degreesToRadians)(175))}},f="Too few nucleotides exist within the RNA complex (the number is less than the required number).";t.parseGraphicalData=function(e,t,n,s,p,h){var m,v,x,g,y,b,N,E;void 0===s&&(s={});for(var I=o(["undefined"],a.default.canonicalTypes,!0),C={},S=function(e,S){var _,A,P=Number.parseInt(e),T=t[P],R=n[P],M=null!==(m=s[P])&&void 0!==m?m:{};C[P]={};for(var w=C[P],k=[],O=0,L=Object.entries(S.rnaMoleculeProps);O<L.length;O++){var j=L[O],D=j[0],Z=j[1];w[D]={};for(var F=w[D],B=null!==(v=M[D])&&void 0!==v?v:{},U=0,z=Object.entries(Z.nucleotideProps);U<z.length;U++){var G=z[U],W=G[0],H=G[1],K=Number.parseInt(W),V=null!==(x=B[K])&&void 0!==x?x:{x:0,y:0},X={x:H.x-.5*V.x,y:H.y+V.y};F[K]=X,k.push({indices:{rnaMoleculeName:D,nucleotideIndex:K,arrayIndex:k.length},singularNucleotideProps:H,adjustedPosition:X})}}var q=p[P],Y=h[P];function Q(e,t){var n=e.vectorNearNucleotide,r=e.vectorNearLabelContent,o=e.labelContent,a=e.labelContentDimensions,i=k[t],s=i.singularNucleotideProps,u=i.adjustedPosition;s.labelLineProps={points:[(0,l.subtract)(n,u),(0,l.subtract)(r,u)]},o.x+=.5*a.width-u.x,o.y+=.5*-a.height-u.y,s.labelContentProps=o}if(q.length>0){for(var $=function(e,t,n,r){if(void 0!==n&&void 0!==r){var o=(0,l.distanceSquared)(e.labelContent,e.vectorNearLabelContent)/(0,l.distanceSquared)(e.vectorNearLabelContent,e.vectorNearNucleotide);if(o<n||o>r)return}t.sort((function(e,t){return e.distance-t.distance})),Q(e,t[0].indices.arrayIndex)},J=new Array,ee={},te=0,ne=Y;te<ne.length;te++){for(var re=ne[te],oe=re.labelContent,ae=re.rectangle,ie=oe.x,le=oe.y,se=ae.width,ue=ae.height,ce=[{x:ie,y:le},{x:ie+se,y:le},{x:ie+se,y:le-ue},{x:ie,y:le-ue}],de=[{v0:ce[0],v1:ce[1]},{v0:ce[1],v1:ce[2]},{v0:ce[2],v1:ce[3]},{v0:ce[3],v1:ce[0]}],fe={distanceSquared:Number.POSITIVE_INFINITY,vectorNearNucleotide:q[0].v0,vectorNearLabelContent:q[0].v1,labelLineIndex:NaN},pe=0;pe<q.length;pe++)for(var he=(Be=q[pe]).v0,me=Be.v1,ve=0,xe=[{vector:he,otherVector:me},{vector:me,otherVector:he}];ve<xe.length;ve++)for(var ge=xe[ve],ye=ge.vector,be=ge.otherVector,Ne=0,Ee=de;Ne<Ee.length;Ne++){var Ie=Ee[Ne],Ce=(0,l.distanceSquaredBetweenVector2DAndLineSegment)(ye,Ie);Ce<fe.distanceSquared&&(fe={distanceSquared:Ce,vectorNearNucleotide:be,vectorNearLabelContent:ye,labelLineIndex:pe})}var Se=fe.labelLineIndex,_e=fe.vectorNearNucleotide,Ae=fe.vectorNearLabelContent,Pe=fe.distanceSquared;Se in ee||(ee[Se]=[]),ee[Se].push({vectorNearNucleotide:_e,vectorNearLabelContent:Ae,labelContent:oe,distanceSquared:Pe,labelContentDimensions:ae})}for(var Te=0,Re=Object.entries(ee);Te<Re.length;Te++){var Me=Re[Te],we=Me[0],ke=Me[1];Se=Number.parseInt(we);ke.sort((function(e,t){return e.distanceSquared-t.distanceSquared})),J.push(r(r({},ke[0]),{labelLineIndex:Se}))}for(var Oe={},Le=new Array,je=0,De=J;je<De.length;je++){Se=(dt=De[je]).labelLineIndex,oe=dt.labelContent,dt.distanceSquared,_e=dt.vectorNearNucleotide,Ae=dt.vectorNearLabelContent,dt.labelContentDimensions;var Ze=Rt(Pt(_e,7).sliced,_e),Fe=new Array,Be=q[Se],Ue=(0,l.normalize)((0,l.subtract)(Ae,_e)),ze=void 0;/^-?\d+$/.test(oe.content)&&(ze=Number.parseInt(oe.content));for(var Ge=0,We=Ze;Ge<We.length;Ge++){var He=We[Ge],Ke=He.indices,Ve=He.dv,Xe=He.distance;Ve=(0,l.normalize)(Ve),(0,l.dotProduct)(Ue,Ve)>=d.loose.dotProductThreshold||Fe.push({indices:Ke,distance:Xe})}if(1===Fe.length){Ke=Fe[0].indices;void 0!==ze&&((ot=ze-Ke.nucleotideIndex)in Oe||(Oe[ot]={multiplicity:0,candidates:[]}),(at=Oe[ot]).multiplicity++,at.candidates.push({pairedLabelDatum:dt,arrayIndex:Ke.arrayIndex,labelContentAsNumber:ze,unfilteredNucleotideData:Ze}))}else Le.push({unfilteredNucleotideData:Ze,pairedLabelDatum:dt,labelContentAsNumber:ze})}var qe=Object.entries(Oe);if(0===qe.length)for(var Ye=0,Qe=Le;Ye<Qe.length;Ye++){var $e=Qe[Ye];Ze=$e.unfilteredNucleotideData;$(dt=$e.pairedLabelDatum,Ze)}else{for(var Je=qe.map((function(e){var t=e[0],n=e[1];return{nucleotideIndexDelta:Number.parseInt(t),multiplicityData:n}})).sort((function(e,t){return t.multiplicityData.multiplicity-e.multiplicityData.multiplicity})),et=0,tt=0,nt=Je;tt<nt.length;tt++){var rt=nt[tt],ot=rt.nucleotideIndexDelta,at=rt.multiplicityData;et+=at.multiplicity}for(var it=Je[0],lt=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY,ut=0,ct=it.multiplicityData.candidates;ut<ct.length;ut++){var dt=ct[ut].pairedLabelDatum,ft=(0,l.distanceSquared)(dt.labelContent,dt.vectorNearLabelContent)/(0,l.distanceSquared)(dt.vectorNearLabelContent,dt.vectorNearNucleotide);ft<lt&&(lt=ft),ft>st&&(st=ft)}Je=Je.filter((function(e){e.nucleotideIndexDelta;var t=e.multiplicityData,n=t.multiplicity>1&&t.multiplicity/et>.05;if(n)for(var r=0,o=t.candidates;r<o.length;r++){var a=o[r];Q(u=a.pairedLabelDatum,a.arrayIndex)}else for(var i=0,l=t.candidates;i<l.length;i++){var s=l[i],u=s.pairedLabelDatum,c=(s.arrayIndex,s.labelContentAsNumber),d=s.unfilteredNucleotideData;Le.push({unfilteredNucleotideData:d,pairedLabelDatum:u,labelContentAsNumber:c})}return n}));for(var pt=0,ht=Le;pt<ht.length;pt++){var mt=ht[pt];Ze=mt.unfilteredNucleotideData,dt=mt.pairedLabelDatum;if(void 0===(ze=mt.labelContentAsNumber))$(dt,Ze,lt,st);else{e:for(var vt=0,xt=Je;vt<xt.length;vt++){ot=xt[vt].nucleotideIndexDelta;for(var gt=0,yt=Ze;gt<yt.length;gt++){K=(Ke=yt[gt].indices).nucleotideIndex;var bt=Ke.arrayIndex;if(ot===ze-K){!0,Q(dt,bt);break e}}}}}}}for(var Nt=!1,Et=At(),It={},Ct=0,St=I;Ct<St.length;Ct++){var _t=St[Ct];It[_t]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY}}function At(){for(var e={},t=0,n=I;t<n.length;t++){e[n[t]]={lineData:[],centerData:[]}}return{zeroCandidateBasePairs:e,tooManyCandidateBasePairs:{lineDataWithIndices:[],centerDataWithIndices:[]}}}function Pt(e,t){var n=k.map((function(t){var n=t.indices,r=t.adjustedPosition;return{indices:n,adjustedPosition:r,squaredDistance:(0,l.distanceSquared)(e,r)}}));if(n.length<t)throw f;return n.sort((function(e,t){return e.squaredDistance-t.squaredDistance})),{all:n,sliced:n.slice(0,t)}}function Tt(e,t,n){(0,i.insertBasePair)(S,e.rnaMoleculeName,e.nucleotideIndex,t.rnaMoleculeName,t.nucleotideIndex,i.DuplicateBasePairKeysHandler.THROW_ERROR,{basePairType:n});var r=(0,l.distance)(k[e.arrayIndex].singularNucleotideProps,k[t.arrayIndex].singularNucleotideProps),o=It[null!==n&&void 0!==n?n:"undefined"];r<o.minimum&&(o.minimum=r),r>o.maximum&&(o.maximum=r),delete k[e.arrayIndex],delete k[t.arrayIndex]}function Rt(e,t){return e.map((function(e){var n=e.indices,r=e.adjustedPosition,o=e.squaredDistance;return{indices:n,dv:(0,l.subtract)(r,t),distance:Math.sqrt(o),adjustedPosition:r}}))}function Mt(e,t,n){for(var r=t.dotProductThreshold,o=t.minimumDistanceRatio,i=1/o,s=(0,l.normalize)((0,l.subtract)(e.v1,e.v0)),u=(0,l.negate)(s),c=Pt(e.v0,n),d=Rt(c.sliced,e.v0).filter((function(e){var t=e.dv;return(0,l.dotProduct)(t,s)/(0,l.magnitude)(t)<r})),f=Pt(e.v1,n),p=Rt(f.sliced,e.v1).filter((function(e){var t=e.dv;return(0,l.dotProduct)(t,u)/(0,l.magnitude)(t)<r})),h=d.length,m=p.length,v=new Array,x=e.basePairType,g=0;g<h;g++)for(var y=d[g],b=y.indices,N=y.distance,E=S.rnaMoleculeProps[b.rnaMoleculeName].nucleotideProps[b.nucleotideIndex].symbol,I=0;I<m;I++){var C=p[I],_=C.indices,A=C.distance,P=S.rnaMoleculeProps[_.rnaMoleculeName].nucleotideProps[_.nucleotideIndex].symbol;if(!(b.rnaMoleculeName===_.rnaMoleculeName&&Math.abs(b.nucleotideIndex-_.nucleotideIndex)<=1)){var T=(0,a.getBasePairType)(E,P);if(void 0===x||x===T){var R=N/A;R<o||R>i||v.push({indices0:b,indices1:_,totalDistance:N+A,distanceRatio:R,type:T})}}}switch(v.length){case 0:Et.zeroCandidateBasePairs[null!==x&&void 0!==x?x:"undefined"].lineData.push({line:e,allClosestNucleotides:{0:[],1:[]}});break;case 1:var M=v[0];Tt(M.indices0,M.indices1,M.type);break;default:Et.tooManyCandidateBasePairs.lineDataWithIndices.push({line:e,arrayIndices:v.map((function(e){var t=e.indices0,n=e.indices1;return{0:t.arrayIndex,1:n.arrayIndex}})),allClosestNucleotides:{0:c.all,1:f.all}})}1!==v.length&&Nt&&console.error("Base-pair creation failed: ".concat(v.length," (line; ").concat(e.basePairType,"; (").concat(e.v0.x,", ").concat(e.v0.y,")-(").concat(e.v1.x,", ").concat(e.v1.y,"))"),v)}function wt(e,t,n){for(var r=t.dotProductThreshold,o=t.minimumDistanceRatio,i=1/o,s=Pt(e,n),u=s.all,c=Rt(s.sliced,e),d=new Array,f=c.length,p=e.basePairType,h=0;h<f;h++)for(var m=c[h],v=m.indices,x=m.distance,g=S.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex].symbol,y=h+1;y<f;y++){var b=c[y],N=b.indices,E=b.distance,I=S.rnaMoleculeProps[N.rnaMoleculeName].nucleotideProps[N.nucleotideIndex].symbol;if(!(v.rnaMoleculeName===N.rnaMoleculeName&&Math.abs(v.nucleotideIndex-N.nucleotideIndex)<=1)){var C=(0,a.getBasePairType)(g,I);if(void 0===p||p===C){var _=(0,l.dotProduct)(m.dv,b.dv)/(x*E);if(!(_>=r)){var A=x/E;A<o||A>i||d.push({indices0:v,indices1:N,dotProduct:_,totalDistance:x+E,distanceRatio:A,type:C})}}}}switch(d.length){case 0:Et.zeroCandidateBasePairs[null!==p&&void 0!==p?p:"undefined"].centerData.push({center:e,allClosestNucleotides:[]});break;case 1:var P=d[0];Tt(P.indices0,P.indices1,P.type);break;default:Et.tooManyCandidateBasePairs.centerDataWithIndices.push({center:e,arrayIndices:d.map((function(e){var t=e.indices0,n=e.indices1;return{0:t.arrayIndex,1:n.arrayIndex}})),allClosestNucleotides:u})}1!==d.length&&Nt&&console.error("Base-pair creation failed: ".concat(d.length," (center; ").concat(e.basePairType,"; ").concat(e.x,", ").concat(e.y,")"),d)}for(var kt=((_={})[a.default.Type.WOBBLE]=0,_[a.default.Type.CANONICAL]=1,_[a.default.Type.CIS_WATSON_CRICK_WATSON_CRICK]=2,_[a.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]=3,_[a.default.Type.MISMATCH]=4,_[void 0]=5,_),Ot=Object.entries(kt).sort((function(e,t){return e[1]-t[1]})).map((function(e){var t=e[0];e[1];return t})),Lt=((A={undefined:{lines:[],centers:[]}})[a.default.Type.CANONICAL]={lines:[],centers:[]},A[a.default.Type.MISMATCH]={lines:[],centers:[]},A[a.default.Type.WOBBLE]={lines:[],centers:[]},A[a.default.Type.CIS_WATSON_CRICK_WATSON_CRICK]={lines:[],centers:[]},A[a.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]={lines:[],centers:[]},A),jt=0,Dt=R;jt<Dt.length;jt++){var Zt=Dt[jt];Lt[null!==(g=Zt.basePairType)&&void 0!==g?g:"undefined"].centers.push(Zt)}for(var Ft=0,Bt=T;Ft<Bt.length;Ft++){var Ut=Bt[Ft],zt=Lt[null!==(y=Ut.basePairType)&&void 0!==y?y:"undefined"];u>=(0,l.distanceSquared)(Ut.v0,Ut.v1)?zt.centers.push(Ut.v0):zt.lines.push(Ut)}for(var Gt=0,Wt=Ot;Gt<Wt.length;Gt++){for(var Ht=Lt[Wt[Gt]],Kt=Ht.centers,Vt=0,Xt=Ht.lines;Vt<Xt.length;Vt++){Mt(on=Xt[Vt],d.normal,3)}for(var qt=0,Yt=Kt;qt<Yt.length;qt++){wt(un=Yt[qt],d.normal,6)}}var Qt=structuredClone(Et);Et=At();for(var $t=new Array,Jt=new Array,en=Qt.zeroCandidateBasePairs,tn=Qt.tooManyCandidateBasePairs,nn=0,rn=tn.lineDataWithIndices;nn<rn.length;nn++){var on;switch((on=rn[nn]).arrayIndices=on.arrayIndices.filter((function(e){return e[0]in k&&e[1]in k})),on.arrayIndices.length){case 0:en[null!==(b=on.line.basePairType)&&void 0!==b?b:"undefined"].lineData.push(on);break;case 1:var an=on.arrayIndices[0];Tt(k[an[0]].indices,k[an[1]].indices,on.line.basePairType);break;default:$t.push(on)}}for(var ln=0,sn=tn.centerDataWithIndices;ln<sn.length;ln++){var un;switch((un=sn[ln]).arrayIndices=un.arrayIndices.filter((function(e){return e[0]in k&&e[1]in k})),un.arrayIndices.length){case 0:en[null!==(N=un.center.basePairType)&&void 0!==N?N:"undefined"].centerData.push(un);break;case 1:an=un.arrayIndices[0];Tt(k[an[0]].indices,k[an[1]].indices,un.center.basePairType);break;default:Jt.push(un)}}for(var cn=0,dn=Ot;cn<dn.length;cn++){for(var fn=en[dn[cn]],pn=fn.centerData,hn=0,mn=fn.lineData;hn<mn.length;hn++){Mt(mn[hn].line,d.loose,c.line)}for(var vn=0,xn=pn;vn<xn.length;vn++){wt(xn[vn].center,d.loose,c.center)}}$t.push.apply($t,Et.tooManyCandidateBasePairs.lineDataWithIndices),Jt.push.apply(Jt,Et.tooManyCandidateBasePairs.centerDataWithIndices);var gn=o(o([],$t.map((function(e){var t=e.line,n=e.arrayIndices;return{center:r(r({},(0,l.scaleUp)((0,l.add)(t.v0,t.v1),.5)),{basePairType:t.basePairType}),arrayIndices:n}})),!0),Jt,!0);gn.sort((function(e,t){return e.arrayIndices.length-t.arrayIndices.length}));for(var yn=function(e){var t=e.center,n=e.arrayIndices,r=It[null!==(E=t.basePairType)&&void 0!==E?E:"undefined"];if(0===(n=n.filter((function(e){if(!(e[0]in k))return!1;if(!(e[1]in k))return!1;var t=k[e[0]],n=k[e[1]],o=(0,l.distance)(t.singularNucleotideProps,n.singularNucleotideProps);return!(o<.95*r.minimum)&&!(o>1.05*r.maximum)}))).length)return console.error("Base pairing failed."),"continue";for(var o=n.map((function(e){var n=k[e[0]],r=k[e[1]];return{distanceSquared:(0,l.distanceSquared)((0,l.scaleUp)((0,l.add)(n.singularNucleotideProps,r.singularNucleotideProps),.5),t),indices0:n.indices,indices1:r.indices}})),a=o[0],i=1;i<o.length;i++){var s=o[i];s.distanceSquared<a.distanceSquared&&(a=s)}Tt(a.indices0,a.indices1,t.basePairType)},bn=0,Nn=gn;bn<Nn.length;bn++){yn(pn=Nn[bn])}},_=0,A=Object.entries(e);_<A.length;_++){var P=A[_];S(P[0],M=P[1])}for(var T=0,R=Object.values(e);T<R.length;T++)for(var M=R[T],w=0,k=Object.values(M.rnaMoleculeProps);w<k.length;w++)for(var O=k[w],L=0,j=Object.values(O.nucleotideProps);L<j.length;L++){var D=j[L];if(D.y*=-1,void 0!==D.labelContentProps&&(D.labelContentProps.y*=-1),void 0!==D.labelLineProps)for(var Z=0,F=D.labelLineProps.points;Z<F.length;Z++){F[Z].y*=-1}}}},5481:function(e,t,n){"use strict";t.__esModule=!0,t.strInputFileHandler=void 0;var r=n(5495);t.strInputFileHandler=function(e){var t,n,o,a,i,l,s,u=/basefont[^\}]*\{[^\}]+\}[^\}\d]*(\d+)[^\}]*\}/.exec(e);null!==u&&Number.parseInt(u[1]);for(var c=e.matchAll(/(text|line)\s*\{/g),d=new Array,f=new Array,p="RNA molecule",h=((t={})[0]=[],t),m=((n={})[0]=[],n),v=new Array,x=0,g=c;x<g.length;x++){var y=g[x],b=1,N=y.index;if(void 0===N)throw"index should never be undefined.";for(var E=N+y[0].length,I=E-1;b>0;){var C=I+1,S=e.indexOf("{",C),_=e.indexOf("}",C);if(-1===S){if(-1===_)throw"This STR file is improper; it contains an unclosed bracket.";I=_,b--}else-1===_?(I=S,b++):_<S?(I=_,b--):(I=S,b++)}var A=e.substring(E,I);switch(y[1]){case"text":var P=/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s*\}.*(A|C|G|U)\s+0\s*$/,T=A.match(P);null!==T&&d.push({x:Number.parseFloat(T[1]),y:Number.parseFloat(T[2]),symbol:T[3]});break;case"line":P=/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s*\}/;var R=A.match(P);if(null===R)throw"lineRegexMatch should never be null.";f.push({v0:{x:Number.parseFloat(R[1]),y:Number.parseFloat(R[2])},v1:{x:Number.parseFloat(R[3]),y:Number.parseFloat(R[4])}})}}var M={firstNucleotideIndex:1,nucleotideProps:d},w=[{name:"RNA complex",rnaMoleculeProps:(o={},o[p]=M,o),basePairs:{}}];return(0,r.parseGraphicalData)(w,((a={})[0]=f,a),((i={})[0]=v,i),((l={})[0]=((s={})[p]=[],s),l),h,m),{complexDocumentName:"Scene",rnaComplexProps:w}}},1579:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.svgInputFileHandler=t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT=t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG=t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT=t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG=t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME=t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE=t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1=t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0=t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1=t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0=t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME=t.SVG_PROPERTY_XRNA_COMPLEX_NAME=t.SVG_PROPERTY_XRNA_TYPE=t.SvgPropertyXrnaType=void 0;var a,i=n(7105),l=n(7089),s=n(9287),u=n(6048),c=n(6745),d=n(3871),f=n(433),p=n(6176),h=n(5495);!function(e){e.SCENE="scene",e.RNA_COMPLEX="rna_complex",e.RNA_MOLECULE="rna_molecule",e.NUCLEOTIDE="nucleotide",e.LABEL_LINE="label_line",e.LABEL_CONTENT="label_content",e.BASE_PAIR="base_pair",e.PATH="path",e.CENTERLINE="centerline"}(a=t.SvgPropertyXrnaType||(t.SvgPropertyXrnaType={}));var m,v=Object.values(a);!function(e){e.LETTERS="Letters",e.LABELS_LINES="Labels_Lines",e.LABELS_TEXT="Labels_Text",e.BASE_PAIR_LINES="Nucleotide_Lines",e.BASE_PAIR_CIRCLES="Nucleotide_Circles"}(m||(m={}));var x;Object.values(m);!function(e){e.XRNA_JS="xrna.js",e.XRNA_GT="xrna_gt",e.UNFORMATTED="unformatted"}(x||(x={})),t.SVG_PROPERTY_XRNA_TYPE="data-xrna_type",t.SVG_PROPERTY_XRNA_COMPLEX_NAME="data-xrna_rna_complex_name",t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME="data-xrna_rna_molecule_name",t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX="data-xrna_rna_molecule_first_nucleotide_index",t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX="data-xrna_formatted_nucleotide_index",t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0="data-xrna_base_pair_rna_molecule_name_0",t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1="data-xrna_base_pair_rna_molecule_name_1",t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX="data-xrna_base_pair_formatted_nucleotide_index",t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0="data-xrna_base_pair_formatted_nucleotide_index_0",t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1="data-xrna_base_pair_formatted_nucleotide_index_1",t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE="data-xrna_base_pair_type",t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME="data-xrna_scene_name",t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG="data-xrna_relative_coordinates_flag",t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT=!0,t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG="data-xrna_invert_y_axis_flag",t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT=!1;var g="rectangle_width",y="rectangle_height",b=/matrix\(1\s+0\s+0\s+1\s+(-?[\d.]+)\s+(-?[\d.]+)\)/,N={defaults:{}};function E(e,n,o){var i,h,I,C,S,_,A,P,T,R,M=e.getAttribute(t.SVG_PROPERTY_XRNA_TYPE);if(null!==M&&(R=M,!v.includes(R)))throw'Unrecognized SvgXrnaDataType "'.concat(M,'"');for(var w=r({},N.root),k=0,O=e.classList;k<O.length;k++){(Z=O[k])in N.defaults&&(w=r(r({},w),N.defaults[Z]))}if(e.tagName in N)for(var L=N[e.tagName],j=0,D=e.classList;j<D.length;j++){var Z;if((Z=D[j])in L){var F=L[Z];w=r(r({},w),F)}}switch(o){case x.XRNA_JS:if(null===M)e.tagName;else{var B=null!==(i=n.invertYAxisFlag)&&void 0!==i?i:t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT;switch(M){case a.SCENE:var U=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME);if(null===U)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME,'" is missing.');n.complexDocumentName=U;var z=e.getAttribute(t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG);if(null==z)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG,'" is missing.');n.relativeCoordinatesFlag="true"===z;var G=e.getAttribute(t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG);if(null==G)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG,'" is missing.');n.invertYAxisFlag="true"===G;break;case a.RNA_COMPLEX:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');n.singularRnaComplexProps={name:Ee,rnaMoleculeProps:{},basePairs:{}};var W=n.rnaComplexProps.length;n.rnaComplexPropsByName[Ee]=n.singularRnaComplexProps;var H=[];n.labelLinesPerRnaComplex=H,n.labelLines[W]=H;var K=[];n.labelContentsPerRnaComplex=K,n.labelContents[W]=K,n.rnaComplexProps.push(n.singularRnaComplexProps),n.temporaryBasePairsPerRnaComplex=[];break;case a.BASE_PAIR:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(yt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0,'" is missing.');if(null===(bt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0,'" is missing.');if(null===(Nt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1,'" is missing.');if(null===(Et=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1,'" is missing.');if(null===(nt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE,'" is missing.');if(!(0,l.isBasePairType)(nt))throw'Unrecognized BasePair.Type "'.concat(nt,'"');var V={rnaMoleculeName0:yt,formattedNucleotideIndex0:Number.parseInt(bt),rnaMoleculeName1:Nt,formattedNucleotideIndex1:Number.parseInt(Et),basePairType:nt};null!==(de=e.getAttribute("stroke"))&&"none"!==de&&(V.color=(0,d.fromCssString)(de)),null!==(Ne=e.getAttribute("fill"))&&"none"!==Ne&&(V.color=(0,d.fromCssString)(Ne)),null!==(pe=e.getAttribute("stroke-width"))&&(V.strokeWidth=Number.parseFloat(pe)),Ee in n.temporaryBasePairsPerRnaComplexName||(n.temporaryBasePairsPerRnaComplexName[Ee]=[]),n.temporaryBasePairsPerRnaComplexName[Ee].push(V);break;case a.RNA_MOLECULE:if(null===(q=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,'" is missing.');if(n.singularRnaMoleculeProps={firstNucleotideIndex:Number.parseInt(q),nucleotideProps:{}},null===(Pe=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(void 0===n.singularRnaComplexProps)throw"cache.singularRnaComplexProps should not be undefined at this point. The input SVG file is broken.";n.singularRnaComplexProps.rnaMoleculeProps[Pe]=n.singularRnaMoleculeProps;break;case a.NUCLEOTIDE:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(!(Ee in n.rnaComplexPropsByName)){var X={name:Ee,rnaMoleculeProps:{},basePairs:{}};n.rnaComplexPropsByName[Ee]=X,n.rnaComplexProps.push(X)}var q,Y=n.rnaComplexPropsByName[Ee];if(null===(Pe=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(q=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,'" is missing.');var Q=Number.parseInt(q);if(!(Pe in Y.rnaMoleculeProps)){var $={firstNucleotideIndex:Q,nucleotideProps:{}};Y.rnaMoleculeProps[Pe]=$}var J=Y.rnaMoleculeProps[Pe];if(null===(We=e.getAttribute("transform")))throw'Required SVG-element property "transform" is missing.';var ee=(0,c.parseAffineMatrix)(We),te=e.getAttribute(t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX);if(null===te)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX,'" is missing.');var ne=Number.parseInt(te),re=e.textContent;if(null===re)throw'Required SVG-element property "textContent" is missing.';if(!s.Nucleotide.isSymbol(re))throw'"'.concat(re,'" is not a valid nucleotide symbol.');var oe=ee[4],ae=ee[5];B&&(ae*=-1);var ie={x:oe,y:ae,symbol:re};J.nucleotideProps[ne-Q]=ie;var le=structuredClone(f.default.DEFAULT);ie.font=le,null!==(ge=e.getAttribute("font-style"))?le.style=ge:void 0!==w.style&&(le.style=w.style),null!==(ye=e.getAttribute("font-weight"))?le.weight=ye:void 0!==w.weight&&(le.weight=w.weight),null!==(be=e.getAttribute("font-family"))?le.family=be:void 0!==w.family&&(le.family=w.family),null!==(xe=e.getAttribute("font-size"))?le.size=xe:void 0!==w.size&&(le.size=w.size),null!==(pe=e.getAttribute("stroke-width"))?ie.strokeWidth=Number.parseFloat(pe):void 0!==w.strokeWidth&&(ie.strokeWidth=w.strokeWidth),null!==(Ne=e.getAttribute("fill"))?ie.color=(0,d.fromCssString)(Ne):void 0!==w.fill&&(ie.color=w.fill);break;case a.LABEL_LINE:var se=Array.from(e.children).filter((function(e){return"polyline"===e.tagName}));if(1!==se.length)throw"Label-line SVG groups must have exactly one polyline child element.";var ue=se[0].getAttribute("points");if(null===ue)throw'Required SVG-element property "points" is missing.';var ce=new Array;ce=ue.split(/\s+/).map((function(e){var t=e.match(/(-?[\d.]+),\s*(-?[\d.]+)/);if(null===t)throw'Required SVG element property "points" does not match the expected format';var n=Number.parseFloat(t[1]),r=Number.parseFloat(t[2]);return B&&(r*=-1),{x:n,y:r}}));var de=e.getAttribute("stroke"),fe=d.BLACK;null!==de?fe=(0,d.fromCssString)(de):void 0!==w.stroke&&(fe=w.stroke);var pe=p.DEFAULT_STROKE_WIDTH,he=e.getAttribute("stroke-width");null!==he?pe=Number.parseFloat(he):void 0!==w.strokeWidth&&(pe=w.strokeWidth);var me={points:ce,color:fe,strokeWidth:pe};if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(Pe=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(Ie=e.getAttribute(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,'" is missing.');var ve=Number.parseInt(Ie);Ee in n.temporaryLabelData||(n.temporaryLabelData[Ee]={}),Pe in(Se=n.temporaryLabelData[Ee])||(Se[Pe]={}),ve in(_e=Se[Pe])||(_e[ve]={}),_e[ve].labelLineProps=me;break;case a.LABEL_CONTENT:if(null===(De=e.textContent))throw'Required SVG-element property "textContent" is missing.';if(null===(We=e.getAttribute("transform")))throw'Required SVG-element property "transform" is missing.';var xe,ge,ye,be;ee=(0,c.parseAffineMatrix)(We),le=structuredClone(f.default.DEFAULT);null!==(xe=e.getAttribute("font-size"))?le.size=xe:void 0!==w.size&&(le.size=w.size),null!==(ge=e.getAttribute("font-style"))?le.style=ge:void 0!==w.style&&(le.style=w.style),null!==(ye=e.getAttribute("font-weight"))?le.weight=ye:void 0!==w.weight&&(le.weight=w.weight),null!==(be=e.getAttribute("font-family"))?le.family=be:void 0!==w.family&&(le.family=w.family);oe=ee[4],ae=ee[5];B&&(ae*=-1);var Ne,Ee,Ie,Ce={content:De,x:oe,y:ae,font:le};if(null!==(Ne=e.getAttribute("fill"))?Ce.color=(0,d.fromCssString)(Ne):void 0!==w.fill&&(Ce.color=w.fill),null!==(pe=e.getAttribute("stroke-width"))?Ce.strokeWidth=Number.parseFloat(pe):void 0!==w.strokeWidth&&(Ce.strokeWidth=w.strokeWidth),null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(Pe=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(Ie=e.getAttribute(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,'" is missing.');var Se,_e;ve=Number.parseInt(Ie);Ee in n.temporaryLabelData||(n.temporaryLabelData[Ee]={}),Pe in(Se=n.temporaryLabelData[Ee])||(Se[Pe]={}),ve in(_e=Se[Pe])||(_e[ve]={}),_e[ve].labelContentProps=Ce;break;case a.PATH:case a.CENTERLINE:break;default:throw'Unrecognized SvgXrnaDataType "'.concat(M,'"')}}break;case x.XRNA_GT:switch(e.tagName){case"g":var Ae=e.getAttribute("id");if(n.mostRecentGroupId=null!==Ae&&void 0!==Ae?Ae:void 0,Ae===m.LETTERS){J={nucleotideProps:{},firstNucleotideIndex:0};n.rnaMoleculeCount++;var Pe="RNA molecule #".concat(n.rnaMoleculeCount);n.currentRnaMoleculeName=Pe,n.singularRnaComplexProps.rnaMoleculeProps[Pe]=J;var Te=n.graphicalAdjustmentsPerRnaComplex;Te[Pe]={},n.graphicalAdjustmentsPerRnaMolecule=Te[Pe]}break;case"text":switch(n.mostRecentGroupId){case m.LETTERS:for(var Re={id:e.getAttribute("id"),transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(g),rectangleHeight:e.getAttribute(y)},Me=0,we=Object.entries(Re);Me<we.length;Me++){var ke=we[Me],Oe=ke[0];if(null===ke[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var Le=Re.id;ne=Number.NaN;if(/^-?\d+$/.test(Le))ne=Number.parseInt(Le);else{var je=Le.match(/^(\w+)_(\w+):(\d+)$/);if(null===je)throw'Unrecognized nucleotide-index format "'.concat(Le,'"');n.currentRnaMoleculeName=je[2],ne=Number.parseInt(je[3])}var De=Re.textContent.trim();if(!s.Nucleotide.isSymbol(De))throw'Unrecognized nucleotide symbol "'.concat(De,'"');if(null===(ct=(We=Re.transform).match(b)))throw'Unrecognized transform format "'.concat(We,'"');ie={symbol:De,x:Number.parseFloat(ct[1]),y:Number.parseFloat(ct[2])};null!==(He={fill:e.getAttribute("fill"),fontFamily:e.getAttribute("font-family"),fontWeight:e.getAttribute("font-weight"),fontStyle:e.getAttribute("font-style"),fontSize:e.getAttribute("font-size")}).fill&&(ie.color=(0,d.fromCssString)(He.fill));le=structuredClone(f.default.DEFAULT);ie.font=le,null!==He.fontFamily&&(le.family=He.fontFamily),null!==He.fontWeight&&(le.weight=He.fontWeight),null!==He.fontStyle&&(le.style=He.fontStyle),null!==He.fontSize&&(le.size=(0,f.parseFontSize)(He.fontSize));var Ze=(0,s.getGraphicalAdjustment)({width:Number.parseFloat(Re.rectangleWidth),height:Number.parseFloat(Re.rectangleHeight)}),Fe=n.currentRnaMoleculeName;if(void 0===Fe)throw"cache.currentRnaMoleculeName should not be undefined at this point.";if(!(Fe in n.singularRnaComplexProps.rnaMoleculeProps)){J={firstNucleotideIndex:0,nucleotideProps:{}};n.singularRnaMoleculeProps=J,n.singularRnaComplexProps.rnaMoleculeProps[Fe]=J;var Be={};n.graphicalAdjustmentsPerRnaMolecule=Be,n.graphicalAdjustmentsPerRnaComplex[Fe]=Be}n.singularRnaMoleculeProps.nucleotideProps[ne]=ie,n.graphicalAdjustmentsPerRnaMolecule[ne]=Ze;break;case m.LABELS_TEXT:Re={transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(g),rectangleHeight:e.getAttribute(y)};for(var Ue=0,ze=Object.entries(Re);Ue<ze.length;Ue++){var Ge=ze[Ue];Oe=Ge[0];if(null===Ge[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var We;if(Re.textContent=Re.textContent.trim(),null===(ct=(We=Re.transform).match(b)))throw"Unrecognized transform format ".concat(We);var He={fontFamily:e.getAttribute("font-family"),fontStyle:e.getAttribute("font-style"),fontWeight:e.getAttribute("font-weight"),fontSize:e.getAttribute("font-size"),color:e.getAttribute("fill")};le=structuredClone(f.default.DEFAULT);null!==He.fontFamily&&(le.family=He.fontFamily),null!==He.fontStyle&&(le.style=He.fontStyle),null!==He.fontWeight&&(le.weight=He.fontWeight),null!==He.fontSize&&(le.size=(0,f.parseFontSize)(He.fontSize));fe=structuredClone(d.BLACK);null!==He.color&&(fe=(0,d.fromCssString)(He.color));oe=Number.parseFloat(ct[1]),ae=Number.parseFloat(ct[2]);var Ke=Number.parseFloat(Re.rectangleWidth),Ve=Number.parseFloat(Re.rectangleHeight);n.labelContentsPerRnaComplex.push({labelContent:{content:Re.textContent,x:oe,y:ae,font:le,color:fe},rectangle:{width:Ke,height:Ve}})}break;case"line":Re={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")};for(var Xe=0,qe=Object.entries(Re);Xe<qe.length;Xe++){var Ye=qe[Xe];Oe=Ye[0];if(null===Ye[1])throw"Required SVG property ".concat(Oe," is missing.")}He={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},fe=d.BLACK;null!==He.color&&(fe=(0,d.fromCssString)(He.color));pe=p.DEFAULT_STROKE_WIDTH;null!==He.strokeWidth&&(pe=Number.parseFloat(He.strokeWidth));var Qe={x:Number.parseFloat(Re.x1),y:Number.parseFloat(Re.y1)},$e={x:Number.parseFloat(Re.x2),y:Number.parseFloat(Re.y2)};switch(n.mostRecentGroupId){case m.BASE_PAIR_LINES:n.basePairLinesPerRnaComplex.push({v0:Qe,v1:$e,basePairType:l.default.Type.CANONICAL,color:fe,strokeWidth:pe});break;case m.LABELS_LINES:n.labelLinesPerRnaComplex.push({v0:Qe,v1:$e,color:fe,strokeWidth:pe})}break;case"circle":if(n.mostRecentGroupId===m.BASE_PAIR_CIRCLES){Re={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")};for(var Je=0,et=Object.entries(Re);Je<et.length;Je++){var tt=et[Je];Oe=tt[0];if(null===tt[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}null!==(He={fill:e.getAttribute("fill")}).fill&&(He.fill=He.fill.trim());var nt=null===He.fill?l.default.Type.MISMATCH:l.default.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(Re.cx),y:Number.parseFloat(Re.cy),basePairType:nt})}}break;case x.UNFORMATTED:switch(e.tagName){case"circle":Re={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")};for(var rt=0,ot=Object.entries(Re);rt<ot.length;rt++){var at=ot[rt];Oe=at[0];if(null===at[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var it=void 0;null!==(He={fill:e.getAttribute("fill")}).fill&&(He.fill=He.fill.trim(),it=(0,d.fromCssString)(He.fill));nt=null===He.fill?l.default.Type.MISMATCH:l.default.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(Re.cx),y:Number.parseFloat(Re.cy),basePairType:nt,color:null!==(h=null!==it&&void 0!==it?it:w.fill)&&void 0!==h?h:w.stroke});break;case"text":De=(Re={textContent:e.textContent}).textContent.trim();for(var lt=0,st=Object.entries(Re);lt<st.length;lt++){var ut=st[lt];Oe=ut[0];if(null===ut[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}He={transform:e.getAttribute("transform"),x:e.getAttribute("x"),y:e.getAttribute("y"),fontFamily:null!==(I=e.getAttribute("font-family"))&&void 0!==I?I:w.family,fontStyle:null!==(C=e.getAttribute("font-style"))&&void 0!==C?C:w.style,fontWeight:null!==(S=e.getAttribute("font-weight"))&&void 0!==S?S:w.weight,fontSize:null!==(_=e.getAttribute("font-size"))&&void 0!==_?_:w.size,color:null!==(P=null!==(A=e.getAttribute("fill"))&&void 0!==A?A:w.fill)&&void 0!==P?P:w.stroke,strokeWidth:null!==(T=e.getAttribute("stroke-width"))&&void 0!==T?T:w.strokeWidth},le=structuredClone(f.default.DEFAULT);He.fontFamily&&(le.family=He.fontFamily),He.fontStyle&&(le.style=He.fontStyle),He.fontWeight&&(le.weight=He.fontWeight),He.fontSize&&("number"==typeof He.fontSize?le.size=He.fontSize:le.size=(0,f.parseFontSize)(He.fontSize));fe=structuredClone(d.BLACK);He.color&&(fe="object"==typeof He.color?He.color:(0,d.fromCssString)(He.color));var ct;oe=0,ae=0;if(null!==He.transform)null!==(ct=He.transform.match(b))&&(oe=Number.parseFloat(ct[1]),ae=Number.parseFloat(ct[2]));null!==He.x&&(oe=Number.parseFloat(He.x)),null!==He.y&&(ae=Number.parseFloat(He.y));pe=p.DEFAULT_STROKE_WIDTH;if(He.strokeWidth&&(pe="number"==typeof He.strokeWidth?He.strokeWidth:Number.parseFloat(He.strokeWidth)),s.Nucleotide.isSymbol(De)){ie={x:oe,y:ae,symbol:De,color:fe,strokeWidth:pe,font:le};n.singularRnaMoleculeProps.nucleotideProps[n.nucleotideCount]=ie,n.nucleotideCount++}else{if(null===(Ke=e.getAttribute(g)))throw'Required SVG property "'.concat(g,'" is missing.');if(null===(Ve=e.getAttribute(y)))throw'Required SVG property "'.concat(y,'" is missing.');n.labelContentsPerRnaComplex.push({labelContent:{x:oe,y:ae,content:De,font:le,color:fe,strokeWidth:pe},rectangle:{width:Number.parseFloat(Ke),height:Number.parseFloat(Ve)}})}break;case"line":Re={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")};for(var dt=0,ft=Object.entries(Re);dt<ft.length;dt++){var pt=ft[dt];Oe=pt[0];if(null===pt[1])throw"Required SVG property ".concat(Oe," is missing.")}He={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},fe=d.BLACK;null!==He.color&&(fe=(0,d.fromCssString)(He.color));pe=p.DEFAULT_STROKE_WIDTH;null!==He.strokeWidth&&(pe=Number.parseFloat(He.strokeWidth));Qe={x:Number.parseFloat(Re.x1),y:Number.parseFloat(Re.y1)},$e={x:Number.parseFloat(Re.x2),y:Number.parseFloat(Re.y2)};n.basePairLinesPerRnaComplex.push({v0:Qe,v1:$e,basePairType:l.default.Type.CANONICAL,color:fe,strokeWidth:pe}),n.labelLinesPerRnaComplex.push({v0:Qe,v1:$e,color:fe,strokeWidth:pe})}break;default:throw"Unhandled switch case."}var ht=Array.from(e.children);n.parentSvgXrnaDataType=null!==M&&void 0!==M?M:void 0;for(var mt=0,vt=ht;mt<vt.length;mt++){E(vt[mt],n,o)}if(M===a.RNA_COMPLEX){Y=n.singularRnaComplexProps;for(var xt=0,gt=n.temporaryBasePairsPerRnaComplex;xt<gt.length;xt++){var yt=(V=gt[xt]).rnaMoleculeName0,bt=V.formattedNucleotideIndex0,Nt=V.rnaMoleculeName1,Et=V.formattedNucleotideIndex1;nt=V.basePairType,fe=V.color,pe=V.strokeWidth;if(!(yt in Y.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(yt,'"');var It=Y.rnaMoleculeProps[yt],Ct=bt-It.firstNucleotideIndex;if(!(Ct in It.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(bt);if(!(Nt in Y.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(Nt,'"');var St=Y.rnaMoleculeProps[Nt],_t=Et-St.firstNucleotideIndex;if(!(_t in St.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(Et);(0,u.insertBasePair)(Y,yt,Ct,Nt,_t,u.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:nt,strokeWidth:pe,color:fe})}}}function I(e){var t={},n=e.split(";");n=n.filter((function(e){return!e.match(/^\s*$/)}));for(var r=0,a=n;r<a.length;r++){var i=a[r],l=o([],i.matchAll(/:/g),!0).map((function(e){return e.index}));if(1!==l.length)throw"Multiple colons found within style string.";var s=l[0],u=i.substring(0,s).trim(),c=i.substring(s+1).trim();switch(u){case"fill":t.fill=(0,d.fromCssString)(c);break;case"stroke":t.stroke=(0,d.fromCssString)(c);break;case"stroke-width":t.strokeWidth=Number.parseFloat(c);break;case"font-size":t.size=c;break;case"font-weight":t.weight=c;break;case"font-family":t.family=c}}return t}t.svgInputFileHandler=function(e){var n,r,a=e.match(/<!\[CDATA\[([\s\S]*)\]\]>/m);if(N={defaults:{}},a){var l=a[1].split("\n");l=l.filter((function(e){return!e.match(/^\s*$/)}));for(var s=0,d=l;s<d.length;s++){var f=d[s].match(/^\s*([\w-.]+)\s*\{(.*)\}\s*$/);if(f){var p=f[1],m=o([],p.matchAll(/\./g),!0).map((function(e){return e.index})),v=void 0,b=void 0;switch(m.length){case 0:v=p,b="";break;case 1:var C=m[0];v=p.substring(0,C),b=p.substring(C+1);break;default:continue}var S=I(f[2]);if(""===v)N.defaults[b]=S;else{v in N||(N[v]={});var _=N[v];if(""===b)_.default=S;else _[b]=S}}}}var A=[],P={rnaComplexProps:A,graphicalAdjustments:{},basePairLinesPerRnaComplex:[],basePairCentersPerRnaComplex:[],rnaMoleculeCount:0,nucleotideCount:0,labelLines:{},labelContents:{},transform:(0,c.identity)(),rnaComplexPropsByName:{},temporaryBasePairsPerRnaComplexName:{},temporaryLabelData:{}},T=x.UNFORMATTED;if(/data-xrna_type/.test(e))T=x.XRNA_JS;else if(/id\s*=\s*"Letters"/.test(e)){T=x.XRNA_GT;var R={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}},M=A.length;A.push(R),P.singularRnaComplexProps=R;var w=[];P.labelLinesPerRnaComplex=w,P.labelLines[M]=w;var k=[];P.labelContentsPerRnaComplex=k,P.labelContents[M]=k,P.graphicalAdjustments[M]={},P.graphicalAdjustmentsPerRnaComplex=P.graphicalAdjustments[0]}else{T=x.UNFORMATTED;R={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}};A.push(R),P.singularRnaComplexProps=R;P.graphicalAdjustments[0]={},P.labelLines[0]=[],P.labelContents[0]=[],P.graphicalAdjustmentsPerRnaComplex=P.graphicalAdjustments[0];var O={firstNucleotideIndex:1,nucleotideProps:{}},L="RNA molecule";P.currentRnaMoleculeName=L,R.rnaMoleculeProps[L]=O,P.singularRnaMoleculeProps=O,P.graphicalAdjustmentsPerRnaComplex[L]={},P.graphicalAdjustmentsPerRnaMolecule=P.graphicalAdjustmentsPerRnaComplex[L],P.labelLinesPerRnaComplex=[],P.labelContentsPerRnaComplex=[]}if([x.UNFORMATTED,x.XRNA_GT].includes(T)){var j=document.getElementById(i.TEST_SPACE_ID);j.innerHTML=e;for(var D=0,Z=Array.from(j.querySelectorAll("text"));D<Z.length;D++){var F=Z[D],B=F.getBBox();F.setAttribute(g,"".concat(B.width)),F.setAttribute(y,"".concat(B.height))}e=j.innerHTML,j.innerHTML=""}var U=(new DOMParser).parseFromString(e,"image/svg+xml"),z=Array.from(U.children),G=U.querySelector("svg");if(!G)throw"No svg element was found within the input file.";var W=I(G.style.cssText);N.root=W;for(var H=0,K=z;H<K.length;H++){E(K[H],P,T)}function V(){for(var e=0,t=Object.values(A);e<t.length;e++)for(var n=t[e].rnaMoleculeProps,r=0,o=Object.entries(n);r<o.length;r++){var a=o[r],i=a[0],l=a[1];0===Object.values(l.nucleotideProps).length&&delete n[i]}}switch(T){case x.XRNA_JS:for(var X=null!==(n=P.relativeCoordinatesFlag)&&void 0!==n?n:t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT,q=0,Y=Object.keys(P.temporaryBasePairsPerRnaComplexName);q<Y.length;q++){if(!((de=Y[q])in P.temporaryBasePairsPerRnaComplexName))throw'A base pair within the input file referenced RNA complex "'.concat(de,'," which was not present within the input file.');R=P.rnaComplexPropsByName[de];for(var Q=0,$=P.temporaryBasePairsPerRnaComplexName[de];Q<$.length;Q++){var J=$[Q],ee=J.rnaMoleculeName0,te=J.rnaMoleculeName1,ne=J.formattedNucleotideIndex0,re=J.formattedNucleotideIndex1,oe=J.basePairType,ae=J.strokeWidth,ie=J.color;if(!(ee in R.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(ee,'," which was not present within the RNA complex.');var le=R.rnaMoleculeProps[ee];if(!(te in R.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(te,'," which was not present within the RNA complex.');var se=R.rnaMoleculeProps[te];(0,u.insertBasePair)(R,ee,ne-le.firstNucleotideIndex,te,re-se.firstNucleotideIndex,u.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:oe,strokeWidth:ae,color:ie})}}for(var ue=0,ce=Object.keys(P.temporaryLabelData);ue<ce.length;ue++){var de=ce[ue],fe=P.temporaryLabelData[de];if(!(de in P.rnaComplexPropsByName))throw'RNA-complex name "'.concat(de,'" was referenced by a label, but was not present in the input file.');R=P.rnaComplexPropsByName[de];for(var pe=0,he=Object.keys(fe);pe<he.length;pe++){var me=fe[L=he[pe]];if(!(L in R.rnaMoleculeProps))throw'RNA-molecule name "'.concat(L,'" was referenced by a label, but was not present in the input file.');O=R.rnaMoleculeProps[L];for(var ve=0,xe=Object.keys(me);ve<xe.length;ve++){var ge=xe[ve],ye=Number.parseInt(ge),be=me[ye],Ne=be.labelLineProps,Ee=be.labelContentProps,Ie=ye-O.firstNucleotideIndex,Ce=O.nucleotideProps[Ie];if(void 0!==Ne){if(!X)for(var Se=0,_e=Ne.points;Se<_e.length;Se++){var Ae=_e[Se];Ae.x-=Ce.x,Ae.y-=Ce.y}Ce.labelLineProps=Ne}void 0!==Ee&&(Ce.labelContentProps=Ee,Ee.x-=Ce.x,Ee.y-=Ce.y)}}}break;case x.XRNA_GT:V();for(var Pe=0,Te=Object.entries(P.labelContents);Pe<Te.length;Pe++)for(var Re=Te[Pe],Me=(Re[0],0),we=k=Re[1];Me<we.length;Me++){var ke=we[Me],Oe=ke.labelContent;B=ke.rectangle;Oe.x-=.125*B.width,Oe.y+=.25*B.height}(0,h.parseGraphicalData)(A,{0:P.basePairLinesPerRnaComplex},{0:P.basePairCentersPerRnaComplex},P.graphicalAdjustments,P.labelLines,P.labelContents);break;case x.UNFORMATTED:V(),(0,h.parseGraphicalData)(A,{0:P.basePairLinesPerRnaComplex},{0:P.basePairCentersPerRnaComplex},P.graphicalAdjustments,P.labelLines,P.labelContents);break;default:throw"Unhandled switch case."}return{complexDocumentName:null!==(r=P.complexDocumentName)&&void 0!==r?r:"Scene",rnaComplexProps:A}}},7475:function(e,t,n){"use strict";n.r(t),n.d(t,{xrnaInputFileHandler:function(){return d}});var r=n(1413),o=n(9439),a=n(7762),i=n(9287),l=n(6048),s=n(3871),u=n(433),c=n(6176),d=function(e){function t(e,n,d){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{singularRnaComplexProps:null,singularRnaMoleculeProps:null,rnaMoleculeName:null,partialBasePairs:new Array},p={tagName:e.tagName};switch(e.tagName){case"ComplexDocument":n.complexDocumentName=e.getAttribute("Name");break;case"Complex":f.singularRnaComplexProps={name:e.getAttribute("Name"),rnaMoleculeProps:{},basePairs:{}},n.rnaComplexProps.push(f.singularRnaComplexProps);break;case"RNAMolecule":var h=e.getAttribute("Name");f.singularRnaMoleculeProps={firstNucleotideIndex:0,nucleotideProps:[]},f.rnaMoleculeName=h,f.singularRnaComplexProps.rnaMoleculeProps[h]=f.singularRnaMoleculeProps;break;case"NucListData":var m=f.singularRnaComplexProps,v=f.singularRnaMoleculeProps,x=e.getAttribute("StartNucID");if(null!=x){var g=Number.parseInt(x);if(Number.isNaN(g))throw new Error("This <NucListData>.StartNucID is a non-integer: ".concat(x));v.firstNucleotideIndex=g}var y={};e.getAttribute("DataType").split(".").forEach((function(e,t){y[t]=e}));var b,N=0,E={},I=f.rnaMoleculeName,C=(0,a.Z)(e.textContent.split("\n"));try{var S=function(){var e=b.value;if(/^\s*$/.test(e))return"continue";var t=i.Nucleotide.Symbol.A,n=NaN,r=NaN,o=NaN,a=NaN;e.split(/\s+/).forEach((function(e,l){switch(y[l]){case"NucChar":if(!i.Nucleotide.symbols.some((function(t){return e===t})))throw new Error("This input NucChar is not a <Nucleotide.Symbol>: ".concat(e));t=e;break;case"NucID":if(n=Number.parseInt(e)-v.firstNucleotideIndex,Number.isNaN(n))throw new Error("This input <NucListData>.NucID is a non-integer: ".concat(e));N=n;break;case"XPos":if(r=Number.parseFloat(e),Number.isNaN(r))throw new Error("This input <NucListData>.XPos is not a number: ".concat(e));break;case"YPos":if(o=Number.parseFloat(e),Number.isNaN(o))throw new Error("This input <NucListData>.YPos is not a number: ".concat(e));break;case"FormatType":break;case"BPID":if(a=Number.parseInt(e),Number.isNaN(a))throw new Error("This input <NucListData>.BPID is a non-integer: ".concat(e));E[n]=a-v.firstNucleotideIndex}})),Number.isNaN(n)&&(n=N),N++;var l={symbol:t,x:r,y:o};if(n in v.nucleotideProps)throw new Error("This input <NucListData>.NucID is a duplicate: ".concat(n));v.nucleotideProps[n]=l};for(C.s();!(b=C.n()).done;)S()}catch(oe){C.e(oe)}finally{C.f()}for(var _=0,A=Object.entries(E);_<A.length;_++){var P=(0,o.Z)(A[_],2),T=P[0],R=P[1],M=Number.parseInt(T);if(!(R in v.nucleotideProps))throw new Error("This <NucListData>.BPID is outside the set of expected nucleotide indices. Found ".concat(R+v.firstNucleotideIndex));(0,l.insertBasePair)(m,I,M,I,R,l.DuplicateBasePairKeysHandler.DO_NOTHING)}break;case"BasePairs":var w=f.singularRnaMoleculeProps,k=e.getAttribute("nucID"),O=Number.parseInt(k);if(Number.isNaN(O))throw new Error("This <BasePairs>.nucID is a non-integer: ".concat(k));O-=w.firstNucleotideIndex;var L=e.getAttribute("bpNucID"),j=Number.parseInt(L);if(Number.isNaN(j))throw new Error("This <BasePairs>.bpNucID is a non-integer: ".concat(L));var D=e.getAttribute("length"),Z=Number.parseInt(D);if(Number.isNaN(Z))throw new Error("This <BasePairs>.length is a non-integer: ".concat(D));var F=f.rnaMoleculeName,B=e.getAttribute("bpName"),U=null!==B&&void 0!==B?B:F;f.partialBasePairs.push({rnaMoleculeName:F,nucleotideIndex:O,basePairRnaMoleculeName:U,unnormalizedBasePairNucleotideIndex:j,length:Z});break;case"Nuc":var z=e.getAttribute("Color"),G=null;null!==z&&(G=(0,s.fromHexadecimal)(z,s.ColorFormat.RGB));var W=e.getAttribute("FontID"),H=null;if(null!==W){var K=Number.parseInt(W);if(Number.isNaN(K))throw new Error("This <Nuc>.FontID attribute is non-integer: ".concat(W));H=u.PartialFont.fromFontId(K)}var V=e.getAttribute("FontSize"),X=null;if(null!==V&&(X=Number.parseFloat(V),Number.isNaN(X)))throw new Error("This <Nuc>.FontSize attribute is non-numeric: ".concat(V));var q=[],Y=f.singularRnaMoleculeProps.firstNucleotideIndex,Q=e.getAttribute("RefID");if(null!==Q){var $=Number.parseInt(Q)-Y;if(Number.isNaN($))throw new Error("This <Nuc>.RefID is a non-integer: ".concat(Q));q.push($),p.referencedNucleotideIndex=$}var J=e.getAttribute("RefIDs");if(null!==J){var ee=J.replace(/\s+/,"");if(!/^(-?\d+(--?\d+)?(,-?\d+(--?\d+)?)*)$/.test(ee))throw new Error("This <Nuc>.RefIDs attribute did not match the expected format: ".concat(J));ee.split(",").forEach((function(e){var t=e.match(/^(-?\d+)(?:-(-?\d+))?$/),n=Number.parseInt(t[1]);if(Number.isNaN(n))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(t[1]));if(n-=Y,void 0===t[2])q.push(Number.parseInt(t[1])-Y);else{var r=Number.parseInt(t[2]);if(Number.isNaN(r))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(r));if(n>(r-=Y)){var o=n;n=r,r=o}for(var a=n;a<=r;a++)q.push(a)}}))}var te=f.singularRnaMoleculeProps;q.forEach((function(e){var t;if(!(e in te.nucleotideProps))throw new Error("The referenced nucleotide index indexes a non-existent Nucleotide: ".concat(e));t=te.nucleotideProps[e],null!==G&&(t.color=G),null!==X&&(void 0===t.font&&(t.font=structuredClone(u.default.DEFAULT)),t.font.size=X),null!==H&&void 0===t.font&&(t.font=(0,r.Z)((0,r.Z)({},u.default.DEFAULT),H))}));break;case"LabelList":if("Nuc"===d.tagName){if(null===d.referencedNucleotideIndex)throw new Error("This <Nuc> had no attribute <RefID>");var ne=f.singularRnaMoleculeProps.nucleotideProps[d.referencedNucleotideIndex];e.textContent.split("\n").forEach((function(e){var t=e.trim().split(/\s+/);switch(t[0]){case"l":if(t.length<7)throw new Error("This <LabelList> label-line line has too few entries.");var n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],l=Number.parseFloat(n),d=Number.parseFloat(r),f=Number.parseFloat(o),p=Number.parseFloat(a),h=Number.parseFloat(i);if(Number.isNaN(l))throw new Error("This <LabelList> label-line line has a non-numeric x0 value: ".concat(n));if(Number.isNaN(d))throw new Error("This <LabelList> label-line line has a non-numeric y0 value: ".concat(r));if(Number.isNaN(f))throw new Error("This <LabelList> label-line line has a non-numeric x1 value: ".concat(o));if(Number.isNaN(p))throw new Error("This <LabelList> label-line line has a non-numeric y1 value: ".concat(a));if(Number.isNaN(h))throw new Error("This <LabelList> label-line line has a non-numeric strokeWidth value: ".concat(i));ne.labelLineProps={points:[{x:l,y:d},{x:f,y:p}],color:(0,s.fromHexadecimal)(t[6],s.ColorFormat.RGB),strokeWidth:h};break;case"s":if(t.length<8)throw new Error("This <LabelList> label-content line has too few entries.");var m=t[1],v=t[2],x=t[4],g=t[5],y=t[6],b=t[7],N=Number.parseFloat(m),E=Number.parseFloat(v),I=Number.parseFloat(x),C=Number.parseInt(g),S=(0,s.fromHexadecimal)(y,s.ColorFormat.RGB),_=b.match(/^"(.*)"$/);if(Number.isNaN(N))throw new Error("This <LabelList> label-content line has a non-numeric x value: ".concat(m));if(Number.isNaN(E))throw new Error("This <LabelList> label-content line has a non-numeric y value: ".concat(v));if(Number.isNaN(I))throw new Error("This <LabelList> label-content line has a non-numeric fontSize value: ".concat(x));if(Number.isNaN(C))throw new Error("This <LabelList> label-content line has a non-numeric fontId value: ".concat(g));if(null===_)throw new Error("This <LabelList> label-content line has a content value with an unrecognized format: ".concat(b));ne.labelContentProps={x:N,y:E,content:_[1],color:S,strokeWidth:c.DEFAULT_STROKE_WIDTH,font:u.default.fromFontId(C,I)}}}))}}if(Array.from(e.children).forEach((function(e){t(e,n,p,f)})),"Complex"===e.tagName){var re=f.singularRnaComplexProps;f.partialBasePairs.forEach((function(e){for(var t=e.basePairRnaMoleculeName,n=re.rnaMoleculeProps[t],r=e.unnormalizedBasePairNucleotideIndex-n.firstNucleotideIndex,o=0;o<e.length;o++)(0,l.insertBasePair)(re,e.rnaMoleculeName,e.nucleotideIndex+o,t,r-o,l.DuplicateBasePairKeysHandler.DO_NOTHING)}))}}e.startsWith("<!DOCTYPE")||(e+="<!DOCTYPE ComplexDocument [\n<!ELEMENT ComplexDocument (SceneNodeGeom?, ComplexDocument*, Label*, LabelList*, Complex*, WithComplex*)>\n<!ATTLIST ComplexDocument Name CDATA #REQUIRED Author CDATA #IMPLIED ExpandUponWrite CDATA #IMPLIED PSScale CDATA #IMPLIED LandscapeMode CDATA #IMPLIED> \n<!ELEMENT Complex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST Complex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT WithComplex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST WithComplex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT RnaMolecule (SceneNodeGeom?, Label*, LabelList*, Nuc*, NucSegment*, (NucListData | Nuc)*, RNAFile*, BasePairs*, BasePair*, Parent?, AlignmentFile?)>\n<!ATTLIST RnaMolecule Name CDATA #REQUIRED Author CDATA #IMPLIED>\n\x3c!-- parent is like for e.coli being the numbering --\x3e \n<!ELEMENT Parent (RnaMolecule)>\n<!ELEMENT AlignmentFile (#PCDATA)> \n<!ELEMENT BasePairs EMPTY>\n<!ATTLIST BasePairs nucID CDATA #REQUIRED bpNucID CDATA #REQUIRED length CDATA #REQUIRED bpName CDATA #IMPLIED>\n\x3c!-- BasePair can be used after above BasePairs is implemented and refers to base pairs already set, even across strands. --\x3e\n<!ELEMENT BasePair EMPTY>\n<!ATTLIST BasePair RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED Type (Canonical | Wobble | MisMatch | Weak | Phosphate | Unknown) 'Unknown' Line5PDeltaX CDATA #IMPLIED Line5PDeltaY CDATA #IMPLIED Line3PDeltaX CDATA #IMPLIED Line3PDeltaY CDATA #IMPLIED LabelDeltaX CDATA #IMPLIED LabelDeltaY CDATA #IMPLIED Label5PSide CDATA #IMPLIED> \n<!ELEMENT NucListData (#PCDATA)>\n<!ATTLIST NucListData StartNucID CDATA #IMPLIED DataType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'> \n<!ELEMENT Label (StringLabel | CircleLabel | Trianglelabel | LineLabel | ParallelogramLabel)>\n<!ATTLIST Label XPos CDATA #REQUIRED YPos CDATA #REQUIRED Color CDATA #IMPLIED>\n<!ELEMENT StringLabel EMPTY> \n<!ATTLIST StringLabel FontName CDATA #IMPLIED FontType CDATA #IMPLIED FontSize CDATA #REQUIRED Angle CDATA #IMPLIED  Text CDATA #REQUIRED>\n<!ELEMENT CircleLabel EMPTY> \n<!ATTLIST CircleLabel Arc0 CDATA #IMPLIED Arc1 CDATA #IMPLIED Radius CDATA #IMPLIED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT TriangleLabel EMPTY>\n<!ATTLIST TriangleLabel TopPtX CDATA #REQUIRED TopPtY CDATA #REQUIRED LeftPtX CDATA #REQUIRED LeftPtY CDATA #REQUIRED RightPtX CDATA #REQUIRED RightPtY CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT LineLabel EMPTY> \n<!ATTLIST LineLabel X1 CDATA #REQUIRED Y1 CDATA #REQUIRED LineWidth CDATA #IMPLIED> \n<!ELEMENT ParallelogramLabel EMPTY>\n<!ATTLIST ParallelogramLabel Angle1 CDATA #REQUIRED Side1 CDATA #REQUIRED Angle2 CDATA #REQUIRED Side2 CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED> \n<!ELEMENT LabelList (#PCDATA)>\n<!ELEMENT NucSegment (NucChars)> \n<!ATTLIST NucSegment StartNucID CDATA #IMPLIED> \n<!ELEMENT NucChars (#PCDATA)>\n<!ELEMENT NucSymbol (#PCDATA)> \n<!ELEMENT Nuc (Label*, LabelList?, NucSymbol?)>\n<!ATTLIST Nuc NucID CDATA #IMPLIED NucChar CDATA #IMPLIED XPos CDATA #IMPLIED YPos CDATA #IMPLIED Color CDATA #IMPLIED FontID CDATA #IMPLIED FontSize CDATA #IMPLIED FormatType CDATA #IMPLIED BPParent CDATA #IMPLIED BPNucID CDATA #IMPLIED RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED IsHidden CDATA #IMPLIED GroupName CDATA #IMPLIED IsSchematic CDATA #IMPLIED SchematicColor CDATA #IMPLIED SchematicLineWidth CDATA #IMPLIED SchematicBPLineWidth CDATA #IMPLIED SchematicBPGap CDATA #IMPLIED SchematicFPGap CDATA #IMPLIED SchematicTPGap CDATA #IMPLIED IsNucPath CDATA #IMPLIED NucPathColor CDATA #IMPLIED NucPathLineWidth CDATA #IMPLIED>\n<!ELEMENT RNAFile EMPTY>\n<!ATTLIST RNAFile FileName CDATA #REQUIRED FileType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'>\n<!ELEMENT SceneNodeGeom EMPTY>\n<!ATTLIST SceneNodeGeom CenterX CDATA #IMPLIED CenterY CDATA #IMPLIED Scale CDATA #IMPLIED>\n]>\n"+e);var n={rnaComplexProps:new Array,complexDocumentName:""};return Array.from((new DOMParser).parseFromString(e,"text/xml").children).forEach((function(e){t(e,n,{tagName:""})})),n}},9967:function(e,t,n){"use strict";n.d(t,{Uq:function(){return he},RG:function(){return Ie},aN:function(){return Ne},P7:function(){return Se},qs:function(){return be},aU:function(){return ge},qj:function(){return xe},bc:function(){return ye},En:function(){return Ee}});var r,o,a=n(4942),i=n(9439),l=n(3433),s=n(7762),u=n(2791),c=n(4212),d=n(6048),f=n(3413),p=n(1413),h=n(5671),m=n(3144),v=n(136),x=n(516),g=n(8161),y=n(1702),b=n(7361),N=n(7457),E=n(6176),I=n(7089),C=n(3871),S=n(433),_=n(7587),A=n(184);!function(e){e.populateRegions=function(e,t,n){var r=Number.NaN,o=Number.NaN;t.sort(N.subtractNumbers);for(var a=0;a<t.length;a++){var i=t[a];e.has(i)?(Number.isNaN(r)||n.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o}),r=Number.NaN):(Number.isNaN(r)&&(r=i),o=i)}Number.isNaN(r)||n.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o})};var t=function(e){return e.CREATE="create",e.DELETE="delete",e}({});e.Component=function(e){var n=e.regions,r=e.rnaComplexProps,a=e.setNucleotideKeysToRerender,c=(0,u.useContext)(f._.BasePair.AverageDistances),d=(0,u.useContext)(f._.Label.Content.DefaultStyles),h=(0,u.useContext)(f._.App.PushToUndoStack),m=(0,_.Fg)().theme,v=(0,u.useState)(!0),x=(0,i.Z)(v,2),g=x[0],P=x[1],T=(0,u.useState)(!0),R=(0,i.Z)(T,2),M=R[0],w=R[1],k=(0,u.useState)(!1),O=(0,i.Z)(k,2),L=O[0],j=O[1],D=(0,u.useState)(10),Z=(0,i.Z)(D,2),F=Z[0],B=Z[1],U=(0,u.useState)(Ce().startingNucleotideIndicesPerRegion),z=(0,i.Z)(U,2),G=z[0],W=z[1],H=(0,u.useState)(Ce().startingNucleotideOverridingIndicesForLabelsPerRegion),K=(0,i.Z)(H,2),V=K[0],X=K[1],q=(0,u.useState)(!0),Y=(0,i.Z)(q,2),Q=Y[0],$=Y[1],J=(0,u.useState)(!1),ee=(0,i.Z)(J,2),te=(ee[0],ee[1],(0,u.useState)(void 0)),ne=(0,i.Z)(te,2),re=ne[0],oe=ne[1],ae=(0,u.useState)(-1),ie=(0,i.Z)(ae,2),le=ie[0],se=ie[1],ue=(0,u.useState)(-1),ce=(0,i.Z)(ue,2),de=ce[0],fe=ce[1],pe=(0,u.useState)(-1),he=(0,i.Z)(pe,2),me=he[0],ve=he[1],xe=(0,u.useState)(void 0),ge=(0,i.Z)(xe,2),ye=ge[0],be=ge[1];function Ne(e,t,n,r){V[e][t][n]=r,X(structuredClone(V))}function Ee(e,t){var n=e[t],r=t-1,o=r in e,a=t+1,i=a in e;if(o&&i){var l=.5*((0,b.asAngle)((0,b.subtract)(n,e[r]))+(0,b.asAngle)((0,b.subtract)(e[a],n)));return(0,b.toNormalCartesian)(l)}return o?(0,b.normalize)((0,b.subtract)(n,e[r])):i?(0,b.normalize)((0,b.subtract)(e[a],n)):{x:1,y:0}}function Ie(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,i={};for(var l in n){var s=Number.parseInt(l);s in i||(i[s]={});var u=i[s],c=Pe.averageDistances[s],f=Pe.rightOrthogonalizationFlagRecord[s],h=G[s],m=V[s],v=n[s],x=r[s].rnaMoleculeProps;for(var y in v){y in u||(u[y]=[]);for(var I=u[y],_=c[y],A=f[y],P=h[y],T=m[y],R=v[y],w=x[y],k=w.nucleotideProps,O=0;O<R.length;O++)for(var j=R[O],D=(j.minimumNucleotideIndexInclusive,j.maximumNucleotideIndexInclusive),Z=P[O],B=T[O]-Z,U=void 0!==re?Math.min(re,D):D,z=Z;z<=U;z+=o)if(z in k){var W=k[z];if(M||g)switch(I.push(z),e){case t.CREATE:var H=Ee(k,z),K=(A?b.orthogonalizeRight:b.orthogonalizeLeft)(H);if(g&&(void 0===W.labelLineProps||L)&&(W.labelLineProps={points:[(0,b.scaleUp)(K,_.labelPoint0Distance),(0,b.scaleUp)(K,_.labelPoint1Distance)]}),M&&(void 0===W.labelContentProps||L)){var X,q=(0,b.asAngle)(K),Y=.125*Math.cos(2*q),Q=null!==(X=d[s][y])&&void 0!==X?X:{color:structuredClone(C.BLACK),font:structuredClone(S.default.DEFAULT)};W.labelContentProps=(0,p.Z)((0,p.Z)({},(0,b.scaleUp)(K,_.labelContentDistance*(1+Y))),{},{content:"".concat(z+w.firstNucleotideIndex+B),font:structuredClone(Q.font),color:structuredClone(Q.color),strokeWidth:E.DEFAULT_STROKE_WIDTH})}break;case t.DELETE:g&&delete W.labelLineProps,M&&delete W.labelContentProps;break;default:throw"Unhandled switch case."}}}}for(var $=0,J=Object.values(i);$<J.length;$++)for(var ee=J[$],te=0,ne=Object.values(ee);te<ne.length;te++){ne[te].sort(N.subtractNumbers)}a(i)}function Ce(){var e={},t={};for(var r in n){var o=Number.parseInt(r),a=n[o];e[o]={};var i=e[o];t[o]={};var l=t[o];for(var s in a){var u=a[s];i[s]=[];var c=i[s];l[s]=[];for(var d=l[s],f=0;f<u.length;f++){var p=u[f];c.push(p.minimumNucleotideIndexInclusive),d.push(p.minimumNucleotideIndexInclusive)}}}return{startingNucleotideIndicesPerRegion:e,startingNucleotideOverridingIndicesForLabelsPerRegion:t}}var Se=(0,u.useMemo)((function(){if(-1!==le&&-1!==de&&-1!==me)return r[le].rnaMoleculeProps[de].firstNucleotideIndex}),[le,de,me]),_e=(0,u.useMemo)((function(){var e,t;if(-1!==le&&-1!==de&&-1!==me)return null===(e=G[le])||void 0===e||null===(t=e[de])||void 0===t?void 0:t[me]}),[le,de,me,G]),Ae=(0,u.useMemo)((function(){var e,t;if(-1!==le&&-1!==de&&-1!==me)return null===(e=V[le])||void 0===e||null===(t=e[de])||void 0===t?void 0:t[me]}),[le,de,me,V]),Pe=(0,u.useMemo)((function(){var e={},t={};for(var n in r){var o=Number.parseInt(n);e[o]={};var a,i=e[o],u=c[o],d=f._.BasePair.DEFAULT_DISTANCES.canonical,p=(0,s.Z)(I.default.types);try{for(p.s();!(a=p.n()).done;){var h=a.value,m=u.distances[h];if(m!==Number.POSITIVE_INFINITY&&!Number.isNaN(m)){d=m;break}}}catch(F){p.e(F)}finally{p.f()}t[o]={};var v=t[o],x=r[o].rnaMoleculeProps;for(var g in x){i[g]={labelPoint0Distance:.25*d,labelPoint1Distance:.75*d,labelContentDistance:d};var y=i[g],E=0,C=x[g].nucleotideProps,S=0,_=0,A={labelPoint0:0,labelPoint1:0,labelContent:0};for(var P in C){var T=Number.parseInt(P),R=C[T],M=Ee(C,T);if(void 0!==R.labelLineProps){S++;var w=R.labelLineProps.points;if(w.length>0){var k=w.map(b.magnitude),O=Math.min.apply(Math,(0,l.Z)(k)),L=w[0];if(A.labelPoint0+=O,E-=(0,N.sign)((0,b.crossProduct)(M,L)),w.length>1){var j=Math.max.apply(Math,(0,l.Z)(k)),D=w[1];A.labelPoint1+=j,E-=(0,N.sign)((0,b.crossProduct)(M,D))}}}void 0!==R.labelContentProps&&(_++,A.labelContent+=(0,b.magnitude)(R.labelContentProps),E-=(0,N.sign)((0,b.crossProduct)(M,R.labelContentProps)))}if(0!==_&&(y.labelContentDistance=A.labelContent/_),S){var Z=1/S;y.labelPoint0Distance=A.labelPoint0*Z,y.labelPoint1Distance=A.labelPoint1*Z}v[g]=E>0}}return{averageDistances:e,rightOrthogonalizationFlagRecord:t}}),[]);(0,u.useEffect)((function(){var e=Ce(),t=e.startingNucleotideIndicesPerRegion,n=e.startingNucleotideOverridingIndicesForLabelsPerRegion;W(t),X(n)}),[n]),(0,u.useEffect)((function(){var e=Object.entries(n);if(1===e.length){var t=(0,i.Z)(e[0],2),r=t[0],o=t[1],a=Number.parseInt(r);se(a);var l=Object.keys(o);if(1===l.length){var s=l[0];fe(s);var u=o[s];1===u.length&&(ve(0),be(u[0]))}}else se(-1),fe(-1),ve(-1),be(void 0)}),[n]);var Te=function(e){var t=e.label,n=e.checked,r=e.onChange;return(0,A.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",cursor:"pointer",userSelect:"none"},children:[(0,A.jsx)("input",{type:"checkbox",checked:n,onChange:r,style:{width:"16px",height:"16px",cursor:"pointer",accentColor:m.colors.primary}}),(0,A.jsx)("span",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,lineHeight:"1.4"},children:t})]})},Re=function(e){var t=e.title,n=e.children,r=e.defaultCollapsed,o=void 0!==r&&r,a=(0,u.useState)(o),l=(0,i.Z)(a,2),s=l[0],c=l[1];return(0,A.jsxs)("div",{style:{background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"8px",overflow:"hidden",marginBottom:"16px"},children:[(0,A.jsxs)("div",{onClick:function(){return c(!s)},style:{padding:"16px 20px",background:m.colors.background,borderBottom:s?"none":"1px solid ".concat(m.colors.border),cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",userSelect:"none"},children:[(0,A.jsx)("h3",{style:{margin:0,fontSize:m.typography.fontSize.sm,fontWeight:"600",color:m.colors.text},children:t}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.lg,color:m.colors.textSecondary,transform:s?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),!s&&(0,A.jsx)("div",{style:{padding:"20px"},children:n})]})};return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"16px",background:m.colors.background,minHeight:"100%"},children:[(0,A.jsx)(Re,{title:"Region Information",children:(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Selected Region"}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,padding:"8px 12px",background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"4px"},children:void 0!==ye&&void 0!==Se?"Range: ".concat(ye.minimumNucleotideIndexInclusive+Se," - ").concat(ye.maximumNucleotideIndexInclusive+Se):"No region selected"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Current Settings"}),(0,A.jsxs)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,padding:"8px 12px",background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"4px"},children:["Increment: ",F," |",g?" Lines":"",M?" Text":""]})]})]})}),(0,A.jsxs)(Re,{title:"Labeling Controls",children:[(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Start Index"}),(0,A.jsx)(y.Z.Integer,{value:void 0!==_e&&void 0!==Se?_e+Se:1,setValue:function(e){if(-1!==le&&-1!==de&&-1!==me){var t=e-(null!==Se&&void 0!==Se?Se:0);n=de,r=me,o=t,G[le][n][r]=o,W(structuredClone(G)),Q&&Ne(le,de,me,t)}var n,r,o},min:void 0!==ye&&void 0!==Se?ye.minimumNucleotideIndexInclusive+Se:1,max:void 0!==ye&&void 0!==Se?ye.maximumNucleotideIndexInclusive+Se:Number.MAX_SAFE_INTEGER}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Where to start labeling"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Override Start (Optional)"}),(0,A.jsx)(y.Z.Integer,{value:void 0!==Ae&&void 0!==Se?Ae+Se:1,setValue:function(e){if(-1!==le&&-1!==de&&-1!==me){var t=r[le].rnaMoleculeProps[de];Ne(le,de,me,e-t.firstNucleotideIndex)}},min:1}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Custom label numbering offset"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Increment"}),(0,A.jsx)(y.Z.Integer,{value:F,setValue:B,min:1}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Label every Nth nucleotide"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"End Index (Optional)"}),(0,A.jsx)(y.Z.Integer,{value:null!==re&&void 0!==re?re:0,setValue:function(e){return oe(0===e?void 0:e)},min:void 0!==_e&&void 0!==Se?_e+Se+1:1,max:void 0!==ye&&void 0!==Se?ye.maximumNucleotideIndexInclusive+Se:Number.MAX_SAFE_INTEGER,valueToString:function(e){return 0===e?"":e.toString()},stringToValue:function(e){if(""===e||"0"===e)return 0;var t=(0,E.parseIntReturnUndefinedOnFail)(e);if(void 0!==t){if(void 0!==_e&&void 0!==Se&&t<=_e+Se)return{errorMessage:"End index must be greater than start index"};if(void 0!==ye&&void 0!==Se&&t>ye.maximumNucleotideIndexInclusive+Se)return{errorMessage:"End index cannot exceed sequence length"}}return t}}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:void 0!==_e&&void 0!==Se&&void 0!==ye?"Leave empty to label entire region (min: ".concat(_e+Se+1,", max: ").concat(ye.maximumNucleotideIndexInclusive+Se,")"):"Leave empty to label entire region"})]})]}),(0,A.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"20px",borderTop:"1px solid ".concat(m.colors.border)},children:[(0,A.jsx)("button",{onClick:function(e){h(),Ie(t.CREATE)},style:{flex:1,padding:"12px 16px",background:m.colors.primary,color:"white",border:"none",fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"background-color 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.primaryHover||m.colors.primary},onMouseOut:function(e){e.currentTarget.style.background=m.colors.primary},children:"Create Annotations"}),(0,A.jsx)("button",{onClick:function(e){h(),Ie(t.DELETE,1)},style:{flex:1,padding:"12px 16px",background:"transparent",color:m.colors.textSecondary,border:"1px solid ".concat(m.colors.border),fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.surface,e.currentTarget.style.borderColor=m.colors.textSecondary},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor=m.colors.border},children:"Delete Selected"})]})]}),(0,A.jsxs)(Re,{title:"Advanced Selections",defaultCollapsed:!0,children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.textMuted,marginBottom:"16px",lineHeight:"1.5"},children:"Configure which regions to label and sync settings."}),(0,A.jsx)(Te,{label:"Auto-sync Start with Override",checked:Q,onChange:function(){return $(!Q)}}),(0,A.jsx)("div",{style:{marginTop:"20px"},children:(0,A.jsx)(o.Component,{regions:n,rnaComplexProps:r,startingNucleotideIndicesPerRegion:G,updateStartingNucleotideIndexHelper:function(e,t,n,r){G[e][t][n]=r,W(structuredClone(G))},startingNucleotideOverridingIndicesForLabelsPerRegion:V,updateStartingNucleotideOverridingIndexForLabelPerRegionHelper:function(e,t,n,r){V[e][t][n]=r,X(structuredClone(V))},copyStartingIndexToOverridingLabelIndexFlag:Q})})]}),(0,A.jsx)(Re,{title:"Labeling Options",defaultCollapsed:!0,children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,A.jsx)(Te,{label:"Include Label Lines",checked:g,onChange:function(){return P(!g)}}),(0,A.jsx)(Te,{label:"Include Label Text",checked:M,onChange:function(){return w(!M)}}),(0,A.jsx)(Te,{label:"Recreate Existing Labels",checked:L,onChange:function(){return j(!L)}})]})}),(0,A.jsx)("div",{style:{marginTop:"8px"},children:(0,A.jsx)("button",{onClick:function(e){h();var t={};for(var n in r){var o=Number.parseInt(n);o in t||(t[o]={});var i=t[o],l=r[o].rnaMoleculeProps;for(var s in l){s in i||(i[s]=[]);var u=i[s],c=l[s].nucleotideProps;for(var d in c){var f=Number.parseInt(d),p=c[f];void 0===p.labelLineProps&&void 0===p.labelContentProps||(u.push(f),void 0!==p.labelLineProps&&delete p.labelLineProps,void 0!==p.labelContentProps&&delete p.labelContentProps)}}}for(var m=0,v=Object.values(t);m<v.length;m++)for(var x=v[m],g=0,y=Object.values(x);g<y.length;g++){y[g].sort(N.subtractNumbers)}a(t)},style:{width:"100%",padding:"12px 16px",background:"transparent",color:m.colors.error||"#dc3545",border:"1px solid ".concat(m.colors.error||"#dc3545"),fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.error||"#dc3545",e.currentTarget.style.color="white"},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.color=m.colors.error||"#dc3545"},children:"Clear All Annotations"})})]})}}(r||(r={})),(o||(o={})).Component=function(e){var t=e.regions,n=e.rnaComplexProps,r=e.startingNucleotideIndicesPerRegion,o=(e.updateStartingNucleotideIndexHelper,e.startingNucleotideOverridingIndicesForLabelsPerRegion),a=(e.updateStartingNucleotideOverridingIndexForLabelPerRegionHelper,e.copyStartingIndexToOverridingLabelIndexFlag,(0,_.Fg)().theme),l=(0,u.useState)(-1),s=(0,i.Z)(l,2),c=s[0],d=s[1],f=(0,u.useState)(-1),p=(0,i.Z)(f,2),h=p[0],m=p[1],v=(0,u.useState)(-1),x=(0,i.Z)(v,2),g=x[0],y=x[1],b=(0,u.useState)(void 0),N=(0,i.Z)(b,2),E=N[0],I=N[1],C=(0,u.useState)(void 0),S=(0,i.Z)(C,2),P=S[0],T=S[1],R=(0,u.useState)(void 0),M=(0,i.Z)(R,2),w=(M[0],M[1]),k=(0,u.useState)(void 0),O=(0,i.Z)(k,2),L=O[0],j=O[1],D=(0,u.useState)(void 0),Z=(0,i.Z)(D,2),F=Z[0],B=Z[1],U=(0,u.useState)(void 0),z=(0,i.Z)(U,2),G=z[0],W=z[1],H=(0,u.useState)(void 0),K=(0,i.Z)(H,2),V=K[0],X=K[1],q=(0,u.useState)(void 0),Y=(0,i.Z)(q,2),Q=Y[0],$=Y[1],J=(0,u.useState)(void 0),ee=(0,i.Z)(J,2),te=(ee[0],ee[1]);function ne(e,n){if(d(e),-1!==e){var a=t[e];I(a);var l=r[e];j(l);var s=o[e];X(s);var u=Object.entries(n);if(1===u.length){var c=(0,i.Z)(u[0],2);re(c[0],c[1],n,l,s)}}else m(-1),y(-1)}function re(e,t,n,r,o){if(m(e),-1!==e){var a=n[e];T(a);var l=r[e];B(l);var s=o[e];$(s);var u=Object.entries(t);if(1===u.length){var c=(0,i.Z)(u[0],2),d=c[0];c[1],oe(Number.parseInt(d),a,l,s)}}else y(-1)}function oe(e,t,n,r){y(e),-1!==e&&(w(t[e]),void 0!==n&&W(n[e]),void 0!==r&&te(r[e]))}(0,u.useMemo)((function(){if(-1!==c&&-1!==h&&-1!==g&&void 0!==G)return n[c].rnaMoleculeProps[h].firstNucleotideIndex}),[c,h,g,G]),(0,u.useEffect)((function(){var e=Object.entries(t);if(1===e.length){var n=(0,i.Z)(e[0],2),r=n[0],o=n[1];ne(Number.parseInt(r),o)}else d(-1),m(-1),y(-1)}),[t,r,o]);var ae={width:"100%",padding:"8px 10px",background:a.colors.surface,border:"1px solid ".concat(a.colors.border),fontSize:a.typography.fontSize.sm,color:a.colors.text,cursor:"pointer",outline:"none"},ie={fontSize:a.typography.fontSize.xs,fontWeight:"600",color:a.colors.textSecondary,marginBottom:"6px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},le={marginBottom:"20px"};return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsxs)("div",{style:le,children:[(0,A.jsx)("label",{style:ie,children:"RNA Complex"}),(0,A.jsxs)("select",{value:c,onChange:function(e){var n=e.target.value,r=Number.parseInt(n);ne(r,t[r])},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA complex"}),Object.keys(t).map((function(e){var t=Number.parseInt(e),r=n[t].name;return(0,A.jsx)("option",{value:t,children:r},t)}))]})]}),-1!==c&&void 0!==E&&void 0!==L&&void 0!==V&&(0,A.jsxs)("div",{style:le,children:[(0,A.jsx)("label",{style:ie,children:"RNA Molecule"}),(0,A.jsxs)("select",{value:h,onChange:function(e){var t=e.target.value;re(t,E[t],E,L,V)},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA molecule"}),Object.keys(t[c]).map((function(e){return(0,A.jsx)("option",{value:e,children:e},e)}))]})]}),-1!==h&&void 0!==P&&void 0!==F&&void 0!==Q&&(0,A.jsxs)("div",{style:le,children:[(0,A.jsxs)("label",{style:ie,children:["Region (",P.length," total)"]}),(0,A.jsxs)("select",{value:g,onChange:function(e){oe(Number.parseInt(e.target.value),P,F,Q)},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select a region"}),P.map((function(e,t){return(0,A.jsxs)("option",{value:t,children:["Region ",t+1]},t)}))]})]})]})};var P,T,R,M,w=n(4914),k=n(5910),O=n(974),L=n(649),j=n(5088),D=n(3869),Z=n(920);(P||(P={})).Component=function(e){var t,n,r,o=e.pathStyle,a=e.setPathStyle,l=(0,u.useContext)(f._.App.PushToUndoStack),s=null!==(t=o.pathColor)&&void 0!==t?t:C.BLACK,c=null!==(n=o.pathLineWidth)&&void 0!==n?n:E.DEFAULT_STROKE_WIDTH,d=null!==(r=o.pathCurvature)&&void 0!==r?r:0,h=(0,u.useState)({h:0,s:0,v:100,a:1}),m=(0,i.Z)(h,2),v=m[0],x=m[1],g=(0,u.useState)(!1),y=(0,i.Z)(g,2),b=y[0],N=y[1];(0,u.useEffect)((function(){var e,t={r:s.red,g:s.green,b:s.blue,a:null!==(e=s.alpha)&&void 0!==e?e:1};x((0,j.S7)(t)),N(!1)}),[o.pathColor]);var I=function(e){b||(l(),N(!0)),a((0,p.Z)((0,p.Z)({},o),{},{pathColor:e}))};return(0,A.jsx)(Z.z.Component,{title:"Path",initialCollapsedFlag:!1,children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:"Path Color"}),(0,A.jsx)(D.Z,{hsva:v,onChange:function(e){var t=(0,p.Z)((0,p.Z)({},v),{},{v:e.v});x(t);var n=(0,j.MA)(t),r={red:n.r,green:n.g,blue:n.b,alpha:s.alpha};I(r)},style:{width:"100%",marginBottom:"8px"}}),(0,A.jsx)(L.Z,{color:v,onChange:function(e){x((0,p.Z)((0,p.Z)({},v),e.hsva));var t={red:e.rgba.r,green:e.rgba.g,blue:e.rgba.b,alpha:s.alpha};I(t)}})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:["Line Width: ",c.toFixed(1)]}),(0,A.jsx)("input",{type:"range",min:.5,max:10,step:.5,value:c,onChange:function(e){var t=parseFloat(e.target.value);a((0,p.Z)((0,p.Z)({},o),{},{pathLineWidth:t}))},onMouseDown:function(){return l()},style:{width:"100%",height:"6px",borderRadius:"3px",outline:"none",cursor:"pointer"}}),(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#666",marginTop:"4px"},children:[(0,A.jsx)("span",{children:"Thin (0.5)"}),(0,A.jsx)("span",{children:"Thick (10)"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:["Curvature: ",0===d?"Straight":d<.3?"Slight":d<.7?"Moderate":"High"]}),(0,A.jsx)("input",{type:"range",min:0,max:1,step:.05,value:d,onChange:function(e){var t=parseFloat(e.target.value);a((0,p.Z)((0,p.Z)({},o),{},{pathCurvature:t}))},onMouseDown:function(){return l()},style:{width:"100%",height:"6px",borderRadius:"3px",outline:"none",cursor:"pointer"}}),(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#666",marginTop:"4px"},children:[(0,A.jsx)("span",{children:"Straight"}),(0,A.jsx)("span",{children:"Curvy"})]})]})]})})},(R=T||(T={})).Component=function(e){var t=e.positions,n=e.onUpdatePositions,r=t,o=(0,u.useState)(C.BLACK),a=(0,i.Z)(o,2),l=a[0],c=a[1],d=(0,u.useState)(S.default.DEFAULT),h=(0,i.Z)(d,2),m=h[0],v=h[1],x=(0,u.useState)({pathColor:C.BLACK,pathLineWidth:E.DEFAULT_STROKE_WIDTH,pathCurvature:0}),g=(0,i.Z)(x,2),y=g[0],b=g[1],N=(0,u.useState)(!1),I=(0,i.Z)(N,2),_=I[0],T=I[1],R=(0,u.useContext)(f._.App.PushToUndoStack);return(0,u.useEffect)((function(){var e,t,n,o,a;if(0!==r.length){for(var i=!0,l=r[0],s=null!==(e=l.color)&&void 0!==e?e:C.BLACK,u=1;u<r.length;u++){var d;if(!(0,C.areEqual)(s,null!==(d=r[u].color)&&void 0!==d?d:C.BLACK)){i=!1;break}}for(var f=!0,p=null!==(t=l.font)&&void 0!==t?t:S.default.DEFAULT,h=1;h<r.length;h++){var m;if(!S.default.areEqual(p,null!==(m=r[h].font)&&void 0!==m?m:S.default.DEFAULT)){f=!1;break}}for(var x=!0,g=null!==(n=l.pathColor)&&void 0!==n?n:C.BLACK,y=1;y<r.length;y++){var N;if(!(0,C.areEqual)(g,null!==(N=r[y].pathColor)&&void 0!==N?N:C.BLACK)){x=!1;break}}for(var I=!0,_=null!==(o=l.pathLineWidth)&&void 0!==o?o:E.DEFAULT_STROKE_WIDTH,A=1;A<r.length;A++){var P;if(_!==(null!==(P=r[A].pathLineWidth)&&void 0!==P?P:E.DEFAULT_STROKE_WIDTH)){I=!1;break}}for(var T=!0,R=null!==(a=l.pathCurvature)&&void 0!==a?a:0,M=1;M<r.length;M++){var w;if(R!==(null!==(w=r[M].pathCurvature)&&void 0!==w?w:0)){T=!1;break}}c(i?s:C.BLACK),v(f?p:S.default.DEFAULT),b({pathColor:x?g:C.BLACK,pathLineWidth:I?_:E.DEFAULT_STROKE_WIDTH,pathCurvature:T?R:0})}}),[t]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w.Y.Component,(0,p.Z)((0,p.Z)({},e),{},{onUpdatePositions:function(e){!_&&e&&R(),n(!1),T(!0)}})),(0,A.jsx)(k.S.Component,{color:l,setColorHelper:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.color=e}catch(a){o.e(a)}finally{o.f()}c(e),n(!1)}}),(0,A.jsx)(O.f.Component,(0,p.Z)((0,p.Z)({},m),{},{setFont:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.font=e}catch(a){o.e(a)}finally{o.f()}v(e),n(!1)}})),(0,A.jsx)(P.Component,{pathStyle:y,setPathStyle:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;void 0!==e.pathColor&&(a.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(a.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(a.pathCurvature=e.pathCurvature)}}catch(i){o.e(i)}finally{o.f()}b(e),n(!1)}})]})},R.Simplified=function(e){var t=e.positions,n=e.onUpdatePositions,r=t,o=(0,u.useState)(C.BLACK),a=(0,i.Z)(o,2),l=a[0],c=a[1],d=(0,u.useState)(S.default.DEFAULT),h=(0,i.Z)(d,2),m=h[0],v=h[1],x=(0,u.useState)({pathColor:C.BLACK,pathLineWidth:E.DEFAULT_STROKE_WIDTH,pathCurvature:0}),g=(0,i.Z)(x,2),y=g[0],b=g[1],N=(0,u.useState)(!1),I=(0,i.Z)(N,2),_=I[0],T=I[1],R=(0,u.useContext)(f._.App.PushToUndoStack);return(0,u.useEffect)((function(){var e,t,n,o,a;if(0!==r.length){for(var i=!0,l=r[0],s=null!==(e=l.color)&&void 0!==e?e:C.BLACK,u=1;u<r.length;u++){var d;if(!(0,C.areEqual)(s,null!==(d=r[u].color)&&void 0!==d?d:C.BLACK)){i=!1;break}}for(var f=!0,p=null!==(t=l.font)&&void 0!==t?t:S.default.DEFAULT,h=1;h<r.length;h++){var m;if(!S.default.areEqual(p,null!==(m=r[h].font)&&void 0!==m?m:S.default.DEFAULT)){f=!1;break}}for(var x=!0,g=null!==(n=l.pathColor)&&void 0!==n?n:C.BLACK,y=1;y<r.length;y++){var N;if(!(0,C.areEqual)(g,null!==(N=r[y].pathColor)&&void 0!==N?N:C.BLACK)){x=!1;break}}for(var I=!0,_=null!==(o=l.pathLineWidth)&&void 0!==o?o:E.DEFAULT_STROKE_WIDTH,A=1;A<r.length;A++){var P;if(_!==(null!==(P=r[A].pathLineWidth)&&void 0!==P?P:E.DEFAULT_STROKE_WIDTH)){I=!1;break}}for(var T=!0,R=null!==(a=l.pathCurvature)&&void 0!==a?a:0,M=1;M<r.length;M++){var w;if(R!==(null!==(w=r[M].pathCurvature)&&void 0!==w?w:0)){T=!1;break}}c(i?s:C.BLACK),v(f?p:S.default.DEFAULT),b({pathColor:x?g:C.BLACK,pathLineWidth:I?_:E.DEFAULT_STROKE_WIDTH,pathCurvature:T?R:0})}}),[t]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w.Y.Simplified,(0,p.Z)((0,p.Z)({},e),{},{onUpdatePositions:function(e){!_&&e&&R(),n(!1),T(!0)}})),(0,A.jsx)(k.S.Component,{color:l,setColorHelper:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.color=e}catch(a){o.e(a)}finally{o.f()}c(e),n(!1)}}),(0,A.jsx)(O.f.Component,(0,p.Z)((0,p.Z)({},m),{},{setFont:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.font=e}catch(a){o.e(a)}finally{o.f()}v(e),n(!1)}})),(0,A.jsx)(P.Component,{pathStyle:y,setPathStyle:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;void 0!==e.pathColor&&(a.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(a.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(a.pathCurvature=e.pathCurvature)}}catch(i){o.e(i)}finally{o.f()}b(e),n(!1)}})]})},(M||(M={})).Component=function(e){var t=e.setNucleotideKeysToRerender,n=e.setBasePairKeysToRerender,r=e.rnaComplexProps,o=(0,u.useContext)(f._.App.ComplexDocumentName),a=(0,u.useContext)(f._.App.SetComplexDocumentName),l=(0,u.useContext)(f._.App.IndicesOfFrozenNucleotides),c=(0,u.useState)(o),p=(0,i.Z)(c,2),h=p[0],m=p[1],v=(0,u.useMemo)((function(){var e=new Array,o=Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{rnaComplexIndex:Number.parseInt(n),singularRnaComplexProps:r}}));o.reverse();var a,u={0:{x:-1,y:0},1:{x:1,y:0}},c={},f={},p=(0,s.Z)(o);try{for(p.s();!(a=p.n()).done;){var h=a.value,m=h.rnaComplexIndex,v=h.singularRnaComplexProps,x=Object.entries(v.rnaMoleculeProps);x.reverse();var g=v.basePairs;c[m]={};var y=c[m];f[m]=[];for(var b=f[m],N=(m in l?l[m]:{}),E=0,I=x;E<I.length;E++){var C=(0,i.Z)(I[E],2),S=C[0],_=C[1],P=g[S];y[S]=[];var R,M=y[S],w=Object.entries(_.nucleotideProps).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}})),k=S in N?N[S]:new Set,O=(0,s.Z)(w);try{for(O.s();!(R=O.n()).done;){var L=R.value,j=L.nucleotideIndex,D=L.singularNucleotideProps;if(k.has(j)||(M.push(j),e.push(D)),j in P){b.push({rnaMoleculeName:S,nucleotideIndex:j});var Z=P[j].reduce(d.selectRelevantBasePairKeys);u={0:D,1:v.rnaMoleculeProps[Z.rnaMoleculeName].nucleotideProps[Z.nucleotideIndex]}}}}catch(F){O.e(F)}finally{O.f()}}}}catch(F){p.e(F)}finally{p.f()}return(0,A.jsx)(T.Simplified,{boundingVector0:u[0],boundingVector1:u[1],positions:e,onUpdatePositions:function(){t(structuredClone(c)),n(structuredClone(f))}})}),[r]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("label",{children:["Name:\xa0",(0,A.jsx)("input",{type:"text",value:h,onChange:function(e){var t=e.target.value;m(t),a(t)}})]}),(0,A.jsx)("br",{}),v]})};var F={errorMessage:"Cannot interact with a base-paired nucleotide using this constraint."},B={errorMessage:"Cannot interact with a non-base-paired nucleotide using this constraint."},U={errorMessage:"Cannot apply this constraint to a nucleotide with multiple base pairs. Try right-clicking on a base pair instead."},z=function(){function e(t,n,r,o,a,i,l){(0,h.Z)(this,e),this.indicesOfAffectedNucleotides={},this.rnaComplexProps=void 0,this.fullKeys0=void 0,this.fullKeys1=void 0,this.setNucleotideKeysToRerender=void 0,this.setBasePairKeysToRerender=void 0,this.setDebugVisualElements=void 0,this.indicesOfFrozenNucleotides=void 0,this.rnaComplexProps=t,this.fullKeys0=i,this.fullKeys1=l,this.setNucleotideKeysToRerender=n,this.setBasePairKeysToRerender=r,this.setDebugVisualElements=o,this.indicesOfFrozenNucleotides=a}return(0,m.Z)(e,[{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){for(var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=Math.abs(i[0]-a[0])+1,s=Math.sign(i[0]-a[0]),u=Math.sign(i[1]-a[1]),c=a[0],d=a[1],f=0;f<l;f++){if(n in t.indicesOfAffectedNucleotides){var p=t.indicesOfAffectedNucleotides[n];if(r in p&&p[r].has(c))return!0;if(o in p&&p[o].has(d))return!0}c+=s,d+=u}return!1}))}},{key:"addFullIndices",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var a=o[r],i=a.rnaComplexIndex,l=a.rnaMoleculeName,s=a.nucleotideIndex;i in this.indicesOfAffectedNucleotides||(this.indicesOfAffectedNucleotides[i]={});var u=this.indicesOfAffectedNucleotides[i];l in u||(u[l]=new Set),u[l].add(s)}}},{key:"addFullIndicesPerHelices",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];for(var a=0,i=r;a<i.length;a++)for(var l=i[a],s=l.rnaComplexIndex,u=l.rnaMoleculeName0,c=l.rnaMoleculeName1,d=l.nucleotideIndex0,f=l.nucleotideIndex1,p=l.length,h=0;h<p;h++)this.addFullIndices({rnaComplexIndex:s,rnaMoleculeName:u,nucleotideIndex:d+h-e},{rnaComplexIndex:s,rnaMoleculeName:c,nucleotideIndex:f-h-t})}},{key:"addFullIndicesPerNucleotideKeysToRerender",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++)for(var r=(0,i.Z)(n[t],2),o=r[0],a=r[1],l=Number.parseInt(o),u=0,c=Object.entries(a);u<c.length;u++){var d,f=(0,i.Z)(c[u],2),p=f[0],h=f[1],m=(0,s.Z)(h);try{for(m.s();!(d=m.n()).done;){var v=d.value;this.addFullIndices({rnaComplexIndex:l,rnaMoleculeName:p,nucleotideIndex:v})}}catch(x){m.e(x)}finally{m.f()}}}}]),e}();function G(e,t,n){var r=t.map((function(t){return(0,b.subtract)(t,e)})),o=t.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var a=0;a<o;a++){var i=r[a],l=t[a];l.x=e.x+i.x,l.y=e.y+i.y}n()}}}var W,H=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,a,u,c,f,p,m){var v,x=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,a,c,p,m)).editMenuProps=void 0,v.initialBasePairs=void 0,v.dragListener=void 0,v.helices=void 0;var g={},y={};v.editMenuProps={rnaComplexProps:v.rnaComplexProps,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var b=[],E=xe(e,x),I=[];v.helices=I,E.forEach((function(e){var t=e.rnaComplexIndex;e.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0;I.push.apply(I,(0,l.Z)(e.helixData.map((function(e){var r=e.start,o=e.stop,a=e.rnaMoleculeName1;return{rnaComplexIndex:t,rnaMoleculeName0:n,rnaMoleculeName1:a,start:r,stop:o}}))))}))})),E.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,o=r.rnaMoleculeProps[t];b.push.apply(b,(0,l.Z)(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),v.initialBasePairs=b;for(var C=new Array,S=0,_=Object.entries(e);S<_.length;S++){var A=(0,i.Z)(_[S],2),P=A[0],T=A[1].rnaMoleculeProps,R=Number.parseInt(P),M=R in c?c[R]:{};g[R]={};var w=g[R];y[R]=[];for(var k=y[R],O=e[R],L=O.basePairs,j=0,D=Object.entries(T);j<D.length;j++){var Z=(0,i.Z)(D[j],2),F=Z[0],B=Z[1].nucleotideProps,U=F in M?M[F]:new Set;w[F]=[];for(var z=w[F],W=O.rnaMoleculeProps[F],H=(F in L?L[F]:{}),K=0,V=Object.keys(B);K<V.length;K++){var X=V[K],q=Number.parseInt(X);if(v.addFullIndices({rnaComplexIndex:R,rnaMoleculeName:F,nucleotideIndex:q}),!U.has(q)){z.push(q);var Y=W.nucleotideProps[q];C.push(Y)}if(q in H){var Q,$={rnaMoleculeName:F,nucleotideIndex:q},J=H[q],ee=(0,s.Z)(J);try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;k.push((0,d.selectRelevantBasePairKeys)($,te))}}catch(pe){ee.e(pe)}finally{ee.f()}}}}}for(var ne=p.rnaComplexIndex,re=p.rnaMoleculeName,oe=p.nucleotideIndex,ae=e[ne].rnaMoleculeProps[re].nucleotideProps[oe],ie=0,le=Object.values(g);ie<le.length;ie++)for(var se=le[ie],ue=0,ce=Object.values(se);ue<ce.length;ue++){ce[ue].sort(N.subtractNumbers)}for(var de=0,fe=Object.values(y);de<fe.length;de++){fe[de].sort(d.compareBasePairKeys)}return v.dragListener=G({x:ae.x,y:ae.y},C,(function(){r(structuredClone(g)),o(structuredClone(y))})),v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t;switch(e){case c.OK.EDIT:t=(0,A.jsx)(M.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case c.OK.ANNOTATE:var n={};for(var o in this.rnaComplexProps){var a=Number.parseInt(o),i={};a in this.indicesOfFrozenNucleotides&&(i=this.indicesOfFrozenNucleotides[a]),n[a]={};var l=n[a],s=this.rnaComplexProps[a];for(var u in s.rnaMoleculeProps){l[u]=[];var d=s.rnaMoleculeProps[u],f=l[u],h=new Set;u in i&&(h=i[u]);var m=new Array;for(var v in d.nucleotideProps){var x=Number.parseInt(v);m.push(x)}r.populateRegions(h,m,f)}}t=(0,A.jsx)(r.Component,{regions:n,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," entire scene:"]}),(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){return e}}]),n}(z);(W||(W={})).Component=function(e){var t=e.rnaComplexIndex,n=e.rerender,r=e.singularRnaComplexProps,o=(0,u.useContext)(f._.App.IndicesOfFrozenNucleotides),a=t in o?o[t]:{},l=(0,u.useState)(r.name),c=(0,i.Z)(l,2),p=c[0],h=c[1],m=(0,u.useMemo)((function(){var e=r.basePairs,t={0:{x:-1,y:0},1:{x:1,y:0}},o=new Array,l=Object.entries(r.rnaMoleculeProps);l.reverse();for(var u=0,c=l;u<c.length;u++){var f=(0,i.Z)(c[u],2),p=f[0],h=f[1],m=e[p],v=Object.entries(h.nucleotideProps).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));v.sort((function(e,t){return t.nucleotideIndex-e.nucleotideIndex}));var x,g=p in a?a[p]:new Set,y=(0,s.Z)(v);try{for(y.s();!(x=y.n()).done;){var b=x.value,N=b.nucleotideIndex,E=b.singularNucleotideProps;if(g.has(N)||o.push(E),N in m){var I=m[N].reduce(d.selectRelevantBasePairKeys);t={0:E,1:r.rnaMoleculeProps[I.rnaMoleculeName].nucleotideProps[I.nucleotideIndex]}}}}catch(C){y.e(C)}finally{y.f()}}return(0,A.jsx)(T.Simplified,{boundingVector0:t[0],boundingVector1:t[1],positions:o,onUpdatePositions:n})}),[a,r]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("label",{children:"Name:\xa0"}),(0,A.jsx)("input",{type:"text",value:p,onChange:function(e){var t=e.target.value;h(t),r.name=t}}),(0,A.jsx)("br",{}),m]})};var K,V=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,u,c,f,p,m){var v,x=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,i,c,p,m)).dragListener=void 0,v.editMenuProps=void 0,v.initialBasePairs=void 0,v.helices=void 0;for(var g=v.fullKeys0,y=g.rnaComplexIndex,b=g.rnaMoleculeName,E=g.nucleotideIndex,I=(0,a.Z)({},y,{}),C=I[y],S=(0,a.Z)({},y,[]),_=S[y],A=new Array,P=v.rnaComplexProps[y],T=P.basePairs,R=(y in c?c[y]:{}),M=0,w=Object.keys(P.rnaMoleculeProps);M<w.length;M++){var k=w[M];C[k]=[];var O,L=C[k],j=P.rnaMoleculeProps[k],D=T[k],Z=Object.keys(j.nucleotideProps).map(N.parseInteger),F=k in R?R[k]:new Set,B=(0,s.Z)(Z);try{for(B.s();!(O=B.n()).done;){var U=O.value;if(v.addFullIndices({rnaComplexIndex:y,rnaMoleculeName:k,nucleotideIndex:U}),!F.has(U)){var z=j.nucleotideProps[U];A.push(z),L.push(U)}U in D&&_.push({rnaMoleculeName:k,nucleotideIndex:U})}}catch(q){B.e(q)}finally{B.f()}}_.sort(d.compareBasePairKeys);var W=P.rnaMoleculeProps[b].nucleotideProps[E];function H(){r(structuredClone(I)),o(structuredClone(S))}v.dragListener=G(structuredClone(W),A,H),v.editMenuProps={rnaComplexIndex:y,rerender:H,singularRnaComplexProps:P};var K=[],V=ge(y,P,x),X=[];return v.helices=X,V.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0;X.push.apply(X,(0,l.Z)(e.helixData.map((function(e){var n=e.rnaMoleculeName1,r=e.start,o=e.stop;return{rnaComplexIndex:y,rnaMoleculeName0:t,rnaMoleculeName1:n,start:r,stop:o}}))))})),V.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,n=P.rnaMoleculeProps[t];K.push.apply(K,(0,l.Z)(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=P.rnaMoleculeProps[r];return{rnaComplexIndex:y,rnaMoleculeName0:t,rnaMoleculeName1:r,nucleotideIndex0:e.start[0]+n.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+o.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))})),v.initialBasePairs=K,v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0.rnaComplexIndex,o=this.rnaComplexProps[n],i=(0,A.jsxs)("b",{children:[e,' RNA complex "',o.name,'":']});switch(e){case c.OK.EDIT:i=(0,A.jsxs)("b",{children:[e," RNA complex:"]}),t=(0,A.jsx)(W.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(n!==r.rnaComplexIndex)throw"This constraint expects base pairs to be placed within the clicked-on RNA complex. The base pair(s) on line ".concat(t+1," do not.")}}});break;case c.OK.ANNOTATE:var l=(0,a.Z)({},n,{}),s=l[n];for(var u in this.rnaComplexProps){var d=Number.parseInt(u),f=this.rnaComplexProps[d],h=d in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[d]:{};for(var m in f.rnaMoleculeProps){s[m]=[];var v=s[m],x=f.rnaMoleculeProps[m],y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;for(var E in x.nucleotideProps){var I=Number.parseInt(E);I<y&&(y=I),I>b&&(b=I)}var C=m in h?h[m]:new Set;r.populateRegions(C,(0,N.range)(b+1,y),v)}}t=(0,A.jsx)(r.Component,{regions:l,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[i,(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){return e.rnaComplexIndex===t.fullKeys0.rnaComplexIndex}))}}]),n}(z),X=n(9750);(K||(K={})).Component=function(e){var t=e.initialRadius,n=e.minimumRadius,r=e.updatePositionsHelper,o=e.cycleGraphNucleotides,a=e.branchNucleotides,l=e.rerender,c=e.getRadius,d=(0,u.useContext)(f._.OrientationEditor.ResetDataTrigger),h=(0,u.useContext)(f._.App.Settings)[X.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],m=(0,u.useContext)(f._.App.PushToUndoStack),v=(0,u.useState)(t),x=(0,i.Z)(v,2),g=x[0],b=x[1],N=(0,u.useState)(structuredClone(C.BLACK)),E=(0,i.Z)(N,2),I=E[0],_=E[1],P=(0,u.useState)(structuredClone(S.default.DEFAULT)),T=(0,i.Z)(P,2),R=T[0],M=T[1],w=(0,u.useState)(!1),L=(0,i.Z)(w,2),j=L[0],D=L[1];function Z(e,t){j||m(),r(e,t),D(!0)}return(0,u.useEffect)((function(){b(c())}),[d]),(0,u.useEffect)((function(){for(var e,t=0===o.length?C.BLACK:null!==(e=o[0].color)&&void 0!==e?e:C.BLACK,n=0;n<o.length;n++){var r,a=o[n];if(!(0,C.areEqual)(t,null!==(r=a.color)&&void 0!==r?r:C.BLACK))break}}),[o]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("button",{onClick:function(){Z(g,h)},children:"Normalize"}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Radius:\xa0",(0,A.jsx)(y.Z.Number,{value:g,setValue:function(e){b(e),Z(e,h)},min:n})]}),(0,A.jsx)("br",{}),(0,A.jsx)(k.S.Component,{color:I,setColorHelper:function(e){_(e);var t,n=(0,s.Z)(o);try{for(n.s();!(t=n.n()).done;)t.value.color=e}catch(u){n.e(u)}finally{n.f()}var r,i=(0,s.Z)(a);try{for(i.s();!(r=i.n()).done;)r.value.color=e}catch(u){i.e(u)}finally{i.f()}l()}}),(0,A.jsx)(O.f.Component,(0,p.Z)((0,p.Z)({},R),{},{setFont:function(e){M(e);var t,n=(0,s.Z)(o);try{for(n.s();!(t=n.n()).done;)t.value.font=e}catch(u){n.e(u)}finally{n.f()}var r,i=(0,s.Z)(a);try{for(i.s();!(r=i.n()).done;)r.value.font=e}catch(u){i.e(u)}finally{i.f()}l()}}))]})};var q,Y=n(4838),Q=.01,$={errorMessage:"The clicked-on nucleotide is not part of an RNA cycle."},J=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,u,c,f,m,v,x){var g,y=m.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(g=t.call(this,e,r,o,u,f,v,x)).rnaCycleBoundsText=void 0,g.editMenuProps=void 0,g.cycleIndices=void 0,g.initialDrag=void 0,g.boundingVector0=void 0,g.boundingVector1=void 0,g.updatePositionsHelper=void 0,g.minimumRadius=void 0,g.initialBasePairs=void 0,g.helices=void 0;var E=e[v.rnaComplexIndex];g.initialDrag=structuredClone(E.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex]);var C=E.basePairs;if(v.rnaMoleculeName in C&&v.nucleotideIndex in C[v.rnaMoleculeName]&&C[v.rnaMoleculeName][v.nucleotideIndex].some((function(e){var t;return I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(E.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)})))throw F;function S(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex,r=[{rnaMoleculeName:t,nucleotideIndex:n-1},{rnaMoleculeName:t,nucleotideIndex:n+1}].filter((function(e){var t=e.rnaMoleculeName;return e.nucleotideIndex in E.rnaMoleculeProps[t].nucleotideProps})),o=C[t];if(n in o){var a=o[n].filter((function(e){var r;return I.default.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:(0,I.getBasePairType)(E.rnaMoleculeProps[t].nucleotideProps[n].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)}));r.push.apply(r,(0,l.Z)(a))}return r}function _(e,t){var n=[e],r={};function o(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;t in r||(r[t]=new Set),r[t].add(n)}o(v),o(e);for(var a={};n.length>0;){var i=n.shift(),l=i,u=l.rnaMoleculeName,c=l.nucleotideIndex;if(u===t.rnaMoleculeName&&c===t.nucleotideIndex){for(var d=[];i.rnaMoleculeName in a&&i.nucleotideIndex in a[i.rnaMoleculeName];)d.push(i),i=a[i.rnaMoleculeName][i.nucleotideIndex];return d.push(i),d.reverse()}var f,p=(0,s.Z)(S(i));try{for(p.s();!(f=p.n()).done;){var h=f.value;h.rnaMoleculeName in r&&r[h.rnaMoleculeName].has(h.nucleotideIndex)||(o(h),h.rnaMoleculeName in a||(a[h.rnaMoleculeName]={}),a[h.rnaMoleculeName][h.nucleotideIndex]=i,n.push(h))}}catch(m){p.e(m)}finally{p.f()}}}for(var P=S(v),T=void 0,R=0;R<P.length;R++)for(var M=R+1;M<P.length;M++){var w=_(P[R],P[M]);void 0!==w&&((void 0===T||T.length>w.length)&&(T=w))}if(void 0===T)throw $;var k=[].concat((0,l.Z)(T),[v]);g.cycleIndices=k;var O,L=k.map((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return E.rnaMoleculeProps[t].nucleotideProps[n]})),j=(0,s.Z)(k);try{for(j.s();!(O=j.n()).done;){var D=O.value,Z=D.rnaMoleculeName,B=D.nucleotideIndex;g.addFullIndices({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName:Z,nucleotideIndex:B})}}catch(Un){j.e(Un)}finally{j.f()}var U=0,z=k.reduce((function(e,t,n){return(0,d.compareBasePairKeys)(e,t)<0?e:(U=n,t)})),G=C[z.rnaMoleculeName][z.nucleotideIndex].filter((function(e){var t;return I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(E.rnaMoleculeProps[z.rnaMoleculeName].nucleotideProps[z.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)})).filter((function(e){return k.some((function(t){return e.rnaMoleculeName===t.rnaMoleculeName&&e.nucleotideIndex===t.nucleotideIndex}))})).reduce((function(e,t){return(0,d.compareBasePairKeys)(e,t)>0?e:t})),W=k.findIndex((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===G.rnaMoleculeName&&n===G.nucleotideIndex}));if(-1===W)throw"Cannot find the minimum graph node.";var H=(U+1)%k.length===W?-1:1,K=L[U],V=L[W];g.boundingVector0=K,g.boundingVector1=V;var X=.5*(0,b.distance)(K,V)+Q;if((0,N.areEqual)(X,0,.02))throw{errorMessage:"Cannot determine repositioning data for this cycle, because its anchoring vector positions are exactly equal."};var q,J=(0,b.scaleUp)((0,b.add)(K,V),.5),ee=(0,b.orthogonalizeLeft)((0,b.subtract)(V,K)),te=K.x,ne=K.y,re=V.x,oe=V.y,ae=te*te,ie=ne*ne,le=re-te;if((0,N.areEqual)(le,0)){var se=1/(oe-ne),ue=(te-re)*se,ce=(re*re-ae+oe*oe-ie)*se*.5,de=1+ue*ue,fe=1/(2*de),pe=4*de,he=2*(ue*(-ne+ce)-te),me=-he,ve=he*he,xe=ae+ie+ce*(ce-2*ne),ye=1/ee.x;q=function(e){var t=xe-e*e,n=(me+Math.sqrt(ve-pe*t))*fe,r=Math.abs((n-J.x)*ye);return(0,b.add)(J,(0,b.scaleUp)(ee,r))}}else{var be=1/le,Ne=(ne-oe)*be,Ee=(re*re-ae+oe*oe-ie)*be*.5,Ie=1+Ne*Ne,Ce=1/(2*Ie),Se=4*Ie,_e=2*(Ne*(-te+Ee)-ne),Ae=-_e,Pe=_e*_e,Te=ae+ie+Ee*(Ee-2*te),Re=1/ee.y;q=function(e){var t=Te-e*e,n=(Ae+Math.sqrt(Pe-Se*t))*Ce,r=Math.abs((n-J.y)*Re);return(0,b.add)(J,(0,b.scaleUp)(ee,r))}}var Me=L.map((function(e){return(0,Y.Yq)(K,V,e).radius})),we=Math.max(X,Me.reduce((function(e,t){return e+t}),0)/Me.length);var ke,Oe=q(we),Le=(0,a.Z)({},v.rnaComplexIndex,{}),je=Le[v.rnaComplexIndex],De=(0,a.Z)({},v.rnaComplexIndex,[]),Ze=De[v.rnaComplexIndex],Fe=(0,s.Z)(k);try{for(Fe.s();!(ke=Fe.n()).done;){var Be=ke.value,Ue=Be.rnaMoleculeName,ze=Be.nucleotideIndex;if(Ue in je||(je[Ue]=[]),je[Ue].push(ze),Ue in C){var Ge=C[Ue];if(ze in Ge){var We,He=Ge[ze],Ke=(0,s.Z)(He);try{for(Ke.s();!(We=Ke.n()).done;){var Ve=We.value;Ze.push((0,d.selectRelevantBasePairKeys)(Be,Ve))}}catch(Un){Ke.e(Un)}finally{Ke.f()}}}}}catch(Un){Fe.e(Un)}finally{Fe.f()}for(var Xe=new Array,qe=0;qe<k.length;qe++)if(qe!==U&&qe!==W){var Ye=k[qe],Qe=(qe+1)%k.length,$e=k[Qe],Je=L[qe],et=L[Qe],tt=(0,b.scaleUp)((0,b.add)(Je,et),.5),nt=(0,b.orthogonalizeLeft)((0,b.subtract)(et,Je));(0,b.dotProduct)(nt,(0,b.subtract)(tt,Oe))<0&&(nt=(0,b.negate)(nt));var rt=(0,b.asAngle)(nt);if(Ye.rnaMoleculeName!==$e.rnaMoleculeName||1!==Math.abs(Ye.nucleotideIndex-$e.nucleotideIndex)){var ot=.5*(0,b.distance)(Je,et),at=Ye.rnaMoleculeName,it=$e.rnaMoleculeName,lt=Ye.nucleotideIndex,st=$e.nucleotideIndex,ut=E.rnaMoleculeProps[at],ct=E.rnaMoleculeProps[it],dt=ut.nucleotideProps,ft=ct.nucleotideProps,pt=C[at],ht=C[it];at in je||(je[at]=[]);var mt=je[at];it in je||(je[it]=[]);for(var vt=je[it],xt=new Array,gt=lt-k[(qe-1+k.length)%k.length].nucleotideIndex,yt=st-k[(qe+2)%k.length].nucleotideIndex,bt=0,Nt=[{rnaMoleculeName:at,nucleotideIndex:lt+gt,otherRnaMoleculeName:it,otherInitialNucleotideIndex:st,nucleotideProps:dt,nucleotideKeysToRerenderPerRnaMolecule:mt,basePairsPerRnaMolecule:pt,nucleotideIndexIncrement:gt,otherNucleotideIndexIncrement:yt},{rnaMoleculeName:it,nucleotideIndex:st+yt,otherRnaMoleculeName:at,otherInitialNucleotideIndex:lt,nucleotideProps:ft,nucleotideKeysToRerenderPerRnaMolecule:vt,basePairsPerRnaMolecule:ht,nucleotideIndexIncrement:yt,otherNucleotideIndexIncrement:gt}];bt<Nt.length;bt++){var Et=Nt[bt],It=Et.rnaMoleculeName,Ct=Et.nucleotideIndex,St=Et.otherRnaMoleculeName,_t=Et.otherInitialNucleotideIndex,At=Et.nucleotideProps,Pt=Et.nucleotideKeysToRerenderPerRnaMolecule,Tt=Et.basePairsPerRnaMolecule,Rt=Et.nucleotideIndexIncrement;for(Et.otherNucleotideIndexIncrement;Ct&&(It!==St||Ct!==_t)&&Ct in At;){g.addFullIndices({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName:It,nucleotideIndex:Ct});var Mt=At[Ct],wt=(0,b.toPolar)((0,b.subtract)(Mt,tt));wt.angle-=rt;var kt=void 0,Ot=new Array;if(void 0!==Mt.labelContentProps&&(kt=(0,b.asAngle)(Mt.labelContentProps),Ot.push({position:Mt.labelContentProps,magnitude:(0,b.magnitude)(Mt.labelContentProps)})),void 0!==Mt.labelLineProps){var Lt=Mt.labelLineProps.points;kt=(0,b.asAngle)(Lt[0]),Ot.push.apply(Ot,(0,l.Z)(Lt.map((function(e){return{position:e,magnitude:(0,b.magnitude)(e)}}))))}if(void 0!==kt&&(kt-=rt),xt.push({singularNucleotideProps:Mt,polarWithAngleSubtracted:wt,annotationData:void 0===kt?void 0:{subtractedAnnotationAngle:kt,positionsWithMagnitudes:Ot}}),Pt.push(Ct),Ct in Tt){var jt,Dt={rnaMoleculeName:It,nucleotideIndex:Ct},Zt=Tt[Ct],Ft=(0,s.Z)(Zt);try{for(Ft.s();!(jt=Ft.n()).done;){var Bt=jt.value;Ze.push((0,d.selectRelevantBasePairKeys)(Dt,Bt))}}catch(Un){Ft.e(Un)}finally{Ft.f()}}Ct+=Rt}}Xe.push({arrayIndex:qe,positionsToEdit:xt,originalBasePairDistanceOverTwo:ot})}}for(var Ut=0,zt=Object.values(je);Ut<zt.length;Ut++){zt[Ut].sort(N.subtractNumbers)}function Gt(){r(structuredClone(Le)),o(structuredClone(De))}Ze.sort(d.compareBasePairKeys);for(var Wt=new Array,Ht=0,Kt=Object.entries(f);Ht<Kt.length;Ht++)for(var Vt=(0,i.Z)(Kt[Ht],2),Xt=Vt[0],qt=Vt[1],Yt=(Number.parseInt(Xt),0),Qt=Object.entries(qt);Yt<Qt.length;Yt++)for(var $t=(0,i.Z)(Qt[Yt],2),Jt=$t[0],en=$t[1],tn=E.rnaMoleculeProps[Jt],nn=0,rn=Array.from(en);nn<rn.length;nn++){var on=rn[nn],an=tn.nucleotideProps[on];Wt.push(an)}g.updatePositionsHelper=function(e,t){for(var n=q(e),r=(0,b.subtract)(K,n),o=(0,b.subtract)(V,n),a=(0,b.angleBetween)(r,o),i=(0,b.asAngle)(r),u=(2*Math.PI-a)/(L.length-1)*(0,N.sign)((0,b.crossProduct)(o,r)),c=i,d=U,f=new Array,h=0;h<L.length-2;h++){c+=u,d=(d+H+L.length)%L.length;var m=(0,b.add)(n,(0,b.toCartesian)({radius:e,angle:c})),v=L[d];f.push({angle:c,singularNucleotideProps:v}),Wt.includes(v)||(v.x=m.x,v.y=m.y)}if(t){var x,g=(0,s.Z)(f);try{for(g.s();!(x=g.n()).done;){var y=x.value,E=y.angle,I=y.singularNucleotideProps;if(!Wt.includes(I)){var C=(0,b.toNormalCartesian)(E),S=[];void 0!==I.labelContentProps&&S.push(I.labelContentProps),void 0!==I.labelLineProps&&(I.labelLineProps.points=(0,l.Z)(I.labelLineProps.points),S.push.apply(S,(0,l.Z)(I.labelLineProps.points)));for(var _=0,A=S;_<A.length;_++){var P=A[_],T=(0,b.scaleUp)(C,(0,b.magnitude)(P));P.x=T.x,P.y=T.y}}}}catch(Un){g.e(Un)}finally{g.f()}}for(var R=function(){var r=w[M],o=r.arrayIndex,a=r.positionsToEdit,i=r.originalBasePairDistanceOverTwo,u=L[o],c=L[(o+1)%L.length],d=(0,b.scaleUp)((0,b.add)(u,c),.5),f=(0,b.asAngle)((0,b.subtract)(d,n)),h=i/e,m=(0,b.add)((0,b.toCartesian)({angle:f,radius:e*Math.sqrt(1-h*h)}),n),v=(0,b.scaleUp)((0,b.normalize)((0,b.subtract)(u,d)),i),x=(0,b.add)(m,v),g=(0,b.subtract)(m,v);if(Wt.includes(u)||(u.x=x.x,u.y=x.y),Wt.includes(c)||(c.x=g.x,c.y=g.y),d=(0,b.scaleUp)((0,b.add)(x,g),.5),0===a.length)return"continue";var y,N=a.map((function(e){var t=e.singularNucleotideProps,n=e.polarWithAngleSubtracted,r=(0,p.Z)({},n);return r.angle+=f,{singularNucleotideProps:t,dv:(0,b.toCartesian)(r)}})),E=(0,b.dotProduct)((0,b.subtract)(d,n),N[0].dv)<0,I=E?b.subtract:b.add,C=(0,s.Z)(N);try{for(C.s();!(y=C.n()).done;){var S=y.value,_=S.singularNucleotideProps,A=I(d,S.dv);Wt.includes(_)||(_.x=A.x,_.y=A.y)}}catch(Un){C.e(Un)}finally{C.f()}if(t){var P,T=(0,s.Z)(a);try{for(T.s();!(P=T.n()).done;){var R=P.value,k=R.singularNucleotideProps,O=R.annotationData;if(void 0!==O){var j=E?f-O.subtractedAnnotationAngle:f+O.subtractedAnnotationAngle;void 0!==k.labelLineProps&&(k.labelLineProps.points=(0,l.Z)(k.labelLineProps.points));var D,Z=(0,b.toNormalCartesian)(j),F=(0,s.Z)(O.positionsWithMagnitudes);try{for(F.s();!(D=F.n()).done;){var B=D.value,U=B.position,z=B.magnitude,G=(0,b.scaleUp)(Z,z);Wt.includes(U)||(U.x=G.x,U.y=G.y)}}catch(Un){F.e(Un)}finally{F.f()}}}}catch(Un){T.e(Un)}finally{T.f()}}},M=0,w=Xe;M<w.length;M++)R();Gt()};var ln=k[U],sn=ln.rnaMoleculeName,un=E.rnaMoleculeProps[sn],cn=k[W],dn=cn.rnaMoleculeName,fn=E.rnaMoleculeProps[dn];g.rnaCycleBoundsText=(0,A.jsxs)(A.Fragment,{children:["Anchored by:",(0,A.jsx)("br",{}),"Nucleotide #",ln.nucleotideIndex+un.firstNucleotideIndex,(0,A.jsx)("br",{}),'In RNA molecule "',sn,'"',(0,A.jsx)("br",{}),"And",(0,A.jsx)("br",{}),"Nucleotide #",cn.nucleotideIndex+fn.firstNucleotideIndex,(0,A.jsx)("br",{}),'In RNA molecule "',dn,'"',(0,A.jsx)("br",{}),'In RNA complex "',E.name,'"']});for(var pn=new Array,hn=0,mn=Xe;hn<mn.length;hn++){var vn,xn=mn[hn].positionsToEdit,gn=(0,s.Z)(xn);try{for(gn.s();!(vn=gn.n()).done;){var yn=vn.value.singularNucleotideProps;pn.push(yn)}}catch(Un){gn.e(Un)}finally{gn.f()}}X=Xe.reduce((function(e,t){var n=t.originalBasePairDistanceOverTwo;return Math.max(e,n+Q)}),X),g.minimumRadius=X,g.editMenuProps={initialRadius:we,minimumRadius:X,updatePositionsHelper:g.updatePositionsHelper,cycleGraphNucleotides:L.filter((function(e){return!Wt.includes(e)})),branchNucleotides:pn.filter((function(e){return!Wt.includes(e)})),rerender:Gt,getRadius:function(){return Math.max((0,Y.Yq)(L[0],K,V).radius,X)}};var bn=ge(v.rnaComplexIndex,E,y),Nn=g.indicesOfAffectedNucleotides[v.rnaComplexIndex],En=[];g.helices=[];var In,Cn=(0,s.Z)(bn.helixDataPerRnaMolecules);try{for(Cn.s();!(In=Cn.n()).done;){var Sn,_n=In.value,An=_n.rnaMoleculeName0,Pn=_n.helixData,Tn=(0,s.Z)(Pn);try{for(Tn.s();!(Sn=Tn.n()).done;){var Rn=Sn.value,Mn=Rn.rnaMoleculeName1,wn=Rn.start,kn=Rn.stop,On={rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName0:An,rnaMoleculeName1:Mn,nucleotideIndex0:wn[0]+E.rnaMoleculeProps[An].firstNucleotideIndex,nucleotideIndex1:Math.max(wn[1],kn[1])+E.rnaMoleculeProps[Mn].firstNucleotideIndex,length:Math.abs(wn[0]-kn[0])+1},Ln=!0;e:for(var jn=0;jn<On.length;jn++){var Dn=On.nucleotideIndex0+jn,Zn=On.nucleotideIndex1-jn;if(!(An in Nn)){Ln=!1;break}if(!(Mn in Nn)){Ln=!1;break}var Fn=Nn[An],Bn=Nn[Mn];if(!Fn.has(Dn)||!Bn.has(Zn)){Ln=!1;break e}}Ln&&(En.push(On),g.helices.push({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName0:An,rnaMoleculeName1:Mn,start:wn,stop:kn}))}}catch(Un){Tn.e(Un)}finally{Tn.f()}}}catch(Un){Cn.e(Un)}finally{Cn.f()}return g.initialBasePairs=En,g}return(0,m.Z)(n,[{key:"drag",value:function(){var e=this.initialDrag,t=this.updatePositionsHelper,n=this.boundingVector0,r=this.boundingVector1,o=this.minimumRadius;return{initiateDrag:function(){return e},continueDrag:function(e,a){t(Math.max((0,Y.Yq)(n,r,e).radius,o),a)}}}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex;n.rnaMoleculeName;switch(e){case c.OK.EDIT:t=(0,A.jsx)(K.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(){}});break;case c.OK.ANNOTATE:var i,l=(0,a.Z)({},o,{}),u=l[o],d={rnaMoleculeName:void 0},f=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},h=(0,s.Z)(this.cycleIndices);try{for(h.s();!(i=h.n()).done;){var m=i.value,v=m.rnaMoleculeName,x=m.nucleotideIndex;v in u||(u[v]=[]);var y=v in f?f[v]:new Set,b=u[v];if(!y.has(x))if(v===d.rnaMoleculeName&&b.length>0){var N=b[b.length-1];x===N.minimumNucleotideIndexInclusive-1?N.minimumNucleotideIndexInclusive=x:x===N.maximumNucleotideIndexInclusive+1?N.maximumNucleotideIndexInclusive=x:b.push({minimumNucleotideIndexInclusive:x,maximumNucleotideIndexInclusive:x})}else b.push({minimumNucleotideIndexInclusive:x,maximumNucleotideIndexInclusive:x})}}catch(E){h.e(E)}finally{h.f()}t=(0,A.jsx)(r.Component,{regions:l,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA cycle:"]}),(0,A.jsx)("br",{}),this.rnaCycleBoundsText,(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(z),ee=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,s,u,c,f){var p,m,v,x=u.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,i,s,c,f)).dragListener=void 0,v.partialHeader=void 0,v.editMenuProps=void 0,v.initialBasePairs=void 0,v.helix=void 0;var g=v.fullKeys0,y=g.rnaComplexIndex,E=g.rnaMoleculeName,S=g.nucleotideIndex,_=E,P=v.rnaComplexProps[y],T=P.basePairs,R=P.rnaMoleculeProps[_],M=R.nucleotideProps[S];if(!I.default.isNucleotideBasePaired(M.symbol,P,T,E,S,x))throw B;var w,k=T[_][S];if(1===k.length)w=k[0];else{var O;if(void 0===f)throw U;if(w=k.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return f.rnaMoleculeName===t&&f.nucleotideIndex===n})),!I.default.isEnabledBasePair(null!==(O=w.basePairType)&&void 0!==O?O:(0,I.getBasePairType)(M.symbol,P.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol),x))throw B}var L=w.rnaMoleculeName,j=P.rnaMoleculeProps[L],D=j.nucleotideProps[w.nucleotideIndex],Z=new Array,F=(p={},(0,a.Z)(p,_,[]),(0,a.Z)(p,L,[]),p),z=F[_],W=F[L],H=(0,a.Z)({},y,F),K=(0,a.Z)({},y,[]),V=K[y];V.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:_,nucleotideIndex:S},{rnaMoleculeName:L,nucleotideIndex:w.nucleotideIndex}));var X=Ee(P,_,S,L,w.nucleotideIndex,Z,x,V,(function(e){F[e.rnaMoleculeName].push(e.nucleotideIndex)})),q=X.start,Y=X.stop;if(_===L){var Q=Ie(q,Y);0===Q?(Ne(P,_,q,Z,z,x),q[0]!==Y[0]&&Ne(P,_,Y,Z,z,x)):Ne(P,_,Q<0?q:Y,Z,z,x)}function $(){r(structuredClone(H)),o(structuredClone(K))}z.sort(N.subtractNumbers),W.sort(N.subtractNumbers),V.sort(d.compareBasePairKeys);var J=new Array;if(y in s){var ee=s[y];if(_ in ee)for(var te=ee[_],ne=0,re=Array.from(te);ne<re.length;ne++){var oe=re[ne];J.push(R.nucleotideProps[oe])}if(L in ee)for(var ae=ee[L],ie=0,le=Array.from(ae);ie<le.length;ie++){var se=le[ie];J.push(j.nucleotideProps[se])}}Z=Z.filter((function(e){return!J.includes(e)})),v.dragListener=G({x:M.x,y:M.y},Z,$);var ue,ce,de,fe="Nucleotides [".concat(q[0]+R.firstNucleotideIndex,", ").concat(Y[0]+R.firstNucleotideIndex,"]"),pe="Nucleotides [".concat(q[1]+j.firstNucleotideIndex,", ").concat(Y[1]+j.firstNucleotideIndex,"]");if(ue=_===L?(0,A.jsxs)(A.Fragment,{children:[fe,(0,A.jsx)("br",{}),"Contiguously bound to",(0,A.jsx)("br",{}),pe,(0,A.jsx)("br",{}),'In RNA molecule "',_,'"']}):(0,A.jsxs)(A.Fragment,{children:[fe,(0,A.jsx)("br",{}),'In RNA molecule "',_,'"',(0,A.jsx)("br",{}),pe,(0,A.jsx)("br",{}),'In RNA molecule "',L,'"']}),_===L){var he,me=Math.min(q[0],q[1],Y[0],Y[1]);switch(me){case q[0]:he=q[1];break;case q[1]:he=q[0];break;case Y[0]:he=Y[1];break;case Y[1]:he=Y[0];break;default:throw"This condition should be impossible."}ce=R.nucleotideProps[me],de=R.nucleotideProps[he]}else ce=M,de=D;(0,b.scaleUp)((0,b.add)(ce,de),.5),(0,b.orthogonalizeLeft)((0,b.subtract)(de,ce));v.partialHeader=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("br",{}),ue,(0,A.jsx)("br",{}),'In RNA complex "',P.name,'"',(0,A.jsx)("br",{})]});for(var ve=Z.length>0&&null!==(m=Z[0].color)&&void 0!==m?m:C.BLACK,xe=1;xe<Z.length;xe++){var ge;if(!(0,C.areEqual)(ve,null!==(ge=Z[xe].color)&&void 0!==ge?ge:C.BLACK)){!1;break}}v.editMenuProps={positions:Z,onUpdatePositions:$,boundingVector0:ce,boundingVector1:de};var ye={rnaComplexIndex:y,rnaMoleculeName0:_,rnaMoleculeName1:L,nucleotideIndex0:Math.min(q[0],Y[0])+R.firstNucleotideIndex,nucleotideIndex1:Math.max(q[1],Y[1])+j.firstNucleotideIndex,length:Y[0]-q[0]+1};return v.initialBasePairs=[ye],v.addFullIndicesPerNucleotideKeysToRerender(H),v.helix={rnaComplexIndex:y,rnaMoleculeName0:_,rnaMoleculeName1:L,start:q,stop:Y},v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," helix:"]}),this.partialHeader]});switch(e){case c.OK.EDIT:t=(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(T.Simplified,(0,p.Z)({},this.editMenuProps))});break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case c.OK.ANNOTATE:var s,u=this.initialBasePairs[0],d=u.rnaMoleculeName0,f=u.rnaMoleculeName1,h=u.nucleotideIndex0,m=u.nucleotideIndex1,v=u.length,x=this.rnaComplexProps[o],y=x.rnaMoleculeProps[d],b=x.rnaMoleculeProps[f],E=h-y.firstNucleotideIndex,I=m-b.firstNucleotideIndex,C={minimumNucleotideIndexInclusive:E,maximumNucleotideIndexInclusive:E+v-1},S={minimumNucleotideIndexInclusive:I-v+1,maximumNucleotideIndexInclusive:I},_=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},P=d in _?_[d]:new Set,R=f in _?_[f]:new Set,M=[],w=[];r.populateRegions(P,(0,N.range)(C.maximumNucleotideIndexInclusive+1,C.minimumNucleotideIndexInclusive),M),r.populateRegions(R,(0,N.range)(S.maximumNucleotideIndexInclusive+1,S.minimumNucleotideIndexInclusive),w),s=d===f?(0,a.Z)({},o,(0,a.Z)({},d,M)):(0,a.Z)({},o,{regionsPerRnaMoleculeName0:M,regionsPerRnaMoleculeName1:w}),t=(0,A.jsx)(r.Component,{regions:s,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unrecognized Tab"}return(0,A.jsxs)(A.Fragment,{children:[l,t]})}},{key:"getHelices",value:function(){return[this.helix]}}]),n}(z);(q||(q={})).Component=function(e){var t=e.initialName,n=e.rnaComplexIndex,r=e.rnaMoleculeName,o=e.rnaComplexProps,l=e.setNucleotideKeysToRerender,c=e.setBasePairKeysToRerender,d=o[n],h=d.basePairs,m=(0,u.useContext)(f._.App.UpdateRnaMoleculeNameHelper),v=(0,u.useContext)(f._.App.IndicesOfFrozenNucleotides),x=n in v?v[n]:{},g=r in x?x[r]:new Set,E=(0,u.useState)(t),I=(0,i.Z)(E,2),C=I[0],S=I[1];(0,u.useEffect)((function(){S(t)}),[t]);var _=(0,u.useMemo)((function(){var e=d.rnaMoleculeProps[t],r=h[t],o=e.nucleotideProps,i=Object.keys(o).map(N.parseInteger),u=new Array,f=(0,a.Z)({},n,(0,a.Z)({},t,[])),p=f[n][t],m=(0,a.Z)({},n,[]),v=m[n],x=void 0;i.sort(N.subtractNumbersNegated);var y,E=!1,I=(0,s.Z)(i);try{for(I.s();!(y=I.n()).done;){var C=y.value;p.unshift(C);var S=o[C];if(g.has(C)||u.unshift(S),C in r){v.unshift({rnaMoleculeName:t,nucleotideIndex:C});var _,A=r[C],P=(0,s.Z)(A);try{for(P.s();!(_=P.n()).done;)_.value.rnaMoleculeName!==t&&(E=!0)}catch(w){P.e(w)}finally{P.f()}var T=A.reduce((function(e,t){return Math.max(e,t.nucleotideIndex)}),Number.NEGATIVE_INFINITY);x={0:S,1:o[T]}}}}catch(w){I.e(w)}finally{I.f()}if(void 0===x){var R=Object.values(o)[0];x={0:(0,b.add)(R,{x:-1,y:0}),1:(0,b.add)(R,{x:1,y:0})}}function M(){l(structuredClone(f)),c(structuredClone(m))}return E?{errorMessage:"Cannot re-position nucleotides of this RNA molecule, because it is base-paired to another RNA molecule.",orientationEditorProps:{boundingVector0:{x:0,y:0},boundingVector1:{x:1,y:0},positions:u,onUpdatePositions:M,disabledFlag:!0}}:{orientationEditorProps:{positions:u,onUpdatePositions:M,boundingVector0:x[0],boundingVector1:x[1]},errorMessage:void 0}}),[t]),P=_.orientationEditorProps,R=_.errorMessage;return(0,A.jsxs)(A.Fragment,{children:["Name:\xa0",(0,A.jsx)(y.Z.Component,{value:C,setValue:function(e){S(e)},valueToString:function(e){return e},stringToValue:function(e){return e in d.rnaMoleculeProps?(alert("This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."),{errorMessage:"This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."}):(m(n,C,e),e)},htmlInputType:"text"}),(0,A.jsx)("br",{}),R&&(0,A.jsxs)(A.Fragment,{children:[R,(0,A.jsx)("br",{})]}),(0,A.jsx)(T.Simplified,(0,p.Z)({},P))]})};var te,ne=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,u,c,f,p){var m,v=c.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,u,f,p)).dragListener=void 0,m.dragError=void 0,m.editMenuProps=void 0,m.initialBasePairs=void 0,m.helices=void 0;var x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,E=m.rnaComplexProps[g],I=E.rnaMoleculeProps[y],C=I.nucleotideProps[b],S=new Array,_=E.basePairs[y],A=(0,a.Z)({},g,(0,a.Z)({},y,[])),P=A[g][y],T=(0,a.Z)({},g,[]),R=T[g],M=Object.keys(I.nucleotideProps).map(N.parseInteger);M.sort(N.subtractNumbers);var w,k=g in u?u[g]:{},O=y in k?k[y]:new Set,L=(0,s.Z)(M);try{for(L.s();!(w=L.n()).done;){var j=w.value;if(m.addFullIndices({rnaComplexIndex:g,rnaMoleculeName:y,nucleotideIndex:j}),O.has(j)||(S.push(I.nucleotideProps[j]),P.push(j)),j in _){var D,Z=_[j],F={rnaMoleculeName:y,nucleotideIndex:j},B=(0,s.Z)(Z);try{for(B.s();!(D=B.n()).done;){var U=D.value;R.push((0,d.selectRelevantBasePairKeys)(F,U))}}catch(W){B.e(W)}finally{B.f()}}}}catch(W){L.e(W)}finally{L.f()}R.sort(d.compareBasePairKeys),m.dragListener=G(structuredClone(C),S,(function(){r(structuredClone(A)),o(structuredClone(T))})),m.editMenuProps={initialName:y,rnaComplexProps:e,rnaComplexIndex:f.rnaComplexIndex,rnaMoleculeName:y,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var z=ye(E,y,v);return m.helices=z.helixData.map((function(e){var t=e.rnaMoleculeName1,n=e.start,r=e.stop;return{rnaComplexIndex:g,rnaMoleculeName0:y,rnaMoleculeName1:t,start:n,stop:r}})),m.initialBasePairs=z.helixData.map((function(e){return{rnaComplexIndex:g,rnaMoleculeName0:y,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+I.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+I.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}})),m}return(0,m.Z)(n,[{key:"drag",value:function(){if(void 0!==this.dragError)throw this.dragError;return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,s=(0,A.jsxs)("b",{children:[e,' RNA molecule "',i,'":',(0,A.jsx)("br",{})]});switch(e){case c.OK.EDIT:s=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA molecule:"]}),(0,A.jsx)("br",{})]}),t=(0,A.jsx)(q.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var n=e[t],r="This constraint expects base pairs to involve the clicked-on RNA molecule. The base pair on line #".concat(t+1," does not.");if(o!==n.rnaComplexIndex||i!==n.rnaMoleculeName0&&i!==n.rnaMoleculeName1)throw r}}});break;case c.OK.ANNOTATE:var u=this.rnaComplexProps[o].rnaMoleculeProps[i],d=Math.max.apply(Math,(0,l.Z)(Object.keys(u.nucleotideProps).map(N.parseInteger))),f=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},h=i in f?f[i]:new Set,m=[];r.populateRegions(h,(0,N.range)(d+1,0),m),t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,m)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[s,t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1;return n===t.fullKeys0.rnaComplexIndex&&[r,o].includes(t.fullKeys0.rnaMoleculeName)}))}}]),n}(z);!function(e){var t=function(e){return e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counterclockwise",e.STRAIGHT="straight",e}({});e.Orientation=t,e.Component=function(e){var n=e.updateSingleStrandPositions,r=e.updateSingleStrandColors,o=e.updateSingleStrandFonts,a=e.initialColor,l=e.initialFont,s=e.getDisplacementAlongNormal,c=e.getOrientation,d=(0,u.useContext)(f._.OrientationEditor.ResetDataTrigger),h=(0,u.useContext)(f._.App.Settings)[X.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],m=(0,u.useContext)(f._.App.PushToUndoStack),v=(0,u.useState)(c()),x=(0,i.Z)(v,2),g=x[0],b=x[1],N=(0,u.useState)(s()),E=(0,i.Z)(N,2),I=E[0],C=E[1],S=(0,u.useState)(a),_=(0,i.Z)(S,2),P=_[0],T=_[1],R=(0,u.useState)(l),M=(0,i.Z)(R,2),w=M[0],L=M[1],j=(0,u.useState)(!1),D=(0,i.Z)(j,2),Z=D[0],F=D[1],B=(0,u.useState)(!1),U=(0,i.Z)(B,2),z=U[0],G=U[1];(0,u.useEffect)((function(){C(s()),b(c())}),[d]);var W="orientation";function H(e){z||m(),b(e),G(!0),n(e,I,h)}return(0,u.useEffect)((function(){T(a)}),[a]),(0,u.useEffect)((function(){L(l)}),[l]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("b",{children:"Orientation:"}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Clockwise:\xa0",(0,A.jsx)("input",{type:"radio",value:"clockwise",name:W,onChange:function(){H(t.CLOCKWISE)},checked:g===t.CLOCKWISE})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Straight:\xa0",(0,A.jsx)("input",{type:"radio",value:"straight",name:W,onChange:function(){H(t.STRAIGHT)},checked:g===t.STRAIGHT})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Counterclockwise:\xa0",(0,A.jsx)("input",{type:"radio",value:"counterclockwise",name:W,onChange:function(){H(t.COUNTERCLOCKWISE)},checked:g===t.COUNTERCLOCKWISE})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{style:{display:g===t.CLOCKWISE||g===t.COUNTERCLOCKWISE?"block":"none"},children:["Displacement along normal:\xa0",(0,A.jsx)(y.Z.Number,{value:I,setValue:function(e){!function(e){Z||m(),C(e),F(!0)}(e),n(g,e,h)}})]}),(0,A.jsx)(k.S.Component,{color:P,setColorHelper:function(e){r(e),T(e)}}),(0,A.jsx)(O.f.Component,(0,p.Z)((0,p.Z)({},w),{},{setFont:function(e){L(e),o(e)}}))]})}}(te||(te={}));var re=2*Math.PI;function oe(e,t,n,r,o){var a,i=e.angleTraversal/(n-t),u=e.beginningAngle+i,c=new Array,d=(0,s.Z)(r);try{for(d.s();!(a=d.n()).done;){var f=a.value;c.push({angle:u,singularNucleotideProps:f});var p=(0,b.add)(e.boundingCircle.center,(0,b.toCartesian)({angle:u,radius:e.boundingCircle.radius}));f.x=p.x,f.y=p.y,u+=i}}catch(_){d.e(_)}finally{d.f()}if(o){var h,m=(0,s.Z)(c);try{for(m.s();!(h=m.n()).done;){var v=h.value,x=v.singularNucleotideProps,g=v.angle,y=(0,b.toNormalCartesian)(g),N=[];void 0!==x.labelContentProps&&N.push(x.labelContentProps),void 0!==x.labelLineProps&&(x.labelLineProps.points=(0,l.Z)(x.labelLineProps.points),N.push.apply(N,(0,l.Z)(x.labelLineProps.points)));for(var E=0,I=N;E<I.length;E++){var C=I[E],S=(0,b.scaleUp)(y,(0,b.magnitude)(C));C.x=S.x,C.y=S.y}}}catch(_){m.e(_)}finally{m.f()}}}function ae(e,t,n,r){var o=(0,b.subtract)(t,e),a=(0,b.subtract)(n,e),i=(0,b.asAngle)(o),l=((0,b.asAngle)(a)-i+re)%re;return r(l)&&(l=function(e){return e<0?e+re:e-re}(l)),{beginningAngle:i,angleTraversal:l}}var ie,le=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,u,c,f,m){var v,x,g=c.truncateRnaSingleStrandFlag,y=c.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(x=t.call(this,e,r,o,i,u,f,m)).dragListener=void 0,x.partialMenuHeader=void 0,x.getDisplacementAlongNormal=void 0,x.getOrientation=void 0,x.updateSingleStrandPositions=void 0,x.updateSingleStrandColors=void 0,x.updateSingleStrandFonts=void 0,x.formattedLowerBoundingNucleotideIndex=void 0,x.formattedUpperBoundingNucleotideIndex=void 0,x.lowerBoundingNucleotideIndex=void 0,x.upperBoundingNucleotideIndex=void 0;var E=x.fullKeys0,C=E.rnaComplexIndex,S=E.rnaMoleculeName,_=E.nucleotideIndex,P=new Set;if(C in u){var T=u[C];S in T&&(P=T[S])}var R=x.rnaComplexProps[C],M=null!==(v=R.basePairs[S])&&void 0!==v?v:{};if(_ in M)throw F;var w,k=R.rnaMoleculeProps[S],O=new Array,L=[],j=(0,a.Z)({},C,(0,a.Z)({},S,L)),D=[],Z=(0,a.Z)({},C,D),B=_;x.addFullIndices({rnaComplexIndex:C,rnaMoleculeName:S,nucleotideIndex:_});for(var U={x:0,y:0},z=function(){var e=B-1;if(B=e,!(e in k.nucleotideProps))return U=structuredClone(k.nucleotideProps[e+1]),w=!1,"break";var t=k.nucleotideProps[e];if(e in M&&M[e].some((function(t){var n,r=t.rnaMoleculeName,o=t.nucleotideIndex,a=null!==(n=t.basePairType)&&void 0!==n?n:(0,I.getBasePairType)(k.nucleotideProps[e].symbol,R.rnaMoleculeProps[r].nucleotideProps[o].symbol);return I.default.isEnabledBasePair(a,y)}))||g&&P.has(_)!==P.has(e))return U=t,w=!0,"break";L.unshift(e),x.addFullIndices({rnaComplexIndex:C,rnaMoleculeName:S,nucleotideIndex:e}),O.unshift(t)};;){if("break"===z())break}var W=O.length;L.push(_),O.push(k.nucleotideProps[_]);for(var H,K=_,V={x:0,y:0},X=function(){var e=K+1;if(K=e,!(e in k.nucleotideProps))return V=structuredClone(k.nucleotideProps[e-1]),H=!1,"break";var t=k.nucleotideProps[e];if(e in M&&M[e].some((function(t){var n,r=t.rnaMoleculeName,o=t.nucleotideIndex,a=null!==(n=t.basePairType)&&void 0!==n?n:(0,I.getBasePairType)(k.nucleotideProps[e].symbol,R.rnaMoleculeProps[r].nucleotideProps[o].symbol);return I.default.isEnabledBasePair(a,y)}))||g&&P.has(_)!==P.has(e))return V=t,H=!0,"break";L.push(e),x.addFullIndices({rnaComplexIndex:C,rnaMoleculeName:S,nucleotideIndex:e}),O.push(t)};;){if("break"===X())break}for(var q=B;q<=K;q++)if(q in M){var Q,$=M[q],J=(0,s.Z)($);try{for(J.s();!(Q=J.n()).done;){var ee=Q.value;D.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:S,nucleotideIndex:q},ee))}}catch(de){J.e(de)}finally{J.f()}}function ne(){r(structuredClone(j)),o(structuredClone(Z))}D.sort(d.compareBasePairKeys);var re=O[W],ie={x:re.x,y:re.y};if(P.has(_))x.dragListener={initiateDrag:function(){return{x:0,y:0}},continueDrag:function(){}},K=_-1,B=_+1;else if(w!==H){var le;w?le=U:(O.reverse(),W=O.length-W-1,le=V),x.dragListener=function(e,t,n,r,o){var a=1/(n+1),i=t.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var n=(0,b.subtract)(e,r),l=(0,b.scaleUp)(n,a),s=r,u=0;u<i;u++){var c=t[u];c.x=s.x,c.y=s.y,s=(0,b.add)(s,l),c.x=s.x,c.y=s.y}o()}}}(ie,O,W,le,ne)}else x.dragListener=w?{initiateDrag:function(){return ie},continueDrag:function(e,t){var n=function(e,t,n,r){var o=(0,Y.Yq)(e,t,n);return(0,p.Z)((0,p.Z)({},ae(o.center,t,n,r)),{},{boundingCircle:o})}(e,U,V,(function(){return function(e,t,n){return(0,N.sign)((0,b.crossProduct)((0,b.subtract)(e,t),(0,b.subtract)(n,t)))<0}(e,U,V)}));oe(n,B,K,O,t),ne()}}:G(ie,O,ne);x.partialMenuHeader=(0,A.jsxs)(A.Fragment,{children:[O.length," nucleotides in the range (",B+k.firstNucleotideIndex,", ",K+k.firstNucleotideIndex,")",(0,A.jsx)("br",{}),'In RNA molecule "',S,'"',(0,A.jsx)("br",{}),'In RNA complex "',R.name,'"',(0,A.jsx)("br",{})]});var se=(0,b.subtract)(V,U),ue=(0,b.scaleUp)((0,b.add)(V,U),.5),ce=(0,b.normalize)((0,b.orthogonalizeRight)(se));return x.getDisplacementAlongNormal=function(){for(var e={x:0,y:0},t=0,n=O;t<n.length;t++){var r=n[t],o=(0,Y.Yq)(r,U,V);e=(0,b.add)(e,o.center)}var a=(0,b.scaleDown)(e,O.length);return(0,b.dotProduct)((0,b.subtract)(a,ue),ce)},x.getOrientation=function(){switch((0,N.sign)((0,b.crossProduct)((0,b.subtract)(O[0],ue),se))){case 0:return te.Orientation.STRAIGHT;case-1:return te.Orientation.CLOCKWISE;case 1:return te.Orientation.COUNTERCLOCKWISE}},x.lowerBoundingNucleotideIndex=B,x.upperBoundingNucleotideIndex=K,x.updateSingleStrandPositions=function(e,t,n){function r(e){var r=(0,b.add)(ue,(0,b.scaleUp)(ce,t)),o=(0,b.distance)(r,U);oe((0,p.Z)((0,p.Z)({},ae(r,U,V,(function(t){return t<0!==e}))),{},{boundingCircle:{center:r,radius:o}}),B,K,O,n),ne()}switch(e){case te.Orientation.CLOCKWISE:r(!0);break;case te.Orientation.COUNTERCLOCKWISE:r(!1);break;case te.Orientation.STRAIGHT:for(var o=(0,b.scaleDown)((0,b.subtract)(V,U),O.length+1),a=(0,b.add)(U,o),i=B+1;i<K;i++){var l=k.nucleotideProps[i];l.x=a.x,l.y=a.y,a=(0,b.add)(a,o)}ne();break;default:throw"Unrecognized orientation value."}},x.updateSingleStrandColors=function(e){for(var t=B+1;t<K;t++){k.nucleotideProps[t].color=e}ne()},x.updateSingleStrandFonts=function(e){for(var t=B+1;t<K;t++){k.nucleotideProps[t].font=e}ne()},x.formattedLowerBoundingNucleotideIndex=B+k.firstNucleotideIndex,x.formattedUpperBoundingNucleotideIndex=K+k.firstNucleotideIndex,x}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=t.nucleotideIndex,l=this.formattedLowerBoundingNucleotideIndex,s=this.formattedUpperBoundingNucleotideIndex,u=this.rnaComplexProps[n].rnaMoleculeProps[o],d=i+u.firstNucleotideIndex,f=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," single-stranded region:"]}),(0,A.jsx)("br",{}),this.partialMenuHeader]});switch(e){case c.OK.EDIT:for(var p,h,m=!0,v=!0,x=u.nucleotideProps[this.lowerBoundingNucleotideIndex+1],y=null!==(p=x.color)&&void 0!==p?p:C.BLACK,b=null!==(h=x.font)&&void 0!==h?h:S.default.DEFAULT,N=this.lowerBoundingNucleotideIndex+1;N<this.upperBoundingNucleotideIndex;N++){var E,I,_=u.nucleotideProps[N];(0,C.areEqual)(null!==(E=_.color)&&void 0!==E?E:C.BLACK,y)||(m=!1),S.default.areEqual(null!==(I=_.font)&&void 0!==I?I:S.default.DEFAULT,b)||(v=!1)}return(0,A.jsxs)(A.Fragment,{children:[f,(0,A.jsx)(te.Component,{initialColor:m?y:C.BLACK,initialFont:v?b:S.default.DEFAULT,updateSingleStrandPositions:this.updateSingleStrandPositions,updateSingleStrandColors:this.updateSingleStrandColors,updateSingleStrandFonts:this.updateSingleStrandFonts,getDisplacementAlongNormal:this.getDisplacementAlongNormal,getOrientation:this.getOrientation})]});case c.OK.FORMAT:return(0,A.jsxs)(A.Fragment,{children:[f,(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:n,rnaMoleculeName0:o,nucleotideIndex0:d}],approveBasePairs:function(e){for(var t=0;t<e.length;t++){var r=e[t],a="This constraint expects base pairs to include the clicked-on single-stranded nucleotide region. The helix on line ".concat(t+1," does not.");if(n!==r.rnaComplexIndex)throw a;var i=o===r.rnaMoleculeName0,u=o===r.rnaMoleculeName1;if(i&&u){if((s-1<r.nucleotideIndex0||l+1>=r.nucleotideIndex0+r.length)&&(s-1<=r.nucleotideIndex1-r.length||l+1>r.nucleotideIndex1))throw a}else if(i){if(s-1<r.nucleotideIndex0||l+1>=r.nucleotideIndex0+r.length)throw a}else{if(!u)throw a;if(s-1<=r.nucleotideIndex1-r.length||l+1>r.nucleotideIndex1)throw a}}},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o})]});case c.OK.ANNOTATE:return(0,A.jsxs)(A.Fragment,{children:[f,(0,A.jsx)(r.Component,{regions:(0,a.Z)({},n,(0,a.Z)({},o,[{minimumNucleotideIndexInclusive:l-u.firstNucleotideIndex+1,maximumNucleotideIndexInclusive:s-u.firstNucleotideIndex-1}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw{errorMessage:"Unhandled switch case."}}}},{key:"getHelices",value:function(){return[]}}]),n}(z),se=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,u,c,f,p,m){var v,x,g,y=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(g=t.call(this,e,r,o,i,c,p,m)).dragListener=void 0,g.partialHeader=void 0,g.editMenuProps=void 0,g.initialBasePairs=void 0,g.rnaMoleculeName0=void 0,g.rnaMoleculeName1=void 0,g.helices=void 0;var E=e[p.rnaComplexIndex],C=E.basePairs,S=C[p.rnaMoleculeName];if(!(p.nucleotideIndex in S))throw B;var _,P=S[p.nucleotideIndex].filter((function(e){var t;return I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(E.rnaMoleculeProps[p.rnaMoleculeName].nucleotideProps[p.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)}));if(0===P.length)throw B;if(P.length>1){if(void 0===m)throw U;_=P.find((function(e){return e.rnaMoleculeName===m.rnaMoleculeName&&e.nucleotideIndex===m.nucleotideIndex}))}else _=P[0];g.rnaMoleculeName0=p.rnaMoleculeName,g.rnaMoleculeName1=_.rnaMoleculeName;for(var T=(v={},(0,a.Z)(v,g.rnaMoleculeName0,new Set),(0,a.Z)(v,g.rnaMoleculeName1,new Set),v),R=[p,_],M=[],w=function(){var e;if(R.length>0)e=R.shift();else if(e=M.shift(),!T[e.rnaMoleculeName].has(e.nucleotideIndex-1)&&!T[e.rnaMoleculeName].has(e.nucleotideIndex+1))return"continue";var t=e,n=t.rnaMoleculeName,r=t.nucleotideIndex;if(T[n].has(r))return"continue";T[n].add(r);for(var o=function(){var e=i[a];if(!(e.nucleotideIndex in E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps))return"continue";var t=[];if(e.nucleotideIndex in E.basePairs[e.rnaMoleculeName]&&(t=E.basePairs[e.rnaMoleculeName][e.nucleotideIndex]).filter((function(t){var n;return I.default.isEnabledBasePair(null!==(n=t.basePairType)&&void 0!==n?n:(0,I.getBasePairType)(E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol,E.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),y)})).length>0){var n=t.filter((function(e){return e.rnaMoleculeName===g.rnaMoleculeName0||e.rnaMoleculeName===g.rnaMoleculeName1})),r=function(e){return T[e.rnaMoleculeName].has(e.nucleotideIndex-1)||T[e.rnaMoleculeName].has(e.nucleotideIndex+1)};R.push.apply(R,(0,l.Z)(n.filter(r))),M.push.apply(M,(0,l.Z)(n.filter((function(e){return!r(e)}))))}else R.push(e)},a=0,i=[{rnaMoleculeName:n,nucleotideIndex:r-1},{rnaMoleculeName:n,nucleotideIndex:r+1}];a<i.length;a++)o();r in C[n]&&M.push.apply(M,(0,l.Z)(C[n][r].filter((function(e){var t;return(e.rnaMoleculeName===g.rnaMoleculeName0||e.rnaMoleculeName===g.rnaMoleculeName1)&&I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(E.rnaMoleculeProps[n].nucleotideProps[r].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)}))))};R.length>0||M.length>0;)w();for(var k=new Array,O=(0,a.Z)({},p.rnaComplexIndex,(x={},(0,a.Z)(x,g.rnaMoleculeName0,[]),(0,a.Z)(x,g.rnaMoleculeName1,[]),x)),L=O[p.rnaComplexIndex],j=L[g.rnaMoleculeName0],D=L[g.rnaMoleculeName1],Z=(0,a.Z)({},p.rnaComplexIndex,[]),F=Z[p.rnaComplexIndex],z=[],W={},H={},K=function(){var e,t,n=X[V],r=Array.from(T[n]);function o(e){var t=r[e];return t in E.basePairs[n]&&E.basePairs[n][t].some((function(e){var r;return I.default.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:(0,I.getBasePairType)(E.rnaMoleculeProps[n].nucleotideProps[t].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)}))}for(r.sort(N.subtractNumbers);!o(0);)r.shift();for(;!o(r.length-1);)r.pop();for(var a=0;a<r.length-1;){if(o(a))a++;else r[a]!==r[a+1]-1?(r.splice(a,1),a--):a++}for(var i=r.length-1;i>0;){if(o(i))i--;else r[i]!==r[i-1]+1?(r.splice(i,1),i++):i--}(e=z).push.apply(e,(0,l.Z)(r.filter((function(e){if(!(p.rnaComplexIndex in c))return!0;var t=c[p.rnaComplexIndex];return!(n in t)||!t[n].has(e)})).map((function(e){return E.rnaMoleculeProps[n].nucleotideProps[e]})))),(t=L[n]).push.apply(t,r);for(var u=C[n],f=0,h=r;f<h.length;f++){var m=h[f];if(m in u){var v,x=u[m],g=(0,s.Z)(x);try{for(g.s();!(v=g.n()).done;){var b=v.value;F.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:n,nucleotideIndex:m},b))}}catch(A){g.e(A)}finally{g.f()}}}H[n]=r;var S=Math.min.apply(Math,r),_=Math.max.apply(Math,r);W[n]=[S,_]},V=0,X=[g.rnaMoleculeName0,g.rnaMoleculeName1];V<X.length;V++)K();var q=(0,d.selectRelevantBasePairKeys)({rnaMoleculeName:g.rnaMoleculeName0,nucleotideIndex:W[g.rnaMoleculeName0][0]},{rnaMoleculeName:g.rnaMoleculeName1,nucleotideIndex:W[g.rnaMoleculeName1][0]}),Y=E.rnaMoleculeProps[q.rnaMoleculeName].nucleotideProps[q.nucleotideIndex],Q=C[q.rnaMoleculeName][q.nucleotideIndex].filter((function(e){var t;return(e.rnaMoleculeName===g.rnaMoleculeName0||e.rnaMoleculeName===g.rnaMoleculeName1)&&H[e.rnaMoleculeName].includes(e.nucleotideIndex)&&I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(E.rnaMoleculeProps[q.rnaMoleculeName].nucleotideProps[q.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)})),$=Q.sort(d.compareBasePairKeys)[Q.length-1],J=E.rnaMoleculeProps[$.rnaMoleculeName].nucleotideProps[$.nucleotideIndex],ee=(0,b.orthogonalizeLeft)((0,b.subtract)(J,Y));function te(){r(structuredClone(O)),o(structuredClone(Z))}g.editMenuProps={boundingVector0:Y,boundingVector1:J,positions:z,onUpdatePositions:te,initialAngle:(0,b.asAngle)(ee)},j.sort(N.subtractNumbers),D.sort(N.subtractNumbers),F.sort(d.compareBasePairKeys),z=z.filter((function(e){return!k.includes(e)})),g.dragListener=G(structuredClone(e[p.rnaComplexIndex].rnaMoleculeProps[p.rnaMoleculeName].nucleotideProps[p.nucleotideIndex]),z,te);var ne=E.rnaMoleculeProps[g.rnaMoleculeName0],re=E.rnaMoleculeProps[g.rnaMoleculeName1],oe=ye(E,g.rnaMoleculeName0,y),ae=g.rnaMoleculeName0,ie=g.rnaMoleculeName1,le=oe.helixData.filter((function(e){return e.rnaMoleculeName1===g.rnaMoleculeName1&&H[g.rnaMoleculeName0].includes(e.start[0])&&H[g.rnaMoleculeName1].includes(e.start[1])&&H[g.rnaMoleculeName0].includes(e.stop[0])&&H[g.rnaMoleculeName1].includes(e.stop[1])}));function se(e){var t=E.basePairs[ae];if(!(e in t))throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";var n=t[e].filter((function(t){var n;return I.default.isEnabledBasePair(null!==(n=t.basePairType)&&void 0!==n?n:(0,I.getBasePairType)(E.rnaMoleculeProps[ae].nucleotideProps[e].symbol,E.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),y)&&t.rnaMoleculeName===ie&&H[ie].includes(t.nucleotideIndex)}));if(0===n.length)throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";return n[0].nucleotideIndex}g.initialBasePairs=le.map((function(e){return{rnaComplexIndex:p.rnaComplexIndex,rnaMoleculeName0:ae,rnaMoleculeName1:ie,nucleotideIndex0:e.start[0]+ne.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+re.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));var ue,ce=W[g.rnaMoleculeName0][0],de=H[g.rnaMoleculeName0].find((function(e,t){return e!==H[g.rnaMoleculeName0][t+1]-1})),fe="Nucleotides [".concat(ce+ne.firstNucleotideIndex,", ").concat(de+ne.firstNucleotideIndex,"]"),pe="Nucleotides [".concat(se(ce)+re.firstNucleotideIndex,", ").concat(se(de)+re.firstNucleotideIndex,"]");return ue=g.rnaMoleculeName0===g.rnaMoleculeName1?(0,A.jsxs)(A.Fragment,{children:[fe,(0,A.jsx)("br",{}),"Bound to",(0,A.jsx)("br",{}),pe,(0,A.jsx)("br",{}),'In RNA molecule "',g.rnaMoleculeName0,'"']}):(0,A.jsxs)(A.Fragment,{children:[fe,(0,A.jsx)("br",{}),'In RNA molecule "',g.rnaMoleculeName0,'"',(0,A.jsx)("br",{}),pe,(0,A.jsx)("br",{}),'In RNA molecule "',g.rnaMoleculeName1,'"']}),g.partialHeader=(0,A.jsxs)(A.Fragment,{children:[ue,(0,A.jsx)("br",{}),'In RNA complex "',E.name,'"',(0,A.jsx)("br",{})]}),g.addFullIndicesPerNucleotideKeysToRerender(O),g.helices=le.map((function(e){var t=e.rnaMoleculeName1,n=e.start,r=e.stop;return{rnaComplexIndex:p.rnaComplexIndex,rnaMoleculeName0:oe.rnaMoleculeName0,rnaMoleculeName1:t,start:n,stop:r}})),g}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=this.rnaMoleculeName0,l=this.rnaMoleculeName1,u=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," stacked helices:"]}),(0,A.jsx)("br",{}),this.partialHeader]});switch(e){case c.OK.EDIT:return(0,A.jsxs)(A.Fragment,{children:[u,(0,A.jsx)(T.Simplified,(0,p.Z)({},this.editMenuProps))]});case c.OK.FORMAT:return(0,A.jsxs)(A.Fragment,{children:[u,(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){var t,n=(0,s.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if((i!==r.rnaMoleculeName0||l!==r.rnaMoleculeName1)&&(l!==r.rnaMoleculeName0||i!==r.rnaMoleculeName1)){throw i===l?'This constraint exclusively expects base-pairs between RNA molecule "'.concat(i,'" and RNA molecule "').concat(l,'".'):'This constraint exclusivley expects base-pairs within RNA molecule "'.concat(i,'"')}}}catch(o){n.e(o)}finally{n.f()}},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o})]});case c.OK.ANNOTATE:var d,f,h=(0,a.Z)({},n,(d={},(0,a.Z)(d,i,[]),(0,a.Z)(d,l,[]),d)),m=h[n],v=m[i],x=m[l],y=this.rnaComplexProps[n],b=y.rnaMoleculeProps[i],E=y.rnaMoleculeProps[l],I=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,P=n in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[n]:{},R=i in P?P[i]:new Set,M=l in P?P[l]:new Set,w=(0,s.Z)(this.initialBasePairs);try{for(w.s();!(f=w.n()).done;){var k=f.value,O=k.nucleotideIndex0,L=k.nucleotideIndex1,j=k.length,D=O-b.firstNucleotideIndex,Z=D+j-1;D<I&&(I=D),Z>C&&(C=Z);var F=L-E.firstNucleotideIndex,B=F-j+1;B<S&&(S=B),F>_&&(_=F)}}catch(U){w.e(U)}finally{w.f()}return i===l?(C=Math.max(C,_),I=Math.min(I,S),r.populateRegions(R,(0,N.range)(C+1,I),v)):(r.populateRegions(R,(0,N.range)(C+1,I),v),r.populateRegions(M,(0,N.range)(_+1,S),x)),(0,A.jsxs)(A.Fragment,{children:[u,(0,A.jsx)(r.Component,{regions:h,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw"Unhandled switch case"}}},{key:"getHelices",value:function(){return this.helices}}]),n}(z),ue=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,u,c,f,p){var m,v=c.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,u,f,p)).dragListener=void 0,m.partialMenuHeader=void 0,m.editMenuProps=void 0,m.initialBasePairs=void 0,m.minimumNucleotideIndex=void 0,m.maximumNucleotideIndex=void 0,m.helices=void 0;var x=f.rnaComplexIndex,g=f.rnaMoleculeName,y=f.nucleotideIndex,E=g,C=y,S=m.rnaComplexProps[x],_=S.rnaMoleculeProps[E],P=_.nucleotideProps[y],T=S.basePairs;if(!I.default.isNucleotideBasePaired(P.symbol,S,T,E,C,v))throw B;var R,M=T[E],w=M[y];if(1===w.length)R=w[0];else{if(void 0===p)throw U;R=w.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return p.rnaMoleculeName===t&&p.nucleotideIndex===n}))}var k=R.rnaMoleculeName;if(E!==k)throw{errorMessage:"Cannot interact with a base pair between two distinct rna molecules using this constraint."};var O=R.nucleotideIndex,L=new Array,j=(0,a.Z)({},x,(0,a.Z)({},E,[])),D=j[x][E],Z=[],F=(0,a.Z)({},x,Z),z=[];var W=Ee(S,E,C,k,O,L,v,Z,(function(e){z.push(e.nucleotideIndex)})),H=W.stop,K=W.start;z.sort(N.subtractNumbers),m.minimumNucleotideIndex=Math.min(K[0],K[1],H[0],H[1]),m.maximumNucleotideIndex=Math.max(K[0],K[1],H[0],H[1]);for(var V=m.minimumNucleotideIndex;V<=m.maximumNucleotideIndex;V++)if(L.push(_.nucleotideProps[V]),D.push(V),V in M){var X,q={rnaMoleculeName:g,nucleotideIndex:V},Y=M[V],Q=(0,s.Z)(Y);try{for(Q.s();!(X=Q.n()).done;){var $=X.value;Z.push((0,d.selectRelevantBasePairKeys)(q,$))}}catch(pe){Q.e(pe)}finally{Q.f()}}function J(){r(structuredClone(j)),o(structuredClone(F))}D.sort(N.subtractNumbers),Z.sort(d.compareBasePairKeys);var ee=new Array;if(x in u){var te=u[x];if(E in te)for(var ne=te[g],re=0,oe=Array.from(ne);re<oe.length;re++){var ae=oe[re];ee.push(_.nucleotideProps[ae])}}L=L.filter((function(e){return!ee.includes(e)})),m.dragListener=G(structuredClone(P),L,J);var ie=z[0],le=z[z.length-1],se=_.nucleotideProps[ie],ue=_.nucleotideProps[le];m.partialMenuHeader=(0,A.jsxs)(A.Fragment,{children:["Nucleotides bound by",(0,A.jsx)("br",{}),"#",ie+_.firstNucleotideIndex," (",se.symbol,")",(0,A.jsx)("br",{}),"and",(0,A.jsx)("br",{}),"#",le+_.firstNucleotideIndex," (",ue.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',g,'"',(0,A.jsx)("br",{}),'In RNA complex "',S.name,'"',(0,A.jsx)("br",{})]});var ce=(0,b.orthogonalizeLeft)((0,b.subtract)(ue,se));m.editMenuProps={boundingVector0:se,boundingVector1:ue,positions:L,onUpdatePositions:J,initialAngle:(0,b.asAngle)(ce)};var de=be(S,g,m.minimumNucleotideIndex,m.maximumNucleotideIndex,v);m.helices=de.helixData.map((function(e){var t=e.start,n=e.stop;return{rnaComplexIndex:x,rnaMoleculeName0:g,rnaMoleculeName1:g,start:t,stop:n}}));var fe=de.helixData.map((function(e){return{rnaComplexIndex:x,rnaMoleculeName0:g,rnaMoleculeName1:g,nucleotideIndex0:e.start[0]+_.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+_.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));return m.addFullIndicesPerNucleotideKeysToRerender(j),m.initialBasePairs=fe,m}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=this.rnaComplexProps[o].rnaMoleculeProps[i],s=this.minimumNucleotideIndex+l.firstNucleotideIndex,u=this.maximumNucleotideIndex+l.firstNucleotideIndex;switch(e){case c.OK.EDIT:t=(0,A.jsx)(T.Simplified,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var n="This constraint expects base-pairs to exist strictly within the clicked-on subdomain.",r=e[t];if(r.rnaComplexIndex!==o)throw n;if(r.rnaMoleculeName0!==i||r.rnaMoleculeName1!==i)throw n;for(var a=0,l=[r.nucleotideIndex0,r.nucleotideIndex0+r.length-1,r.nucleotideIndex1,r.nucleotideIndex1-r.length+1];a<l.length;a++){var c=l[a];if(c<s||c>u)throw n}}},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case c.OK.ANNOTATE:var d=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},f=i in d?d[i]:new Set,h=[];r.populateRegions(f,(0,N.range)(this.maximumNucleotideIndex+1,this.minimumNucleotideIndex),h),t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,h)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA subdomain:"]}),(0,A.jsx)("br",{}),this.partialMenuHeader,t]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(z);(ie||(ie={})).Component=function(e){var t=e.initialColor,n=e.initialFont,r=e.onUpdatePositions,o=e.boundingNucleotides,a=e.allNucleotides,l=(0,u.useContext)(f._.App.InteractionConstraintOptions).affectHairpinNucleotidesFlag,s=(0,u.useState)(null!==t&&void 0!==t?t:C.BLACK),c=(0,i.Z)(s,2),d=(c[0],c[1]),p=(0,u.useState)(null!==n&&void 0!==n?n:S.default.DEFAULT),h=(0,i.Z)(p,2),m=h[0],v=h[1];return(0,u.useMemo)((function(){return l?a:o}),[l]),(0,u.useEffect)((function(){d(t)}),[t]),(0,u.useEffect)((function(){v(m)}),[n]),(0,A.jsxs)(A.Fragment,{children:["Base-pair type: ",e.basePairType.toLocaleLowerCase(),(0,A.jsx)("br",{}),(0,A.jsx)(T.Simplified,{positions:a,onUpdatePositions:r,boundingVector0:o[0],boundingVector1:o[1]})]})};var ce=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,l,u,c,f,m,v){var x,g,y,N,E,_,P=f.affectHairpinNucleotidesFlag,T=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(_=t.call(this,e,r,o,l,c,m,v)).dragListener=void 0,_.editMenuProps=void 0,_.partialHeader=void 0,_.initialBasePairs=void 0,_.basePairedKeys=void 0,_.nucleotideIndices=void 0,_.frozenFlag0=!1,_.frozenFlag1=!1,_.hairpinLoopFlag=!1,_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=void 0,_.helices=void 0;var R=_.fullKeys0,M=R.rnaComplexIndex,w=R.rnaMoleculeName,k=R.nucleotideIndex,O={},L=(0,a.Z)({},M,[]),j=_.rnaComplexProps[M],D=j.basePairs;if(!I.default.isNucleotideBasePaired(j.rnaMoleculeProps[w].nucleotideProps[k].symbol,j,D,w,k,T))throw B;var Z,F={rnaMoleculeName:w,nucleotideIndex:k},z=D[w][k];if(1===z.length)Z=z[0];else{var W;if(void 0===v)throw U;if(Z=z.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return v.rnaMoleculeName===t&&v.nucleotideIndex===n})),!I.default.isEnabledBasePair(null!==(W=Z.basePairType)&&void 0!==W?W:(0,I.getBasePairType)(j.rnaMoleculeProps[w].nucleotideProps[k].symbol,j.rnaMoleculeProps[Z.rnaMoleculeName].nucleotideProps[Z.nucleotideIndex].symbol),T))throw B}for(var H=j.rnaMoleculeProps[w],K=H.nucleotideProps[k],V=j.rnaMoleculeProps[Z.rnaMoleculeName],X=V.nucleotideProps[Z.nucleotideIndex],q=D[Z.rnaMoleculeName][Z.nucleotideIndex],Y=L[M],Q=0,$=[{keys0:F,basePairsPerNucleotide:z},{keys0:Z,basePairsPerNucleotide:q}];Q<$.length;Q++){var J,ee=$[Q],te=ee.keys0,ne=ee.basePairsPerNucleotide,re=(0,s.Z)(ne);try{for(re.s();!(J=re.n()).done;){var oe=J.value,ae=(0,d.selectRelevantBasePairKeys)(te,oe);Y.push(ae)}}catch(Fe){re.e(Fe)}finally{re.f()}}Y.sort(d.compareBasePairKeys);var ie=[F,Z].sort(d.compareBasePairKeys),le=(0,i.Z)(ie,2),se=le[0],ue=le[1],ce={x:K.x,y:K.y},de=k,fe=Z.nucleotideIndex,pe=w,he=Z.rnaMoleculeName;if(_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=new Set,M in c){var me=c[M];if(pe in me&&(_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=me[pe],_.frozenFlag0=_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(de)),he in me){var ve=me[he];_.frozenFlag1=ve.has(fe)}}var xe=[];_.frozenFlag0||xe.push(K),_.frozenFlag1||xe.push(X),_.nucleotideIndices={rnaMoleculeName0:pe,nucleotideIndex0:de,rnaMoleculeName1:he,nucleotideIndex1:fe};var ge=D[pe];if(pe===he){var ye,be=[];O[M]=(0,a.Z)({},w,be),be.push(se.nucleotideIndex),_.hairpinLoopFlag=!0;for(var Ne=[],Ee=se.nucleotideIndex+1;Ee<ue.nucleotideIndex;Ee++){if(Ee in ge){_.hairpinLoopFlag=!1;break}Ne.push({index:Ee,props:H.nucleotideProps[Ee]})}if((ye=_).hairpinLoopFlag&&(ye.hairpinLoopFlag=P),_.hairpinLoopFlag){var Ie,Ce=(0,s.Z)(Ne);try{for(Ce.s();!(Ie=Ce.n()).done;){var Se=Ie.value,_e=Se.index,Ae=Se.props;_.addFullIndices({rnaComplexIndex:M,rnaMoleculeName:w,nucleotideIndex:_e}),_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(_e)||(be.push(_e),xe.push(Ae))}}catch(Fe){Ce.e(Fe)}finally{Ce.f()}}be.push(ue.nucleotideIndex)}function Pe(){r(structuredClone(O)),o(structuredClone(L))}var Te,Re,Me,we,ke=[K,X];(_.dragListener=G(ce,P?xe:[K,X],Pe),_.partialHeader=(0,A.jsxs)(A.Fragment,{children:["Nucleotide #",k+V.firstNucleotideIndex," (",K.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',w,'"',(0,A.jsx)("br",{}),"Base-paired to:",(0,A.jsx)("br",{}),"Nucleotide #",Z.nucleotideIndex+V.firstNucleotideIndex," (",X.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',Z.rnaMoleculeName,'"',(0,A.jsx)("br",{}),'In RNA complex "',j.name,'"',(0,A.jsx)("br",{})]}),pe===he)?(de<fe?(Me=de,we=fe):(Me=fe,we=de),Te=H.nucleotideProps[Me],Re=H.nucleotideProps[we]):(Te=K,Re=X);var Oe=null!==(x=Z.basePairType)&&void 0!==x?x:(0,I.getBasePairType)(K.symbol,X.symbol),Le=null!==(g=K.color)&&void 0!==g?g:C.BLACK,je=null!==(y=X.color)&&void 0!==y?y:C.BLACK,De=null!==(N=K.font)&&void 0!==N?N:S.default.DEFAULT,Ze=null!==(E=X.font)&&void 0!==E?E:S.default.DEFAULT;return _.editMenuProps={boundingVector0:Te,boundingVector1:Re,positions:xe,onUpdatePositions:Pe,orthogonalizeHelper:b.orthogonalizeLeft,basePairType:Oe,initialColor:(0,C.areEqual)(Le,je)?Le:C.BLACK,initialFont:S.default.areEqual(De,Ze)?De:S.default.DEFAULT,boundingNucleotides:ke,allNucleotides:xe},_.initialBasePairs=[{rnaComplexIndex:M,rnaMoleculeName0:pe,rnaMoleculeName1:he,nucleotideIndex0:de+j.rnaMoleculeProps[pe].firstNucleotideIndex,nucleotideIndex1:fe+j.rnaMoleculeProps[he].firstNucleotideIndex,length:1,type:Oe}],_.basePairedKeys={rnaMoleculeName:he,nucleotideIndex:fe},_.addFullIndices(m,(0,p.Z)({rnaComplexIndex:M},Z)),_.helices=[{rnaComplexIndex:M,rnaMoleculeName0:pe,rnaMoleculeName1:he,start:{0:de,1:fe},stop:{0:de,1:fe}}],_}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=(this.fullKeys0,this.basePairedKeys,this.nucleotideIndices),l=(0,A.jsx)(A.Fragment,{});switch(e){case c.OK.EDIT:l=(0,A.jsx)(ie.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:l=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){if(e.length>1)throw"This constraint expects at most one base pair.";if(1===e.length&&e[0].length>1)throw"This constraint expects at most one base pair."},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o});break;case c.OK.ANNOTATE:var s,u={minimumNucleotideIndexInclusive:i.nucleotideIndex0,maximumNucleotideIndexInclusive:i.nucleotideIndex0},d={minimumNucleotideIndexInclusive:i.nucleotideIndex1,maximumNucleotideIndexInclusive:i.nucleotideIndex1};if(i.rnaMoleculeName0===i.rnaMoleculeName1){var f=[],h=Math.min(i.nucleotideIndex0,i.nucleotideIndex1),m=Math.max(i.nucleotideIndex0,i.nucleotideIndex1);this.hairpinLoopFlag?r.populateRegions(this.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0,(0,N.range)(m+1,h),f):(this.frozenFlag0||f.push(u),this.frozenFlag1||f.push(d)),s=(0,a.Z)({},n,(0,a.Z)({},i.rnaMoleculeName0,f))}else{var v={};this.frozenFlag0||(v[i.rnaMoleculeName0]=[u]),this.frozenFlag1||(v[i.rnaMoleculeName1]=[d]),s=(0,a.Z)({},n,v)}l=(0,A.jsx)(r.Component,{regions:s,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," single base pair:"]}),(0,A.jsx)("br",{}),this.partialHeader,l]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(z),de=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,a,i,u,c,d,f){var p,m,v=c.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,a,u,d,f)).dragListener=void 0,m.editMenuProps=void 0,m.color=void 0,m.initialBasePairs=void 0,m.approveBasePair=void 0,m.fullKeysOfNucleotidesWithColor=void 0,m.helices=void 0;var x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,E=new Array,I={},S={},_=m.rnaComplexProps[g].rnaMoleculeProps[y].nucleotideProps[b],A=null!==(p=_.color)&&void 0!==p?p:C.BLACK;m.color=A,m.fullKeysOfNucleotidesWithColor=[];var P,T=Object.keys(m.rnaComplexProps).map(N.parseInteger),R=(0,s.Z)(T);try{for(R.s();!(P=R.n()).done;){var M=P.value,w=m.rnaComplexProps[M];I[M]={};var k=I[M];S[M]=[];for(var O=S[M],L=w.basePairs,j=Object.keys(w.rnaMoleculeProps),D=0,Z=j;D<Z.length;D++){var F=Z[D],B=w.rnaMoleculeProps[F];k[F]=[];var U,z=k[F],W=L[F],H=Object.keys(B.nucleotideProps).map(N.parseInteger),K=(0,s.Z)(H);try{for(K.s();!(U=K.n()).done;){var V,X=U.value,q=B.nucleotideProps[X],Y=null!==(V=q.color)&&void 0!==V?V:C.BLACK;if((0,C.areEqual)(A,Y)){var Q=!1;if(M in u){var $=u[M];if(F in $)$[F].has(X)&&(Q=!0)}m.fullKeysOfNucleotidesWithColor.push({rnaComplexIndex:M,rnaMoleculeName:F,nucleotideIndex:X}),z.push(X),Q||(E.push(q),X in W&&O.push({rnaMoleculeName:F,nucleotideIndex:X}))}}}catch(ae){K.e(ae)}finally{K.f()}}}}catch(ae){R.e(ae)}finally{R.f()}function J(){r(structuredClone(I)),o(structuredClone(S))}m.dragListener=G(structuredClone(_),E,J),m.editMenuProps={initialCenter:_,normal:{x:1,y:0},positions:E,onUpdatePositions:J};var ee=[],te=xe(e,v),ne=new Array;function re(t){for(var n=e[t.rnaComplexIndex],r=n.rnaMoleculeProps[t.rnaMoleculeName0],o=n.rnaMoleculeProps[t.rnaMoleculeName1],a=t.nucleotideIndex0-r.firstNucleotideIndex,i=t.nucleotideIndex1-o.firstNucleotideIndex,l=0;l<t.length;l++){var s,u,c=r.nucleotideProps[a+l],d=o.nucleotideProps[i-l];if(!(0,C.areEqual)(A,null!==(s=c.color)&&void 0!==s?s:C.BLACK))return!1;if(!(0,C.areEqual)(A,null!==(u=d.color)&&void 0!==u?u:C.BLACK))return!1}return!0}te.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0;r.rnaMoleculeProps[t];ne.push.apply(ne,(0,l.Z)(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=e.start,a=e.stop;return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:r,start:o,stop:a}}))))}))})),te.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,o=r.rnaMoleculeProps[t];ee.push.apply(ee,(0,l.Z)(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),m.approveBasePair=re;var oe=ee.filter(re);return m.initialBasePairs=oe,m.addFullIndicesPerNucleotideKeysToRerender(I),m.helices=ne.filter((function(t){for(var n=t.rnaComplexIndex,r=t.rnaMoleculeName0,o=t.rnaMoleculeName1,a=t.start,i=t.stop,l=e[n],s=l.rnaMoleculeProps[r],u=l.rnaMoleculeProps[o],c=Math.abs(i[0]-a[0])+1,d=0;d<c;d++){var f,p,h=s.nucleotideProps[a[0]+d],m=u.nucleotideProps[a[1]+d];return(0,C.areEqual)(A,null!==(f=h.color)&&void 0!==f?f:C.BLACK)&&(0,C.areEqual)(A,null!==(p=m.color)&&void 0!==p?p:C.BLACK)}return!1})),m}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n,o=this.color;this.approveBasePair;switch(e){case c.OK.EDIT:n=(0,A.jsx)(T.Component,(0,p.Z)({},this.editMenuProps));break;case c.OK.FORMAT:n=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case c.OK.ANNOTATE:var a,i={},l=(0,s.Z)(this.fullKeysOfNucleotidesWithColor);try{for(l.s();!(a=l.n()).done;){var u=a.value,d=u.rnaComplexIndex,f=u.rnaMoleculeName,h=u.nucleotideIndex;d in i||(i[d]={});var m=i[d];f in m||(m[f]=[]);var v=m[f];if(v.length>0){var x=v[v.length-1];h===x.maximumNucleotideIndexInclusive+1?x.maximumNucleotideIndexInclusive=h:h===x.minimumNucleotideIndexInclusive-1?x.minimumNucleotideIndexInclusive=h:v.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}else v.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}}catch(y){l.e(y)}finally{l.f()}n=(0,A.jsx)(r.Component,{regions:i,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," all nucleotides of the same color:"]}),(0,A.jsx)("br",{}),"(red = ",o.red,", green = ",o.green,", blue = ",o.blue,", alpha = ",null!==(t=o.alpha)&&void 0!==t?t:C.DEFAULT_ALPHA,"):",(0,A.jsx)("br",{}),n]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){for(var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=t.rnaComplexProps[n],s=l.rnaMoleculeProps[r],u=l.rnaMoleculeProps[o],c=Math.abs(i[0]-a[0])+1,d=Math.sign(i[0]-a[0]),f=Math.sign(i[1]-a[1]),p=a[0],h=a[1],m=0;m<c;m++){var v,x,g=s.nucleotideProps[p],y=u.nucleotideProps[h],b=null!==(v=g.color)&&void 0!==v?v:C.BLACK,N=null!==(x=y.color)&&void 0!==x?x:C.BLACK;if((0,C.areEqual)(t.color,b)||(0,C.areEqual)(t.color,N))return!0;p+=d,h+=f}return!1}))}}]),n}(z);var fe,pe=n(9287);(fe||(fe={})).Component=function(e){var t,n,r=e.rnaComplexProps,o=e.fullKeys,a=e.triggerRerender,l=(0,u.useContext)(f._.OrientationEditor.ResetDataTrigger),s=(0,u.useMemo)((function(){var e=o.rnaComplexIndex,t=o.rnaMoleculeName,n=o.nucleotideIndex,a=r[e],i=a.rnaMoleculeProps[t],l=i.nucleotideProps[n];return(0,p.Z)((0,p.Z)({},o),{},{singularRnaComplexProps:a,singularRnaMoleculeProps:i,singularNucleotideProps:l})}),[o]),c=(s.rnaComplexIndex,s.rnaMoleculeName,s.nucleotideIndex),d=(s.singularRnaComplexProps,s.singularRnaMoleculeProps),h=s.singularNucleotideProps;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(o);var m=(0,u.useState)(h.symbol),v=(0,i.Z)(m,2),x=v[0],g=v[1],N=(0,u.useState)(h.x),I=(0,i.Z)(N,2),_=I[0],P=I[1],T=(0,u.useState)(h.y),R=(0,i.Z)(T,2),M=R[0],w=R[1],L=(0,u.useState)(null!==(t=h.color)&&void 0!==t?t:C.BLACK),j=(0,i.Z)(L,2),D=j[0],Z=j[1],F=(0,u.useState)(null!==(n=h.font)&&void 0!==n?n:S.default.DEFAULT),B=(0,i.Z)(F,2),U=B[0],z=B[1],G=(0,u.useState)(!1),W=(0,i.Z)(G,2),H=W[0],K=W[1],V=(0,u.useState)(!1),X=(0,i.Z)(V,2),q=X[0],Y=X[1],Q=(0,u.useContext)(f._.App.PushToUndoStack),$=(0,u.useMemo)((function(){return c-1 in d.nucleotideProps?d.nucleotideProps[c-1]:void 0}),[c]),J=(0,u.useMemo)((function(){return c+1 in d.nucleotideProps?d.nucleotideProps[c+1]:void 0}),[c]),ee=(0,u.useMemo)((function(){return void 0===$?(0,A.jsx)(A.Fragment,{}):(0,A.jsxs)(A.Fragment,{children:["Distance to previous nucleotide: ",(0,b.distance)({x:_,y:M},$).toFixed(E.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)]})}),[$,_,M]),te=(0,u.useMemo)((function(){return void 0===J?(0,A.jsx)(A.Fragment,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("br",{}),"Distance to next nucleotide: ",(0,b.distance)({x:_,y:M},J).toFixed(E.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)]})}),[J,_,M]);return(0,u.useEffect)((function(){g(h.symbol),P(h.x),w(h.y)}),[o,l]),(0,u.useEffect)((function(){var e;Z(null!==(e=h.color)&&void 0!==e?e:C.BLACK)}),[h.color]),(0,u.useEffect)((function(){var e;z(null!==(e=h.font)&&void 0!==e?e:S.default.DEFAULT)}),[h.font]),(0,A.jsxs)(A.Fragment,{children:[ee,te,(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Symbol:\xa0",(0,A.jsx)("select",{value:x,onChange:function(e){var t=e.target.value;!function(e){H||Q(),g(e),K(!0)}(t),h.symbol=t,a()},children:pe.Nucleotide.symbols.map((function(e){return(0,A.jsx)("option",{value:e,children:e},e)}))})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["x:\xa0",(0,A.jsx)(y.Z.Number,{value:_,setValue:function(e){h.x=e,function(e){q||Q(),P(e),Y(!0)}(e),a()}})]}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["y:\xa0",(0,A.jsx)(y.Z.Number,{value:M,setValue:function(e){h.y=e,function(e){q||Q(),w(e),Y(!0)}(e),a()}})]}),(0,A.jsx)("br",{}),(0,A.jsx)(k.S.Component,{color:D,setColorHelper:function(e){h.color=e,Z(e),a()}}),(0,A.jsx)(O.f.Component,(0,p.Z)((0,p.Z)({},U),{},{setFont:function(e){h.font=e,z(e),a()}}))]})};var he,me=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,u,c,f,p){var m;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,u,f,p)).singularNucleotideProps=void 0,m.error=void 0,m.rerender=void 0;var v,x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,N=m.rnaComplexProps[g],E=N.basePairs;if(m.singularNucleotideProps=N.rnaMoleculeProps[y].nucleotideProps[b],m.addFullIndices(f),y in E&&b in(v=E[y])){v[b];m.error=F,m.rerender=function(){r((0,a.Z)({},g,(0,a.Z)({},y,[b])));var e,t={rnaMoleculeName:y,nucleotideIndex:b},n=(0,a.Z)({},g,[]),i=n[g],l=v[b],u=(0,s.Z)(l);try{for(u.s();!(e=u.n()).done;){var c=e.value;i.push((0,d.selectRelevantBasePairKeys)(t,c))}}catch(f){u.e(f)}finally{u.f()}o(n)}}else m.rerender=function(){r((0,a.Z)({},g,(0,a.Z)({},y,[b])))};if(g in u){var I=u[g];if(y in I)I[y].has(b)&&(m.error={errorMessage:"Cannot interact with this frozen nucleotide."})}return m}return(0,m.Z)(n,[{key:"drag",value:function(){if(void 0!==this.error&&this.error!==F)throw this.error;var e=this.singularNucleotideProps,t=this.rerender;return{initiateDrag:function(){return{x:e.x,y:e.y}},continueDrag:function(n){e.x=n.x,e.y=n.y,t()}}}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=n.nucleotideIndex,s=this.rnaComplexProps[o],u=s.rnaMoleculeProps[i],d=this.rerender,f=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," nucleotide #",u.firstNucleotideIndex+l]}),(0,A.jsx)("br",{}),'In RNA molecule "',i,'"',(0,A.jsx)("br",{}),'In RNA complex "',s.name,'"',(0,A.jsx)("br",{})]});if(void 0!==this.error&&this.error!==F)throw this.error;switch(e){case c.OK.EDIT:t=(0,A.jsx)(fe.Component,{rnaComplexProps:this.rnaComplexProps,fullKeys:this.fullKeys0,triggerRerender:d});break;case c.OK.FORMAT:if(void 0!==this.error)throw this.error;var p=l+u.firstNucleotideIndex;t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:o,rnaMoleculeName0:i,nucleotideIndex0:p,length:1}],approveBasePairs:function(e){switch(e.length){case 0:break;case 1:var t=e[0];if(t.length>1)throw"This constraint expects at most one base pair.";if(t.rnaComplexIndex!==o||![t.rnaMoleculeName0,t.rnaMoleculeName1].includes(i)||![t.nucleotideIndex0,t.nucleotideIndex1].includes(p))throw"This constraint expects a base pair involving the clicked-on nucleotide.";break;default:throw"This constraint expects at most one base pair."}},defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case c.OK.ANNOTATE:t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,[{minimumNucleotideIndexInclusive:l,maximumNucleotideIndexInclusive:l}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw{errorMessage:"Not yet implemented."}}return(0,A.jsxs)(A.Fragment,{children:[f,t]})}},{key:"getHelices",value:function(){return[]}}]),n}(z);function ve(e,t){for(var n=e.basePairs,r=[],o=0,a=Object.keys(n);o<a.length;o++)for(var i=a[o],l=n[i],u=0,c=Object.keys(l);u<c.length;u++){var f,p=c[u],h=Number.parseInt(p),m={rnaMoleculeName:i,nucleotideIndex:h},v=l[h],x=(0,s.Z)(v);try{for(x.s();!(f=x.n()).done;){var g,y=f.value;I.default.isEnabledBasePair(null!==(g=y.basePairType)&&void 0!==g?g:(0,I.getBasePairType)(e.rnaMoleculeProps[i].nucleotideProps[h].symbol,e.rnaMoleculeProps[y.rnaMoleculeName].nucleotideProps[y.nucleotideIndex].symbol),t)&&((0,d.isRelevantBasePairKeySetInPair)(m,y)&&r.push({keys0:m,keys1:y,mappedBasePair:y}))}}catch(b){x.e(b)}finally{x.f()}}return r.sort((function(e,t){return(0,d.compareBasePairKeys)(e.keys0,t.keys0)||(0,d.compareBasePairKeys)(e.keys1,t.keys1)})),r}function xe(e,t){var n,r=[],o=(0,s.Z)(Object.keys(e).map((function(e){return Number.parseInt(e)})).sort(N.subtractNumbers));try{for(o.s();!(n=o.n()).done;){var a=n.value,i=ve(e[a],t);r.push(ge(a,e[a],t,i))}}catch(l){o.e(l)}finally{o.f()}return r}function ge(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ve(t,n),a=[],i=(0,s.Z)(Object.keys(t.rnaMoleculeProps).sort());try{for(i.s();!(r=i.n()).done;){var l=ye(t,r.value,n,o);a.push(l)}}catch(u){i.e(u)}finally{i.f()}return{rnaComplexIndex:e,helixDataPerRnaMolecules:a}}function ye(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ve(e,n),o=e.rnaMoleculeProps[t],a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var l in o.nucleotideProps){var s=Number.parseInt(l);s<a&&(a=s),s>i&&(i=s)}return be(e,t,a,i,n,r)}function be(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve(e,o),i=[],l={};function u(e,t,n,r){t in e||(e[t]={});var o=e[t];n in o||(o[n]=r)}a=a.filter((function(e){var o=e.keys0,a=e.keys1;return o.rnaMoleculeName===t&&o.nucleotideIndex>=n&&o.nucleotideIndex<=r||a.rnaMoleculeName===t&&a.nucleotideIndex>=n&&a.nucleotideIndex<=r}));var c,d=(0,s.Z)(a);try{for(d.s();!(c=d.n()).done;){var f=c.value,p=f.keys0,h=f.keys1;f.mappedBasePair;p.rnaMoleculeName in l||(l[p.rnaMoleculeName]={});var m=l[p.rnaMoleculeName];h.rnaMoleculeName in m||(m[h.rnaMoleculeName]={});var v=m[h.rnaMoleculeName],x=!1;if(p.nucleotideIndex-1 in v){var g=v[p.nucleotideIndex-1];if(h.nucleotideIndex+1 in g){var y=g[h.nucleotideIndex+1];Math.abs(y.stop[0]+1-y.start[0])===Math.abs(y.stop[1]-1-y.start[1])&&(y.stop[0]++,y.stop[1]--,u(v,p.nucleotideIndex,h.nucleotideIndex,y),x=!0)}}if(!x){var b={start:{0:p.nucleotideIndex,1:h.nucleotideIndex},stop:{0:p.nucleotideIndex,1:h.nucleotideIndex},rnaMoleculeName1:p.rnaMoleculeName===t?h.rnaMoleculeName:p.rnaMoleculeName};i.push(b),u(v,p.nucleotideIndex,h.nucleotideIndex,b)}}}catch(N){d.e(N)}finally{d.f()}return{rnaMoleculeName0:t,helixData:i}}function Ne(e,t,n,r,o,a){var i,s,u=e.basePairs[t],c=e.rnaMoleculeProps[t],d=[];n[0]<=n[1]?(i=n[0],s=n[1]):(i=n[1],s=n[0]);for(var f=!0,p=function(t){if(t in u&&u[t].some((function(n){var r;return I.default.isEnabledBasePair(null!==(r=n.basePairType)&&void 0!==r?r:(0,I.getBasePairType)(c.nucleotideProps[t].symbol,e.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),a)})))return f=!1,"break";d.push(t)},h=i+1;h<s;h++){if("break"===p(h))break}f&&(o.push.apply(o,d),r.push.apply(r,(0,l.Z)(d.map((function(e){return c.nucleotideProps[e]})))))}function Ee(e,t,n,r,o,a,l,u){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(){},f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ve(e,l);return function(e,t,n,r,o,a){var l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},c=ye(e,t,a,arguments.length>7&&void 0!==arguments[7]?arguments[7]:ve(e,a)).helixData,f=[{rnaMoleculeName:t,nucleotideIndex:n},{rnaMoleculeName:r,nucleotideIndex:o}].sort(d.compareBasePairKeys),p=(0,i.Z)(f,2),h=p[0],m=p[1],v=(0,s.Z)(c);try{for(v.s();!(l=v.n()).done;){var x=l.value,g=x.start,y=x.stop,b=Math.min(g[0],y[0]),N=Math.max(g[0],y[0]),E=Math.min(g[1],y[1]),I=Math.max(g[1],y[1]);if(r===x.rnaMoleculeName1&&h.nucleotideIndex>=b&&h.nucleotideIndex<=N&&m.nucleotideIndex>=E&&m.nucleotideIndex<=I){e.rnaMoleculeProps[r];for(var C=b;C<=N;C++)u({rnaMoleculeName:h.rnaMoleculeName,nucleotideIndex:C});for(var S=E;S<=I;S++)u({rnaMoleculeName:m.rnaMoleculeName,nucleotideIndex:S});return x}}}catch(_){v.e(_)}finally{v.f()}throw"Could not find the relevant helix!"}(e,t,n,r,o,l,(function(t){c(t);var n=t.rnaMoleculeName,r=t.nucleotideIndex,o=e.rnaMoleculeProps[n];if(a.push(o.nucleotideProps[r]),void 0!==u){var i,l=e.basePairs[n][r],f=(0,s.Z)(l);try{for(f.s();!(i=f.n()).done;){var p=i.value;u.push((0,d.selectRelevantBasePairKeys)(t,p))}}catch(h){f.e(h)}finally{f.f()}}}),f)}function Ie(e,t){return Math.abs(e[0]-e[1])-Math.abs(t[0]-t[1])}function Ce(e,t){return e.rnaComplexIndex-t.rnaComplexIndex||e.rnaMoleculeName.localeCompare(t.rnaMoleculeName)||e.nucleotideIndex-t.nucleotideIndex}function Se(e,t,n){function r(){var r;e.sort(Ce);for(var o=e[0],i=e[e.length-1],l=!0,u=!0,c=!1,d=void 0,f=1;f<e.length;f++){var p=e[f],h=p.rnaComplexIndex,m=p.rnaMoleculeName;h!==o.rnaComplexIndex&&(l=!1),m!==o.rnaMoleculeName&&(u=!1,void 0===d?(d=m,c=!0):m!==d&&(c=!1))}l||(u=!1);var v=!0,x=!0,g=e.map((function(e){var r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex,i=t[r],l=i.basePairs;if(o in l){var s=l[o];if(a in s)if(s[a].some((function(e){var t;return I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(i.rnaMoleculeProps[o].nucleotideProps[a].symbol,i.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)})))return x=!1,s[a]}v=!1}));function y(){if(!u)return!1;var e=g[0];if(void 0===e||!e.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===i.rnaMoleculeName&&n===i.nucleotideIndex})))return!1;for(var n=t[o.rnaComplexIndex].basePairs[o.rnaMoleculeName],r=o.nucleotideIndex+1;r<i.nucleotideIndex;r++){var a=n[r];if(void 0!==a&&a.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t!==o.rnaMoleculeName||n<o.nucleotideIndex||n>i.nucleotideIndex})))return!1}return!0}function b(t){if(!t||!u&&!c)return!1;var n=[],r=e[0],o=1,a=void 0!==g[0],i=void 0;if(!a)return!1;for(n.push(r);o<e.length;o++){var l=e[o],s=l.rnaMoleculeName,d=l.nucleotideIndex;if(s!==r.rnaMoleculeName||d!==r.nucleotideIndex+1){i=o;break}var f=void 0!==g[o];f&&n.push(l),a=f,r=l}if(!a)return!1;var p=g[o];if(void 0===p)return!1;p.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===r.rnaMoleculeName&&n===r.nucleotideIndex}))||n.reverse();for(var h=function(){var t=e[o],a=t.rnaMoleculeName,l=t.nucleotideIndex;if(o!==i&&(a!==r.rnaMoleculeName||l!==r.nucleotideIndex+1))return{v:!1};var s=g[o];if(void 0!==s){var u=n.pop();if(void 0===u)return{v:!1};if(!s.some((function(e){return u.rnaMoleculeName,e.rnaMoleculeName,u.nucleotideIndex===e.nucleotideIndex})))return{v:!1}}r=t};o<e.length;o++){var m=h();if("object"===typeof m)return m.v}return void 0!==g[g.length-1]}var N=function(){if(!l)return!1;var r,i={},u=(0,s.Z)(e);try{for(u.s();!(r=u.n()).done;){var c=r.value,d=c.rnaMoleculeName,f=c.nucleotideIndex;d in i||(i[d]=new Set),i[d].add(f)}}catch(b){u.e(b)}finally{u.f()}for(var p=t[o.rnaComplexIndex],h=p.rnaMoleculeProps,m=p.basePairs,v=(0,a.Z)({},o.rnaMoleculeName,new Set([o.nucleotideIndex])),x=new Array(o),g=0,y=function(){g++;var e=x.shift(),t=e.rnaMoleculeName,r=e.nucleotideIndex,o=h[t].nucleotideProps,a=m[t],l=new Array;if(r-1 in o&&l.push({rnaMoleculeName:t,nucleotideIndex:r-1}),r+1 in o&&l.push({rnaMoleculeName:t,nucleotideIndex:r+1}),r in a){var u,c=a[r].filter((function(e){var o;return I.default.isEnabledBasePair(null!==(o=e.basePairType)&&void 0!==o?o:(0,I.getBasePairType)(p.rnaMoleculeProps[t].nucleotideProps[r].symbol,p.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)})),d=(0,s.Z)(c);try{for(d.s();!(u=d.n()).done;){var f=u.value;l.push(f)}}catch(b){d.e(b)}finally{d.f()}}for(var y=0,N=l;y<N.length;y++){var E=N[y],C=E.rnaMoleculeName,S=E.nucleotideIndex;if(C in i&&i[C].has(S)&&(!(C in v)||!v[C].has(S)))C in v||(v[C]=new Set),v[C].add(S),x.push(E)}};x.length>0;)y();return g===e.length}();if(x){if(N)return{fullKeys:o,interactionConstraint:he.Enum.RNA_SINGLE_STRAND}}else if(v){if(N&&(u||c))return{fullKeys:o,interactionConstraint:he.Enum.RNA_HELIX};if(y())return{fullKeys:o,interactionConstraint:he.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:o,interactionConstraint:he.Enum.RNA_STACKED_HELIX}}else{if(y())return{fullKeys:o,interactionConstraint:he.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:e.find((function(e,t){return void 0!==g[t]})),interactionConstraint:he.Enum.RNA_STACKED_HELIX};if(N)return{fullKeys:e.find((function(e,t){return void 0===g[t]})),interactionConstraint:he.Enum.RNA_CYCLE}}if(u)return{fullKeys:o,interactionConstraint:he.Enum.RNA_MOLECULE};if(l)return{fullKeys:o,interactionConstraint:he.Enum.RNA_COMPLEX};for(var E=null!==(r=t[o.rnaComplexIndex].rnaMoleculeProps[o.rnaMoleculeName].nucleotideProps[o.nucleotideIndex].color)&&void 0!==r?r:C.BLACK,S=!0,_=1;_<e.length;_++){var A,P=e[_],T=P.rnaComplexIndex,R=P.rnaMoleculeName,M=P.nucleotideIndex,w=null!==(A=t[T].rnaMoleculeProps[R].nucleotideProps[M].color)&&void 0!==A?A:C.BLACK;if(!(0,C.areEqual)(E,w)){S=!1;break}}return S?{fullKeys:o,interactionConstraint:he.Enum.SINGLE_COLOR}:{fullKeys:o,interactionConstraint:he.Enum.ENTIRE_SCENE}}switch(e.length){case 0:return;case 1:var o=e[0],i=o.rnaComplexIndex,l=o.rnaMoleculeName,u=o.nucleotideIndex,c=t[i],d=c.basePairs,f=he.Enum.SINGLE_NUCLEOTIDE;if(l in d){var p=d[l];u in p&&p[u].some((function(e){var t;return I.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,I.getBasePairType)(c.rnaMoleculeProps[l].nucleotideProps[u].symbol,c.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)}))&&(f=he.Enum.SINGLE_BASE_PAIR)}return{fullKeys:o,interactionConstraint:f};case 2:var h,m=e[0],v=e[1],x=t[m.rnaComplexIndex],g=x.basePairs;return m.rnaComplexIndex===v.rnaComplexIndex&&m.rnaMoleculeName in g&&m.nucleotideIndex in(h=g[m.rnaMoleculeName])&&h[m.nucleotideIndex].some((function(e){var t=e.rnaMoleculeName,r=e.nucleotideIndex,o=e.basePairType;return v.rnaMoleculeName===t&&v.nucleotideIndex===r&&I.default.isEnabledBasePair(null!==o&&void 0!==o?o:(0,I.getBasePairType)(x.rnaMoleculeProps[m.rnaMoleculeName].nucleotideProps[m.nucleotideIndex].symbol,x.rnaMoleculeProps[t].nucleotideProps[r].symbol),n)}))?{fullKeys:m,interactionConstraint:he.Enum.SINGLE_BASE_PAIR}:r();default:return r()}}!function(e){var t,n,r,o,i=e.supportedTabs=(t={},(0,a.Z)(t,c.OK.EDIT,c.OK.EDIT),(0,a.Z)(t,c.OK.FORMAT,c.OK.FORMAT),(0,a.Z)(t,c.OK.ANNOTATE,c.OK.ANNOTATE),t);e.isSupportedTab=function(e){return e in i};var l=function(e){return e.SINGLE_NUCLEOTIDE="Single nucleotide",e.SINGLE_BASE_PAIR="Single basepair",e.RNA_SINGLE_STRAND="RNA single strand",e.RNA_HELIX="RNA helix",e.RNA_SUB_DOMAIN="RNA sub-domain",e.RNA_STACKED_HELIX="RNA stacked helix",e.RNA_CYCLE="RNA cycle",e.RNA_MOLECULE="RNA molecule",e.RNA_COMPLEX="RNA complex",e.SINGLE_COLOR="Single color",e.ENTIRE_SCENE="Entire scene",e}({});e.Enum=l;var s=e.all=Object.values(l);e.isEnum=function(e){return s.includes(e)};e.record=(n={},(0,a.Z)(n,l.SINGLE_NUCLEOTIDE,me),(0,a.Z)(n,l.SINGLE_BASE_PAIR,ce),(0,a.Z)(n,l.RNA_SINGLE_STRAND,le),(0,a.Z)(n,l.RNA_HELIX,ee),(0,a.Z)(n,l.RNA_SUB_DOMAIN,ue),(0,a.Z)(n,l.RNA_STACKED_HELIX,se),(0,a.Z)(n,l.RNA_CYCLE,J),(0,a.Z)(n,l.RNA_MOLECULE,ne),(0,a.Z)(n,l.RNA_COMPLEX,V),(0,a.Z)(n,l.SINGLE_COLOR,de),(0,a.Z)(n,l.ENTIRE_SCENE,H),n),e.descriptionRecord=(r={},(0,a.Z)(r,l.SINGLE_NUCLEOTIDE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single nucleotide.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=150&end=168",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.SINGLE_BASE_PAIR,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single base pair between two nucleotides.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=167&end=178",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_SINGLE_STRAND,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of single (non-basepaired) nucleotides.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=176&end=204",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_HELIX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of base-paired nucleotides.",(0,A.jsx)("br",{}),'"Helix" is defined as two series of nucleotides which are mutually base-paired without gaps.',(0,A.jsx)("br",{}),"This involves at most two RNA molecules.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=202&end=214",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_SUB_DOMAIN,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of nucleotides constrainted by a helix.",(0,A.jsx)("br",{}),"This constraint involves only one RNA molecule.",(0,A.jsx)("br",{}),"This includes all nucleotides with nucleotide indices:",(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Greater than or equal to the least nucleotide index in the helix"}),(0,A.jsx)("li",{children:"Less than or equal to the greatest nucleotide index in the helix"})]}),(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=212&end=243",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_STACKED_HELIX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of helices between RNA molecules.",(0,A.jsx)("br",{}),"These helices may be separated by single (non-basepaired) nucleotides, but their mutually-basepaired status must resume outside the single-stranded regions.",(0,A.jsx)("br",{}),"This constraint involves at most two RNA molecules.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=243&end=269",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_CYCLE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a cycle of nucleotides.",(0,A.jsx)("br",{}),"An RNA cycle is calculated as follows:",(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Treat the nucleotides as nodes in a graph"}),(0,A.jsx)("li",{children:"Treat the following as edges in the graph:"}),(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Base pairs between nucleotides"}),(0,A.jsx)("li",{children:"Neighboring nucleotides within a given RNA molecule (with nucleotide indices i, j such that abs(i - j) = 1)"})]}),(0,A.jsx)("li",{children:"Calculate the smallest cycle within the graph involving the clicked-on nucleotide"})]}),(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=269&end=298",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_MOLECULE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single RNA molecule.",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=311&end=325",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_COMPLEX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single RNA complex (which may contain more than one RNA molecule).",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=324&end=340",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.SINGLE_COLOR,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels with the same color",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=340&end=358",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.ENTIRE_SCENE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels within the scene (i.e. viewport)",(0,A.jsx)(Z.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=354",allowFullScreen:!0,width:960,height:540})})]})),r);e.DEFAULT_OPTIONS={affectHairpinNucleotidesFlag:!0,truncateRnaSingleStrandFlag:!0,treatNoncanonicalBasePairsAsUnpairedFlag:X.Z[X.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]},e.optionsMenuRecord=(o={},(0,a.Z)(o,l.SINGLE_BASE_PAIR,(function(e){var t=(0,u.useContext)(f._.App.InteractionConstraintOptions),n=(0,u.useContext)(f._.App.UpdateInteractionConstraintOptions),r=t.affectHairpinNucleotidesFlag;return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("label",{children:["Affect hairpin-loop nucleotides:\xa0",(0,A.jsx)("input",{type:"checkbox",checked:r,onChange:function(){n({affectHairpinNucleotidesFlag:!r})}})]})})})),(0,a.Z)(o,l.RNA_SINGLE_STRAND,(function(e){var t=(0,u.useContext)(f._.App.InteractionConstraintOptions),n=(0,u.useContext)(f._.App.UpdateInteractionConstraintOptions),r=t.truncateRnaSingleStrandFlag;return(0,A.jsxs)("label",{children:["Truncate Single Strand At Frozen Nucleotides:\xa0",(0,A.jsx)("input",{type:"checkbox",checked:r,onChange:function(){n({truncateRnaSingleStrandFlag:!r})}})]})})),o)}(he||(he={}))},9750:function(e,t,n){"use strict";n.d(t,{GO:function(){return f},OP:function(){return h},Xd:function(){return c},Z:function(){return m},kR:function(){return p},pE:function(){return u},zT:function(){return d}});var r,o,a,i,l=n(4942),s=n(6176),u=function(e){return e.COPY_FILE_NAME="copy_file_name",e.COPY_FILE_EXTENSION="copy_file_extension",e.RESET_VIEWPORT_AFTER_FILE_UPLOAD="reset_viewport_after_file_upload",e.USE_DEGREES="use_degrees",e.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING="reposition_nucleotides_when_formatting",e.AUTOMATICALLY_REPOSITION_ANNOTATIONS="automatically_reposition_annotations",e.CANONICAL_BASE_PAIR_DISTANCE="canonical_base_pair_distance",e.WOBBLE_BASE_PAIR_DISTANCE="wobble_base_pair_distance",e.MISMATCH_BASE_PAIR_DISTANCE="mismatch_base_pair_distance",e.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS="distance_between_contiguous_base_pairs",e.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE="replace_nucleotides_with_contour_line",e.CONTOUR_LINE_WIDTH="contour_line_width",e.PATH_MODE="path_mode",e.PATH_LINE_WIDTH="path_line_width",e.DARK_MODE="dark_mode",e.DISABLE_NAVIGATE_AWAY_PROMPT="disable_navigate_away_prompt",e.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED="treat_non_canonical_base_pairs_as_unpaired",e.BASE_PAIR_RADIUS="base_pair_radius",e.GRID_ENABLED="grid_enabled",e.GRID_HORIZONTAL_LINES="grid_horizontal_lines",e.GRID_VERTICAL_LINES="grid_vertical_lines",e.GRID_LEFT_RIGHT_DIAGONAL="grid_left_right_diagonal",e.GRID_RIGHT_LEFT_DIAGONAL="grid_right_left_diagonal",e.GRID_CONCENTRIC_CIRCLES="grid_concentric_circles",e.GRID_DOTTED="grid_dotted",e.GRID_SPACING="grid_spacing",e.GRID_COLOR="grid_color",e.CANVAS_COLOR="canvas_color",e}({}),c=Object.values(u),d=(r={},(0,l.Z)(r,u.COPY_FILE_NAME,"Copy input-file names to output-file names"),(0,l.Z)(r,u.COPY_FILE_EXTENSION,"Copy input-file extensions to downloadable output files"),(0,l.Z)(r,u.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset viewport after file upload"),(0,l.Z)(r,u.USE_DEGREES,"Use degrees"),(0,l.Z)(r,u.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when editing"),(0,l.Z)(r,u.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),(0,l.Z)(r,u.CANONICAL_BASE_PAIR_DISTANCE,"Canonical base-pair distance"),(0,l.Z)(r,u.WOBBLE_BASE_PAIR_DISTANCE,"Wobble base-pair distance"),(0,l.Z)(r,u.MISMATCH_BASE_PAIR_DISTANCE,"Mismatch base-pair distance"),(0,l.Z)(r,u.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"Distance between contiguous base pairs"),(0,l.Z)(r,u.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Replace nucleotides with contour line"),(0,l.Z)(r,u.CONTOUR_LINE_WIDTH,"Contour-line width"),(0,l.Z)(r,u.PATH_MODE,"Path mode (show lines, hide nucleotide text)"),(0,l.Z)(r,u.PATH_LINE_WIDTH,"Path-line width"),(0,l.Z)(r,u.DARK_MODE,"Dark mode"),(0,l.Z)(r,u.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the navigate-away prompt"),(0,l.Z)(r,u.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Treat non-canonical base pairs as unpaired (when editing and formatting)"),(0,l.Z)(r,u.BASE_PAIR_RADIUS,"Radius of base-pair circles"),(0,l.Z)(r,u.GRID_ENABLED,"Enable canvas grid"),(0,l.Z)(r,u.GRID_HORIZONTAL_LINES,"Show horizontal grid lines"),(0,l.Z)(r,u.GRID_VERTICAL_LINES,"Show vertical grid lines"),(0,l.Z)(r,u.GRID_LEFT_RIGHT_DIAGONAL,"Show left-to-right diagonal lines"),(0,l.Z)(r,u.GRID_RIGHT_LEFT_DIAGONAL,"Show right-to-left diagonal lines"),(0,l.Z)(r,u.GRID_CONCENTRIC_CIRCLES,"Show concentric circles"),(0,l.Z)(r,u.GRID_DOTTED,"Show dotted grid pattern"),(0,l.Z)(r,u.GRID_SPACING,"Grid line spacing"),(0,l.Z)(r,u.GRID_COLOR,"Grid color"),(0,l.Z)(r,u.CANVAS_COLOR,"Canvas background color"),r),f=(o={},(0,l.Z)(o,u.COPY_FILE_NAME,"Copy the name from uploaded input files to downloadable output files"),(0,l.Z)(o,u.COPY_FILE_EXTENSION,"Copy the extension from uploaded input files to downloadable output files (when supported)"),(0,l.Z)(o,u.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset the viewport translation and scale after parsing an input file"),(0,l.Z)(o,u.USE_DEGREES,"Use degrees (instead of radians) when editing angles"),(0,l.Z)(o,u.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when their parent nucleotides are repositioned"),(0,l.Z)(o,u.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),(0,l.Z)(o,u.CANONICAL_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "canonical." (i.e. Watson-Crick). Applied when formatting base pairs'),(0,l.Z)(o,u.WOBBLE_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "wobble." Applied when formatting base pairs'),(0,l.Z)(o,u.MISMATCH_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "mismatch." Applied when formatting base pairs'),(0,l.Z)(o,u.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"The default distance between base pairs which are contiguous. Applied when formatting base pairs"),(0,l.Z)(o,u.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Display only a countour line per RNA molecule, instead of individual nucleotides"),(0,l.Z)(o,u.CONTOUR_LINE_WIDTH,"Width of the contour line (applied when replacing nucleotides with a contour line)"),(0,l.Z)(o,u.PATH_MODE,"Display lines tracing the centers of nucleotides while hiding the nucleotide text. This provides an abstracted view ideal for visualizing larger structures efficiently while keeping base pairs, labels, and other features visible."),(0,l.Z)(o,u.PATH_LINE_WIDTH,"Width of the path line (applied when path mode is enabled)"),(0,l.Z)(o,u.DARK_MODE,"Change background colors and scene colors to darken the scene"),(0,l.Z)(o,u.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the prompt asking you to save your work, when you navigate away from this page"),(0,l.Z)(o,u.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Disable editing and formatting of non-canonical base pairs."),(0,l.Z)(o,u.BASE_PAIR_RADIUS,"Radius of base-pair circles (also affects dimensions of non-canonical base pairs)"),(0,l.Z)(o,u.GRID_ENABLED,"Enable or disable the canvas grid system. When enabled, you can choose which grid types to display."),(0,l.Z)(o,u.GRID_HORIZONTAL_LINES,"Display horizontal parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,u.GRID_VERTICAL_LINES,"Display vertical parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,u.GRID_LEFT_RIGHT_DIAGONAL,"Display diagonal lines from top-left to bottom-right. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,u.GRID_RIGHT_LEFT_DIAGONAL,"Display diagonal lines from top-right to bottom-left. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,u.GRID_CONCENTRIC_CIRCLES,"Display concentric circles centered on the canvas. The radius between circles is controlled by the grid spacing setting."),(0,l.Z)(o,u.GRID_DOTTED,"Display a dotted grid pattern across the canvas. The spacing between dots is controlled by the grid spacing setting."),(0,l.Z)(o,u.GRID_SPACING,"Control the distance between parallel grid lines or the radius increment for concentric circles. Higher values create more spaced out grids."),(0,l.Z)(o,u.GRID_COLOR,"Customize the color of all grid elements. Leave empty to use automatic theme-based colors."),(0,l.Z)(o,u.CANVAS_COLOR,"Customize the canvas background color. Leave empty to use automatic theme-based colors."),o),p=(a={},(0,l.Z)(a,u.COPY_FILE_NAME,"boolean"),(0,l.Z)(a,u.COPY_FILE_EXTENSION,"boolean"),(0,l.Z)(a,u.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"boolean"),(0,l.Z)(a,u.USE_DEGREES,"boolean"),(0,l.Z)(a,u.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"boolean"),(0,l.Z)(a,u.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"boolean"),(0,l.Z)(a,u.CANONICAL_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,u.WOBBLE_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,u.MISMATCH_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,u.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"number"),(0,l.Z)(a,u.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"boolean"),(0,l.Z)(a,u.CONTOUR_LINE_WIDTH,"number"),(0,l.Z)(a,u.PATH_MODE,"boolean"),(0,l.Z)(a,u.PATH_LINE_WIDTH,"number"),(0,l.Z)(a,u.DARK_MODE,"boolean"),(0,l.Z)(a,u.DISABLE_NAVIGATE_AWAY_PROMPT,"boolean"),(0,l.Z)(a,u.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"boolean"),(0,l.Z)(a,u.BASE_PAIR_RADIUS,"number"),(0,l.Z)(a,u.GRID_ENABLED,"boolean"),(0,l.Z)(a,u.GRID_HORIZONTAL_LINES,"boolean"),(0,l.Z)(a,u.GRID_VERTICAL_LINES,"boolean"),(0,l.Z)(a,u.GRID_LEFT_RIGHT_DIAGONAL,"boolean"),(0,l.Z)(a,u.GRID_RIGHT_LEFT_DIAGONAL,"boolean"),(0,l.Z)(a,u.GRID_CONCENTRIC_CIRCLES,"boolean"),(0,l.Z)(a,u.GRID_DOTTED,"boolean"),(0,l.Z)(a,u.GRID_SPACING,"number"),(0,l.Z)(a,u.GRID_COLOR,"string"),(0,l.Z)(a,u.CANVAS_COLOR,"string"),a);function h(e){return c.includes(e)}var m=(i={},(0,l.Z)(i,u.COPY_FILE_NAME,!0),(0,l.Z)(i,u.COPY_FILE_EXTENSION,!0),(0,l.Z)(i,u.RESET_VIEWPORT_AFTER_FILE_UPLOAD,!0),(0,l.Z)(i,u.USE_DEGREES,!0),(0,l.Z)(i,u.AUTOMATICALLY_REPOSITION_ANNOTATIONS,!0),(0,l.Z)(i,u.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,!0),(0,l.Z)(i,u.CANONICAL_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,u.WOBBLE_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,u.MISMATCH_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,u.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,NaN),(0,l.Z)(i,u.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,!1),(0,l.Z)(i,u.CONTOUR_LINE_WIDTH,s.DEFAULT_STROKE_WIDTH),(0,l.Z)(i,u.PATH_MODE,!1),(0,l.Z)(i,u.PATH_LINE_WIDTH,s.DEFAULT_STROKE_WIDTH),(0,l.Z)(i,u.DARK_MODE,!1),(0,l.Z)(i,u.DISABLE_NAVIGATE_AWAY_PROMPT,!1),(0,l.Z)(i,u.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,!0),(0,l.Z)(i,u.BASE_PAIR_RADIUS,Number.NaN),(0,l.Z)(i,u.GRID_ENABLED,!1),(0,l.Z)(i,u.GRID_HORIZONTAL_LINES,!0),(0,l.Z)(i,u.GRID_VERTICAL_LINES,!0),(0,l.Z)(i,u.GRID_LEFT_RIGHT_DIAGONAL,!1),(0,l.Z)(i,u.GRID_RIGHT_LEFT_DIAGONAL,!1),(0,l.Z)(i,u.GRID_CONCENTRIC_CIRCLES,!1),(0,l.Z)(i,u.GRID_DOTTED,!1),(0,l.Z)(i,u.GRID_SPACING,50),(0,l.Z)(i,u.GRID_COLOR,""),(0,l.Z)(i,u.CANVAS_COLOR,""),i)},6176:function(e,t,n){"use strict";t.__esModule=!0,t.MouseButtonIndices=t.parseFloatReturnUndefinedOnFail=t.parseIntReturnUndefinedOnFail=t.numberToFormattedStringHelper=t.FLOATING_POINT_REGEX=t.ONE_OVER_LOG_OF_SCALE_BASE=t.SCALE_BASE=t.DEFAULT_BACKGROUND_COLOR_CSS_STRING=t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT=t.DEFAULT_TRANSLATION_MAGNITUDE=t.DEFAULT_STROKE_WIDTH=void 0;var r=n(3871);t.DEFAULT_STROKE_WIDTH=.2,t.DEFAULT_TRANSLATION_MAGNITUDE=.5,t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT=2,t.DEFAULT_BACKGROUND_COLOR_CSS_STRING=(0,r.toCSS)(r.CHARCOAL_GRAY),t.SCALE_BASE=1.1,t.ONE_OVER_LOG_OF_SCALE_BASE=1/Math.log(t.SCALE_BASE),t.FLOATING_POINT_REGEX="-?(?:(?:\\d+)|(?:(?:\\d+)?\\.\\d+))(?:e-?\\d+)?";t.numberToFormattedStringHelper=function(e,n){return void 0===n&&(n=t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),e.toFixed(n)};t.parseIntReturnUndefinedOnFail=function(e){return/^-?(0x)?\d+$/.test(e)?Number.parseInt(e):void 0};t.parseFloatReturnUndefinedOnFail=function(e){var t=Number.parseFloat(e);return Number.isNaN(t)?void 0:t},function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(t.MouseButtonIndices||(t.MouseButtonIndices={}))},7457:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.median=t.getLineBoundingPath=t.isEmpty=t.max=t.min=t.parseInteger=t.subtractNumbersNegated=t.subtractNumbers=t.degreesToRadians=t.radiansToDegrees=t.sortedArraySplice=t.HandleQueryNotFound=t.binarySearch=t.areEqual=t.compare=t.sign=t.flattenRecordWithStringKeys=t.flattenRecordWithNumberKeys=t.flattenRecordWithIntegerKeys=t.flattenRecord=t.range=t.DEFAULT_EPSILON=void 0;var o,a=n(7361);function i(e,t){for(var n=Object.entries(e),r=0;r<n.length;r++)n[r][0]=t(n[r][0]);return n}function l(e,n){return void 0===n&&(n=t.DEFAULT_EPSILON),e<-n?-1:e<n?0:1}function s(e,n,r){return void 0===r&&(r=t.DEFAULT_EPSILON),l(e-n,r)}function u(e,t){return e-t}function c(e,t,n){if(0!==t.length){for(var r=t[0],o=1;o<t.length;o++){var a=t[o];n(e(a,r))&&(r=a)}return r}}t.DEFAULT_EPSILON=1e-7,t.range=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=1),(e-t)*n<=0)throw"Infinite loop error";for(var r=[],o=t;o<e;o+=n)r.push(o);return r},t.flattenRecord=i,t.flattenRecordWithIntegerKeys=function(e){return i(e,Number.parseInt)},t.flattenRecordWithNumberKeys=function(e){return i(e,Number.parseFloat)},t.flattenRecordWithStringKeys=function(e){return i(e,(function(e){return e}))},t.sign=l,t.compare=s,t.areEqual=function(e,n,r){return void 0===r&&(r=t.DEFAULT_EPSILON),0===s(e,n,r)},t.binarySearch=function(e,t){if(0===e.length)return null;for(var n=0,r=e.length-1;;){var o=n+r>>1,a=e[o],i=t(a);if(0===i)return{arrayEntry:a,arrayIndex:o};if(i>0?r=o-1:n=o+1,n>r)break}return null},function(e){e.THROW_ERROR="Throw error",e.DELETE_AND_ADD="Delete and add",e.DELETE="Delete",e.ADD="Add",e.DO_NOTHING="Do nothing"}(o=t.HandleQueryNotFound||(t.HandleQueryNotFound={})),t.sortedArraySplice=function(e,t,n,a,i){void 0===a&&(a=[]),void 0===i&&(i=o.THROW_ERROR);for(var l=0,s=e.length-1,u=!0;l<=s;){var c=l+s>>1,d=t(e[c]);if(0===d){l=c,u=!1;break}d>0?s=c-1:l=c+1}var f=n,p=a;if(u)switch(i){case o.THROW_ERROR:throw"The query was not found within the input sorted array.";case o.DELETE_AND_ADD:break;case o.DELETE:p=[];break;case o.ADD:f=0;break;case o.DO_NOTHING:p=[],f=0;break;default:throw"Unhandled switch case."}e.splice.apply(e,r([l,f],p,!1))},t.radiansToDegrees=function(e){return 57.2957795131*e},t.degreesToRadians=function(e){return.01745329251*e},t.subtractNumbers=u,t.subtractNumbersNegated=function(e,t){return t-e},t.parseInteger=function(e){return Number.parseInt(e)},t.min=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return c(e,t,(function(e){return e>0}))},t.max=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return c(e,t,(function(e){return e<0}))},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.getLineBoundingPath=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=1);var o=(0,a.subtract)(t,e),i=(0,a.scaleUp)((0,a.orthogonalize)(o),r/(0,a.magnitude)(o)),l=(0,a.add)(e,i),s=(0,a.subtract)(e,i),u=(0,a.add)(t,i),c=(0,a.subtract)(t,i);return"M ".concat(l.x," ").concat(l.y," A 1 1 0 0 ").concat(n?1:0," ").concat(s.x," ").concat(s.y," L ").concat(c.x," ").concat(c.y," A 1 1 0 0 ").concat(n?1:0," ").concat(u.x," ").concat(u.y," z")},t.median=function(e){e.sort(u);var t=e.length>>1;return e.length%2==0?.5*(e[t-1]+e[t]):e[t]}},5088:function(e,t,n){"use strict";n.d(t,{$_:function(){return x},A:function(){return v},Gg:function(){return u},HW:function(){return p},MA:function(){return m},S7:function(){return s}});var r=n(9439),o=n(7462),a=n(1153),i=255,l=100,s=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=Math.max(t,n,r),s=a-Math.min(t,n,r),u=s?a===t?(n-r)/s:a===n?2+(r-t)/s:4+(t-n)/s:0;return{h:60*(u<0?u+6:u),s:a?s/a*l:0,v:a/i*l,a:o}},u=function(e){var t=c(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},c=function(e){var t=e.h,n=e.s,r=e.v,o=e.a,a=(200-n)*r/l;return{h:t,s:a>0&&a<200?n*r/l/(a<=l?a:200-a)*l:0,l:a/2,a:o}},d=(Math.PI,function(e){var t,n=e.r,r=e.g,o=e.b;return"#"+(t=(n<<16|r<<8|o).toString(16),new Array(7-t.length).join("0")+t)}),f=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a="number"===typeof o&&(255*o|256).toString(16).slice(1);return""+d({r:t,g:n,b:r,a:o})+(a||"")},p=function(e){return s(h(e))},h=function(e){var t=e.replace("#","");/^#?/.test(e)&&3===t.length&&(e="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2));var n=new RegExp("[A-Za-z0-9]{2}","g"),o=e.match(n).map((function(e){return parseInt(e,16)})),a=(0,r.Z)(o,4),l=a[0],s=a[1],u=a[2],c=void 0===u?0:u,d=a[3];return{r:l,g:s,b:c,a:(null!=d?d:255)/i}},m=function(e){var t=e.h,n=e.s,r=e.v,a=e.a,s=t/60,u=n/l,c=r/l,d=Math.floor(s)%6,f=s-Math.floor(s),p=i*c*(1-u),h=i*c*(1-u*f),m=i*c*(1-u*(1-f));c*=i;var v={};switch(d){case 0:v.r=c,v.g=m,v.b=p;break;case 1:v.r=h,v.g=c,v.b=p;break;case 2:v.r=p,v.g=c,v.b=m;break;case 3:v.r=p,v.g=h,v.b=c;break;case 4:v.r=m,v.g=p,v.b=c;break;case 5:v.r=c,v.g=p,v.b=h}return v.r=Math.round(v.r),v.g=Math.round(v.g),v.b=Math.round(v.b),(0,o.Z)({},v,{a:a})},v=function(e){return d(m(e))},x=function(e){var t,n,r,o,i,l,s,u,d,h,x;return"string"===typeof e&&(0,a.Ff)(e)?(l=p(e),s=e):"string"!==typeof e&&(l=e),l&&(r={h:(x=l).h,s:x.s,v:x.v},i=c(l),o=m(l),u=f(o),s=v(l),n={h:(h=i).h,s:h.s,l:h.l},t={r:(d=o).r,g:d.g,b:d.b}),{rgb:t,hsl:n,hsv:r,rgba:o,hsla:i,hsva:l,hex:s,hexa:u}}},1153:function(e,t,n){"use strict";n.d(t,{Ff:function(){return r}});var r=function(e){return/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e)}},3869:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7462),o=n(3366),a=n(2791),i=n(5088),l=n(5894),s=n(184),u=["className","prefixCls","left","top","style","fillProps"],c=function(e){var t=e.className,n=e.prefixCls,a=e.left,i=e.top,l=e.style,c=e.fillProps,d=(0,o.Z)(e,u),f=(0,r.Z)({},l,{position:"absolute",left:a,top:i}),p=(0,r.Z)({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},null==c?void 0:c.style,{transform:a?"translate(-9px, -1px)":"translate(-1px, -9px)"});return(0,s.jsx)("div",(0,r.Z)({className:n+"-pointer "+(t||""),style:f},d,{children:(0,s.jsx)("div",(0,r.Z)({className:n+"-fill"},c,{style:p}))}))},d=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],f=a.forwardRef((function(e,t){var n=e.prefixCls,a=void 0===n?"w-color-alpha":n,u=e.className,f=e.hsva,p=e.background,h=e.bgProps,m=void 0===h?{}:h,v=e.innerProps,x=void 0===v?{}:v,g=e.pointerProps,y=void 0===g?{}:g,b=e.radius,N=void 0===b?0:b,E=e.width,I=e.height,C=void 0===I?16:I,S=e.direction,_=void 0===S?"horizontal":S,A=e.style,P=e.onChange,T=e.pointer,R=(0,o.Z)(e,d),M=function(e){P&&P((0,r.Z)({},f,{a:"horizontal"===_?e.left:e.top}),e)},w=(0,i.Gg)(Object.assign({},f,{a:1})),k="linear-gradient(to "+("horizontal"===_?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+w+" 100%)",O={};"horizontal"===_?O.left=100*f.a+"%":O.top=100*f.a+"%";var L=(0,r.Z)({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:N,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==) left center",backgroundColor:"var(--alpha-background-color)"},A,{position:"relative"},{width:E,height:C}),j=T&&"function"===typeof T?T((0,r.Z)({prefixCls:a},y,O)):(0,s.jsx)(c,(0,r.Z)({},y,{prefixCls:a},O));return(0,s.jsxs)("div",(0,r.Z)({},R,{className:[a,a+"-"+_,u||""].filter(Boolean).join(" "),style:L,ref:t,children:[(0,s.jsx)("div",(0,r.Z)({},m,{style:(0,r.Z)({inset:0,position:"absolute",background:p||k,borderRadius:N},m.style)})),(0,s.jsx)(l.ZP,(0,r.Z)({},x,{style:(0,r.Z)({},x.style,{inset:0,zIndex:1,position:"absolute"}),onMove:M,onDown:M,children:j}))]}))}));f.displayName="Alpha";var p=f,h=["prefixCls","className","onChange","direction","hsva"],m=a.forwardRef((function(e,t){var n=e.prefixCls,a=void 0===n?"w-color-saturation":n,l=e.className,u=e.onChange,c=e.direction,d=void 0===c?"horizontal":c,f=e.hsva,m=(0,o.Z)(e,h),v=(0,i.Gg)((0,r.Z)({},f,{a:1,v:100}));return(0,s.jsx)(p,(0,r.Z)({ref:t},m,{className:a+" "+(l||""),hsva:{h:f.h,s:f.s,v:f.v,a:1-f.v/100},direction:d,background:"linear-gradient(to "+("horizontal"===d?"right":"bottom")+", "+v+", rgb(0, 0, 0))",onChange:function(e,t){u&&u({v:"horizontal"===d?100-100*t.left:100-100*t.top})}}))}));m.displayName="ShadeSlider";var v=m},649:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(7462),o=n(3366),a=n(2791),i=n(1153),l=n(5088),s=n(5894),u=n(184),c=function(e){var t=e.className,n=e.color,o=e.left,a=e.top,i=e.style,l=e.prefixCls,s=(0,r.Z)({},i,{position:"absolute",top:a,left:o}),c=l+"-pointer "+(t||"");return(0,u.jsx)("div",{className:c,style:s,children:(0,u.jsx)("div",{className:l+"-fill",style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:(0,u.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:n}})})})},d=2*Math.PI,f=function(e,t){return(e%t+t)%t},p=function(e,t){return Math.sqrt(e*e+t*t)};function h(e){var t=e.width,n=void 0===t?0:t,r=n/2;return{width:n,radius:r,cx:r,cy:r}}function m(e){var t=e.width;return(void 0===t?0:t)/2}function v(e,t,n){var r=e.angle||0,o=e.direction;return n&&"clockwise"===o?t=r+t:"clockwise"===o?t=360-r+t:n&&"anticlockwise"===o?t=r+180-t:"anticlockwise"===o&&(t=r-t),f(t,360)}var x=["prefixCls","radius","pointer","className","style","width","height","oval","direction","angle","color","onChange"],g=a.forwardRef((function(e,t){var n=e.prefixCls,a=void 0===n?"w-color-wheel":n,f=(e.radius,e.pointer),g=e.className,y=e.style,b=e.width,N=void 0===b?200:b,E=e.height,I=void 0===E?200:E,C=e.oval,S=e.direction,_=void 0===S?"anticlockwise":S,A=e.angle,P=void 0===A?180:A,T=e.color,R=e.onChange,M=(0,o.Z)(e,x),w="string"===typeof T&&(0,i.Ff)(T)?(0,l.HW)(T):T||{},k=T?(0,l.A)(w):"",O=function(e,t){var n=h(e),r=n.cx,o=n.cy,a=m(e),i=(180+v(e,t.h,!0))*(d/360),l=t.s/100*a,s="clockwise"===e.direction?-1:1;return{x:r+l*Math.cos(i)*s,y:o+l*Math.sin(i)*s}}({width:N},w),L={top:"0",left:"0",color:k},j=function(e,t){var n=function(e,t,n){var r=h(e),o=r.cx,a=r.cy,i=m(e);t=o-t,n=a-n;var l=v(e,Math.atan2(-n,-t)*(360/d)),s=Math.min(p(t,n),i);return{h:Math.round(l),s:Math.round(100/i*s)}}({width:N},N-e.x,I-e.y),r={h:n.h,s:n.s,v:w.v,a:w.a};R&&R((0,l.$_)(r))},D={zIndex:1,transform:"translate("+O.x+"px, "+O.y+"px) "+("x"===C||"X"===C?"scaleY(2)":"y"===C||"Y"===C?"scaleX(2)":"")},Z=f&&"function"===typeof f?f((0,r.Z)({prefixCls:a,style:D},L)):(0,u.jsx)(c,(0,r.Z)({prefixCls:a,style:D},L));return(0,u.jsxs)(s.ZP,(0,r.Z)({className:[a,g||""].filter(Boolean).join(" ")},M,{style:(0,r.Z)({position:"relative",width:N,transform:"x"===C||"X"===C?"scaleY(0.5)":"y"===C||"Y"===C?"scaleX(0.5)":"",height:I},y),ref:t,onMove:j,onDown:j,children:[Z,(0,u.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===_?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)",transform:"rotateZ("+(P+90)+"deg)",inset:0}}),(0,u.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),(0,u.jsx)("div",{style:{backgroundColor:"#000",borderRadius:"50%",position:"absolute",inset:0,opacity:"number"===typeof w.v?1-w.v/100:0}})]}))}));g.displayName="Wheel";var y=g},5894:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var r=n(9439),o=n(7462),a=n(3366),i=n(2791);function l(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e})),(0,i.useCallback)((function(e,n){return t.current&&t.current(e,n)}),[])}var s=function(e){return"touches"in e},u=function(e){!s(e)&&e.preventDefault&&e.preventDefault()},c=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},d=function(e,t){var n=e.getBoundingClientRect(),r=s(t)?t.touches[0]:t;return{left:c((r.pageX-(n.left+window.pageXOffset))/n.width),top:c((r.pageY-(n.top+window.pageYOffset))/n.height),width:n.width,height:n.height,x:r.pageX-(n.left+window.pageXOffset),y:r.pageY-(n.top+window.pageYOffset)}},f=n(184),p=["prefixCls","className","onMove","onDown"],h=i.forwardRef((function(e,t){var n=e.prefixCls,c=void 0===n?"w-color-interactive":n,h=e.className,m=e.onMove,v=e.onDown,x=(0,a.Z)(e,p),g=(0,i.useRef)(null),y=(0,i.useRef)(!1),b=(0,i.useState)(!1),N=(0,r.Z)(b,2),E=N[0],I=N[1],C=l(m),S=l(v),_=(0,i.useCallback)((function(e){u(e),(s(e)?e.touches.length>0:e.buttons>0)&&g.current?C&&C(d(g.current,e),e):I(!1)}),[C]),A=(0,i.useCallback)((function(){return I(!1)}),[]),P=(0,i.useCallback)((function(e){var t=e?window.addEventListener:window.removeEventListener;t(y.current?"touchmove":"mousemove",_),t(y.current?"touchend":"mouseup",A)}),[]);(0,i.useEffect)((function(){return P(E),function(){E&&P(!1)}}),[E,P]);var T=(0,i.useCallback)((function(e){u(e.nativeEvent),function(e){return!(y.current&&!s(e))&&(y.current=s(e),!0)}(e.nativeEvent)&&(S&&S(d(g.current,e.nativeEvent),e.nativeEvent),I(!0))}),[S]);return(0,f.jsx)("div",(0,o.Z)({},x,{className:[c,h||""].filter(Boolean).join(" "),style:(0,o.Z)({},x.style,{touchAction:"none"}),ref:g,tabIndex:0,onMouseDown:T,onTouchStart:T}))}));h.displayName="Interactive";var m=h},7197:function(e,t,n){var r=n(7009).Symbol;e.exports=r},9066:function(e,t,n){var r=n(7197),o=n(1587),a=n(3581),i="[object Null]",l="[object Undefined]",s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?l:i:s&&s in Object(e)?o(e):a(e)}},821:function(e,t,n){var r=n(6050),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},1032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},1587:function(e,t,n){var r=n(7197),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(s){}var o=i.call(e);return r&&(t?e[l]=n:delete e[l]),o}},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7009:function(e,t,n){var r=n(1032),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},6050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8573:function(e,t,n){var r=n(8092),o=n(72),a=n(2582),i="Expected a function",l=Math.max,s=Math.min;e.exports=function(e,t,n){var u,c,d,f,p,h,m=0,v=!1,x=!1,g=!0;if("function"!=typeof e)throw new TypeError(i);function y(t){var n=u,r=c;return u=c=void 0,m=t,f=e.apply(r,n)}function b(e){var n=e-h;return void 0===h||n>=t||n<0||x&&e-m>=d}function N(){var e=o();if(b(e))return E(e);p=setTimeout(N,function(e){var n=t-(e-h);return x?s(n,d-(e-m)):n}(e))}function E(e){return p=void 0,g&&u?y(e):(u=c=void 0,f)}function I(){var e=o(),n=b(e);if(u=arguments,c=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(N,t),v?y(e):f}(h);if(x)return clearTimeout(p),p=setTimeout(N,t),y(h)}return void 0===p&&(p=setTimeout(N,t)),f}return t=a(t)||0,r(n)&&(v=!!n.leading,d=(x="maxWait"in n)?l(a(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),I.cancel=function(){void 0!==p&&clearTimeout(p),m=0,u=h=c=p=void 0},I.flush=function(){return void 0===p?f:E(o())},I}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,t,n){var r=n(9066),o=n(3141),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==a}},72:function(e,t,n){var r=n(7009);e.exports=function(){return r.Date.now()}},3038:function(e,t,n){var r=n(8573),o=n(8092),a="Expected a function";e.exports=function(e,t,n){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),r(e,t,{leading:i,maxWait:t,trailing:l})}},2582:function(e,t,n){var r=n(821),o=n(8092),a=n(152),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):l.test(e)?i:+e}},700:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(1413),o=n(3366);function a(e,t){if(null==e)return{};var n,r,a=(0,o.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=n(2791),l=function(e){var t=function(e){return e.replace(/^([A-Z])|[\s-_]+(\w)/g,(function(e,t,n){return n?n.toUpperCase():t.toLowerCase()}))}(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e,t,n){return Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t})).join(" ").trim()},u=n(9439),c=n(3433),d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},f=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],p=(0,i.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,l=e.size,p=void 0===l?24:l,h=e.strokeWidth,m=void 0===h?2:h,v=e.absoluteStrokeWidth,x=e.className,g=void 0===x?"":x,y=e.children,b=e.iconNode,N=a(e,f);return(0,i.createElement)("svg",(0,r.Z)((0,r.Z)((0,r.Z)({ref:t},d),{},{width:p,height:p,stroke:o,strokeWidth:v?24*Number(m)/Number(p):m,className:s("lucide",g)},!y&&!function(e){for(var t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0}(N)&&{"aria-hidden":"true"}),N),[].concat((0,c.Z)(b.map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1];return(0,i.createElement)(n,r)}))),(0,c.Z)(Array.isArray(y)?y:[y])))})),h=["className"],m=function(e,t){var n=(0,i.forwardRef)((function(n,o){var u,c=n.className,d=a(n,h);return(0,i.createElement)(p,(0,r.Z)({ref:o,iconNode:t,className:s("lucide-".concat((u=l(e),u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),c)},d))}));return n.displayName=l(e),n}},6088:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(0,n(700).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4463:function(e,t,n){"use strict";var r=n(2791),o=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,D=Object.assign;function Z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var o=u.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||o[i]!==a[l]){var s="\n"+o[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function U(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var xe=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Ce=null;function Se(e){if(e=bo(e)){if("function"!==typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=Eo(t),Ee(e.stateNode,e.type,t))}}function _e(e){Ie?Ce?Ce.push(e):Ce=[e]:Ie=e}function Ae(){if(Ie){var e=Ie,t=Ce;if(Ce=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Pe(e,t){return e(t)}function Te(){}var Re=!1;function Me(e,t,n){if(Re)return e(t,n);Re=!0;try{return Pe(e,t,n)}finally{Re=!1,(null!==Ie||null!==Ce)&&(Te(),Ae())}}function we(e,t){var n=e.stateNode;if(null===n)return null;var r=Eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var ke=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){ke=!1}function Le(e,t,n,r,o,a,i,l,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var je=!1,De=null,Ze=!1,Fe=null,Be={onError:function(e){je=!0,De=e}};function Ue(e,t,n,r,o,a,i,l,s){je=!1,De=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return We(o),e;if(i===r)return We(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var l=!1,s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ve=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,qe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Qe=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~o;0!==l?r=dt(l):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,Et,It,Ct,St,_t=!1,At=[],Pt=null,Tt=null,Rt=null,Mt=new Map,wt=new Map,kt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wt.delete(t.pointerId)}}function jt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=yo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void St(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Zt(e)&&n.delete(t)}function Bt(){_t=!1,null!==Pt&&Zt(Pt)&&(Pt=null),null!==Tt&&Zt(Tt)&&(Tt=null),null!==Rt&&Zt(Rt)&&(Rt=null),Mt.forEach(Ft),wt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ut(Pt,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Mt.forEach(t),wt.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Dt(n),null===n.blockedOn&&kt.shift()}var Gt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var o=yt,a=Gt.transition;Gt.transition=null;try{yt=1,Vt(e,t,n,r)}finally{yt=o,Gt.transition=a}}function Kt(e,t,n,r){var o=yt,a=Gt.transition;Gt.transition=null;try{yt=4,Vt(e,t,n,r)}finally{yt=o,Gt.transition=a}}function Vt(e,t,n,r){if(Wt){var o=qt(e,t,n,r);if(null===o)Wr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Pt=jt(Pt,e,t,n,r,o),!0;case"dragenter":return Tt=jt(Tt,e,t,n,r,o),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Mt.set(a,jt(Mt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,wt.set(a,jt(wt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&Nt(a),null===(a=qt(e,t,n,r))&&Wr(e,t,r,Xt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Xt=null;function qt(e,t,n,r){if(Xt=null,null!==(e=yo(e=Ne(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,ln,sn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),dn=D({},un,{view:0,detail:0}),fn=on(dn),pn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),hn=on(pn),mn=on(D({},pn,{dataTransfer:0})),vn=on(D({},dn,{relatedTarget:0})),xn=on(D({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=D({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(gn),bn=on(D({},un,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Cn}var _n=D({},dn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(_n),Pn=on(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=on(D({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wn=on(Mn),kn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var jn=c&&"TextEvent"in window&&!Ln,Dn=c&&(!On||Ln&&8<Ln&&11>=Ln),Zn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Vn=null;function Xn(e){Zr(e,0)}function qn(e){if(V(No(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Vn=Kn=null)}function nr(e){if("value"===e.propertyName&&qn(Vn)){var t=[];Hn(t,Vn,e,Ne(e)),Me(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Vn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Vn)}function ar(e,t){if("click"===e)return qn(t)}function ir(e,t){if("input"===e||"change"===e)return qn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!lr(e[o],t[o]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=cr(n,a);var i=cr(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,xr=null,gr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(xr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionend:Nr("Transition","TransitionEnd")},Ir={},Cr={};function Sr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Ir[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var _r=Sr("animationend"),Ar=Sr("animationiteration"),Pr=Sr("animationstart"),Tr=Sr("transitionend"),Rr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){Rr.set(e,t),s(t,[e])}for(var kr=0;kr<Mr.length;kr++){var Or=Mr[kr];wr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}wr(_r,"onAnimationEnd"),wr(Ar,"onAnimationIteration"),wr(Pr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(Tr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,l,s,u){if(Ue.apply(this,arguments),je){if(!je)throw Error(a(198));var c=De;je=!1,De=null,Ze||(Ze=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,u),a=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,u=l.currentTarget,l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,u),a=s}}}if(Ze)throw e=Fe,Ze=!1,Fe=null,e}function Fr(e,t){var n=t[vo];void 0===n&&(n=t[vo]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Yt(t)){case 1:var o=Ht;break;case 4:o=Kt;break;default:o=Vt}n=o.bind(null,t,n,e),o=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=yo(l)))return;if(5===(s=i.tag)||6===s){r=a=i;continue e}l=l.parentNode}}r=r.return}Me((function(){var r=a,o=Ne(n),i=[];e:{var l=Rr.get(e);if(void 0!==l){var s=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":u="focus",s=vn;break;case"focusout":u="blur",s=vn;break;case"beforeblur":case"afterblur":s=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case _r:case Ar:case Pr:s=xn;break;case Tr:s=Rn;break;case"scroll":s=fn;break;case"wheel":s=wn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Pn}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==l?l+"Capture":null:l;c=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=we(h,f))&&c.push(Hr(h,m,p)))),d)break;h=h.return}0<c.length&&(l=new s(l,u,null,n,o),i.push({event:l,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yo(u)&&!u[mo])&&(s||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(u=(u=n.relatedTarget||n.toElement)?yo(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(s=null,u=r),s!==u)){if(c=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==s?l:No(s),p=null==u?l:No(u),(l=new c(m,h+"leave",s,n,o)).target=d,l.relatedTarget=p,m=null,yo(o)===r&&((c=new c(f,h+"enter",u,n,o)).target=p,c.relatedTarget=d,m=c),d=m,s&&u)e:{for(f=u,h=0,p=c=s;p;p=Vr(p))h++;for(p=0,m=f;m;m=Vr(m))p++;for(;0<h-p;)c=Vr(c),h--;for(;0<p-h;)f=Vr(f),p--;for(;h--;){if(c===f||null!==f&&c===f.alternate)break e;c=Vr(c),f=Vr(f)}c=null}else c=null;null!==s&&Xr(i,l,s,c,!1),null!==u&&null!==d&&Xr(i,d,u,c,!0)}if("select"===(s=(l=r?No(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var v=Yn;else if(Wn(l))if(Qn)v=ir;else{v=or;var x=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(v=ar);switch(v&&(v=v(e,r))?Hn(i,v,n,o):(x&&x(e,l,r),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&ee(l,"number",l.value)),x=r?No(r):window,e){case"focusin":(Wn(x)||"true"===x.contentEditable)&&(vr=x,xr=r,gr=null);break;case"focusout":gr=xr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,o)}var g;if(On)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(g=en()):($t="value"in(Qt=o)?Qt.value:Qt.textContent,zn=!0)),0<(x=Kr(r,y)).length&&(y=new bn(y,e,null,n,o),i.push({event:y,listeners:x}),g?y.data=g:null!==(g=Un(n))&&(y.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Zn);case"textInput":return(e=t.data)===Zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Jt=$t=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=g))}Zr(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=we(e,n))&&r.unshift(Hr(e,a,o)),null!=(a=we(e,t))&&r.push(Hr(e,a,o))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==u&&(l=u,o?null!=(s=we(n,a))&&i.unshift(Hr(n,s,l)):o||null!=(s=we(n,a))&&i.push(Hr(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(lo)}:ro;function lo(e){setTimeout((function(){throw e}))}function so(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function uo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,mo="__reactContainer$"+fo,vo="__reactEvents$"+fo,xo="__reactListeners$"+fo,go="__reactHandles$"+fo;function yo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=co(e);null!==e;){if(n=e[po])return n;e=co(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function No(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Eo(e){return e[ho]||null}var Io=[],Co=-1;function So(e){return{current:e}}function _o(e){0>Co||(e.current=Io[Co],Io[Co]=null,Co--)}function Ao(e,t){Co++,Io[Co]=e.current,e.current=t}var Po={},To=So(Po),Ro=So(!1),Mo=Po;function wo(e,t){var n=e.type.contextTypes;if(!n)return Po;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ko(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oo(){_o(Ro),_o(To)}function Lo(e,t,n){if(To.current!==Po)throw Error(a(168));Ao(To,t),Ao(Ro,n)}function jo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,G(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Po,Mo=To.current,Ao(To,e),Ao(Ro,Ro.current),!0}function Zo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=jo(e,t,Mo),r.__reactInternalMemoizedMergedChildContext=e,_o(Ro),_o(To),Ao(To,e)):_o(Ro),Ao(Ro,n)}var Fo=null,Bo=!1,Uo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Go(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=yt;try{var n=Fo;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,Bo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ve(Je,Go),o}finally{yt=t,Uo=!1}}return null}var Wo=[],Ho=0,Ko=null,Vo=0,Xo=[],qo=0,Yo=null,Qo=1,$o="";function Jo(e,t){Wo[Ho++]=Vo,Wo[Ho++]=Ko,Ko=e,Vo=t}function ea(e,t,n){Xo[qo++]=Qo,Xo[qo++]=$o,Xo[qo++]=Yo,Yo=e;var r=Qo;e=$o;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Qo=1<<32-it(t)+o|n<<o|r,$o=a+e}else Qo=1<<a|n<<o|r,$o=e}function ta(e){null!==e.return&&(Jo(e,1),ea(e,1,0))}function na(e){for(;e===Ko;)Ko=Wo[--Ho],Wo[Ho]=null,Vo=Wo[--Ho],Wo[Ho]=null;for(;e===Yo;)Yo=Xo[--qo],Xo[qo]=null,$o=Xo[--qo],Xo[qo]=null,Qo=Xo[--qo],Xo[qo]=null}var ra=null,oa=null,aa=!1,ia=null;function la(e,t){var n=wu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=uo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Qo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(aa){var t=oa;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=uo(n.nextSibling);var r=ra;t&&sa(e,t)?la(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ua(e))throw pa(),Error(a(418));for(;t;)la(e,t),t=uo(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=uo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?uo(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=uo(e.nextSibling)}function ha(){oa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var va=b.ReactCurrentBatchConfig;function xa(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=So(null),ya=null,ba=null,Na=null;function Ea(){Na=ba=ya=null}function Ia(e){var t=ga.current;_o(ga),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,Na=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Aa=null;function Pa(e){null===Aa?Aa=[e]:Aa.push(e)}function Ta(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pa(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ka(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ts)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ra(e,n)}return null===(o=r.interleaved)?(t.next=t,Pa(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ra(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Za(e,t,n,r){var o=e.updateQueue;Ma=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?a=u:i.next=u,i=s;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(null!==a){var d=o.baseState;for(i=0,c=u=s=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,m=l;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=D({},d,f);break e;case 2:Ma=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(u=c=p,s=d):c=c.next=p,i|=f;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(f=l).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===c&&(s=d),o.baseState=s,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Ds|=i,e.lanes=i,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Ba=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),o=nu(e),a=Oa(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,o))&&(ru(t,e,o,r),ja(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),o=nu(e),a=Oa(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,o))&&(ru(t,e,o,r),ja(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),o=Oa(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=La(e,o,r))&&(ru(t,e,r,n),ja(t,e,r))}};function Ga(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(o,a))}function Wa(e,t,n){var r=!1,o=Po,a=t.contextType;return"object"===typeof a&&null!==a?a=_a(a):(o=ko(t)?Mo:To.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?wo(e,o):Po),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Ba,wa(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=_a(a):(a=ko(t)?Mo:To.current,o.context=wo(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&za.enqueueReplaceState(o,o.state,null),Za(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===Ba&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Zu(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===I?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===w&&qa(a)===t.type)?((r=o(t,n.props)).ref=Va(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Va(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=ju(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Zu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Va(e,null,t),n.return=e,n;case E:return(t=Fu(t,e.mode,n)).return=e,t;case w:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=ju(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===o?u(e,t,n,r):null;case E:return n.key===o?c(e,t,n,r):null;case w:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);Xa(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case w:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);Xa(t,r)}return null}function m(o,a,l,s){for(var u=null,c=null,d=a,m=a=0,v=null;null!==d&&m<l.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var x=p(o,d,l[m],s);if(null===x){null===d&&(d=v);break}e&&d&&null===x.alternate&&t(o,d),a=i(x,a,m),null===c?u=x:c.sibling=x,c=x,d=v}if(m===l.length)return n(o,d),aa&&Jo(o,m),u;if(null===d){for(;m<l.length;m++)null!==(d=f(o,l[m],s))&&(a=i(d,a,m),null===c?u=d:c.sibling=d,c=d);return aa&&Jo(o,m),u}for(d=r(o,d);m<l.length;m++)null!==(v=h(d,o,m,l[m],s))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=i(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(o,e)})),aa&&Jo(o,m),u}function v(o,l,s,u){var c=L(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var d=c=null,m=l,v=l=0,x=null,g=s.next();null!==m&&!g.done;v++,g=s.next()){m.index>v?(x=m,m=null):x=m.sibling;var y=p(o,m,g.value,u);if(null===y){null===m&&(m=x);break}e&&m&&null===y.alternate&&t(o,m),l=i(y,l,v),null===d?c=y:d.sibling=y,d=y,m=x}if(g.done)return n(o,m),aa&&Jo(o,v),c;if(null===m){for(;!g.done;v++,g=s.next())null!==(g=f(o,g.value,u))&&(l=i(g,l,v),null===d?c=g:d.sibling=g,d=g);return aa&&Jo(o,v),c}for(m=r(o,m);!g.done;v++,g=s.next())null!==(g=h(m,o,v,g.value,u))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),l=i(g,l,v),null===d?c=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(o,e)})),aa&&Jo(o,v),c}return function e(r,a,i,s){if("object"===typeof i&&null!==i&&i.type===I&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case N:e:{for(var u=i.key,c=a;null!==c;){if(c.key===u){if((u=i.type)===I){if(7===c.tag){n(r,c.sibling),(a=o(c,i.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===w&&qa(u)===c.type){n(r,c.sibling),(a=o(c,i.props)).ref=Va(r,c,i),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===I?((a=ju(i.props.children,r.mode,s,i.key)).return=r,r=a):((s=Lu(i.type,i.key,i.props,null,r.mode,s)).ref=Va(r,a,i),s.return=r,r=s)}return l(r);case E:e:{for(c=i.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fu(i,r.mode,s)).return=r,r=a}return l(r);case w:return e(r,a,(c=i._init)(i._payload),s)}if(te(i))return m(r,a,i,s);if(L(i))return v(r,a,i,s);Xa(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Zu(i,r.mode,s)).return=r,r=a),l(r)):n(r,a)}}var Qa=Ya(!0),$a=Ya(!1),Ja={},ei=So(Ja),ti=So(Ja),ni=So(Ja);function ri(e){if(e===Ja)throw Error(a(174));return e}function oi(e,t){switch(Ao(ni,t),Ao(ti,e),Ao(ei,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(ei),Ao(ei,t)}function ai(){_o(ei),_o(ti),_o(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=se(t,e.type);t!==n&&(Ao(ti,e),Ao(ei,n))}function li(e){ti.current===e&&(_o(ei),_o(ti))}var si=So(0);function ui(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ci=[];function di(){for(var e=0;e<ci.length;e++)ci[e]._workInProgressVersionPrimary=null;ci.length=0}var fi=b.ReactCurrentDispatcher,pi=b.ReactCurrentBatchConfig,hi=0,mi=null,vi=null,xi=null,gi=!1,yi=!1,bi=0,Ni=0;function Ei(){throw Error(a(321))}function Ii(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function Ci(e,t,n,r,o,i){if(hi=i,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?ll:sl,e=n(r,o),yi){i=0;do{if(yi=!1,bi=0,25<=i)throw Error(a(301));i+=1,xi=vi=null,t.updateQueue=null,fi.current=ul,e=n(r,o)}while(yi)}if(fi.current=il,t=null!==vi&&null!==vi.next,hi=0,xi=vi=mi=null,gi=!1,t)throw Error(a(300));return e}function Si(){var e=0!==bi;return bi=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?mi.memoizedState=xi=e:xi=xi.next=e,xi}function Ai(){if(null===vi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=vi.next;var t=null===xi?mi.memoizedState:xi.next;if(null!==t)xi=t,vi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vi=e).memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},null===xi?mi.memoizedState=xi=e:xi=xi.next=e}return xi}function Pi(e,t){return"function"===typeof t?t(e):t}function Ti(e){var t=Ai(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=l=null,u=null,c=i;do{var d=c.lane;if((hi&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(s=u=f,l=r):u=u.next=f,mi.lanes|=d,Ds|=d}c=c.next}while(null!==c&&c!==i);null===u?l=r:u.next=s,lr(r,t.memoizedState)||(bl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,mi.lanes|=i,Ds|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=Ai(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{i=e(i,l.action),l=l.next}while(l!==o);lr(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Mi(){}function wi(e,t){var n=mi,r=Ai(),o=t(),i=!lr(r.memoizedState,o);if(i&&(r.memoizedState=o,bl=!0),r=r.queue,Wi(Li.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==xi&&1&xi.memoizedState.tag){if(n.flags|=2048,Fi(9,Oi.bind(null,n,r,o,t),void 0,null),null===Rs)throw Error(a(349));0!==(30&hi)||ki(n,t,o)}return o}function ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oi(e,t,n,r){t.value=n,t.getSnapshot=r,ji(t)&&Di(e)}function Li(e,t,n){return n((function(){ji(t)&&Di(e)}))}function ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Di(e){var t=Ra(e,1);null!==t&&ru(t,e,1,-1)}function Zi(e){var t=_i();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},t.queue=e,e=e.dispatch=nl.bind(null,mi,e),[t.memoizedState,e]}function Fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bi(){return Ai().memoizedState}function Ui(e,t,n,r){var o=_i();mi.flags|=e,o.memoizedState=Fi(1|t,n,void 0,void 0===r?null:r)}function zi(e,t,n,r){var o=Ai();r=void 0===r?null:r;var a=void 0;if(null!==vi){var i=vi.memoizedState;if(a=i.destroy,null!==r&&Ii(r,i.deps))return void(o.memoizedState=Fi(t,n,a,r))}mi.flags|=e,o.memoizedState=Fi(1|t,n,a,r)}function Gi(e,t){return Ui(8390656,8,e,t)}function Wi(e,t){return zi(2048,8,e,t)}function Hi(e,t){return zi(4,2,e,t)}function Ki(e,t){return zi(4,4,e,t)}function Vi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,Vi.bind(null,t,e),n)}function qi(){}function Yi(e,t){var n=Ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ii(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qi(e,t){var n=Ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ii(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $i(e,t,n){return 0===(21&hi)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),mi.lanes|=n,Ds|=n,e.baseState=!0),t)}function Ji(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=pi.transition;pi.transition={};try{e(!1),t()}finally{yt=n,pi.transition=r}}function el(){return Ai().memoizedState}function tl(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rl(e))ol(t,n);else if(null!==(n=Ta(e,t,n,r))){ru(n,e,r,tu()),al(n,t,r)}}function nl(e,t,n){var r=nu(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rl(e))ol(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,n);if(o.hasEagerState=!0,o.eagerState=l,lr(l,i)){var s=t.interleaved;return null===s?(o.next=o,Pa(t)):(o.next=s.next,s.next=o),void(t.interleaved=o)}}catch(u){}null!==(n=Ta(e,t,o,r))&&(ru(n,e,r,o=tu()),al(n,t,r))}}function rl(e){var t=e.alternate;return e===mi||null!==t&&t===mi}function ol(e,t){yi=gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function al(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var il={readContext:_a,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},ll={readContext:_a,useCallback:function(e,t){return _i().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Gi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ui(4194308,4,Vi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ui(4,2,e,t)},useMemo:function(e,t){var n=_i();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_i();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tl.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_i().memoizedState=e},useState:Zi,useDebugValue:qi,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=Zi(!1),t=e[0];return e=Ji.bind(null,e[1]),_i().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mi,o=_i();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rs)throw Error(a(349));0!==(30&hi)||ki(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Gi(Li.bind(null,r,i,e),[e]),r.flags|=2048,Fi(9,Oi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_i(),t=Rs.identifierPrefix;if(aa){var n=$o;t=":"+t+"R"+(n=(Qo&~(1<<32-it(Qo)-1)).toString(32)+n),0<(n=bi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ni++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sl={readContext:_a,useCallback:Yi,useContext:_a,useEffect:Wi,useImperativeHandle:Xi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:Qi,useReducer:Ti,useRef:Bi,useState:function(){return Ti(Pi)},useDebugValue:qi,useDeferredValue:function(e){return $i(Ai(),vi.memoizedState,e)},useTransition:function(){return[Ti(Pi)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:wi,useId:el,unstable_isNewReconciler:!1},ul={readContext:_a,useCallback:Yi,useContext:_a,useEffect:Wi,useImperativeHandle:Xi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:Qi,useReducer:Ri,useRef:Bi,useState:function(){return Ri(Pi)},useDebugValue:qi,useDeferredValue:function(e){var t=Ai();return null===vi?t.memoizedState=e:$i(t,vi.memoizedState,e)},useTransition:function(){return[Ri(Pi)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:wi,useId:el,unstable_isNewReconciler:!1};function cl(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pl="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ks=r),fl(0,t)},n}function ml(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){fl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!==typeof r&&(null===Vs?Vs=new Set([this]):Vs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var yl=b.ReactCurrentOwner,bl=!1;function Nl(e,t,n,r){t.child=null===e?$a(t,null,n,r):Qa(t,e.child,n,r)}function El(e,t,n,r,o){n=n.render;var a=t.ref;return Sa(t,o),r=Ci(e,t,n,r,a,o),n=Si(),null===e||bl?(aa&&n&&ta(t),t.flags|=1,Nl(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Il(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||ku(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cl(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)return Hl(e,t,o)}return t.flags|=1,(e=Ou(a,r)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bl=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Hl(e,t,o);0!==(131072&e.flags)&&(bl=!0)}}return Al(e,t,n,r,o)}function Sl(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(Os,ks),ks|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(Os,ks),ks|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ao(Os,ks),ks|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ao(Os,ks),ks|=r;return Nl(e,t,o,n),t.child}function _l(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Al(e,t,n,r,o){var a=ko(n)?Mo:To.current;return a=wo(t,a),Sa(t,o),n=Ci(e,t,n,r,a,o),r=Si(),null===e||bl?(aa&&r&&ta(t),t.flags|=1,Nl(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Pl(e,t,n,r,o){if(ko(n)){var a=!0;Do(t)}else a=!1;if(Sa(t,o),null===t.stateNode)Wl(e,t),Wa(t,n,r),Ka(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,u=n.contextType;"object"===typeof u&&null!==u?u=_a(u):u=wo(t,u=ko(n)?Mo:To.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||s!==u)&&Ha(t,i,r,u),Ma=!1;var f=t.memoizedState;i.state=f,Za(t,r,i,o),s=t.memoizedState,l!==r||f!==s||Ro.current||Ma?("function"===typeof c&&(Ua(t,n,c,r),s=t.memoizedState),(l=Ma||Ga(t,n,l,r,f,s,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=u,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ka(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:xa(t.type,l),i.props=u,d=t.pendingProps,f=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=_a(s):s=wo(t,s=ko(n)?Mo:To.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||f!==s)&&Ha(t,i,r,s),Ma=!1,f=t.memoizedState,i.state=f,Za(t,r,i,o);var h=t.memoizedState;l!==d||f!==h||Ro.current||Ma?("function"===typeof p&&(Ua(t,n,p,r),h=t.memoizedState),(u=Ma||Ga(t,n,u,r,f,h,s)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=s,r=u):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Tl(e,t,n,r,a,o)}function Tl(e,t,n,r,o,a){_l(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Zo(t,n,!1),Hl(e,t,a);r=t.stateNode,yl.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Qa(t,e.child,null,a),t.child=Qa(t,null,l,a)):Nl(e,t,l,a),t.memoizedState=r.state,o&&Zo(t,n,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),oi(e,t.containerInfo)}function Ml(e,t,n,r,o){return ha(),ma(o),t.flags|=256,Nl(e,t,n,r),t.child}var wl,kl,Ol,Ll,jl={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zl(e,t,n){var r,o=t.pendingProps,i=si.current,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ao(si,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,l?(o=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&o)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Du(s,o,0,null),e=ju(e,o,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Dl(n),t.memoizedState=jl,e):Fl(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,l){if(n)return 256&t.flags?(t.flags&=-257,Bl(e,t,l,r=dl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Du({mode:"visible",children:r.children},o,0,null),(i=ju(i,o,l,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Qa(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=jl,i);if(0===(1&t.mode))return Bl(e,t,l,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Bl(e,t,l,r=dl(i=Error(a(419)),r,void 0))}if(s=0!==(l&e.childLanes),bl||s){if(null!==(r=Rs)){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|l))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Ra(e,o),ru(r,e,o,-1))}return vu(),Bl(e,t,l,r=dl(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=uo(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Xo[qo++]=Qo,Xo[qo++]=$o,Xo[qo++]=Yo,Qo=e.id,$o=e.overflow,Yo=t),t=Fl(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(l){l=o.fallback,s=t.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:o.children};return 0===(1&s)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=u,t.deletions=null):(o=Ou(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=Ou(r,l):(l=ju(l,s,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,o=l,l=t.child,s=null===(s=e.child.memoizedState)?Dl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=jl,o}return e=(l=e.child).sibling,o=Ou(l,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fl(e,t){return(t=Du({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bl(e,t,n,r){return null!==r&&ma(r),Qa(t,e.child,null,n),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ul(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function zl(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Gl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Nl(e,t,r.children,n),0!==(2&(r=si.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ul(e,n,t);else if(19===e.tag)Ul(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(si,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ui(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),zl(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ui(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}zl(t,!0,n,null,a);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kl(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xl(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return ko(t.type)&&Oo(),Vl(t),null;case 3:return r=t.stateNode,ai(),_o(Ro),_o(To),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(lu(ia),ia=null))),kl(e,t),Vl(t),null;case 5:li(t);var o=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Ol(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vl(t),null}if(e=ri(ei.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[ho]=i,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)Fr(Lr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":oe(r,i),Fr("invalid",r)}for(var s in ge(n,i),o=null,i)if(i.hasOwnProperty(s)){var u=i[s];"children"===s?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,u,e),o=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,u,e),o=["children",""+u]):l.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":K(r),J(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[po]=t,e[ho]=r,wl(e,t,!1,!1),t.stateNode=e;e:{switch(s=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)Fr(Lr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":Y(e,r),o=q(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(i in ge(n,o),u=o)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?ve(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Fr("scroll",e):null!=c&&y(e,i,c,s))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)Ll(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ri(ni.current),ri(ei.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Vl(t),null;case 13:if(_o(si),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),ha(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),i=!1}else null!==ia&&(lu(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&si.current)?0===Ls&&(Ls=3):vu())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return ai(),kl(e,t),null===e&&zr(t.stateNode.containerInfo),Vl(t),null;case 10:return Ia(t.type._context),Vl(t),null;case 19:if(_o(si),null===(i=t.memoizedState))return Vl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Kl(i,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ui(e))){for(t.flags|=128,Kl(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ao(si,1&si.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Gs&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ui(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!aa)return Vl(t),null}else 2*Qe()-i.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=si.current,Ao(si,r?1&n|2:1&n),t):(Vl(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ks)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function ql(e,t){switch(na(t),t.tag){case 1:return ko(t.type)&&Oo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ai(),_o(Ro),_o(To),di(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return li(t),null;case 13:if(_o(si),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(si),null;case 4:return ai(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}wl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},kl=function(){},Ol=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ri(ei.current);var a,i=null;switch(n){case"input":o=q(e,o),r=q(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ge(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var s=o[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(s=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),i||s===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ll=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yl=!1,Ql=!1,$l="function"===typeof WeakSet?WeakSet:Set,Jl=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Su(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&ts(t,n,a)}o=o.next}while(o!==r)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function is(e){var t=e.alternate;null!==t&&(e.alternate=null,is(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[vo],delete t[xo],delete t[go])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ls(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function us(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(us(e,t,n),e=e.sibling;null!==e;)us(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ds=null,fs=!1;function ps(e,t,n){for(n=n.child;null!==n;)hs(e,t,n),n=n.sibling}function hs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(l){}switch(n.tag){case 5:Ql||es(n,t);case 6:var r=ds,o=fs;ds=null,ps(e,t,n),fs=o,null!==(ds=r)&&(fs?(e=ds,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ds.removeChild(n.stateNode));break;case 18:null!==ds&&(fs?(e=ds,n=n.stateNode,8===e.nodeType?so(e.parentNode,n):1===e.nodeType&&so(e,n),zt(e)):so(ds,n.stateNode));break;case 4:r=ds,o=fs,ds=n.stateNode.containerInfo,fs=!0,ps(e,t,n),ds=r,fs=o;break;case 0:case 11:case 14:case 15:if(!Ql&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&ts(n,t,i),o=o.next}while(o!==r)}ps(e,t,n);break;case 1:if(!Ql&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Su(n,t,l)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:1&n.mode?(Ql=(r=Ql)||null!==n.memoizedState,ps(e,t,n),Ql=r):ps(e,t,n);break;default:ps(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $l),t.forEach((function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:ds=s.stateNode,fs=!1;break e;case 3:case 4:ds=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ds)throw Error(a(160));hs(i,l,o),ds=null,fs=!1;var u=o.alternate;null!==u&&(u.return=null),o.return=null}catch(c){Su(o,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xs(t,e),t=t.sibling}function xs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),gs(e),4&r){try{rs(3,e,e.return),os(3,e)}catch(v){Su(e,e.return,v)}try{rs(5,e,e.return)}catch(v){Su(e,e.return,v)}}break;case 1:vs(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(vs(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(v){Su(e,e.return,v)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,s=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===s&&"radio"===i.type&&null!=i.name&&Q(o,i),ye(s,l);var c=ye(s,i);for(l=0;l<u.length;l+=2){var d=u[l],f=u[l+1];"style"===d?ve(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):y(o,d,f,c)}switch(s){case"input":$(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?ne(o,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[ho]=i}catch(v){Su(e,e.return,v)}}break;case 6:if(vs(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(v){Su(e,e.return,v)}}break;case 3:if(vs(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){Su(e,e.return,v)}break;case 4:default:vs(t,e),gs(e);break;case 13:vs(t,e),gs(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(zs=Qe())),4&r&&ms(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ql=(c=Ql)||d,vs(t,e),Ql=c):vs(t,e),gs(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Jl=e,d=e.child;null!==d;){for(f=Jl=d;null!==Jl;){switch(h=(p=Jl).child,p.tag){case 0:case 11:case 14:case 15:rs(4,p,p.return);break;case 1:es(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Su(r,n,v)}}break;case 5:es(p,p.return);break;case 22:if(null!==p.memoizedState){Es(f);continue}}null!==h?(h.return=p,Jl=h):Es(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,c?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=f.stateNode,l=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,s.style.display=me("display",l))}catch(v){Su(e,e.return,v)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Su(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),gs(e),4&r&&ms(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ls(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),cs(e,ss(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;us(e,ss(e),i);break;default:throw Error(a(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ys(e,t,n){Jl=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Jl;){var o=Jl,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Yl;if(!i){var l=o.alternate,s=null!==l&&null!==l.memoizedState||Ql;l=Yl;var u=Ql;if(Yl=i,(Ql=s)&&!u)for(Jl=o;null!==Jl;)s=(i=Jl).child,22===i.tag&&null!==i.memoizedState?Is(o):null!==s?(s.return=i,Jl=s):Is(o);for(;null!==a;)Jl=a,bs(a,t,n),a=a.sibling;Jl=o,Yl=l,Ql=u}Ns(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Jl=a):Ns(e)}}function Ns(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ql||os(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ql)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:xa(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Fa(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Ql||512&t.flags&&as(t)}catch(p){Su(t,t.return,p)}}if(t===e){Jl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jl=n;break}Jl=t.return}}function Es(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jl=n;break}Jl=t.return}}function Is(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{os(4,t)}catch(s){Su(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Su(t,o,s)}}var a=t.return;try{as(t)}catch(s){Su(t,a,s)}break;case 5:var i=t.return;try{as(t)}catch(s){Su(t,i,s)}}}catch(s){Su(t,t.return,s)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var Cs,Ss=Math.ceil,_s=b.ReactCurrentDispatcher,As=b.ReactCurrentOwner,Ps=b.ReactCurrentBatchConfig,Ts=0,Rs=null,Ms=null,ws=0,ks=0,Os=So(0),Ls=0,js=null,Ds=0,Zs=0,Fs=0,Bs=null,Us=null,zs=0,Gs=1/0,Ws=null,Hs=!1,Ks=null,Vs=null,Xs=!1,qs=null,Ys=0,Qs=0,$s=null,Js=-1,eu=0;function tu(){return 0!==(6&Ts)?Qe():-1!==Js?Js:Js=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Ts)&&0!==ws?ws&-ws:null!==va.transition?(0===eu&&(eu=mt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ru(e,t,n,r){if(50<Qs)throw Qs=0,$s=null,Error(a(185));xt(e,n,r),0!==(2&Ts)&&e===Rs||(e===Rs&&(0===(2&Ts)&&(Zs|=n),4===Ls&&su(e,ws)),ou(e,r),1===n&&0===Ts&&0===(1&t.mode)&&(Gs=Qe()+500,Bo&&Go()))}function ou(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),l=1<<i,s=o[i];-1===s?0!==(l&n)&&0===(l&r)||(o[i]=pt(l,t)):s<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=ft(e,e===Rs?ws:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bo=!0,zo(e)}(uu.bind(null,e)):zo(uu.bind(null,e)),io((function(){0===(6&Ts)&&Go()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ru(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Js=-1,eu=0,0!==(6&Ts))throw Error(a(327));var n=e.callbackNode;if(Iu()&&e.callbackNode!==n)return null;var r=ft(e,e===Rs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xu(e,r);else{t=r;var o=Ts;Ts|=2;var i=mu();for(Rs===e&&ws===t||(Ws=null,Gs=Qe()+500,pu(e,t));;)try{yu();break}catch(s){hu(e,s)}Ea(),_s.current=i,Ts=o,null!==Ms?t=0:(Rs=null,ws=0,t=Ls)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=iu(e,o))),1===t)throw n=js,pu(e,0),su(e,r),ou(e,Qe()),n;if(6===t)su(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!lr(a(),o))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=xu(e,r))&&(0!==(i=ht(e))&&(r=i,t=iu(e,i))),1===t))throw n=js,pu(e,0),su(e,r),ou(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Eu(e,Us,Ws);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=zs+500-Qe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Eu.bind(null,e,Us,Ws),t);break}Eu(e,Us,Ws);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-it(r);i=1<<l,(l=t[l])>o&&(o=l),r&=~i}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ro(Eu.bind(null,e,Us,Ws),r);break}Eu(e,Us,Ws);break;default:throw Error(a(329))}}}return ou(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function iu(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=xu(e,t))&&(t=Us,Us=n,null!==t&&lu(t)),e}function lu(e){null===Us?Us=e:Us.push.apply(Us,e)}function su(e,t){for(t&=~Fs,t&=~Zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Ts))throw Error(a(327));Iu();var t=ft(e,0);if(0===(1&t))return ou(e,Qe()),null;var n=xu(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=iu(e,r))}if(1===n)throw n=js,pu(e,0),su(e,t),ou(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Us,Ws),ou(e,Qe()),null}function cu(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&(Gs=Qe()+500,Bo&&Go())}}function du(e){null!==qs&&0===qs.tag&&0===(6&Ts)&&Iu();var t=Ts;Ts|=1;var n=Ps.transition,r=yt;try{if(Ps.transition=null,yt=1,e)return e()}finally{yt=r,Ps.transition=n,0===(6&(Ts=t))&&Go()}}function fu(){ks=Os.current,_o(Os)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oo();break;case 3:ai(),_o(Ro),_o(To),di();break;case 5:li(r);break;case 4:ai();break;case 13:case 19:_o(si);break;case 10:Ia(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Rs=e,Ms=e=Ou(e.current,null),ws=ks=t,Ls=0,js=null,Fs=Zs=Ds=0,Us=Bs=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(r=(n=Aa[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Aa=null}return e}function hu(e,t){for(;;){var n=Ms;try{if(Ea(),fi.current=il,gi){for(var r=mi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}gi=!1}if(hi=0,xi=vi=mi=null,yi=!1,bi=0,As.current=null,null===n||null===n.return){Ls=1,js=t,Ms=null;break}e:{var i=e,l=n.return,s=n,u=t;if(t=ws,s.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=s,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=xl(l);if(null!==h){h.flags&=-257,gl(h,l,s,0,t),1&h.mode&&vl(i,c,t),u=c;var m=(t=h).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vl(i,c,t),vu();break e}u=Error(a(426))}else if(aa&&1&s.mode){var x=xl(l);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),gl(x,l,s,0,t),ma(cl(u,s));break e}}i=u=cl(u,s),4!==Ls&&(Ls=2),null===Bs?Bs=[i]:Bs.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Da(i,hl(0,u,t));break e;case 1:s=u;var g=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Vs||!Vs.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Da(i,ml(i,s,t));break e}}i=i.return}while(null!==i)}Nu(n)}catch(b){t=b,Ms===n&&null!==n&&(Ms=n=n.return);continue}break}}function mu(){var e=_s.current;return _s.current=il,null===e?il:e}function vu(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Rs||0===(268435455&Ds)&&0===(268435455&Zs)||su(Rs,ws)}function xu(e,t){var n=Ts;Ts|=2;var r=mu();for(Rs===e&&ws===t||(Ws=null,pu(e,t));;)try{gu();break}catch(o){hu(e,o)}if(Ea(),Ts=n,_s.current=r,null!==Ms)throw Error(a(261));return Rs=null,ws=0,Ls}function gu(){for(;null!==Ms;)bu(Ms)}function yu(){for(;null!==Ms&&!qe();)bu(Ms)}function bu(e){var t=Cs(e.alternate,e,ks);e.memoizedProps=e.pendingProps,null===t?Nu(e):Ms=t,As.current=null}function Nu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xl(n,t,ks)))return void(Ms=n)}else{if(null!==(n=ql(n,t)))return n.flags&=32767,void(Ms=n);if(null===e)return Ls=6,void(Ms=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ms=t);Ms=t=e}while(null!==t);0===Ls&&(Ls=5)}function Eu(e,t,n){var r=yt,o=Ps.transition;try{Ps.transition=null,yt=1,function(e,t,n,r){do{Iu()}while(null!==qs);if(0!==(6&Ts))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Rs&&(Ms=Rs=null,ws=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xs||(Xs=!0,Ru(tt,(function(){return Iu(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Ps.transition,Ps.transition=null;var l=yt;yt=1;var s=Ts;Ts|=4,As.current=null,function(e,t){if(eo=Wt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(N){n=null;break e}var l=0,s=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==o&&3!==f.nodeType||(s=l+o),f!==i||0!==r&&3!==f.nodeType||(u=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++c===o&&(s=l),p===i&&++d===r&&(u=l),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===s||-1===u?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Wt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,x=m.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:xa(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(N){Su(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}m=ns,ns=!1}(e,n),xs(n,e),hr(to),Wt=!!eo,to=eo=null,e.current=n,ys(n,e,o),Ye(),Ts=s,yt=l,Ps.transition=i}else e.current=n;if(Xs&&(Xs=!1,qs=e,Ys=o),i=e.pendingLanes,0===i&&(Vs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ou(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hs)throw Hs=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&Iu(),i=e.pendingLanes,0!==(1&i)?e===$s?Qs++:(Qs=0,$s=e):Qs=0,Go()}(e,t,n,r)}finally{Ps.transition=o,yt=r}return null}function Iu(){if(null!==qs){var e=bt(Ys),t=Ps.transition,n=yt;try{if(Ps.transition=null,yt=16>e?16:e,null===qs)var r=!1;else{if(e=qs,qs=null,Ys=0,0!==(6&Ts))throw Error(a(331));var o=Ts;for(Ts|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var s=i.deletions;if(null!==s){for(var u=0;u<s.length;u++){var c=s[u];for(Jl=c;null!==Jl;){var d=Jl;switch(d.tag){case 0:case 11:case 15:rs(8,d,i)}var f=d.child;if(null!==f)f.return=d,Jl=f;else for(;null!==Jl;){var p=(d=Jl).sibling,h=d.return;if(is(d),d===c){Jl=null;break}if(null!==p){p.return=h,Jl=p;break}Jl=h}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(null!==v)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var g=i.sibling;if(null!==g){g.return=i.return,Jl=g;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var b=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==b)b.return=l,Jl=b;else e:for(l=y;null!==Jl;){if(0!==(2048&(s=Jl).flags))try{switch(s.tag){case 0:case 11:case 15:os(9,s)}}catch(E){Su(s,s.return,E)}if(s===l){Jl=null;break e}var N=s.sibling;if(null!==N){N.return=s.return,Jl=N;break e}Jl=s.return}}if(Ts=o,Go(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(E){}r=!0}return r}finally{yt=n,Ps.transition=t}}return!1}function Cu(e,t,n){e=La(e,t=hl(0,t=cl(n,t),1),1),t=tu(),null!==e&&(xt(e,1,t),ou(e,t))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vs||!Vs.has(r))){t=La(t,e=ml(t,e=cl(n,e),1),1),e=tu(),null!==t&&(xt(t,1,e),ou(t,e));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(ws&n)===n&&(4===Ls||3===Ls&&(130023424&ws)===ws&&500>Qe()-zs?pu(e,0):Fs|=n),ou(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ra(e,t))&&(xt(e,t,n),ou(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Au(e,n)}function Ru(e,t){return Ve(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wu(e,t,n,r){return new Mu(e,t,n,r)}function ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,o,i){var l=2;if(r=e,"function"===typeof e)ku(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case I:return ju(n.children,o,i,t);case C:l=8,o|=8;break;case S:return(e=wu(12,n,t,2|o)).elementType=S,e.lanes=i,e;case T:return(e=wu(13,n,t,o)).elementType=T,e.lanes=i,e;case R:return(e=wu(19,n,t,o)).elementType=R,e.lanes=i,e;case k:return Du(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:l=10;break e;case A:l=9;break e;case P:l=11;break e;case M:l=14;break e;case w:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wu(l,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function ju(e,t,n,r){return(e=wu(7,e,r,t)).lanes=n,e}function Du(e,t,n,r){return(e=wu(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Zu(e,t,n){return(e=wu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,o,a,i,l,s){return e=new Bu(e,t,n,l,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wa(a),e}function zu(e){if(!e)return Po;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ko(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ko(n))return jo(e,n,t)}return t}function Gu(e,t,n,r,o,a,i,l,s){return(e=Uu(n,r,!0,e,0,a,0,l,s)).context=zu(null),n=e.current,(a=Oa(r=tu(),o=nu(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,o),e.current.lanes=o,xt(e,o,r),ou(e,r),e}function Wu(e,t,n,r){var o=t.current,a=tu(),i=nu(o);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(o,t,i))&&(ru(e,o,i,a),ja(e,o,i)),i}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Cs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)bl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bl=!1,function(e,t,n){switch(t.tag){case 3:Rl(t),ha();break;case 5:ii(t);break;case 1:ko(t.type)&&Do(t);break;case 4:oi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ao(ga,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ao(si,1&si.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zl(e,t,n):(Ao(si,1&si.current),null!==(e=Hl(e,t,n))?e.sibling:null);Ao(si,1&si.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(si,si.current),r)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,n)}return Hl(e,t,n)}(e,t,n);bl=0!==(131072&e.flags)}else bl=!1,aa&&0!==(1048576&t.flags)&&ea(t,Vo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var o=wo(t,To.current);Sa(t,n),o=Ci(null,t,r,e,o,n);var i=Si();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ko(r)?(i=!0,Do(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,wa(t),o.updater=za,t.stateNode=o,o._reactInternals=t,Ka(t,r,e,n),t=Tl(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),Nl(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===M)return 14}return 2}(r),e=xa(r,e),o){case 0:t=Al(null,t,r,e,n);break e;case 1:t=Pl(null,t,r,e,n);break e;case 11:t=El(null,t,r,e,n);break e;case 14:t=Il(null,t,r,xa(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Al(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 1:return r=t.type,o=t.pendingProps,Pl(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 3:e:{if(Rl(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,ka(e,t),Za(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ml(e,t,r,n,o=cl(Error(a(423)),t));break e}if(r!==o){t=Ml(e,t,r,n,o=cl(Error(a(424)),t));break e}for(oa=uo(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===o){t=Hl(e,t,n);break e}Nl(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&ca(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,l=o.children,no(r,o)?l=null:null!==i&&no(r,i)&&(t.flags|=32),_l(e,t),Nl(e,t,l,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Zl(e,t,n);case 4:return oi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qa(t,null,r,n):Nl(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,El(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 7:return Nl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Nl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,Ao(ga,r._currentValue),r._currentValue=l,null!==i)if(lr(i.value,l)){if(i.children===o.children&&!Ro.current){t=Hl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var u=s.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=Oa(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,null!==(u=i.alternate)&&(u.lanes|=n),Ca(i.return,n,t),s.lanes|=n;break}u=u.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Ca(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}Nl(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Sa(t,n),r=r(o=_a(o)),t.flags|=1,Nl(e,t,r,n),t.child;case 14:return o=xa(r=t.type,t.pendingProps),Il(e,t,r,o=xa(r.type,o),n);case 15:return Cl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xa(r,o),Wl(e,t),t.tag=1,ko(r)?(e=!0,Do(t)):e=!1,Sa(t,n),Wa(t,r,o),Ka(t,r,o,n),Tl(null,t,r,!0,e,n);case 19:return Gl(e,t,n);case 22:return Sl(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function qu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var l=o;o=function(){var e=Hu(i);l.call(e)}}Wu(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Hu(i);a.call(e)}}var i=Gu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=i,e[mo]=i.current,zr(8===e.nodeType?e.parentNode:e),du(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var l=r;r=function(){var e=Hu(s);l.call(e)}}var s=Uu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=s,e[mo]=s.current,zr(8===e.nodeType?e.parentNode:e),du((function(){Wu(t,s,n,r)})),s}(n,t,e,o,r);return Hu(i)}Yu.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},Yu.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Wu(null,e,null,null)})),t[mo]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Dt(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(gt(t,1|n),ou(t,Qe()),0===(6&Ts)&&(Gs=Qe()+500,Go()))}break;case 13:du((function(){var t=Ra(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Vu(e,1)}},Et=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)ru(t,e,134217728,tu());Vu(e,134217728)}},It=function(e){if(13===e.tag){var t=nu(e),n=Ra(e,t);if(null!==n)ru(n,e,t,tu());Vu(e,t)}},Ct=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Eo(r);if(!o)throw Error(a(90));V(r),$(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cu,Te=du;var tc={usingClientEntryPoint:!1,Events:[bo,No,Eo,_e,Ae,cu]},nc={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{ot=oc.inject(rc),at=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,r="",o=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,zr(8===e.nodeType?e.parentNode:e),new qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",l=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,o,0,i,l),e[mo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:u,ref:c,props:a,_owner:l.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=x.prototype;var b=y.prototype=new g;b.constructor=y,m(b,x.prototype),b.isPureReactComponent=!0;var N=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var o,a={},i=null,l=null;if(null!=t)for(o in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,o)&&!C.hasOwnProperty(o)&&(a[o]=t[o]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===a[o]&&(a[o]=s[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:I.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,o,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return i=i(s=e),e=""===a?"."+P(s,0):a,N(i)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),T(i,t,o,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(s=0,a=""===a?".":a+":",N(e))for(var u=0;u<e.length;u++){var c=a+P(l=e[u],u);s+=T(l,t,o,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(l=e.next()).done;)s+=T(l=l.value,t,o,c=a+P(l,u++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],o=0;return T(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var w={current:null},k={transition:null},O={ReactCurrentDispatcher:w,ReactCurrentBatchConfig:k,ReactCurrentOwner:I};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=o,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)E.call(t,u)&&!C.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];o.children=s}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return w.current.useCallback(e,t)},t.useContext=function(e){return w.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return w.current.useDeferredValue(e)},t.useEffect=function(e,t){return w.current.useEffect(e,t)},t.useId=function(){return w.current.useId()},t.useImperativeHandle=function(e,t,n){return w.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.current.useMemo(e,t)},t.useReducer=function(e,t,n){return w.current.useReducer(e,t,n)},t.useRef=function(e){return w.current.useRef(e)},t.useState=function(e){return w.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>a(s,n))u<o&&0>a(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[l]=n,r=l);else{if(!(u<o&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var u=[],c=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,x="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function N(e){if(v=!1,b(e),!m)if(null!==r(u))m=!0,k(E);else{var t=r(c);null!==t&&O(N,t.startTime-e)}}function E(e,n){m=!1,v&&(v=!1,g(_),_=-1),h=!0;var a=p;try{for(b(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!T());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var l=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?f.callback=l:f===r(u)&&o(u),b(n)}else o(u);f=r(u)}if(null!==f)var s=!0;else{var d=r(c);null!==d&&O(N,d.startTime-n),s=!1}return s}finally{f=null,p=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,C=!1,S=null,_=-1,A=5,P=-1;function T(){return!(t.unstable_now()-P<A)}function R(){if(null!==S){var e=t.unstable_now();P=e;var n=!0;try{n=S(!0,e)}finally{n?I():(C=!1,S=null)}}else C=!1}if("function"===typeof y)I=function(){y(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,w=M.port2;M.port1.onmessage=R,I=function(){w.postMessage(null)}}else I=function(){x(R,0)};function k(e){S=e,C||(C=!0,I())}function O(e,n){_=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,k(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(v?(g(_),_=-1):v=!0,O(N,a-i))):(e.sortIndex=l,n(u,e),m||h||(m=!0,k(E))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},3508:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function l(e){r(i,o,a,l,s,"next",e)}function s(e){r(i,o,a,l,s,"throw",e)}l(void 0)}))}}n.d(t,{Z:function(){return o}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.Z)(o.key),o)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(181);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}},516:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1120),o=n(8814),a=n(1002);function i(e,t){if(t&&("object"===(0,a.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){var t=(0,o.Z)();return function(){var n,o=(0,r.Z)(e);if(t){var a=(0,r.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9142);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9611);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{Z:function(){return r}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1002);function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(R){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),l=new A(r||[]);return a(i,"_invoke",{value:I(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var x={};c(x,l,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(P([])));y&&y!==t&&n.call(y,l)&&(x=y);var b=v.prototype=h.prototype=Object.create(x);function N(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var u=f(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return o("throw",e,l,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function I(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return T()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=C(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return m.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},N(E.prototype),c(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(b),c(b,u,"Generator"),c(b,l,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var o=n(181),a=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(c){u=!0,o=c}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||(0,o.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var o=n(9199),a=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,o.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1002);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},n.d(a,i),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".014ccd8a.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="xrna-in-typescript:";n.l=function(r,o,a,i){if(e[r])e[r].push(o);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=r),e[r]=[o];var f=function(t,n){l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",function(){var e={179:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=a);var i=n.p+n.u(t),l=new Error;n.l(i,(function(r){if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}}),"chunk-"+t,t)}};var t=function(t,r){var o,a,i=r[0],l=r[1],s=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)s(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkxrna_in_typescript=self.webpackChunkxrna_in_typescript||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),o=n(7105),a=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))},i=n(4165),l=n(5861),s=n(3144),u=n(5671),c=n(9439),d=n(4164),f=n.t(d,2),p=n(136),h=n(516),m=n(4942),v=n(1120),x=n(9611);var g=n(8814);function y(e,t,n){return y=(0,g.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,x.Z)(o,n.prototype),o},y.apply(null,arguments)}function b(e){var t="function"===typeof Map?new Map:void 0;return b=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,(0,v.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,x.Z)(r,e)},b(e)}var N=n(3878),E=n(9199),I=n(181),C=n(5267);var S,_=n(7762),A=n(3433);function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(S||(S={}));var T,R="popstate";function M(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function k(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),P({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,o=void 0===r?"":r,a=e.hash,i=void 0===a?"":a;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function j(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(e,t,n,r){void 0===r&&(r={});var o=r,a=o.window,i=void 0===a?document.defaultView:a,l=o.v5Compat,s=void 0!==l&&l,u=i.history,c=S.Pop,d=null,f=p();function p(){return(u.state||{idx:null}).idx}function h(){c=S.Pop;var e=p(),t=null==e?null:e-f;f=e,d&&d({action:c,location:v.location,delta:t})}function m(e){var t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:L(e);return M(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,u.replaceState(P({},u.state,{idx:f}),""));var v={get action(){return c},get location(){return e(i,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(R,h),d=e,function(){i.removeEventListener(R,h),d=null}},createHref:function(e){return t(i,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=S.Push;var r=O(v.location,e,t);n&&n(r,e);var o=k(r,f=p()+1),a=v.createHref(r);try{u.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(a)}s&&d&&d({action:c,location:v.location,delta:1})},replace:function(e,t){c=S.Replace;var r=O(v.location,e,t);n&&n(r,e);var o=k(r,f=p()),a=v.createHref(r);u.replaceState(o,"",a),s&&d&&d({action:c,location:v.location,delta:0})},go:function(e){return u.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));var Z=new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map((function(e,o){var a=[].concat((0,A.Z)(n),[o]),i="string"===typeof e.id?e.id:a.join("-");if(M(!0!==e.index||!e.children,"Cannot specify children on an index route"),M(!r[i],'Found a route id collision on id "'+i+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var l=P({},e,t(e),{id:i});return r[i]=l,l}var s=P({},e,t(e),{id:i,children:void 0});return r[i]=s,e.children&&(s.children=F(e.children,t,a,r)),s}))}function B(e,t,n){void 0===n&&(n="/");var r=ee(("string"===typeof t?j(t):t).pathname||"/",n);if(null==r)return null;var o=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(o);for(var a=null,i=0;null==a&&i<o.length;++i)a=Q(o[i],J(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var o=function(e,o,a){var i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(M(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var l=oe([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(M(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),U(e.children,t,s,l)),(null!=e.path||e.index)&&t.push({path:l,score:Y(l,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,_.Z)(z(e.path));try{for(a.s();!(r=a.n()).done;){var i=r.value;o(e,t,i)}}catch(l){a.e(l)}finally{a.f()}}else o(e,t)})),t}function z(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,N.Z)(n)||(0,E.Z)(n)||(0,I.Z)(n)||(0,C.Z)()),o=r[0],a=r.slice(1),i=o.endsWith("?"),l=o.replace(/\?$/,"");if(0===a.length)return i?[l,""]:[l];var s=z(a.join("/")),u=[];return u.push.apply(u,(0,A.Z)(s.map((function(e){return""===e?l:[l,e].join("/")})))),i&&u.push.apply(u,(0,A.Z)(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var G=/^:\w+$/,W=3,H=2,K=1,V=10,X=-2,q=function(e){return"*"===e};function Y(e,t){var n=e.split("/"),r=n.length;return n.some(q)&&(r+=X),t&&(r+=H),n.filter((function(e){return!q(e)})).reduce((function(e,t){return e+(G.test(t)?W:""===t?K:V)}),r)}function Q(e,t){for(var n=e.routesMeta,r={},o="/",a=[],i=0;i<n.length;++i){var l=n[i],s=i===n.length-1,u="/"===o?t:t.slice(o.length)||"/",c=$({path:l.relativePath,caseSensitive:l.caseSensitive,end:s},u);if(!c)return null;Object.assign(r,c.params);var d=l.route;a.push({params:r,pathname:oe([o,c.pathname]),pathnameBase:ae(oe([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=oe([o,c.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");var a=new RegExp(o,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,c.Z)(n,2),o=r[0],a=r[1],i=t.match(o);if(!i)return null;var l=i[0],s=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:a.reduce((function(e,t,n){var r=t.paramName,o=t.isOptional;if("*"===r){var a=u[n]||"";s=l.slice(0,l.length-a.length).replace(/(.)\/+$/,"$1")}var i=u[n];return e[r]=o&&!i?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return w(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(i||"",r),e}),{}),pathname:l,pathnameBase:s,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return w(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function te(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ne(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function re(e,t,n,r){var o;void 0===r&&(r=!1),"string"===typeof e?o=j(e):(M(!(o=P({},e)).pathname||!o.pathname.includes("?"),te("?","pathname","search",o)),M(!o.pathname||!o.pathname.includes("#"),te("#","pathname","hash",o)),M(!o.search||!o.search.includes("#"),te("#","search","hash",o)));var a,i=""===e||""===o.pathname,l=i?"/":o.pathname;if(null==l)a=n;else if(r){var s=0===t.length?[]:t[t.length-1].replace(/^\//,"").split("/");if(l.startsWith("..")){for(var u=l.split("/");".."===u[0];)u.shift(),s.pop();o.pathname=u.join("/")}a="/"+s.join("/")}else{var c=t.length-1;if(l.startsWith("..")){for(var d=l.split("/");".."===d[0];)d.shift(),c-=1;o.pathname=d.join("/")}a=c>=0?t[c]:"/"}var f=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?j(e):e,r=n.pathname,o=n.search,a=void 0===o?"":o,i=n.hash,l=void 0===i?"":i,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:le(l)}}(o,a),p=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&n.endsWith("/");return f.pathname.endsWith("/")||!p&&!h||(f.pathname+="/"),f}var oe=function(e){return e.join("/").replace(/\/\/+/g,"/")},ae=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},le=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},se=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(b(Error));var ue=(0,s.Z)((function e(t,n,r,o){(0,u.Z)(this,e),void 0===o&&(o=!1),this.status=t,this.statusText=n||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function ce(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var de=["post","put","patch","delete"],fe=new Set(de),pe=["get"].concat(de),he=new Set(pe),me=new Set([301,302,303,307,308]),ve=new Set([307,308]),xe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ge={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ye={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},be=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=function(e){return{hasErrorBoundary:Boolean(e.hasErrorBoundary)}},Ee="remix-router-transitions";function Ie(e){var t,n=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,o=!r;if(M(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){var a=e.detectErrorBoundary;t=function(e){return{hasErrorBoundary:a(e)}}}else t=Ne;var s,u,d={},f=F(e.routes,t,void 0,d),p=e.basename||"/",h=P({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),v=null,x=new Set,g=null,y=null,b=null,N=null!=e.hydrationData,E=B(f,e.history.location,p),I=null;if(null==E){var C=ze(404,{pathname:e.history.location.pathname}),R=Ue(f),k=R.matches,L=R.route;E=k,I=(0,m.Z)({},L.id,C)}var j,D=E.some((function(e){return e.route.lazy})),Z=E.some((function(e){return e.route.loader}));if(D)u=!1;else if(Z)if(h.v7_partialHydration){var U=e.hydrationData?e.hydrationData.loaderData:null,z=e.hydrationData?e.hydrationData.errors:null;u=E.every((function(e){return e.route.loader&&!0!==e.route.loader.hydrate&&(U&&void 0!==U[e.route.id]||z&&void 0!==z[e.route.id])}))}else u=null!=e.hydrationData;else u=!0;var G,W={historyAction:e.history.action,location:e.history.location,matches:E,initialized:u,navigation:xe,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||I,fetchers:new Map,blockers:new Map},H=S.Pop,K=!1,V=!1,X=new Map,q=null,Y=!1,Q=!1,$=[],J=[],te=new Map,ne=0,re=-1,oe=new Map,ae=new Set,ie=new Map,le=new Map,se=new Set,ue=new Map,ce=new Map,de=!1;function fe(e,t){void 0===t&&(t={}),W=P({},W,e);var n=[],r=[];h.v7_fetcherPersist&&W.fetchers.forEach((function(e,t){"idle"===e.state&&(se.has(t)?r.push(t):n.push(t))})),(0,A.Z)(x).forEach((function(e){return e(W,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync})})),h.v7_fetcherPersist&&(n.forEach((function(e){return W.fetchers.delete(e)})),r.forEach((function(e){return rt(e)})))}function pe(t,n,r){var o,a,i,l=(void 0===r?{}:r).flushSync,u=null!=W.actionData&&null!=W.navigation.formMethod&&$e(W.navigation.formMethod)&&"loading"===W.navigation.state&&!0!==(null==(o=t.state)?void 0:o._isRedirect);i=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:u?W.actionData:null;var c=n.loaderData?Fe(W.loaderData,n.loaderData,n.matches||[],n.errors):W.loaderData,d=W.blockers;d.size>0&&(d=new Map(d)).forEach((function(e,t){return d.set(t,ye)}));var p,h=!0===K||null!=W.navigation.formMethod&&$e(W.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(s&&(f=s,s=void 0),Y||H===S.Pop||(H===S.Push?e.history.push(t,t.state):H===S.Replace&&e.history.replace(t,t.state)),H===S.Pop){var m=X.get(W.location.pathname);m&&m.has(t.pathname)?p={currentLocation:W.location,nextLocation:t}:X.has(t.pathname)&&(p={currentLocation:t,nextLocation:W.location})}else if(V){var v=X.get(W.location.pathname);v?v.add(t.pathname):(v=new Set([t.pathname]),X.set(W.location.pathname,v)),p={currentLocation:W.location,nextLocation:t}}fe(P({},n,{actionData:i,loaderData:c,historyAction:H,location:t,initialized:!0,navigation:xe,revalidation:"idle",restoreScrollPosition:Nt(t,n.matches||W.matches),preventScrollReset:h,blockers:d}),{viewTransitionOpts:p,flushSync:!0===l}),H=S.Pop,K=!1,V=!1,Y=!1,Q=!1,$=[],J=[]}function he(e,t){return me.apply(this,arguments)}function me(){return me=(0,l.Z)((0,i.Z)().mark((function t(n,r){var o,a,l,s,u,c,d,f,m,v,x,g;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:if(o=Ce(W.location,W.matches,p,h.v7_prependBasename,n,h.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),a=Se(h.v7_normalizeFormMethod,!1,o,r),l=a.path,s=a.submission,u=a.error,c=W.location,d=P({},d=O(W.location,l,r&&r.state),e.history.encodeLocation(d)),f=r&&null!=r.replace?r.replace:void 0,m=S.Push,!0===f?m=S.Replace:!1===f||null!=s&&$e(s.formMethod)&&s.formAction===W.location.pathname+W.location.search&&(m=S.Replace),v=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,x=!0===(r&&r.unstable_flushSync),!(g=xt({currentLocation:c,nextLocation:d,historyAction:m}))){t.next=17;break}return vt(g,{state:"blocked",location:d,proceed:function(){vt(g,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),he(n,r)},reset:function(){var e=new Map(W.blockers);e.set(g,ye),fe({blockers:e})}}),t.abrupt("return");case 17:return t.next=19,Ie(m,d,{submission:s,pendingError:u,preventScrollReset:v,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:x});case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)}))),me.apply(this,arguments)}function Ie(e,t,n){return _e.apply(this,arguments)}function _e(){return _e=(0,l.Z)((0,i.Z)().mark((function t(n,r,o){var a,l,u,c,d,h,v,x,g,y,b,N,E,I,C,S;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G&&G.abort(),G=null,H=n,Y=!0===(o&&o.startUninterruptedRevalidation),bt(W.location,W.matches),K=!0===(o&&o.preventScrollReset),V=!0===(o&&o.enableViewTransition),a=s||f,l=o&&o.overrideNavigation,u=B(a,r,p),c=!0===(o&&o.flushSync),u){t.next=17;break}return d=ze(404,{pathname:r.pathname}),h=Ue(a),v=h.matches,x=h.route,gt(),pe(r,{matches:v,loaderData:{},errors:(0,m.Z)({},x.id,d)},{flushSync:c}),t.abrupt("return");case 17:if(!W.initialized||Q||!He(W.location,r)||o&&o.submission&&$e(o.submission.formMethod)){t.next=20;break}return pe(r,{matches:u},{flushSync:c}),t.abrupt("return");case 20:if(G=new AbortController,g=Oe(e.history,r,G.signal,o&&o.submission),!o||!o.pendingError){t.next=26;break}b=(0,m.Z)({},Be(u).route.id,o.pendingError),t.next=37;break;case 26:if(!(o&&o.submission&&$e(o.submission.formMethod))){t.next=37;break}return t.next=29,Pe(g,r,o.submission,u,{replace:o.replace,flushSync:c});case 29:if(!(N=t.sent).shortCircuited){t.next=32;break}return t.abrupt("return");case 32:y=N.pendingActionData,b=N.pendingActionError,l=it(r,o.submission),c=!1,g=new Request(g.url,{signal:g.signal});case 37:return t.next=39,Re(g,r,u,l,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,o&&!0===o.initialHydration,c,y,b);case 39:if(E=t.sent,I=E.shortCircuited,C=E.loaderData,S=E.errors,!I){t.next=45;break}return t.abrupt("return");case 45:G=null,pe(r,P({matches:u},y?{actionData:y}:{},{loaderData:C,errors:S}));case 47:case"end":return t.stop()}}),t)}))),_e.apply(this,arguments)}function Pe(e,t,n,r,o){return Te.apply(this,arguments)}function Te(){return Te=(0,l.Z)((0,i.Z)().mark((function e(n,r,o,a,l){var s,u,c,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===l&&(l={}),Ye(),fe({navigation:lt(r,o)},{flushSync:!0===l.flushSync}),(u=ot(a,r)).route.action||u.route.lazy){e.next=9;break}s={type:T.error,error:ze(405,{method:n.method,pathname:r.pathname,routeId:u.route.id})},e.next=14;break;case 9:return e.next=11,we("action",n,u,a,d,t,p,h.v7_relativeSplatPath);case 11:if(s=e.sent,!n.signal.aborted){e.next=14;break}return e.abrupt("return",{shortCircuited:!0});case 14:if(!Xe(s)){e.next=19;break}return c=l&&null!=l.replace?l.replace:s.location===W.location.pathname+W.location.search,e.next=18,je(W,s,{submission:o,replace:c});case 18:return e.abrupt("return",{shortCircuited:!0});case 19:if(!Ve(s)){e.next=23;break}return f=Be(a,u.route.id),!0!==(l&&l.replace)&&(H=S.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:(0,m.Z)({},f.route.id,s.error)});case 23:if(!Ke(s)){e.next=25;break}throw ze(400,{type:"defer-action"});case 25:return e.abrupt("return",{pendingActionData:(0,m.Z)({},u.route.id,s.data)});case 26:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function Re(e,t,n,r,o,a,i,l,s,u,c){return Me.apply(this,arguments)}function Me(){return Me=(0,l.Z)((0,i.Z)().mark((function t(n,r,o,a,l,u,d,m,v,x,g){var y,b,N,E,I,C,S,_,A,T,R,M,w,k,O,L,j,D,Z,F,B,U;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y=a||it(r,l),b=l||u||at(y),N=s||f,E=Ae(e.history,W,o,b,r,h.v7_partialHydration&&!0===m,Q,$,J,se,ie,ae,N,p,x,g),I=(0,c.Z)(E,2),C=I[0],S=I[1],gt((function(e){return!(o&&o.some((function(t){return t.route.id===e})))||C&&C.some((function(t){return t.route.id===e}))})),re=++ne,0!==C.length||0!==S.length){t.next=10;break}return _=pt(),pe(r,P({matches:o,loaderData:{},errors:g||null},x?{actionData:x}:{},_?{fetchers:new Map(W.fetchers)}:{}),{flushSync:v}),t.abrupt("return",{shortCircuited:!0});case 10:return Y||h.v7_partialHydration&&m||(S.forEach((function(e){var t=W.fetchers.get(e.key),n=st(void 0,t?t.data:void 0);W.fetchers.set(e.key,n)})),A=x||W.actionData,fe(P({navigation:y},A?0===Object.keys(A).length?{actionData:null}:{actionData:A}:{},S.length>0?{fetchers:new Map(W.fetchers)}:{}),{flushSync:v})),S.forEach((function(e){te.has(e.key)&&dt(e.key),e.controller&&te.set(e.key,e.controller)})),T=function(){return S.forEach((function(e){return dt(e.key)}))},G&&G.signal.addEventListener("abort",T),t.next=16,We(W.matches,o,C,S,n);case 16:if(R=t.sent,M=R.results,w=R.loaderResults,k=R.fetcherResults,!n.signal.aborted){t.next=22;break}return t.abrupt("return",{shortCircuited:!0});case 22:if(G&&G.signal.removeEventListener("abort",T),S.forEach((function(e){return te.delete(e.key)})),!(O=Ge(M))){t.next=30;break}return O.idx>=C.length&&(L=S[O.idx-C.length].key,ae.add(L)),t.next=29,je(W,O.result,{replace:d});case 29:return t.abrupt("return",{shortCircuited:!0});case 30:return j=Ze(W,o,C,w,g,S,k,ue),D=j.loaderData,Z=j.errors,ue.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&ue.delete(t)}))})),F=pt(),B=ht(re),U=F||B||S.length>0,t.abrupt("return",P({loaderData:D,errors:Z},U?{fetchers:new Map(W.fetchers)}:{}));case 36:case"end":return t.stop()}}),t)}))),Me.apply(this,arguments)}function ke(){return ke=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,u,v,x){var g,y,b,N,E,I,C,S,_,A,P,T,R,w,k,O,L,j,D,Z,F,U,z,K,V,X,q;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ye(),ie.delete(r),l.route.action||l.route.lazy){n.next=6;break}return g=ze(405,{method:x.formMethod,pathname:a,routeId:o}),et(r,o,g,{flushSync:v}),n.abrupt("return");case 6:return y=W.fetchers.get(r),Qe(r,ut(x,y),{flushSync:v}),b=new AbortController,N=Oe(e.history,a,b.signal,x),te.set(r,b),E=ne,n.next=14,we("action",N,l,u,d,t,p,h.v7_relativeSplatPath);case 14:if(I=n.sent,!N.signal.aborted){n.next=18;break}return te.get(r)===b&&te.delete(r),n.abrupt("return");case 18:if(!se.has(r)){n.next=21;break}return Qe(r,ct(void 0)),n.abrupt("return");case 21:if(!Xe(I)){n.next=31;break}if(te.delete(r),!(re>E)){n.next=28;break}return Qe(r,ct(void 0)),n.abrupt("return");case 28:return ae.add(r),Qe(r,st(x)),n.abrupt("return",je(W,I,{fetcherSubmission:x}));case 31:if(!Ve(I)){n.next=34;break}return et(r,o,I.error),n.abrupt("return");case 34:if(!Ke(I)){n.next=36;break}throw ze(400,{type:"defer-action"});case 36:return C=W.navigation.location||W.location,S=Oe(e.history,C,b.signal),_=s||f,M(A="idle"!==W.navigation.state?B(_,W.navigation.location,p):W.matches,"Didn't find any matches after fetcher action"),P=++ne,oe.set(r,P),T=st(x,I.data),W.fetchers.set(r,T),R=Ae(e.history,W,A,x,C,!1,Q,$,J,se,ie,ae,_,p,(0,m.Z)({},l.route.id,I.data),void 0),w=(0,c.Z)(R,2),k=w[0],(O=w[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=W.fetchers.get(t),r=st(void 0,n?n.data:void 0);W.fetchers.set(t,r),te.has(t)&&dt(t),e.controller&&te.set(t,e.controller)})),fe({fetchers:new Map(W.fetchers)}),L=function(){return O.forEach((function(e){return dt(e.key)}))},b.signal.addEventListener("abort",L),n.next=52,We(W.matches,A,k,O,S);case 52:if(j=n.sent,D=j.results,Z=j.loaderResults,F=j.fetcherResults,!b.signal.aborted){n.next=58;break}return n.abrupt("return");case 58:if(b.signal.removeEventListener("abort",L),oe.delete(r),te.delete(r),O.forEach((function(e){return te.delete(e.key)})),!(U=Ge(D))){n.next=66;break}return U.idx>=k.length&&(z=O[U.idx-k.length].key,ae.add(z)),n.abrupt("return",je(W,U.result));case 66:K=Ze(W,W.matches,k,Z,void 0,O,F,ue),V=K.loaderData,X=K.errors,W.fetchers.has(r)&&(q=ct(I.data),W.fetchers.set(r,q)),ht(P),"loading"===W.navigation.state&&P>re?(M(H,"Expected pending action"),G&&G.abort(),pe(W.navigation.location,{matches:A,loaderData:V,errors:X,fetchers:new Map(W.fetchers)})):(fe({errors:X,loaderData:Fe(W.loaderData,V,A,X),fetchers:new Map(W.fetchers)}),Q=!1);case 70:case"end":return n.stop()}}),n)}))),ke.apply(this,arguments)}function Le(){return Le=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,s,u,c){var f,m,v,x,g;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=W.fetchers.get(r),Qe(r,st(c,f?f.data:void 0),{flushSync:u}),m=new AbortController,v=Oe(e.history,a,m.signal),te.set(r,m),x=ne,n.next=8,we("loader",v,l,s,d,t,p,h.v7_relativeSplatPath);case 8:if(!Ke(g=n.sent)){n.next=16;break}return n.next=12,tt(g,v.signal,!0);case 12:if(n.t0=n.sent,n.t0){n.next=15;break}n.t0=g;case 15:g=n.t0;case 16:if(te.get(r)===m&&te.delete(r),!v.signal.aborted){n.next=19;break}return n.abrupt("return");case 19:if(!se.has(r)){n.next=22;break}return Qe(r,ct(void 0)),n.abrupt("return");case 22:if(!Xe(g)){n.next=32;break}if(!(re>x)){n.next=28;break}return Qe(r,ct(void 0)),n.abrupt("return");case 28:return ae.add(r),n.next=31,je(W,g);case 31:return n.abrupt("return");case 32:if(!Ve(g)){n.next=35;break}return et(r,o,g.error),n.abrupt("return");case 35:M(!Ke(g),"Unhandled fetcher deferred data"),Qe(r,ct(g.data));case 37:case"end":return n.stop()}}),n)}))),Le.apply(this,arguments)}function je(e,t,n){return De.apply(this,arguments)}function De(){return De=(0,l.Z)((0,i.Z)().mark((function t(o,a,l){var s,u,c,d,f,h,m,v,x,g,y,b,N,E;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=(s=void 0===l?{}:l).submission,c=s.fetcherSubmission,d=s.replace,a.revalidate&&(Q=!0),M(f=O(o.location,a.location,{_isRedirect:!0}),"Expected a location on the redirect navigation"),!r){t.next=10;break}if(h=!1,a.reloadDocument?h=!0:be.test(a.location)&&(m=e.history.createURL(a.location),h=m.origin!==n.location.origin||null==ee(m.pathname,p)),!h){t.next=10;break}return d?n.location.replace(a.location):n.location.assign(a.location),t.abrupt("return");case 10:if(G=null,v=!0===d?S.Replace:S.Push,x=o.navigation,g=x.formMethod,y=x.formAction,b=x.formEncType,!u&&!c&&g&&y&&b&&(u=at(o.navigation)),N=u||c,!(ve.has(a.status)&&N&&$e(N.formMethod))){t.next=20;break}return t.next=18,Ie(v,f,{submission:P({},N,{formAction:a.location}),preventScrollReset:K});case 18:t.next=23;break;case 20:return E=it(f,u),t.next=23,Ie(v,f,{overrideNavigation:E,fetcherSubmission:c,preventScrollReset:K});case 23:case"end":return t.stop()}}),t)}))),De.apply(this,arguments)}function We(e,t,n,r,o){return qe.apply(this,arguments)}function qe(){return qe=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,s){var u,c,f;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([].concat((0,A.Z)(a.map((function(e){return we("loader",s,e,o,d,t,p,h.v7_relativeSplatPath)}))),(0,A.Z)(l.map((function(n){return n.matches&&n.match&&n.controller?we("loader",Oe(e.history,n.path,n.controller.signal),n.match,n.matches,d,t,p,h.v7_relativeSplatPath):{type:T.error,error:ze(404,{pathname:n.path})}})))));case 2:return u=n.sent,c=u.slice(0,a.length),f=u.slice(a.length),n.next=7,Promise.all([Je(r,a,c,c.map((function(){return s.signal})),!1,W.loaderData),Je(r,l.map((function(e){return e.match})),f,l.map((function(e){return e.controller?e.controller.signal:null})),!0)]);case 7:return n.abrupt("return",{results:u,loaderResults:c,fetcherResults:f});case 8:case"end":return n.stop()}}),n)}))),qe.apply(this,arguments)}function Ye(){var e;Q=!0,(e=$).push.apply(e,(0,A.Z)(gt())),ie.forEach((function(e,t){te.has(t)&&(J.push(t),dt(t))}))}function Qe(e,t,n){void 0===n&&(n={}),W.fetchers.set(e,t),fe({fetchers:new Map(W.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function et(e,t,n,r){void 0===r&&(r={});var o=Be(W.matches,t);rt(e),fe({errors:(0,m.Z)({},o.route.id,n),fetchers:new Map(W.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function nt(e){return h.v7_fetcherPersist&&(le.set(e,(le.get(e)||0)+1),se.has(e)&&se.delete(e)),W.fetchers.get(e)||ge}function rt(e){var t=W.fetchers.get(e);!te.has(e)||t&&"loading"===t.state&&oe.has(e)||dt(e),ie.delete(e),oe.delete(e),ae.delete(e),se.delete(e),W.fetchers.delete(e)}function dt(e){var t=te.get(e);M(t,"Expected fetch controller: "+e),t.abort(),te.delete(e)}function ft(e){var t,n=(0,_.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=ct(nt(r).data);W.fetchers.set(r,o)}}catch(a){n.e(a)}finally{n.f()}}function pt(){var e,t=[],n=!1,r=(0,_.Z)(ae);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=W.fetchers.get(o);M(a,"Expected fetcher: "+o),"loading"===a.state&&(ae.delete(o),t.push(o),n=!0)}}catch(i){r.e(i)}finally{r.f()}return ft(t),n}function ht(e){var t,n=[],r=(0,_.Z)(oe);try{for(r.s();!(t=r.n()).done;){var o=(0,c.Z)(t.value,2),a=o[0];if(o[1]<e){var i=W.fetchers.get(a);M(i,"Expected fetcher: "+a),"loading"===i.state&&(dt(a),oe.delete(a),n.push(a))}}}catch(l){r.e(l)}finally{r.f()}return ft(n),n.length>0}function mt(e){W.blockers.delete(e),ce.delete(e)}function vt(e,t){var n=W.blockers.get(e)||ye;M("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);var r=new Map(W.blockers);r.set(e,t),fe({blockers:r})}function xt(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==ce.size){ce.size>1&&w(!1,"A router only supports one blocker at a time");var o=Array.from(ce.entries()),a=(0,c.Z)(o[o.length-1],2),i=a[0],l=a[1],s=W.blockers.get(i);if(!s||"proceeding"!==s.state)return l({currentLocation:t,nextLocation:n,historyAction:r})?i:void 0}}function gt(e){var t=[];return ue.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),ue.delete(r))})),t}function yt(e,t){if(y){var n=y(e,t.map((function(e){return function(e,t){var n=e.route,r=e.pathname,o=e.params;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}(e,W.loaderData)})));return n||e.key}return e.key}function bt(e,t){if(g&&b){var n=yt(e,t);g[n]=b()}}function Nt(e,t){if(g){var n=yt(e,t),r=g[n];if("number"===typeof r)return r}return null}return j={get basename(){return p},get future(){return h},get state(){return W},get routes(){return f},get window(){return n},initialize:function(){if(v=e.history.listen((function(t){var n=t.action,r=t.location,o=t.delta;if(!de){w(0===ce.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=xt({currentLocation:W.location,nextLocation:r,historyAction:n});return a&&null!=o?(de=!0,e.history.go(-1*o),void vt(a,{state:"blocked",location:r,proceed:function(){vt(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(o)},reset:function(){var e=new Map(W.blockers);e.set(a,ye),fe({blockers:e})}})):Ie(n,r)}de=!1})),r){!function(e,t){try{var n=e.sessionStorage.getItem(Ee);if(n)for(var r=JSON.parse(n),o=0,a=Object.entries(r||{});o<a.length;o++){var i=(0,c.Z)(a[o],2),l=i[0],s=i[1];s&&Array.isArray(s)&&t.set(l,new Set(s||[]))}}catch(u){}}(n,X);var t=function(){return function(e,t){if(t.size>0){var n,r={},o=(0,_.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=(0,c.Z)(n.value,2),i=a[0],l=a[1];r[i]=(0,A.Z)(l)}}catch(s){o.e(s)}finally{o.f()}try{e.sessionStorage.setItem(Ee,JSON.stringify(r))}catch(C){w(!1,"Failed to save applied view transitions in sessionStorage ("+C+").")}}}(n,X)};n.addEventListener("pagehide",t),q=function(){return n.removeEventListener("pagehide",t)}}return W.initialized||Ie(S.Pop,W.location,{initialHydration:!0}),j},subscribe:function(e){return x.add(e),function(){return x.delete(e)}},enableScrollRestoration:function(e,t,n){if(g=e,b=t,y=n||null,!N&&W.navigation===xe){N=!0;var r=Nt(W.location,W.matches);null!=r&&fe({restoreScrollPosition:r})}return function(){g=null,b=null,y=null}},navigate:he,fetch:function(e,t,n,r){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(e)&&dt(e);var a=!0===(r&&r.unstable_flushSync),i=s||f,l=Ce(W.location,W.matches,p,h.v7_prependBasename,n,h.v7_relativeSplatPath,t,null==r?void 0:r.relative),u=B(i,l,p);if(u){var c=Se(h.v7_normalizeFormMethod,!0,l,r),d=c.path,m=c.submission,v=c.error;if(v)et(e,t,v,{flushSync:a});else{var x=ot(u,d);K=!0===(r&&r.preventScrollReset),m&&$e(m.formMethod)?function(e,t,n,r,o,a,i){ke.apply(this,arguments)}(e,t,d,x,u,a,m):(ie.set(e,{routeId:t,path:d}),function(e,t,n,r,o,a,i){Le.apply(this,arguments)}(e,t,d,x,u,a,m))}}else et(e,t,ze(404,{pathname:l}),{flushSync:a})},revalidate:function(){Ye(),fe({revalidation:"loading"}),"submitting"!==W.navigation.state&&("idle"!==W.navigation.state?Ie(H||W.historyAction,W.navigation.location,{overrideNavigation:W.navigation}):Ie(W.historyAction,W.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:nt,deleteFetcher:function(e){if(h.v7_fetcherPersist){var t=(le.get(e)||0)-1;t<=0?(le.delete(e),se.add(e)):le.set(e,t)}else rt(e);fe({fetchers:new Map(W.fetchers)})},dispose:function(){v&&v(),q&&q(),x.clear(),G&&G.abort(),W.fetchers.forEach((function(e,t){return rt(t)})),W.blockers.forEach((function(e,t){return mt(t)}))},getBlocker:function(e,t){var n=W.blockers.get(e)||ye;return ce.get(e)!==t&&ce.set(e,t),n},deleteBlocker:mt,_internalFetchControllers:te,_internalActiveDeferreds:ue,_internalSetRoutes:function(e){s=F(e,t,void 0,d={})}},j}Symbol("deferred");function Ce(e,t,n,r,o,a,i,l){var s,u;if(i){s=[];var c,d=(0,_.Z)(t);try{for(d.s();!(c=d.n()).done;){var f=c.value;if(s.push(f),f.route.id===i){u=f;break}}}catch(h){d.e(h)}finally{d.f()}}else s=t,u=t[t.length-1];var p=re(o||".",function(e,t){var n=ne(e);return t?n.map((function(t,n){return n===e.length-1?t.pathname:t.pathnameBase})):n.map((function(e){return e.pathnameBase}))}(s,a),ee(e.pathname,n)||e.pathname,"path"===l);return null==o&&(p.search=e.search,p.hash=e.hash),null!=o&&""!==o&&"."!==o||!u||!u.route.index||rt(p.search)||(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(p.pathname="/"===p.pathname?n:oe([n,p.pathname])),L(p)}function Se(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Qe(r.formMethod))return{path:n,error:ze(405,{method:r.formMethod})};var o,a,i=function(){return{path:n,error:ze(400,{type:"invalid-body"})}},l=r.formMethod||"get",s=e?l.toUpperCase():l.toLowerCase(),u=We(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!$e(s))return i();var d="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((function(e,t){var n=(0,c.Z)(t,2);return""+e+n[0]+"="+n[1]+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}if("application/json"===r.formEncType){if(!$e(s))return i();try{var f="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch(m){return i()}}}if(M("function"===typeof FormData,"FormData is not available in this environment"),r.formData)o=Le(r.formData),a=r.formData;else if(r.body instanceof FormData)o=Le(r.body),a=r.body;else if(r.body instanceof URLSearchParams)a=je(o=r.body);else if(null==r.body)o=new URLSearchParams,a=new FormData;else try{a=je(o=new URLSearchParams(r.body))}catch(m){return i()}var p={formMethod:s,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if($e(p.formMethod))return{path:n,submission:p};var h=j(n);return t&&h.search&&rt(h.search)&&o.append("index",""),h.search="?"+o,{path:L(h),submission:p}}function _e(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function Ae(e,t,n,r,o,a,i,l,s,u,c,d,f,p,h,m){var v=m?Object.values(m)[0]:h?Object.values(h)[0]:void 0,x=e.createURL(t.location),g=e.createURL(o),y=m?Object.keys(m)[0]:void 0,b=_e(n,y).filter((function(e,n){if(a)return function(e,t){if(!t.loader)return!1;if(t.loader.hydrate)return!0;return void 0===e.loaderData[t.id]&&(!e.errors||void 0===e.errors[t.id])}(t,e.route);if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,o=void 0===e[n.route.id];return r||o}(t.loaderData,t.matches[n],e)||l.some((function(t){return t===e.route.id})))return!0;var o=t.matches[n],s=e;return Te(e,P({currentUrl:x,currentParams:o.params,nextUrl:g,nextParams:s.params},r,{actionResult:v,defaultShouldRevalidate:i||x.pathname+x.search===g.pathname+g.search||x.search!==g.search||Pe(o,s)}))})),N=[];return c.forEach((function(e,o){if(!a&&n.some((function(t){return t.route.id===e.routeId}))&&!u.has(o)){var l=B(f,e.path,p);if(l){var c=t.fetchers.get(o),h=ot(l,e.path);!d.has(o)&&(!!s.includes(o)||(c&&"idle"!==c.state&&void 0===c.data?i:Te(h,P({currentUrl:x,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:i}))))&&N.push({key:o,routeId:e.routeId,path:e.path,matches:l,match:h,controller:new AbortController})}else N.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null})}})),[b,N]}function Pe(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Te(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Re(e,t,n){return Me.apply(this,arguments)}function Me(){return Me=(0,l.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,l,s,u,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.lazy();case 4:if(o=e.sent,t.lazy){e.next=7;break}return e.abrupt("return");case 7:for(s in M(a=r[t.id],"No route found in manifest"),l={},o)u=a[s],w(!(c=void 0!==u&&"hasErrorBoundary"!==s),'Route "'+a.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),c||Z.has(s)||(l[s]=o[s]);Object.assign(a,l),Object.assign(a,P({},n(a),{lazy:void 0}));case 13:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function we(e,t,n,r,o,a,i,l,s){return ke.apply(this,arguments)}function ke(){return ke=(0,l.Z)((0,i.Z)().mark((function e(t,n,r,o,a,l,s,u,c){var d,f,p,h,m,v,x,g,y,b,N,E,I,C,S,_,A,P,R;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c&&(c={}),h=function(e){var t,o=new Promise((function(e,n){return t=n}));return p=function(){return t()},n.signal.addEventListener("abort",p),Promise.race([e({request:n,params:r.params,context:c.requestContext}),o])},e.prev=2,m=r.route[t],!r.route.lazy){e.next=32;break}if(!m){e.next=14;break}return e.next=8,Promise.all([h(m).catch((function(e){v=e})),Re(r.route,l,a)]);case 8:if(x=e.sent,!v){e.next=11;break}throw v;case 11:f=x[0],e.next=30;break;case 14:return e.next=16,Re(r.route,l,a);case 16:if(!(m=r.route[t])){e.next=23;break}return e.next=20,h(m);case 20:f=e.sent,e.next=30;break;case 23:if("action"!==t){e.next=29;break}throw g=new URL(n.url),y=g.pathname+g.search,ze(405,{method:n.method,pathname:y,routeId:r.route.id});case 29:return e.abrupt("return",{type:T.data,data:void 0});case 30:e.next=41;break;case 32:if(m){e.next=38;break}throw b=new URL(n.url),ze(404,{pathname:b.pathname+b.search});case 38:return e.next=40,h(m);case 40:f=e.sent;case 41:M(void 0!==f,"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(2),d=T.error,f=e.t0;case 48:return e.prev=48,p&&n.signal.removeEventListener("abort",p),e.finish(48);case 51:if(!Ye(f)){e.next=83;break}if(N=f.status,!me.has(N)){e.next=61;break}if(M(E=f.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),be.test(E)?c.isStaticRequest||(I=new URL(n.url),C=E.startsWith("//")?new URL(I.protocol+E):new URL(E),S=null!=ee(C.pathname,s),C.origin===I.origin&&S&&(E=C.pathname+C.search+C.hash)):E=Ce(new URL(n.url),o.slice(0,o.indexOf(r)+1),s,!0,E,u),!c.isStaticRequest){e.next=60;break}throw f.headers.set("Location",E),f;case 60:return e.abrupt("return",{type:T.redirect,status:N,location:E,revalidate:null!==f.headers.get("X-Remix-Revalidate"),reloadDocument:null!==f.headers.get("X-Remix-Reload-Document")});case 61:if(!c.isRouteRequest){e.next=64;break}throw{type:d===T.error?T.error:T.data,response:f};case 64:if(e.prev=64,!(A=f.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(A)){e.next=72;break}return e.next=69,f.json();case 69:_=e.sent,e.next=75;break;case 72:return e.next=74,f.text();case 74:_=e.sent;case 75:e.next=80;break;case 77:return e.prev=77,e.t1=e.catch(64),e.abrupt("return",{type:T.error,error:e.t1});case 80:if(d!==T.error){e.next=82;break}return e.abrupt("return",{type:d,error:new ue(N,f.statusText,_),headers:f.headers});case 82:return e.abrupt("return",{type:T.data,data:_,statusCode:f.status,headers:f.headers});case 83:if(d!==T.error){e.next=85;break}return e.abrupt("return",{type:d,error:f});case 85:if(!qe(f)){e.next=87;break}return e.abrupt("return",{type:T.deferred,deferredData:f,statusCode:null==(P=f.init)?void 0:P.status,headers:(null==(R=f.init)?void 0:R.headers)&&new Headers(f.init.headers)});case 87:return e.abrupt("return",{type:T.data,data:f});case 88:case"end":return e.stop()}}),e,null,[[2,44,48,51],[64,77]])}))),ke.apply(this,arguments)}function Oe(e,t,n,r){var o=e.createURL(We(t)).toString(),a={signal:n};if(r&&$e(r.formMethod)){var i=r.formMethod,l=r.formEncType;a.method=i.toUpperCase(),"application/json"===l?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):"text/plain"===l?a.body=r.text:"application/x-www-form-urlencoded"===l&&r.formData?a.body=Le(r.formData):a.body=r.formData}return new Request(o,a)}function Le(e){var t,n=new URLSearchParams,r=(0,_.Z)(e.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,c.Z)(t.value,2),a=o[0],i=o[1];n.append(a,"string"===typeof i?i:i.name)}}catch(l){r.e(l)}finally{r.f()}return n}function je(e){var t,n=new FormData,r=(0,_.Z)(e.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,c.Z)(t.value,2),a=o[0],i=o[1];n.append(a,i)}}catch(l){r.e(l)}finally{r.f()}return n}function De(e,t,n,r,o){var a,i={},l=null,s=!1,u={};return n.forEach((function(n,c){var d=t[c].route.id;if(M(!Xe(n),"Cannot handle redirect results in processLoaderData"),Ve(n)){var f=Be(e,d),p=n.error;r&&(p=Object.values(r)[0],r=void 0),null==(l=l||{})[f.route.id]&&(l[f.route.id]=p),i[d]=void 0,s||(s=!0,a=ce(n.error)?n.error.status:500),n.headers&&(u[d]=n.headers)}else Ke(n)?(o.set(d,n.deferredData),i[d]=n.deferredData.data):i[d]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(u[d]=n.headers)})),r&&(l=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:l,statusCode:a||200,loaderHeaders:u}}function Ze(e,t,n,r,o,a,i,l){for(var s=De(t,n,r,o,l),u=s.loaderData,c=s.errors,d=0;d<a.length;d++){var f=a[d],p=f.key,h=f.match,v=f.controller;M(void 0!==i&&void 0!==i[d],"Did not find corresponding fetcher result");var x=i[d];if(!v||!v.signal.aborted)if(Ve(x)){var g=Be(e.matches,null==h?void 0:h.route.id);c&&c[g.route.id]||(c=P({},c,(0,m.Z)({},g.route.id,x.error))),e.fetchers.delete(p)}else if(Xe(x))M(!1,"Unhandled fetcher revalidation redirect");else if(Ke(x))M(!1,"Unhandled fetcher deferred data");else{var y=ct(x.data);e.fetchers.set(p,y)}}return{loaderData:u,errors:c}}function Fe(e,t,n,r){var o,a=P({},t),i=(0,_.Z)(n);try{for(i.s();!(o=i.n()).done;){var l=o.value,s=l.route.id;if(t.hasOwnProperty(s)?void 0!==t[s]&&(a[s]=t[s]):void 0!==e[s]&&l.route.loader&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(u){i.e(u)}finally{i.f()}return a}function Be(e,t){return(t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):(0,A.Z)(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Ue(e){var t=1===e.length?e[0]:e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ze(e,t){var n=void 0===t?{}:t,r=n.pathname,o=n.routeId,a=n.method,i=n.type,l="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(l="Bad Request",a&&r&&o?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+o+'", so there is no way to handle the request.':"defer-action"===i?s="defer() is not supported in actions":"invalid-body"===i&&(s="Unable to encode submission body")):403===e?(l="Forbidden",s='Route "'+o+'" does not match URL "'+r+'"'):404===e?(l="Not Found",s='No route matches URL "'+r+'"'):405===e&&(l="Method Not Allowed",a&&r&&o?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+o+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new ue(e||500,l,new Error(s),!0)}function Ge(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(Xe(n))return{result:n,idx:t}}}function We(e){return L(P({},"string"===typeof e?j(e):e,{hash:""}))}function He(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}function Ke(e){return e.type===T.deferred}function Ve(e){return e.type===T.error}function Xe(e){return(e&&e.type)===T.redirect}function qe(e){var t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}function Ye(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Qe(e){return he.has(e.toLowerCase())}function $e(e){return fe.has(e.toLowerCase())}function Je(e,t,n,r,o,a){return et.apply(this,arguments)}function et(){return(et=(0,l.Z)((0,i.Z)().mark((function e(t,n,r,o,a,l){var s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,i.Z)().mark((function e(s){var u,c,d,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r[s],c=n[s]){e.next=4;break}return e.abrupt("return","continue");case 4:if(d=t.find((function(e){return e.route.id===c.route.id})),f=null!=d&&!Pe(d,c)&&void 0!==(l&&l[c.route.id]),!Ke(u)||!a&&!f){e.next=11;break}return M(p=o[s],"Expected an AbortSignal for revalidating fetcher deferred result"),e.next=11,tt(u,p,a).then((function(e){e&&(r[s]=e||r[s])}));case 11:case"end":return e.stop()}}),e)})),u=0;case 2:if(!(u<r.length)){e.next=10;break}return e.delegateYield(s(u),"t0",4);case 4:if("continue"!==e.t0){e.next=7;break}return e.abrupt("continue",7);case 7:u++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t,n){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:T.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:T.error,error:e.t0});case 14:return e.abrupt("return",{type:T.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])})))).apply(this,arguments)}function rt(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function ot(e,t){var n="string"===typeof t?j(t).search:t.search;if(e[e.length-1].route.index&&rt(n||""))return e[e.length-1];var r=ne(e);return r[r.length-1]}function at(e){var t=e.formMethod,n=e.formAction,r=e.formEncType,o=e.text,a=e.formData,i=e.json;if(t&&n&&r)return null!=o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}:void 0}function it(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lt(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function st(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ut(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ct(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}var ft=e.createContext(null);var pt=e.createContext(null);var ht=e.createContext(null);var mt=e.createContext(null);var vt=e.createContext(null);var xt=e.createContext({outlet:null,matches:[],isDataRoute:!1});var gt=e.createContext(null);function yt(){return null!=e.useContext(vt)}function bt(){return yt()||M(!1),e.useContext(vt).location}function Nt(t,n,r,o){yt()||M(!1);var a,i=e.useContext(mt).navigator,l=e.useContext(xt).matches,s=l[l.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),d=(s&&s.route,bt());if(n){var f,p="string"===typeof n?j(n):n;"/"===c||(null==(f=p.pathname)?void 0:f.startsWith(c))||M(!1),a=p}else a=d;var h=a.pathname||"/",m=B(t,{pathname:"/"===c?h:h.slice(c.length)||"/"});var v=_t(m&&m.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:oe([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:oe([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),l,r,o);return n&&v?e.createElement(vt.Provider,{value:{location:dt({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:S.Pop}},v):v}function Et(){var t=function(){var t,n=e.useContext(gt),r=Pt(At.UseRouteError),o=Tt(At.UseRouteError);if(void 0!==n)return n;return null==(t=r.errors)?void 0:t[o]}(),n=ce(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var It=e.createElement(Et,null),Ct=function(t){(0,p.Z)(r,t);var n=(0,h.Z)(r);function r(e){var t;return(0,u.Z)(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,s.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return void 0!==this.state.error?e.createElement(xt.Provider,{value:this.props.routeContext},e.createElement(gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function St(t){var n=t.routeContext,r=t.match,o=t.children,a=e.useContext(ft);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(xt.Provider,{value:n},o)}function _t(t,n,r,o){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==t){var i;if(null==(i=r)||!i.errors)return null;t=r.matches}var l=t,s=null==(a=r)?void 0:a.errors;if(null!=s){var u=l.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||M(!1),l=l.slice(0,Math.min(l.length,u+1))}var c=!1,d=-1;if(r&&o&&o.v7_partialHydration)for(var f=0;f<l.length;f++){var p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.loader&&p.route.id&&void 0===r.loaderData[p.route.id]&&(!r.errors||void 0===r.errors[p.route.id])){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}return l.reduceRight((function(t,o,a){var i,u,f=!1,p=null,h=null;r&&(i=s&&o.route.id?s[o.route.id]:void 0,p=o.route.errorElement||It,c&&(d<0&&0===a?(u="route-fallback",!1||Rt[u]||(Rt[u]=!0),f=!0,h=null):d===a&&(f=!0,h=o.route.hydrateFallbackElement||null)));var m=n.concat(l.slice(0,a+1)),v=function(){var n;return n=i?p:f?h:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:t,e.createElement(St,{match:o,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===a)?e.createElement(Ct,{location:r.location,revalidation:r.revalidation,component:p,error:i,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()}),null)}var At=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(At||{});function Pt(t){var n=e.useContext(pt);return n||M(!1),n}function Tt(t){var n=function(t){var n=e.useContext(xt);return n||M(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||M(!1),r.route.id}var Rt={};t.startTransition;function Mt(t){var n=t.basename,r=void 0===n?"/":n,o=t.children,a=void 0===o?null:o,i=t.location,l=t.navigationType,s=void 0===l?S.Pop:l,u=t.navigator,c=t.static,d=void 0!==c&&c,f=t.future;yt()&&M(!1);var p=r.replace(/^\/*/,"/"),h=e.useMemo((function(){return{basename:p,navigator:u,static:d,future:dt({v7_relativeSplatPath:!1},f)}}),[p,f,u,d]);"string"===typeof i&&(i=j(i));var m=i,v=m.pathname,x=void 0===v?"/":v,g=m.search,y=void 0===g?"":g,b=m.hash,N=void 0===b?"":b,E=m.state,I=void 0===E?null:E,C=m.key,_=void 0===C?"default":C,A=e.useMemo((function(){var e=ee(x,p);return null==e?null:{location:{pathname:e,search:y,hash:N,state:I,key:_},navigationType:s}}),[p,x,y,N,I,_,s]);return null==A?null:e.createElement(mt.Provider,{value:h},e.createElement(vt.Provider,{children:a,value:A}))}var wt=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(wt||{}),kt=new Promise((function(){}));e.Component;function Ot(t){var n={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(n,{element:e.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(n,{hydrateFallbackElement:e.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(n,{errorElement:e.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),n}function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lt.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Lt({},t,{errors:Dt(t.errors)})),t}function Dt(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var o=(0,c.Z)(r[n],2),a=o[0],i=o[1];if(i&&"RouteErrorResponse"===i.__type)t[a]=new ue(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){var l=window[i.__subType];if("function"===typeof l)try{var s=new l(i.message);s.stack="",t[a]=s}catch(d){}}if(null==t[a]){var u=new Error(i.message);u.stack="",t[a]=u}}else t[a]=i}return t}var Zt=e.createContext({isTransitioning:!1});var Ft=e.createContext(new Map);var Bt=t.startTransition,Ut=f.flushSync;function zt(e){Ut?Ut(e):e()}var Gt=(0,s.Z)((function e(){var t=this;(0,u.Z)(this,e),this.status="pending",this.promise=new Promise((function(e,n){t.resolve=function(n){"pending"===t.status&&(t.status="resolved",e(n))},t.reject=function(e){"pending"===t.status&&(t.status="rejected",n(e))}}))}));function Wt(t){var n=t.fallbackElement,r=t.router,o=t.future,a=e.useState(r.state),s=(0,c.Z)(a,2),u=s[0],d=s[1],f=e.useState(),p=(0,c.Z)(f,2),h=p[0],m=p[1],v=e.useState({isTransitioning:!1}),x=(0,c.Z)(v,2),g=x[0],y=x[1],b=e.useState(),N=(0,c.Z)(b,2),E=N[0],I=N[1],C=e.useState(),S=(0,c.Z)(C,2),_=S[0],A=S[1],P=e.useState(),T=(0,c.Z)(P,2),R=T[0],M=T[1],w=e.useRef(new Map),k=(o||{}).v7_startTransition,O=e.useCallback((function(e){k?function(e){Bt?Bt(e):e()}(e):e()}),[k]),L=e.useCallback((function(e,t){var n=t.deletedFetchers,o=t.unstable_flushSync,a=t.unstable_viewTransitionOpts;n.forEach((function(e){return w.current.delete(e)})),e.fetchers.forEach((function(e,t){void 0!==e.data&&w.current.set(t,e.data)}));var i=null==r.window||"function"!==typeof r.window.document.startViewTransition;if(a&&!i){if(o){zt((function(){_&&(E&&E.resolve(),_.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));var l=r.window.document.startViewTransition((function(){zt((function(){return d(e)}))}));return l.finished.finally((function(){zt((function(){I(void 0),A(void 0),m(void 0),y({isTransitioning:!1})}))})),void zt((function(){return A(l)}))}_?(E&&E.resolve(),_.skipTransition(),M({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(m(e),y({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else o?zt((function(){return d(e)})):O((function(){return d(e)}))}),[r.window,_,E,w,O]);e.useLayoutEffect((function(){return r.subscribe(L)}),[r,L]),e.useEffect((function(){g.isTransitioning&&!g.flushSync&&I(new Gt)}),[g]),e.useEffect((function(){if(E&&h&&r.window){var e=h,t=E.promise,n=r.window.document.startViewTransition((0,l.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O((function(){return d(e)})),n.next=3,t;case 3:case"end":return n.stop()}}),n)}))));n.finished.finally((function(){I(void 0),A(void 0),m(void 0),y({isTransitioning:!1})})),A(n)}}),[O,h,E,r.window]),e.useEffect((function(){E&&h&&u.location.key===h.location.key&&E.resolve()}),[E,_,u.location,h]),e.useEffect((function(){!g.isTransitioning&&R&&(m(R.state),y({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),M(void 0))}),[g.isTransitioning,R]),e.useEffect((function(){}),[]);var j=e.useMemo((function(){return{createHref:r.createHref,encodeLocation:r.encodeLocation,go:function(e){return r.navigate(e)},push:function(e,t,n){return r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})},replace:function(e,t,n){return r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})}}}),[r]),D=r.basename||"/",Z=e.useMemo((function(){return{router:r,navigator:j,static:!1,basename:D}}),[r,j,D]);return e.createElement(e.Fragment,null,e.createElement(ft.Provider,{value:Z},e.createElement(pt.Provider,{value:u},e.createElement(Ft.Provider,{value:w.current},e.createElement(Zt.Provider,{value:g},e.createElement(Mt,{basename:D,location:u.location,navigationType:u.historyAction,navigator:j,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},u.initialized||r.future.v7_partialHydration?e.createElement(Ht,{routes:r.routes,future:r.future,state:u}):n))))),null)}function Ht(e){var t=e.routes,n=e.future;return Nt(t,void 0,e.state,n)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Kt,Vt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kt||(Kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Vt||(Vt={}));var Xt=n(7587),qt=n(6902),Yt=n(1959),Qt=n(6088),$t=n(184),Jt="".concat(null!=="."?".":"","/docs/documentation.json"),en={tip:"Tip",info:"Info",warning:"Warning"},tn={tip:"docs-note--tip",info:"docs-note--info",warning:"docs-note--warning"};function nn(t){var n=function(e){for(var t,n=[],r=/(`[^`]+`|\*\*[^*]+\*\*|\*[^*]+\*)/g,o=0;null!==(t=r.exec(e));){t.index>o&&n.push({kind:"text",value:e.slice(o,t.index)});var a=t[0];a.startsWith("`")?n.push({kind:"code",value:a.slice(1,-1)}):a.startsWith("**")?n.push({kind:"strong",value:a.slice(2,-2)}):a.startsWith("*")&&n.push({kind:"em",value:a.slice(1,-1)}),o=r.lastIndex}return o<e.length&&n.push({kind:"text",value:e.slice(o)}),n.filter((function(e){return e.value.length>0}))}(t);return 0===n.length?t:n.map((function(t,n){switch(t.kind){case"code":return(0,$t.jsx)("code",{className:"docs-inline-code",children:t.value},n);case"strong":return(0,$t.jsx)("strong",{className:"docs-strong",children:t.value},n);case"em":return(0,$t.jsx)("em",{className:"docs-emphasis",children:t.value},n);default:return(0,$t.jsx)(e.Fragment,{children:t.value},n)}}))}function rn(e){if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:"))return e;var t=null!=="."?".":"",n=e.startsWith("/")?e:"/".concat(e);if(!t)return n;var r=t.endsWith("/")?"":"/";return"".concat(t).concat(r).concat(n.replace(/^\/+/,""))}function on(e){switch(e){case"sm":return" docs-image--sm";case"md":return" docs-image--md";case"lg":return" docs-image--lg";case"full":return" docs-image--full";default:return""}}function an(e,t){switch(e.type){case"paragraph":return(0,$t.jsx)("p",{className:"docs-paragraph",children:nn(e.text)},t);case"list":var n="ordered"===e.style?"ol":"ul";return(0,$t.jsx)(n,{className:"docs-list",children:e.items.map((function(e,t){return(0,$t.jsx)("li",{children:nn(e)},t)}))},t);case"note":return(0,$t.jsxs)("div",{className:"docs-note ".concat(tn[e.variant]),children:[(0,$t.jsx)("span",{className:"docs-note__label",children:en[e.variant]}),(0,$t.jsx)("span",{className:"docs-note__content",children:nn(e.text)})]},t);case"table":return(0,$t.jsx)("div",{className:"docs-table-wrapper",children:(0,$t.jsxs)("table",{className:"docs-table",children:[(0,$t.jsx)("thead",{children:(0,$t.jsx)("tr",{children:e.headers.map((function(e,t){return(0,$t.jsx)("th",{children:nn(e)},t)}))})}),(0,$t.jsx)("tbody",{children:e.rows.map((function(e,t){return(0,$t.jsx)("tr",{children:e.map((function(e,t){return(0,$t.jsx)("td",{children:nn(e)},t)}))},t)}))})]})},t);case"image":return(0,$t.jsxs)("figure",{className:"docs-image".concat(on(e.width)),children:[(0,$t.jsx)("img",{src:rn(e.src),alt:e.alt,loading:"lazy"}),e.caption?(0,$t.jsx)("figcaption",{className:"docs-image__caption",children:nn(e.caption)}):null]},t);default:return null}}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e.flatMap((function(e){var r={id:e.id,title:e.title,level:n,ancestors:t},o=[].concat((0,A.Z)(t),[e.id]),a=Math.min(n+1,6),i=e.subsections?ln(e.subsections,o,a):[];return[r].concat((0,A.Z)(i))}))}function sn(e){return e.flatMap((function(e){return[e.id].concat((0,A.Z)(e.subsections?sn(e.subsections):[]))}))}var un=function(){var t,n=(0,e.useState)({status:"loading"}),r=(0,c.Z)(n,2),o=r[0],a=r[1],s=(0,e.useState)(new Set),u=(0,c.Z)(s,2),d=u[0],f=u[1];(0,e.useEffect)((function(){var e=new AbortController;function t(){return(t=(0,l.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(Jt,{signal:e.signal});case 3:if((n=t.sent).ok){t.next=6;break}throw new Error("Failed to load documentation (status ".concat(n.status,")"));case 6:return t.next=8,n.json();case 8:r=t.sent,a({status:"ready",docs:r}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(0),"AbortError"!==t.t0.name){t.next=16;break}return t.abrupt("return");case 16:a({status:"error",message:t.t0 instanceof Error?t.t0.message:"Unable to load documentation. Please try again later."});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.abort()}}),[]),(0,e.useEffect)((function(){"ready"===o.status&&f(new Set(sn(o.docs.sections)))}),[o]),(0,e.useEffect)((function(){"ready"===o.status&&o.docs.title&&(document.title="".concat(o.docs.title," | Documentation"))}),[o]);var p=(0,e.useMemo)((function(){return"ready"!==o.status?[]:ln(o.docs.sections)}),[o]),h=(0,e.useCallback)((function(e){f((function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),m=(0,e.useCallback)((function(e,t){e.preventDefault(),f((function(e){var n=new Set(e);return t.ancestors.forEach((function(e){return n.add(e)})),n.add(t.id),n}));var n="".concat("#/docs","?section=").concat(t.id);window.location.hash!==n&&(window.location.hash=n);var r,o=document.getElementById(t.id);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),null===(r=o.focus)||void 0===r||r.call(o))}),[]),v=(0,e.useCallback)((function(e){var t,n,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=Math.min(a,6),l="h".concat(i);if(a>2)return(0,$t.jsxs)("article",{id:e.id,className:"docs-subsection",children:[(0,$t.jsx)(l,{className:"docs-subsection__heading",children:e.title}),e.summary?(0,$t.jsx)("p",{className:"docs-subsection__summary",children:nn(e.summary)}):null,null===(r=e.content)||void 0===r?void 0:r.map((function(t,n){return an(t,"".concat(e.id,"-block-").concat(n))})),null!==(o=e.subsections)&&void 0!==o&&o.length?e.subsections.map((function(e){return v(e,a+1)})):null]},e.id);var s=d.has(e.id),u="".concat(e.id,"-content");return(0,$t.jsxs)("section",{id:e.id,className:"docs-section".concat(s?"":" docs-section--collapsed"),children:[(0,$t.jsxs)("header",{className:"docs-section__header",children:[(0,$t.jsx)(l,{className:"docs-section__heading",children:(0,$t.jsxs)("button",{type:"button",className:"docs-section__toggle",onClick:function(){return h(e.id)},"aria-expanded":s,"aria-controls":u,children:[(0,$t.jsx)("span",{className:"docs-section__chevron","aria-hidden":"true",children:"\u25be"}),(0,$t.jsx)("span",{children:e.title})]})}),e.summary?(0,$t.jsx)("p",{className:"docs-section__summary",children:nn(e.summary)}):null]}),(0,$t.jsxs)("div",{className:"docs-section__body",id:u,hidden:!s,children:[null===(t=e.content)||void 0===t?void 0:t.map((function(t,n){return an(t,"".concat(e.id,"-block-").concat(n))})),null!==(n=e.subsections)&&void 0!==n&&n.length?e.subsections.map((function(e){return v(e,a+1)})):null]})]},e.id)}),[d,h]);if("loading"===o.status)return(0,$t.jsx)("main",{className:"docs-page docs-page--centered",children:(0,$t.jsxs)("div",{className:"docs-status",children:[(0,$t.jsx)("span",{className:"docs-status__spinner","aria-hidden":!0,children:"\u25cf"}),(0,$t.jsx)("span",{className:"docs-status__label",children:"Loading documentation\u2026"})]})});if("error"===o.status)return(0,$t.jsx)("main",{className:"docs-page docs-page--centered",children:(0,$t.jsx)("div",{className:"docs-status docs-status--error",children:(0,$t.jsx)("span",{className:"docs-status__label",children:o.message})})});var x=o.docs;return(0,$t.jsxs)("main",{className:"docs-page",children:[(0,$t.jsxs)("aside",{className:"docs-page__toc","aria-label":"Table of contents",children:[(0,$t.jsxs)("div",{className:"docs-page__toc-header",children:[(0,$t.jsxs)("div",{className:"docs-page__toc-title-row",children:[(0,$t.jsx)("h1",{children:x.title}),(0,$t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,$t.jsx)(Yt.z,{label:"",variant:"secondary",icon:(0,$t.jsx)(Qt.Z,{size:12}),hint:"Close docs",onClick:function(){window.location.hash="#/"}}),(0,$t.jsx)(qt.Z,{className:"docs-theme-toggle"})]})]}),(0,$t.jsxs)("dl",{className:"docs-meta",children:[x.version?(0,$t.jsxs)("div",{children:[(0,$t.jsx)("dt",{children:"Version"}),(0,$t.jsx)("dd",{children:x.version})]}):null,x.lastUpdated?(0,$t.jsxs)("div",{children:[(0,$t.jsx)("dt",{children:"Last updated"}),(0,$t.jsx)("dd",{children:x.lastUpdated})]}):null]})]}),(0,$t.jsx)("nav",{className:"docs-toc-nav",children:(0,$t.jsx)("ol",{children:p.map((function(e){return(0,$t.jsx)("li",{"data-level":e.level,children:(0,$t.jsx)("a",{href:"#/docs?section=".concat(e.id),onClick:function(t){return m(t,e)},className:"docs-toc-link",style:{paddingLeft:"".concat(12*(e.level-2),"px")},children:e.title})},e.id)}))})})]}),(0,$t.jsxs)("div",{className:"docs-page__content",children:[x.sections.map((function(e){return v(e)})),null!==(t=x.resources)&&void 0!==t&&t.length?(0,$t.jsxs)("section",{id:"resources",className:"docs-section docs-section--resources",children:[(0,$t.jsx)("header",{className:"docs-section__header",children:(0,$t.jsx)("h2",{children:"Resources"})}),(0,$t.jsx)("ul",{className:"docs-resources",children:x.resources.map((function(e){return(0,$t.jsxs)("li",{children:[(0,$t.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.label}),e.description?(0,$t.jsx)("p",{children:nn(e.description)}):null]},e.url)}))})]}):null]})]})},cn=function(){return(0,$t.jsx)(Xt.f6,{children:(0,$t.jsx)(un,{})})},dn=["","/Exornata","/exornata","/XRNA-React","/xrna-react"],fn=function(e,t){return e?t&&"/"!==t?"".concat(e).concat(t):e:t||"/"},pn=function(e,t){return Ie({basename:null==t?void 0:t.basename,future:Lt({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),D((function(e,t){var n=j(e.location.hash.substr(1)),r=n.pathname,o=void 0===r?"/":r,a=n.search,i=void 0===a?"":a,l=n.hash,s=void 0===l?"":l;return o.startsWith("/")||o.startsWith(".")||(o="/"+o),O("",{pathname:o,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var o=e.location.href,a=o.indexOf("#");r=-1===a?o:o.slice(0,a)}return r+"#"+("string"===typeof t?t:L(t))}),(function(e,t){w("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||jt(),routes:e,mapRouteProperties:Ot,window:null==t?void 0:t.window}).initialize();var n}(dn.flatMap((function(e){return[{path:fn(e,"/"),element:(0,$t.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!0})},{path:fn(e,"/main"),element:(0,$t.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!1})},{path:fn(e,"/main/*"),element:(0,$t.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!1})},{path:fn(e,"/docs"),element:(0,$t.jsx)(cn,{})}]}))),hn=r.createRoot(document.getElementById("root")),mn=function(){var e=window.location.pathname;return e.length>1&&e.endsWith("/")?e.slice(0,-1):e||"/"}(),vn=null!=="."?".":"",xn=vn.endsWith("/")?vn.slice(0,-1):vn,gn=new Set(dn.map((function(e){return fn(e,"/docs")})));if(xn){var yn=xn.startsWith("http")?function(){try{return new URL(xn).pathname}catch(e){return""}}():xn,bn=yn.length>1&&yn.endsWith("/")?yn.slice(0,-1):yn;bn&&"/"!==bn&&gn.add("".concat(bn,"/docs"))}hn.render((0,$t.jsx)(e.StrictMode,{children:gn.has(mn)?(0,$t.jsx)(cn,{}):(0,$t.jsx)(Wt,{router:pn})})),a()}()}();
//# sourceMappingURL=main.6293234d.js.map