/*! For license information please see main.de318431.js.LICENSE.txt */
!function(){var e={9634:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return nn},BASE_PAIR_CLASS_NAME:function(){return vn},HTML_ELEMENT_ID_DELIMITER:function(){return yn},LABEL_CLASS_NAME:function(){return xn},LEFT_PANEL_WIDTH:function(){return Yt},MARGIN_LEFT:function(){return hn},MOUSE_OVER_TEXT_HTML_ID:function(){return ln},NO_STROKE_CLASS_NAME:function(){return gn},NUCLEOTIDE_CLASS_NAME:function(){return mn},PARENT_DIV_HTML_ID:function(){return rn},SVG_BACKGROUND_HTML_ID:function(){return fn},SVG_ELEMENT_HTML_ID:function(){return on},SVG_SCENE_GROUP_HTML_ID:function(){return pn},TEST_SPACE_ID:function(){return an},VIEWPORT_SCALE_GROUP_0_HTML_ID:function(){return sn},VIEWPORT_SCALE_GROUP_1_HTML_ID:function(){return cn},VIEWPORT_TRANSLATE_GROUP_0_HTML_ID:function(){return un},VIEWPORT_TRANSLATE_GROUP_1_HTML_ID:function(){return dn},default:function(){return En}});var r=n(4165),o=n(5861),a=n(1413),i=n(3433),l=n(4942),s=n(9439),c=n(7762),u=n(2791),d=n(4212),f=n(7361),p=n(4164),h=n(8573),m=n.n(h),v=n(3038),x=n.n(v),g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g(e,t)};function y(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)};function N(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var E=function(e,t,n,r){switch(t){case"debounce":return m()(e,n,r);case"throttle":return x()(e,n,r);default:return e}},C=function(e){return"function"===typeof e},I=function(){return"undefined"===typeof window},S=function(e){return e instanceof Element||e instanceof HTMLDocument},_=function(e,t,n,r){return function(o){var a=o.width,i=o.height;t((function(t){return t.width===a&&t.height===i||t.width===a&&!r||t.height===i&&!n?t:(null===e||void 0===e||e(a,i),{width:a,height:i})}))}};!function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!I()){t&&t.current&&(n.targetRef.current=t.current);var o=n.getElement();o&&(n.observableElement&&n.observableElement===o||(n.observableElement=o,n.resizeObserver.observe(o,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(I())return null;if(t)return document.querySelector(t);if(r&&S(r))return r;if(n.targetRef&&S(n.targetRef.current))return n.targetRef.current;var o=(0,p.findDOMNode)(n);if(!o)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,o=void 0===r||r,a=t.handleHeight,i=void 0===a||a,l=t.onResize;if(o||i){var s=_(l,n.setState.bind(n),o,i);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,o=t.height;!n.skipOnMount&&!I()&&s({width:r,height:o}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,r=e.children;return C(t)?"renderProp":C(r)?"childFunction":(0,u.isValidElement)(r)?"child":Array.isArray(r)?"childArray":"parent"};var r=t.skipOnMount,o=t.refreshMode,a=t.refreshRate,i=void 0===a?1e3:a,l=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=r,n.targetRef=(0,u.createRef)(),n.observableElement=null,I()||(n.resizeHandler=E(n.createResizeHandler,o,i,l),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}y(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){I()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e=this.props,t=e.render,n=e.children,r=e.nodeType,o=void 0===r?"div":r,a=this.state,i={width:a.width,height:a.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return null===t||void 0===t?void 0:t(i);case"childFunction":return null===n||void 0===n?void 0:n(i);case"child":var l=n;if(l.type&&"string"===typeof l.type){var s=N(i,["targetRef"]);return(0,u.cloneElement)(l,s)}return(0,u.cloneElement)(l,i);case"childArray":return n.map((function(e){return!!e&&(0,u.cloneElement)(e,i)}));default:return u.createElement(o,null)}}}(u.PureComponent);var A=I()?u.useEffect:u.useLayoutEffect;var T=n(7744),P=n(7084),R=n(7089),k=n(3871),w=n(433),M=n(6176);var O=n(9287),j=1.2;var L=n(6745),D=n(1579);var Z,F,B=n(6820);var U={x:{max:576,min:36},y:{max:756,min:36}},z={x:.5*(U.x.min+U.x.max),y:.5*(U.y.min+U.y.max)},W=(Z={},(0,l.Z)(Z,P.default.JSON,P.default.JSON),(0,l.Z)(Z,P.default.SVG,P.default.SVG),(0,l.Z)(Z,P.default.XRNA,P.default.XRNA),(0,l.Z)(Z,P.default.CSV,P.default.CSV),(0,l.Z)(Z,P.default.TR,P.default.TR),(0,l.Z)(Z,P.default.BPSEQ,P.default.BPSEQ),(0,l.Z)(Z,P.default.DOT_BRACKET,P.default.DOT_BRACKET),Z),G=Object.values(W),H=(F={},(0,l.Z)(F,W.xrna,(function(e,t){var n=document.implementation.createDocument(null,null,null),r=n.createElement("ComplexDocument");r.setAttribute("Name",t),n.appendChild(r);var o=n.createElement("SceneNodeGeom");return o.setAttribute("CenterX","0"),o.setAttribute("CenterY","0"),o.setAttribute("Scale","1"),r.appendChild(o),Object.values(e).forEach((function(e){var t=n.createElement("Complex");t.setAttribute("Name",e.name),r.appendChild(t);var o=e.basePairs;Object.entries(e.rnaMoleculeProps).forEach((function(e){var r=(0,s.Z)(e,2),a=r[0],i=r[1],l=i.firstNucleotideIndex,u=n.createElement("RNAMolecule");u.setAttribute("Name",a),t.appendChild(u);var d=n.createElement("NucListData");d.setAttribute("StartNucID","".concat(l)),d.setAttribute("DataType","NucChar.NucID.XPos.YPos");var f=Object.entries(i.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));d.innerHTML=f.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps;return[n.symbol,"".concat(t+l),n.x.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),n.y.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)].join(" ")})).join("\n"),u.appendChild(d);var p=n.createElement("Nuc");p.setAttribute("RefIDs","".concat(l,"-").concat(l+f.length-1)),p.setAttribute("Color","0"),p.setAttribute("FontID","0"),p.setAttribute("FontSize","8"),u.appendChild(p),f.forEach((function(e){var t,r,o=e.nucleotideIndex,a=e.singularNucleotideProps,i=l+o,s=null!==(t=a.font)&&void 0!==t?t:w.default.DEFAULT;if((p=n.createElement("Nuc")).setAttribute("RefID","".concat(i)),p.setAttribute("Color",(0,k.toHexadecimal)(null!==(r=a.color)&&void 0!==r?r:k.BLACK)),p.setAttribute("FontID",w.PartialFont.toFontId(s).toString()),p.setAttribute("FontSize",s.size.toString()),u.appendChild(p),void 0!==a.labelLineProps||void 0!==a.labelContentProps){(p=n.createElement("Nuc")).setAttribute("RefID","".concat(i)),u.appendChild(p);var c=n.createElement("LabelList"),d=[];if(void 0!==a.labelLineProps){var f,h,m=a.labelLineProps,v=m.points,x=v[0],g=v[v.length-1];d.push(["l",x.x.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),x.y.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),g.x.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),g.y.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),(null!==(f=m.strokeWidth)&&void 0!==f?f:M.DEFAULT_STROKE_WIDTH).toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),(0,k.toHexadecimal)(null!==(h=m.color)&&void 0!==h?h:k.BLACK),"0.0","0","0","0","0"].join(" "))}if(void 0!==a.labelContentProps){var y,b,N=a.labelContentProps,E=null!==(y=N.font)&&void 0!==y?y:w.default.DEFAULT;d.push(["s",N.x.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),N.y.toFixed(M.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),"0.0",E.size,w.PartialFont.toFontId(E),(0,k.toHexadecimal)(null!==(b=N.color)&&void 0!==b?b:k.BLACK),'"'.concat(N.content,'"')].join(" "))}c.innerHTML=d.join("\n"),p.appendChild(c)}}));var h=o[a];Object.entries(h).forEach((function(e){var t,r=(0,s.Z)(e,2),o=r[0],i=r[1],d=Number.parseInt(o),f={nucleotideIndex:d,rnaMoleculeName:a},p=(0,c.Z)(i);try{for(p.s();!(t=p.n()).done;){var h=t.value;if((0,T.compareBasePairKeys)(f,h)<=0){var m=n.createElement("BasePairs");m.setAttribute("nucID",(d+l).toString()),m.setAttribute("length","1"),m.setAttribute("bpNucID",(h.nucleotideIndex+l).toString()),m.setAttribute("bpName",h.rnaMoleculeName),u.appendChild(m)}}}catch(v){p.e(v)}finally{p.f()}}))}))})),(new XMLSerializer).serializeToString(n.documentElement)})),(0,l.Z)(F,W.json,(function(e){var t=[],n=[],r={},o={},i={},u={},d="";function f(e){var n,r=t.findIndex((function(t){return t["font-family"]===e.family&&t["font-size"]==="".concat(e.size)&&t["font-weight"]===e.weight&&t["font-style"]===e.style}));-1===r?(d="font#".concat(t.length),t.push((n={name:d},(0,l.Z)(n,"font-family",e.family),(0,l.Z)(n,"font-size","".concat(e.size)),(0,l.Z)(n,"font-weight",e.weight),(0,l.Z)(n,"font-style",e.style),n))):d="font#".concat(r)}var p="";function h(e){var t,r=(0,k.toCSS)(e.stroke),o=n.findIndex((function(t){return t["stroke-width"]==="".concat(e.strokeWidth)&&t.stroke===r}));-1===o?(p="stroke#".concat(n.length),n.push((t={name:p},(0,l.Z)(t,"stroke-width","".concat(e.strokeWidth)),(0,l.Z)(t,"stroke",r),t))):p="stroke#".concat(o)}var m=Object.values(e);return m.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var t,n,a=(0,s.Z)(e,2),l=a[0],c=a[1],u=Number.parseInt(l);f(null!==(t=c.font)&&void 0!==t?t:w.default.DEFAULT),i[u]=["text-"+(0,k.toCSS)(null!==(n=c.color)&&void 0!==n?n:k.BLACK),d];var m,v,x=c.labelContentProps;void 0!==x&&(f(null!==(m=x.font)&&void 0!==m?m:w.default.DEFAULT),r[u]=["text-"+(0,k.toCSS)(null!==(v=x.color)&&void 0!==v?v:k.BLACK),d]);var g,y,b=c.labelLineProps;void 0!==b&&(h({stroke:null!==(g=b.color)&&void 0!==g?g:k.BLACK,strokeWidth:null!==(y=b.strokeWidth)&&void 0!==y?y:M.DEFAULT_STROKE_WIDTH}),o[u]=[p])}))}))})),JSON.stringify({classes:t.concat(n),rnaComplexes:m.map((function(e){var t=Object.entries(e.rnaMoleculeProps),n=e.basePairs,l=new Array;return{name:e.name,rnaMolecules:t.map((function(t){for(var d=(0,s.Z)(t,2),f=d[0],m=d[1],v=new Array,x=n[f],g=0,y=Object.entries(x);g<y.length;g++){var b,N=(0,s.Z)(y[g],2),E=N[0],C=N[1],I=Number.parseInt(E),S=(0,c.Z)(C);try{for(S.s();!(b=S.n()).done;){var _,A,P,w=b.value;if((0,T.isRelevantBasePairKeySetInPair)({rnaMoleculeName:f,nucleotideIndex:I},w)){var O=null!==(_=w.basePairType)&&void 0!==_?_:(0,R.getBasePairType)(m.nucleotideProps[I].symbol,e.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol);h({strokeWidth:null!==(A=w.strokeWidth)&&void 0!==A?A:M.DEFAULT_STROKE_WIDTH,stroke:null!==(P=w.color)&&void 0!==P?P:k.BLACK}),u[I]=[p];var j={basePairType:O,classes:u[I],residueIndex1:m.firstNucleotideIndex+I,residueIndex2:m.firstNucleotideIndex+w.nucleotideIndex,points:w.points},L=f,D=w.rnaMoleculeName;if(R.default.isRedundantLeontisWesthofType(j.basePairType)){j.basePairType=R.default.reverseDirectedTypeMap[j.basePairType];var Z=L;L=D,D=Z;var F=j.residueIndex1;j.residueIndex1=j.residueIndex2,j.residueIndex2=F}L===D?v.push(j):l.push((0,a.Z)((0,a.Z)({},j),{},{rnaMoleculeName1:L,rnaMoleculeName2:D}))}}}catch(z){S.e(z)}finally{S.f()}}var B=new Array,U=Object.entries(m.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));return U.forEach((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,a=n.labelContentProps,i=n.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:t+m.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[t],label:a.content,x:a.x,y:-a.y}),void 0!==i&&(l.labelLine={classes:o[t],points:i.points.map((function(e){return{x:e.x,y:-e.y}}))}),B.push(l)}})),{name:f,basePairs:v,labels:B,sequence:U.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,r={classes:i[t],residueIndex:t+m.firstNucleotideIndex,residueName:n.symbol,x:n.x,y:-n.y},o=n.sequenceConnectorToNext;if(o){var a,l,s,c,u={breakpoints:null!==(a=null===(l=o.breakpoints)||void 0===l?void 0:l.map((function(e){return{x:e.x,y:-e.y}})))&&void 0!==a?a:[]};o.color&&(u.color=(0,k.toCSS)(o.color)),void 0!==o.strokeWidth&&(u.strokeWidth=o.strokeWidth),void 0!==o.opacity&&(u.opacity=o.opacity),o.dashArray&&(u.dashArray=o.dashArray),void 0!==o.curvature&&(u.curvature=o.curvature),void 0!==o.showDirectionArrow&&(u.showDirectionArrow=o.showDirectionArrow),void 0!==o.showBreakpoints&&(u.showBreakpoints=o.showBreakpoints),o.arrowColor&&(u.arrowColor=(0,k.toCSS)(o.arrowColor)),o.arrowShape&&(u.arrowShape=o.arrowShape),void 0!==o.arrowPosition&&(u.arrowPosition=o.arrowPosition),void 0!==o.arrowPositionRight&&(u.arrowPositionRight=o.arrowPositionRight),void 0!==o.arrowSize&&(u.arrowSize=o.arrowSize),null!==(s=o.lockedBreakpoints)&&void 0!==s&&s.length&&(u.lockedBreakpoints=o.lockedBreakpoints),null!==(c=o.breakpointGroups)&&void 0!==c&&c.length&&(u.breakpointGroups=o.breakpointGroups),o.targetMoleculeName&&(u.targetMoleculeName=o.targetMoleculeName),void 0!==o.targetNucleotideIndex&&(u.targetNucleotideIndex=o.targetNucleotideIndex),void 0!==o.targetComplexIndex&&(u.targetComplexIndex=o.targetComplexIndex),void 0!==o.deleted&&(u.deleted=o.deleted),void 0!==o.isORF&&(u.isORF=o.isORF),r.sequenceConnector=u}return r}))}})),basePairs:l,textAnnotations:e.textAnnotations?Object.entries(e.textAnnotations).map((function(e){var t=(0,s.Z)(e,2),n=(t[0],t[1]),r={id:n.id,content:n.content,x:n.x,y:-n.y};return n.font&&(r.font={family:n.font.family,size:String(n.font.size),weight:n.font.weight,style:n.font.style}),n.color&&(r.color=(0,k.toCSS)(n.color)),n.strokeColor&&(r.strokeColor=(0,k.toCSS)(n.strokeColor)),void 0!==n.strokeWidth&&(r.strokeWidth=n.strokeWidth),void 0!==n.strokeOpacity&&(r.strokeOpacity=n.strokeOpacity),void 0!==n.opacity&&(r.opacity=n.opacity),void 0!==n.rotation&&(r.rotation=n.rotation),n.backgroundColor&&(r.backgroundColor=(0,k.toCSS)(n.backgroundColor)),void 0!==n.padding&&(r.padding=n.padding),n.borderColor&&(r.borderColor=(0,k.toCSS)(n.borderColor)),void 0!==n.borderWidth&&(r.borderWidth=n.borderWidth),void 0!==n.borderRadius&&(r.borderRadius=n.borderRadius),r})):[]}}))})})),(0,l.Z)(F,W.csv,(function(e,t){var n=[["resNum","unModResName","X","Y","resColor","FontSize","LineX1","LineY1","LineX2","LineY2","LineThickness","LineColor","LabelX","LabelY","LabelSymbol","LabelFontSize","LabelColor","rnaComplexName"].join(",")];function r(e){void 0===e&&(e=w.default.DEFAULT);var t=0;if("number"===typeof e.size)t=e.size;else{var n=/^-?[\d.]+/.exec(e.size);if(null===n)throw"Unrecognized font-size format: ".concat(e.size);t=Number.parseFloat(n[0])}return t=Math.abs(y)*t}function o(e){return void 0===e&&(e=k.BLACK),(0,k.toHexadecimal)(e).toLocaleLowerCase()}for(var a={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},l=0,s=Object.values(e);l<s.length;l++)for(var c=s[l],u=0,d=Object.values(c.rnaMoleculeProps);u<d.length;u++)for(var f=d[u],p=0,h=Object.values(f.nucleotideProps);p<h.length;p++){var m=h[p],v=m.x,x=m.y;v<a.x.min&&(a.x.min=v),v>a.x.max&&(a.x.max=v),x<a.y.min&&(a.y.min=x),x>a.y.max&&(a.y.max=x)}var g=Math.min((U.x.max-U.x.min)/(a.x.max-a.x.min),(U.y.max-U.y.min)/(a.y.max-a.y.min)),y=-g,b=.5*(a.x.min+a.x.max),N=.5*(a.y.min+a.y.max);for(var E in e){var C=Number.parseInt(E),I=e[C];for(var S in I.rnaMoleculeProps){var _=I.rnaMoleculeProps[S];for(var A in _.nucleotideProps){var T=Number.parseInt(A),P=T+_.firstNucleotideIndex,R=_.nucleotideProps[T],L=R.labelLineProps,D=Array(6).fill(""),Z=g*(R.x-b)+z.x,F=y*(R.y-N)+z.y,B=Math.round(r(R.font)*j);if(void 0!==L){var W,G=L.points[0],H=L.points[1];D=[(0,M.numberToFormattedStringHelper)(Z+g*G.x),(0,M.numberToFormattedStringHelper)(F+y*G.y)].concat((0,i.Z)(void 0===H?["",""]:[(0,M.numberToFormattedStringHelper)(Z+g*H.x),(0,M.numberToFormattedStringHelper)(F+y*H.y)]),[(0,M.numberToFormattedStringHelper)(null!==(W=L.strokeWidth)&&void 0!==W?W:M.DEFAULT_STROKE_WIDTH),o(L.color)])}var K=R.labelContentProps,V=Array(5).fill("");if(void 0!==K){var q=document.getElementById((0,O.getLabelContentHtmlElementId)(C,S,T));if(null===q)throw"Unfound LabelContent SVG element.";var X=q.getBoundingClientRect(),Y=Math.round(r(K.font));V=[(0,M.numberToFormattedStringHelper)(Z+g*(K.x-.5*X.width)),(0,M.numberToFormattedStringHelper)(F+y*K.y+.5*B),K.content,"".concat(Y),o(K.color)]}n.push(["".concat(S,":").concat(P),R.symbol,(0,M.numberToFormattedStringHelper)(Z,3),(0,M.numberToFormattedStringHelper)(F,3),o(R.color),"".concat(B)].concat((0,i.Z)(D),(0,i.Z)(V),[I.name]).join(","))}}}return n.join("\n")})),(0,l.Z)(F,W.bpseq,(function(e,t){var n=new Array;for(var r in e){var o=e[Number.parseInt(r)],a=o.basePairs;for(var i in n.push('# RNA complex "'.concat(o.name,'"')),o.rnaMoleculeProps){n.push('# RNA molecule "'.concat(i,'"'));var l=o.rnaMoleculeProps[i],s=a[i];for(var u in l.nucleotideProps){var d=Number.parseInt(u),f=l.nucleotideProps[d];if(d in s){var p,h=s[d],m=(0,c.Z)(h);try{for(m.s();!(p=m.n()).done;){var v=p.value,x=v.rnaMoleculeName,g=o.rnaMoleculeProps[x],y="".concat(d+l.firstNucleotideIndex," ").concat(f.symbol," ").concat(v.nucleotideIndex+g.firstNucleotideIndex);i!==x&&(y+=' # RNA molecule "'.concat(x,'"')),n.push(y)}}catch(b){m.e(b)}finally{m.f()}}else n.push("".concat(d+l.firstNucleotideIndex," ").concat(f.symbol," 0"))}}}return n.join("\n")})),(0,l.Z)(F,W.tr,(function(e,t){for(var n={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},r=0,o=Object.values(e);r<o.length;r++)for(var a=o[r],i=0,l=Object.values(a.rnaMoleculeProps);i<l.length;i++)for(var s=l[i],c=0,u=Object.values(s.nucleotideProps);c<u.length;c++){var d=u[c],f=d.x,p=d.y;f<n.x.min&&(n.x.min=f),f>n.x.max&&(n.x.max=f),p<n.y.min&&(n.y.min=p),p>n.y.max&&(n.y.max=p)}var h=.5*(n.x.min+n.x.max),m=.5*(n.y.min+n.y.max),v=Math.min((U.x.max-U.x.min)/(n.x.max-n.x.min),(U.y.max-U.y.min)/(n.y.max-n.y.min)),x=-v,g=new Array;for(var y in e){var b=e[Number.parseInt(y)];g.push('\x3c!-- <rnaComplex name="'.concat(b.name.replace('"','\\"'),'"> --\x3e'));var N=b.rnaMoleculeProps;for(var E in N){g.push('<structure name="'.concat(E.replace('"','\\"'),'">'));var C=N[E],I=C.nucleotideProps;for(var S in I){var _=Number.parseInt(S),A=_+C.firstNucleotideIndex,T=I[_],P=v*(T.x-h)+z.x,R=x*(T.y-m)+z.y;g.push('<point x="'.concat((0,M.numberToFormattedStringHelper)(P,3),'" y="').concat((0,M.numberToFormattedStringHelper)(R,3),'" b="').concat(T.symbol,'" numbering-label="').concat(A,'" />'))}g.push("</structure>")}g.push("\x3c!-- </rnaComplex> --\x3e")}return g.join("\n")})),(0,l.Z)(F,W.svg,(function(e,t){var n,r=document.querySelector("#".concat(pn)).getBBox(),o=document.getElementById(on).cloneNode(!0),a=o.querySelector("#".concat(fn));a&&a.remove();var i=o.querySelector("#".concat(ln));i&&i.remove(),o.setAttribute("fill","none"),o.setAttribute("filter","none"),o.setAttribute("stroke","none"),o.style.removeProperty("top"),o.style.removeProperty("left"),o.style.removeProperty("position");var s=o.querySelector("#".concat(pn)),u=r.width+40,d=r.height+40;o.setAttribute("viewBox","".concat(r.x-20," ").concat(r.y-20," ").concat(u," ").concat(d)),o.setAttribute("width",u.toString()),o.setAttribute("height",d.toString()),s.setAttribute("transform","scale(1, -1) translate(0, ".concat(-(2*r.y+r.height),")"));for(var f="Miscellaneous",p=(n={},(0,l.Z)(n,D.SvgPropertyXrnaType.NUCLEOTIDE,"Nucleotides"),(0,l.Z)(n,D.SvgPropertyXrnaType.BASE_PAIR,"BasePairs"),(0,l.Z)(n,D.SvgPropertyXrnaType.LABEL_LINE,"LabelLines"),(0,l.Z)(n,D.SvgPropertyXrnaType.LABEL_CONTENT,"LabelContents"),(0,l.Z)(n,D.SvgPropertyXrnaType.PATH,"Paths"),(0,l.Z)(n,D.SvgPropertyXrnaType.CENTERLINE,"Centerline"),(0,l.Z)(n,D.SvgPropertyXrnaType.TEXT_ANNOTATION,"TextAnnotations"),(0,l.Z)(n,D.SvgPropertyXrnaType.SEQUENCE_CONNECTOR,"SequenceConnectors"),n),h=["SequenceConnectors","Nucleotides","BasePairs","LabelLines","LabelContents","TextAnnotations","Paths","Centerline",f],m={},v=0,x=h;v<x.length;v++){var g=x[v],y=document.createElement("g");y.setAttribute("id",g),m[g]=y}function b(e,t){var n=t.getAttribute("transform"),r=(0,L.identity)();if(null!==n){var o,a=n.replaceAll(/\)\s*(?!$)/g,")|").split("|"),i=(0,c.Z)(a);try{for(i.s();!(o=i.n()).done;){var l=o.value;r=(0,L.multiplyAffineMatrices)(r,(0,L.parseAffineMatrix)(l))}}catch(v){i.e(v)}finally{i.f()}}e=(0,L.multiplyAffineMatrices)(e,r);var s,u=t.getAttribute(D.SVG_PROPERTY_XRNA_TYPE);if("g"!==t.tagName||[D.SvgPropertyXrnaType.BASE_PAIR,D.SvgPropertyXrnaType.LABEL_LINE].includes(null!==u&&void 0!==u?u:""))s=null!==u&&u in p?m[p[u]]:m[f],t.setAttribute("transform",(0,L.affineMatrixToString)(e)),s.appendChild(t);else for(var d=0,h=Array.from(t.children);d<h.length;d++){b(e,h[d])}}for(var N=0,E=Array.from(s.children);N<E.length;N++){var C=E[N];b((0,L.identity)(),C),C.remove()}for(var I=0,S=h;I<S.length;I++){var _=m[S[I]];_&&_.children.length>0&&s.appendChild(_)}var A,T=(0,c.Z)(s.querySelectorAll("animate"));try{for(T.s();!(A=T.n()).done;){A.value.remove()}}catch(P){T.e(P)}finally{T.f()}return o.innerHTML=s.outerHTML,o.outerHTML})),(0,l.Z)(F,W.dbn,(function(e,t){var n=new Array;n.push("# ".concat(t));for(var r=0,o=Object.keys(e);r<o.length;r++)for(var a=o[r],i=Number.parseInt(a,10),l=e[i],s=function(){var t=u[c],r=l.rnaMoleculeProps[t],o=Object.keys(r.nucleotideProps).map((function(e){return Number.parseInt(e,10)})).sort((function(e,t){return e-t})),a=o.length,i=o.map((function(e){return r.nucleotideProps[e].symbol})),s=(0,B.qh)(l,t),d=0===s.length?".".repeat(a):(0,B.IU)(a,s),f=Object.keys(e).length>1,p=Object.keys(l.rnaMoleculeProps).length>1,h=f||p?"".concat(l.name," / ").concat(t):l.name;n.push(">".concat(h)),n.push(i.join("")),n.push(d),n.push("")},c=0,u=Object.keys(l.rnaMoleculeProps);c<u.length;c++)s();return n.join("\n")})),F),K=(0,a.Z)((0,a.Z)({},H),{},(0,l.Z)({},W.json,(function(e){var t=[],n=[],r={},o={},i={},u={},d="";function p(e){var n,r=t.findIndex((function(t){return t["font-family"]===e.family&&t["font-size"]==="".concat(e.size)&&t["font-weight"]===e.weight&&t["font-style"]===e.style}));-1===r?(d="font#".concat(t.length),t.push((n={name:d},(0,l.Z)(n,"font-family",e.family),(0,l.Z)(n,"font-size","".concat(e.size)),(0,l.Z)(n,"font-weight",e.weight),(0,l.Z)(n,"font-style",e.style),n))):d="font#".concat(r)}var h="";function m(e){var t,r=(0,k.toCSS)(e.stroke),o=n.findIndex((function(t){return t["stroke-width"]==="".concat(e.strokeWidth)&&t.stroke===r}));-1===o?(h="stroke#".concat(n.length),n.push((t={name:h},(0,l.Z)(t,"stroke-width","".concat(e.strokeWidth)),(0,l.Z)(t,"stroke",r),t))):h="stroke#".concat(o)}var v=Object.values(e);return v.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var t,n,a=(0,s.Z)(e,2),l=a[0],c=a[1],u=Number.parseInt(l);p(null!==(t=c.font)&&void 0!==t?t:w.default.DEFAULT),i[u]=["text-"+(0,k.toCSS)(null!==(n=c.color)&&void 0!==n?n:k.BLACK),d];var f,v,x=c.labelContentProps;void 0!==x&&(p(null!==(f=x.font)&&void 0!==f?f:w.default.DEFAULT),r[u]=["text-"+(0,k.toCSS)(null!==(v=x.color)&&void 0!==v?v:k.BLACK),d]);var g,y,b=c.labelLineProps;void 0!==b&&(m({stroke:null!==(g=b.color)&&void 0!==g?g:k.BLACK,strokeWidth:null!==(y=b.strokeWidth)&&void 0!==y?y:M.DEFAULT_STROKE_WIDTH}),o[u]=[h])}))}))})),JSON.stringify({classes:t.concat(n),rnaComplexes:v.map((function(e){var t=Object.entries(e.rnaMoleculeProps),n=e.basePairs,l=new Array;return{name:e.name,rnaMolecules:t.map((function(t){for(var d=(0,s.Z)(t,2),p=d[0],v=d[1],x=new Array,g=n[p],y=0,b=Object.entries(g);y<b.length;y++){var N,E=(0,s.Z)(b[y],2),C=E[0],I=E[1],S=(0,c.Z)(I);try{for(S.s();!(N=S.n()).done;){var _,A,P,w=N.value,O=Number.parseInt(C);if((0,T.isRelevantBasePairKeySetInPair)({rnaMoleculeName:p,nucleotideIndex:O},w)){var j=null!==(_=w.basePairType)&&void 0!==_?_:(0,R.getBasePairType)(v.nucleotideProps[O].symbol,e.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol);m({strokeWidth:null!==(A=w.strokeWidth)&&void 0!==A?A:M.DEFAULT_STROKE_WIDTH,stroke:null!==(P=w.color)&&void 0!==P?P:k.BLACK}),u[O]=[h];var L={basePairType:j,classes:u[O],residueIndex1:v.firstNucleotideIndex+O,residueIndex2:v.firstNucleotideIndex+w.nucleotideIndex,points:w.points},D=p,Z=w.rnaMoleculeName;if(R.default.isRedundantLeontisWesthofType(L.basePairType)){L.basePairType=R.default.reverseDirectedTypeMap[L.basePairType];var F=D;D=Z,Z=F;var B=L.residueIndex1;L.residueIndex1=L.residueIndex2,L.residueIndex2=B}D===Z?x.push(L):l.push((0,a.Z)((0,a.Z)({},L),{},{rnaMoleculeName1:D,rnaMoleculeName2:Z}))}}}catch(W){S.e(W)}finally{S.f()}}var U=new Array,z=Object.entries(v.nucleotideProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));return z.forEach((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,a=n.labelContentProps,i=n.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:t+v.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[t],label:a.content,x:a.x+n.x,y:-(a.y+n.y)}),void 0!==i&&(l.labelLine={classes:o[t],points:i.points.map((function(e){var t=(0,f.add)(e,n);return t.y=-t.y,t}))}),U.push(l)}})),{name:p,basePairs:x,labels:U,sequence:z.map((function(e){var t=e.nucleotideIndex,n=e.singularNucleotideProps,r={classes:i[t],residueIndex:t+v.firstNucleotideIndex,residueName:n.symbol,x:n.x,y:-n.y},o=n.sequenceConnectorToNext;if(o){var a,l,s,c,u={breakpoints:null!==(a=null===(l=o.breakpoints)||void 0===l?void 0:l.map((function(e){return{x:e.x,y:-e.y}})))&&void 0!==a?a:[]};o.color&&(u.color=(0,k.toCSS)(o.color)),void 0!==o.strokeWidth&&(u.strokeWidth=o.strokeWidth),void 0!==o.opacity&&(u.opacity=o.opacity),o.dashArray&&(u.dashArray=o.dashArray),void 0!==o.curvature&&(u.curvature=o.curvature),void 0!==o.showDirectionArrow&&(u.showDirectionArrow=o.showDirectionArrow),void 0!==o.showBreakpoints&&(u.showBreakpoints=o.showBreakpoints),o.arrowColor&&(u.arrowColor=(0,k.toCSS)(o.arrowColor)),o.arrowShape&&(u.arrowShape=o.arrowShape),void 0!==o.arrowPosition&&(u.arrowPosition=o.arrowPosition),void 0!==o.arrowPositionRight&&(u.arrowPositionRight=o.arrowPositionRight),void 0!==o.arrowSize&&(u.arrowSize=o.arrowSize),null!==(s=o.lockedBreakpoints)&&void 0!==s&&s.length&&(u.lockedBreakpoints=o.lockedBreakpoints),null!==(c=o.breakpointGroups)&&void 0!==c&&c.length&&(u.breakpointGroups=o.breakpointGroups),o.targetMoleculeName&&(u.targetMoleculeName=o.targetMoleculeName),void 0!==o.targetNucleotideIndex&&(u.targetNucleotideIndex=o.targetNucleotideIndex),void 0!==o.targetComplexIndex&&(u.targetComplexIndex=o.targetComplexIndex),void 0!==o.deleted&&(u.deleted=o.deleted),void 0!==o.isORF&&(u.isORF=o.isORF),r.sequenceConnector=u}return r}))}})),basePairs:l,textAnnotations:e.textAnnotations?Object.entries(e.textAnnotations).map((function(e){var t=(0,s.Z)(e,2),n=(t[0],t[1]),r={id:n.id,content:n.content,x:n.x,y:-n.y};return n.font&&(r.font={family:n.font.family,size:String(n.font.size),weight:n.font.weight,style:n.font.style}),n.color&&(r.color=(0,k.toCSS)(n.color)),n.strokeColor&&(r.strokeColor=(0,k.toCSS)(n.strokeColor)),void 0!==n.strokeWidth&&(r.strokeWidth=n.strokeWidth),void 0!==n.strokeOpacity&&(r.strokeOpacity=n.strokeOpacity),void 0!==n.opacity&&(r.opacity=n.opacity),void 0!==n.rotation&&(r.rotation=n.rotation),n.backgroundColor&&(r.backgroundColor=(0,k.toCSS)(n.backgroundColor)),void 0!==n.padding&&(r.padding=n.padding),n.borderColor&&(r.borderColor=(0,k.toCSS)(n.borderColor)),void 0!==n.borderWidth&&(r.borderWidth=n.borderWidth),void 0!==n.borderRadius&&(r.borderRadius=n.borderRadius),r})):[]}}))})}))),V=n(8467),q=n(9750),X=n(3413),Y=n(7457),Q=n(9967);function $(e){var t,n=[],r=[],o=[],a=[],i=(0,c.Z)(e);try{for(i.s();!(t=i.n()).done;)for(var l=t.value,u=0,d=Object.entries(l.rnaMoleculeProps);u<d.length;u++)for(var p=(0,s.Z)(d[u],2),h=p[0],m=p[1],v=0,x=Object.entries(m.nucleotideProps);v<x.length;v++){var g,y=(0,s.Z)(x[v],2),b=y[0],N=y[1],E=null===(g=l.basePairs[h])||void 0===g?void 0:g[parseInt(b)];if(E){var C,I=(0,c.Z)(E);try{for(I.s();!(C=I.n()).done;){var S,_=C.value,A=_.rnaMoleculeName,T=_.nucleotideIndex,P=null===(S=l.rnaMoleculeProps[A])||void 0===S?void 0:S.nucleotideProps[T];if(P){var k=(0,f.distance)(N,P);switch(_.basePairType||ee(N.symbol,P.symbol)){case R.BasePair.Type.CANONICAL:case R.BasePair.Type.CIS_WATSON_CRICK_WATSON_CRICK:case R.BasePair.Type.TRANS_WATSON_CRICK_WATSON_CRICK:n.push(k);break;case R.BasePair.Type.WOBBLE:r.push(k);break;case R.BasePair.Type.MISMATCH:default:o.push(k)}}}}catch($){I.e($)}finally{I.f()}}}}catch($){i.e($)}finally{i.f()}var w,M=(0,c.Z)(e);try{for(M.s();!(w=M.n()).done;)for(var O=w.value,j=0,L=Object.entries(O.rnaMoleculeProps);j<L.length;j++)for(var D=(0,s.Z)(L[j],2),Z=D[0],F=D[1],B=Object.keys(F.nucleotideProps).map(Number).sort((function(e,t){return e-t})),U=0;U<B.length-1;U++){var z,W,G=B[U],H=B[U+1],K=null===(z=O.basePairs[Z])||void 0===z?void 0:z[G],V=null===(W=O.basePairs[Z])||void 0===W?void 0:W[H];if(K&&K.length>0&&V&&V.length>0){var q=F.nucleotideProps[G],X=F.nucleotideProps[H],Y=(0,f.distance)(q,X);a.push(Y)}}}catch($){M.e($)}finally{M.f()}var Q=J(n);return{canonicalDistance:Q||1,wobbleDistance:J(r)||Q||1,mismatchDistance:1.2*Q||1,contiguousDistance:J(a)||1}}function J(e){if(0===e.length)return 0;var t=(0,i.Z)(e).sort((function(e,t){return e-t})),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]}function ee(e,t){if(e>t){var n=e;e=t,t=n}var r=R.BasePair.typeRecord,o=void 0;return e in r&&(o=r[e][t]),void 0===o?R.BasePair.Type.MISMATCH:o}var te,ne=n.p+"static/media/loading.b29632a55bfb1d07d50fd6492383786b.svg",re=n(8109),oe=n(974),ae=n(920),ie=n(1702),le=n(4914),se=n(6768),ce=n(184);!function(e){var t,n;!function(e){function t(e){var t=e.singularNucleotideProps.labelContentProps,n=(0,u.useContext)(X._.OrientationEditor.ResetDataTrigger),r=(0,u.useState)(t.x),o=(0,s.Z)(r,2),a=o[0],i=o[1],l=(0,u.useState)(t.y),c=(0,s.Z)(l,2),d=c[0],f=c[1],p=(0,u.useState)(t.content),h=(0,s.Z)(p,2),m=h[0],v=h[1];return(0,u.useEffect)((function(){i(t.x),f(t.y),v(t.content)}),[n]),(0,ce.jsxs)(ae.z.Component,{title:"Content",children:[(0,ce.jsxs)("label",{children:["x:\xa0",(0,ce.jsx)(ie.Z.Number,{value:a,setValue:function(t){i(t),e.rerender(t,d,m)}})]}),(0,ce.jsx)("br",{}),(0,ce.jsxs)("label",{children:["y:\xa0",(0,ce.jsx)(ie.Z.Number,{value:d,setValue:function(t){f(t),e.rerender(a,t,m)}})]}),(0,ce.jsx)("br",{}),(0,ce.jsxs)("label",{children:["content:\xa0",(0,ce.jsx)("input",{type:"text",value:m,onChange:function(t){var n=t.target.value;v(n),e.rerender(a,d,n)}})]})]})}function n(e){var t=e.singularNucleotideProps.labelLineProps.points,n=(0,u.useContext)(X._.OrientationEditor.ResetDataTrigger),r=(0,u.useState)(0),o=(0,s.Z)(r,2),i=o[0],l=o[1],c=(0,u.useState)(0),d=(0,s.Z)(c,2),p=d[0],h=d[1],m=(0,u.useState)(0),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=(0,u.useState)(void 0),b=(0,s.Z)(y,2),N=b[0],E=b[1];function C(){var n=t[0];E({initialCenter:{x:0,y:0},positions:t,onUpdatePositions:function(){e.rerender(I.x,I.y,i),h(I.x),g(I.y)},normal:(0,f.orthogonalize)(n),initialAngle:(0,f.asAngle)(n),initialScale:(0,f.magnitude)(n)})}var I=(0,u.useMemo)((function(){return t[i]}),[i,t]);return(0,u.useEffect)((function(){h(I.x),g(I.y)}),[I]),(0,u.useEffect)((function(){h(I.x),g(I.y),C()}),[n]),(0,ce.jsxs)(ae.z.Component,{title:"Line Positions",children:[(0,ce.jsxs)(ae.z.Component,{title:"Single position",children:[(0,ce.jsxs)("label",{children:["Edit position #\xa0",(0,ce.jsx)(ie.Z.Integer,{value:i+1,setValue:function(e){var n=e-1,r=t[n];l(n),h(r.x),g(r.y)},min:1,max:t.length})]}),(0,ce.jsx)("br",{}),(0,ce.jsxs)("label",{children:["x:\xa0",(0,ce.jsx)(ie.Z.Number,{value:p,setValue:function(t){h(t),I.x=t,e.rerender(t,x,i),C()}})]}),(0,ce.jsx)("br",{}),(0,ce.jsxs)("label",{children:["y:\xa0",(0,ce.jsx)(ie.Z.Number,{value:x,setValue:function(t){g(t),I.y=t,e.rerender(p,t,i),C()}})]})]}),N&&(0,ce.jsx)(le.Y.Component,(0,a.Z)({},N))]})}e.Component=function(e){var r=e.singularNucleotideWithLabelContentProps,o=e.singularNucleotideWithLabelLineProps,l=e.rerender;return(0,ce.jsxs)(ce.Fragment,{children:[void 0!==r&&(0,ce.jsx)(t,{singularNucleotideProps:r,rerender:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{x:e,y:t,content:n}),l()}))}),void 0!==o&&(0,ce.jsx)(n,{singularNucleotideProps:o,rerender:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){var r=o.labelLineProps.points,s=r[n];s.x=e,s.y=t,o.labelLineProps=(0,a.Z)((0,a.Z)({},o.labelLineProps),{},{points:(0,i.Z)(r)}),l()}))})]})}}(t||(t={})),(n||(n={})).Component=function(e){var t=e.rerender,n=e.labelContentProps,r=e.labelLineProps,o=(0,u.useContext)(X._.App.Settings)[q.pE.USE_DEGREES],a=(0,u.useMemo)((function(){var e=new Array;e.push.apply(e,(0,i.Z)(n));var t,o=(0,c.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value.points;e.push.apply(e,(0,i.Z)(a))}}catch(l){o.e(l)}finally{o.f()}return{initialCenter:{x:0,y:0},positions:[],normal:{x:1,y:0},relativePositions:e}}),[n,r]),l=a.initialCenter,s=a.positions,d=a.normal,f=a.relativePositions;return(0,ce.jsx)(ae.z.Component,{title:"Positions",children:(0,ce.jsx)(se.U.Component,{initialCenter:l,positions:s,onUpdatePositions:function(){var e=f[0];n[0].x=e.x,n[0].y=e.y,t()},normal:d,relativePositions:f,useDegreesFlag:o,applyCenterToRelativePositionsFlag:!0})})},e.Component=function(e){var r=e.rnaComplexProps,o=e.indicesOfAffectedNucleotides,l=e.setNucleotideKeysToRerender,d=(0,u.useMemo)((function(){for(var e,l,u=new Array,d=new Array,f={},p=0,h=Object.entries(o);p<h.length;p++){var m=(0,s.Z)(h[p],2),v=m[0],x=m[1],g=Number.parseInt(v),y=r[g].rnaMoleculeProps;g in f||(f[g]={});for(var b=f[g],N=0,E=Object.entries(x);N<E.length;N++){var C=(0,s.Z)(E[N],2),I=C[0],S=C[1],_=y[I].nucleotideProps;I in b||(b[I]=[]);var A,T=b[I],P=(0,c.Z)(S.values());try{for(P.s();!(A=P.n()).done;){var M=A.value,O=_[M],j=O.labelContentProps,L=O.labelLineProps,D=!1;void 0!==j&&(u.push(O),D=!0),void 0!==L&&(d.push(O),D=!0),D&&T.push(M)}}catch(re){P.e(re)}finally{P.f()}T.sort(Y.subtractNumbers)}}var Z=void 0;if(u.length>0){var F;Z=null!==(F=u[0].labelContentProps.font)&&void 0!==F?F:w.default.DEFAULT;for(var B=1;B<u.length;B++){var U=u[B].labelContentProps.font;if(!w.default.areEqual(Z,null!==U&&void 0!==U?U:w.default.DEFAULT)){Z=void 0;break}}}var z=void 0;if(u.length>0){var W;z=null!==(W=u[0].labelContentProps.color)&&void 0!==W?W:k.BLACK;for(var G=1;G<u.length;G++){var H=u[G].labelContentProps.color;if(!(0,k.areEqual)(z,null!==H&&void 0!==H?H:k.BLACK)){z=void 0;break}}if(void 0!==z)for(var K=1;K<d.length;K++){var V=d[K].labelLineProps.color;if(!(0,k.areEqual)(z,null!==V&&void 0!==V?V:k.BLACK)){z=void 0;break}}}else{var q;z=null!==(q=d[0].labelLineProps.color)&&void 0!==q?q:k.BLACK;for(var X=1;X<d.length;X++){var Q=d[X].labelLineProps.color;if(!(0,k.areEqual)(z,null!==Q&&void 0!==Q?Q:k.BLACK)){z=void 0;break}}}var $,J=u.length,ee=d.length;switch(Math.max(J,ee)){case 0:$=(0,ce.jsx)(ce.Fragment,{});break;case 1:$=(0,ce.jsx)(t.Component,{rerender:R,singularNucleotideWithLabelContentProps:u[0],singularNucleotideWithLabelLineProps:d[0]});break;default:var te=u.map((function(e){return e.labelContentProps})),ne=d.map((function(e){return e.labelLineProps.points}));$=(0,ce.jsx)(n.Component,{rerender:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=0;e<u.length;e++){var t=u[e],n=te[e];t.labelContentProps=(0,a.Z)((0,a.Z)({},t.labelContentProps),{},{x:n.x,y:n.y})}for(var r=0;r<d.length;r++){var o=d[r];ne[r];o.labelLineProps=(0,a.Z)((0,a.Z)({},o.labelLineProps),{},{points:(0,i.Z)(ne[r])})}R()})),labelContentProps:u.map((function(e){return e.labelContentProps})),labelLineProps:d.map((function(e){return e.labelLineProps}))})}return{nucleotidePropsWithLabelContentProps:u,nucleotidePropsWithLabelLineProps:d,nucleotideKeysToRerender:f,initialColor:null!==(e=z)&&void 0!==e?e:structuredClone(k.BLACK),initialFont:null!==(l=Z)&&void 0!==l?l:structuredClone(w.default.DEFAULT),positionsEditor:$}}),[o]),f=d.nucleotidePropsWithLabelContentProps,p=d.nucleotidePropsWithLabelLineProps,h=d.nucleotideKeysToRerender,m=d.initialColor,v=d.initialFont,x=d.positionsEditor,g=(0,u.useState)(!0),y=(0,s.Z)(g,2),b=y[0],N=y[1],E=(0,u.useState)(!0),C=(0,s.Z)(E,2),I=C[0],S=C[1],_=(0,u.useState)(v),A=(0,s.Z)(_,2),T=A[0],P=A[1];function R(){l(structuredClone(h))}return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("b",{children:"Edit label(s) per constraint:"}),(0,ce.jsx)("br",{}),(0,ce.jsxs)(re.S.Component,{color:m,setColorHelper:function(e){if(b){var t,n=(0,c.Z)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{color:e})}}catch(s){n.e(s)}finally{n.f()}}if(I){var o,i=(0,c.Z)(p);try{for(i.s();!(o=i.n()).done;){var l=o.value;l.labelLineProps=(0,a.Z)((0,a.Z)({},l.labelLineProps),{},{color:e})}}catch(s){i.e(s)}finally{i.f()}}R()},children:[(0,ce.jsx)("b",{children:"Recolor:"}),(0,ce.jsxs)("ul",{style:{margin:0},children:[(0,ce.jsx)("li",{children:(0,ce.jsxs)("label",{children:["Text\xa0",(0,ce.jsx)("input",{type:"checkbox",checked:b,onChange:function(){N(!b)}})]})}),(0,ce.jsx)("li",{children:(0,ce.jsxs)("label",{children:["Lines\xa0",(0,ce.jsx)("input",{type:"checkbox",checked:I,onChange:function(){S(!I)}})]})})]})]}),(0,ce.jsx)(oe.f.Component,(0,a.Z)((0,a.Z)({},T),{},{setFont:function(e){var t,n=(0,c.Z)(f);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.labelContentProps=(0,a.Z)((0,a.Z)({},r.labelContentProps),{},{font:e})}}catch(o){n.e(o)}finally{n.f()}P(structuredClone(e)),R()}})),x]})}}(te||(te={}));var ue=n(9100),de=(0,ue.Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),fe=(0,ue.Z)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),pe=["triangle","chevron","line"],he=[{label:"Solid",value:""},{label:"Dashed",value:"4 2"},{label:"Dotted",value:"1 2"},{label:"Long Dash",value:"8 4"},{label:"Dash-Dot",value:"6 2 1 2"}];function me(e){var t,n,r,o,a,l,c,d,f,p,h,m,v,x,g,y,b,N,E=e.fullKeys,C=e.connector,I=e.onUpdate,S=e.onDelete,_=E.nucleotideIndex,A=E.rnaMoleculeName,T=E.rnaComplexIndex,P=(0,u.useRef)("".concat(T,"-").concat(A,"-").concat(_)),R="".concat(T,"-").concat(A,"-").concat(_),w=(0,u.useState)(null!==(t=C.color)&&void 0!==t?t:k.BLACK),M=(0,s.Z)(w,2),O=M[0],j=M[1],L=(0,u.useState)(null!==(n=C.strokeWidth)&&void 0!==n?n:1.5),D=(0,s.Z)(L,2),Z=D[0],F=D[1],B=(0,u.useState)(null!==(r=C.curvature)&&void 0!==r?r:0),U=(0,s.Z)(B,2),z=U[0],W=U[1],G=(0,u.useState)(null!==(o=C.opacity)&&void 0!==o?o:1),H=(0,s.Z)(G,2),K=H[0],V=H[1],q=(0,u.useState)(null!==(a=C.dashArray)&&void 0!==a?a:"4 2"),X=(0,s.Z)(q,2),Y=X[0],Q=X[1],$=(0,u.useState)(null!==(l=C.showDirectionArrow)&&void 0!==l&&l),J=(0,s.Z)($,2),ee=J[0],te=J[1],ne=(0,u.useState)(null===(c=C.showBreakpoints)||void 0===c||c),oe=(0,s.Z)(ne,2),ae=oe[0],ie=oe[1],le=(0,u.useState)(null!==(d=null!==(f=C.arrowColor)&&void 0!==f?f:C.color)&&void 0!==d?d:k.BLACK),se=(0,s.Z)(le,2),ue=se[0],me=se[1],ve=(0,u.useState)(null!==(p=C.arrowShape)&&void 0!==p?p:"triangle"),xe=(0,s.Z)(ve,2),ge=xe[0],ye=xe[1],be=(0,u.useState)(null!==(h=C.arrowPosition)&&void 0!==h?h:.5),Ne=(0,s.Z)(be,2),Ee=Ne[0],Ce=Ne[1],Ie=(0,u.useState)(null!==(m=C.arrowPositionRight)&&void 0!==m?m:.5),Se=(0,s.Z)(Ie,2),_e=Se[0],Ae=Se[1],Te=(0,u.useState)(null!==(v=C.arrowSize)&&void 0!==v?v:3),Pe=(0,s.Z)(Te,2),Re=Pe[0],ke=Pe[1],we=(0,u.useState)(null!==(x=C.lockedBreakpoints)&&void 0!==x?x:[]),Me=(0,s.Z)(we,2),Oe=Me[0],je=Me[1],Le=(0,u.useState)(null!==(g=C.breakpointGroups)&&void 0!==g?g:[]),De=(0,s.Z)(Le,2),Ze=(De[0],De[1]),Fe=(0,u.useState)(new Set),Be=(0,s.Z)(Fe,2),Ue=(Be[0],Be[1]),ze=(0,u.useState)(null!==(y=C.isORF)&&void 0!==y&&y),We=(0,s.Z)(ze,2),Ge=We[0],He=We[1];(0,u.useEffect)((function(){var e,t,n,r,o,a,i,l,s,c,u,d,f,p,h,m;P.current!==R&&(P.current=R,j(null!==(e=C.color)&&void 0!==e?e:k.BLACK),F(null!==(t=C.strokeWidth)&&void 0!==t?t:1.5),W(null!==(n=C.curvature)&&void 0!==n?n:0),V(null!==(r=C.opacity)&&void 0!==r?r:1),Q(null!==(o=C.dashArray)&&void 0!==o?o:"4 2"),te(null!==(a=C.showDirectionArrow)&&void 0!==a&&a),ie(null===(i=C.showBreakpoints)||void 0===i||i),me(null!==(l=null!==(s=C.arrowColor)&&void 0!==s?s:C.color)&&void 0!==l?l:k.BLACK),ye(null!==(c=C.arrowShape)&&void 0!==c?c:"triangle"),Ce(null!==(u=C.arrowPosition)&&void 0!==u?u:.5),Ae(null!==(d=C.arrowPositionRight)&&void 0!==d?d:.5),ke(null!==(f=C.arrowSize)&&void 0!==f?f:3),je(null!==(p=C.lockedBreakpoints)&&void 0!==p?p:[]),Ze(null!==(h=C.breakpointGroups)&&void 0!==h?h:[]),Ue(new Set),He(null!==(m=C.isORF)&&void 0!==m&&m))}),[R,C]);var Ke=null!==(b=null===(N=C.breakpoints)||void 0===N?void 0:N.length)&&void 0!==b?b:0,Ve=he.find((function(e){return e.value===Y})),qe=Ve?Ve.value:"custom";return(0,ce.jsxs)("div",{className:"sequence-connector-edit-menu",children:[(0,ce.jsxs)("div",{className:"menu-header",children:[(0,ce.jsx)("span",{className:"menu-title",children:"Connector"}),(0,ce.jsxs)("span",{className:"menu-subtitle",children:[_," \u2192 ",_+1]})]}),(0,ce.jsxs)("div",{className:"type-selector",children:[(0,ce.jsx)("button",{className:"type-btn ".concat(Ge?"":"active"),onClick:function(){Ge&&(He(!1),C.isORF=!1,I())},children:"Continuous"}),(0,ce.jsx)("button",{className:"type-btn ".concat(Ge?"active":""),onClick:function(){Ge||(He(!0),C.isORF=!0,I())},children:"ORF"})]}),(0,ce.jsxs)("div",{className:"section",children:[(0,ce.jsx)("div",{className:"section-title",children:"Appearance"}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:O,setColorHelper:function(e){j(e),C.color=e,I()}})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Width"}),(0,ce.jsx)("input",{type:"number",min:"0.5",max:"10",step:"0.5",value:Z,onChange:function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t>0&&(F(t),C.strokeWidth=t,I())}})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Style"}),(0,ce.jsxs)("select",{value:qe,onChange:function(e){var t=e.target.value;"custom"!==t&&(Q(t),C.dashArray=t||void 0,I())},children:["custom"===qe&&(0,ce.jsx)("option",{value:"custom",disabled:!0,children:"Custom (".concat(Y,")")}),he.map((function(e){return(0,ce.jsx)("option",{value:e.value,children:e.label},e.label)}))]})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Opacity"}),(0,ce.jsxs)("div",{className:"range-control",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:K,onChange:function(e){var t=parseFloat(e.target.value);V(t),C.opacity=t,I()}}),(0,ce.jsxs)("span",{children:[Math.round(100*K),"%"]})]})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Curve"}),(0,ce.jsxs)("div",{className:"range-control",children:[(0,ce.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:z,onChange:function(e){var t=parseFloat(e.target.value);W(t),C.curvature=t,I()}}),(0,ce.jsx)("span",{children:0===z?"Off":z.toFixed(1)})]})]})]}),(0,ce.jsxs)("div",{className:"section",children:[(0,ce.jsxs)("div",{className:"section-header",children:[(0,ce.jsx)("div",{className:"section-title",children:"Arrow"}),(0,ce.jsxs)("label",{className:"toggle",title:"Show arrow",children:[(0,ce.jsx)("input",{type:"checkbox",checked:ee,onChange:function(e){te(e.target.checked),C.showDirectionArrow=e.target.checked,I()},"aria-label":"Show arrow"}),(0,ce.jsx)("span",{className:"toggle-track"})]})]}),ee&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Shape"}),(0,ce.jsx)("select",{value:ge,onChange:function(e){var t=e.target.value;ye(t),C.arrowShape=t,I()},children:pe.map((function(e){return(0,ce.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)}))})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:ue,setColorHelper:function(e){me(e),C.arrowColor=e,I()}})]}),Ge?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Left \u2190"}),(0,ce.jsxs)("div",{className:"range-control",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:Ee,onChange:function(e){var t=parseFloat(e.target.value);Ce(t),C.arrowPosition=t,I()}}),(0,ce.jsxs)("span",{children:[Math.round(100*Ee),"%"]})]})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Right \u2192"}),(0,ce.jsxs)("div",{className:"range-control",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:_e,onChange:function(e){var t=parseFloat(e.target.value);Ae(t),C.arrowPositionRight=t,I()}}),(0,ce.jsxs)("span",{children:[Math.round(100*_e),"%"]})]})]})]}):(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Position"}),(0,ce.jsxs)("div",{className:"range-control",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:Ee,onChange:function(e){var t=parseFloat(e.target.value);Ce(t),C.arrowPosition=t,I()}}),(0,ce.jsxs)("span",{children:[Math.round(100*Ee),"%"]})]})]}),(0,ce.jsxs)("div",{className:"row",children:[(0,ce.jsx)("label",{children:"Size"}),(0,ce.jsx)("input",{type:"number",min:"1",max:"15",step:"0.5",value:Re,onChange:function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t>0&&(ke(t),C.arrowSize=t,I())}})]})]})]}),(0,ce.jsxs)("div",{className:"section",children:[(0,ce.jsxs)("div",{className:"section-header",children:[(0,ce.jsxs)("div",{className:"section-title",children:["Breakpoints ",(0,ce.jsx)("span",{className:"count",children:Ke})]}),(0,ce.jsxs)("label",{className:"toggle",title:"Show breakpoints",children:[(0,ce.jsx)("input",{type:"checkbox",checked:ae,onChange:function(e){ie(e.target.checked),C.showBreakpoints=e.target.checked,I()},"aria-label":"Show breakpoints"}),(0,ce.jsx)("span",{className:"toggle-track"})]})]}),Ke>0&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"breakpoint-tools",children:[(0,ce.jsx)("button",{type:"button",className:"bp-tool-btn",onClick:function(){if(C.breakpoints&&0!==C.breakpoints.length){var e=C.breakpoints.map((function(e,t){return t}));je(e),C.lockedBreakpoints=e,I()}},disabled:Oe.length===Ke,title:"Lock all breakpoints",children:"Lock all"}),(0,ce.jsx)("button",{type:"button",className:"bp-tool-btn",onClick:function(){je([]),C.lockedBreakpoints=[],I()},disabled:0===Oe.length,title:"Unlock all breakpoints",children:"Unlock all"})]}),(0,ce.jsx)("div",{className:"breakpoint-list",children:C.breakpoints.map((function(e,t){var n=Oe.includes(t);return(0,ce.jsxs)("div",{className:"breakpoint-item ".concat(n?"locked":""),children:[(0,ce.jsx)("span",{className:"bp-num",children:t+1}),(0,ce.jsxs)("span",{className:"bp-pos",children:["(",e.x.toFixed(0),", ",e.y.toFixed(0),")"]}),(0,ce.jsx)("button",{type:"button",className:"bp-lock ".concat(n?"active":""),onClick:function(){var e;e=n?Oe.filter((function(e){return e!==t})):[].concat((0,i.Z)(Oe),[t]),je(e),C.lockedBreakpoints=e,I()},title:n?"Unlock":"Lock","aria-label":n?"Unlock breakpoint":"Lock breakpoint",children:n?(0,ce.jsx)(de,{size:16}):(0,ce.jsx)(fe,{size:16})})]},t)}))})]}),(0,ce.jsx)("p",{className:"hint",children:"Ctrl+click line to add \xb7 Ctrl+click point to remove"})]}),(0,ce.jsx)("button",{className:"delete-btn",onClick:S,children:"Delete Connector"})]})}function ve(e){var t,n,r,o,i,l,c,d,f,p,h,m,v,x,g,y,b,N=e.annotation,E=e.onUpdate,C=e.onDelete,I=(0,u.useRef)(N.id),S=(0,u.useState)(N.content),_=(0,s.Z)(S,2),A=_[0],T=_[1],P=(0,u.useState)(N.x),R=(0,s.Z)(P,2),M=R[0],O=R[1],j=(0,u.useState)(N.y),L=(0,s.Z)(j,2),D=L[0],Z=L[1],F=(0,u.useState)(N.x.toFixed(1)),B=(0,s.Z)(F,2),U=B[0],z=B[1],W=(0,u.useState)(N.y.toFixed(1)),G=(0,s.Z)(W,2),H=G[0],K=G[1],V=(0,u.useState)(null!==(t=N.color)&&void 0!==t?t:k.BLACK),q=(0,s.Z)(V,2),X=q[0],Y=q[1],Q=(0,u.useState)(null!==(n=null===(r=N.font)||void 0===r?void 0:r.size)&&void 0!==n?n:w.default.DEFAULT.size),$=(0,s.Z)(Q,2),J=$[0],ee=$[1],te=(0,u.useState)(null!==(o=null===(i=N.font)||void 0===i?void 0:i.family)&&void 0!==o?o:w.default.DEFAULT.family),ne=(0,s.Z)(te,2),oe=ne[0],ae=ne[1],ie=(0,u.useState)(null!==(l=null===(c=N.font)||void 0===c?void 0:c.weight)&&void 0!==l?l:w.default.DEFAULT.weight),le=(0,s.Z)(ie,2),se=le[0],ue=le[1],de=(0,u.useState)(null!==(d=null===(f=N.font)||void 0===f?void 0:f.style)&&void 0!==d?d:w.default.DEFAULT.style),fe=(0,s.Z)(de,2),pe=fe[0],he=fe[1],me=(0,u.useState)(null!==(p=N.opacity)&&void 0!==p?p:1),ve=(0,s.Z)(me,2),xe=ve[0],ge=ve[1],ye=(0,u.useState)(null!==(h=N.rotation)&&void 0!==h?h:0),be=(0,s.Z)(ye,2),Ne=be[0],Ee=be[1],Ce=(0,u.useState)(void 0!==N.backgroundColor),Ie=(0,s.Z)(Ce,2),Se=Ie[0],_e=Ie[1],Ae=(0,u.useState)(null!==(m=N.backgroundColor)&&void 0!==m?m:{red:255,green:255,blue:255,alpha:1}),Te=(0,s.Z)(Ae,2),Pe=Te[0],Re=Te[1],ke=(0,u.useState)(void 0!==N.borderColor),we=(0,s.Z)(ke,2),Me=we[0],Oe=we[1],je=(0,u.useState)(null!==(v=N.borderColor)&&void 0!==v?v:k.BLACK),Le=(0,s.Z)(je,2),De=Le[0],Ze=Le[1],Fe=(0,u.useState)(null!==(x=N.padding)&&void 0!==x?x:4),Be=(0,s.Z)(Fe,2),Ue=Be[0],ze=Be[1],We=(0,u.useState)(void 0!==N.strokeColor),Ge=(0,s.Z)(We,2),He=Ge[0],Ke=Ge[1],Ve=(0,u.useState)(null!==(g=N.strokeColor)&&void 0!==g?g:k.BLACK),qe=(0,s.Z)(Ve,2),Xe=qe[0],Ye=qe[1],Qe=(0,u.useState)(null!==(y=N.strokeWidth)&&void 0!==y?y:1),$e=(0,s.Z)(Qe,2),Je=$e[0],et=$e[1],tt=(0,u.useState)(null!==(b=N.strokeOpacity)&&void 0!==b?b:1),nt=(0,s.Z)(tt,2),rt=nt[0],ot=nt[1];(0,u.useEffect)((function(){var e,t,n,r,o,a,i,l,s,c,u,d,f,p,h,m,v;I.current!==N.id&&(I.current=N.id,T(N.content),O(N.x),Z(N.y),z(N.x.toFixed(1)),K(N.y.toFixed(1)),Y(null!==(e=N.color)&&void 0!==e?e:k.BLACK),ee(null!==(t=null===(n=N.font)||void 0===n?void 0:n.size)&&void 0!==t?t:w.default.DEFAULT.size),ae(null!==(r=null===(o=N.font)||void 0===o?void 0:o.family)&&void 0!==r?r:w.default.DEFAULT.family),ue(null!==(a=null===(i=N.font)||void 0===i?void 0:i.weight)&&void 0!==a?a:w.default.DEFAULT.weight),he(null!==(l=null===(s=N.font)||void 0===s?void 0:s.style)&&void 0!==l?l:w.default.DEFAULT.style),ge(null!==(c=N.opacity)&&void 0!==c?c:1),Ee(null!==(u=N.rotation)&&void 0!==u?u:0),_e(void 0!==N.backgroundColor),Re(null!==(d=N.backgroundColor)&&void 0!==d?d:{red:255,green:255,blue:255,alpha:1}),Oe(void 0!==N.borderColor),Ze(null!==(f=N.borderColor)&&void 0!==f?f:k.BLACK),ze(null!==(p=N.padding)&&void 0!==p?p:4),Ke(void 0!==N.strokeColor),Ye(null!==(h=N.strokeColor)&&void 0!==h?h:k.BLACK),et(null!==(m=N.strokeWidth)&&void 0!==m?m:1),ot(null!==(v=N.strokeOpacity)&&void 0!==v?v:1))}),[N.id,N]);return(0,ce.jsxs)("div",{className:"text-annotation-edit-menu",children:[(0,ce.jsxs)("div",{className:"menu-header",children:[(0,ce.jsx)("h3",{children:"Text Annotation"}),(0,ce.jsx)("button",{className:"delete-btn",onClick:C,title:"Delete annotation",children:(0,ce.jsx)("span",{className:"icon-trash"})})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsx)("div",{className:"section-title",children:"Content"}),(0,ce.jsx)("div",{className:"edit-row",children:(0,ce.jsx)("textarea",{className:"content-input",value:A,onChange:function(e){T(e.target.value),N.content=e.target.value,E()},rows:3,placeholder:"Enter text..."})})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsx)("div",{className:"section-title",children:"Position"}),(0,ce.jsxs)("div",{className:"edit-row-pair",children:[(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"X"}),(0,ce.jsx)("input",{type:"number",value:U,onChange:function(e){z(e.target.value)},onBlur:function(e){var t=parseFloat(e.target.value);isNaN(t)?z(M.toFixed(1)):(O(t),z(t.toFixed(1)),N.x=t,E())},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})]}),(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"Y"}),(0,ce.jsx)("input",{type:"number",value:H,onChange:function(e){K(e.target.value)},onBlur:function(e){var t=parseFloat(e.target.value);isNaN(t)?K(D.toFixed(1)):(Z(t),K(t.toFixed(1)),N.y=t,E())},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})]})]}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Rotation"}),(0,ce.jsxs)("div",{className:"slider-row",children:[(0,ce.jsx)("input",{type:"range",min:"-180",max:"180",step:"5",value:Ne,onChange:function(e){var t=parseFloat(e.target.value);Ee(t),N.rotation=t,E()}}),(0,ce.jsxs)("span",{className:"value",children:[Ne,"\xb0"]})]})]})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsx)("div",{className:"section-title",children:"Text Style"}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:X,setColorHelper:function(e){Y(e),N.color=e,E()}})]}),(0,ce.jsxs)("div",{className:"edit-row-pair",children:[(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"Size"}),(0,ce.jsxs)("div",{className:"input-with-unit",children:[(0,ce.jsx)("input",{type:"number",min:"6",max:"72",step:"1",value:J,onChange:function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t>0&&(ee(t),N.font={size:J,family:oe,weight:se,style:pe},E())}}),(0,ce.jsx)("span",{className:"unit",children:"px"})]})]}),(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"Family"}),(0,ce.jsxs)("select",{value:oe,onChange:function(e){ae(e.target.value),N.font=(0,a.Z)((0,a.Z)({},N.font),{},{size:J,family:e.target.value,weight:se,style:pe}),E()},children:[(0,ce.jsx)("option",{value:"Arial",children:"Arial"}),(0,ce.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,ce.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,ce.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,ce.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,ce.jsx)("option",{value:"Verdana",children:"Verdana"})]})]})]}),(0,ce.jsxs)("div",{className:"edit-row-pair",children:[(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"Weight"}),(0,ce.jsxs)("select",{value:se,onChange:function(e){ue(e.target.value),N.font=(0,a.Z)((0,a.Z)({},N.font),{},{size:J,family:oe,weight:e.target.value,style:pe}),E()},children:[(0,ce.jsx)("option",{value:"normal",children:"Normal"}),(0,ce.jsx)("option",{value:"bold",children:"Bold"}),(0,ce.jsx)("option",{value:"lighter",children:"Light"})]})]}),(0,ce.jsxs)("div",{className:"edit-row compact",children:[(0,ce.jsx)("label",{children:"Style"}),(0,ce.jsxs)("select",{value:pe,onChange:function(e){he(e.target.value),N.font=(0,a.Z)((0,a.Z)({},N.font),{},{size:J,family:oe,weight:se,style:e.target.value}),E()},children:[(0,ce.jsx)("option",{value:"normal",children:"Normal"}),(0,ce.jsx)("option",{value:"italic",children:"Italic"})]})]})]}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Opacity"}),(0,ce.jsxs)("div",{className:"slider-row",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:xe,onChange:function(e){var t=parseFloat(e.target.value);ge(t),N.opacity=t,E()}}),(0,ce.jsxs)("span",{className:"value",children:[Math.round(100*xe),"%"]})]})]})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsxs)("div",{className:"section-header",children:[(0,ce.jsx)("div",{className:"section-title",children:"Background"}),(0,ce.jsxs)("label",{className:"toggle",title:"Enable background",children:[(0,ce.jsx)("input",{type:"checkbox",checked:Se,onChange:function(e){_e(e.target.checked),e.target.checked?N.backgroundColor=Pe:delete N.backgroundColor,E()},"aria-label":"Enable background"}),(0,ce.jsx)("span",{className:"toggle-track"})]})]}),Se&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:Pe,setColorHelper:function(e){Re(e),N.backgroundColor=e,E()}})]}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Padding"}),(0,ce.jsxs)("div",{className:"input-with-unit",children:[(0,ce.jsx)("input",{type:"number",min:"0",max:"20",step:"1",value:Ue,onChange:function(e){var t=parseFloat(e.target.value);!isNaN(t)&&t>=0&&(ze(t),N.padding=t,E())}}),(0,ce.jsx)("span",{className:"unit",children:"px"})]})]})]})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsxs)("div",{className:"section-header",children:[(0,ce.jsx)("div",{className:"section-title",children:"Text Outline"}),(0,ce.jsxs)("label",{className:"toggle",title:"Enable text outline",children:[(0,ce.jsx)("input",{type:"checkbox",checked:He,onChange:function(e){Ke(e.target.checked),e.target.checked?(N.strokeColor=Xe,N.strokeWidth=Je,N.strokeOpacity=rt):(delete N.strokeColor,delete N.strokeWidth,delete N.strokeOpacity),E()},"aria-label":"Enable text outline"}),(0,ce.jsx)("span",{className:"toggle-track"})]})]}),He&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:Xe,setColorHelper:function(e){Ye(e),N.strokeColor=e,E()}})]}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Width"}),(0,ce.jsxs)("div",{className:"slider-row",children:[(0,ce.jsx)("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:Je,onChange:function(e){var t=parseFloat(e.target.value);et(t),N.strokeWidth=t,E()}}),(0,ce.jsxs)("span",{className:"value",children:[Je,"px"]})]})]}),(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Opacity"}),(0,ce.jsxs)("div",{className:"slider-row",children:[(0,ce.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:rt,onChange:function(e){var t=parseFloat(e.target.value);ot(t),N.strokeOpacity=t,E()}}),(0,ce.jsxs)("span",{className:"value",children:[Math.round(100*rt),"%"]})]})]})]})]}),(0,ce.jsxs)("div",{className:"section-group",children:[(0,ce.jsxs)("div",{className:"section-header",children:[(0,ce.jsx)("div",{className:"section-title",children:"Border"}),(0,ce.jsxs)("label",{className:"toggle",title:"Enable border",children:[(0,ce.jsx)("input",{type:"checkbox",checked:Me,onChange:function(e){Oe(e.target.checked),e.target.checked?N.borderColor=De:delete N.borderColor,E()},"aria-label":"Enable border"}),(0,ce.jsx)("span",{className:"toggle-track"})]})]}),Me&&(0,ce.jsxs)("div",{className:"edit-row",children:[(0,ce.jsx)("label",{children:"Color"}),(0,ce.jsx)(re.S.Inline,{color:De,setColorHelper:function(e){Ze(e),N.borderColor=e,E()}})]})]}),(0,ce.jsxs)("p",{className:"helper-text",children:[(0,ce.jsx)("strong",{children:"Drag"})," to move \u2022 ",(0,ce.jsx)("strong",{children:"Ctrl+click"})," to delete"]})]})}function xe(e,t,n,r,o,a,i,l){var s=e.rnaMoleculeProps[t],c=e.rnaMoleculeProps[n];if(s&&c)for(var u=l[q.pE.CANONICAL_BASE_PAIR_DISTANCE],d=l[q.pE.WOBBLE_BASE_PAIR_DISTANCE],p=l[q.pE.MISMATCH_BASE_PAIR_DISTANCE],h=l[q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],m=0;m<a;m++){var v=r+m,x=o-m;if(!(v in s.nucleotideProps)||!(x in c.nucleotideProps))break;var g=s.nucleotideProps[v],y=c.nucleotideProps[x],b=i;if(g.symbol&&y.symbol)try{b=(0,R.getBasePairType)(g.symbol,y.symbol)}catch(F){b=R.BasePair.Type.MISMATCH}var N=u;if(b===R.BasePair.Type.WOBBLE?N=d:b===R.BasePair.Type.MISMATCH&&(N=p),0===m){var E={x:(g.x+y.x)/2,y:(g.y+y.y)/2},C=(0,f.subtract)(y,g);if((0,f.magnitude)(C)>0){var I=(0,f.normalize)(C),S=N/2;g.x=E.x-I.x*S,g.y=E.y-I.y*S,y.x=E.x+I.x*S,y.y=E.y+I.y*S}}else{var _=r+m-1,A=o-m+1;if(_ in s.nucleotideProps&&A in c.nucleotideProps){var T=s.nucleotideProps[_],P=c.nucleotideProps[A],k={x:(T.x+P.x)/2,y:(T.y+P.y)/2},w={x:(g.x+y.x)/2,y:(g.y+y.y)/2},M=(0,f.subtract)(w,k);if((0,f.magnitude)(M)>0){var O=(0,f.normalize)(M),j=(0,f.add)(k,(0,f.scaleUp)(O,h)),L=(0,f.subtract)(y,g);if((0,f.magnitude)(L)>0){var D=(0,f.normalize)(L),Z=N/2;g.x=j.x-D.x*Z,g.y=j.y-D.y*Z,y.x=j.x+D.x*Z,y.y=j.y+D.y*Z}}}}}}n(3508);var ge=n(7587),ye=(0,ue.Z)("pencil-ruler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),be=function(e){var t=e.width,n=void 0===t?Yt:t,r=e.children,o=(0,ge.Fg)().theme;return(0,ce.jsxs)("div",{style:{width:"number"===typeof n?"".concat(n,"px"):n,height:"100%",display:"flex",flexDirection:"column",background:o.colors.background,borderRight:"2px solid ".concat(o.colors.border),boxShadow:o.shadows.xl,position:"relative",overflow:"hidden",transition:o.transitions.default,zIndex:1e3},children:[(0,ce.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.primary,", ").concat(o.colors.accent,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,ce.jsx)("div",{style:{padding:"7px 10px 7px 20px",borderBottom:"1px solid ".concat(o.colors.borderLight),background:o.colors.surface,flexShrink:0},children:(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,ce.jsx)(ye,{size:24}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h1",{style:{fontSize:o.typography.fontSize.xl,fontWeight:"700",color:o.colors.text,margin:"0 0 2px 0"},children:"Exornata"}),(0,ce.jsx)("p",{style:{fontSize:o.typography.fontSize.md,fontWeight:"500",color:o.colors.textSecondary,margin:0},children:"Visualize, Edit, Share"})]})]})}),(0,ce.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"6px",overflow:"auto",background:o.colors.backgroundSecondary},children:r}),(0,ce.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.borderLight,", ").concat(o.colors.border,")"),position:"absolute",bottom:0,left:0,right:0,zIndex:10}})]})},Ne=function(e){var t=e.title,n=e.children,r=e.borderRadius,o=void 0===r?12:r,a=(0,ge.Fg)().theme;return(0,ce.jsxs)("div",{style:{background:a.colors.surface,border:"1px solid ".concat(a.colors.border),borderRadius:o,margin:"0 0 10px 0",boxShadow:a.shadows.sm,transition:a.transitions.default,overflow:"hidden"},children:[(0,ce.jsx)("div",{style:{padding:"8px 16px",background:a.colors.surfaceHover,fontSize:a.typography.fontSize.sm,fontWeight:"700",letterSpacing:"0.5px",color:a.colors.text,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(a.colors.border),textTransform:"uppercase"},children:(0,ce.jsx)("span",{style:{fontSize:a.typography.fontSize.xs,fontWeight:"700",color:a.colors.textSecondary},children:t})}),(0,ce.jsx)("div",{style:{padding:"16px",minHeight:"48px",background:a.colors.surface},children:n})]})},Ee=n(1959),Ce={Primitives:[Q.Uq.Enum.SINGLE_NUCLEOTIDE,Q.Uq.Enum.SINGLE_BASE_PAIR],Fragments:[Q.Uq.Enum.RNA_SINGLE_STRAND,Q.Uq.Enum.RNA_HELIX,Q.Uq.Enum.RNA_STACKED_HELIX,Q.Uq.Enum.RNA_CYCLE],Units:[Q.Uq.Enum.RNA_SUB_DOMAIN,Q.Uq.Enum.RNA_MOLECULE,Q.Uq.Enum.RNA_COMPLEX],Scope:[Q.Uq.Enum.SINGLE_COLOR,Q.Uq.Enum.ENTIRE_SCENE]},Ie=function(e){var t=e.constraint,n=e.isActive,r=e.onClick,o=e.disabled,a=void 0!==o&&o,i=(0,ge.Fg)().theme,c=u.useState(!1),d=(0,s.Z)(c,2);d[0],d[1];return(0,ce.jsx)(Ee.z,{label:function(e){var t;return(t={},(0,l.Z)(t,Q.Uq.Enum.SINGLE_NUCLEOTIDE,"Nucleotide"),(0,l.Z)(t,Q.Uq.Enum.SINGLE_BASE_PAIR,"Base Pair"),(0,l.Z)(t,Q.Uq.Enum.RNA_SINGLE_STRAND,"Strand"),(0,l.Z)(t,Q.Uq.Enum.RNA_HELIX,"Helix"),(0,l.Z)(t,Q.Uq.Enum.RNA_STACKED_HELIX,"Stacked"),(0,l.Z)(t,Q.Uq.Enum.RNA_SUB_DOMAIN,"Domain"),(0,l.Z)(t,Q.Uq.Enum.RNA_CYCLE,"Cycle"),(0,l.Z)(t,Q.Uq.Enum.RNA_MOLECULE,"Molecule"),(0,l.Z)(t,Q.Uq.Enum.RNA_COMPLEX,"Complex"),(0,l.Z)(t,Q.Uq.Enum.SINGLE_COLOR,"Color"),(0,l.Z)(t,Q.Uq.Enum.ENTIRE_SCENE,"Scene"),t)[e]||e}(t),onClick:r,disabled:a,variant:n?"simpleHighlight":"secondary",icon:function(e){var t,n=i.colors.primary;return(t={},(0,l.Z)(t,Q.Uq.Enum.SINGLE_NUCLEOTIDE,(0,ce.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,ce.jsx)("text",{x:"12",y:"12",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"central",children:"N"})]})),(0,l.Z)(t,Q.Uq.Enum.SINGLE_BASE_PAIR,(0,ce.jsxs)("svg",{width:"48",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("circle",{cx:"0",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,ce.jsx)("text",{x:"0",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"C"}),(0,ce.jsx)("line",{x1:"9.5",y1:"12",x2:"20",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("circle",{cx:"25",cy:"12",r:"9",fill:n,stroke:"none",strokeWidth:"1"}),(0,ce.jsx)("text",{x:"25",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:i.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"G"})]})),(0,l.Z)(t,Q.Uq.Enum.RNA_SINGLE_STRAND,(0,ce.jsxs)("svg",{width:"28",height:"24",viewBox:"0 0 64 48",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("circle",{cx:"10",cy:"28",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("path",{d:"M 18 26 Q 26 18 32 20",stroke:i.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,ce.jsx)("circle",{cx:"32",cy:"20",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("path",{d:"M 40 22 Q 46 26 54 28",stroke:i.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,ce.jsx)("circle",{cx:"54",cy:"28",r:"9",fill:n,stroke:i.colors.borderDark,strokeWidth:"1"})]})),(0,l.Z)(t,Q.Uq.Enum.RNA_HELIX,(0,ce.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("path",{d:"M 6 4 Q 4 8 6 12 Q 8 16 6 20",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 18 4 Q 20 8 18 12 Q 16 16 18 20",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"6",y1:"7",x2:"18",y2:"7",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("line",{x1:"6",y1:"17",x2:"18",y2:"17",stroke:i.colors.borderDark,strokeWidth:"1.5"})]})),(0,l.Z)(t,Q.Uq.Enum.RNA_STACKED_HELIX,(0,ce.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("path",{d:"M 6 3 Q 4 5 6 7",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 18 3 Q 20 5 18 7",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"6",y1:"5",x2:"18",y2:"5",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("path",{d:"M 6 10 Q 4 12 6 14",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 18 10 Q 20 12 18 14",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("path",{d:"M 6 17 Q 4 19 6 21",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 18 17 Q 20 19 18 21",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"6",y1:"19",x2:"18",y2:"19",stroke:i.colors.borderDark,strokeWidth:"1.5"})]})),(0,l.Z)(t,Q.Uq.Enum.RNA_SUB_DOMAIN,(0,ce.jsxs)("svg",{width:"32",height:"24",viewBox:"0 0 28 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("path",{d:"M 12 22 L 12 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 16 22 L 16 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"12",y1:"20",x2:"16",y2:"20",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("line",{x1:"12",y1:"17",x2:"16",y2:"17",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("line",{x1:"12",y1:"14",x2:"16",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("line",{x1:"12",y1:"11",x2:"16",y2:"11",stroke:i.colors.borderDark,strokeWidth:"1.5"}),(0,ce.jsx)("path",{d:"M 12 8 A 2 2 0 0 1 16 8",stroke:n,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 12 15 L 6 15 L 6 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 12 13 L 8 13 L 8 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"6",y1:"14",x2:"8",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("line",{x1:"6",y1:"13",x2:"8",y2:"13",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("path",{d:"M 6 12 A 1 1 0 0 0 8 12",stroke:n,strokeWidth:"2",fill:"none"}),(0,ce.jsx)("path",{d:"M 16 15 L 22 15 L 22 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("path",{d:"M 16 13 L 20 13 L 20 12",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,ce.jsx)("line",{x1:"20",y1:"14",x2:"22",y2:"14",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("line",{x1:"20",y1:"13",x2:"22",y2:"13",stroke:i.colors.borderDark,strokeWidth:"1"}),(0,ce.jsx)("path",{d:"M 20 12 A 1 1 0 0 1 22 12",stroke:n,strokeWidth:"2",fill:"none"})]})),(0,l.Z)(t,Q.Uq.Enum.RNA_CYCLE,(0,ce.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,ce.jsx)("circle",{cx:"12",cy:"12",r:"6",stroke:n,strokeWidth:"2",fill:"none"}),(0,ce.jsx)("circle",{cx:"12",cy:"12",r:"7",stroke:i.colors.borderDark,strokeWidth:"0.5",fill:"none"}),(0,ce.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:i.colors.borderDark,strokeWidth:"0.5",fill:"none"})]})),(0,l.Z)(t,Q.Uq.Enum.SINGLE_COLOR,(0,ce.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ce.jsxs)("g",{transform:"translate(12 12) scale(1.3) translate(-12 -12)",children:[(0,ce.jsx)("path",{d:"M 12 4 Q 6 4 4 8 Q 2 12 4 16 Q 6 20 12 20 Q 14 20 16 19 L 18 16 Q 20 14 18 12 Q 16 10 14 11 Q 12 12 12 10 Q 12 6 12 4 Z",fill:n,stroke:"none",strokeWidth:"1.5"}),(0,ce.jsx)("circle",{cx:"8",cy:"9.5",r:"2",fill:i.colorPalleteCircleFills[0],stroke:"none",strokeWidth:"0.8"}),(0,ce.jsx)("circle",{cx:"10",cy:"14",r:"2",fill:i.colorPalleteCircleFills[1],stroke:"none",strokeWidth:"0.8"}),(0,ce.jsx)("circle",{cx:"14.5",cy:"15",r:"2",fill:i.colorPalleteCircleFills[2],stroke:"none",strokeWidth:"0.8"})]})})),(0,l.Z)(t,Q.Uq.Enum.RNA_MOLECULE,(0,ce.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ce.jsx)("path",{d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})),(0,l.Z)(t,Q.Uq.Enum.RNA_COMPLEX,(0,ce.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ce.jsxs)("g",{transform:"translate(0, 2.5) scale(0.8)",children:[(0,ce.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ce.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:i.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})),(0,l.Z)(t,Q.Uq.Enum.ENTIRE_SCENE,(0,ce.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,ce.jsx)("rect",{x:"1",y:"1",width:"22",height:"22",stroke:i.colors.text,strokeWidth:"1",fill:"none",rx:"1"}),(0,ce.jsx)("path",{transform:"scale(0.5)",d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ce.jsxs)("g",{transform:"translate(16, 7) scale(0.5) translate(0, 3.5) rotate(45)",children:[(0,ce.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:n,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ce.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:i.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]})),t)[e]||(0,ce.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,ce.jsx)("circle",{cx:"6",cy:"6",r:"2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}(t)})},Se=function(e){var t,n=e.constraint,r=e.onConstraintChange,o=(0,ge.Fg)().theme,a=u.useState("Primitives"),i=(0,s.Z)(a,2),l=i[0],c=i[1];return(0,ce.jsx)(Ne,{title:"Constraints modes",borderRadius:8,children:(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{display:"flex",gap:"4px",marginBottom:"4px",borderBottom:"1px solid ".concat(o.colors.border)},children:Object.keys(Ce).map((function(e){return(0,ce.jsx)("button",{onClick:function(){return c(e)},style:{height:o.buttonSizes.md.height,padding:o.buttonSizes.md.padding,border:"none",background:l===e?o.colors.primary:"transparent",color:l===e?o.colors.textInverse:o.colors.text,borderRadius:"".concat(o.borderRadius.md," ").concat(o.borderRadius.md," 0 0"),fontSize:o.buttonSizes.sm.fontSize,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"1px"},children:e},e)}))}),(0,ce.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",minHeight:"30px",alignItems:"flex-start",alignContent:"flex-start"},children:null===(t=Ce[l])||void 0===t?void 0:t.map((function(e){return(0,ce.jsx)(Ie,{constraint:e,isActive:n===e,onClick:function(){return null===r||void 0===r?void 0:r(e)},disabled:!r},e)}))})]})})})},_e=(0,ue.Z)("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Ae=(0,ue.Z)("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),Te=(0,ue.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Pe=function(e){var t=e.onUndo,n=e.onRedo,r=e.canUndo,o=e.canRedo,a=(e.onResetViewport,e.undoStack,e.redoStack,e.onJumpToHistory,e.onResetToLastCheckpoint),i=(e.mode,e.constraint,e.onFreezeSelected,e.onUnfreezeSelected,e.onUnfreezeAll),l=e.hasFrozenNucleotides,s=void 0!==l&&l,c=(e.hasSelectedNucleotides,(0,ge.Fg)().theme);return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,ce.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[(0,ce.jsx)(Ee.z,{onClick:t,disabled:!r,icon:(0,ce.jsx)(_e,{size:14}),label:"Undo",hint:"Undo last action",variant:"secondary"}),(0,ce.jsx)(Ee.z,{onClick:n,disabled:!o,icon:(0,ce.jsx)(Ae,{size:14}),label:"Redo",hint:"Redo last action",variant:"secondary"}),(0,ce.jsx)(Ee.z,{onClick:a,disabled:!a,icon:(0,ce.jsx)(Te,{size:14}),label:"Restore",hint:"Restore to last checkpoint",variant:"danger"}),(0,ce.jsx)(Ee.z,{onClick:i,disabled:!i||!s,icon:(0,ce.jsx)(fe,{size:14}),label:"Unlock",hint:"Unlock all nucleotides (allows movement)",variant:"danger"})]}),(0,ce.jsxs)("div",{style:{fontSize:"12px",color:c.colors.textSecondary,marginTop:"8px",lineHeight:"1.4"},children:[(0,ce.jsx)("strong",{children:"Tip:"})," Use Middle-click to toggle (lock/unlock) nucleotides in place while moving others."]})]})},Re=(0,ue.Z)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),ke=(0,ue.Z)("cable",[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]]),we=(0,ue.Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Me=(0,ue.Z)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Oe=function(e){var t=e.tab,n=e.isActive,r=e.onClick,o=e.disabled,a=void 0!==o&&o,i=(0,ge.Fg)().theme,l=u.useState(!1),c=(0,s.Z)(l,2),f=c[0],p=c[1];return(0,ce.jsxs)("button",{onClick:r,disabled:a,onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"6px",height:i.buttonSizes.sm.height,padding:i.buttonSizes.sm.padding,border:"none",borderRadius:i.buttonSizes.sm.borderRadius,fontSize:i.buttonSizes.sm.fontSize,fontWeight:"600",cursor:a?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:a?.4:1,flex:1,background:a?i.colors.surfaceHover:n?i.colors.primary:f?i.colors.surfaceHover:"transparent",color:a?i.colors.textMuted:n?i.colors.textInverse:f?i.colors.primary:i.colors.textSecondary,boxShadow:n?i.shadows.md:"none",transform:n?"scale(1.02)":"scale(1)"},children:[function(e){switch(e){case d.OK.EDIT:return(0,ce.jsx)(Re,{size:12});case d.OK.FORMAT:return(0,ce.jsx)(ke,{size:12});case d.OK.ANNOTATE:return(0,ce.jsx)(we,{size:12});default:return(0,ce.jsx)(Me,{size:12})}}(t),(0,ce.jsx)("span",{style:{fontSize:i.typography.fontSize.sm,fontWeight:"600",textAlign:"center"},children:function(e){switch(e){case d.OK.EDIT:return"Edit";case d.OK.FORMAT:return"Format";case d.OK.ANNOTATE:return"Annotate";default:return e}}(t)})]})},je=function(e){var t=e.mode,n=e.onModeChange,r=e.onUndo,o=e.onRedo,a=e.canUndo,i=e.canRedo,l=e.onResetViewport,s=e.undoStack,c=e.redoStack,u=e.onJumpToHistory,f=e.onResetToLastCheckpoint,p=e.constraint,h=e.onFormatModeClick,m=e.onFreezeSelected,v=e.onUnfreezeSelected,x=e.onUnfreezeAll,g=e.hasFrozenNucleotides,y=e.hasSelectedNucleotides,b=(0,ge.Fg)().theme;return(0,ce.jsx)(Ne,{title:"drawing tools",borderRadius:8,children:(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,ce.jsx)("div",{children:(0,ce.jsx)("div",{style:{display:"flex",gap:"6px",background:b.colors.surfaceHover,padding:"4px",borderRadius:b.borderRadius.lg},children:d.eA.filter((function(e){return[d.OK.EDIT,d.OK.FORMAT,d.OK.ANNOTATE].includes(e)})).map((function(e){return(0,ce.jsx)(Oe,{tab:e,isActive:t===e,onClick:function(){e===d.OK.FORMAT&&h?h():n&&n(e)}},e)}))})}),(0,ce.jsx)(Pe,{onUndo:r,onRedo:o,canUndo:a,canRedo:i,onResetViewport:l,undoStack:s,redoStack:c,onJumpToHistory:u,onResetToLastCheckpoint:f,mode:t,constraint:p,onFreezeSelected:m,onUnfreezeSelected:v,onUnfreezeAll:x,hasFrozenNucleotides:g,hasSelectedNucleotides:y})]})})},Le=(0,ue.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),De=(0,ue.Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ze=(0,ue.Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Fe=function(e){e.onToggleBasePairEditor,e.onTogglePropertiesDrawer;var t=e.onToggleSettingsDrawer,n=e.onToggleAboutDrawer,r=e.onOpenDocs;return(0,ce.jsx)(Ne,{title:"Utilities",borderRadius:8,children:(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(n||t||r)&&(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px 12px"},children:[n&&(0,ce.jsx)(Ee.z,{onClick:n,icon:(0,ce.jsx)(Le,{size:12}),label:"Quickstart",hint:"Quickstart guide",variant:"secondary"}),t&&(0,ce.jsx)(Ee.z,{onClick:t,icon:(0,ce.jsx)(De,{size:12}),label:"Settings",hint:"Edit settings",variant:"secondary"}),r&&(0,ce.jsx)(Ee.z,{onClick:r,icon:(0,ce.jsx)(Ze,{size:12}),label:"User Guide",hint:"Open documentation",variant:"primary"})]})})})},Be=function(e){var t=e.constraint,n=e.onConstraintChange,r=e.mode,o=e.onModeChange,a=e.onUndo,i=e.onRedo,l=e.canUndo,s=e.canRedo,c=e.onResetViewport,u=e.onToggleBasePairEditor,f=e.onTogglePropertiesDrawer,p=e.onToggleSettingsDrawer,h=e.onToggleAboutDrawer,m=e.onOpenDocs,v=e.undoStack,x=e.redoStack,g=e.onJumpToHistory,y=e.onResetToLastCheckpoint,b=e.onFreezeSelected,N=e.onUnfreezeSelected,E=e.onUnfreezeAll,C=e.hasFrozenNucleotides,I=e.hasSelectedNucleotides;return(0,ce.jsxs)(be,{children:[(0,ce.jsx)(Se,{constraint:t,onConstraintChange:n}),(0,ce.jsx)(je,{mode:r||d.OK.EDIT,onModeChange:o,onUndo:a,onRedo:i,canUndo:l,canRedo:s,onResetViewport:c,undoStack:v,redoStack:x,onJumpToHistory:g,onResetToLastCheckpoint:y,constraint:t,onFreezeSelected:b,onUnfreezeSelected:N,onUnfreezeAll:E,hasFrozenNucleotides:C,hasSelectedNucleotides:I}),(0,ce.jsx)(Fe,{onToggleBasePairEditor:u,onTogglePropertiesDrawer:f,onToggleSettingsDrawer:p,onToggleAboutDrawer:h,onOpenDocs:m})]})},Ue=(n(8161),n(6088)),ze=(0,ue.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),We=(0,ue.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Ge=[{id:"general",title:"General",settings:[q.pE.COPY_FILE_NAME,q.pE.COPY_FILE_EXTENSION,q.pE.RESET_VIEWPORT_AFTER_FILE_UPLOAD,q.pE.DISABLE_NAVIGATE_AWAY_PROMPT]},{id:"editing-formatting",title:"Editing & Formatting",settings:[q.pE.USE_DEGREES,q.pE.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,q.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS,q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]},{id:"base-pair-geometry",title:"Base Pair Geometry",settings:[q.pE.CANONICAL_BASE_PAIR_DISTANCE,q.pE.WOBBLE_BASE_PAIR_DISTANCE,q.pE.MISMATCH_BASE_PAIR_DISTANCE,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,q.pE.BASE_PAIR_RADIUS,q.pE.DEFAULT_FONT_SIZE,q.pE.DEFAULT_FONT_FAMILY]},{id:"connectors",title:"Sequence Connectors",settings:[q.pE.SEQUENCE_CONNECTOR_AUTO_TRIGGER,q.pE.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD,q.pE.SEQUENCE_CONNECTOR_INTER_MOLECULE,q.pE.SEQUENCE_CONNECTOR_INTER_COMPLEX]},{id:"rendering-appearance",title:"Rendering & Appearance",settings:[q.pE.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,q.pE.CONTOUR_LINE_WIDTH,q.pE.PATH_MODE,q.pE.PATH_LINE_WIDTH,q.pE.DARK_MODE]}],He=function(e){var t=e.open,n=e.onClose,r=e.settings,o=e.setSettings,i=e.getDistanceDefaults,s=(0,ge.Fg)(),c=s.theme,d=(s.isDarkMode,(0,u.useRef)(null)),f=(0,u.useRef)(null);return(0,ce.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"600px",background:c.colors.background,boxShadow:c.shadows.xl,transform:t?"translateX(0)":"translateX(100%)",transition:c.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"2px solid ".concat(c.colors.border)},children:[(0,ce.jsxs)("div",{style:{padding:"24px 28px 20px 28px",borderBottom:"1px solid ".concat(c.colors.borderLight),display:"flex",alignItems:"center",justifyContent:"space-between",background:c.colors.surface,flexShrink:0,position:"relative"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,ce.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, ".concat(c.colors.primary,"20, ").concat(c.colors.accent,"20)"),borderRadius:c.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",color:c.colors.primary,border:"1px solid ".concat(c.colors.primary,"30")},children:(0,ce.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,ce.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73v.18a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ce.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h2",{style:{fontSize:c.typography.fontSize.xxl,fontWeight:"700",color:c.colors.text,margin:"0 0 4px 0",letterSpacing:"-0.02em"},children:"Settings"}),(0,ce.jsx)("p",{style:{fontSize:c.typography.fontSize.md,color:c.colors.textWeak||c.colors.textSecondary,margin:0,lineHeight:"1.4"},children:"Configure your application preferences and behavior"})]})]}),(0,ce.jsx)("button",{onClick:n,style:{border:"1px solid ".concat(c.colors.border),background:c.colors.surface,cursor:"pointer",fontSize:c.typography.fontSize.md,color:c.colors.textSecondary,padding:"10px",borderRadius:c.borderRadius.lg,width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:c.transitions.default,boxShadow:c.shadows.sm},onMouseEnter:function(e){e.currentTarget.style.background=c.colors.surfaceHover,e.currentTarget.style.borderColor=c.colors.borderDark,e.currentTarget.style.color=c.colors.text,e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:function(e){e.currentTarget.style.background=c.colors.surface,e.currentTarget.style.borderColor=c.colors.border,e.currentTarget.style.color=c.colors.textSecondary,e.currentTarget.style.transform="scale(1)"},children:(0,ce.jsx)(Ue.Z,{size:18})})]}),(0,ce.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"28px 28px 48px 28px",background:c.colors.backgroundSecondary},children:[(0,ce.jsx)(Ne,{title:"Import/Export",borderRadius:12,children:(0,ce.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,ce.jsxs)("button",{onClick:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.click()},style:(0,a.Z)((0,a.Z)({},Ke(c)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,ce.jsx)(ze,{size:16}),"Upload JSON"]}),(0,ce.jsxs)("button",{onClick:function(){var e=f.current,t={};if(i)try{t=i()||{}}catch(u){}for(var n=(0,a.Z)({},t),o=0,l=Object.keys(r);o<l.length;o++){var s=l[o],c=r[s];n[s]="number"===typeof c&&Number.isNaN(c)?1:c}e.href="data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(n))),e.click()},style:(0,a.Z)((0,a.Z)({},Ve(c)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,ce.jsx)(We,{size:16}),"Download JSON"]}),(0,ce.jsx)("input",{ref:d,type:"file",accept:".json",style:{display:"none"},onChange:function(e){var t=e.target.files;if(t&&0!==t.length){var n=new FileReader;n.addEventListener("load",(function(e){try{for(var t=JSON.parse(e.target.result),n=Object.keys(t),i=0,l=n;i<l.length;i++){var s=l[i],c=t[s];if(!(0,q.OP)(s)||typeof c!==q.kR[s])throw new Error("Unrecognized settings schema")}for(var u={},d=0,f=n;d<f.length;d++){var p=f[d];u[p]=t[p]}o((0,a.Z)((0,a.Z)({},r),u))}catch(h){}})),n.readAsText(t[0])}}}),(0,ce.jsx)("a",{ref:f,style:{display:"none"},download:"xrna_settings.json"})]})}),(0,ce.jsx)("div",{style:{height:"24px"}}),(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:Ge.map((function(e){return(0,ce.jsx)(Ne,{title:e.title,borderRadius:12,children:(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.settings.filter((function(e){return q.Xd.includes(e)})).map((function(e){var t=q.kR[e],n=(0,ce.jsx)(ce.Fragment,{});switch(t){case"boolean":var i=r[e];n=(0,ce.jsx)("button",{type:"button",onClick:function(){return o((0,a.Z)((0,a.Z)({},r),{},(0,l.Z)({},e,!i)))},style:{position:"relative",width:"44px",height:"24px",borderRadius:"999px",border:"1px solid ".concat(i?c.colors.primary:c.colors.border),background:i?c.colors.primary:c.colors.surface,padding:0,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:i?"flex-end":"flex-start",transition:c.transitions.default,boxShadow:c.shadows.sm},children:(0,ce.jsx)("span",{style:{width:"18px",height:"18px",borderRadius:"999px",background:i?c.colors.textInverse:c.colors.background,boxShadow:c.shadows.sm,margin:"2px"}})});break;case"number":n=(0,ce.jsx)("div",{style:{minWidth:"140px"},children:(0,ce.jsx)(ie.Z.Number,{value:r[e],setValue:function(t){return o((0,a.Z)((0,a.Z)({},r),{},(0,l.Z)({},e,t)))}})});break;case"string":n=(0,ce.jsx)("div",{style:{minWidth:"160px"},children:(0,ce.jsx)("input",{type:"text",value:r[e],onChange:function(t){return o((0,a.Z)((0,a.Z)({},r),{},(0,l.Z)({},e,t.target.value)))},placeholder:"Enter value...",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid ".concat(c.colors.border),background:c.colors.surface,color:c.colors.text,fontSize:"14px"}})});break;default:n=(0,ce.jsx)(ce.Fragment,{})}return(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2.5fr) minmax(0, 1.3fr)",gap:"8px 16px",alignItems:"center",padding:"10px 12px",borderRadius:"10px",border:"1px solid ".concat(c.colors.borderLight),background:c.colors.background,transition:c.transitions.default},onMouseEnter:function(e){e.currentTarget.style.background=c.colors.surfaceHover,e.currentTarget.style.borderColor=c.colors.border},onMouseLeave:function(e){e.currentTarget.style.background=c.colors.background,e.currentTarget.style.borderColor=c.colors.borderLight},children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,ce.jsx)("label",{title:q.GO[e],style:{color:c.colors.textStrong||c.colors.text,fontSize:"15px",fontWeight:"600",lineHeight:"1.4"},children:q.zT[e]}),(0,ce.jsx)("div",{style:{fontSize:"13px",color:c.colors.textWeak||c.colors.textSecondary,lineHeight:"1.4",opacity:.9},children:q.GO[e]})]}),(0,ce.jsx)("div",{style:{display:"flex",justifyContent:"boolean"===t?"flex-end":"flex-start",alignItems:"center"},children:n})]},e)}))})},e.id)}))})]})]})};function Ke(e){return{padding:"10px 16px",borderRadius:"10px",border:"1px solid ".concat(e.colors.border),background:e.colors.surface,color:e.colors.textStrong||e.colors.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:e.transitions.default,display:"flex",alignItems:"center",gap:"6px",boxShadow:e.shadows.sm}}function Ve(e){return(0,a.Z)((0,a.Z)({},Ke(e)),{},{background:e.colors.primary,color:e.colors.textInverse,border:"1px solid ".concat(e.colors.primary),fontWeight:"600",boxShadow:e.shadows.md})}var qe=function(e){var t=e.open,n=e.onClose,r=e.renderTabInstructions,o=(0,ge.Fg)().theme;return(0,ce.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"720px",background:o.colors.backgroundSecondary,transform:t?"translateX(0)":"translateX(100%)",transition:o.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(o.colors.border)},children:[(0,ce.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(o.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:o.colors.surfaceHover,flexShrink:0,position:"relative"},children:[(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,ce.jsx)("span",{style:{fontSize:o.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:o.colors.text},children:"Quickstart"})}),(0,ce.jsx)("button",{onClick:n,style:{border:"1px solid ".concat(o.colors.border),background:o.colors.surface,cursor:"pointer",fontSize:o.typography.fontSize.md,color:o.colors.text,padding:"6px 8px",borderRadius:o.borderRadius.md,width:"28px",height:"28px"},children:(0,ce.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,ce.jsx)("path",{d:"M9 3L3 9M3 3l6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,ce.jsxs)("div",{style:{flex:1,overflow:"auto",padding:16},children:[(0,ce.jsx)(Ne,{title:"Quickstart",borderRadius:8,children:(0,ce.jsx)("div",{style:{fontSize:o.typography.fontSize.md,color:o.colors.text},children:r(d.OK.ABOUT)})}),(0,ce.jsx)("div",{style:{height:12}})]})]})},Xe=(0,ue.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ye=(0,ue.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Qe=(0,ue.Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),$e=(0,ue.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Je=[function(e){return"https://api.allorigins.win/raw?url=".concat(encodeURIComponent(e))},function(e){return"https://corsproxy.io/?".concat(encodeURIComponent(e))},function(e){return"https://proxy.cors.sh/".concat(e)}];function et(e){return tt.apply(this,arguments)}function tt(){return tt=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i,l,s,c,u,d,f,p=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=(n=p.length>1&&void 0!==p[1]?p[1]:{}).timeout,i=void 0===o?3e4:o,l=n.headers,s=void 0===l?{}:l,c=[],u=(0,r.Z)().mark((function e(){var n,o,l,u,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Je[d](t),e.prev=1,o=new AbortController,l=setTimeout((function(){return o.abort()}),i),e.next=6,fetch(n,{signal:o.signal,headers:(0,a.Z)({},s)});case 6:if(u=e.sent,clearTimeout(l),!u.ok){e.next=10;break}return e.abrupt("return",{v:u});case 10:c.push("Proxy ".concat(d+1,": HTTP ").concat(u.status," ").concat(u.statusText)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),f=e.t0 instanceof Error?e.t0.message:String(e.t0),c.push("Proxy ".concat(d+1,": ").concat(f));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})),d=0;case 5:if(!(d<Je.length)){e.next=13;break}return e.delegateYield(u(),"t0",7);case 7:if("object"!==typeof(f=e.t0)){e.next=10;break}return e.abrupt("return",f.v);case 10:d++,e.next=5;break;case 13:throw new Error("All CORS proxies failed for ".concat(t,":\n").concat(c.join("\n")));case 14:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return rt=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,et(t,n);case 3:return o=e.sent,e.abrupt("return",o.json());case 5:case"end":return e.stop()}}),e)}))),rt.apply(this,arguments)}function ot(e){if(!e)return{};if(e===R.default.Type.CANONICAL||e===R.default.Type.WOBBLE||e===R.default.Type.MISMATCH)return{};var t=String(e).split("_");if(0===t.length)return{};var n=t[0];if("cis"!==n&&"trans"!==n)return{};var r=n,o=1;function a(){var e=t[o],n=t[o+1];return"watson"===e&&"crick"===n?(o+=2,"watson_crick"):"sugar"===e&&"edge"===n?(o+=2,"sugar_edge"):"hoogsteen"===e?(o+=1,"hoogsteen"):void 0}var i=a(),l=a();return i&&l?{orientation:r,edgeA:i,edgeB:l}:{orientation:r}}function at(e,t,n){if(e&&t&&n)return"".concat(e,"_").concat(t,"_").concat(n)}function it(e){if(!e)return"auto";switch(e){case R.default.Type.CANONICAL:return"canonical";case R.default.Type.WOBBLE:return"wobble";case R.default.Type.MISMATCH:return"mismatch";default:return"custom"}}function lt(e){return"custom"===e?"LW schema":e}function st(e){var t=e.title,n=e.onClick,r=e.kind,o=e.theme,a={width:28,height:28,borderRadius:6,border:"1px solid ".concat(o.colors.border),background:o.colors.background,color:o.colors.text,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"},i={edit:we,delete:Xe,save:Ye,cancel:Ue.Z}[r];return(0,ce.jsx)("button",{title:t,onClick:n,style:a,children:(0,ce.jsx)(i,{size:16})})}var ct=u.memo(st);var ut=function(e){var t,n,d,f,p,h,m,v,x,g,y=e.open,b=e.onClose,N=e.rnaComplexProps,E=e.globalHelices,C=e.errorMessage,I=e.constrainRelevantHelices,S=e.handleNewBasePair,_=e.removeBasePair,A=e.reformatSelectedHelices,P=(0,ge.Fg)().theme,k=(0,u.useState)(360),w=(0,s.Z)(k,2),M=w[0],O=w[1],j=(0,u.useState)(!1),L=(0,s.Z)(j,2),D=L[0],Z=L[1],F=(0,u.useState)("Base Pairs"),B=(0,s.Z)(F,2),U=B[0],z=B[1],W=(0,u.useState)("Constrained"),G=(0,s.Z)(W,2),H=G[0],K=G[1],V=(0,u.useRef)(null),Y=(0,u.useRef)(0),Q=(0,u.useRef)(360),$=(0,u.useRef)(E);$.current=E;var J=(0,u.useRef)(null),ee=(0,u.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],oe=(0,u.useState)(!1),ae=(0,s.Z)(oe,2),ie=ae[0],le=ae[1],se=(0,u.useState)(""),ue=(0,s.Z)(se,2),de=ue[0],fe=ue[1],pe=(0,u.useState)(""),he=(0,s.Z)(pe,2),me=he[0],ve=he[1],ye=(0,u.useState)(!1),be=(0,s.Z)(ye,2),Ne=be[0],Ee=be[1],Ce=(0,u.useState)(!0),Ie=(0,s.Z)(Ce,2),Se=Ie[0],_e=Ie[1],Ae=(0,u.useState)(null),Te=(0,s.Z)(Ae,2),Pe=Te[0],Re=Te[1],ke=(0,u.useState)(!1),we=(0,s.Z)(ke,2),Me=we[0],Oe=we[1],je=(0,u.useRef)(Me);je.current=Me;var Le=(0,u.useState)(!0),De=(0,s.Z)(Le,2),Ze=De[0],Fe=De[1],Be=(0,u.useState)(!0),Ue=(0,s.Z)(Be,2),Ge=Ue[0],He=Ue[1],Ke=(0,u.useState)((function(){var e=Ze?Number.parseInt(Object.keys(N)[0]):void 0,t=void 0,n=void 0;if(void 0!==e&&N[e]){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(t=r[0],n=r[0])}return{typeBase:"auto",rnaComplexIndex:e,rnaMoleculeName0:t,rnaMoleculeName1:n,length:1}})),Ve=(0,s.Z)(Ke,2),qe=Ve[0],Xe=Ve[1],Ye=(0,u.useState)(),Je=(0,s.Z)(Ye,2),et=Je[0],tt=Je[1],rt=(0,u.useState)({}),st=(0,s.Z)(rt,2),ut=st[0],dt=st[1],ft=(0,u.useState)(!1),pt=(0,s.Z)(ft,2),ht=(pt[0],pt[1]),mt=(0,u.useRef)(N);mt.current=N;var vt=(0,u.useRef)(D);vt.current=D;var xt=(0,u.useContext)(X._.BasePair.SetKeysToEdit),gt=((0,u.useRef)(xt),(0,u.useContext)(X._.App.PushToUndoStack));(0,u.useRef)(gt).current=gt;var yt=(0,u.useContext)(X._.App.Settings),bt=(0,u.useContext)(X._.BasePair.AverageDistances);(0,u.useRef)(bt).current=bt,(0,u.useRef)(yt).current=yt,(0,u.useEffect)((function(){function e(e){if(vt.current){var t=Y.current-e.clientY,n=Math.min(Math.max(Q.current+t,220),window.innerHeight-80);O(n)}}function t(){vt.current&&Z(!1)}return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}}),[]);var Nt=(0,u.useMemo)((function(){return"Constrained"===H?I(E):E}),[H,I,E]),Et=(0,u.useRef)(Nt);Et.current=Nt;var Ct=(0,u.useMemo)((function(){var e,t=[],n=[],r=(0,c.Z)(Nt);try{var o=function(){for(var r=e.value,o=r.rnaComplexIndex,a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,l=r.start,s=r.stop,c=N[o],u=c.rnaMoleculeProps[a],d=c.rnaMoleculeProps[i],f=Math.abs(l[0]-s[0])+1,p=Math.sign(s[0]-l[0]),h=Math.sign(s[1]-l[1]),m=l[0],v=l[1],x=void 0,g=0;g<f;g++){var y=c.basePairs[a],b=null===y||void 0===y?void 0:y[m],E=null===b||void 0===b?void 0:b.find((function(e){return e.rnaMoleculeName===i&&e.nucleotideIndex===v}));if(void 0!==E){var C=E.basePairType;void 0===x?x=null!==C&&void 0!==C?C:null:x!==C&&(x=null),t.push({rnaComplexIndex:o,rnaComplexName:c.name,rnaMoleculeName0:a,nucleotideIndex0:m,formattedNucleotideIndex0:u.firstNucleotideIndex+m,rnaMoleculeName1:i,nucleotideIndex1:v,formattedNucleotideIndex1:d.firstNucleotideIndex+v,type:C}),m+=p,v+=h}else x=null,m+=p,v+=h}n.push({rnaComplexIndex:o,rnaComplexName:c.name,rnaMoleculeName0:a,nucleotideIndex0Start:l[0],nucleotideIndex0End:s[0],formattedNucleotideIndex0Start:l[0]+u.firstNucleotideIndex,formattedNucleotideIndex0End:s[0]+u.firstNucleotideIndex,rnaMoleculeName1:i,nucleotideIndex1Start:l[1],nucleotideIndex1End:s[1],formattedNucleotideIndex1Start:l[1]+d.firstNucleotideIndex,formattedNucleotideIndex1End:s[1]+d.firstNucleotideIndex,type:null===x?void 0:x,length:f,isGrouped:!0})};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return{selectedBasePairs:t,selectedHelices:n}}),[N,Nt]),It=Ct.selectedBasePairs,St=Ct.selectedHelices,_t=(0,u.useMemo)((function(){return"Base Pairs"===U?It:St}),[U,St,It]),At=(0,u.useCallback)((function(e){if(null==e)return"";var t=/[",\n]/.test(e),n=e.replace(/"/g,'""');return t?'"'.concat(n,'"'):n}),[]),Tt=(0,u.useCallback)((function(e){for(var t=[],n="",r=!1,o=0;o<e.length;o++){var a=e[o];r?'"'===a?o+1<e.length&&'"'===e[o+1]?(n+='"',o++):r=!1:n+=a:","===a?(t.push(n),n=""):'"'===a?r=!0:n+=a}return t.push(n),t}),[]),Pt=(0,u.useCallback)((function(e){return!0===e.isGrouped}),[]),Rt=(0,u.useCallback)((function(){var e,t=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"].join(","),n=[],r=(0,c.Z)(_t);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(Pt(o))for(var a=o.nucleotideIndex1End>o.nucleotideIndex1Start?1:-1,l=o.formattedNucleotideIndex1End>o.formattedNucleotideIndex1Start?1:-1,s=0;s<o.length;s++)n.push({rnaComplexIndex:o.rnaComplexIndex,rnaComplexName:o.rnaComplexName,rnaMoleculeName0:o.rnaMoleculeName0,nucleotideIndex0:o.nucleotideIndex0Start+s,formattedNucleotideIndex0:o.formattedNucleotideIndex0Start+s,rnaMoleculeName1:o.rnaMoleculeName1,nucleotideIndex1:o.nucleotideIndex1Start+s*a,formattedNucleotideIndex1:o.formattedNucleotideIndex1Start+s*l,type:o.type});else n.push(o)}}catch(m){r.e(m)}finally{r.f()}var u=n.map((function(e){var t=it(e.type),n=ot(e.type),r=n.orientation,o=n.edgeA,a=n.edgeB;return[At(e.rnaComplexName),At(e.rnaMoleculeName0),String(e.formattedNucleotideIndex0),At(e.rnaMoleculeName1),String(e.formattedNucleotideIndex1),At(t),At(null!==r&&void 0!==r?r:""),At(null!==o&&void 0!==o?o:""),At(null!==a&&void 0!==a?a:"")].join(",")})),d=[t].concat((0,i.Z)(u)).join("\n"),f=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(f),h=document.createElement("a");h.href=p,h.download="base_pairs.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(p)}),[Pt,At,_t]),kt=(0,u.useCallback)((function(e){var t=mt.current,n=e.replace(/\r\n?/g,"\n").split("\n").filter((function(e){return e.trim().length>0}));if(0===n.length)throw"CSV is empty.";var r=Tt(n[0]).map((function(e){return e.trim()})),o=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"];if(r.length!==o.length||!o.every((function(e,t){return r[t]===e})))throw"CSV header is invalid. Expected: ".concat(o.join(","));for(var a=[],l=new Set(["auto","canonical","wobble","mismatch","custom"]),u=new Set(["cis","trans"]),d=new Set(["watson_crick","hoogsteen","sugar_edge"]),f=function(){var e=n[p];if(0===e.trim().length)return"continue";var r=Tt(e).map((function(e){return e.trim()}));if(r.length!==o.length)throw"Line #".concat(p+1," has ").concat(r.length," column(s); expected ").concat(o.length,".");var i=(0,s.Z)(r,9),c=i[0],f=i[1],h=i[2],m=i[3],v=i[4],x=i[5],g=i[6],y=i[7],b=i[8],N=Object.entries(t).find((function(e){return(0,s.Z)(e,2)[1].name===c}));if(!N)throw"Line #".concat(p+1,": Unknown RNA complex name '").concat(c,"'.");var E=parseInt(N[0]),C=t[E];if(!(f in C.rnaMoleculeProps))throw"Line #".concat(p+1,": Unknown RNA molecule #1 '").concat(f,"'.");if(!(m in C.rnaMoleculeProps))throw"Line #".concat(p+1,": Unknown RNA molecule #2 '").concat(m,"'.");var I=C.rnaMoleculeProps[f],S=C.rnaMoleculeProps[m];if(!/^[-+]?\d+$/.test(h))throw"Line #".concat(p+1,": formattedNucleotideIndex0 is not an integer.");if(!/^[-+]?\d+$/.test(v))throw"Line #".concat(p+1,": formattedNucleotideIndex1 is not an integer.");var _=parseInt(h),A=parseInt(v),T=_-I.firstNucleotideIndex,P=A-S.firstNucleotideIndex;if(!(T in I.nucleotideProps))throw"Line #".concat(p+1,": Nucleotide #1 index '").concat(_,"' does not exist in '").concat(f,"'.");if(!(P in S.nucleotideProps))throw"Line #".concat(p+1,": Nucleotide #2 index '").concat(A,"' does not exist in '").concat(m,"'.");var k,w=x.toLowerCase();if(!l.has(w))throw"Line #".concat(p+1,": Invalid typeBase '").concat(x,"'.");if("auto"===w)k=void 0;else if("canonical"===w)k=R.default.Type.CANONICAL;else if("wobble"===w)k=R.default.Type.WOBBLE;else if("mismatch"===w)k=R.default.Type.MISMATCH;else if("custom"===w){var M=g,O=y,j=b;if(!u.has(M))throw"Line #".concat(p+1,": orientation must be 'cis' or 'trans' for custom types.");if(!d.has(O)||!d.has(j))throw"Line #".concat(p+1,": edgeA/edgeB must be one of watson_crick, hoogsteen, sugar_edge.");if(!(k=at(M,O,j)))throw"Line #".concat(p+1,": invalid custom type configuration.")}a.push({rnaComplexIndex:E,mol0:f,idx0:T,mol1:m,idx1:P,type:k})},p=1;p<n.length;p++)f();for(var h={},m=0,v=Object.entries(t);m<v.length;m++){var x=(0,s.Z)(v[m],2),g=x[0],y=x[1],b=parseInt(g);h[b]=[];for(var N=0,E=Object.entries(y.basePairs);N<E.length;N++)for(var C=(0,s.Z)(E[N],2),I=C[0],S=C[1],_=0,A=Object.entries(S);_<A.length;_++){var P,k=(0,s.Z)(A[_],2),w=k[0],M=k[1],O=parseInt(w),j=(0,c.Z)(M);try{for(j.s();!(P=j.n()).done;){var L=P.value,D={rnaMoleculeName:I,nucleotideIndex:O},Z=[D,{rnaMoleculeName:L.rnaMoleculeName,nucleotideIndex:L.nucleotideIndex}].sort(T.compareBasePairKeys),F=(0,s.Z)(Z,2),B=F[0],U=F[1];B.rnaMoleculeName===D.rnaMoleculeName&&B.nucleotideIndex===D.nucleotideIndex&&h[b].push({keys0:B,keys1:U})}}catch(fe){j.e(fe)}finally{j.f()}}}for(var z={},W=0,G=a;W<G.length;W++){var H=G[W];H.rnaComplexIndex in z||(z[H.rnaComplexIndex]=[]);var K=[{rnaMoleculeName:H.mol0,nucleotideIndex:H.idx0},{rnaMoleculeName:H.mol1,nucleotideIndex:H.idx1}].sort(T.compareBasePairKeys),V=(0,s.Z)(K,2),q=V[0],X=V[1];z[H.rnaComplexIndex].push({keys0:q,keys1:X})}gt();for(var Y=0,Q=Object.entries(t);Y<Q.length;Y++){var $=(0,s.Z)(Q[Y],2),J=$[0],ee=$[1];parseInt(J);ee.basePairs={}}for(var te=0,ne=a;te<ne.length;te++){var re=ne[te],oe=t[re.rnaComplexIndex];(0,T.insertBasePair)(oe,re.mol0,re.idx0,re.mol1,re.idx1,T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:re.type})}var ae,ie={},le=new Set([].concat((0,i.Z)(Object.keys(t).map((function(e){return parseInt(e)}))),(0,i.Z)(a.map((function(e){return e.rnaComplexIndex}))))),se=(0,c.Z)(le);try{for(se.s();!(ae=se.n()).done;){var ce,ue,de=ae.value;ie[de]={add:null!==(ce=z[de])&&void 0!==ce?ce:[],delete:null!==(ue=h[de])&&void 0!==ue?ue:[]}}}catch(fe){se.e(fe)}finally{se.f()}xt(ie)}),[Tt,xt,gt]),wt=(0,u.useCallback)((function(){var e;return null===(e=J.current)||void 0===e?void 0:e.click()}),[]),Mt=(0,u.useCallback)(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(n=t.target.files)||void 0===n?void 0:n[0],t.currentTarget.value="",o){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o.text();case 6:a=e.sent;try{kt(a)}catch(r){alert("string"===typeof r?r:r.message)}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[kt]),Ot=(0,u.useCallback)((0,o.Z)((0,r.Z)().mark((function e(){var t,n,o,a,i,u,d,f,p,h,m,v,x,g,y,b,N,E,C,I,A,P,k,w,M,O,j,L,D,Z,F,B,U,z,W,G,H,K,V,q,X;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=de.trim().toUpperCase(),n=me.trim(),t){e.next=5;break}return Re("Please enter a PDB ID."),e.abrupt("return");case 5:if(n){e.next=8;break}return Re("Please enter a Chain ID."),e.abrupt("return");case 8:return Re(null),Ee(!0),e.prev=10,o="https://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=".concat(encodeURIComponent(t),"&chain=").concat(encodeURIComponent(n)),e.next=14,nt(o);case 14:if("No sequence was found for the given id"!==(a=e.sent).sequence&&a.sequence){e.next=17;break}throw new Error("No sequence found for ".concat(t," chain ").concat(n,"."));case 17:if(i=a.sequence,u=a.annotations||[],d=mt.current,0!==(f=Object.keys(d).map((function(e){return parseInt(e)}))).length){e.next=23;break}throw new Error("No RNA complex found.");case 23:if(p=f[0],h=d[p],0!==(m=Object.keys(h.rnaMoleculeProps)).length){e.next=28;break}throw new Error("No RNA molecule found.");case 28:if(v=m[0],x=h.rnaMoleculeProps[v],g=Object.keys(x.nucleotideProps).length,i.length===g){e.next=33;break}throw new Error("Length mismatch: FR3D=".concat(i.length,", structure=").concat(g,"."));case 33:if(y=function(e){switch(e.toUpperCase()){case"W":return"watson_crick";case"H":return"hoogsteen";case"S":return"sugar_edge";default:return}},b=function(e){if(e&&!(e.length<3)){var t=e;if(t.toLowerCase().startsWith("n")&&(t=t.substring(1)),!(t.length<3)){var n="t"===t[0].toLowerCase()?"trans":"cis",r=y(t[1]),o=y(t[2]);if(r&&o)return at(n,r,o)}}},gt(),N=[],Se){for(E=0,C=Object.entries(h.basePairs);E<C.length;E++)for(I=(0,s.Z)(C[E],2),A=I[0],P=I[1],k=0,w=Object.entries(P);k<w.length;k++){M=(0,s.Z)(w[k],2),O=M[0],j=M[1],L=parseInt(O),D=(0,c.Z)(j);try{for(D.s();!(Z=D.n()).done;)F=Z.value,B={rnaMoleculeName:A,nucleotideIndex:L},U={rnaMoleculeName:F.rnaMoleculeName,nucleotideIndex:F.nucleotideIndex},z=[B,U].sort(T.compareBasePairKeys),W=(0,s.Z)(z,2),G=W[0],H=W[1],G.rnaMoleculeName===B.rnaMoleculeName&&G.nucleotideIndex===B.nucleotideIndex&&(N.push({keys0:G,keys1:H}),_(p,A,F.rnaMoleculeName,L,F.nucleotideIndex))}catch(Y){D.e(Y)}finally{D.f()}}h.basePairs={}}K=[],V=(0,c.Z)(u),e.prev=40,X=(0,r.Z)().mark((function e(){var t,n,o,a,i,l,c,u,d,f,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=q.value,n=parseInt(t.seq_id1,10)-1,o=parseInt(t.seq_id2,10)-1,n>=0&&n<g&&o>=0&&o<g&&n!==o&&(c=t.bp||"cWW",u=null!==(a=b(c))&&void 0!==a?a:R.default.Type.CANONICAL,null!==(i=h.basePairs[v])&&void 0!==i&&null!==(l=i[n])&&void 0!==l&&l.find((function(e){return e.rnaMoleculeName===v&&e.nucleotideIndex===o}))||((0,T.insertBasePair)(h,v,n,v,o,T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:u}),d=[{rnaMoleculeName:v,nucleotideIndex:n},{rnaMoleculeName:v,nucleotideIndex:o}].sort(T.compareBasePairKeys),f=(0,s.Z)(d,2),p=f[0],m=f[1],K.push({keys0:p,keys1:m})));case 4:case"end":return e.stop()}}),e)})),V.s();case 43:if((q=V.n()).done){e.next=47;break}return e.delegateYield(X(),"t0",45);case 45:e.next=43;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(40),V.e(e.t1);case 52:return e.prev=52,V.f(),e.finish(52);case 55:xt((0,l.Z)({},p,{add:K,delete:N})),S(void 0,void 0),le(!1),fe(""),ve(""),e.next=65;break;case 62:e.prev=62,e.t2=e.catch(10),Re(e.t2 instanceof Error?e.t2.message:String(e.t2));case 65:return e.prev=65,Ee(!1),e.finish(65);case 68:case"end":return e.stop()}}),e,null,[[10,62,65,68],[40,49,52,55]])}))),[de,me,Se,gt,xt,S,_]),jt=(0,u.useCallback)((function(e,t,n){var r,o=mt.current[e];if(o){var a=o.rnaMoleculeProps[t];if(a){var i=n-a.firstNucleotideIndex;if(i in a.nucleotideProps){var l=null===(r=a.nucleotideProps[i])||void 0===r?void 0:r.symbol;return null===l||void 0===l?void 0:l.toUpperCase()}}}}),[]),Lt=(0,u.useCallback)((function(e){var t=mt.current,n=($.current,t[e.rnaComplexIndex]);if(n){gt();var r=n.basePairs[e.rnaMoleculeName0],o=n.basePairs[e.rnaMoleculeName1],a=(0,l.Z)({},e.rnaComplexIndex,{add:[],delete:[]}),i=a[e.rnaComplexIndex],c=[];if("nucleotideIndex0"in e)g(e.nucleotideIndex0,e.nucleotideIndex1);else for(var u=e.nucleotideIndex0Start,d=e.nucleotideIndex1Start,f=e.nucleotideIndex0End>e.nucleotideIndex0Start?1:-1,p=e.nucleotideIndex1End>e.nucleotideIndex1Start?1:-1,h=0;h<e.length;h++)g(u,d),u+=f,d+=p;xt(a);for(var m=function(){var t=(0,s.Z)(x[v],2),n=t[0],a=t[1];if(r&&n in r){var i=r[n],l=i.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName1&&t.nucleotideIndex===a}));-1!==l&&(1===i.length?delete r[n]:i.splice(l,1))}if(o&&a in o){var c=o[a],u=c.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName0&&t.nucleotideIndex===n}));-1!==u&&(1===c.length?delete o[a]:c.splice(u,1))}_(e.rnaComplexIndex,e.rnaMoleculeName0,e.rnaMoleculeName1,n,a)},v=0,x=c;v<x.length;v++)m()}function g(t,n){i.delete.push({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:t},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:n}}),c.push([t,n])}}),[gt,xt,_]),Dt=(0,u.useCallback)((function(){var e,t=mt.current,n=je.current,r=qe;if(null!=r.rnaComplexIndex){var o=t[r.rnaComplexIndex];if(o){var a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,c=o.rnaMoleculeProps[a],u=o.rnaMoleculeProps[i];if(c&&u&&null!=r.formattedNucleotideIndex0&&null!=r.formattedNucleotideIndex1){var d=r.formattedNucleotideIndex0-c.firstNucleotideIndex,f=r.formattedNucleotideIndex1-u.firstNucleotideIndex;if(d in c.nucleotideProps&&f in u.nucleotideProps&&(a!==i||d!==f)){var p=null!==(e=r.length)&&void 0!==e?e:1,h="custom"===r.typeBase?at(r.orientation,r.edgeA,r.edgeB):"canonical"===r.typeBase?R.default.Type.CANONICAL:"wobble"===r.typeBase?R.default.Type.WOBBLE:"mismatch"===r.typeBase?R.default.Type.MISMATCH:void 0;gt(),n&&xe(o,a,i,d,f,p,h,yt);for(var m=[],v=0;v<p;v++){var x=d+v,g=f-v;if(!(x in c.nucleotideProps)||!(g in u.nucleotideProps))break;(0,T.insertBasePair)(o,a,x,i,g,T.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING,{basePairType:h});var y=[{rnaMoleculeName:a,nucleotideIndex:x},{rnaMoleculeName:i,nucleotideIndex:g}].sort(T.compareBasePairKeys),b=(0,s.Z)(y,2),N=b[0],E=b[1];m.push({keys0:N,keys1:E})}xt((0,l.Z)({},r.rnaComplexIndex,{add:m,delete:[]})),re(!1),Xe({typeBase:"auto"}),S({rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName0,nucleotideIndex:d},{rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName1,nucleotideIndex:f})}}}}}),[qe,xt,gt,S]),Zt=(0,u.useCallback)((function(e,t){var n,r,o=mt.current;"nucleotideIndex0"in e?(n=e.nucleotideIndex0,r=e.nucleotideIndex1):(n=e.nucleotideIndex0Start,r=e.nucleotideIndex1Start),tt(t);var a=o[e.rnaComplexIndex],i=a.rnaMoleculeProps[e.rnaMoleculeName0],l=a.rnaMoleculeProps[e.rnaMoleculeName1],s=ot(e.type);dt({rnaComplexIndex:e.rnaComplexIndex,rnaMoleculeName0:e.rnaMoleculeName0,formattedNucleotideIndex0:n+i.firstNucleotideIndex,rnaMoleculeName1:e.rnaMoleculeName1,formattedNucleotideIndex1:r+l.firstNucleotideIndex,typeBase:it(e.type),orientation:s.orientation,edgeA:s.edgeA,edgeB:s.edgeB})}),[]),Ft=(0,u.useCallback)((function(e){var t=ut;if(void 0!==t.rnaComplexIndex&&void 0!==t.rnaMoleculeName0&&void 0!==t.rnaMoleculeName1&&void 0!==t.formattedNucleotideIndex0&&void 0!==t.formattedNucleotideIndex1){var n=t.rnaMoleculeName0,r=t.rnaMoleculeName1,o=N[t.rnaComplexIndex],a=o.rnaMoleculeProps[n],i=o.rnaMoleculeProps[r],s=t.formattedNucleotideIndex0-a.firstNucleotideIndex,c=t.formattedNucleotideIndex1-i.firstNucleotideIndex;if(s in a.nucleotideProps&&c in i.nucleotideProps){gt();var u=N[e.rnaComplexIndex],d=u.basePairs[e.rnaMoleculeName0];if(d&&e.nucleotideIndex0 in d){var f=d[e.nucleotideIndex0],p=f.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName1&&t.nucleotideIndex===e.nucleotideIndex1}));-1!==p&&(1===f.length?delete d[e.nucleotideIndex0]:f.splice(p,1))}var h=u.basePairs[e.rnaMoleculeName1];if(h&&e.nucleotideIndex1 in h){var m=h[e.nucleotideIndex1],v=m.findIndex((function(t){return t.rnaMoleculeName===e.rnaMoleculeName0&&t.nucleotideIndex===e.nucleotideIndex0}));-1!==v&&(1===m.length?delete h[e.nucleotideIndex1]:m.splice(v,1))}var x=void 0;"custom"===t.typeBase?x=at(t.orientation,t.edgeA,t.edgeB):"canonical"===t.typeBase?x=R.default.Type.CANONICAL:"wobble"===t.typeBase?x=R.default.Type.WOBBLE:"mismatch"===t.typeBase&&(x=R.default.Type.MISMATCH),(0,T.insertBasePair)(u,n,s,r,c,T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:x});var g=[{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}].sort(T.compareBasePairKeys),y=g[0],b=g[1],E=[{rnaMoleculeName:n,nucleotideIndex:s},{rnaMoleculeName:r,nucleotideIndex:c}].sort(T.compareBasePairKeys),C=E[0],I=E[1];xt((0,l.Z)({},e.rnaComplexIndex,{add:[{keys0:C,keys1:I}],delete:[{keys0:y,keys1:b}]}))}}}),[ut]),Bt=(0,u.useCallback)((function(e){var t,n=mt.current;if(void 0!==ut.rnaComplexIndex&&void 0!==ut.rnaMoleculeName0&&void 0!==ut.rnaMoleculeName1){var r=null!==(t=ut.length)&&void 0!==t?t:e.length;gt();for(var o,a=(0,l.Z)({},ut.rnaComplexIndex,{add:[],delete:[]}),i=a[ut.rnaComplexIndex],s=n[ut.rnaComplexIndex],c=(s.rnaMoleculeProps[ut.rnaMoleculeName0],s.rnaMoleculeProps[ut.rnaMoleculeName1],s.basePairs[ut.rnaMoleculeName0]),u=s.basePairs[ut.rnaMoleculeName1],d=Math.sign(e.nucleotideIndex0End-e.nucleotideIndex0Start),f=Math.sign(e.nucleotideIndex1End-e.nucleotideIndex1Start),p=e.nucleotideIndex0Start,h=e.nucleotideIndex1Start,m=0;m<e.length;m++){for(var v=c[p],x=u[h],g=function(){var e=b[y],t=e.array,n=e.record,r=e.nucleotideIndex,o=e.target;1===t.length?delete n[r]:t.splice(t.findIndex((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===o.rnaMoleculeName&&n===o.nucleotideIndex})),1)},y=0,b=[{array:v,record:c,nucleotideIndex:p,target:{rnaMoleculeName:ut.rnaMoleculeName1,nucleotideIndex:h}},{array:x,record:u,nucleotideIndex:h,target:{rnaMoleculeName:ut.rnaMoleculeName0,nucleotideIndex:p}}];y<b.length;y++)g();i.delete.push({keys0:{rnaMoleculeName:ut.rnaMoleculeName0,nucleotideIndex:p},keys1:{rnaMoleculeName:ut.rnaMoleculeName1,nucleotideIndex:h}}),p+=d,h+=f}switch(ut.typeBase){case"custom":o=at(ut.orientation,ut.edgeA,ut.edgeB);break;case"canonical":o=R.default.Type.CANONICAL;break;case"wobble":o=R.default.Type.WOBBLE;break;case"mismatch":o=R.default.Type.MISMATCH;break;case"auto":o=void 0;break;default:throw new Error("Unhandled switch case")}d=1,f=-1,p=e.nucleotideIndex0Start,h=e.nucleotideIndex1Start;for(var N=0;N<r;N++)(0,T.insertBasePair)(s,ut.rnaMoleculeName0,p,ut.rnaMoleculeName1,h,T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:o}),i.add.push({keys0:{rnaMoleculeName:ut.rnaMoleculeName0,nucleotideIndex:p},keys1:{rnaMoleculeName:ut.rnaMoleculeName1,nucleotideIndex:h}}),p+=d,h+=f;[i.add,i.delete].forEach((function(e){return e.sort(T.compareFullBasePairKeys)})),xt(a),S(void 0,void 0)}}),[ut]),Ut=(0,u.useCallback)((function(e){var t=ot(e.type).orientation;if(t)return t;var n=it(e.type);return"canonical"===n||"wobble"===n||"mismatch"===n?"cis":"auto"===n?"auto":"cis"}),[]),zt=(0,u.useCallback)((function(e){var t=ot(e.type).edgeA;if(t)return t;var n=it(e.type);return"auto"===n?"auto":"canonical"===n||"wobble"===n?"watson_crick":"unknown"}),[]),Wt=(0,u.useCallback)((function(e){var t=ot(e.type).edgeB;if(t)return t;var n=it(e.type);return"auto"===n?"auto":"canonical"===n?"watson_crick":"wobble"===n?"hoogsteen":"unknown"}),[]),Gt=(0,u.useCallback)((function(e){return{position:"sticky",top:0,zIndex:1,textAlign:"center",fontSize:13,textTransform:"uppercase",letterSpacing:.3,padding:"10px 12px",minWidth:e,maxWidth:e,whiteSpace:"nowrap",background:P.colors.surfaceHover,borderBottom:"1px solid ".concat(P.colors.border),borderInline:"1px solid ".concat(P.colors.border),color:P.colors.text}}),[P]),Ht=(0,u.useCallback)((function(e){return{padding:"8px 12px",minWidth:e,maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:12,textAlign:"center",color:P.colors.text}}),[P]),Kt=(0,u.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{width:130,padding:"6px 8px",border:"1px solid ".concat(P.colors.border),borderRadius:6,fontSize:12,background:P.colors.background,color:P.colors.text,opacity:e?1:.6}}),[P]),Vt=(0,u.useCallback)((function(){return{width:100,padding:"6px 8px",border:"1px solid ".concat(P.colors.border),borderRadius:6,fontSize:12,color:P.colors.text,background:P.colors.background}}),[P]),qt=((0,u.useCallback)((function(){return{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(P.colors.border),background:P.colors.background,fontSize:12,fontWeight:600,color:P.colors.text,cursor:"pointer"}}),[P]),(0,u.useCallback)((function(){return{width:"100%",padding:"4px 6px",border:"1px solid ".concat(P.colors.border),borderRadius:6,fontSize:12,color:P.colors.text,background:P.colors.background}}),[P])),Xt=((0,u.useCallback)((function(){return{padding:"4px 8px",borderRadius:6,border:"1px solid ".concat(P.colors.border),background:P.colors.background,fontSize:11,fontWeight:600,color:P.colors.text,cursor:"pointer"}}),[P]),(0,u.useMemo)((function(){return yt[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}),[yt]));(0,u.useRef)(Xt).current=Xt;var Yt=(0,u.useCallback)((function(){return A(Et.current)}),[]);return(0,u.useEffect)((function(){var e=1===Object.keys(N).length;Fe(e),He(e&&1===Object.keys(Object.values(N)[0].rnaMoleculeProps).length)}),[N]),(0,u.useEffect)((function(){return tt(void 0)}),[U,H]),(0,ce.jsxs)("div",{ref:V,style:{position:"fixed",left:429,right:0,bottom:0,height:y?M:0,transform:y?"translateY(0)":"translateY(100%)",transition:"transform 0.3s ease, height 0.3s ease",background:P.colors.surface,borderTop:"1px solid ".concat(P.colors.border),zIndex:2100,display:"flex",flexDirection:"column"},children:[(0,ce.jsx)("div",{onMouseDown:function(e){Z(!0),Y.current=e.clientY,Q.current=M},style:{height:10,cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{width:48,height:4,borderRadius:2,background:P.colors.border}})}),(0,ce.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid ".concat(P.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:P.colors.surface},children:[(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",gap:10},children:(0,ce.jsxs)("div",{style:{display:"flex",gap:6,background:P.colors.surfaceHover,padding:"4px",borderRadius:8},children:[["Base Pairs","Helices"].map((function(e){return(0,ce.jsx)("button",{onClick:function(){return z(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:U===e?P.colors.background:"transparent",color:P.colors.text,boxShadow:U===e?P.shadows.sm:"none",cursor:"pointer"},children:e},e)})),"\xa0|\xa0",["Constrained","Global"].map((function(e){return(0,ce.jsx)("button",{onClick:function(){return K(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:H===e?P.colors.background:"transparent",color:P.colors.text,boxShadow:H===e?P.shadows.sm:"none",cursor:"pointer"},children:e},e)}))]})}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)("input",{ref:J,type:"file",accept:".csv,text/csv",style:{display:"none"},onChange:Mt}),(0,ce.jsxs)("button",{onClick:Rt,title:"Export table to CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(P.colors.border),background:P.colors.background,color:P.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,ce.jsx)(We,{size:14})," Export"]}),(0,ce.jsxs)("button",{onClick:wt,title:"Import table from CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(P.colors.border),background:P.colors.background,color:P.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,ce.jsx)(ze,{size:14})," Import"]}),(0,ce.jsxs)("button",{onClick:function(){return le(!ie)},title:"Import base pairs from FR3D",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(ie?P.colors.primary:P.colors.border),background:ie?P.colors.primary:P.colors.background,color:ie?P.colors.textInverse:P.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,ce.jsx)(Qe,{size:14})," FR3D"]}),(0,ce.jsx)("button",{onClick:Yt,title:"Re-format all base pairs",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(P.colors.primary),background:P.colors.primary,color:P.colors.textInverse,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer"},children:"Re-format all"}),(0,ce.jsx)("button",{onClick:b,style:{border:"none",background:"transparent",fontSize:16,color:P.colors.textSecondary,cursor:"pointer"},children:"\u2715"})]})]}),ie&&(0,ce.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid ".concat(P.colors.border),background:P.colors.backgroundSecondary,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)("input",{type:"text",placeholder:"PDB ID (e.g. 1GID)",value:de,onChange:function(e){fe(e.target.value),Re(null)},style:{padding:"6px 10px",fontSize:12,fontFamily:"monospace",border:"1px solid ".concat(P.colors.border),borderRadius:6,background:P.colors.background,color:P.colors.text,width:100}}),(0,ce.jsx)("input",{type:"text",placeholder:"Chain",value:me,onChange:function(e){ve(e.target.value),Re(null)},style:{padding:"6px 10px",fontSize:12,fontFamily:"monospace",border:"1px solid ".concat(P.colors.border),borderRadius:6,background:P.colors.background,color:P.colors.text,width:60}})]}),(0,ce.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:P.colors.textSecondary,cursor:"pointer"},children:[(0,ce.jsx)("input",{type:"checkbox",checked:Se,onChange:function(e){return _e(e.target.checked)},style:{cursor:"pointer"}}),"Overwrite existing"]}),(0,ce.jsx)("button",{onClick:Ot,disabled:Ne,style:{padding:"6px 12px",borderRadius:6,border:"none",background:Ne?P.colors.textMuted:P.colors.primary,color:P.colors.textInverse,fontSize:12,fontWeight:600,cursor:Ne?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:6},children:Ne?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)($e,{size:12,style:{animation:"spin 1s linear infinite"}})," Fetching..."]}):"Fetch Base Pairs"}),Pe&&(0,ce.jsx)("span",{style:{fontSize:11,color:P.colors.error,maxWidth:300},children:Pe})]}),(0,ce.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 12px",gap:8},children:[ne&&(0,ce.jsxs)("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",borderTop:"1px dashed ".concat(P.colors.border),borderBottom:"1px dashed ".concat(P.colors.border)},children:[!Ze&&(0,ce.jsxs)("select",{value:null!==(t=qe.rnaComplexIndex)&&void 0!==t?t:"",onChange:function(e){var t=""===e.target.value?void 0:parseInt(e.target.value),n=void 0!==t&&1===Object.keys(N[t].rnaMoleculeProps).length;He(n);var r={rnaComplexIndex:t};if(void 0!==t){var o=Object.keys(N[t].rnaMoleculeProps);o.length>0&&(r.rnaMoleculeName0=o[0],r.rnaMoleculeName1=o[0])}Xe((function(e){return(0,a.Z)((0,a.Z)({},e),{},{newAddForm:r})}))},style:(0,a.Z)((0,a.Z)({},Kt()),{},{marginRight:8}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"Complex Name"}),Object.entries(N).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,ce.jsx)("option",{value:n,children:r.name},n)}))]}),!Ge&&(0,ce.jsxs)("select",{value:null!==(n=qe.rnaMoleculeName0)&&void 0!==n?n:"",onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt()),{},{marginRight:8,opacity:null==qe.rnaComplexIndex?.6:1,cursor:null==qe.rnaComplexIndex?"not-allowed":"text",background:null==qe.rnaComplexIndex?P.colors.surfaceHover:P.colors.background,color:null==qe.rnaComplexIndex?P.colors.textSecondary:P.colors.text}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"Mol Name #1"}),(void 0==qe.rnaComplexIndex?[]:Object.entries(N[qe.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,ce.jsx)("option",{value:n,children:n},n)})),"disabled = ",null==qe.rnaComplexIndex]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=qe.rnaComplexIndex,t=qe.formattedNucleotideIndex0,n="UNK";if(null!=e&&null!=t){var r=qe.rnaMoleculeName0;if(r){var o=jt(e,r,t);n=void 0===o?"UNK":o[0].toUpperCase()}}return(0,ce.jsx)("span",{title:n,style:{fontWeight:700},children:n})}(),(0,ce.jsx)("input",{type:"number",placeholder:"nt #1",value:null!==(d=qe.formattedNucleotideIndex0)&&void 0!==d?d:"",onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},disabled:null==qe.rnaMoleculeName0,style:(0,a.Z)((0,a.Z)({},qt()),{},{opacity:null==qe.rnaMoleculeName0?.6:1,cursor:null==qe.rnaMoleculeName0?"not-allowed":"text",background:null==qe.rnaMoleculeName0?P.colors.surfaceHover:P.colors.background,color:null==qe.rnaMoleculeName0?P.colors.textSecondary:P.colors.text})})]}),!Ge&&(0,ce.jsxs)("select",{value:null!==(f=qe.rnaMoleculeName1)&&void 0!==f?f:"",onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt()),{},{marginRight:8,opacity:null==qe.rnaComplexIndex?.6:1,cursor:null==qe.rnaComplexIndex?"not-allowed":"text",background:null==qe.rnaComplexIndex?P.colors.surfaceHover:P.colors.background,color:null==qe.rnaComplexIndex?P.colors.textSecondary:P.colors.text}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"Mol Name #2"}),(void 0==qe.rnaComplexIndex?[]:Object.entries(N[qe.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,ce.jsx)("option",{value:n,children:n},n)})),"disabled = ",null==qe.rnaComplexIndex]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=qe.rnaComplexIndex,t=qe.formattedNucleotideIndex1,n="UNK";if(null!=e&&null!=t){var r=qe.rnaMoleculeName1;if(r){var o=jt(e,r,t);n=void 0===o?"UNK":o[0].toUpperCase()}}return(0,ce.jsx)("span",{title:n,style:{fontWeight:700},children:n})}(),(0,ce.jsx)("input",{type:"number",placeholder:"nt #2",value:null!==(p=qe.formattedNucleotideIndex1)&&void 0!==p?p:"",onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:(0,a.Z)((0,a.Z)({},qt()),{},{opacity:null==qe.rnaMoleculeName1?.6:1,cursor:null==qe.rnaMoleculeName1?"not-allowed":"text",background:null==qe.rnaMoleculeName1?P.colors.surfaceHover:P.colors.background,color:null==qe.rnaMoleculeName1?P.colors.textSecondary:P.colors.text}),disabled:null==qe.rnaMoleculeName1})]}),(0,ce.jsxs)("select",{value:qe.typeBase,onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{typeBase:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt(!0)),{},{marginRight:8}),children:[(0,ce.jsx)("option",{value:"auto",children:"auto"}),(0,ce.jsx)("option",{value:"canonical",children:"canonical"}),(0,ce.jsx)("option",{value:"wobble",children:"wobble"}),(0,ce.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,ce.jsx)("option",{value:"custom",children:lt("custom")})]}),(0,ce.jsxs)("select",{value:null!==(h=qe.orientation)&&void 0!==h?h:"",disabled:"custom"!==qe.typeBase,onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{orientation:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt("custom"===qe.typeBase)),{},{marginRight:8}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"orientation (auto)"}),(0,ce.jsx)("option",{value:"cis",children:"cis"}),(0,ce.jsx)("option",{value:"trans",children:"trans"})]}),(0,ce.jsxs)("select",{value:null!==(m=qe.edgeA)&&void 0!==m?m:"",disabled:"custom"!==qe.typeBase,onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeA:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt("custom"===qe.typeBase)),{},{marginRight:8}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"edge A (auto)"}),(0,ce.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,ce.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,ce.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,ce.jsxs)("select",{value:null!==(v=qe.edgeB)&&void 0!==v?v:"",disabled:"custom"!==qe.typeBase,onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeB:e.target.value})}))},style:(0,a.Z)((0,a.Z)({},Kt("custom"===qe.typeBase)),{},{marginRight:8}),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"edge B (auto)"}),(0,ce.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,ce.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,ce.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,ce.jsx)("input",{type:"number",min:"1",max:"100",placeholder:"Length",value:null!==(x=qe.length)&&void 0!==x?x:"",onChange:function(e){return Xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{length:""===e.target.value?void 0:Math.max(1,parseInt(e.target.value)||1)})}))},style:(0,a.Z)((0,a.Z)({},Vt()),{},{width:80,marginRight:8}),title:"Number of consecutive base pairs to create"}),(0,ce.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",marginRight:"8px",padding:"4px 8px",borderRadius:"4px",backgroundColor:Me?P.colors.primary+"20":"transparent",border:Me?"1px solid ".concat(P.colors.primary):"1px solid transparent",transition:"all 0.2s ease",cursor:"pointer"},children:[(0,ce.jsx)("input",{type:"checkbox",checked:Me,onChange:function(e){return Oe(e.target.checked)},style:{margin:0,transform:"scale(0.9)"}}),(0,ce.jsx)("span",{style:{fontSize:"11px",fontWeight:Me?"600":"400",color:Me?P.colors.primary:P.colors.text,whiteSpace:"nowrap"},children:"Reposition"})]}),(0,ce.jsx)("button",{onClick:Dt,style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(P.colors.border),background:P.colors.background,fontSize:12,fontWeight:700,color:P.colors.text},disabled:null==qe.rnaComplexIndex||void 0===qe.rnaMoleculeName0||void 0===qe.rnaMoleculeName1||null==qe.formattedNucleotideIndex0||null==qe.formattedNucleotideIndex1||(null!==(g=qe.length)&&void 0!==g?g:1)<1,children:"Add"})]}),(0,ce.jsx)("button",{onClick:function(){if(!ne){var e=Ze?Number.parseInt(Object.keys(N)[0]):void 0,t=void 0,n=void 0;if(void 0!==e){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(t=r[0],n=r[0])}Xe({rnaComplexIndex:e,rnaMoleculeName0:t,rnaMoleculeName1:n,formattedNucleotideIndex0:void 0,formattedNucleotideIndex1:void 0,length:1,typeBase:"auto"})}re(!ne)},style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(P.colors.border),background:P.colors.background,fontSize:12,fontWeight:600,color:P.colors.text,marginLeft:"auto"},children:ne?"Cancel":"Add Base Pair"})]}),(0,ce.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,ce.jsx)("thead",{children:(0,ce.jsxs)("tr",{children:[!Ze&&(0,ce.jsx)("th",{style:Gt(120),children:"Complex"}),!Ge&&(0,ce.jsx)("th",{style:Gt(80),children:"Mol#1"}),(0,ce.jsx)("th",{style:Gt(80),children:"Nt (index) a"}),!Ge&&(0,ce.jsx)("th",{style:Gt(80),children:"Mol#2"}),(0,ce.jsx)("th",{style:Gt(80),children:"Nt (index) b"}),"Helices"===U&&(0,ce.jsx)("th",{style:Gt(80),children:"Length"}),(0,ce.jsx)("th",{style:Gt(120),children:"Type"}),(0,ce.jsx)("th",{style:Gt(100),children:"Orientation"}),(0,ce.jsx)("th",{style:Gt(130),children:"Edge A"}),(0,ce.jsx)("th",{style:Gt(130),children:"Edge B"}),(0,ce.jsx)("th",{style:Gt(90),children:"Action"})]})}),(0,ce.jsxs)("tbody",{children:[_t.map((function(e,t){var n,r,o,i,l,c,u,d,f=Pt(e),p=et===t,h=p&&null!==(n=ut.typeBase)&&void 0!==n?n:it(e.type),m=ot(e.type),v=p?null!==(r=null!==(o=ut.orientation)&&void 0!==o?o:m.orientation)&&void 0!==r?r:"auto"===h?void 0:"cis":void 0,x=p&&null!==(i=ut.edgeA)&&void 0!==i?i:void 0,g=p&&null!==(l=ut.edgeB)&&void 0!==l?l:void 0;return(0,ce.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(P.colors.border),background:t%2===0?P.colors.background:P.colors.surface},children:[!Ze&&(0,ce.jsx)("td",{style:Ht(120),children:e.rnaComplexName}),!Ge&&(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:p?(0,ce.jsx)("select",{value:null!==(c=ut.rnaMoleculeName0)&&void 0!==c?c:e.rnaMoleculeName0,onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,ce.jsx)("option",{value:n,children:n},n)}))}):(0,ce.jsx)("span",{children:e.rnaMoleculeName0})})}),(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var t,n;if(f){var r=jt(e.rnaComplexIndex,e.rnaMoleculeName0,e.formattedNucleotideIndex0Start),o=void 0===r?"UNK":r[0].toUpperCase();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,ce.jsx)("span",{children:e.formattedNucleotideIndex0Start})]})}var i=jt(e.rnaComplexIndex,e.rnaMoleculeName0,p&&null!==(t=ut.formattedNucleotideIndex0)&&void 0!==t?t:e.formattedNucleotideIndex0),l=void 0===i?"UNK":i[0].toUpperCase();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(i,")"),style:{fontWeight:700},children:l}),p?(0,ce.jsx)("input",{type:"number",value:null!==(n=ut.formattedNucleotideIndex0)&&void 0!==n?n:e.formattedNucleotideIndex0,onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:qt()}):(0,ce.jsx)("span",{children:e.formattedNucleotideIndex0})]})}()})}),!Ge&&(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:p?(0,ce.jsx)("select",{value:null!==(u=ut.rnaMoleculeName1)&&void 0!==u?u:e.rnaMoleculeName1,onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];return(0,ce.jsx)("option",{value:n,children:n},n)}))}):(0,ce.jsx)("span",{children:e.rnaMoleculeName1})})}),(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var t,n;if(f){var r=jt(e.rnaComplexIndex,e.rnaMoleculeName1,e.formattedNucleotideIndex1Start),o=void 0===r?"UNK":r[0].toUpperCase();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,ce.jsx)("span",{children:e.formattedNucleotideIndex1Start})]})}var i=jt(e.rnaComplexIndex,e.rnaMoleculeName1,p&&null!==(t=ut.formattedNucleotideIndex1)&&void 0!==t?t:e.formattedNucleotideIndex1),l=void 0===i?"UNK":i[0].toUpperCase();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(i,")"),style:{fontWeight:700},children:l}),p?(0,ce.jsx)("input",{type:"number",value:null!==(n=ut.formattedNucleotideIndex1)&&void 0!==n?n:e.formattedNucleotideIndex1,onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:qt()}):(0,ce.jsx)("span",{children:e.formattedNucleotideIndex1})]})}()})}),"Helices"===U&&(p?(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("input",{type:"number",min:"1",value:null!==(d=ut.length)&&void 0!==d?d:f?e.length:1,onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{length:""===e.target.value?void 0:parseInt(e.target.value)})}))}})}):(0,ce.jsx)("td",{style:Ht(60),children:(0,ce.jsx)("span",{style:{fontSize:12,color:P.colors.text},children:f?e.length:1})})),(0,ce.jsx)("td",{style:Ht(120),children:p?(0,ce.jsxs)("select",{value:h,onChange:function(t){var n=t.target.value;if("custom"===n){var r,o,i,l,s,c,u=ot(e.type),d=it(e.type),f=null!==(r=null!==(o=ut.orientation)&&void 0!==o?o:u.orientation)&&void 0!==r?r:"cis",p=null!==(i=null!==(l=ut.edgeA)&&void 0!==l?l:u.edgeA)&&void 0!==i?i:"watson_crick",h=null!==(s=null!==(c=ut.edgeB)&&void 0!==c?c:u.edgeB)&&void 0!==s?s:"wobble"===d?"hoogsteen":"watson_crick";dt((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeBase:n,orientation:f,edgeA:p,edgeB:h})}))}else dt((function(e){return(0,a.Z)((0,a.Z)({},e),{},{typeBase:n})}))},style:Kt(!0),children:[(0,ce.jsx)("option",{value:"auto",children:"auto"}),(0,ce.jsx)("option",{value:"canonical",children:"canonical"}),(0,ce.jsx)("option",{value:"wobble",children:"wobble"}),(0,ce.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,ce.jsx)("option",{value:"custom",children:lt("custom")})]}):(0,ce.jsx)("span",{style:{fontSize:12,color:P.colors.text},children:lt(it(e.type))})}),(0,ce.jsx)("td",{style:Ht(100),children:p&&"custom"===h?(0,ce.jsxs)("select",{value:null!==v&&void 0!==v?v:"",onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{orientation:e.target.value||void 0})}))},style:Kt(!0),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,ce.jsx)("option",{value:"cis",children:"cis"}),(0,ce.jsx)("option",{value:"trans",children:"trans"})]}):(0,ce.jsx)("span",{style:{fontSize:12,color:P.colors.text},children:Ut(e)})}),(0,ce.jsx)("td",{style:Ht(130),children:p&&"custom"===h?(0,ce.jsxs)("select",{value:null!==x&&void 0!==x?x:"",onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeA:e.target.value||void 0})}))},style:Kt(!0),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,ce.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,ce.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,ce.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,ce.jsx)("span",{style:{fontSize:12,color:P.colors.text},children:zt(e)})}),(0,ce.jsx)("td",{style:Ht(130),children:p&&"custom"===h?(0,ce.jsxs)("select",{value:null!==g&&void 0!==g?g:"",onChange:function(e){return dt((function(t){return(0,a.Z)((0,a.Z)({},t),{},{edgeB:e.target.value||void 0})}))},style:Kt(!0),children:[(0,ce.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,ce.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,ce.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,ce.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,ce.jsx)("span",{style:{fontSize:12,color:P.colors.text},children:Wt(e)})}),(0,ce.jsx)("td",{style:(0,a.Z)((0,a.Z)({},Ht(70)),{},{textAlign:"center"}),children:p?(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,ce.jsx)(ct,{title:"Save",onClick:function(){"isGrouped"in e?Bt(e):Ft(e),tt(void 0),ht((function(e){return!e}))},kind:"save",theme:P}),(0,ce.jsx)(ct,{title:"Cancel",onClick:function(){return tt(void 0)},kind:"cancel",theme:P})]}):(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,ce.jsx)(ct,{title:"Edit",onClick:function(){return Zt(e,t)},kind:"edit",theme:P}),(0,ce.jsx)(ct,{title:"Delete",onClick:function(){Lt(e),ht((function(e){return!e}))},kind:"delete",theme:P})]})})]},t)})),C&&(0,ce.jsx)("tr",{children:(0,ce.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:P.colors.error},children:C})}),!C&&0===_t.length&&(0,ce.jsx)("tr",{children:(0,ce.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:P.colors.textSecondary},children:'No base pairs found. Use the "Add Base Pair" button above to create new ones.'})})]})]})]})]})},dt=u.memo(ut),ft=function(e){var t=e.rnaComplexProps,n=(0,u.useState)(!1),r=(0,s.Z)(n,2),o=r[0],a=r[1],d=(0,u.useState)(""),f=(0,s.Z)(d,2),p=f[0],h=f[1],m=(0,u.useState)([]),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=(0,u.useState)(-1),b=(0,s.Z)(y,2),N=b[0],E=b[1],C=(0,u.useRef)(null),I=(0,u.useRef)(null),S=(0,u.useContext)(X._.BasePair.SetKeysToEdit),_=(0,u.useContext)(X._.Nucleotide.SetKeysToRerender),A=(0,u.useContext)(X._.App.PushToUndoStack),P=(0,ge.Fg)().theme,w=(0,u.useMemo)((function(){return["add","delete","edit","reformat","color"]}),[]),M=(0,u.useMemo)((function(){var e=p.trim(),t=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(?/.exec(e);if(!t)return null;switch(t[1].toLowerCase()){case"add":return{signature:"add(nt1_index:int, nt2_index:int, complex:str?, bp_type:str=auto, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index: required integer (formatted index)","nt2_index: required integer (formatted index)","complex: optional string; required in multi-complex scenes","bp_type: 'auto'|'canonical'|'wobble'|'mismatch' (ignored if subtype provided)","subtype: optional custom directed type like cWW/tHS","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++ (default 1)","safe: boolean (default True); True=error on duplicates, False=warn and add"]};case"delete":return{signature:"delete(nt1_index:int, nt2_index:int, complex:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index, nt2_index: required integers","complex: optional string; required in multi-complex scenes","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: boolean (default True); True=error if not found, False=warn and skip"]};case"edit":return{signature:"edit(nt1_index:int, nt2_index:int, complex:str?, bp_type:str, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["Requires bp_type or subtype","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: True=error if not found, False=warn and create"]};case"reformat":return{signature:"reformat(start:int?, end:int?)",lines:["If both omitted: full reformat","If provided: repositions nucleotides only within [start, end]"]};case"color":return{signature:"color(target:int|string, color_value:string)",lines:["target: 'start-end' for a range, or single index; multiple segments separated by ';'","color_value: CSS color name or hex (e.g., 'red', '#FF0000')"]};default:return null}}),[p]);function O(e,t){g((function(n){return[].concat((0,i.Z)(n),[{ts:new Date,level:e,text:t}])}))}function j(e){if(e)for(var n=0,r=Object.entries(t);n<r.length;n++){var o=(0,s.Z)(r[n],2),a=o[0];if(o[1].name.toLowerCase()===e.toLowerCase())return parseInt(a)}else{var i=Object.keys(t);if(1===i.length)return parseInt(i[0])}}function L(e,n){var r=t[e];if(r)for(var o=0,a=Object.entries(r.rnaMoleculeProps);o<a.length;o++){var i=(0,s.Z)(a[o],2),l=i[0],c=i[1];if(n-c.firstNucleotideIndex in c.nucleotideProps)return l}}function D(e,t,n,r,o){var a,i=null===(a=e.basePairs[t])||void 0===a?void 0:a[n];return!!i&&!!i.find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}))}function Z(e){return e.replace(/^['"]|['"]$/g,"")}function F(){var e=p;if(e.trim()){O("command","> ".concat(e)),E(-1);try{var n=function(e){var t=e.trim(),n=/^([a-zA-Z_][a-zA-Z0-9_]*)\((.*)\)$/.exec(t);if(!n)return{error:"Syntax error: commands must be in form name(arg1, ..., key=value, ...)"};var r,o=n[1],a=n[2].trim(),i=a.length?a.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})):[],l=[],s={},u=(0,c.Z)(i);try{for(u.s();!(r=u.n()).done;){var d=r.value,f=d.indexOf("=");if(-1===f)l.push(d);else{var p=d.slice(0,f).trim(),h=d.slice(f+1).trim();if(!p)return{error:"Syntax error: empty parameter name"};s[p]=Z(h)}}}catch(I){u.e(I)}finally{u.f()}var m=o.toLowerCase();if("reformat"===m){var v=void 0!==s.start?parseInt(s.start):void 0,x=void 0!==s.end?parseInt(s.end):void 0;return void 0!==s.start&&Number.isNaN(v)||void 0!==s.end&&Number.isNaN(x)?{error:"Type error: reformat parameters start/end must be integers"}:{kind:"reformat",start:v,end:x}}if("color"===m)return 2!==l.length?{error:"Syntax error: color(target, color_value)"}:{kind:"color",target:Z(l[0]),color:Z(l[1])};if("add"!==m&&"delete"!==m&&"edit"!==m)return{error:"Unknown command: ".concat(o)};if(l.length<2)return{error:"Syntax error: first two positional arguments must be nt1_index, nt2_index"};if(l.length>2)return{error:"Syntax error: too many positional arguments"};var g=parseInt(l[0]),y=parseInt(l[1]);if(Number.isNaN(g)||Number.isNaN(y))return{error:"Type error: nt1_index and nt2_index must be integers"};var b=s.complex,N=s.bp_type,E=s.subtype,C=void 0!==s.length?parseInt(s.length):1;return Number.isNaN(C)||0===C?{error:"Type error: length must be a non-zero integer"}:{kind:m,nt1:g,nt2:y,complexName:b,bpType:N,subtype:E,length:C,safe:void 0===s.safe||"true"===s.safe.toLowerCase()||"false"!==s.safe.toLowerCase()&&function(){throw new Error("Type error: safe must be true or false")}()}}(e);n.error?O("error",n.error):function(e){if("reformat"===e.kind){if(void 0===e.start&&void 0===e.end)window.dispatchEvent(new CustomEvent("triggerReformatAll")),O("success","Reformat triggered");else{var n=e.start,r=e.end;window.dispatchEvent(new CustomEvent("triggerReformatRange",{detail:{start:n,end:r}})),O("success","Reformat range ".concat(null!==n&&void 0!==n?n:"-\u221e","..").concat(null!==r&&void 0!==r?r:"+\u221e"," triggered"))}return}if("color"===e.kind){var o=j(void 0);if(void 0===o)return void O("error","Ambiguous complex: specify a single complex in scene to use color()");var a=t[o],i=e,u=i.target,d=i.color;try{var f=function(e){var t=e.trim().replace(/^['"]|['"]$/g,"");if(/^#?[0-9a-fA-F]{3,4}$/.test(t)||/^#?[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$/.test(t)){var n=t.startsWith("#")?t:"#".concat(t);return(0,k.fromCssString)(n,void 0,k.HandleUndefined.THROW_ERROR)}return(0,k.fromCssString)(t.toLowerCase(),void 0,k.HandleUndefined.THROW_ERROR)}(d),p=function(e){var t=e.split(";").map((function(e){return e.trim()})).filter(Boolean);if(0===t.length)throw new Error("color(): target is empty");var n,r=[],o=(0,c.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(/^\d+$/.test(a)){var i=parseInt(a);r.push({start:i,end:i})}else{var l=/^(\d+)\s*-\s*(\d+)$/.exec(a);if(!l)throw new Error("color(): invalid target segment '".concat(a,"'"));var s=parseInt(l[1]),u=parseInt(l[2]),d=Math.min(s,u),f=Math.max(s,u);r.push({start:d,end:f})}}}catch(p){o.e(p)}finally{o.f()}return r}(u);A();for(var h=0,m=0,v=Object.entries(a.rnaMoleculeProps);m<v.length;m++)for(var x=(0,s.Z)(v[m],2),g=(x[0],x[1]),y=0,b=Object.entries(g.nucleotideProps);y<b.length;y++){var N=(0,s.Z)(b[y],2),E=N[0],C=N[1];if(U(parseInt(E)+g.firstNucleotideIndex,p)){var I;C.color=f;var P=null!==(I=C.labelContentProps)&&void 0!==I?I:{};P.color=f,C.labelContentProps=P,h++}}var w={};if(h>0){for(var M=0,Z=Object.entries(a.rnaMoleculeProps);M<Z.length;M++){for(var F=(0,s.Z)(Z[M],2),B=F[0],z=F[1],W=[],G=0,H=Object.entries(z.nucleotideProps);G<H.length;G++){var K=(0,s.Z)(H[G],1)[0],V=parseInt(K);U(V+z.firstNucleotideIndex,p)&&W.push(V)}W.length&&(w[B]=W)}_((0,l.Z)({},o,w))}O("success","Applied color to ".concat(h," nucleotide(s)"))}catch(Ke){var q;O("error",null!==(q=null===Ke||void 0===Ke?void 0:Ke.message)&&void 0!==q?q:String(Ke))}return}var X=e,Y=j(X.complexName);if(void 0===Y){var Q;if(Object.keys(t).length>1&&!X.complexName)O("error","Ambiguous complex: specify complex=[name]");else O("error","Unknown complex: ".concat(null!==(Q=X.complexName)&&void 0!==Q?Q:"(unspecified)"));return}for(var $=t[Y],J=X.length>0?1:-1,ee=-J,te=Math.abs(X.length),ne=[],re=0;re<te;re++){var oe=X.nt1+re*J,ae=X.nt2+re*ee,ie=L(Y,oe),le=L(Y,ae);if(ie&&le){var se=$.rnaMoleculeProps[ie],ce=$.rnaMoleculeProps[le],ue=oe-se.firstNucleotideIndex,de=ae-ce.firstNucleotideIndex;ue in se.nucleotideProps&&de in ce.nucleotideProps?ne.push({idx1:oe,idx2:ae,mol0:ie,mol1:le,i0:ue,i1:de}):ne.push({error:"Out of bounds: (".concat(oe,", ").concat(ae,")")})}else ne.push({error:"Out of bounds: (".concat(oe,", ").concat(ae,")")})}var fe=ne.find((function(e){return"error"in e}));if(fe)return void O("error",fe.error);var pe=void 0;if("delete"!==X.kind&&"custom_error"===(pe=function(e,t){if(t){var n=function(e){if(!/^[ct][WHS]{2}$/.test(e))return null;var t={W:"watson_crick",H:"hoogsteen",S:"sugar_edge"};return{orientation:"c"===e[0]?"cis":"trans",edgeA:t[e[1]],edgeB:t[e[2]]}}(t);if(!n)return"custom_error";var r=n.orientation,o=n.edgeA,a=n.edgeB;return"".concat(r,"_").concat(o,"_").concat(a)}switch((e||"auto").toLowerCase()){case"auto":return;case"canonical":return R.BasePair.Type.CANONICAL;case"wobble":return R.BasePair.Type.WOBBLE;case"mismatch":return R.BasePair.Type.MISMATCH;default:return"custom_error"}}(X.bpType,X.subtype)))return void O("error","Invalid type: provide bp_type=[auto|canonical|wobble|mismatch] or subtype like cWW/tHS");if("add"===X.kind){if(X.safe){var he,me=(0,c.Z)(ne);try{for(me.s();!(he=me.n()).done;){var ve=he.value;if(D($,ve.mol0,ve.i0,ve.mol1,ve.i1))return void O("error","Base pair already exists at (".concat(ve.idx1,", ").concat(ve.idx2,")"))}}catch(Ve){me.e(Ve)}finally{me.f()}}A();var xe,ge=[],ye=(0,c.Z)(ne);try{for(ye.s();!(xe=ye.n()).done;){var be=xe.value;D($,be.mol0,be.i0,be.mol1,be.i1)&&!X.safe&&O("warning","Duplicate at (".concat(be.idx1,", ").concat(be.idx2,") \u2014 adding anyway")),(0,T.insertBasePair)($,be.mol0,be.i0,be.mol1,be.i1,T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:pe});var Ne=[{rnaMoleculeName:be.mol0,nucleotideIndex:be.i0},{rnaMoleculeName:be.mol1,nucleotideIndex:be.i1}].sort(T.compareBasePairKeys),Ee=(0,s.Z)(Ne,2),Ce=Ee[0],Ie=Ee[1];ge.push({keys0:Ce,keys1:Ie})}}catch(Ve){ye.e(Ve)}finally{ye.f()}return S((0,l.Z)({},Y,{add:ge,delete:[]})),void O("success","Added ".concat(ne.length," base pair(s)"))}if("delete"===X.kind){if(X.safe){var Se,_e=(0,c.Z)(ne);try{for(_e.s();!(Se=_e.n()).done;){var Ae=Se.value;if(!D($,Ae.mol0,Ae.i0,Ae.mol1,Ae.i1))return void O("error","No base pair at (".concat(Ae.idx1,", ").concat(Ae.idx2,")"))}}catch(Ve){_e.e(Ve)}finally{_e.f()}}A();var Te,Pe=[],Re=(0,c.Z)(ne);try{var ke=function(){var e=Te.value;if(!D($,e.mol0,e.i0,e.mol1,e.i1))return O("warning","No base pair at (".concat(e.idx1,", ").concat(e.idx2,") \u2014 skipping")),"continue";var t=$.basePairs[e.mol0];if(t&&e.i0 in t){var n=t[e.i0],r=n.findIndex((function(t){return t.rnaMoleculeName===e.mol1&&t.nucleotideIndex===e.i1}));-1!==r&&(1===n.length?delete t[e.i0]:n.splice(r,1))}var o=$.basePairs[e.mol1];if(o&&e.i1 in o){var a=o[e.i1],i=a.findIndex((function(t){return t.rnaMoleculeName===e.mol0&&t.nucleotideIndex===e.i0}));-1!==i&&(1===a.length?delete o[e.i1]:a.splice(i,1))}var l=[{rnaMoleculeName:e.mol0,nucleotideIndex:e.i0},{rnaMoleculeName:e.mol1,nucleotideIndex:e.i1}].sort(T.compareBasePairKeys),c=(0,s.Z)(l,2),u=c[0],d=c[1];Pe.push({keys0:u,keys1:d})};for(Re.s();!(Te=Re.n()).done;)ke()}catch(Ve){Re.e(Ve)}finally{Re.f()}return Pe.length&&S((0,l.Z)({},Y,{add:[],delete:Pe})),void O("success","Deleted ".concat(Pe.length," base pair(s)"))}if("edit"===X.kind){if(void 0===pe)return void O("error","edit requires bp_type or subtype");var we=pe;if(X.safe){var Me,Oe=(0,c.Z)(ne);try{for(Oe.s();!(Me=Oe.n()).done;){var je=Me.value;if(!D($,je.mol0,je.i0,je.mol1,je.i1))return void O("error","No base pair at (".concat(je.idx1,", ").concat(je.idx2,")"))}}catch(Ve){Oe.e(Ve)}finally{Oe.f()}}A();var Le,De=[],Ze=[],Fe=(0,c.Z)(ne);try{for(Fe.s();!(Le=Fe.n()).done;){var Be=Le.value,Ue=D($,Be.mol0,Be.i0,Be.mol1,Be.i1);Ue||X.safe||O("warning","No base pair at (".concat(Be.idx1,", ").concat(Be.idx2,") \u2014 creating new")),(0,T.insertBasePair)($,Be.mol0,Be.i0,Be.mol1,Be.i1,Ue?T.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING:T.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:we});var ze=[{rnaMoleculeName:Be.mol0,nucleotideIndex:Be.i0},{rnaMoleculeName:Be.mol1,nucleotideIndex:Be.i1}].sort(T.compareBasePairKeys),We=(0,s.Z)(ze,2),Ge=We[0],He=We[1];De.push({keys0:Ge,keys1:He}),Ue&&Ze.push({keys0:Ge,keys1:He})}}catch(Ve){Fe.e(Ve)}finally{Fe.f()}S((0,l.Z)({},Y,{add:De,delete:Ze})),O("success","Edited ".concat(ne.length," base pair(s)"))}}(n)}catch(o){var r;O("error",null!==(r=null===o||void 0===o?void 0:o.message)&&void 0!==r?r:String(o))}finally{h("")}}}(0,u.useEffect)((function(){function e(e){"Backquote"===e.code&&(e.preventDefault(),a((function(e){return!e})))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,u.useEffect)((function(){o&&setTimeout((function(){var e;return null===(e=C.current)||void 0===e?void 0:e.focus()}),0)}),[o]),(0,u.useEffect)((function(){var e;null===(e=I.current)||void 0===e||e.scrollTo({top:I.current.scrollHeight})}),[x.length]);var B=(0,u.useMemo)((function(){var e=p.trim(),t=/^([a-zA-Z_]*)$/.exec(e),n=t?t[1]:"";return w.filter((function(e){return e.startsWith(n)})).slice(0,4)}),[p,w]);function U(e,t){var n,r=(0,c.Z)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(e>=o.start&&e<=o.end)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}return o?(0,ce.jsxs)("div",{style:{position:"fixed",left:0,right:0,bottom:0,height:260,background:P.colors.surface,color:P.colors.text,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',borderTop:"1px solid ".concat(P.colors.border),boxShadow:P.shadows.lg,zIndex:2500,display:"flex",flexDirection:"column"},onClick:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.focus()},children:[(0,ce.jsxs)("div",{style:{padding:"6px 10px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid ".concat(P.colors.border)},children:[(0,ce.jsx)("div",{style:{fontWeight:700,fontSize:P.typography.fontSize.sm,color:P.colors.primary},children:"XRNA Terminal"}),(0,ce.jsx)("div",{style:{fontSize:P.typography.fontSize.xs,color:P.colors.textSecondary},children:"Press ~ to hide"})]}),(0,ce.jsx)("div",{ref:I,style:{flex:1,overflowY:"auto",padding:"8px 10px"},children:x.map((function(e,t){return(0,ce.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"baseline",whiteSpace:"pre-wrap"},children:[(0,ce.jsxs)("span",{style:{color:P.colors.textSecondary,fontSize:P.typography.fontSize.xs},children:["[",z(e.ts),"]"]}),(0,ce.jsx)("span",{style:{color:W(e.level)},children:e.text})]},t)}))}),(0,ce.jsxs)("div",{style:{padding:"8px 10px",borderTop:"1px solid ".concat(P.colors.border)},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)("span",{style:{color:P.colors.primary},children:">"}),(0,ce.jsx)("input",{ref:C,value:p,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)return e.preventDefault(),void F();if("ArrowUp"===e.key){var t;e.preventDefault();var n=x.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),r=N<0?n.length-1:Math.max(0,N-1);return E(r),void h(null!==(t=n[r])&&void 0!==t?t:p)}if("ArrowDown"===e.key){var o;e.preventDefault();var a=x.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),i=N<0?-1:Math.min(a.length-1,N+1);return E(i),void h(-1===i?"":null!==(o=a[i])&&void 0!==o?o:"")}if("Tab"!==e.key);else{e.preventDefault();var l=p.trim(),s=/^([a-zA-Z_]*)$/.exec(l);if(s){var c=s[1],u=w.find((function(e){return e.startsWith(c)}));u&&h(u+"()")}}},style:{flex:1,background:"transparent",border:"none",outline:"none",color:P.colors.text,fontFamily:"inherit",fontSize:P.typography.fontSize.md},placeholder:"add(1, 150, length=3)"})]}),(B.length>0||M)&&(0,ce.jsxs)("div",{style:{marginTop:6},children:[B.length>0&&(0,ce.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:M?6:0},children:B.map((function(e){return(0,ce.jsx)("span",{style:{background:P.colors.surfaceHover,border:"1px solid ".concat(P.colors.border),borderRadius:P.borderRadius.md,padding:"2px 6px",fontSize:P.typography.fontSize.xs,color:P.colors.textSecondary},children:e},e)}))}),M&&(0,ce.jsxs)("div",{style:{background:P.colors.backgroundSecondary,border:"1px solid ".concat(P.colors.border),borderRadius:P.borderRadius.md,padding:"6px 8px"},children:[(0,ce.jsx)("div",{style:{fontSize:P.typography.fontSize.xs,color:P.colors.text,marginBottom:4},children:M.signature}),(0,ce.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",rowGap:2},children:M.lines.map((function(e,t){return(0,ce.jsxs)("div",{style:{fontSize:P.typography.fontSize.xs,color:P.colors.textSecondary},children:["- ",e]},t)}))})]})]})]})]}):(0,ce.jsx)("div",{style:{display:"none"}});function z(e){var t=function(e){return e.toString().padStart(2,"0")};return"".concat(t(e.getHours()),":").concat(t(e.getMinutes()),":").concat(t(e.getSeconds()))}function W(e){switch(e){case"command":return P.colors.primary;case"error":return P.colors.error;case"warning":return P.colors.warning;case"success":return P.colors.success;default:return P.colors.text}}},pt=u.memo(ft),ht=function(e){var t=e.open,n=e.onClose,r=e.children,o=e.isEditMenu,a=void 0!==o&&o,i=(0,ge.Fg)().theme;return(0,ce.jsxs)("div",{style:{position:"fixed",top:56,right:0,height:"calc(100vh - 56px)",width:"480px",background:i.colors.backgroundSecondary,transform:t?"translateX(0)":"translateX(100%)",transition:i.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(i.colors.border)},children:[(0,ce.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(i.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ce.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:i.colors.primary}}),(0,ce.jsx)("span",{style:{fontSize:i.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:i.colors.text},children:a?"Edit Panel":"Properties Panel"})]}),(0,ce.jsx)("button",{onClick:n,style:{border:"none",background:i.colors.surfaceHover,cursor:"pointer",fontSize:i.typography.fontSize.md,color:i.colors.text,padding:"6px 8px",borderRadius:i.borderRadius.md,width:"28px",height:"28px"},children:"\u2715"})]}),(0,ce.jsx)("div",{style:{flex:1,overflow:"auto"},children:r})]})},mt=u.memo(ht);function vt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nucleotide",r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex;try{var l,s,c,u=t[r];if(!u)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var d=null===(l=u.rnaMoleculeProps)||void 0===l?void 0:l[o];if(!d)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var f=null===(s=d.nucleotideProps)||void 0===s?void 0:s[a];if(!f){var p=d.firstNucleotideIndex;if(void 0!==p&&!Number.isNaN(p)){var h,m=a-p;(f=null===(h=d.nucleotideProps)||void 0===h?void 0:h[m])&&(e.nucleotideIndex=m)}}if(!f){var v=d.firstNucleotideIndex;if(void 0!==v&&!Number.isNaN(v)){var x,g=a+v;f=null===(x=d.nucleotideProps)||void 0===x?void 0:x[g]}}if(!f)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var y,b,N,E,C={type:n,nucleotideSymbol:f.symbol,nucleotideIndex:a,rnaComplexIndex:r,rnaMoleculeName:o,complexName:u.name||"Complex ".concat(r),moleculeName:o,position:{x:f.x||0,y:f.y||0}};if(f.color)C.color=(null===(y=(b=f.color).asHex)||void 0===y?void 0:y.call(b))||(null===(N=(E=f.color).toString)||void 0===N?void 0:N.call(E))||"Unknown";var I=null===(c=u.basePairs)||void 0===c?void 0:c[o];if(I){var S=I[a];if(S){var _,A,T=S.partnerMolecule||o,P=null===(_=u.rnaMoleculeProps)||void 0===_?void 0:_[T],R=null===P||void 0===P||null===(A=P.nucleotideProps)||void 0===A?void 0:A[S.partnerIndex];C.basePairType=S.type||"Watson-Crick",C.basePairPartner={nucleotideIndex:S.partnerIndex,nucleotideSymbol:null===R||void 0===R?void 0:R.symbol,rnaMoleculeName:T}}}C.structureInfo=function(e,t,n,r){try{var o,a=(null===(o=n.basePairs)||void 0===o?void 0:o[r])||{},l=t.nucleotideProps||{},s=a[e];if(s){for(var c=s.partnerIndex,u=e,d=e,f=c,p=c;u>1;){var h=a[u-1];if(!h||h.partnerIndex!==f+1)break;u--,f++}for(var m=Math.max.apply(Math,(0,i.Z)(Object.keys(l).map(Number)));d<m;){var v=a[d+1];if(!v||v.partnerIndex!==p-1)break;d++,p--}var x=d-u+1;if(x>=2){for(var g=0,y=u;y<=d;y++){var b=l[y];!b||"G"!==b.symbol&&"C"!==b.symbol||g++}var N=Math.round(g/x*100);return{type:x>=4?"helix":"stacked_helix",name:"Helix (".concat(u,"-").concat(d,")"),range:{start:u,end:d},helixInfo:{length:x,gcContent:N}}}}for(var E=e,C=e;E>1&&!a[E-1];)E--;for(var I=Math.max.apply(Math,(0,i.Z)(Object.keys(l).map(Number)));C<I&&!a[C+1];)C++;if(C>E){var S=C-E+1,_=a[E-1]||a[C+1],A="single_strand",T="Single Strand (".concat(E,"-").concat(C,")");return _&&(S<=3?(A="bulge",T="Bulge (".concat(E,"-").concat(C,")")):S<=10?(A="loop",T="Loop (".concat(E,"-").concat(C,")")):(A="junction",T="Junction (".concat(E,"-").concat(C,")"))),{type:A,name:T,range:{start:E,end:C}}}return{type:"unknown",name:"Unknown Structure"}}catch(P){return console.warn("Error detecting structure info:",P),{type:"unknown",name:"Unknown Structure"}}}(a,d,u,o),"label"===n&&f.labelContentProps&&(C.labelContent=f.labelContentProps.text||f.labelContentProps.content);var k,w={};if(f.labelLineProps)w.hasLabelLine=!0,w.labelLinePoints=(null===(k=f.labelLineProps.points)||void 0===k?void 0:k.length)||0;return f.labelContentProps&&(w.hasLabelContent=!0,f.labelContentProps.font&&(w.labelFont=f.labelContentProps.font)),Object.keys(w).length>0&&(C.additionalInfo=w),C}catch(M){return console.warn("Error extracting element info:",M),{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a}}}for(var xt,gt,yt=n(6902),bt=(0,ue.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Nt=(0,ue.Z)("import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),Et=(0,ue.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Ct=(0,ue.Z)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),It=function(e){var t=e.value,n=e.options,r=e.onChange,o=e.theme,a=(0,u.useState)(!1),i=(0,s.Z)(a,2),l=i[0],c=i[1],d=(0,u.useState)(null),f=(0,s.Z)(d,2),p=f[0],h=f[1],m=(0,u.useRef)(null),v=n.find((function(e){return e.value===t}));return(0,u.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&(c(!1),h(null))};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[]),(0,u.useEffect)((function(){l||h(null)}),[l]),(0,ce.jsxs)("div",{ref:m,style:{position:"relative",minWidth:80},children:[(0,ce.jsxs)("button",{onClick:function(){return c(!l)},style:{height:o.buttonSizes.md.height,padding:o.buttonSizes.md.padding,border:"1px solid ".concat(o.colors.border),borderRadius:o.buttonSizes.md.borderRadius,fontSize:o.buttonSizes.md.fontSize,background:o.colors.background,color:o.colors.text,cursor:"pointer",outline:"none",transition:o.transitions.default,fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeight.normal,display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"100%"},onFocus:function(e){e.currentTarget.style.borderColor=o.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(o.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=o.colors.border,e.currentTarget.style.boxShadow="none"},children:[(0,ce.jsx)("span",{children:(null===v||void 0===v?void 0:v.label)||"Select"}),(0,ce.jsx)(bt,{size:16,style:{transition:o.transitions.default,transform:l?"rotate(180deg)":"rotate(0deg)"}})]}),l&&(0,ce.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:o.colors.surface,border:"1px solid ".concat(o.colors.border),borderRadius:o.borderRadius.md,boxShadow:o.shadows.lg,zIndex:1e3,maxHeight:240,overflowY:"auto",marginTop:4},children:n.map((function(e){return(0,ce.jsx)("div",{onClick:function(){r(e.value),c(!1),h(null)},style:{padding:"8px 12px",cursor:"pointer",fontSize:o.typography.fontSize.sm,fontFamily:o.typography.fontFamily,borderBottom:"1px solid ".concat(o.colors.borderLight),transition:o.transitions.fast,background:e.value===t?o.colors.primary:"transparent",color:e.value===t?o.colors.textInverse:o.colors.text},onMouseEnter:function(n){if(e.value!==t&&(n.currentTarget.style.background=o.colors.surfaceHover),e.tooltip){var r=n.currentTarget.getBoundingClientRect();h({text:e.tooltip,x:Math.max(r.left+r.width/2,100),y:r.top-8})}},onMouseLeave:function(n){e.value!==t&&(n.currentTarget.style.background="transparent"),h(null)},children:e.label},e.value)}))}),p&&(0,ce.jsxs)("div",{style:{position:"fixed",left:p.x,top:p.y,transform:"translateX(-50%) translateY(-100%)",background:o.colors.surface,color:o.colors.text,padding:"8px 12px",borderRadius:o.borderRadius.md,border:"1px solid ".concat(o.colors.border),boxShadow:o.shadows.lg,fontSize:o.typography.fontSize.sm,fontFamily:o.typography.fontFamily,whiteSpace:"nowrap",zIndex:1001,pointerEvents:"none"},children:[p.text,(0,ce.jsx)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid ".concat(o.colors.surface),filter:"drop-shadow(0 1px 1px ".concat(o.colors.border,")")}})]})]})},St=(xt={},(0,l.Z)(xt,W.json,"Structured format, maximum support for all features"),(0,l.Z)(xt,W.bpseq,"Base Pair Sequence - No support for non-canonical base pairs"),(0,l.Z)(xt,W.svg,"Scalable Vector Graphics - Suitable for publications"),(0,l.Z)(xt,W.csv,"Comma Separated Values - No support for non-canonical base pairs"),(0,l.Z)(xt,W.tr,"Traveler Format - No support for non-canonical base pairs"),(0,l.Z)(xt,W.xrna,"XRNA native format - No support for non-canonical base pairs"),(0,l.Z)(xt,W.dbn,"Dot-bracket secondary structure (sequence + structure, including pseudoknots)"),xt),_t=G.map((function(e){return{value:e,label:e.toUpperCase(),tooltip:St[e]||"Export as ".concat(e.toUpperCase()," format")}})),At=56,Tt=function(e){var t=e.onImport,n=e.onSave,r=e.onExportWithFormat,o=e.fileName,a=void 0===o?"":o,i=e.onFileNameChange,l=e.exportFormat,s=e.exportFormats,c=void 0===s?_t:s,u=e.onExportFormatChange,d=e.downloadButtonReference,f=e.saveButtonsDisabledFlag,p=e.onDownload,h=(0,ge.Fg)().theme;return(0,ce.jsxs)("div",{style:{position:"absolute",top:0,left:Yt,right:0,height:At,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",background:h.colors.surface,borderBottom:"1px solid ".concat(h.colors.border),zIndex:1200,transition:h.transitions.default},children:[(0,ce.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(h.colors.accent,", ").concat(h.colors.primary,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t&&(0,ce.jsx)(Ee.z,{label:"Import",onClick:t,variant:"accent",icon:(0,ce.jsx)(Nt,{size:12})}),(0,ce.jsx)("input",{type:"text",placeholder:"Enter name to export",value:a,onChange:function(e){return null===i||void 0===i?void 0:i(e.target.value)},style:{height:h.buttonSizes.md.height,padding:h.buttonSizes.md.padding,border:"1px solid ".concat(h.colors.border),borderRadius:h.buttonSizes.md.borderRadius,fontSize:h.buttonSizes.md.fontSize,background:h.colors.background,color:h.colors.text,minWidth:180,transition:h.transitions.default},onFocus:function(e){e.currentTarget.style.borderColor=h.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(h.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=h.colors.border,e.currentTarget.style.boxShadow="none"}}),(0,ce.jsx)(It,{value:null!==l&&void 0!==l?l:"",options:c,onChange:function(e){return null===u||void 0===u?void 0:u(e)},theme:h}),n&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ee.z,{label:"Save",onClick:n,disabled:f||!l,variant:"secondary",icon:(0,ce.jsx)(Et,{size:12}),ref:d}),(0,ce.jsx)(Ee.z,{label:"Export",variant:"primary",icon:(0,ce.jsx)(Ct,{size:12}),disabled:f||!l,onClick:function(){l&&(null===r||void 0===r||r(a,l))}})]}),!n&&(0,ce.jsx)(Ee.z,{label:"Download",onClick:p,disabled:f||!l,variant:"secondary",icon:(0,ce.jsx)(We,{size:12}),ref:d})]}),(0,ce.jsx)(yt.T,{})]})},Pt=function(e){var t,n,r=e.mouseOverText,o=e.mouseOverTextDimensions,a=e.mouseUIPosition,i=e.parentDivResizeDetector,l=e.TOPBAR_HEIGHT,s=e.MOUSE_OVER_TEXT_FONT_SIZE,c=e.mouseOverTextSvgTextElementReference,d=(0,u.useMemo)((function(){return 0===r.length?null:(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("rect",{x:0,y:0,width:o.width+16,height:o.height+16,fill:"#f8fafc",stroke:"#cbd5e1",rx:8,ry:8,strokeWidth:1.5}),(0,ce.jsx)("text",{fill:"#1e293b",stroke:"none",x:8,y:8+s,ref:c,xmlSpace:"preserve",fontFamily:"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontSize:s,fontWeight:"500",children:r.split("\n").map((function(e,t){return(0,ce.jsx)("tspan",{x:8,dy:0===t?0:1.4*s,children:e},t)}))})]})}),[r,o,s,c]),f=Math.max(0,Math.min(a.x+12,Math.max((null!==(t=i.width)&&void 0!==t?t:0)-Yt,0)-(o.width+12))),p=Math.max(0,Math.min(a.y+12,Math.max((null!==(n=i.height)&&void 0!==n?n:0)-l,0)-(o.height+12)));return(0,ce.jsx)("g",{id:"structure-tooltip",style:{display:"inline",filter:"url(#xrTooltipShadow)"},transform:"translate(".concat(f,", ").concat(p,")"),children:d})},Rt=function(e){var t=e.settings,n=e.viewportWidth,r=e.viewportHeight,o=e.viewportScale,a=(0,ge.Fg)().isDarkMode,i=(t[q.pE.GRID_ENABLED],t[q.pE.GRID_HORIZONTAL_LINES]),l=t[q.pE.GRID_VERTICAL_LINES],s=t[q.pE.GRID_LEFT_RIGHT_DIAGONAL],c=t[q.pE.GRID_RIGHT_LEFT_DIAGONAL],d=t[q.pE.GRID_CONCENTRIC_CIRCLES],f=t[q.pE.GRID_DOTTED],p=t[q.pE.GRID_SPACING],h=t[q.pE.GRID_COLOR],m=(0,u.useMemo)((function(){return h||(a?"#E0E0E0":"#404040")}),[h,a]),v=Math.max(10,.5*p),x=Math.max(1,v*o),g=Math.max(.3,Math.max(.1,o)),y=(0,u.useMemo)((function(){if(x<=0)return{left:0,right:0,top:0,bottom:0};var e=.2*Math.max(n,r),t=-e,o=n+e,a=-e,i=r+e;return{left:Math.floor(t/x)*x,right:Math.ceil(o/x)*x,top:Math.floor(a/x)*x,bottom:Math.ceil(i/x)*x}}),[n,r,x]),b=(0,u.useMemo)((function(){if(!i)return[];for(var e=[],t=y.top;t<=y.bottom;t+=x)e.push((0,ce.jsx)("line",{x1:y.left,y1:t,x2:y.right,y2:t,stroke:m,strokeWidth:g,opacity:.25},"h-".concat(t)));return e}),[i,y,x,m,g]),N=(0,u.useMemo)((function(){if(!l)return[];for(var e=[],t=y.left;t<=y.right;t+=x)e.push((0,ce.jsx)("line",{x1:t,y1:y.top,x2:t,y2:y.bottom,stroke:m,strokeWidth:g,opacity:.25},"v-".concat(t)));return e}),[l,y,x,m,g]),E=(0,u.useMemo)((function(){if(!s)return[];for(var e=x*Math.sqrt(2),t=Math.max(n,r),o=y.left-t,a=y.right+t,i=[],l=0;l<=a-o;l+=e){var c=o+l,u=y.top,d=c+t,f=y.bottom;i.push((0,ce.jsx)("line",{x1:c,y1:u,x2:d,y2:f,stroke:m,strokeWidth:g,opacity:.15},"lr-".concat(l)))}return i}),[s,y,x,m,g,n,r]),C=(0,u.useMemo)((function(){if(!c)return[];for(var e=x*Math.sqrt(2),t=Math.max(n,r),o=y.left-t,a=y.right+t,i=[],l=0;l<=a-o;l+=e){var s=o+l,u=y.bottom,d=s+t,f=y.top;i.push((0,ce.jsx)("line",{x1:s,y1:u,x2:d,y2:f,stroke:m,strokeWidth:g,opacity:.15},"rl-".concat(l)))}return i}),[c,y,x,m,g,n,r]),I=(0,u.useMemo)((function(){if(!d)return[];for(var e=n/2,t=r/2,o=.6*Math.max(n,r),a=[],i=x;i<=o;i+=x)a.push((0,ce.jsx)("circle",{cx:e,cy:t,r:i,stroke:m,strokeWidth:g,fill:"none",opacity:.15},"c-".concat(i)));return a}),[d,x,m,g,n,r]),S=(0,u.useMemo)((function(){if(!f)return[];for(var e=[],t=2*x,o=1.5*Math.max(n,r),a=-o;a<=o;a+=t){var i=a,l=a+o,s=o;e.push((0,ce.jsx)("line",{x1:i,y1:0,x2:l,y2:s,stroke:m,strokeWidth:.5*g,opacity:.1},"cross-lr-".concat(a)))}for(var c=-o;c<=o;c+=t){var u=c,d=o,p=c+o;e.push((0,ce.jsx)("line",{x1:u,y1:d,x2:p,y2:0,stroke:m,strokeWidth:.5*g,opacity:.1},"cross-rl-".concat(c)))}return e}),[f,x,m,g,n,r]);return i||l||s||c||d||f?(0,ce.jsxs)("g",{id:"canvas-grid","data-theme-ignore":!0,pointerEvents:"none",children:[b,N,E,C,I,S]}):null},kt=(0,ue.Z)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),wt=(0,ue.Z)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Mt=n(5094),Ot=(0,ue.Z)("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),jt=(0,ue.Z)("move-horizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]),Lt=(0,ue.Z)("move-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]]),Dt=(0,ue.Z)("move-up-left",[["path",{d:"M5 11V5H11",key:"3q78g9"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]]),Zt=(0,ue.Z)("move-up-right",[["path",{d:"M13 5H19V11",key:"1n1gyv"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]]),Ft=function(e){var t=e.settings,n=e.setSettings,r=e.onZoomIn,o=e.onZoomOut,i=e.onResetViewport,c=e.position,d=void 0===c?{top:80,right:20}:c,f=(0,ge.Fg)(),p=f.theme,h=f.isDarkMode,m=(0,u.useState)(!1),v=(0,s.Z)(m,2),x=v[0],g=v[1],y=function(){return g(!x)},b=function(e,r){n((0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},e,r)))},N=function(e){var t=e.currentColor,n=e.onColorChange,r=e.label,o=(0,u.useState)(!1),a=(0,s.Z)(o,2),i=a[0],l=a[1],c=(0,u.useState)(t||"#808080"),d=(0,s.Z)(c,2),f=d[0],m=d[1],v=(0,u.useRef)(null);if((0,u.useEffect)((function(){if(i){var e=function(e){v.current&&(v.current.contains(e.target)||l(!1))};return document.addEventListener("mousedown",e),setTimeout((function(){var e;return null===(e=v.current)||void 0===e?void 0:e.focus()}),0),function(){return document.removeEventListener("mousedown",e)}}}),[i]),"Grid Lines"===r){var x=h?["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA"]:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"];return(0,ce.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ce.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,ce.jsx)("label",{style:{color:p.colors.text,fontSize:"13px"},children:r})}),(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)("button",{onClick:function(){i?l(!1):(m(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:h?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":p.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,ce.jsxs)("div",{ref:v,style:{position:"absolute",top:"32px",left:0,background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var t=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(t),l(!1)}},children:[(0,ce.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,ce.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:"#808080",onChange:function(e){return m(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,ce.jsx)("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.text,fontSize:"12px"}})]}),(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,ce.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,ce.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.primary),background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),x.map((function(e){return(0,ce.jsx)("button",{onClick:function(){n(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})}var g=h?["#E0E0E0","#B0B0B0","#808080","#404040"]:["#404040","#606060","#808080","#A0A0A0"];return(0,ce.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ce.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,ce.jsx)("label",{style:{color:p.colors.text,fontSize:"13px"},children:r})}),(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)("button",{onClick:function(){i?l(!1):(m(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:h?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":p.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,ce.jsxs)("div",{ref:v,style:{position:"absolute",top:"32px",left:0,background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var t=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(t),l(!1)}},children:[(0,ce.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,ce.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:"#808080",onChange:function(e){return m(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,ce.jsx)("input",{type:"text",value:f,onChange:function(e){return m(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.text,fontSize:"12px"}})]}),(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,ce.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.border),background:p.colors.surface,color:p.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,ce.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(f)?f:h?"#E0E0E0":"#404040";n(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(p.colors.primary),background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),g.map((function(e){return(0,ce.jsx)("button",{onClick:function(){n(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})},E=function(e){var r=e.setting,o=e.icon,i=e.label,s=e.isActive,c=e.onMouseEnter,u=e.onMouseLeave;return(0,ce.jsxs)("button",{onClick:function(){return function(e){n((0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},e,!t[e])))}(r)},onMouseEnter:c,onMouseLeave:u,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:s?p.colors.primary:"transparent",color:s?"#FFFFFF":p.colors.text,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:i,children:[(0,ce.jsx)(o,{size:20}),(0,ce.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:i})]})};return(0,ce.jsxs)("div",{style:{position:"absolute",top:d.top,right:d.right,zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-end"},children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[(0,ce.jsx)("button",{onClick:r,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom In",children:(0,ce.jsx)(kt,{size:20})}),(0,ce.jsx)("button",{onClick:o,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom Out",children:(0,ce.jsx)(wt,{size:20})}),(0,ce.jsx)("button",{onClick:i,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.surface,color:p.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Reset View",children:(0,ce.jsx)(Te,{size:20})})]}),(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)("button",{onClick:y,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:p.colors.primary,color:"#FFFFFF",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",transition:"all 0.2s ease",transform:x?"rotate(90deg)":"rotate(0deg)"},title:"View Settings",children:(0,ce.jsx)(De,{size:20})}),x&&(0,ce.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"12px",background:p.colors.surface,border:"1px solid ".concat(p.colors.border),borderRadius:"16px",padding:"20px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",minWidth:"320px",zIndex:1e3},children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,ce.jsx)("h3",{style:{margin:0,color:p.colors.text,fontSize:"18px",fontWeight:"600"},children:"View Settings"}),(0,ce.jsx)("button",{onClick:y,style:{background:"none",border:"none",color:p.colors.text,cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)(Ue.Z,{size:20})})]}),(0,ce.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ce.jsx)("h4",{style:{margin:"0 0 12px 0",color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Layout modes"}),(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",padding:"4px",background:p.colors.backgroundSecondary,borderRadius:"10px"},children:[(0,ce.jsxs)("button",{onClick:function(){return n((0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},q.pE.PATH_MODE,!1)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[q.pE.PATH_MODE]?"transparent":p.colors.primary,color:t[q.pE.PATH_MODE]?p.colors.text:"#FFFFFF",cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show nucleotide sequence text",children:[(0,ce.jsx)(Mt.Z,{size:16}),"Sequence"]}),(0,ce.jsxs)("button",{onClick:function(){return n((0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},q.pE.PATH_MODE,!0)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[q.pE.PATH_MODE]?p.colors.primary:"transparent",color:t[q.pE.PATH_MODE]?"#FFFFFF":p.colors.text,cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show path lines tracing nucleotide centers",children:[(0,ce.jsx)(Ot,{size:16}),"Path"]})]}),(0,ce.jsx)("p",{style:{margin:"8px 0 0 0",color:p.colors.textSecondary,fontSize:"11px",lineHeight:"1.4"},children:t[q.pE.PATH_MODE]?"Path mode shows lines tracing nucleotide centers for an abstracted view of larger structures.":"Sequence mode displays nucleotide text with full details."})]}),(0,ce.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ce.jsx)("h4",{style:{margin:"0 0 12px 0",color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Types"}),(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[(0,ce.jsx)(E,{setting:q.pE.GRID_HORIZONTAL_LINES,icon:jt,label:"Horizontal",isActive:t[q.pE.GRID_HORIZONTAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,ce.jsx)(E,{setting:q.pE.GRID_VERTICAL_LINES,icon:Lt,label:"Vertical",isActive:t[q.pE.GRID_VERTICAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,ce.jsx)(E,{setting:q.pE.GRID_LEFT_RIGHT_DIAGONAL,icon:Dt,label:"LR Diagonal",isActive:t[q.pE.GRID_LEFT_RIGHT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,ce.jsx)(E,{setting:q.pE.GRID_RIGHT_LEFT_DIAGONAL,icon:Zt,label:"RL Diagonal",isActive:t[q.pE.GRID_RIGHT_LEFT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,ce.jsx)(E,{setting:q.pE.GRID_CONCENTRIC_CIRCLES,icon:Me,label:"Circles",isActive:t[q.pE.GRID_CONCENTRIC_CIRCLES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,ce.jsxs)("button",{onClick:function(){var e,r=(e={},(0,l.Z)(e,q.pE.GRID_ENABLED,q.Z[q.pE.GRID_ENABLED]),(0,l.Z)(e,q.pE.GRID_HORIZONTAL_LINES,q.Z[q.pE.GRID_HORIZONTAL_LINES]),(0,l.Z)(e,q.pE.GRID_VERTICAL_LINES,q.Z[q.pE.GRID_VERTICAL_LINES]),(0,l.Z)(e,q.pE.GRID_LEFT_RIGHT_DIAGONAL,q.Z[q.pE.GRID_LEFT_RIGHT_DIAGONAL]),(0,l.Z)(e,q.pE.GRID_RIGHT_LEFT_DIAGONAL,q.Z[q.pE.GRID_RIGHT_LEFT_DIAGONAL]),(0,l.Z)(e,q.pE.GRID_CONCENTRIC_CIRCLES,q.Z[q.pE.GRID_CONCENTRIC_CIRCLES]),(0,l.Z)(e,q.pE.GRID_DOTTED,q.Z[q.pE.GRID_DOTTED]),(0,l.Z)(e,q.pE.GRID_SPACING,q.Z[q.pE.GRID_SPACING]),(0,l.Z)(e,q.pE.GRID_COLOR,q.Z[q.pE.GRID_COLOR]),(0,l.Z)(e,q.pE.CANVAS_COLOR,q.Z[q.pE.CANVAS_COLOR]),e);n((0,a.Z)((0,a.Z)({},t),r))},onMouseEnter:function(e){e.currentTarget.style.background=p.colors.surfaceHover,e.currentTarget.style.borderColor=p.colors.borderDark,e.currentTarget.style.color=p.colors.text},onMouseLeave:function(e){e.currentTarget.style.background=p.colors.surface,e.currentTarget.style.borderColor=p.colors.border,e.currentTarget.style.color=p.colors.textSecondary},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:"transparent",color:p.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:"Reset all canvas and grid settings to default",children:[(0,ce.jsx)(Te,{size:20}),(0,ce.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:"Reset"})]})]})]}),(0,ce.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,ce.jsx)("label",{style:{color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Spacing"}),(0,ce.jsx)("span",{style:{color:p.colors.textSecondary,fontSize:"12px"},children:t[q.pE.GRID_SPACING]})]}),(0,ce.jsx)("input",{type:"range",min:"5",max:"100",step:"2",value:t[q.pE.GRID_SPACING],onChange:function(e){return n((0,a.Z)((0,a.Z)({},t),{},(0,l.Z)({},q.pE.GRID_SPACING,parseInt(e.target.value))))},style:{width:"100%",height:"6px",borderRadius:"3px",background:p.colors.border,outline:"none",cursor:"pointer"}})]}),(0,ce.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ce.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,ce.jsx)("h4",{style:{margin:0,color:p.colors.text,fontSize:"14px",fontWeight:"500"},children:"Colors"})}),(0,ce.jsx)(N,{currentColor:t[q.pE.CANVAS_COLOR],onColorChange:function(e){return b(q.pE.CANVAS_COLOR,e)},label:"Canvas Background"}),(0,ce.jsx)(N,{currentColor:t[q.pE.GRID_COLOR],onColorChange:function(e){return b(q.pE.GRID_COLOR,e)},label:"Grid Lines"})]})]})]})]})},Bt=u.memo(Ft),Ut=(0,ue.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),zt=n(966),Wt=(0,ue.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Gt=function(e){var t=e.isOpen,n=e.onClose,a=e.onImportPaste,i=e.onImportFile,l=e.onLoadExample,c=e.onImportFR3D,d=e.errorMessage,f=(0,ge.Fg)().theme,h=(0,u.useState)("new"),m=(0,s.Z)(h,2),v=m[0],x=m[1],g=(0,u.useState)(""),y=(0,s.Z)(g,2),b=y[0],N=y[1],E=(0,u.useState)(null),C=(0,s.Z)(E,2),I=C[0],S=C[1],_=(0,u.useState)(!1),A=(0,s.Z)(_,2),T=A[0],P=A[1],R=(0,u.useState)(""),k=(0,s.Z)(R,2),w=k[0],M=k[1],O=(0,u.useState)(""),j=(0,s.Z)(O,2),L=j[0],D=j[1],Z=(0,u.useState)(!1),F=(0,s.Z)(Z,2),B=F[0],U=F[1],z=(0,u.useState)(!1),W=(0,s.Z)(z,2),G=W[0],H=W[1],K=(0,u.useRef)(null);(0,u.useEffect)((function(){t&&(N(""),S(null),M(""),D(""),U(!1),H(!1))}),[t]),(0,u.useEffect)((function(){d&&S(d)}),[d]);var q=(0,u.useCallback)((function(){var e=b.trim();e?e.startsWith(">")?(S(null),a(e,v)):S('Extended FASTA must start with ">" followed by the molecule name.'):S("Please enter content to import.")}),[b,v,a]),X=(0,u.useCallback)((0,o.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.trim().toUpperCase(),n=L.trim(),t){e.next=5;break}return S("Please enter a PDB ID."),e.abrupt("return");case 5:if(n){e.next=8;break}return S("Please enter a Chain ID."),e.abrupt("return");case 8:return S(null),U(!0),e.prev=10,e.next=13,c(t,n,v);case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:return e.prev=17,U(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[10,15,17,20]])}))),[w,L,v,c]),Y=(0,u.useCallback)((function(e){var t,n=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();n&&V.inputFileExtensions.includes(n)?(S(null),i(e,v)):S("Unsupported file type. Supported: ".concat(V.inputFileExtensions.join(", ")))}),[v,i]),Q=(0,u.useCallback)((function(e){var t=e.target.files;t&&t.length>0&&Y(t[0]),e.target.value=""}),[Y]),$=(0,u.useCallback)((function(e){e.preventDefault(),P(!1);var t=e.dataTransfer.files;t&&t.length>0&&Y(t[0])}),[Y]),J=(0,u.useCallback)((function(e){"Escape"===e.key&&n()}),[n]);if(!t)return null;var ee=I||d;return(0,p.createPortal)((0,ce.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,backdropFilter:"blur(4px)"},onClick:n,onKeyDown:J,role:"dialog","aria-modal":"true","aria-label":"Import structure",children:(0,ce.jsxs)("div",{style:{backgroundColor:f.colors.surface,borderRadius:f.borderRadius.xl,boxShadow:f.shadows.xl,width:"90%",maxWidth:"480px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden",border:"1px solid ".concat(f.colors.border)},onClick:function(e){return e.stopPropagation()},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 18px",borderBottom:"1px solid ".concat(f.colors.border),background:"linear-gradient(135deg, ".concat(f.colors.primary,"08, ").concat(f.colors.accent,"08)")},children:[(0,ce.jsx)("h2",{style:{margin:0,fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.text},children:"Import Structure"}),(0,ce.jsx)("button",{onClick:n,style:{background:"transparent",border:"none",cursor:"pointer",padding:"6px",borderRadius:f.borderRadius.md,display:"flex",alignItems:"center",justifyContent:"center",color:f.colors.textMuted,transition:"all 0.2s"},onMouseEnter:function(e){e.currentTarget.style.backgroundColor=f.colors.surfaceHover,e.currentTarget.style.color=f.colors.text},onMouseLeave:function(e){e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=f.colors.textMuted},"aria-label":"Close",children:(0,ce.jsx)(Ue.Z,{size:20})})]}),(0,ce.jsxs)("div",{style:{padding:"16px 18px",flex:1,overflow:"auto"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"3px",marginBottom:"14px",background:f.colors.background,borderRadius:f.borderRadius.md,border:"1px solid ".concat(f.colors.border)},children:[(0,ce.jsxs)("button",{onClick:function(){return x("new")},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",border:"none",borderRadius:f.borderRadius.sm,cursor:"pointer",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,transition:"all 0.15s",background:"new"===v?f.colors.primary:"transparent",color:"new"===v?f.colors.textInverse:f.colors.textSecondary},children:[(0,ce.jsx)(Ut,{size:12}),"New Canvas"]}),(0,ce.jsxs)("button",{onClick:function(){return x("add")},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",border:"none",borderRadius:f.borderRadius.sm,cursor:"pointer",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,transition:"all 0.15s",background:"add"===v?f.colors.accent:"transparent",color:"add"===v?f.colors.textInverse:f.colors.textSecondary},children:[(0,ce.jsx)(zt.Z,{size:12}),"Add to Existing"]})]}),(0,ce.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"14px"},children:[(0,ce.jsxs)("div",{onDragOver:function(e){e.preventDefault(),P(!0)},onDragLeave:function(){return P(!1)},onDrop:$,onClick:function(){var e;return null===(e=K.current)||void 0===e?void 0:e.click()},style:{flex:1,display:"flex",alignItems:"center",gap:"10px",border:"1.5px dashed ".concat(T?f.colors.primary:f.colors.border),borderRadius:f.borderRadius.md,padding:"10px 12px",cursor:"pointer",transition:"all 0.15s",background:T?"".concat(f.colors.primary,"10"):f.colors.background},onMouseEnter:function(e){T||(e.currentTarget.style.borderColor=f.colors.textSecondary,e.currentTarget.style.background=f.colors.surfaceHover)},onMouseLeave:function(e){T||(e.currentTarget.style.borderColor=f.colors.border,e.currentTarget.style.background=f.colors.background)},children:[(0,ce.jsx)(ze,{size:16,color:T?f.colors.primary:f.colors.textMuted}),(0,ce.jsx)("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.text},children:"Drop file or browse"})]}),(0,ce.jsxs)("button",{onClick:function(){S(null),l(v)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 12px",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,color:f.colors.accent,backgroundColor:"transparent",border:"1.5px solid ".concat(f.colors.accent,"50"),borderRadius:f.borderRadius.md,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:function(e){e.currentTarget.style.backgroundColor="".concat(f.colors.accent,"10"),e.currentTarget.style.borderColor=f.colors.accent},onMouseLeave:function(e){e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="".concat(f.colors.accent,"50")},children:[(0,ce.jsx)(Wt,{size:14}),"Example"]})]}),(0,ce.jsx)("input",{ref:K,type:"file",accept:V.inputFileExtensions.map((function(e){return".".concat(e)})).join(","),onChange:Q,style:{display:"none"}}),(0,ce.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,ce.jsx)("label",{style:{display:"block",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,color:f.colors.textSecondary,marginBottom:"6px"},children:"Paste Extended FASTA"}),(0,ce.jsx)("textarea",{value:b,onChange:function(e){N(e.target.value),S(null)},placeholder:"> molecule_name\nUGAAGAACGCAGCGAAAUGCGAUACGUAAUGUGAAUUGCAGAAUUCCGUGAAUCAUCGAAUCUUUGAAC\n....(((((((......)))).....(.(((......................)))..)...)))....",style:{width:"100%",height:"120px",padding:"10px 12px",fontSize:f.typography.fontSize.sm,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Monaco, Consolas, monospace',backgroundColor:f.colors.background,color:f.colors.text,border:"1px solid ".concat(f.colors.border),borderRadius:f.borderRadius.md,resize:"vertical",outline:"none",boxSizing:"border-box",lineHeight:1.4},onFocus:function(e){e.currentTarget.style.borderColor=f.colors.primary,e.currentTarget.style.boxShadow="0 0 0 2px ".concat(f.colors.primary,"20")},onBlur:function(e){e.currentTarget.style.borderColor=f.colors.border,e.currentTarget.style.boxShadow="none"}}),(0,ce.jsxs)("button",{onClick:q,disabled:!b.trim(),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",marginTop:"8px",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.textInverse,backgroundColor:b.trim()?"new"===v?f.colors.primary:f.colors.accent:f.colors.textMuted,border:"none",borderRadius:f.borderRadius.md,cursor:b.trim()?"pointer":"not-allowed",transition:"all 0.15s",opacity:b.trim()?1:.6},onMouseEnter:function(e){b.trim()&&(e.currentTarget.style.opacity="0.9")},onMouseLeave:function(e){e.currentTarget.style.opacity=b.trim()?"1":"0.6"},children:["new"===v?(0,ce.jsx)(Ut,{size:14}):(0,ce.jsx)(zt.Z,{size:14}),"Import FASTA"]})]}),(0,ce.jsxs)("div",{style:{border:"1px solid ".concat(f.colors.border),borderRadius:f.borderRadius.md,overflow:"hidden"},children:[(0,ce.jsxs)("button",{onClick:function(){return H(!G)},style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:f.colors.background,border:"none",cursor:"pointer",color:f.colors.textSecondary,fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium},children:[(0,ce.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,ce.jsx)(Qe,{size:14}),"Fetch from PDB (FR3D)"]}),(0,ce.jsx)(bt,{size:14,style:{transform:G?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),G&&(0,ce.jsxs)("div",{style:{padding:"12px",borderTop:"1px solid ".concat(f.colors.border)},children:[(0,ce.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[(0,ce.jsx)("input",{type:"text",value:w,onChange:function(e){M(e.target.value.toUpperCase()),S(null)},placeholder:"PDB ID (e.g. 1GID)",style:{flex:1,padding:"8px 10px",fontSize:f.typography.fontSize.sm,fontFamily:"monospace",backgroundColor:f.colors.surface,color:f.colors.text,border:"1px solid ".concat(f.colors.border),borderRadius:f.borderRadius.sm,outline:"none",boxSizing:"border-box",textTransform:"uppercase"},onFocus:function(e){e.currentTarget.style.borderColor=f.colors.primary},onBlur:function(e){e.currentTarget.style.borderColor=f.colors.border}}),(0,ce.jsx)("input",{type:"text",value:L,onChange:function(e){D(e.target.value),S(null)},placeholder:"Chain",style:{width:"70px",padding:"8px 10px",fontSize:f.typography.fontSize.sm,fontFamily:"monospace",backgroundColor:f.colors.surface,color:f.colors.text,border:"1px solid ".concat(f.colors.border),borderRadius:f.borderRadius.sm,outline:"none",boxSizing:"border-box"},onFocus:function(e){e.currentTarget.style.borderColor=f.colors.primary},onBlur:function(e){e.currentTarget.style.borderColor=f.colors.border}})]}),(0,ce.jsx)("button",{onClick:X,disabled:B||!w.trim()||!L.trim(),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"8px 12px",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,color:f.colors.textInverse,backgroundColor:!B&&w.trim()&&L.trim()?"new"===v?f.colors.primary:f.colors.accent:f.colors.textMuted,border:"none",borderRadius:f.borderRadius.sm,cursor:!B&&w.trim()&&L.trim()?"pointer":"not-allowed",transition:"all 0.15s",opacity:!B&&w.trim()&&L.trim()?1:.6},children:B?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)($e,{size:12,style:{animation:"spin 1s linear infinite"}}),"Fetching..."]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Qe,{size:12}),"Fetch"]})})]})]}),ee&&(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"12px",padding:"10px 12px",backgroundColor:"".concat(f.colors.error,"10"),borderRadius:f.borderRadius.md,border:"1px solid ".concat(f.colors.error,"20")},children:(0,ce.jsx)("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.error,lineHeight:1.4},children:ee})})]})]})}),document.body)},Ht=n(7669),Kt={},Vt=-50;Vt<=50;Vt++)Kt[Vt]=Math.pow(M.SCALE_BASE,Vt);var qt={top:80,right:17},Xt=[{shortcut:"Ctrl/cmd + O",action:"Open file picker"},{shortcut:"Ctrl/cmd + S",action:"Save"},{shortcut:"Ctrl/cmd + Shift + S",action:"Export as"},{shortcut:"Ctrl/cmd + 0",action:"Reset viewport"},{shortcut:"Left Click",action:"Select constraint"},{shortcut:"Right Click",action:"Open constraint menu"},{shortcut:"Ctrl/cmd + Z",action:"Undo change"},{shortcut:"Ctrl/cmd + Y",action:"Redo change"},{shortcut:"Middle Click",action:"Freeze selection"},{shortcut:"Ctrl/cmd + Click",action:"Break or create pair"},{shortcut:"Ctrl/cmd + Shift + Click",action:"Create & reposition pair"},{shortcut:"Shift + Click (on basepair)",action:"Recenter constraint"}],Yt=420,Qt="exornata_setting_",$t=31536e3,Jt=[q.pE.CANVAS_COLOR,q.pE.GRID_ENABLED,q.pE.GRID_HORIZONTAL_LINES,q.pE.GRID_VERTICAL_LINES,q.pE.GRID_LEFT_RIGHT_DIAGONAL,q.pE.GRID_RIGHT_LEFT_DIAGONAL,q.pE.GRID_CONCENTRIC_CIRCLES,q.pE.GRID_DOTTED,q.pE.GRID_SPACING,q.pE.GRID_COLOR];function en(e){if("undefined"===typeof document)return null;var t,n=document.cookie.split(";"),r=(0,c.Z)(n);try{for(r.s();!(t=r.n()).done;){var o=t.value.trim().split("="),a=(0,s.Z)(o,2),i=a[0],l=a[1];if(i==="".concat(Qt).concat(e))return decodeURIComponent(l)}}catch(u){r.e(u)}finally{r.f()}return null}function tn(e,t){if("undefined"!==typeof document){var n=encodeURIComponent(String(t));document.cookie="".concat(Qt).concat(e,"=").concat(n,"; path=/; max-age=").concat($t,"; SameSite=Lax")}}var nn,rn="parent_div",on="viewport",an="testSpace",ln="mouse_over_text_group",sn="viewport_scale_group_0",cn="viewport_scale_group_1",un="viewport_translate_group_0",dn="viewport_translate_group_1",fn="svg_background",pn="svg_scene_group",hn=7,mn="nucleotide",vn="basePair",xn="label",gn="noStroke",yn="|",bn=function(e){return e.URL_PARSING_ERROR="URL parsing error",e.NO_DATA="No data",e.DATA_IS_LOADING="Data is loading",e.DATA_IS_LOADED="Data is loaded",e.DATA_LOADING_FAILED="Data loading failed",e}(bn||{}),Nn=(gt={},(0,l.Z)(gt,d.OK.EDIT,"red"),(0,l.Z)(gt,d.OK.FORMAT,"blue"),(0,l.Z)(gt,d.OK.ANNOTATE,"rgb(0,110,51)"),gt);(nn||(nn={})).Component=function(e){var t,n,p,h,m,v,x,g=e.r2dtLegacyVersionFlag,y=(0,u.useState)(""),N=(0,s.Z)(y,2),C=N[0],I=N[1],S=(0,u.useState)({}),P=(0,s.Z)(S,2),j=P[0],L=P[1],Z=(0,u.useState)(0),F=(0,s.Z)(Z,2),B=F[0],U=F[1],z=(0,u.useState)(""),G=(0,s.Z)(z,2),J=(G[0],G[1]),ee=(0,u.useState)(""),re=(0,s.Z)(ee,2),oe=re[0],ae=re[1],ie=(0,u.useState)(W.json),le=(0,s.Z)(ie,2),se=le[0],ue=le[1],de=(0,u.useState)({x:0,y:0,width:1,height:1}),fe=(0,s.Z)(de,2),pe=fe[0],he=fe[1],ge=(0,u.useState)({}),ye=(0,s.Z)(ge,2),be=ye[0],Ne=ye[1],Ee=(0,u.useState)(!1),Ce=(0,s.Z)(Ee,2),Ie=Ce[0],Se=(Ce[1],(0,u.useState)({})),_e=(0,s.Z)(Se,2),Ae=_e[0],Te=_e[1],Pe=(0,u.useState)([]),Re=(0,s.Z)(Pe,2),ke=Re[0],we=Re[1],Me=(0,u.useState)([]),Oe=(0,s.Z)(Me,2),je=Oe[0],Le=Oe[1],De=(0,u.useState)(!1),Ze=(0,s.Z)(De,2),Fe=Ze[0],Ue=Ze[1],ze=(0,u.useState)(void 0),We=(0,s.Z)(ze,2),Ge=We[0],Ke=We[1],Ve=(0,u.useState)(d.OK.EDIT),Xe=(0,s.Z)(Ve,2),Ye=Xe[0],Qe=Xe[1],$e=(0,u.useRef)(d.OK.EDIT);(0,u.useEffect)((function(){$e.current=Ye}),[Ye]),(0,u.useEffect)((function(){var e=function(e){if("f"===e.key||"F"===e.key){var t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;e.preventDefault();var n=ka.current,r=Ra.current;if(!(Object.keys(n).length>0))return;for(var o=!1,a=0,l=Object.entries(n);a<l.length;a++){var u=(0,s.Z)(l[a],2),d=u[0],f=u[1],p=Number.parseInt(d);if(p in r)for(var h=0,m=Object.entries(f);h<m.length;h++){var v=(0,s.Z)(m[h],2),x=v[0],g=v[1];if(x in r[p]){var y,b=(0,c.Z)(g);try{for(b.s();!(y=b.n()).done;){var N=y.value;if(r[p][x].has(N)){o=!0;break}}}catch(J){b.e(J)}finally{b.f()}}if(o)break}if(o)break}if(o){for(var E=structuredClone(r),C=0,I=Object.entries(n);C<I.length;C++){var S=(0,s.Z)(I[C],2),_=S[0],A=S[1],T=Number.parseInt(_);if(T in E){for(var P=0,R=Object.entries(A);P<R.length;P++){var k=(0,s.Z)(R[P],2),w=k[0],M=k[1];if(w in E[T]){var O,j=(0,c.Z)(M);try{for(j.s();!(O=j.n()).done;){var L=O.value;E[T][w].delete(L)}}catch(J){j.e(J)}finally{j.f()}0===E[T][w].size&&delete E[T][w]}}0===Object.keys(E[T]).length&&delete E[T]}}Te(E)}else{for(var D=structuredClone(r),Z=0,F=Object.entries(n);Z<F.length;Z++){var B=(0,s.Z)(F[Z],2),U=B[0],z=B[1],W=Number.parseInt(U);W in D||(D[W]={});for(var G=0,H=Object.entries(z);G<H.length;G++){var K=(0,s.Z)(H[G],2),V=K[0],q=K[1];V in D[W]||(D[W][V]=new Set);var X,Y=(0,c.Z)(q);try{for(Y.s();!(X=Y.n()).done;){var Q=X.value;D[W][V].add(Q)}}catch(J){Y.e(J)}finally{Y.f()}}}Te(D)}var $=wa.current;we([].concat((0,i.Z)($),[structuredClone(r)])),Le([])}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]);var Je=(0,u.useState)(Q.Uq.Enum.SINGLE_NUCLEOTIDE),et=(0,s.Z)(Je,2),tt=et[0],rt=et[1],ot=(0,u.useState)((function(){var e=function(){var e,t={},n=(0,c.Z)(Jt);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=en(r);if(null!==o){var a=q.kR[r];if("boolean"===a)t[r]="true"===o;else if("number"===a){var i=parseFloat(o);isNaN(i)||(t[r]=i)}else t[r]=o}}}catch(l){n.e(l)}finally{n.f()}return t}();return(0,a.Z)((0,a.Z)({},q.Z),e)})),at=(0,s.Z)(ot,2),it=at[0],lt=at[1];(0,u.useEffect)((function(){var e,t=(0,c.Z)(Jt);try{for(t.s();!(e=t.n()).done;){var n=e.value;tn(n,it[n])}}catch(r){t.e(r)}finally{t.f()}}),[it]);var st=(0,u.useState)((0,ce.jsx)(ce.Fragment,{})),ct=(0,s.Z)(st,2),ut=ct[0],ft=ct[1],ht=(0,u.useState)({}),xt=(0,s.Z)(ht,2),gt=xt[0],yt=xt[1],bt=(0,u.useState)({}),Nt=(0,s.Z)(bt,2),Et=Nt[0],Ct=Nt[1],It=(0,u.useState)(bn.NO_DATA),St=(0,s.Z)(It,2),_t=St[0],kt=St[1],wt=(0,u.useState)(""),Mt=(0,s.Z)(wt,2),Ot=Mt[0],jt=Mt[1],Lt=(0,u.useState)({width:0,height:0}),Dt=(0,s.Z)(Lt,2),Zt=Dt[0],Ft=Dt[1],Ut=(0,u.useState)({x:0,y:0}),zt=(0,s.Z)(Ut,2),Wt=zt[0],Vt=zt[1],Qt=(0,u.useState)({x:0,y:0}),$t=(0,s.Z)(Qt,2),nn=$t[0],ln=$t[1],yn=(0,u.useState)(void 0),En=(0,s.Z)(yn,2),Cn=En[0],In=En[1],Sn=(0,u.useState)({x:0,y:0}),_n=(0,s.Z)(Sn,2),An=_n[0],Tn=_n[1],Pn=(0,u.useState)(null),Rn=(0,s.Z)(Pn,2),kn=Rn[0],wn=Rn[1],Mn=(0,u.useState)(!1),On=(0,s.Z)(Mn,2),jn=On[0],Ln=On[1],Dn=(0,u.useState)(""),Zn=(0,s.Z)(Dn,2),Fn=Zn[0],Bn=Zn[1],Un=(0,u.useState)(""),zn=(0,s.Z)(Un,2),Wn=(zn[0],zn[1]),Gn=(0,u.useState)(""),Hn=(0,s.Z)(Gn,2),Kn=Hn[0],Vn=Hn[1],qn=(0,u.useState)(""),Xn=(0,s.Z)(qn,2),Yn=Xn[0],Qn=Xn[1],$n=(0,u.useState)(Q.Uq.DEFAULT_OPTIONS),Jn=(0,s.Z)($n,2),er=Jn[0],tr=Jn[1],nr=(0,u.useState)((0,ce.jsx)(ce.Fragment,{})),rr=(0,s.Z)(nr,2),or=rr[0],ar=(rr[1],(0,u.useState)({})),ir=(0,s.Z)(ar,2),lr=ir[0],sr=ir[1],cr=(0,u.useState)({}),ur=(0,s.Z)(cr,2),dr=ur[0],fr=ur[1],pr=(0,u.useState)({}),hr=(0,s.Z)(pr,2),mr=hr[0],vr=hr[1],xr=(0,u.useState)({}),gr=(0,s.Z)(xr,2),yr=gr[0],br=gr[1],Nr=(0,u.useState)(""),Er=(0,s.Z)(Nr,2),Cr=(Er[0],Er[1]),Ir=(0,u.useState)(void 0),Sr=(0,s.Z)(Ir,2),_r=Sr[0],Ar=Sr[1],Tr=(0,u.useState)(0),Pr=(0,s.Z)(Tr,2),Rr=Pr[0],kr=Pr[1],wr=(0,u.useState)(0),Mr=(0,s.Z)(wr,2),Or=Mr[0],jr=Mr[1],Lr=(0,u.useState)(1),Dr=(0,s.Z)(Lr,2),Zr=Dr[0],Fr=Dr[1],Br=(0,u.useState)(0),Ur=(0,s.Z)(Br,2),zr=Ur[0],Wr=Ur[1],Gr=(0,u.useState)([]),Hr=(0,s.Z)(Gr,2),Kr=Hr[0],Vr=Hr[1],qr=(0,u.useState)(void 0),Xr=(0,s.Z)(qr,2),Yr=Xr[0],Qr=Xr[1],$r=(0,u.useState)(0),Jr=(0,s.Z)($r,2),eo=Jr[0],to=Jr[1],no=(0,u.useState)(0),ro=(0,s.Z)(no,2),oo=ro[0],ao=ro[1],io=function(e){return e.NONE="none",e.PROPERTIES="properties",e.BASEPAIR="basepair",e.BASE_PAIR_EDITOR="basePairEditor",e.SETTINGS="settings",e.ABOUT="about",e}({}),lo=(0,u.useState)(io.NONE),so=(0,s.Z)(lo,2),co=so[0],uo=so[1],fo=(0,u.useState)(!1),po=(0,s.Z)(fo,2),ho=po[0],mo=po[1],vo=(0,u.useState)(""),xo=(0,s.Z)(vo,2),go=(xo[0],xo[1]),yo=(0,u.useState)(void 0),bo=(0,s.Z)(yo,2),No=(bo[0],bo[1]),Eo=(0,u.useState)({}),Co=(0,s.Z)(Eo,2),Io=Co[0],So=Co[1],_o=(0,u.useState)([]),Ao=(0,s.Z)(_o,2),To=Ao[0],Po=Ao[1],Ro=(0,u.useRef)(To);Ro.current=To;var ko=(0,u.useState)(void 0),wo=(0,s.Z)(ko,2),Mo=wo[0],Oo=wo[1],jo=(0,u.useState)((function(){return function(e){return e}})),Lo=(0,s.Z)(jo,2),Do=Lo[0],Zo=Lo[1],Fo=(0,u.useRef)(Do);Fo.current=Do;var Bo=(0,u.useState)(!1),Uo=(0,s.Z)(Bo,2),zo=Uo[0],Wo=Uo[1],Go=(0,u.useRef)(zo);Go.current=zo;var Ho=(0,u.useState)(!1),Ko=(0,s.Z)(Ho,2),Vo=Ko[0],qo=Ko[1];function Xo(e,t){null!==e&&Tn(e.initiateDrag()),wn(e),br(t)}(0,u.useRef)(Vo).current=Vo;var Yo=(0,u.useRef)(null),Qo=(0,u.createRef)(),$o=function(e){void 0===e&&(e={});var t=e.skipOnMount,n=void 0!==t&&t,r=e.refreshMode,o=e.refreshRate,a=void 0===o?1e3:o,i=e.refreshOptions,l=e.handleWidth,s=void 0===l||l,c=e.handleHeight,d=void 0===c||c,f=e.targetRef,p=e.observerOptions,h=e.onResize,m=(0,u.useRef)(n),v=(0,u.useRef)(null),x=(0,u.useRef)(),g=null!==f&&void 0!==f?f:v,y=(0,u.useState)({width:void 0,height:void 0}),N=y[0],C=y[1];return A((function(){if(s||d){var e=_(h,C,s,d);x.current=E((function(t){(s||d)&&t.forEach((function(t){var n=t&&t.contentRect||{},r=n.width,o=n.height;!m.current&&e({width:r,height:o}),m.current=!1}))}),r,a,i);var t=new window.ResizeObserver(x.current);return g.current&&t.observe(g.current,p),function(){var e,n;t.disconnect(),null===(n=(e=x.current).cancel)||void 0===n||n.call(e)}}}),[r,a,i,s,d,h,p,g.current]),b({ref:g},N)}(),Jo=(0,u.useRef)(tt);Jo.current=tt;var ea=(0,u.useRef)();ea.current=Ye;var ta=(0,u.useRef)(NaN);ta.current=Rr;var na=(0,u.useRef)(NaN);na.current=Or;var ra=(0,u.useRef)();ra.current=j;var oa=(0,u.useRef)(),aa=(0,u.useRef)();aa.current=er;var ia=(0,u.useRef)();ia.current=lr;var la=(0,u.useRef)();la.current=dr;var sa=(0,u.useRef)();sa.current=kn;var ca=(0,u.useRef)();ca.current=nn;var ua=(0,u.useRef)();ua.current=An;var da=(0,u.useRef)(),fa=(0,u.useRef)();fa.current=Zr;var pa=(0,u.useRef)(),ha=(0,u.useRef)(),ma=(0,u.useRef)();ma.current=zr;var va=(0,u.useRef)(),xa=(0,u.useRef)();xa.current=pe;var ga=(0,u.useRef)();ga.current=jn,(0,u.useRef)().current=or;var ya=(0,u.useRef)();ya.current=it;var ba=(0,u.useRef)();ba.current=oe;var Na=(0,u.useRef)();Na.current=se;var Ea=(0,u.useRef)(null);(0,u.useRef)().current=Fn;var Ca=(0,u.useRef)(null),Ia=(0,u.useRef)(0);Ia.current=B;var Sa=(0,u.useRef)(),_a=(0,u.useRef)(),Aa=(0,u.useRef)();Aa.current=Cn;var Ta=(0,u.useRef)(),Pa=(0,u.useRef)(),Ra=(0,u.useRef)();Ra.current=Ae;var ka=(0,u.useRef)();ka.current=mr;var wa=(0,u.useRef)();wa.current=ke;var Ma=(0,u.useRef)();Ma.current=je;var Oa=(0,u.useRef)();Oa.current=be;var ja=(0,u.useRef)();ja.current=C;var La=(0,u.useRef)();La.current=Yr;var Da=(0,u.useRef)();Da.current=_r,(0,u.useEffect)((function(){if((0,Y.isEmpty)(j))return Ea.current=null,void(""!==oe&&(ae(""),ba.current=""))}),[j]),(0,u.useEffect)((function(){(0,Y.isEmpty)(j)||void 0!==se||(ue(W.json),Na.current=W.json)}),[j,se]);var Za=g?K:H,Fa=(0,u.useMemo)((function(){return{initiateDrag:function(){return{x:ta.current,y:na.current}},continueDrag:function(e){kr(e.x),jr(e.y)}}}),[]),Ba=(0,u.useMemo)((function(){var e=Object.entries(j);return U(e.length),Ta.current=e,e}),[j]),Ua=(0,u.useMemo)((function(){var e;return Math.max((null!==(e=$o.width)&&void 0!==e?e:0)-Yt,0)}),[$o.width,Yt]),za=(0,u.useMemo)((function(){var e;return Math.max((null!==(e=$o.height)&&void 0!==e?e:0)-At,0)}),[$o.height,At]),Wa=(0,u.useMemo)((function(){return{width:1/(pe.width+hn),height:1/pe.height}}),[pe]),Ga=(0,u.useMemo)((function(){return window.widthScale=Ua,window.heightScale=za,Math.min(Ua*Wa.width,za*Wa.height)}),[Ua,za,Wa]);da.current=Ga;var Ha=(0,u.useMemo)((function(){var e={x:-pe.x,y:-(pe.y+pe.height)},t={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return Sa.current=t,t}),[pe]),Ka=(0,u.useMemo)((function(){var e={x:Rr,y:Or},t={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return _a.current=t,t}),[Rr,Or]),Va=(0,u.useMemo)((function(){var e=Zr*Ga;return{positiveScale:e,negativeScale:1/e,asTransform:["scale(".concat(Ga,")"),"scale(".concat(Zr,")")]}}),[Zr,Ga]);va.current=Va;var qa=(0,u.useMemo)((function(){if(!_r)return null;var e=_r.rnaComplexIndex,t=_r.rnaMoleculeName,n=_r.nucleotideIndex,r=ra.current;if(!r||!(e in r))return null;var o=r[e].rnaMoleculeProps[t];if(!o||!(n in o.nucleotideProps))return null;var a=o.nucleotideProps[n],i=Math.max(1.5*oo,6*M.DEFAULT_STROKE_WIDTH);return(0,ce.jsxs)("g",{children:[(0,ce.jsx)("circle",{cx:a.x,cy:a.y,r:i+1,fill:"rgba(99, 102, 241, 0.12)",stroke:"rgba(99, 102, 241, 0.25)",strokeWidth:1,pointerEvents:"none"}),(0,ce.jsx)("circle",{cx:a.x,cy:a.y,r:i,fill:"rgba(99, 102, 241, 0.15)",stroke:"none",strokeWidth:0,opacity:.8,pointerEvents:"none"})]})}),[_r,oo]),Xa=(0,u.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo.current;if(ea.current===d.OK.EDIT){if(void 0===t||!Q.Uq.isEnum(t))return void fi((0,ce.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{});var n=ra.current,r=aa.current;try{var o=Ra.current,a=new Q.Uq.record[t](n,yt,Ct,Vr,Ye,o,r,e);fi((0,ce.jsx)(te.Component,{rnaComplexProps:n,indicesOfAffectedNucleotides:a.indicesOfAffectedNucleotides,setNucleotideKeysToRerender:yt}),a.indicesOfAffectedNucleotides)}catch(i){if("object"!==typeof i||!("errorMessage"in i))throw i;uo(io.PROPERTIES),fi((0,ce.jsx)("b",{style:{color:"red"},children:i.errorMessage}),{})}}}}),[]),Ya=(0,u.useMemo)((function(){return function(e,t){var n=t.rnaComplexIndex,r=t.rnaMoleculeName,o=t.nucleotideIndex;if(e.ctrlKey&&e.button===M.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),ai();var i=ra.current[n].rnaMoleculeProps[r].nucleotideProps[o],s=!1;return void 0!==i.labelContentProps&&(delete i.labelContentProps,s=!0),void 0!==i.labelLineProps&&(delete i.labelLineProps,s=!0),void(s&&yt((0,l.Z)({},n,(0,l.Z)({},r,[o]))))}switch(e.button){case M.MouseButtonIndices.Left:var c=Fa;if(ea.current===d.OK.EDIT){var u=ra.current[n].rnaMoleculeProps[r].nucleotideProps[o],f=u.labelContentProps;void 0!==f&&(c={initiateDrag:function(){return{x:f.x,y:f.y}},continueDrag:function(e){u.labelContentProps=(0,a.Z)((0,a.Z)({},f),e),f.x=e.x,f.y=e.y,yt((0,l.Z)({},n,(0,l.Z)({},r,[o])))}})}var p=new Set;p.add(o),Xo(c,(0,l.Z)({},n,(0,l.Z)({},r,p)));break;case M.MouseButtonIndices.Right:Xa(t)}}}),[]),Qa=(0,u.useMemo)((function(){return function(e,t,n){var r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=t.nucleotideIndex;if(e.ctrlKey&&e.button===M.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),ai();var i=ra.current[r].rnaMoleculeProps[o].nucleotideProps[a],s=!1;return void 0!==i.labelContentProps&&(delete i.labelContentProps,s=!0),void 0!==i.labelLineProps&&(delete i.labelLineProps,s=!0),void(s&&yt((0,l.Z)({},r,(0,l.Z)({},o,[a]))))}var c=ra.current[r].rnaMoleculeProps[o].nucleotideProps[a].labelLineProps;if(void 0!==c)switch(e.button){case M.MouseButtonIndices.Left:var u=Fa;if(ea.current===d.OK.EDIT){var p=c.points[0],h=c.points.map((function(e){return(0,f.subtract)(e,p)}));u={initiateDrag:function(){return{x:p.x,y:p.y}},continueDrag:function(e){for(var t=0;t<c.points.length;t++){var i=c.points[t],s=(0,f.add)(e,h[t]);i.x=s.x,i.y=s.y}n(),yt((0,l.Z)({},r,(0,l.Z)({},o,[a])))}}}var m=new Set;m.add(a),Xo(u,(0,l.Z)({},r,(0,l.Z)({},o,m)));break;case M.MouseButtonIndices.Right:Xa(t)}}}),[]),$a=(0,u.useMemo)((function(){return function(e,t,n,r){var o=t.rnaComplexIndex,a=t.rnaMoleculeName,i=t.nucleotideIndex;if(e.ctrlKey&&e.button===M.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),ai();var s=ra.current[o].rnaMoleculeProps[a].nucleotideProps[i],c=!1;return void 0!==s.labelContentProps&&(delete s.labelContentProps,c=!0),void 0!==s.labelLineProps&&(delete s.labelLineProps,c=!0),void(c&&yt((0,l.Z)({},o,(0,l.Z)({},a,[i]))))}var u=ra.current[o].rnaMoleculeProps[a].nucleotideProps[i].labelLineProps;if(void 0!==u)switch(e.button){case M.MouseButtonIndices.Left:var f=Fa;if(ea.current===d.OK.EDIT){var p=u.points[n];f={initiateDrag:function(){return{x:p.x,y:p.y}},continueDrag:function(e){p.x=e.x,p.y=e.y,r(),yt((0,l.Z)({},o,(0,l.Z)({},a,[i])))}}}var h=new Set;h.add(i),Xo(f,(0,l.Z)({},o,(0,l.Z)({},a,h)));break;case M.MouseButtonIndices.Right:ea.current===d.OK.EDIT&&Xa(t)}}}),[]),Ja=(0,u.useMemo)((function(){return function(e,t,n){var r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=t.nucleotideIndex,s=ra.current[r].rnaMoleculeProps[o].nucleotideProps[a],c=s.sequenceConnectorToNext;if(c)switch(e.button){case M.MouseButtonIndices.Left:if(e.ctrlKey&&ea.current===d.OK.EDIT){var u;e.preventDefault(),e.stopPropagation(),ai();var p=da.current,h=fa.current,m=Sa.current,v=_a.current,x={x:e.clientX,y:e.clientY};x.x-=Yt,(x=(0,f.scaleDown)(x,p*h)).y-=At,x.y=-x.y,x=(0,f.subtract)(x,(0,f.add)(m.asVector,v.asVector));var g=s,y=ra.current[r].rnaMoleculeProps[o].nucleotideProps[a+1];if(!y)return;for(var b={x:g.x,y:g.y},N={x:y.x,y:y.y},E=null!==(u=c.breakpoints)&&void 0!==u?u:[],C=[b].concat((0,i.Z)(E),[N]),I=1/0,S=0,_=0;_<C.length-1;_++){var A=C[_],T=C[_+1],P=T.x-A.x,R=T.y-A.y,k=P*P+R*R,w=Math.max(0,Math.min(1,((x.x-A.x)*P+(x.y-A.y)*R)/k)),O=A.x+w*P,j=A.y+w*R,L=Math.sqrt(Math.pow(x.x-O,2)+Math.pow(x.y-j,2));L<I&&(I=L,S=_)}c.breakpoints||(c.breakpoints=[]),c.breakpoints.splice(S,0,{x:x.x,y:x.y}),n(),yt((0,l.Z)({},r,(0,l.Z)({},o,[a])))}break;case M.MouseButtonIndices.Right:uo(io.PROPERTIES),fi((0,ce.jsx)(me,{fullKeys:t,connector:c,onUpdate:function(){yt((0,l.Z)({},r,(0,l.Z)({},o,[a])))},onDelete:function(){ai(),c.deleted=!0,yt((0,l.Z)({},r,(0,l.Z)({},o,[a]))),uo(io.NONE)}}),{})}}}),[]),ei=(0,u.useMemo)((function(){return function(e,t,n,r){var o,a,i=t.rnaComplexIndex,s=t.rnaMoleculeName,u=t.nucleotideIndex;if(e.ctrlKey&&e.button===M.MouseButtonIndices.Left){e.preventDefault(),e.stopPropagation(),ai();var f=ra.current[i].rnaMoleculeProps[s].nucleotideProps[u].sequenceConnectorToNext;null!==f&&void 0!==f&&f.breakpoints&&(f.breakpoints.splice(n,1),r(),yt((0,l.Z)({},i,(0,l.Z)({},s,[u]))))}else{var p=ra.current[i].rnaMoleculeProps[s].nucleotideProps[u].sequenceConnectorToNext;if(null!==p&&void 0!==p&&p.breakpoints){var h=null!==(o=null===(a=p.lockedBreakpoints)||void 0===a?void 0:a.includes(n))&&void 0!==o&&o;switch(e.button){case M.MouseButtonIndices.Left:var m=Fa;if(ea.current===d.OK.EDIT&&!h){var v,x=p.breakpoints[n],g=null===(v=p.breakpointGroups)||void 0===v?void 0:v.find((function(e){return e.indices.includes(n)}));if(g&&!g.locked){var y=g.indices.map((function(e){return{idx:e,point:p.breakpoints[e],startX:p.breakpoints[e].x,startY:p.breakpoints[e].y}})),b=x.x,N=x.y;m={initiateDrag:function(){return{x:b,y:N}},continueDrag:function(e){var t,n=e.x-b,o=e.y-N,a=(0,c.Z)(y);try{for(a.s();!(t=a.n()).done;){var d=t.value;d.point.x=d.startX+n,d.point.y=d.startY+o}}catch(f){a.e(f)}finally{a.f()}r(),yt((0,l.Z)({},i,(0,l.Z)({},s,[u])))}}}else m={initiateDrag:function(){return{x:x.x,y:x.y}},continueDrag:function(e){x.x=e.x,x.y=e.y,r(),yt((0,l.Z)({},i,(0,l.Z)({},s,[u])))}}}var E=new Set;E.add(u),Xo(m,(0,l.Z)({},i,(0,l.Z)({},s,E)));break;case M.MouseButtonIndices.Right:uo(io.PROPERTIES),fi((0,ce.jsx)(me,{fullKeys:t,connector:p,onUpdate:function(){yt((0,l.Z)({},i,(0,l.Z)({},s,[u])))},onDelete:function(){ai(),p.deleted=!0,yt((0,l.Z)({},i,(0,l.Z)({},s,[u]))),uo(io.NONE)}}),{})}}}}}),[]),ti=(0,u.useMemo)((function(){return function(e,t,n){var r,o=ra.current[t];if(null!==(r=o.textAnnotations)&&void 0!==r&&r[n]){var a=o.textAnnotations[n];switch(e.button){case M.MouseButtonIndices.Left:if(e.ctrlKey&&ea.current===d.OK.ANNOTATE)return e.preventDefault(),e.stopPropagation(),ai(),delete o.textAnnotations[n],yt({}),void fi((0,ce.jsx)(ce.Fragment,{}),{});ea.current===d.OK.ANNOTATE&&Xo({initiateDrag:function(){return{x:a.x,y:a.y}},continueDrag:function(e){a.x=e.x,a.y=e.y,yt({})}},{});break;case M.MouseButtonIndices.Right:uo(io.PROPERTIES),fi((0,ce.jsx)(ve,{annotation:a,onUpdate:function(){return yt({})},onDelete:function(){ai(),o.textAnnotations&&delete o.textAnnotations[n],yt({}),fi((0,ce.jsx)(ce.Fragment,{}),{})}}),{})}}}}),[]),ni=(0,u.useMemo)((function(){return function(e,t,n){var r=Ra.current,o=aa.current;try{var a=new Q.Uq.record[t](ra.current,yt,Ct,Vr,n,r,o,e);if(n===d.OK.FORMAT)return mo(!0),Oo(void 0),void Zo((function(){return function(e){return a.constrainRelevantHelices(e)}}));var i=a.createRightClickMenu(n);Ln(!jn),fi(i,a.indicesOfAffectedNucleotides)}catch(l){if("object"!==typeof l||!("errorMessage"in l))throw l;return void(n===d.OK.FORMAT?(mo(!0),Oo(l.errorMessage)):(uo(io.PROPERTIES),fi((0,ce.jsx)("b",{style:{color:"red"},children:l.errorMessage}),{})))}}}),[]),ri=(0,u.useCallback)((function(e,t){qi(ra.current)}),[]),oi=(0,u.useCallback)((function(e,t,n,r,o){var a=Ro.current;if(0!==a.length){var i=structuredClone(a),l=i.findIndex((function(a){return a.rnaComplexIndex===e&&a.rnaMoleculeName0===t&&a.rnaMoleculeName1===n&&(r-a.start[0])*(r-a.stop[0])<=0&&(o-a.start[1])*(o-a.stop[1])<=0}));if(-1!==l){var s=i[l];if(1===Math.abs(s.stop[0]-s.start[0])+1)i.splice(l,1);else{var c=Math.sign(s.stop[0]-s.start[0]),u=Math.sign(s.stop[1]-s.start[1]);if(r===s.start[0])s.start[0]+=c,s.start[1]+=u;else if(r===s.stop[0])s.stop[0]-=c,s.stop[1]-=u;else{var d=structuredClone(s),f=structuredClone(s);d.stop={0:r-c,1:o-u},f.start={0:r+c,1:o+u},i.splice(l,1,d,f)}}Po(i),Ro.current=i}}}),[]),ai=(0,u.useMemo)((function(){return function(){var e=ra.current,t=Ro.current,n=wa.current;we([].concat((0,i.Z)(n),[{rnaComplexProps:structuredClone(e),globalHelicesForFormatMenu:structuredClone(t)}])),Le([]),Wo(!0)}}),[]),ii=(0,u.useMemo)((function(){return function(e,t){var n=ya.current;if(e.button===M.MouseButtonIndices.Left&&e.ctrlKey){var r,o;e.preventDefault(),e.stopPropagation(),ai();var a=Da.current;if(!a)return void Ar(t);if(a.rnaComplexIndex!==t.rnaComplexIndex)return void Ar(t);var u=ra.current[t.rnaComplexIndex];if(!u||a.rnaMoleculeName===t.rnaMoleculeName&&a.nucleotideIndex===t.nucleotideIndex)return void Ar(void 0);if(e.shiftKey)try{var f=Ra.current,p=t.rnaComplexIndex,h=a.rnaMoleculeName,m=t.rnaMoleculeName,v=a.nucleotideIndex,x=t.nucleotideIndex,g=u,y=g.rnaMoleculeProps[h],b=g.rnaMoleculeProps[m];if(y&&b){var N,E,C,I,S,_,A,P=null!==(N=null===(E=f[p])||void 0===E||null===(C=E[h])||void 0===C?void 0:C.has(v))&&void 0!==N&&N,k=null!==(I=null===(S=f[p])||void 0===S||null===(_=S[m])||void 0===_?void 0:_.has(x))&&void 0!==I&&I;P||k||(xe(g,h,m,v,x,1,void 0,ya.current),yt((0,l.Z)({},p,(A={},(0,l.Z)(A,h,[v]),(0,l.Z)(A,m,[x]),A))))}}catch(ht){}var w=[],O=u.basePairs[a.rnaMoleculeName];if(O){var j=O[a.nucleotideIndex];if(j){var L,D=(0,c.Z)(j);try{for(D.s();!(L=D.n()).done;){var Z=L.value,F=[{rnaMoleculeName:a.rnaMoleculeName,nucleotideIndex:a.nucleotideIndex},{rnaMoleculeName:Z.rnaMoleculeName,nucleotideIndex:Z.nucleotideIndex}].sort(T.compareBasePairKeys),B=(0,s.Z)(F,2),U=B[0],z=B[1];w.push({keys0:U,keys1:z})}}catch(mt){D.e(mt)}finally{D.f()}}}var W=u.basePairs[t.rnaMoleculeName];if(W){var G=W[t.nucleotideIndex];if(G){var H,K=(0,c.Z)(G);try{for(K.s();!(H=K.n()).done;){var V=H.value,X=[{rnaMoleculeName:t.rnaMoleculeName,nucleotideIndex:t.nucleotideIndex},{rnaMoleculeName:V.rnaMoleculeName,nucleotideIndex:V.nucleotideIndex}].sort(T.compareBasePairKeys),Y=(0,s.Z)(X,2),$=Y[0],J=Y[1];w.push({keys0:$,keys1:J})}}catch(mt){K.e(mt)}finally{K.f()}}}for(var ee=[],te=new Set,ne=0,re=w;ne<re.length;ne++){var oe=re[ne],ae="".concat(oe.keys0.rnaMoleculeName,":").concat(oe.keys0.nucleotideIndex,"-").concat(oe.keys1.rnaMoleculeName,":").concat(oe.keys1.nucleotideIndex);te.has(ae)||(te.add(ae),ee.push(oe))}for(var ie=function(){var e=se[le],t=e.keys0,n=e.keys1,r=u.basePairs[t.rnaMoleculeName];if(r&&r[t.nucleotideIndex]){var o=r[t.nucleotideIndex],a=o.findIndex((function(e){return e.rnaMoleculeName===n.rnaMoleculeName&&e.nucleotideIndex===n.nucleotideIndex}));-1!==a&&(1===o.length?delete r[t.nucleotideIndex]:o.splice(a,1))}var i=u.basePairs[n.rnaMoleculeName];if(i&&i[n.nucleotideIndex]){var l=i[n.nucleotideIndex],s=l.findIndex((function(e){return e.rnaMoleculeName===t.rnaMoleculeName&&e.nucleotideIndex===t.nucleotideIndex}));-1!==s&&(1===l.length?delete i[n.nucleotideIndex]:l.splice(s,1))}},le=0,se=ee;le<se.length;le++)ie();for(var ue=0,de=ee;ue<de.length;ue++){var fe=de[ue],pe=fe.keys0,he=fe.keys1;oi(t.rnaComplexIndex,pe.rnaMoleculeName,he.rnaMoleculeName,pe.nucleotideIndex,he.nucleotideIndex)}(0,T.insertBasePair)(u,a.rnaMoleculeName,a.nucleotideIndex,t.rnaMoleculeName,t.nucleotideIndex,T.DuplicateBasePairKeysHandler.DO_NOTHING,{});var me=null===(r=u.basePairs[a.rnaMoleculeName])||void 0===r||null===(o=r[a.nucleotideIndex])||void 0===o?void 0:o.find((function(e){return e.rnaMoleculeName===t.rnaMoleculeName&&e.nucleotideIndex===t.nucleotideIndex})),ve=null===me||void 0===me?void 0:me.basePairType;void 0!==ve&&!R.default.isCanonicalType(ve)&&n[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||ri(a,t);var ge=[{rnaMoleculeName:a.rnaMoleculeName,nucleotideIndex:a.nucleotideIndex},{rnaMoleculeName:t.rnaMoleculeName,nucleotideIndex:t.nucleotideIndex}].sort(T.compareBasePairKeys),ye=(0,s.Z)(ge,2),be=ye[0],Ee=ye[1];Ne((0,l.Z)({},t.rnaComplexIndex,{add:[{keys0:be,keys1:Ee}],delete:ee}));for(var Ce=[{rnaMoleculeName:a.rnaMoleculeName,nucleotideIndex:a.nucleotideIndex},{rnaMoleculeName:t.rnaMoleculeName,nucleotideIndex:t.nucleotideIndex}],Ie=0,Se=ee;Ie<Se.length;Ie++){var _e=Se[Ie],Ae=_e.keys0,Pe=_e.keys1;Ce.push(Ae,Pe)}return Ct((0,l.Z)({},t.rnaComplexIndex,Ce)),void Ar(void 0)}var Re=Jo.current;if(void 0!==Re&&Q.Uq.isEnum(Re)){var ke=Ra.current,Me=ea.current,Oe=aa.current,je={};switch(e.button){case M.MouseButtonIndices.Left:var De=Fa;if(Me===d.OK.EDIT)try{var Ze=new Q.Uq.record[Re](ra.current,yt,Ct,Vr,Me,ke,Oe,t),Fe=Ze.drag();je=Ze.indicesOfAffectedNucleotides,void 0!=Fe&&(De=Fe)}catch(vt){if("object"!==typeof vt||!("errorMessage"in vt))throw vt;return uo(io.PROPERTIES),void fi((0,ce.jsx)("b",{style:{color:"red"},children:vt.errorMessage}),{})}Xo(De,je);break;case M.MouseButtonIndices.Middle:try{var Be=aa.current,Ue=new Q.Uq.record[Re](ra.current,yt,Ct,Vr,Me,ke,Be,t).indicesOfAffectedNucleotides,ze=ka.current,We=structuredClone(ke),Ge=!0,He=t.rnaComplexIndex,Ke=t.rnaMoleculeName,Ve=t.nucleotideIndex;if(He in ke){var qe=ke[He];Ke in qe&&qe[Ke].has(Ve)&&(Ge=!1)}for(var Xe=!1,Ye=0,Qe=Object.entries(Ue);Ye<Qe.length;Ye++)for(var $e=(0,s.Z)(Qe[Ye],2),Je=$e[0],et=$e[1],tt=Number.parseInt(Je),nt=0,rt=Object.entries(et);nt<rt.length;nt++)for(var ot=(0,s.Z)(rt[nt],2),at=ot[0],it=ot[1],lt=0,st=Array.from(it);lt<st.length;lt++){var ct=st[lt];tt in We||(We[tt]={});var ut=We[tt];at in ut||(ut[at]=new Set);var dt=ut[at];if(Ge?dt.add(ct):dt.has(ct)&&dt.delete(ct),tt in ze){var ft=ze[tt];at in ft&&ft[at].has(ct)&&(Xe=!0)}}Te(We);var pt=wa.current;we([].concat((0,i.Z)(pt),[structuredClone(ke)])),Le([]),Xe&&fi((0,ce.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to a newly frozen nucleotide"}),{})}catch(vt){if("object"!==typeof vt||!("errorMessage"in vt))throw vt;uo(io.PROPERTIES),fi((0,ce.jsx)("b",{style:{color:"red"},children:vt.errorMessage}),{})}break;case M.MouseButtonIndices.Right:Q.Uq.isSupportedTab(Me)&&ni(t,Re,Me)}}else fi((0,ce.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{})}}),[ri,ai]),li=(0,u.useMemo)((function(){return function(e,t,n){var r,o,a=ra.current[t.rnaComplexIndex];if(a){var i=a.basePairs[t.rnaMoleculeName];if(a.basePairs[n.rnaMoleculeName],null!==(r=null===i||void 0===i||null===(o=i[t.nucleotideIndex])||void 0===o?void 0:o.some((function(e){return e.rnaMoleculeName===n.rnaMoleculeName&&e.nucleotideIndex===n.nucleotideIndex})))&&void 0!==r&&r)if(e.ctrlKey&&e.button===M.MouseButtonIndices.Left){Jo.current;var c=ra.current,u=(ea.current,ya.current),f=t.rnaComplexIndex,p=t.rnaMoleculeName,h=t.nucleotideIndex,m=n.rnaMoleculeName,v=n.nucleotideIndex;ai();var x=c[f];if(x){var g,y=x.basePairs[p];if(y&&h in y){var b,N=y[h],E=N.findIndex((function(e){return e.rnaMoleculeName===m&&e.nucleotideIndex===v}));-1!==E&&(g=null===(b=N[E])||void 0===b?void 0:b.basePairType,1===N.length?delete y[h]:N.splice(E,1))}var C=x.basePairs[m];if(C&&v in C){var I=C[v],S=I.findIndex((function(e){return e.rnaMoleculeName===p&&e.nucleotideIndex===h}));-1!==S&&(1===I.length?delete C[v]:I.splice(S,1))}var _=[{rnaMoleculeName:p,nucleotideIndex:h},{rnaMoleculeName:m,nucleotideIndex:v}].sort(T.compareBasePairKeys),A=(0,s.Z)(_,2),P=A[0],k=A[1];Ne((0,l.Z)({},f,{add:[],delete:[{keys0:P,keys1:k}]})),void 0!==g&&!R.default.isCanonicalType(g)&&u[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||oi(f,p,m,h,v)}}else{var w=Jo.current,O=ra.current,j=Ra.current,L=aa.current,D=ea.current,Z=ya.current;switch(e.button){case M.MouseButtonIndices.Left:if(e.shiftKey)try{var F=new Q.Uq.record[Q.Uq.Enum.RNA_HELIX](O,yt,Ct,Vr,D,j,L,t,n).getHelices();Ui(F)}catch(se){console.warn("Cannot create helix constraint for this base pair:",(null===se||void 0===se?void 0:se.errorMessage)||se)}else Xo(Fa,{});break;case M.MouseButtonIndices.Middle:var B=t.rnaComplexIndex,U=t.rnaMoleculeName,z=t.nucleotideIndex,W=n.rnaMoleculeName,G=n.nucleotideIndex;ai();var H,K=O[B];if(!K)break;var V=K.basePairs[U];if(V&&z in V){var X=V[z],Y=X.findIndex((function(e){return e.rnaMoleculeName===W&&e.nucleotideIndex===G}));-1!==Y&&X[Y]&&(H=X[Y].basePairType,1===X.length?delete V[z]:X.splice(Y,1))}var $=K.basePairs[W];if($&&G in $){var J=$[G],ee=J.findIndex((function(e){return e.rnaMoleculeName===U&&e.nucleotideIndex===z}));-1!==ee&&(1===J.length?delete $[G]:J.splice(ee,1))}var te=[{rnaMoleculeName:U,nucleotideIndex:z},{rnaMoleculeName:W,nucleotideIndex:G}].sort(T.compareBasePairKeys),ne=(0,s.Z)(te,2),re=ne[0],oe=ne[1];Ne((0,l.Z)({},B,{add:[],delete:[{keys0:re,keys1:oe}]})),void 0!==H&&!R.default.isCanonicalType(H)&&Z[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||oi(B,U,W,z,G);break;case M.MouseButtonIndices.Right:if(Q.Uq.isSupportedTab(D))try{var ae=Ra.current,ie=new Q.Uq.record[w](O,yt,Ct,Vr,D,ae,L,t,n);if(D===d.OK.FORMAT)return mo(!0),Oo(void 0),void Zo((function(){return function(e){return ie.constrainRelevantHelices(e)}}));Ln(!jn);var le=ie.createRightClickMenu(D);fi(le,ie.indicesOfAffectedNucleotides)}catch(se){if("object"!==typeof se||!("errorMessage"in se))throw se;D===d.OK.FORMAT?(mo(!0),Oo(se.errorMessage)):(uo(io.PROPERTIES),fi((0,ce.jsx)("b",{style:{color:"red"},children:se.errorMessage}),{}))}}}}}}),[]),si=(0,u.useMemo)((function(){return function(e,t,n){for(var r=ra.current[e],o=r.basePairs,a=0,i=Object.keys(r.rnaMoleculeProps);a<i.length;a++){var s=i[a];if(s in o)for(var u=o[s],d=0,f=Object.values(u);d<f.length;d++){var p,h=f[d],m=(0,c.Z)(h);try{for(m.s();!(p=m.n()).done;){var v=p.value;v.rnaMoleculeName===t&&(v.rnaMoleculeName=n)}}catch(g){m.e(g)}finally{m.f()}}}r.rnaMoleculeProps[n]=r.rnaMoleculeProps[t],delete r.rnaMoleculeProps[t];var x=o[t];delete o[t],o[n]=x,yt((0,l.Z)({},e,{}))}}),[]),ci=(0,u.useMemo)((function(){return function(e,t){var n=ia.current;sr((0,a.Z)((0,a.Z)({},n),{},(0,l.Z)({},e,t)))}}),[]),ui=(0,u.useMemo)((function(){return function(e,t,n){var r=la.current,o=structuredClone(r);e in o||(o[e]={});var i=o[e];i[t]=(0,a.Z)((0,a.Z)({},i[t]),n),fr(o)}}),[]),di=(0,u.useMemo)((function(){return function(e){fi((0,ce.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to updated interaction-constraint options."}),{}),tr((0,a.Z)((0,a.Z)({},aa.current),e))}}),[]),fi=(0,u.useCallback)((function(e,t){var n=ra.current;if(ft((0,ce.jsx)("div",{style:{width:"100%",display:"block",boxSizing:"border-box"},children:e})),vr(t),Object.keys(t).length>0){try{var r=parseInt(Object.keys(t)[0]),o=Object.keys(t[r])[0],a=Array.from(t[r][o]);if(a.length>0){var i={rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a[0]},l="nucleotide",s=e.toString();(s.includes("basepair")||s.includes("BasePair"))&&(l="basepair");var c=vt(i,n,l);No(c)}}catch(u){console.warn("Error extracting element info:",u),No(void 0)}$e.current!==d.OK.FORMAT&&(go("Properties"),uo(io.PROPERTIES))}else No(void 0)}),[]),pi=(0,u.useMemo)((function(){var e,t=Oa.current;return(0,ce.jsx)(X._.App.RnaComplexProps.Provider,{value:j,children:(0,ce.jsx)(X._.Nucleotide.LabelsOnlyFlag.Provider,{value:Ie&&Ye==d.OK.EDIT,children:(0,ce.jsx)(X._.App.SetMouseOverText.Provider,{value:jt,children:(0,ce.jsx)(X._.Nucleotide.OnMouseDownHelper.Provider,{value:ii,children:(0,ce.jsx)(X._.Label.Content.OnMouseDownHelper.Provider,{value:Ya,children:(0,ce.jsx)(X._.Label.Line.Body.OnMouseDownHelper.Provider,{value:Qa,children:(0,ce.jsx)(X._.Label.Line.Endpoint.OnMouseDownHelper.Provider,{value:$a,children:(0,ce.jsx)(X._.SequenceConnector.Body.OnMouseDownHelper.Provider,{value:Ja,children:(0,ce.jsx)(X._.SequenceConnector.Breakpoint.OnMouseDownHelper.Provider,{value:ei,children:(0,ce.jsx)(X._.TextAnnotation.OnMouseDownHelper.Provider,{value:ti,children:(0,ce.jsx)("g",(0,a.Z)((0,a.Z)({id:pn},(e={},(0,l.Z)(e,D.SVG_PROPERTY_XRNA_TYPE,D.SvgPropertyXrnaType.SCENE),(0,l.Z)(e,D.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME,C),(0,l.Z)(e,D.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG,!0),(0,l.Z)(e,D.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG,!1),e)),{},{ref:function(e){null!==e&&(oa.current=e)},children:Ba.map((function(e){var n,r,o,i=(0,s.Z)(e,2),l=i[0],c=i[1],u=Number.parseInt(l);return(0,ce.jsx)(X._.RnaComplex.Index.Provider,{value:u,children:(0,ce.jsx)(X._.BasePair.DataToEditPerRnaComplex.Provider,{value:t[u],children:(0,ce.jsx)(T.RnaComplex.Component,(0,a.Z)((0,a.Z)({},c),{},{nucleotideKeysToRerenderPerRnaComplex:null!==(n=gt[u])&&void 0!==n?n:{},basePairKeysToRerenderPerRnaComplex:null!==(r=Et[u])&&void 0!==r?r:[],basePairUpdateTrigger:null!==(o=Io[u])&&void 0!==o?o:0}),u)})},u)}))}))})})})})})})})})})})}),[j,gt,Et,Ie&&Ye==d.OK.EDIT,be,Io]),hi=(0,u.useMemo)((function(){for(var e=0,t=Object.entries(yr);e<t.length;e++){var n=(0,s.Z)(t[e],2),r=n[0],o=n[1],a=Number.parseInt(r);if(a in mr)for(var i=mr[a],l=0,u=Object.entries(o);l<u.length;l++){var d=(0,s.Z)(u[l],2),f=d[0],p=d[1];if(f in i){var h,m=i[f],v=(0,c.Z)(p.values());try{for(v.s();!(h=v.n()).done;){var x=h.value;if(m.has(x))return!0}}catch(g){v.e(g)}finally{v.f()}}}}return!1}),[mr,yr]);ha.current=hi;var mi=(0,u.useMemo)((function(){return it[q.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS]}),[it]);pa.current=mi;var vi=(0,u.useMemo)((function(){return function(){he(oa.current.getBBox()),kr(0),jr(0),Wr(0),Fr(1)}}),[]),xi=(0,u.useMemo)((function(){return function(e,t,n){var r=ya.current;try{for(var o=(g?V.r2dtLegacyInputFileReadersRecord:V.inputFileReadersRecord)[t](e),i=new Set,u=0,d=Object.values(o.rnaComplexProps);u<d.length;u++){var f=d[u],p=f.name,h=f.basePairs;if(i.has(p))throw"RNA complexes must have distinct names.";i.add(p);for(var m=0,v=Object.entries(f.rnaMoleculeProps);m<v.length;m++){var x=(0,s.Z)(v[m],2),y=x[0],b=x[1];y in h||(h[y]={});for(var N=0,E=Object.values(b.nucleotideProps);N<E.length;N++){var C=E[N];if(void 0===C.color&&(C.color=structuredClone(k.BLACK)),void 0!==C.labelContentProps){var S=C.labelContentProps;void 0===S.color&&(S.color=structuredClone(k.BLACK))}if(void 0!==C.labelLineProps){var _=C.labelLineProps;void 0===_.color&&(_.color=structuredClone(k.BLACK))}}}}if(void 0===n&&(n=V.defaultInvertYAxisFlagRecord[t]),n){var A,T=(0,c.Z)(o.rnaComplexProps);try{for(T.s();!(A=T.n()).done;){var P=A.value;Object.values(P.rnaMoleculeProps).forEach((function(e){Object.values(e.nucleotideProps).forEach((function(e){if(e.y*=-1,void 0!==e.labelLineProps)for(var t=0;t<e.labelLineProps.points.length;t++)e.labelLineProps.points[t].y*=-1;void 0!==e.labelContentProps&&(e.labelContentProps.y*=-1)}))}))}}catch(M){T.e(M)}finally{T.f()}}we([]),Le([]),Ne({});var R=$(o.rnaComplexProps);lt((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,R.canonicalDistance),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,R.wobbleDistance),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,R.mismatchDistance),(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,R.contiguousDistance),t))})),uo(io.NONE),mo(!1),Ne({}),L(o.rnaComplexProps),qi(o.rnaComplexProps),Object.keys(o.rnaComplexProps).length>0?setTimeout((function(){r[q.pE.RESET_VIEWPORT_AFTER_FILE_UPLOAD]&&vi();for(var e=0,t=0,n=0,o=Array.from(document.querySelectorAll(".".concat(mn)));n<o.length;n++)e+=o[n].getBBox().height,t++;var i=0==t?1:e/t,s=.3*i;to(i),ao(s),lt((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,l.Z)({},q.pE.BASE_PAIR_RADIUS,s))})),setTimeout((function(){vi(),kt(bn.DATA_IS_LOADED)}),0)}),2e3):kt(bn.NO_DATA),I(o.complexDocumentName)}catch(O){if(uo(io.PROPERTIES),kt(bn.DATA_LOADING_FAILED),"string"===typeof O)Vn(O),Qn(O);else if(O&&"string"===typeof O.message){var w;Vn(O.message),Qn(null!==(w=O.stack)&&void 0!==w?w:String(O))}else Vn("Failed to load data. The file may be in an unsupported format or contain invalid data."),Qn(String(null!==O&&void 0!==O?O:""))}}}),[g]),gi=(0,u.useMemo)((function(){return function(e){fetch(e,{method:"GET"}).then((function(e){e.text().then((function(e){xi(e,V.InputFileExtension.json)}))}))}}),[]),yi=(0,u.useMemo)((function(){return function(e,t,n,r){var o=Ra.current,a=ra.current,l=(ka.current,Ro.current);if(e.length>0){var s=(0,i.Z)(e),c=s.pop();if(n(s),r([].concat((0,i.Z)(t),"rnaComplexProps"in c?[{rnaComplexProps:structuredClone(a),globalHelicesForFormatMenu:structuredClone(l)}]:[structuredClone(o)])),"rnaComplexProps"in c){var u=c.rnaComplexProps,d=c.globalHelicesForFormatMenu;Ne({}),L(u),Po(d)}else Te(c)}}}),[]),bi=(0,u.useMemo)((function(){return function(){yi(wa.current,Ma.current,we,Le)}}),[]),Ni=(0,u.useMemo)((function(){return function(){yi(Ma.current,wa.current,Le,we)}}),[]),Ei=(0,u.useMemo)((function(){return wa.current.length>0}),[wa.current]),Ci=(0,u.useMemo)((function(){return Ma.current.length>0}),[Ma.current]),Ii=(0,u.useMemo)((function(){return function(e){var t=e.currentTarget.getBoundingClientRect();if(Vt({x:e.clientX-t.left,y:e.clientY-t.top}),0!==Ia.current){var n={x:e.clientX,y:e.clientY},r=sa.current;if(null!==r){var o=ca.current,a=ua.current,i=fa.current,l=da.current,s=pa.current,c=ha.current,u=ga.current,d=(0,f.subtract)(n,o);d.y=-d.y,r.continueDrag((0,f.add)(a,(0,f.scaleDown)(d,i*l)),s),c&&Ln(!u)}var p=Aa.current,h=ea.current;if(void 0!==p&&Q.Uq.isSupportedTab(h)){var m=ji(n),v=[p.x,m.x].sort(Y.subtractNumbers),x=[p.y,m.y].sort(Y.subtractNumbers),g=v[0],y=x[0];Vr([(0,ce.jsx)("rect",{x:g,y:y,width:v[1]-g,height:x[1]-y,fill:"none",stroke:Nn[h],strokeWidth:M.DEFAULT_STROKE_WIDTH},0)])}e.preventDefault()}}}),[]),Si=(0,u.useMemo)((function(){return function(e){var t={x:e.clientX,y:e.clientY};switch(e.button){case M.MouseButtonIndices.Left:ln(t);break;case M.MouseButtonIndices.Right:var n=ji(t);In(n)}}}),[]),_i=(0,u.useMemo)((function(){return function(e){var t=ya.current,n=t[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED],r=sa.current;if(null!==r&&(void 0!==r.terminateDrag&&r.terminateDrag(),Xo(null,{}),t[q.pE.SEQUENCE_CONNECTOR_AUTO_TRIGGER])){for(var o=t[q.pE.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD],a=ra.current,i={},l=!1,u=0,d=Object.entries(a);u<d.length;u++)for(var p=(0,s.Z)(d[u],2),h=p[0],m=p[1],v=Number.parseInt(h),x=0,g=Object.entries(m.rnaMoleculeProps);x<g.length;x++){for(var y=(0,s.Z)(g[x],2),b=y[0],N=y[1],E=Object.keys(N.nucleotideProps).map(Number).sort((function(e,t){return e-t})),C=0,I=0,S=0;S<E.length-1;S++){var _=E[S],A=E[S+1];if(A===_+1){var T=N.nucleotideProps[_],P=N.nucleotideProps[A],R=P.x-T.x,k=P.y-T.y;C+=Math.sqrt(R*R+k*k),I++}}if(0!==I)for(var w=C/I*o,M=0;M<E.length-1;M++){var O=E[M],j=E[M+1];if(j===O+1){var L=N.nucleotideProps[O],D=N.nucleotideProps[j],Z=D.x-L.x,F=D.y-L.y;Math.sqrt(Z*Z+F*F)>w?L.sequenceConnectorToNext||(L.sequenceConnectorToNext={breakpoints:[]},i[v]||(i[v]={}),i[v][b]||(i[v][b]=[]),i[v][b].push(O),l=!0):L.sequenceConnectorToNext&&!L.sequenceConnectorToNext.deleted&&(delete L.sequenceConnectorToNext,i[v]||(i[v]={}),i[v][b]||(i[v][b]=[]),i[v][b].push(O),l=!0)}}}if(t[q.pE.SEQUENCE_CONNECTOR_INTER_MOLECULE])for(var B=0,U=Object.entries(a);B<U.length;B++){for(var z=(0,s.Z)(U[B],2),W=z[0],G=z[1],H=Number.parseInt(W),K=Object.keys(G.rnaMoleculeProps),V=0,X=0,$=0,J=K;$<J.length;$++)for(var ee=J[$],te=G.rnaMoleculeProps[ee],ne=Object.keys(te.nucleotideProps).map(Number).sort((function(e,t){return e-t})),re=0;re<ne.length-1;re++){var oe=ne[re],ae=ne[re+1];if(ae===oe+1){var ie=te.nucleotideProps[oe],le=te.nucleotideProps[ae],se=le.x-ie.x,ce=le.y-ie.y;V+=Math.sqrt(se*se+ce*ce),X++}}if(0!==X)for(var ue=V/X*o,de=0;de<K.length-1;de++){var fe=K[de],pe=K[de+1],he=G.rnaMoleculeProps[fe],me=G.rnaMoleculeProps[pe],ve=Object.keys(he.nucleotideProps).map(Number).sort((function(e,t){return e-t})),xe=Object.keys(me.nucleotideProps).map(Number).sort((function(e,t){return e-t}));if(0!==ve.length&&0!==xe.length){var ge,ye=ve[ve.length-1],be=xe[0],Ne=he.nucleotideProps[ye],Ee=me.nucleotideProps[be],Ce=Ee.x-Ne.x,Ie=Ee.y-Ne.y;Math.sqrt(Ce*Ce+Ie*Ie)>ue?Ne.sequenceConnectorToNext||(Ne.sequenceConnectorToNext={breakpoints:[],targetMoleculeName:pe,targetNucleotideIndex:be},i[H]||(i[H]={}),i[H][fe]||(i[H][fe]=[]),i[H][fe].push(ye),l=!0):null!==(ge=Ne.sequenceConnectorToNext)&&void 0!==ge&&ge.targetMoleculeName&&!Ne.sequenceConnectorToNext.deleted&&(delete Ne.sequenceConnectorToNext,i[H]||(i[H]={}),i[H][fe]||(i[H][fe]=[]),i[H][fe].push(ye),l=!0)}}}l&&yt(i)}var Se=Aa.current,_e=ea.current;if(void 0!==Se&&Q.Uq.isSupportedTab(_e)){Vr([]);var Ae={x:e.clientX,y:e.clientY},Te=ji(Ae),Pe=[Se.x,Te.x].sort(Y.subtractNumbers),Re=[Se.y,Te.y].sort(Y.subtractNumbers),ke=Pe[0],we=Re[0],Me=Pe[1],Oe=Re[1];if(Me-ke>.5||Oe-we>.5){for(var je=function(e,t){var n=e.rnaMoleculeName,r=e.nucleotideIndex,o=t.x,a=t.y;if(o<ke||o>Me||a<we||a>Oe)return!1;n in De||(De[n]=new Set);var i=De[n];return!i.has(r)&&(i.add(r),!0)},Le=new Array,De={},Ze=new Array,Fe=ra.current,Be=0,Ue=Object.entries(Fe);Be<Ue.length;Be++)for(var ze=(0,s.Z)(Ue[Be],2),We=ze[0],Ge=ze[1].rnaMoleculeProps,He=Number.parseInt(We),Ke=0,Ve=Object.entries(Ge);Ke<Ve.length;Ke++)for(var qe=(0,s.Z)(Ve[Ke],2),Xe=qe[0],Ye=qe[1].nucleotideProps,Qe=0,$e=Object.entries(Ye);Qe<$e.length;Qe++){var Je=(0,s.Z)($e[Qe],2),et=Je[0],tt=Je[1],nt=tt.labelContentProps,ot=tt.labelLineProps,at={rnaComplexIndex:He,rnaMoleculeName:Xe,nucleotideIndex:Number.parseInt(et)};if(je(at,tt)&&Le.push(at),void 0!==nt&&je(at,(0,f.add)(tt,nt))&&Ze.push(at),void 0!==ot){var it,lt=(0,c.Z)(ot.points);try{for(lt.s();!(it=lt.n()).done;){var st=it.value;je(at,(0,f.add)(tt,st))&&Ze.push(at)}}catch(vt){lt.e(vt)}finally{lt.f()}}}var ct=(0,Q.P7)(Le,Fe,n);if(Cr("Auto-detected"),void 0!==ct){var ut=ct,dt=ut.fullKeys,ft=ut.interactionConstraint;rt(ft),ni(dt,ft,_e)}else if(void 0!==(ct=(0,Q.P7)(Ze,Fe,n))){var pt=ct,ht=pt.fullKeys,mt=pt.interactionConstraint;rt(mt),Xa(ht,mt)}}}In(void 0)}}),[]),Ai=(0,u.useMemo)((function(){return function(){Xo(null,{}),Vr([]),In(void 0),jt("")}}),[]),Ti=(0,u.useMemo)((function(){return function(e){if(0!==Ia.current){var t=ma.current,n=va.current,r=xa.current,o=ta.current,a=na.current,i=da.current,l=t-(0,Y.sign)(e.deltaY),s=l in Kt?Kt[l]:Math.pow(M.SCALE_BASE,l);Fr(s),Wr(l);var c=e.clientX-Yt-2,u=e.clientY-At,d=n.negativeScale,f=c*d+r.x-o,p=u*d-r.y+a-r.height,h=c*(d=1/(s*i))-f+r.x,m=-(u*d-p-r.y-r.height);kr(h),jr(m)}}}),[]),Pi=(0,u.useMemo)((function(){return function(){if(0!==Ia.current){var e=ma.current+1,t=e in Kt?Kt[e]:Math.pow(M.SCALE_BASE,e);e<=50&&(Fr(t),Wr(e))}}}),[]),Ri=(0,u.useMemo)((function(){return function(){if(0!==Ia.current){var e=ma.current-1,t=e in Kt?Kt[e]:Math.pow(M.SCALE_BASE,e);e>=-50&&(Fr(t),Wr(e))}}}),[]),ki=(0,u.useMemo)((function(){return function(e){switch(e.key.toLowerCase()){case"0":e.ctrlKey&&(e.preventDefault(),vi());break;case"o":e.ctrlKey&&(e.preventDefault(),Ca.current.click());break;case"s":e.ctrlKey&&(e.preventDefault(),""==Fn?Yo.current.click():Vn(Fn));break;case"y":Ni();break;case"z":e.shiftKey?Ni():bi();break;case"escape":mo(!1),uo(io.NONE);break;case"x":qo(!0);break;case"t":if(e.altKey){var t,n;e.preventDefault(),Qe(d.OK.ANNOTATE);var r=ra.current,o=Object.keys(r).map(Number);if(0===o.length)return;var a=r[o[0]];a.textAnnotations||(a.textAnnotations={});var i=da.current,l=fa.current,s=Sa.current,c=_a.current,u={x:((null!==(t=$o.width)&&void 0!==t?t:0)-Yt)/2,y:((null!==(n=$o.height)&&void 0!==n?n:0)-At)/2};(u=(0,f.scaleDown)(u,i*l)).y=-u.y,u=(0,f.subtract)(u,(0,f.add)(s.asVector,c.asVector));var p="text-".concat(Date.now()),h={id:p,content:"New Text",x:u.x,y:u.y};ai(),a.textAnnotations[p]=h,yt({}),uo(io.PROPERTIES),fi((0,ce.jsx)(ve,{annotation:h,onUpdate:function(){return yt({})},onDelete:function(){ai(),a.textAnnotations&&delete a.textAnnotations[p],yt({}),fi((0,ce.jsx)(ce.Fragment,{}),{})}}),{})}}}}),[Ca.current,Yo.current,Fn,$o.width,$o.height]),wi=(0,u.useCallback)((function(e){"x"===e.key.toLowerCase()&&qo(!1)}),[]),Mi=(0,u.useMemo)((function(){return Ye===d.OK.EDIT?xn:gn}),[Ye]),Oi=(0,u.useMemo)((function(){return Ye in Nn?vn:gn}),[Ye]),ji=(0,u.useCallback)((function(e){var t=da.current,n=fa.current,r=Sa.current,o=_a.current,a=structuredClone(e);return a.x-=Yt,(a=(0,f.scaleDown)(a,t*n)).y-=At,a.y=-a.y,a=(0,f.subtract)(a,(0,f.add)(r.asVector,o.asVector))}),[]),Li=(0,u.useMemo)((function(){return function(){var e=Ta.current,t=ea.current,n="";if(0===e.length){var r="You must load a non-empty input file before attempting to ";switch(t){case d.OK.EDIT:n=r+"edit.";break;case d.OK.FORMAT:n=r+"format.";break;case d.OK.ANNOTATE:n=r+"annotate."}}else{var o="Right-click on a constraint to begin ";switch(t){case d.OK.EDIT:n=o+"editing.";break;case d.OK.FORMAT:n=o+"formating.";break;case d.OK.ANNOTATE:n=o+"annotating."}}fi((0,ce.jsx)("b",{style:{color:"red",width:"100%"},children:n}),{})}}),[]),Di=(0,u.useMemo)((function(){return it[q.pE.DARK_MODE]?"#514646":"#F0F0F0"}),[it]),Zi=(0,u.useMemo)((function(){if("showSaveFilePicker"in window&&"function"===typeof window.showSaveFilePicker){var e=window.showSaveFilePicker;return(0,o.Z)((0,r.Z)().mark((function e(){var n,o,a,i,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=La.current,o=n,void 0!==n){e.next=7;break}return e.next=5,t();case 5:o=e.sent,Qr(o);case 7:return a=Na.current,i=ra.current,l=ja.current,e.next=12,o.createWritable();case 12:return s=e.sent,e.next=15,s.write(Za[a](i,l));case 15:return e.next=17,s.close();case 17:Wo(!1);case 18:case"end":return e.stop()}}),e)})))}function t(){return n.apply(this,arguments)}function n(){return n=(0,o.Z)((0,r.Z)().mark((function t(){var n,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ba.current,o=Na.current,t.next=4,e({suggestedName:"".concat(n,".").concat(o),types:[{description:"",accept:{"text/plain":[".".concat(o)]}}]});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}}),[]),Fi=(0,u.useCallback)((function(){var e=ba.current,t=Na.current,n=ra.current,r=ja.current,o=new Blob([Za[t](n,r)],{type:"text/plain"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="".concat(e,".").concat(t),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),Wo(!1)}),[]),Bi=(0,u.useMemo)((function(){var e,t=ya.current,n=ia.current;switch(co){case io.NONE:e=(0,ce.jsx)(ce.Fragment,{});break;case io.PROPERTIES:e=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsx)("div",{style:{padding:"12px 10px",background:"var(--color-surface)",borderBottom:"1px solid var(--color-border)",fontSize:11,fontWeight:700,textTransform:"uppercase",color:"var(--color-text)"},children:"Selected Element"}),(0,ce.jsx)("div",{style:{flex:1,overflow:"auto",padding:12},children:ut})]});break;case io.SETTINGS:e=(0,ce.jsx)(He,{open:!0,onClose:function(){return uo(io.NONE)},settings:t,setSettings:lt,getDistanceDefaults:function(){var e=Ta.current;if(e&&e.length>0){var t,r=Number.parseInt(e[0][0]),o=n[r],a=o.helixDistance,i=o.distances;if(null!=a&&i)return t={},(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,a),(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,i[R.default.Type.CANONICAL]),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,i[R.default.Type.MISMATCH]),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,i[R.default.Type.WOBBLE]),t}return{}}});break;case io.ABOUT:e=(0,ce.jsx)(qe,{open:!0,onClose:function(){return uo(io.NONE)},renderTabInstructions:function(e){switch(e){case d.OK.INPUT_OUTPUT:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Upload and download RNA structure files in various formats including JSON, SVG, and more."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Upload files to import RNA structures"}),(0,ce.jsx)("li",{children:"Download files to save your work"}),(0,ce.jsx)("li",{children:"Support for multiple file formats"})]})]});case d.OK.VIEWPORT:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Control the viewport and navigation of your RNA structure."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Zoom in/out with mouse wheel"}),(0,ce.jsx)("li",{children:"Pan by dragging the canvas"}),(0,ce.jsx)("li",{children:"Reset viewport to default position"})]})]});case d.OK.EDIT:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Edit RNA structures by modifying nucleotides, positions, and properties."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Move nucleotides by dragging"}),(0,ce.jsx)("li",{children:"Edit nucleotide properties"}),(0,ce.jsx)("li",{children:"Modify labels and annotations"})]})]});case d.OK.FORMAT:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Format RNA structures by adjusting base pairs and structural elements."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Add/remove base pairs"}),(0,ce.jsx)("li",{children:"Adjust base pair distances"}),(0,ce.jsx)("li",{children:"Optimize structure layout"})]})]});case d.OK.ANNOTATE:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Add annotations and labels to your RNA structure."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Add text labels"}),(0,ce.jsx)("li",{children:"Create annotation regions"}),(0,ce.jsx)("li",{children:"Customize annotation styles"})]})]});case d.OK.SETTINGS:return(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{children:"Configure application preferences and behavior."}),(0,ce.jsxs)("ul",{children:[(0,ce.jsx)("li",{children:"Adjust display settings"}),(0,ce.jsx)("li",{children:"Configure interaction constraints"}),(0,ce.jsx)("li",{children:"Import/export settings"})]})]});case d.OK.ABOUT:return(0,ce.jsxs)("div",{className:"quickstart-panel",children:[(0,ce.jsxs)("section",{className:"quickstart-section",children:[(0,ce.jsxs)("div",{className:"quickstart-section__header",children:[(0,ce.jsx)("h4",{className:"quickstart-section__title",children:"Key shortcuts"}),(0,ce.jsx)("span",{className:"quickstart-section__subtitle",children:"Stay on the keyboard for faster edits."})]}),(0,ce.jsx)("div",{className:"quickstart-shortcut-grid",children:Xt.map((function(e){return(0,ce.jsxs)("article",{className:"quickstart-shortcut-card",children:[(0,ce.jsx)("div",{className:"quickstart-shortcut-hotkey",children:e.shortcut}),(0,ce.jsx)("p",{className:"quickstart-shortcut-behavior",children:e.action})]},e.shortcut)}))}),null]}),(0,ce.jsxs)("section",{className:"quickstart-section",children:[(0,ce.jsx)("p",{className:"quickstart-paragraph",children:"Exornata is an interactive web app for editing, formatting, and annotating 2D RNA diagrams."}),(0,ce.jsx)("h4",{className:"quickstart-section__title",children:"Quickstart checklist"}),(0,ce.jsxs)("ol",{className:"quickstart-ordered-list",children:[(0,ce.jsx)("li",{children:"Start in Edit mode on the blank canvas that opens by default."}),(0,ce.jsxs)("li",{children:["Use ",(0,ce.jsx)("em",{children:"Load example"})," to pull in the 5S rRNA reference structure."]}),(0,ce.jsx)("li",{children:"Review the Units/Complex constraint and tighten it if you only need a subset."}),(0,ce.jsx)("li",{children:"Drag, pan, or zoom to orient the structure before detailed edits."}),(0,ce.jsx)("li",{children:"Jump to Format mode to refine base pairs and structural geometry."}),(0,ce.jsx)("li",{children:"Switch into Annotate mode to apply labels or callouts."}),(0,ce.jsx)("li",{children:"Export your edits as JSON, XRna, SVG, or other supported formats."}),(0,ce.jsx)("li",{children:"Re-import the exported file later to resume exactly where you stopped."})]})]}),(0,ce.jsx)("section",{className:"quickstart-section",children:(0,ce.jsx)("a",{className:"quickstart-link",href:"https://github.com/LDWLab/XRNA-React/issues",target:"_blank",rel:"noopener noreferrer",children:(0,ce.jsx)("h4",{className:"quickstart-section__title",children:"Something went wrong?"})})})]});default:return(0,ce.jsx)("div",{children:"No instructions available for this tab."})}}});break;default:throw"Unhandled switch case."}return(0,ce.jsx)(mt,{open:co!==io.NONE,onClose:function(){uo(io.NONE),fi((0,ce.jsx)(ce.Fragment,{}),{}),No(void 0)},isEditMenu:co===io.PROPERTIES,children:e})}),[it,lr,co,ut]),Ui=(0,u.useCallback)((function(e){ai();var t,n=ya.current,r=ra.current,o=ia.current,a={},i=(0,c.Z)(e);try{var l=function(){var e=t.value,i=e.rnaComplexIndex,l=e.rnaMoleculeName0,s=e.rnaMoleculeName1,c=e.start,u=e.stop,d=o[i],p=r[i],h=p.basePairs;i in a||(a[i]={add:[],delete:[]});for(var m=a[i],v=p.rnaMoleculeProps[l],x=h[l],g=p.rnaMoleculeProps[s],y={0:v,1:g},b=v.nucleotideProps[c[0]],N=g.nucleotideProps[c[1]],E=(0,f.scaleUp)((0,f.add)(b,N),.5),C=(0,f.subtract)(b,N),I=(0,f.normalize)(C),S=(0,f.orthogonalize)(I),_={},A=0,T=0,P=[0,1];T<P.length;T++){var k=P[T],w=Math.min(c[k],u[k]),M=Math.max(c[k],u[k]);_[k]={min:w,max:M};for(var O=w;O<=M;O++){var j=y[k].nucleotideProps[O];A+=Math.sign((0,f.dotProduct)((0,f.subtract)(j,E),S))}}A<0&&(S=(0,f.negate)(S));for(var L=n[q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],D=Number.isNaN(L)?d.helixDistance:L,Z=(0,f.scaleUp)(S,D),F=c[0],B=c[1],U=Math.sign(u[0]-c[0]),z=Math.sign(u[1]-c[1]),W=_[0].max-_[0].min+1,G=0;G<W;G++){var H=y[0].nucleotideProps[F],K=y[1].nucleotideProps[B],V=x[F],X=null===V||void 0===V?void 0:V.find((function(e){return e.rnaMoleculeName===s&&e.nucleotideIndex===B})),Y=null===X||void 0===X?void 0:X.basePairType;if(void 0===Y)try{Y=(0,R.getBasePairType)(H.symbol,K.symbol)}catch(ae){Y=void 0}var Q=void 0;switch(Y){case R.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case R.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case R.default.Type.CANONICAL:var $=n[q.pE.CANONICAL_BASE_PAIR_DISTANCE];Q=Number.isNaN($)?d.distances[Y]:$;break;case R.default.Type.WOBBLE:var J=n[q.pE.WOBBLE_BASE_PAIR_DISTANCE];Q=Number.isNaN(J)?d.distances[Y]:J;break;default:var ee=n[q.pE.MISMATCH_BASE_PAIR_DISTANCE];Q=Number.isNaN(ee)?d.distances[R.default.Type.MISMATCH]:ee}var te={keys0:{rnaMoleculeName:l,nucleotideIndex:F},keys1:{rnaMoleculeName:s,nucleotideIndex:B}};m.add.push(te),m.delete.push(te);var ne=(0,f.scaleUp)(I,.5*Q),re=(0,f.add)(E,ne),oe=(0,f.subtract)(E,ne);H.x=re.x,H.y=re.y,K.x=oe.x,K.y=oe.y,E=(0,f.add)(E,Z),F+=U,B+=z}};for(i.s();!(t=i.n()).done;)l()}catch(p){i.e(p)}finally{i.f()}for(var s=0,u=Object.values(a);s<u.length;s++){var d=u[s];d.add.sort(T.compareFullBasePairKeys),d.delete.sort(T.compareFullBasePairKeys)}Ne(a)}),[]),zi=(0,u.useMemo)((function(){var e=Fo.current;return(0,ce.jsx)(dt,{open:ho,onClose:function(){mo(!1)},rnaComplexProps:j,globalHelices:To,errorMessage:Mo,constrainRelevantHelices:e,handleNewBasePair:ri,removeBasePair:oi,reformatSelectedHelices:Ui})}),[ho,j,To,Mo,Do]),Wi=(0,u.useMemo)((function(){var e;return(0,ce.jsx)(Rt,{settings:it,viewportWidth:Ua,viewportHeight:Math.max((null!==(e=$o.height)&&void 0!==e?e:0)-At,0),viewportScale:Zr})}),[it,Ua,$o.height,At,Zr]),Gi=!(0,Y.isEmpty)(j),Hi=""===oe?null!==(t=Ea.current)&&void 0!==t?t:"":oe,Ki=(0,u.useMemo)((function(){return(0,ce.jsx)(Tt,{onImport:function(){Ke(void 0),Ue(!0)},onSave:Zi,onExportWithFormat:function(e,t){ae(e),ue(t),Qr(void 0),ba.current=e,Na.current=t,setTimeout((function(){var e;null===(e=Yo.current)||void 0===e||e.click()}),0)},onDownload:Fi,fileName:Hi,onFileNameChange:ae,exportFormat:se,onExportFormatChange:ue,downloadButtonReference:Yo,saveButtonsDisabledFlag:!Gi})}),[Hi,se,Gi,j]),Vi=(0,u.useMemo)((function(){return 1===Ba.length}),[Ba]),qi=(0,u.useCallback)((function(e){var t,n=ya.current,r=[],o=(0,Q.qj)(e,n[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]),a=(0,c.Z)(o);try{for(a.s();!(t=a.n()).done;){var i,l=t.value,s=l.rnaComplexIndex,u=l.helixDataPerRnaMolecules,d=(0,c.Z)(u);try{for(d.s();!(i=d.n()).done;){var f,p=i.value,h=p.rnaMoleculeName0,m=p.helixData,v=(0,c.Z)(m);try{for(v.s();!(f=v.n()).done;){var x=f.value,g=x.rnaMoleculeName1,y=x.start,b=x.stop;r.push({rnaComplexIndex:s,rnaMoleculeName0:h,rnaMoleculeName1:g,start:y,stop:b})}}catch(N){v.e(N)}finally{v.f()}}}catch(N){d.e(N)}finally{d.f()}}}catch(N){a.e(N)}finally{a.f()}Po(r)}),[]);return(0,u.useEffect)((function(){function e(){mo(!0)}function t(){var e=document.getElementById("__hidden_reformat_button__");null===e||void 0===e||e.click()}function n(e){var n=e.detail||{};if(void 0!==n.start&&void 0!==n.end){Math.min(n.start,n.end),Math.max(n.start,n.end);var r=document.getElementById("__hidden_reformat_button__");r?r.click():t()}else t()}return window.addEventListener("openBasepairBottomSheet",e),window.addEventListener("triggerReformatAll",t),window.addEventListener("triggerReformatRange",n),function(){window.removeEventListener("openBasepairBottomSheet",e),window.removeEventListener("triggerReformatAll",t),window.removeEventListener("triggerReformatRange",n)}}),[]),(0,u.useEffect)((function(){var e=function(e){var t=ya.current;if(Go.current&&!t[q.pE.DISABLE_NAVIGATE_AWAY_PROMPT])return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[]),(0,u.useEffect)((function(){var e=document.URL,t=e.indexOf("?");if(-1!=t){for(var n={},r=e.substring(t+1,e.length).split("&"),o=0;o<r.length;o++){var a=r[o].split("=");n[a[0]]=a[1]}var i="r2dt_job_id";i in n&&gi("https://www.ebi.ac.uk/Tools/services/rest/r2dt/result/r2dt-".concat(n[i],"/json"));var l="source_url";if(l in n&&gi(n[l]),"tab"in n){var s=n.tab,c=s.toLocaleLowerCase(),u=d.eA.find((function(e){return e.toLocaleLowerCase()===c}));void 0===u?(Wn('"'.concat(s,'" is not a valid, recognized Tab value.')),kt(bn.URL_PARSING_ERROR)):Qe(u)}}}),[]),(0,u.useEffect)((function(){var e=Qo.current,t=null===e?{width:0,height:0}:e.getBBox();Ft(t)}),[Ot]),(0,u.useEffect)(Li,[Ye,j]),(0,u.useEffect)((function(){if(0!==Object.keys(be).length){for(var e={},t={},n=0,r=Object.entries(be);n<r.length;n++){var o=(0,s.Z)(r[n],2),i=o[0],l=o[1],u=Number.parseInt(i);e[u]={},t[u]=[];var d,f=e[u],p=t[u],h=(0,c.Z)(l.add);try{for(h.s();!(d=h.n()).done;){var m=d.value,v=m.keys0,x=m.keys1;w(f,v),w(f,x),p.push(v,x)}}catch(M){h.e(M)}finally{h.f()}var g,y=(0,c.Z)(l.delete);try{for(y.s();!(g=y.n()).done;){var b=g.value,N=b.keys0,E=b.keys1;w(f,N),w(f,E),p.push(N,E)}}catch(M){y.e(M)}finally{y.f()}for(var C=0,I=Object.values(f);C<I.length;C++)I[C].sort(Y.subtractNumbers);p.sort(T.compareBasePairKeys)}Ct(t);for(var S=(0,a.Z)({},Io),_=0,A=Object.keys(be);_<A.length;_++){var P,R=A[_],k=Number.parseInt(R);S[k]=(null!==(P=S[k])&&void 0!==P?P:0)+1}So(S),yt({}),Ct({}),Ne({})}function w(e,t){var n=t.rnaMoleculeName,r=t.nucleotideIndex;n in e||(e[n]=[]);var o=e[n];o.includes(r)||o.push(r)}}),[be,Io]),(0,u.useEffect)((function(){var e="";(0,Y.isEmpty)(j)?e="Import data to enable downloads.":void 0===se&&(e="Select an export format to enable downloads."),Bn(e)}),[j,se]),(0,u.useEffect)((function(){Ln((function(e){return!e}))}),[ut]),(0,u.useEffect)((function(){null!==kn&&kn!==Fa&&ai()}),[kn]),(0,u.useEffect)((function(){var e=aa.current;tr((0,a.Z)((0,a.Z)({},e),{},{treatNoncanonicalBasePairsAsUnpairedFlag:it[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}))}),[it[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,u.useEffect)((function(){ao(it[q.pE.BASE_PAIR_RADIUS]);for(var e={},t=0,n=Object.entries(j);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1].basePairs,i=Number.parseInt(o);e[i]={add:[],delete:[]};for(var l=e[i],u=0,d=Object.entries(a);u<d.length;u++)for(var f=(0,s.Z)(d[u],2),p=f[0],h=f[1],m=0,v=Object.entries(h);m<v.length;m++){var x,g=(0,s.Z)(v[m],2),y=g[0],b=g[1],N={rnaMoleculeName:p,nucleotideIndex:Number.parseInt(y)},E=(0,c.Z)(b);try{for(E.s();!(x=E.n()).done;){var C=x.value;(0,T.isRelevantBasePairKeySetInPair)(N,C)||(l.delete.push({keys0:N,keys1:C}),l.add.push({keys0:N,keys1:C}))}}catch(A){E.e(A)}finally{E.f()}}}for(var I=0,S=Object.values(e);I<S.length;I++){var _=S[I];_.add.sort(T.compareFullBasePairKeys),_.delete.sort(T.compareFullBasePairKeys)}Ne(e)}),[it[q.pE.BASE_PAIR_RADIUS]]),(0,u.useEffect)((function(){uo(io.NONE),mo(!1)}),[ea.current]),(0,u.useEffect)((function(){return mo(!1)}),[tt]),(0,u.useEffect)((function(){return qi(ra.current)}),[it[q.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,ce.jsx)(X._.MemoizedComponent,{settingsRecord:it,setSettingsRecord:lt,basePairOnMouseDownHelper:li,labelClassName:Mi,basePairClassName:Oi,pushToUndoStack:ai,basePairRadius:oo,indicesOfFrozenNucleotides:Ae,labelContentDefaultStyles:dr,basePairAverageDistances:lr,updateBasePairAverageDistances:ci,updateLabelContentDefaultStyles:ui,interactionConstraintOptions:er,updateInteractionConstraintOptions:di,setNucleotideKeysToRerender:yt,setBasePairKeysToRerender:Ct,updateRnaMoleculeNameHelper:si,setBasePairKeysToEdit:Ne,singularRnaComplexFlag:Vi,averageNucleotideBoundingRectHeight:eo,resetOrientationDataTrigger:jn,children:(0,ce.jsxs)("div",{id:rn,onKeyDown:ki,onKeyUp:wi,ref:$o.ref,style:{position:"absolute",display:"block",width:"100%",height:"100%",overflow:"hidden",background:"var(--color-background)",color:"var(--color-text)",marginLeft:"".concat(hn,"px"),transition:"var(--transition-default)"},children:[(0,ce.jsxs)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:Yt,zIndex:1e3},children:[(Object.keys(Ae).length,Object.keys(mr).length,null),(0,ce.jsx)(Be,{onUndo:bi,onRedo:Ni,canUndo:Ei,canRedo:Ci,onResetViewport:vi,mode:Ye,onModeChange:Qe,constraint:tt,onConstraintChange:rt,onToggleBasePairEditor:function(){fi((0,ce.jsx)(ce.Fragment,{}),{}),mo((function(e){return!e}))},onTogglePropertiesDrawer:function(){"properties"===co?uo(io.NONE):(go("Properties"),uo(io.PROPERTIES))},onToggleSettingsDrawer:function(){"settings"===co?uo(io.NONE):(fi((0,ce.jsx)(ce.Fragment,{}),{}),go("Settings"),uo(io.SETTINGS))},onToggleAboutDrawer:function(){"about"===co?uo(io.NONE):(fi((0,ce.jsx)(ce.Fragment,{}),{}),go("About XRNA"),uo(io.ABOUT))},onOpenDocs:function(){window.location.hash="#/docs"},undoStack:ke,redoStack:je,onJumpToHistory:function(e){var t=wa.current,n=Ma.current;if(!(e<0||e>t.length+n.length)&&e!==t.length)if(e<t.length){var r=t[e];if(r){if("rnaComplexProps"in r){var o=r.rnaComplexProps,a=r.globalHelicesForFormatMenu;Ne({}),L(o),Po(a)}else Te(r);var l=t.slice(0,e+1),s=[].concat((0,i.Z)(n),(0,i.Z)(t.slice(e+1).reverse()));we(l),Le(s)}}else{var c=e-t.length,u=n[c];if(u){if("rnaComplexProps"in u){var d=u.rnaComplexProps,f=u.globalHelicesForFormatMenu;Ne({}),L(d),Po(f)}else Te(u);var p=[].concat((0,i.Z)(t),(0,i.Z)(n.slice(0,c+1))),h=n.slice(c+1);we(p),Le(h)}}},onResetToLastCheckpoint:function(){var e=wa.current;if(e.length>0){var t=e[0];if(t){if("rnaComplexProps"in t){var n=t.rnaComplexProps,r=t.globalHelicesForFormatMenu;Ne({}),L(n),Po(r)}else Te(t);var o=[].concat((0,i.Z)(Ma.current),(0,i.Z)(e.slice(1).reverse()));we([t]),Le(o)}}},onFreezeSelected:function(){if(Object.keys(mr).length>0)return function(){for(var e=structuredClone(Ae),t=0,n=Object.entries(mr);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1],l=Number.parseInt(o);l in e||(e[l]={});for(var u=0,d=Object.entries(a);u<d.length;u++){var f=(0,s.Z)(d[u],2),p=f[0],h=f[1];p in e[l]||(e[l][p]=new Set);var m,v=(0,c.Z)(h);try{for(v.s();!(m=v.n()).done;){var x=m.value;e[l][p].add(x)}}catch(y){v.e(y)}finally{v.f()}}}Te(e);var g=wa.current;we([].concat((0,i.Z)(g),[structuredClone(Ae)])),Le([])}}(),onUnfreezeSelected:function(){if(Object.keys(mr).length>0)return function(){for(var e=structuredClone(Ae),t=0,n=Object.entries(mr);t<n.length;t++){var r=(0,s.Z)(n[t],2),o=r[0],a=r[1],l=Number.parseInt(o);if(l in e){for(var u=0,d=Object.entries(a);u<d.length;u++){var f=(0,s.Z)(d[u],2),p=f[0],h=f[1];if(p in e[l]){var m,v=(0,c.Z)(h);try{for(v.s();!(m=v.n()).done;){var x=m.value;e[l][p].delete(x)}}catch(y){v.e(y)}finally{v.f()}0===e[l][p].size&&delete e[l][p]}}0===Object.keys(e[l]).length&&delete e[l]}}Te(e);var g=wa.current;we([].concat((0,i.Z)(g),[structuredClone(Ae)])),Le([])}}(),onUnfreezeAll:function(){if(Object.keys(Ae).length>0)return function(){if(window.confirm("Are you sure you want to unfreeze all nucleotides?")){var e=wa.current;we([].concat((0,i.Z)(e),[structuredClone(Ae)])),Le([]),Te({})}}}(),hasFrozenNucleotides:Object.keys(Ae).length>0,hasSelectedNucleotides:Object.keys(mr).length>0})]}),Ki,(0,ce.jsxs)("svg",{id:on,style:{top:At,left:Yt,position:"absolute"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Math.max((null!==(n=$o.width)&&void 0!==n?n:0)-Yt,0)," ").concat(Math.max((null!==(p=$o.height)&&void 0!==p?p:0)-At,0)),tabIndex:1,onMouseDown:Si,onMouseMove:Ii,onMouseUp:_i,onMouseLeave:Ai,onContextMenu:function(e){e.preventDefault()},onDoubleClick:function(e){if(ea.current===d.OK.ANNOTATE){var t=da.current,n=fa.current,r=Sa.current,o=_a.current,a={x:e.clientX,y:e.clientY};a.x-=Yt,(a=(0,f.scaleDown)(a,t*n)).y-=At,a.y=-a.y,a=(0,f.subtract)(a,(0,f.add)(r.asVector,o.asVector));var i=ra.current,l=Object.keys(i).map(Number);if(0!==l.length){var s=i[l[0]];s.textAnnotations||(s.textAnnotations={});var c="text-".concat(Date.now()),u={id:c,content:"New Text",x:a.x,y:a.y};ai(),s.textAnnotations[c]=u,yt({}),uo(io.PROPERTIES),fi((0,ce.jsx)(ve,{annotation:u,onUpdate:function(){return yt({})},onDelete:function(){ai(),s.textAnnotations&&delete s.textAnnotations[c],yt({}),fi((0,ce.jsx)(ce.Fragment,{}),{})}}),{})}}},onWheel:Ti,fill:Di,stroke:Q.Uq.isSupportedTab(Ye)?Nn[Ye]:"none",filter:"none",overflow:"hidden",children:[(0,ce.jsx)("style",{children:"\n              .".concat(mn," { stroke:none; }\n              .").concat(mn,":hover { stroke:inherit; }\n              .").concat(vn," { stroke:none; }\n              .").concat(vn,":hover { stroke:inherit; stroke-dasharray:0.5,0.5;}\n              .").concat(xn," { stroke:none; }\n              .").concat(xn,":hover { stroke:inherit; }\n              .").concat(gn," { stroke:none; }\n            ")}),(0,ce.jsxs)("defs",{children:[(0,ce.jsxs)("filter",{id:"xrTooltipShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,ce.jsx)("feDropShadow",{dx:"0",dy:"4",stdDeviation:"3",floodColor:"#000000",floodOpacity:"0.15"}),(0,ce.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodColor:"#000000",floodOpacity:"0.05"})]}),(0,ce.jsxs)("filter",{id:"xrTooltipGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,ce.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,ce.jsxs)("feMerge",{children:[(0,ce.jsx)("feMergeNode",{in:"coloredBlur"}),(0,ce.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,ce.jsx)("rect",{id:fn,width:"100%",height:"100%",stroke:"none",fill:it[q.pE.CANVAS_COLOR]?it[q.pE.CANVAS_COLOR]:"var(--color-background)",onMouseDown:function(e){e.button===M.MouseButtonIndices.Left&&(e.ctrlKey||void 0===_r||Ar(void 0),Xo(Fa,{}))}}),Wi,(0,ce.jsx)("g",{style:{visibility:_t===bn.DATA_IS_LOADED?"visible":"hidden"},id:sn,transform:Va.asTransform[0],children:(0,ce.jsx)("g",{id:cn,transform:Va.asTransform[1],children:(0,ce.jsx)("g",{id:un,transform:"scale(1, -1) "+Ha.asString,children:(0,ce.jsxs)("g",{id:dn,transform:Ka.asString,children:[Kr,pi,qa]})})})}),(0,ce.jsx)(Pt,{mouseOverText:Ot,mouseOverTextDimensions:Zt,mouseUIPosition:Wt,parentDivResizeDetector:$o,TOPBAR_HEIGHT:At,MOUSE_OVER_TEXT_FONT_SIZE:20,mouseOverTextSvgTextElementReference:Qo})]}),(0,ce.jsx)(Bt,{settings:it,setSettings:lt,onZoomIn:Pi,onZoomOut:Ri,onResetViewport:vi,position:qt}),_t===bn.DATA_IS_LOADING&&(0,ce.jsx)("img",{style:{top:.5*(null!==(h=$o.height)&&void 0!==h?h:0)-100,left:.5*(null!==(m=$o.width)&&void 0!==m?m:0)-50,position:"absolute"},src:ne,alt:"Loading..."}),_t===bn.DATA_LOADING_FAILED&&(0,ce.jsxs)("div",{style:{position:"absolute",top:.5*(null!==(v=$o.height)&&void 0!==v?v:0)-60,left:.5*(null!==(x=$o.width)&&void 0!==x?x:0)-240,width:480,maxWidth:"90%",padding:"12px 16px",borderRadius:8,border:"1px solid #cc0000",background:"#fff5f5",color:"#7a1212",boxShadow:"0 4px 16px rgba(0,0,0,0.15)",zIndex:2e3,textAlign:"center",fontSize:13,lineHeight:1.4},children:[(0,ce.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:"Failed to open file"}),(0,ce.jsx)("div",{children:Kn||"Unsupported file format or invalid file contents."}),(0,ce.jsx)("div",{style:{marginTop:10},children:(0,ce.jsx)("button",{onClick:function(){var e=(null===Yn||void 0===Yn?void 0:Yn.trim())||"No additional error details available.";navigator.clipboard.writeText(e).catch((function(){}))},style:{marginTop:6,padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid #b02a2a",background:"#ffe3e3",color:"#7a1212",cursor:"pointer"},children:"Copy error details"})})]}),(0,ce.jsx)("div",{style:{position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap",background:"inherit"},id:an}),Bi,zi,(0,ce.jsx)(pt,{rnaComplexProps:j}),(0,ce.jsx)(Gt,{isOpen:Fe,onClose:function(){Ue(!1),Ke(void 0)},onImportPaste:function(e,t){try{var n,r,o,i=(0,Ht.fastaInputFileHandler)(e),s=(0,c.Z)(i.rnaComplexProps);try{for(s.s();!(r=s.n()).done;)for(var u=r.value,d=0,f=Object.values(u.rnaMoleculeProps);d<f.length;d++)for(var p=f[d],h=0,m=Object.values(p.nucleotideProps);h<m.length;h++){var v=m[h];void 0===v.color&&(v.color=structuredClone(k.BLACK)),void 0===v.font&&(v.font=structuredClone(w.default.DEFAULT))}}catch(G){s.e(G)}finally{s.f()}if("new"===t)o={},i.rnaComplexProps.forEach((function(e,t){o[t]=e}));else{var x,g={},y=Object.keys(j).length,b=(0,c.Z)(i.rnaComplexProps);try{for(b.s();!(x=b.n()).done;){var N=x.value;g[y]=N,y++}}catch(G){b.e(G)}finally{b.f()}o=(0,a.Z)((0,a.Z)({},j),g)}var E,C=$(i.rnaComplexProps),I=0,S=0,_={},A=(0,c.Z)(i.rnaComplexProps);try{for(A.s();!(E=A.n()).done;)for(var T=E.value,P=0,R=Object.values(T.rnaMoleculeProps);P<R.length;P++)for(var M=R[P],O=0,D=Object.values(M.nucleotideProps);O<D.length;O++){var Z,F,B=D[O];null!==(Z=B.font)&&void 0!==Z&&Z.size&&(I+="number"===typeof B.font.size?B.font.size:parseFloat(B.font.size),S++),null!==(F=B.font)&&void 0!==F&&F.family&&(_[B.font.family]=(_[B.font.family]||0)+1)}}catch(G){A.e(G)}finally{A.f()}var U=S>0?I/S:w.default.DEFAULT_SIZE,z=(null===(n=Object.entries(_).sort((function(e,t){return t[1]-e[1]}))[0])||void 0===n?void 0:n[0])||w.default.DEFAULT.family;lt((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,C.canonicalDistance),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,C.wobbleDistance),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,C.mismatchDistance),(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,C.contiguousDistance),(0,l.Z)(t,q.pE.DEFAULT_FONT_SIZE,U),(0,l.Z)(t,q.pE.DEFAULT_FONT_FAMILY,z),t))})),L(o),qi(o),Ue(!1),Ke(void 0),setTimeout((function(){for(var e=0,t=0,n=0,r=Array.from(document.querySelectorAll(".".concat(mn)));n<r.length;n++)e+=r[n].getBBox().height,t++;var o=0===t?1:e/t,i=.3*o;to(o),ao(i),lt((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,l.Z)({},q.pE.BASE_PAIR_RADIUS,i))})),setTimeout((function(){vi(),kt(bn.DATA_IS_LOADED)}),0)}),500)}catch(H){var W=H instanceof Error?H.message:String(H);Ke(W)}},onImportFile:function(e,t){var n=e.name;Pa.current=n,J(n);var r=/^(.*)\.(.+)$/.exec(n);if(r){var o=r[1],i=r[2],u=i.toLowerCase();if((0,V.isInputFileExtension)(u)){it[q.pE.COPY_FILE_NAME]&&ae(o),it[q.pE.COPY_FILE_EXTENSION]&&i in Za&&ue(i);var d=new FileReader;d.addEventListener("load",(function(e){try{var n,r,o,i=e.target.result,d=(g?V.r2dtLegacyInputFileReadersRecord:V.inputFileReadersRecord)[u](i),f=V.defaultInvertYAxisFlagRecord[u],p=(0,c.Z)(d.rnaComplexProps);try{for(p.s();!(r=p.n()).done;)for(var h=r.value,m=0,v=Object.entries(h.rnaMoleculeProps);m<v.length;m++){var x=(0,s.Z)(v[m],2),y=x[0],b=x[1];y in h.basePairs||(h.basePairs[y]={});for(var N=0,E=Object.values(b.nucleotideProps);N<E.length;N++){var C=E[N];if(void 0===C.color&&(C.color=structuredClone(k.BLACK)),void 0===C.font&&(C.font=structuredClone(w.default.DEFAULT)),f){if(C.y*=-1,void 0!==C.labelLineProps)for(var I=0;I<C.labelLineProps.points.length;I++)C.labelLineProps.points[I].y*=-1;void 0!==C.labelContentProps&&(C.labelContentProps.y*=-1)}}}}catch(te){p.e(te)}finally{p.f()}if("new"===t)o={},d.rnaComplexProps.forEach((function(e,t){o[t]=e}));else{var S,_={},A=Object.keys(j).length,T=(0,c.Z)(d.rnaComplexProps);try{for(T.s();!(S=T.n()).done;){var P=S.value;_[A]=P,A++}}catch(te){T.e(te)}finally{T.f()}o=(0,a.Z)((0,a.Z)({},j),_)}we([]),Le([]),Ne({});var R,M=$(d.rnaComplexProps),O=0,D=0,Z={},F=(0,c.Z)(d.rnaComplexProps);try{for(F.s();!(R=F.n()).done;)for(var B=R.value,U=0,z=Object.values(B.rnaMoleculeProps);U<z.length;U++)for(var W=z[U],G=0,H=Object.values(W.nucleotideProps);G<H.length;G++){var K,X,Y=H[G];null!==(K=Y.font)&&void 0!==K&&K.size&&(O+="number"===typeof Y.font.size?Y.font.size:parseFloat(Y.font.size),D++),null!==(X=Y.font)&&void 0!==X&&X.family&&(Z[Y.font.family]=(Z[Y.font.family]||0)+1)}}catch(te){F.e(te)}finally{F.f()}var Q=D>0?O/D:w.default.DEFAULT_SIZE,J=(null===(n=Object.entries(Z).sort((function(e,t){return t[1]-e[1]}))[0])||void 0===n?void 0:n[0])||w.default.DEFAULT.family;lt((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,M.canonicalDistance),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,M.wobbleDistance),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,M.mismatchDistance),(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,M.contiguousDistance),(0,l.Z)(t,q.pE.DEFAULT_FONT_SIZE,Q),(0,l.Z)(t,q.pE.DEFAULT_FONT_FAMILY,J),t))})),L(o),qi(o),Ue(!1),Ke(void 0),setTimeout((function(){for(var e=0,t=0,n=0,r=Array.from(document.querySelectorAll(".".concat(mn)));n<r.length;n++)e+=r[n].getBBox().height,t++;var o=0===t?1:e/t,i=.3*o;to(o),ao(i),lt((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,l.Z)({},q.pE.BASE_PAIR_RADIUS,i))})),setTimeout((function(){vi(),kt(bn.DATA_IS_LOADED)}),0)}),500)}catch(ne){var ee=ne instanceof Error?ne.message:String(ne);Ke(ee)}})),d.readAsText(e)}else Ke("Unsupported file type. Supported: ".concat(V.inputFileExtensions.join(", ")))}else Ke("Invalid file name")},onLoadExample:function(e){fetch("".concat(".","/7k00_23_b.json")).then((function(e){return e.text()})).then((function(t){try{var n,r,o,i=V.inputFileReadersRecord[V.InputFileExtension.json](t),u=(0,c.Z)(i.rnaComplexProps);try{for(u.s();!(r=u.n()).done;)for(var d=r.value,f=0,p=Object.entries(d.rnaMoleculeProps);f<p.length;f++){var h=(0,s.Z)(p[f],2),m=h[0],v=h[1];m in d.basePairs||(d.basePairs[m]={});for(var x=0,g=Object.values(v.nucleotideProps);x<g.length;x++){var y=g[x];if(void 0===y.color&&(y.color=structuredClone(k.BLACK)),void 0===y.font&&(y.font=structuredClone(w.default.DEFAULT)),y.y*=-1,void 0!==y.labelLineProps)for(var b=0;b<y.labelLineProps.points.length;b++)y.labelLineProps.points[b].y*=-1;void 0!==y.labelContentProps&&(y.labelContentProps.y*=-1)}}}catch(Y){u.e(Y)}finally{u.f()}if("new"===e)o={},i.rnaComplexProps.forEach((function(e,t){o[t]=e})),ae("7k00_23_b"),ue("json"),Na.current="json";else{var N,E={},C=Object.keys(j).length,I=(0,c.Z)(i.rnaComplexProps);try{for(I.s();!(N=I.n()).done;){var S=N.value;E[C]=S,C++}}catch(Y){I.e(Y)}finally{I.f()}o=(0,a.Z)((0,a.Z)({},j),E)}we([]),Le([]),Ne({});var _,A=$(i.rnaComplexProps),T=0,P=0,R={},M=(0,c.Z)(i.rnaComplexProps);try{for(M.s();!(_=M.n()).done;)for(var O=_.value,D=0,Z=Object.values(O.rnaMoleculeProps);D<Z.length;D++)for(var F=Z[D],B=0,U=Object.values(F.nucleotideProps);B<U.length;B++){var z,W,G=U[B];null!==(z=G.font)&&void 0!==z&&z.size&&(T+="number"===typeof G.font.size?G.font.size:parseFloat(G.font.size),P++),null!==(W=G.font)&&void 0!==W&&W.family&&(R[G.font.family]=(R[G.font.family]||0)+1)}}catch(Y){M.e(Y)}finally{M.f()}var H=P>0?T/P:w.default.DEFAULT_SIZE,K=(null===(n=Object.entries(R).sort((function(e,t){return t[1]-e[1]}))[0])||void 0===n?void 0:n[0])||w.default.DEFAULT.family;lt((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,A.canonicalDistance),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,A.wobbleDistance),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,A.mismatchDistance),(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,A.contiguousDistance),(0,l.Z)(t,q.pE.DEFAULT_FONT_SIZE,H),(0,l.Z)(t,q.pE.DEFAULT_FONT_FAMILY,K),t))})),L(o),qi(o),Ue(!1),Ke(void 0),setTimeout((function(){for(var e=0,t=0,n=0,r=Array.from(document.querySelectorAll(".".concat(mn)));n<r.length;n++)e+=r[n].getBBox().height,t++;var o=0===t?1:e/t,i=.3*o;to(o),ao(i),lt((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,l.Z)({},q.pE.BASE_PAIR_RADIUS,i))})),setTimeout((function(){vi(),kt(bn.DATA_IS_LOADED)}),0)}),500)}catch(Q){var X=Q instanceof Error?Q.message:String(Q);Ke(X)}})).catch((function(e){var t=e instanceof Error?e.message:String(e);Ke(t)}))},onImportFR3D:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,o){var i,s,u,d,f,p,h,m,v,x,g,y,b,N,E,C,I,S,_,A,T,P,D,Z,F,B,U,z,W,G;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i="https://rna.bgsu.edu/rna3dhub/rest/getChainSequenceBasePairs?pdb_id=".concat(encodeURIComponent(t),"&chain=").concat(encodeURIComponent(n)),e.next=4,nt(i);case 4:if("No sequence was found for the given id"!==(s=e.sent).sequence&&s.sequence&&0!==s.sequence.length){e.next=7;break}throw new Error('No sequence found for PDB ID "'.concat(t,'" chain "').concat(n,'". Please check the IDs and try again.'));case 7:for(u=s.sequence,d=s.annotations||[],f="".concat(t,"_").concat(n),p=n,h=Math.max(40,6*u.length),m=h+10,v={firstNucleotideIndex:1,nucleotideProps:{}},x=0;x<u.length;x++)g=Math.min(2,Math.max(0,u.length-2)),y=2*Math.PI/u.length,b=(g+1)*y,N=2*Math.PI-b,E=u.length>1?N/(u.length-1):0,C=-Math.PI/2+b/2,I=C+x*E,S=m+h*Math.cos(I),_=m+h*Math.sin(I),A=u[x].toUpperCase(),T="T"===A?O.Nucleotide.Symbol.U:A,P=O.Nucleotide.isSymbol(T)?T:O.Nucleotide.Symbol.N,v.nucleotideProps[x]={symbol:P,x:S,y:_,color:structuredClone(k.BLACK),font:structuredClone(w.default.DEFAULT)};D={name:f,rnaMoleculeProps:(0,l.Z)({},p,v),basePairs:(0,l.Z)({},p,{})},Z=(0,c.Z)(d),e.prev=19,B=(0,r.Z)().mark((function e(){var t,n,o,a,i,l,s,c,d,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=F.value,n=parseInt(t.seq_id1,10)-1,o=parseInt(t.seq_id2,10)-1,n>=0&&n<u.length&&o>=0&&o<u.length&&n!==o&&(a=t.bp||"cWW",i=R.default.Type.CANONICAL,l=function(e){switch(e.toUpperCase()){case"W":return"watson_crick";case"H":return"hoogsteen";case"S":return"sugar_edge";default:return}},(s=a).toLowerCase().startsWith("n")&&(s=s.substring(1)),s.length>=3&&(c="t"===s[0].toLowerCase()?"trans":"cis",d=l(s[1]),f=l(s[2]),d&&f&&(h="".concat(c,"_").concat(d,"_").concat(f),i=R.default.types.includes(h)?h:"watson_crick"===d&&"watson_crick"===f?"cis"===c?R.default.Type.CANONICAL:R.default.Type.WOBBLE:R.default.Type.MISMATCH)),D.basePairs[p][n]||(D.basePairs[p][n]=[]),D.basePairs[p][n].find((function(e){return e.rnaMoleculeName===p&&e.nucleotideIndex===o}))||(D.basePairs[p][n].push({rnaMoleculeName:p,nucleotideIndex:o,basePairType:i,strokeWidth:M.DEFAULT_STROKE_WIDTH}),D.basePairs[p][o]||(D.basePairs[p][o]=[]),D.basePairs[p][o].push({rnaMoleculeName:p,nucleotideIndex:n,basePairType:i,strokeWidth:M.DEFAULT_STROKE_WIDTH})));case 4:case"end":return e.stop()}}),e)})),Z.s();case 22:if((F=Z.n()).done){e.next=26;break}return e.delegateYield(B(),"t0",24);case 24:e.next=22;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(19),Z.e(e.t1);case 31:return e.prev=31,Z.f(),e.finish(31);case 34:"new"===o?(U={0:D},ae(f)):(z=Object.keys(j).length,U=(0,a.Z)((0,a.Z)({},j),{},(0,l.Z)({},z,D))),we([]),Le([]),Ne({}),W=$([D]),lt((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,l.Z)(t,q.pE.CANONICAL_BASE_PAIR_DISTANCE,W.canonicalDistance),(0,l.Z)(t,q.pE.WOBBLE_BASE_PAIR_DISTANCE,W.wobbleDistance),(0,l.Z)(t,q.pE.MISMATCH_BASE_PAIR_DISTANCE,W.mismatchDistance),(0,l.Z)(t,q.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,W.contiguousDistance),(0,l.Z)(t,q.pE.DEFAULT_FONT_SIZE,w.default.DEFAULT_SIZE),(0,l.Z)(t,q.pE.DEFAULT_FONT_FAMILY,w.default.DEFAULT.family),t))})),L(U),qi(U),Ue(!1),Ke(void 0),setTimeout((function(){for(var e=0,t=0,n=0,r=Array.from(document.querySelectorAll(".".concat(mn)));n<r.length;n++)e+=r[n].getBBox().height,t++;var o=0===t?1:e/t,i=.3*o;to(o),ao(i),lt((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,l.Z)({},q.pE.BASE_PAIR_RADIUS,i))})),setTimeout((function(){vi(),kt(bn.DATA_IS_LOADED)}),0)}),500),e.next=52;break;case 47:throw e.prev=47,e.t2=e.catch(0),G=e.t2 instanceof Error?e.t2.message:String(e.t2),Ke(G),e.t2;case 52:case"end":return e.stop()}}),e,null,[[0,47],[19,28,31,34]])})));return function(t,n,r){return e.apply(this,arguments)}}(),errorMessage:Ge})]})})};var En=nn},4212:function(e,t,n){"use strict";n.d(t,{OK:function(){return r},eA:function(){return o}});var r=function(e){return e.INPUT_OUTPUT="Input/Output",e.VIEWPORT="Viewport",e.EDIT="Edit",e.FORMAT="Format",e.ANNOTATE="Annotate",e.SETTINGS="Settings",e.ABOUT="Quickstart",e}({}),o=Object.values(r);r.INPUT_OUTPUT},7089:function(e,t,n){"use strict";n.r(t),n.d(t,{BasePair:function(){return r},getBasePairType:function(){return m},isBasePairType:function(){return v}});var r,o=n(1413),a=n(4942),i=n(2791),l=n(3413),s=n(3871),c=n(7361),u=n(9287),d=n(1579),f=n(7457),p=n(433),h=n(184);function m(e,t){if((e=e.toUpperCase())>(t=t.toUpperCase())){var n=e;e=t,t=n}var o=r.typeRecord,a=void 0;if(e in o&&(a=o[e][t]),void 0===a)throw"Unsupported base-pair type between ".concat(e," and ").concat(t);return a}function v(e){return r.types.includes(e)}!function(e){var t,n,v,x,g,y,b,N,E,C,I,S,_=function(e){return e.CANONICAL="canonical",e.WOBBLE="wobble",e.MISMATCH="mismatch",e.CIS_WATSON_CRICK_WATSON_CRICK="cis_watson_crick_watson_crick",e.TRANS_WATSON_CRICK_WATSON_CRICK="trans_watson_crick_watson_crick",e.CIS_WATSON_CRICK_HOOGSTEEN="cis_watson_crick_hoogsteen",e.CIS_HOOGSTEEN_WATSON_CRICK="cis_hoogsteen_watson_crick",e.TRANS_WATSON_CRICK_HOOGSTEEN="trans_watson_crick_hoogsteen",e.TRANS_HOOGSTEEN_WATSON_CRICK="trans_hoogsteen_watson_crick",e.CIS_WATSON_CRICK_SUGAR_EDGE="cis_watson_crick_sugar_edge",e.CIS_SUGAR_EDGE_WATSON_CRICK="cis_sugar_edge_watson_crick",e.TRANS_WATSON_CRICK_SUGAR_EDGE="trans_watson_crick_sugar_edge",e.TRANS_SUGAR_EDGE_WATSON_CRICK="trans_sugar_edge_watson_crick",e.CIS_HOOGSTEEN_HOOGSTEEN="cis_hoogsteen_hoogsteen",e.TRANS_HOOGSTEEN_HOOGSTEEN="trans_hoogsteen_hoogsteen",e.CIS_HOOGSTEEN_SUGAR_EDGE="cis_hoogsteen_sugar_edge",e.CIS_SUGAR_EDGE_HOOGSTEEN="cis_sugar_edge_hoogsteen",e.TRANS_HOOGSTEEN_SUGAR_EDGE="trans_hoogsteen_sugar_edge",e.TRANS_SUGAR_EDGE_HOOGSTEEN="trans_sugar_edge_hoogsteen",e.CIS_SUGAR_EDGE_SUGAR_EDGE="cis_sugar_edge_sugar_edge",e.TRANS_SUGAR_EDGE_SUGAR_EDGE="trans_sugar_edge_sugar_edge",e}({});e.Type=_;e.types=Object.values(_);var A=e.DirectedType=(t={},(0,a.Z)(t,_.CIS_WATSON_CRICK_HOOGSTEEN,_.CIS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(t,_.CIS_HOOGSTEEN_WATSON_CRICK,_.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(t,_.TRANS_WATSON_CRICK_HOOGSTEEN,_.TRANS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(t,_.TRANS_HOOGSTEEN_WATSON_CRICK,_.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(t,_.CIS_WATSON_CRICK_SUGAR_EDGE,_.CIS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(t,_.CIS_SUGAR_EDGE_WATSON_CRICK,_.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(t,_.TRANS_WATSON_CRICK_SUGAR_EDGE,_.TRANS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(t,_.TRANS_SUGAR_EDGE_WATSON_CRICK,_.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(t,_.CIS_HOOGSTEEN_SUGAR_EDGE,_.CIS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(t,_.CIS_SUGAR_EDGE_HOOGSTEEN,_.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(t,_.TRANS_HOOGSTEEN_SUGAR_EDGE,_.TRANS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(t,_.TRANS_SUGAR_EDGE_HOOGSTEEN,_.TRANS_SUGAR_EDGE_HOOGSTEEN),t),T=e.directedTypes=Object.values(A),P=e.RedundantLeontisWesthofType=(n={},(0,a.Z)(n,_.CIS_SUGAR_EDGE_WATSON_CRICK,_.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(n,_.CIS_HOOGSTEEN_WATSON_CRICK,_.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(n,_.CIS_SUGAR_EDGE_HOOGSTEEN,_.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(n,_.TRANS_SUGAR_EDGE_WATSON_CRICK,_.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(n,_.TRANS_HOOGSTEEN_WATSON_CRICK,_.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(n,_.TRANS_SUGAR_EDGE_HOOGSTEEN,_.TRANS_SUGAR_EDGE_HOOGSTEEN),n),R=e.redundantLeontisWesthofTypes=Object.values(P);e.isRedundantLeontisWesthofType=function(e){return R.includes(e)};e.reverseDirectedTypeMap=(v={},(0,a.Z)(v,_.CIS_WATSON_CRICK_HOOGSTEEN,_.CIS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(v,_.CIS_HOOGSTEEN_WATSON_CRICK,_.CIS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(v,_.TRANS_WATSON_CRICK_HOOGSTEEN,_.TRANS_HOOGSTEEN_WATSON_CRICK),(0,a.Z)(v,_.TRANS_HOOGSTEEN_WATSON_CRICK,_.TRANS_WATSON_CRICK_HOOGSTEEN),(0,a.Z)(v,_.CIS_WATSON_CRICK_SUGAR_EDGE,_.CIS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(v,_.CIS_SUGAR_EDGE_WATSON_CRICK,_.CIS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(v,_.TRANS_WATSON_CRICK_SUGAR_EDGE,_.TRANS_SUGAR_EDGE_WATSON_CRICK),(0,a.Z)(v,_.TRANS_SUGAR_EDGE_WATSON_CRICK,_.TRANS_WATSON_CRICK_SUGAR_EDGE),(0,a.Z)(v,_.CIS_HOOGSTEEN_SUGAR_EDGE,_.CIS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(v,_.CIS_SUGAR_EDGE_HOOGSTEEN,_.CIS_HOOGSTEEN_SUGAR_EDGE),(0,a.Z)(v,_.TRANS_HOOGSTEEN_SUGAR_EDGE,_.TRANS_SUGAR_EDGE_HOOGSTEEN),(0,a.Z)(v,_.TRANS_SUGAR_EDGE_HOOGSTEEN,_.TRANS_HOOGSTEEN_SUGAR_EDGE),v),e.shortenedTypeNameMap=(x={},(0,a.Z)(x,_.CANONICAL,"Can."),(0,a.Z)(x,_.WOBBLE,"Wob."),(0,a.Z)(x,_.MISMATCH,"Mis."),(0,a.Z)(x,_.CIS_WATSON_CRICK_WATSON_CRICK,"cWW"),(0,a.Z)(x,_.TRANS_WATSON_CRICK_WATSON_CRICK,"tWW"),(0,a.Z)(x,_.CIS_WATSON_CRICK_HOOGSTEEN,"cWH"),(0,a.Z)(x,_.CIS_HOOGSTEEN_WATSON_CRICK,"cHW"),(0,a.Z)(x,_.TRANS_WATSON_CRICK_HOOGSTEEN,"tWH"),(0,a.Z)(x,_.TRANS_HOOGSTEEN_WATSON_CRICK,"tHW"),(0,a.Z)(x,_.CIS_WATSON_CRICK_SUGAR_EDGE,"cWS"),(0,a.Z)(x,_.CIS_SUGAR_EDGE_WATSON_CRICK,"cSW"),(0,a.Z)(x,_.TRANS_WATSON_CRICK_SUGAR_EDGE,"tWS"),(0,a.Z)(x,_.TRANS_SUGAR_EDGE_WATSON_CRICK,"tSW"),(0,a.Z)(x,_.CIS_HOOGSTEEN_HOOGSTEEN,"cHH"),(0,a.Z)(x,_.TRANS_HOOGSTEEN_HOOGSTEEN,"tHH"),(0,a.Z)(x,_.CIS_HOOGSTEEN_SUGAR_EDGE,"cHS"),(0,a.Z)(x,_.CIS_SUGAR_EDGE_HOOGSTEEN,"cSH"),(0,a.Z)(x,_.TRANS_HOOGSTEEN_SUGAR_EDGE,"tHS"),(0,a.Z)(x,_.TRANS_SUGAR_EDGE_HOOGSTEEN,"tSH"),(0,a.Z)(x,_.CIS_SUGAR_EDGE_SUGAR_EDGE,"cSS"),(0,a.Z)(x,_.TRANS_SUGAR_EDGE_SUGAR_EDGE,"tSS"),x);var k=e.fullTypeNameMap=(g={},(0,a.Z)(g,_.CANONICAL,"canonical"),(0,a.Z)(g,_.WOBBLE,"wobble"),(0,a.Z)(g,_.MISMATCH,"mismatch"),(0,a.Z)(g,_.CIS_WATSON_CRICK_WATSON_CRICK,"cis Watson\u2013Crick/Watson\u2013Crick"),(0,a.Z)(g,_.TRANS_WATSON_CRICK_WATSON_CRICK,"trans Watson\u2013Crick/Watson\u2013Crick"),(0,a.Z)(g,_.CIS_WATSON_CRICK_HOOGSTEEN,"cis Watson\u2013Crick/Hoogsteen"),(0,a.Z)(g,_.CIS_HOOGSTEEN_WATSON_CRICK,"cis Hoogsteen/Watson\u2013Crick"),(0,a.Z)(g,_.TRANS_WATSON_CRICK_HOOGSTEEN,"trans Watson\u2013Crick/Hoogsteen"),(0,a.Z)(g,_.TRANS_HOOGSTEEN_WATSON_CRICK,"trans Hoogsteen/Watson\u2013Crick"),(0,a.Z)(g,_.CIS_WATSON_CRICK_SUGAR_EDGE,"cis Watson\u2013Crick/Sugar edge"),(0,a.Z)(g,_.CIS_SUGAR_EDGE_WATSON_CRICK,"cis Sugar edge/Watson\u2013Crick"),(0,a.Z)(g,_.TRANS_WATSON_CRICK_SUGAR_EDGE,"trans Watson\u2013Crick/Sugar edge"),(0,a.Z)(g,_.TRANS_SUGAR_EDGE_WATSON_CRICK,"trans Sugar edge/Watson\u2013Crick"),(0,a.Z)(g,_.CIS_HOOGSTEEN_HOOGSTEEN,"cis Hoogsteen/Hoogsteen"),(0,a.Z)(g,_.TRANS_HOOGSTEEN_HOOGSTEEN,"trans Hoogsteen/Hoogsteen"),(0,a.Z)(g,_.CIS_HOOGSTEEN_SUGAR_EDGE,"cis Hoogsteen/Sugar edge"),(0,a.Z)(g,_.CIS_SUGAR_EDGE_HOOGSTEEN,"cis Sugar edge/Hoogsteen"),(0,a.Z)(g,_.TRANS_HOOGSTEEN_SUGAR_EDGE,"trans Hoogsteen/Sugar edge"),(0,a.Z)(g,_.TRANS_SUGAR_EDGE_HOOGSTEEN,"trans Sugar edge/Hoogsteen"),(0,a.Z)(g,_.CIS_SUGAR_EDGE_SUGAR_EDGE,"cis Sugar edge/Sugar edge"),(0,a.Z)(g,_.TRANS_SUGAR_EDGE_SUGAR_EDGE,"trans Sugar edge/Sugar edge"),g);e.isDirectedType=function(e){return T.includes(e)};var w=e.CanonicalType=(y={},(0,a.Z)(y,_.CANONICAL,_.CANONICAL),(0,a.Z)(y,_.WOBBLE,_.WOBBLE),(0,a.Z)(y,_.MISMATCH,_.MISMATCH),(0,a.Z)(y,_.CIS_WATSON_CRICK_WATSON_CRICK,_.CIS_WATSON_CRICK_WATSON_CRICK),(0,a.Z)(y,_.TRANS_WATSON_CRICK_WATSON_CRICK,_.TRANS_WATSON_CRICK_WATSON_CRICK),y),M=e.canonicalTypes=Object.values(w);function O(e){return M.includes(e)}function j(e,t){return!t||r.isCanonicalType(e)}e.isCanonicalType=O,e.isEnabledBasePair=j,e.isNucleotideBasePaired=function(e,t,n,r,o,a){if(!(r in n))return!1;var i=n[r];return o in i&&i[o].filter((function(n){var r;return j(null!==(r=n.basePairType)&&void 0!==r?r:m(e,t.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),a)})).length>0};e.typeRecord=(C={},(0,a.Z)(C,u.Nucleotide.Symbol.A,(b={},(0,a.Z)(b,u.Nucleotide.Symbol.A,_.MISMATCH),(0,a.Z)(b,u.Nucleotide.Symbol.C,_.MISMATCH),(0,a.Z)(b,u.Nucleotide.Symbol.G,_.MISMATCH),(0,a.Z)(b,u.Nucleotide.Symbol.U,_.CANONICAL),b)),(0,a.Z)(C,u.Nucleotide.Symbol.C,(N={},(0,a.Z)(N,u.Nucleotide.Symbol.C,_.MISMATCH),(0,a.Z)(N,u.Nucleotide.Symbol.G,_.CANONICAL),(0,a.Z)(N,u.Nucleotide.Symbol.U,_.MISMATCH),N)),(0,a.Z)(C,u.Nucleotide.Symbol.G,(E={},(0,a.Z)(E,u.Nucleotide.Symbol.G,_.MISMATCH),(0,a.Z)(E,u.Nucleotide.Symbol.U,_.WOBBLE),E)),(0,a.Z)(C,u.Nucleotide.Symbol.U,(0,a.Z)({},u.Nucleotide.Symbol.U,_.MISMATCH)),C);var L=.5*Math.sqrt(3),D=.5*(3+Math.sqrt(3));function Z(e){return function(t){var n=t.position0,r=t.position1;return e((0,o.Z)((0,o.Z)({},t),{},{position0:r,position1:n}))}}var F=.75;function B(e,t,n){var r=n/(0,c.distance)(e,t),o=1-r;return{interpolatedPosition0:(0,c.interpolate)(e,t,r),interpolatedPosition1:(0,c.interpolate)(e,t,o)}}function U(e){var t=e.position0,n=e.position1,r=e.stroke,a=e.strokeWidth,i=e.svgPropertiesForXrna,l=e.onMouseOver,s=e.onMouseLeave,c=e.onMouseDown,u=e.className,d=e.basePairRadius,p=B(t,n,e.averageNucleotideBoundingRectHeight*F),m=p.interpolatedPosition0,v=p.interpolatedPosition1;return(0,h.jsxs)("g",{children:[(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(m,v,!0,d),fill:"none",strokeWidth:a,onMouseOver:l,onMouseLeave:s,onMouseDown:c,className:u,pointerEvents:"all"}),(0,h.jsx)("line",(0,o.Z)((0,o.Z)({},i),{},{x1:m.x,y1:m.y,x2:v.x,y2:v.y,stroke:r,strokeWidth:a,pointerEvents:"none"}))]})}function z(e){var t=e.position0,n=e.position1,r=e.stroke,a=e.fill,i=e.strokeWidth,l=e.svgPropertiesForXrna,s=e.onMouseOver,c=e.onMouseLeave,u=e.onMouseDown,d=e.className,f=e.basePairRadius,p={x:.5*(t.x+n.x),y:.5*(t.y+n.y)};return(0,h.jsxs)("g",{children:[(0,h.jsx)("circle",(0,o.Z)((0,o.Z)({},l),{},{r:f,cx:p.x,cy:p.y,stroke:r,fill:a,strokeWidth:i,pointerEvents:"none"})),(0,h.jsx)("circle",{r:f,cx:p.x,cy:p.y,fill:"none",stroke:"red",strokeWidth:i,className:d,pointerEvents:"all",onMouseOver:s,onMouseLeave:c,onMouseDown:u})]})}function W(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.onMouseOver,u=e.onMouseLeave,d=e.onMouseDown,p=e.className,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.normalize)((0,c.subtract)(n,t)),E=(0,c.scaleUp)(N,m),C=(0,c.scaleUp)(N,1.5*m),I=(0,c.orthogonalize)(E),S=(0,c.subtract)(b,C),_=(0,c.add)(b,C),A=(0,c.subtract)(S,E),T=(0,c.add)(S,E),P=(0,c.subtract)(_,E),R=(0,c.add)(_,E),k=[(0,c.subtract)(P,I),(0,c.add)(P,I),(0,c.add)(R,I),(0,c.subtract)(R,I)],w=new Array;if((0,c.dotProduct)((0,c.subtract)(A,x),(0,c.subtract)(b,A))>0){var M={key:0,pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:A.x,y2:A.y};w.push((0,h.jsx)("line",(0,o.Z)({},M)))}var O={key:1,pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:S.x,cy:S.y,r:m},j={key:2,pointerEvents:"none",stroke:y,strokeWidth:l,x1:T.x,y1:T.y,x2:P.x,y2:P.y},L={key:3,d:"M ".concat(k[0].x," ").concat(k[0].y," L ").concat(k[1].x," ").concat(k[1].y," L ").concat(k[2].x," ").concat(k[2].y," L ").concat(k[3].x," ").concat(k[3].y," Z"),stroke:a,fill:i,pointerEvents:"none",strokeWidth:l};if(w.push((0,h.jsx)("circle",(0,o.Z)({},O)),(0,h.jsx)("line",(0,o.Z)({},j)),(0,h.jsx)("path",(0,o.Z)({},L))),(0,c.dotProduct)((0,c.subtract)(R,g),(0,c.subtract)(b,R))>0){var D={key:4,pointerEvents:"none",stroke:y,strokeWidth:l,x1:R.x,y1:R.y,x2:g.x,y2:g.y};w.push((0,h.jsx)("line",(0,o.Z)({},D)))}return(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[w,(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:s,onMouseLeave:u,onMouseDown:d,className:p,pointerEvents:"all"})]}))}var G=Z(W);function H(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,u=e.onMouseOver,d=e.onMouseLeave,p=e.onMouseDown,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.normalize)((0,c.subtract)(n,t)),E=(0,c.scaleUp)(N,D*m),C=(0,c.scaleUp)(N,m),I=(0,c.scaleUp)((0,c.orthogonalize)(N),m),S=(0,c.add)((0,c.subtract)(b,E),C),_=(0,c.subtract)(S,C),A=(0,c.add)(S,C),T=(0,c.add)(S,(0,c.scaleUp)(N,2*m)),P=(0,c.add)(b,E),R=(0,c.add)(T,I),k=(0,c.subtract)(T,I),w=new Array;(0,c.dotProduct)((0,c.subtract)(_,x),(0,c.subtract)(b,_))>0&&w.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:_.x,y2:_.y},0));var M={key:1,pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:S.x,cy:S.y,r:m},O={key:3,d:"M ".concat(R.x," ").concat(R.y," L ").concat(k.x," ").concat(k.y," L ").concat(P.x," ").concat(P.y," Z"),stroke:a,fill:i,strokeWidth:l,pointerEvents:"none"};return w.push((0,h.jsx)("circle",(0,o.Z)({},M)),(0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:A.x,y1:A.y,x2:T.x,y2:T.y},2),(0,h.jsx)("path",(0,o.Z)({},O))),(0,c.dotProduct)((0,c.subtract)(P,g),(0,c.subtract)(b,P))>0&&w.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:P.x,y1:P.y,x2:g.x,y2:g.y},4)),(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[w,(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:u,onMouseLeave:d,onMouseDown:p,className:s,pointerEvents:"all"})]}))}var K=Z(H);function V(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,u=e.onMouseOver,d=e.onMouseLeave,p=e.onMouseDown,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.normalize)((0,c.subtract)(n,t)),E=(0,c.scaleUp)(N,m),C=(0,c.scaleUp)((0,c.orthogonalize)(N),m),I=(0,c.subtract)(b,E),S=(0,c.add)(b,E),_=[(0,c.subtract)(I,C),(0,c.add)(I,C),(0,c.add)(S,C),(0,c.subtract)(S,C)],A=new Array;(0,c.dotProduct)((0,c.subtract)(I,x),(0,c.subtract)(b,I))>0&&A.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:I.x,y2:I.y},0));var T={key:1,d:"M ".concat(_[0].x," ").concat(_[0].y," L ").concat(_[1].x," ").concat(_[1].y," L ").concat(_[2].x," ").concat(_[2].y," L ").concat(_[3].x," ").concat(_[3].y," Z"),stroke:a,fill:i,strokeWidth:l,pointerEvents:"none"};return A.push((0,h.jsx)("path",(0,o.Z)({},T))),(0,c.dotProduct)((0,c.subtract)(S,g),(0,c.subtract)(b,S))>0&&A.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:S.x,y2:S.y},2)),(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[A,(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:u,onMouseLeave:d,onMouseDown:p,className:s,pointerEvents:"all"})]}))}function q(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,u=e.onMouseOver,d=e.onMouseLeave,p=e.onMouseDown,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.normalize)((0,c.subtract)(n,t)),E=(0,c.scaleUp)(N,D*m),C=(0,c.scaleUp)(N,m),I=(0,c.scaleUp)((0,c.orthogonalize)(N),m),S=(0,c.add)((0,c.subtract)(b,E),C),_=(0,c.subtract)(S,C),A=(0,c.add)(S,C),T=(0,c.add)(S,(0,c.scaleUp)(N,2*m)),P=(0,c.add)(b,E),R=[(0,c.subtract)(_,I),(0,c.add)(_,I),(0,c.add)(A,I),(0,c.subtract)(A,I)],k=(0,c.add)(T,I),w=(0,c.subtract)(T,I),M=new Array;(0,c.dotProduct)((0,c.subtract)(_,x),(0,c.subtract)(b,_))>0&&M.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:_.x,y2:_.y},0));var O={key:1,d:"M ".concat(R[0].x," ").concat(R[0].y," L ").concat(R[1].x," ").concat(R[1].y," L ").concat(R[2].x," ").concat(R[2].y," L ").concat(R[3].x," ").concat(R[3].y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"},j={key:3,d:"M ".concat(k.x," ").concat(k.y," L ").concat(w.x," ").concat(w.y," L ").concat(P.x," ").concat(P.y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"};return M.push((0,h.jsx)("path",(0,o.Z)({},O)),(0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:A.x,y1:A.y,x2:T.x,y2:T.y},2),(0,h.jsx)("path",(0,o.Z)({},j))),(0,c.dotProduct)((0,c.subtract)(P,g),(0,c.subtract)(b,P))>0&&M.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:P.x,y1:P.y,x2:g.x,y2:g.y},4)),(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[M,(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:u,onMouseLeave:d,onMouseDown:p,className:s,pointerEvents:"all"})]}))}var X=Z(q);function Y(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.className,u=e.onMouseOver,d=e.onMouseLeave,p=e.onMouseDown,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.normalize)((0,c.subtract)(n,t)),E=(0,c.scaleUp)(N,L*m),C=(0,c.scaleUp)((0,c.orthogonalize)(N),m),I=(0,c.subtract)(b,E),S=(0,c.add)(b,E),_=(0,c.add)(I,C),A=(0,c.subtract)(I,C),T=new Array;(0,c.dotProduct)((0,c.subtract)(I,x),(0,c.subtract)(b,I))>0&&T.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:I.x,y2:I.y},0));var P={key:1,d:"M ".concat(_.x," ").concat(_.y," L ").concat(A.x," ").concat(A.y," L ").concat(S.x," ").concat(S.y," Z"),stroke:a,strokeWidth:l,fill:i,pointerEvents:"none"};return T.push((0,h.jsx)("path",(0,o.Z)({},P))),(0,c.dotProduct)((0,c.subtract)(I,x),(0,c.subtract)(b,I))>0&&T.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:S.x,y2:S.y},2)),(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[T,(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:u,onMouseLeave:d,onMouseDown:p,className:s,pointerEvents:"all"})]}))}var Q=(I={},(0,a.Z)(I,r.Type.CANONICAL,U),(0,a.Z)(I,r.Type.MISMATCH,z),(0,a.Z)(I,r.Type.WOBBLE,z),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_WATSON_CRICK,U),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_WATSON_CRICK,(function(e){var t=e.position0,n=e.position1,r=e.svgPropertiesForXrna,a=e.stroke,i=e.fill,l=e.strokeWidth,s=e.onMouseOver,u=e.onMouseDown,d=e.onMouseLeave,p=e.className,m=e.basePairRadius,v=B(t,n,e.averageNucleotideBoundingRectHeight*F),x=v.interpolatedPosition0,g=v.interpolatedPosition1,y=["none",void 0].includes(a)?i:a,b=(0,c.scaleUp)((0,c.add)(t,n),.5),N=(0,c.scaleUp)((0,c.normalize)((0,c.subtract)(n,t)),m),E=(0,c.subtract)(b,N),C=(0,c.add)(b,N),I=new Array;return(0,c.dotProduct)((0,c.subtract)(E,x),(0,c.subtract)(b,E))>0&&I.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:x.x,y1:x.y,x2:E.x,y2:E.y},0)),I.push((0,h.jsx)("circle",{pointerEvents:"none",stroke:a,fill:i,strokeWidth:l,cx:b.x,cy:b.y,r:m},1)),(0,c.dotProduct)((0,c.subtract)(C,g),(0,c.subtract)(b,C))>0&&I.push((0,h.jsx)("line",{pointerEvents:"none",stroke:y,strokeWidth:l,x1:g.x,y1:g.y,x2:C.x,y2:C.y},2)),(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},r),{},{children:[(0,h.jsx)("path",{d:(0,f.getLineBoundingPath)(x,g,!0,m),fill:"none",strokeWidth:l,onMouseOver:s,onMouseLeave:d,onMouseDown:u,className:p,pointerEvents:"all"}),I]}))})),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_HOOGSTEEN,W),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_WATSON_CRICK,G),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_WATSON_CRICK,G),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_HOOGSTEEN,W),(0,a.Z)(I,r.Type.CIS_WATSON_CRICK_SUGAR_EDGE,H),(0,a.Z)(I,r.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,H),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_WATSON_CRICK,K),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,K),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_HOOGSTEEN,V),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_HOOGSTEEN,V),(0,a.Z)(I,r.Type.CIS_HOOGSTEEN_SUGAR_EDGE,q),(0,a.Z)(I,r.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,q),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_HOOGSTEEN,X),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,X),(0,a.Z)(I,r.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,Y),(0,a.Z)(I,r.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,Y),I);function $(e){return{stroke:e,fill:"none"}}function J(e){return{stroke:"none",fill:e}}var ee=(S={},(0,a.Z)(S,r.Type.CANONICAL,(function(e){return{stroke:e}})),(0,a.Z)(S,r.Type.WOBBLE,J),(0,a.Z)(S,r.Type.MISMATCH,$),(0,a.Z)(S,r.Type.CIS_WATSON_CRICK_WATSON_CRICK,$),(0,a.Z)(S,r.Type.TRANS_WATSON_CRICK_WATSON_CRICK,$),(0,a.Z)(S,r.Type.CIS_WATSON_CRICK_HOOGSTEEN,J),(0,a.Z)(S,r.Type.TRANS_WATSON_CRICK_HOOGSTEEN,$),(0,a.Z)(S,r.Type.CIS_HOOGSTEEN_WATSON_CRICK,J),(0,a.Z)(S,r.Type.TRANS_HOOGSTEEN_WATSON_CRICK,$),(0,a.Z)(S,r.Type.CIS_WATSON_CRICK_SUGAR_EDGE,J),(0,a.Z)(S,r.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,$),(0,a.Z)(S,r.Type.CIS_SUGAR_EDGE_WATSON_CRICK,J),(0,a.Z)(S,r.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,$),(0,a.Z)(S,r.Type.CIS_HOOGSTEEN_HOOGSTEEN,J),(0,a.Z)(S,r.Type.TRANS_HOOGSTEEN_HOOGSTEEN,$),(0,a.Z)(S,r.Type.CIS_HOOGSTEEN_SUGAR_EDGE,J),(0,a.Z)(S,r.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,$),(0,a.Z)(S,r.Type.CIS_SUGAR_EDGE_HOOGSTEEN,J),(0,a.Z)(S,r.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,$),(0,a.Z)(S,r.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,J),(0,a.Z)(S,r.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,$),S);function te(e){var t,n,c,u=e.position0,f=e.position1,m=e.mappedBasePair,v=e.rnaComplexIndex,x=e.rnaComplexName,g=e.rnaMoleculeName0,y=e.formattedNucleotideIndex0,b=e.rnaMoleculeName1,N=e.formattedNucleotideIndex1,E=(0,i.useContext)(l._.BasePair.AverageStrokeWidth),C=(0,i.useContext)(l._.App.SetMouseOverText),I=(0,i.useContext)(l._.BasePair.ClassName),S=(0,i.useContext)(l._.App.RnaComplexProps),_=(0,i.useContext)(l._.BasePair.OnMouseDownHelper),A=(0,i.useContext)(l._.App.SingularRnaComplexFlag),T=(0,i.useContext)(l._.BasePair.Radius);Number.isNaN(T)&&(T=1);var P=(0,i.useContext)(l._.Nucleotide.AverageBoundingRectHeight);if((Number.isNaN(P)||0===P)&&(P=p.default.DEFAULT_SIZE),void 0===m)return null;var R=m.basePairType,w=S[v],M=1===Object.keys(w.rnaMoleculeProps).length,j=w.rnaMoleculeProps[g],L=w.rnaMoleculeProps[b],D=y-j.firstNucleotideIndex,Z=N-L.firstNucleotideIndex,F=(j.nucleotideProps[D],L.nucleotideProps[Z],(0,s.toCSS)(null!==(t=m.color)&&void 0!==t?t:O(R)?s.BLACK:s.BRIGHT_GRAY)),B=null!==(n=m.strokeWidth)&&void 0!==n?n:E;if(void 0!==m.points){var U=m.points.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ");return(0,h.jsx)("polyline",{stroke:F,strokeWidth:B,pointerEvents:"none",points:U,fill:"none"})}var z=(c={},(0,a.Z)(c,d.SVG_PROPERTY_XRNA_TYPE,d.SvgPropertyXrnaType.BASE_PAIR),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_COMPLEX_NAME,x),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0,g),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1,b),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0,y),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1,N),(0,a.Z)(c,d.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE,R),c),W=g,G=b,H=D,K=Z,V=R;if(r.isRedundantLeontisWesthofType(V)){V=r.reverseDirectedTypeMap[V];var q=W;W=G,G=q;var X=H;H=K,K=X}var Y=w.rnaMoleculeProps[W],$=w.rnaMoleculeProps[G],J=["Base Pair:"];return A||J.push("  Complex: ".concat(w.name)),M||J.push("  Mol(s): ".concat(Array.from(new Set([W,G])).join(" - "))),J.push("  Nucs:  ".concat(Y.firstNucleotideIndex+H).concat(Y.nucleotideProps[H].symbol," - ").concat($.firstNucleotideIndex+K).concat($.nucleotideProps[K].symbol),"  Type: ".concat(k[V])),(0,i.createElement)(Q[R],(0,o.Z)({position0:u,position1:f,basePairType:R,strokeWidth:B,svgPropertiesForXrna:z,onMouseOver:function(){C(J.join("\n"))},onMouseLeave:function(){C("")},onMouseDown:function(e){_(e,{rnaComplexIndex:v,rnaMoleculeName:g,nucleotideIndex:D},{rnaComplexIndex:v,rnaMoleculeName:b,nucleotideIndex:Z})},className:I,basePairRadius:T,averageNucleotideBoundingRectHeight:P},ee[R](F)))}e.Component=te;e.MemoizedComponent=(0,i.memo)(te)}(r||(r={})),t.default=r},9287:function(e,t,n){"use strict";n.r(t),n.d(t,{Nucleotide:function(){return x},getGraphicalAdjustment:function(){return N},getLabelContentHtmlElementId:function(){return b},getLabelLineHtmlElementId:function(){return y}});var r,o=n(1413),a=n(4942),i=n(9439),l=n(2791),s=n(9634),c=n(3413),u=n(3871),d=n(433),f=n(6176),p=n(1579),h=n(184);!function(e){function t(e){var t,n=e.content,r=e.x,s=e.y,m=e.fullKeys,v=e.id,x=(m.rnaComplexIndex,m.rnaMoleculeName),g=m.nucleotideIndex,y=(0,l.createRef)(),b=(0,l.useContext)(c._.Label.Content.OnMouseDownHelper),N=(0,l.useContext)(c._.Label.ClassName),E=(0,l.useContext)(c._.App.SetMouseOverText),C=(0,l.useContext)(c._.RnaMolecule.FirstNucleotideIndex),I=(0,l.useContext)(c._.RnaComplex.Name),S=(0,l.useContext)(c._.Nucleotide.Symbol),_=(0,l.useState)({width:0,height:0}),A=(0,i.Z)(_,2),T=A[0],P=A[1],R=(0,l.useState)({x:0,y:0}),k=(0,i.Z)(R,2),w=k[0],M=k[1],O=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:u.BLACK}),[e.color]),j=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]),L=(0,l.useMemo)((function(){var t;return null!==(t=e.font)&&void 0!==t?t:structuredClone(d.default.DEFAULT)}),[e.font]);return(0,l.useEffect)((function(){var e=y.current.getBBox();P({width:e.width,height:e.height})}),[n,L.size]),(0,l.useEffect)((function(){M({x:-.5*T.width,y:-.25*T.height})}),[T]),(0,h.jsx)("text",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.LABEL_CONTENT),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,I),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,x),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,g+C),t)),{},{id:v,ref:y,transform:"translate(".concat(r,", ").concat(s,") translate(").concat(w.x,", ").concat(w.y,") scale(1 -1)"),className:N+" noselect",fontSize:L.size,fontFamily:L.family,fontWeight:L.weight,fontStyle:L.style,strokeWidth:j,fill:(0,u.toCSS)(O),onMouseDown:function(e){b(e,m),e.preventDefault()},onMouseOver:function(e){E("nucleotide: ".concat(C+g,"\n")+"symbol:     ".concat(S,"\n")+"molecule:   ".concat(x,"\n")+"complex:    ".concat(I,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){E("")},children:n}))}e.Component=t;e.MemoizedComponent=(0,l.memo)(t)}(r||(r={}));var m,v=n(7457);!function(e){function t(e){var t,n=e.fullKeys,r=e.points,s=e.id,d=(0,l.useContext)(c._.Label.Line.Body.OnMouseDownHelper),m=(0,l.useContext)(c._.Label.Line.Endpoint.OnMouseDownHelper),x=(0,l.useContext)(c._.Label.ClassName),g=(0,l.useContext)(c._.App.SetMouseOverText),y=(0,l.useContext)(c._.RnaMolecule.FirstNucleotideIndex),b=(0,l.useContext)(c._.RnaComplex.Name),N=(0,l.useContext)(c._.Nucleotide.Symbol),E=n.nucleotideIndex,C=n.rnaMoleculeName,I=(n.rnaComplexIndex,(0,l.useState)({pathDAttribute:"",polylinePointsAttribute:""})),S=(0,i.Z)(I,2),_=S[0],A=S[1];function T(){for(var e=r[0],t=e,n=new Array,o=1;o<r.length;o++)t=r[o],n.push((0,v.getLineBoundingPath)(e,t)),e=t;A({pathDAttribute:n.join(" "),polylinePointsAttribute:r.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ")})}(0,l.useEffect)(T,[r]);var P=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:u.BLACK}),[e.color]),R=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]);return(0,h.jsxs)("g",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.LABEL_LINE),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,b),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,C),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,E+y),t)),{},{children:[(0,h.jsx)("polyline",{points:_.polylinePointsAttribute,pointerEvents:"none",stroke:(0,u.toCSS)(P),strokeWidth:R,fill:"none"}),r.map((function(e,t){return(0,h.jsx)("circle",{id:s,className:x,pointerEvents:"all",strokeWidth:f.DEFAULT_STROKE_WIDTH,fill:"none",cx:e.x,cy:e.y,r:1,onMouseDown:function(e){m(e,n,t,T)},onMouseOver:function(e){g("nucleotide: ".concat(y+E,"\n")+"symbol:     ".concat(N,"\n")+"molecule:   ".concat(C,"\n")+"complex:    ".concat(b,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){g("")}},t)})),(0,h.jsx)("path",{className:x,pointerEvents:"all",strokeWidth:f.DEFAULT_STROKE_WIDTH,fill:"none",d:_.pathDAttribute,onMouseDown:function(e){d(e,n,T),e.preventDefault()},onMouseOver:function(e){g("nucleotide: ".concat(y+E,"\n")+"symbol:     ".concat(N,"\n")+"molecule:   ".concat(C,"\n")+"complex:    ".concat(b,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){g("")}})]}))}e.Component=t;e.MemoizedComponent=(0,l.memo)(t)}(m||(m={}));var x,g=n(9750);n(3508);function y(e,t,n){return"".concat(e).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(t).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(n).concat(s.HTML_ELEMENT_ID_DELIMITER,"LabelLine")}function b(e,t,n){return"".concat(e).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(t).concat(s.HTML_ELEMENT_ID_DELIMITER).concat(n).concat(s.HTML_ELEMENT_ID_DELIMITER,"LabelContent")}function N(e){return{x:-.5*e.width,y:-.3*e.height}}!function(e){var t=function(e){return e.FIVE_PRIME="5'",e.THREE_PRIME="3'",e.FIVE="5",e.THREE="3",e.A="A",e.C="C",e.G="G",e.U="U",e.N="N",e.a="a",e.c="c",e.g="g",e.n="n",e}({});e.Symbol=t;var n,v=e.symbols=Object.values(t);function x(e){var t,n=e.x,v=e.y,x=e.symbol,y=e.labelContentProps,E=e.labelLineProps,C=e.nucleotideIndex,I=(0,l.useContext)(c._.RnaComplex.Index),S=(0,l.useContext)(c._.RnaComplex.Name),_=(0,l.useContext)(c._.RnaMolecule.Name),A={nucleotideIndex:C,rnaMoleculeName:_,rnaComplexIndex:I},T=(0,l.useContext)(c._.RnaMolecule.FirstNucleotideIndex),P=(0,l.useContext)(c._.App.SetMouseOverText),R=(0,l.useContext)(c._.Nucleotide.OnMouseDownHelper),k=(0,l.useContext)(c._.Nucleotide.LabelsOnlyFlag),w=(0,l.useContext)(c._.App.Settings)[g.pE.PATH_MODE],M=(0,l.useContext)(c._.App.IndicesOfFrozenNucleotides),O=(0,l.useContext)(c._.App.SingularRnaComplexFlag),j=(0,l.useContext)(c._.RnaComplex.SingularRnaMoleculeFlag),L=!1;if(I in M){var D=M[I];if(_ in D)D[_].has(C)&&(L=!0)}var Z=(0,l.useState)({width:0,height:0}),F=(0,i.Z)(Z,2),B=F[0],U=F[1],z=(0,l.createRef)(),W=(0,l.useMemo)((function(){var t;return null!==(t=e.font)&&void 0!==t?t:structuredClone(d.default.DEFAULT)}),[e.font]),G=(0,l.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:u.BLACK}),[e.color]),H=(0,l.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:f.DEFAULT_STROKE_WIDTH}),[e.strokeWidth]),K=(0,l.useMemo)((function(){return N(B)}),[B]);return(0,l.useEffect)((function(){U(z.current.getBBox())}),[x,W]),(0,h.jsxs)("g",{transform:"translate(".concat(n,", ").concat(v,")"),children:[(0,h.jsx)("text",(0,o.Z)((0,o.Z)({},(t={},(0,a.Z)(t,p.SVG_PROPERTY_XRNA_TYPE,p.SvgPropertyXrnaType.NUCLEOTIDE),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_COMPLEX_NAME,S),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,_),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,T),(0,a.Z)(t,p.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX,C+T),t)),{},{ref:z,className:"".concat(s.NUCLEOTIDE_CLASS_NAME," noselect"),transform:"translate(".concat(K.x,", ").concat(K.y,") scale(1, -1)"),fontStyle:W.style,fontWeight:W.weight,fontFamily:W.family,fontSize:W.size,strokeWidth:H,fill:(0,u.toCSS)(G),fillOpacity:w?0:1,pointerEvents:k?"none":"all",onMouseDown:function(e){R(e,A)},onMouseOver:function(e){var t=T+C,n=[];O||n.push("Complex:    ".concat(S)),j||n.push("Molecule:   ".concat(_)),n.push("Nucleotide: ".concat(t),"Symbol:     ".concat(x),"status:     ".concat(L?"LOCKED (cannot move)":"unlocked (can move)")),P(n.join("\n"))},onMouseLeave:function(){P("")},children:x})),(0,h.jsxs)(c._.Nucleotide.Symbol.Provider,{value:x,children:[E&&(0,h.jsx)(m.Component,(0,o.Z)((0,o.Z)({},E),{},{id:b(I,_,C),fullKeys:A})),y&&(0,h.jsx)(r.Component,(0,o.Z)((0,o.Z)({},y),{},{id:b(I,_,C),fullKeys:A}))]})]})}e.isSymbol=function(e){return v.includes(e)},n||(n=e.SequenceConnector||(e.SequenceConnector={}));e.MemoizedComponent=(0,l.memo)(x)}(x||(x={}))},7744:function(e,t,n){"use strict";n.r(t),n.d(t,{DuplicateBasePairKeysHandler:function(){return S},RnaComplex:function(){return E},compareBasePairKeys:function(){return A},compareFullBasePairKeys:function(){return T},insertBasePair:function(){return _},isRelevantBasePairKeySetInPair:function(){return P},selectRelevantBasePairKeys:function(){return R}});var r,o,a,i=n(3433),l=n(1413),s=n(9439),c=n(7762),u=n(4942),d=n(2791),f=n(3413),p=n(7361),h=n(7089),m=n(9287),v=n(1579),x=n(3871),g=n(433),y=n(9750),b=n(7457),N=n(184);!function(e){function t(e){var t=e.start,n=e.end,r=e.breakpoints,o=e.color,a=e.strokeWidth,c=e.opacity,p=e.dashArray,h=e.curvature,m=e.showDirectionArrow,y=e.showBreakpoints,E=void 0===y||y,C=e.arrowColor,I=e.arrowShape,S=void 0===I?"triangle":I,_=e.arrowPosition,A=void 0===_?.5:_,T=e.arrowPositionRight,P=void 0===T?.5:T,R=e.arrowSize,k=e.isORF,w=e.fullKeys,M=e.id,O=(0,d.useContext)(f._.SequenceConnector.Body.OnMouseDownHelper),j=(0,d.useContext)(f._.SequenceConnector.Breakpoint.OnMouseDownHelper),L=(0,d.useContext)(f._.App.SetMouseOverText),D=(0,d.useContext)(f._.RnaMolecule.FirstNucleotideIndex),Z=((0,d.useContext)(f._.RnaComplex.Name),(0,d.useContext)(f._.Nucleotide.AverageBoundingRectHeight));(Number.isNaN(Z)||0===Z)&&(Z=g.default.DEFAULT_SIZE);var F=w.nucleotideIndex,B=w.rnaMoleculeName,U=(w.rnaComplexIndex,null!==a&&void 0!==a?a:1.5),z=null!==r&&void 0!==r?r:[],W=(0,d.useMemo)((function(){var e=z.length>0?z[0]:n,r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o);if(a<10)return t;var i=r/a*5,l=o/a*5;return{x:t.x+i,y:t.y+l}}),[t,n,z]),G=(0,d.useMemo)((function(){var e=z.length>0?z[z.length-1]:t,r=e.x-n.x,o=e.y-n.y,a=Math.sqrt(r*r+o*o);if(a<10)return n;var i=r/a*5,l=o/a*5;return{x:n.x+i,y:n.y+l}}),[t,n,z]),H=[W].concat((0,i.Z)(z),[G]),K=(0,d.useState)(""),V=(0,s.Z)(K,2),q=V[0],X=V[1];function Y(){for(var e=[W].concat((0,i.Z)(z),[G]),t=[],n=0;n<e.length-1;n++)t.push((0,b.getLineBoundingPath)(e[n],e[n+1]));X(t.join(" "))}(0,d.useEffect)((function(){Y()}),[t,n,r]);var Q=(0,d.useMemo)((function(){var e=H;if(e.length<2)return"";var t=1-(null!==h&&void 0!==h?h:0);if(2===e.length||0===(null!==h&&void 0!==h?h:0))return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.slice(1).map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var n="M ".concat(e[0].x," ").concat(e[0].y),r=0;r<e.length-1;r++){var o=e[0===r?r:r-1],a=e[r],i=e[r+1],l=e[r+2]||i,s=(i.x-o.x)*(1-t)/2,c=(i.y-o.y)*(1-t)/2,u=(l.x-a.x)*(1-t)/2,d=(l.y-a.y)*(1-t)/2,f=a.x+s/3,p=a.y+c/3,m=i.x-u/3,v=i.y-d/3;n+=" C ".concat(f," ").concat(p,", ").concat(m," ").concat(v,", ").concat(i.x," ").concat(i.y)}return n}),[W,G,r,h]),$=(0,d.useMemo)((function(){return function(e){var t=H;if(t.length<2)return null;var n=1-(null!==h&&void 0!==h?h:0),r=Math.max(0,Math.min(1,e));if(0===(null!==h&&void 0!==h?h:0)){for(var o=0,a=[],i=0;i<t.length-1;i++){var l=t[i+1].x-t[i].x,s=t[i+1].y-t[i].y;a.push(Math.sqrt(l*l+s*s)),o+=a[a.length-1]}for(var c=o*r,u=0,d=0;d<a.length;d++){if(u+a[d]>=c){var f=a[d]>0?(c-u)/a[d]:0,p=t[d],m=t[d+1];return{x:p.x+(m.x-p.x)*f,y:p.y+(m.y-p.y)*f,angle:180*Math.atan2(m.y-p.y,m.x-p.x)/Math.PI}}u+=a[d]}return{x:t[t.length-1].x,y:t[t.length-1].y,angle:0}}for(var v=[],x=0;x<t.length-1;x++){var g=t[0===x?x:x-1],y=t[x],b=t[x+1],N=t[x+2]||b,E=(b.x-g.x)*(1-n)/2,C=(b.y-g.y)*(1-n)/2,I=(N.x-y.x)*(1-n)/2,S=(N.y-y.y)*(1-n)/2;v.push({p0:y,cp1:{x:y.x+E/3,y:y.y+C/3},cp2:{x:b.x-I/3,y:b.y-S/3},p1:b})}for(var _=[],A=0,T=0,P=v;T<P.length;T++){for(var R=P[T],k=0,w=R.p0.x,M=R.p0.y,O=1;O<=20;O++){var j=O/20,L=j*j,D=L*j,Z=1-j,F=Z*Z,B=F*Z,U=B*R.p0.x+3*F*j*R.cp1.x+3*Z*L*R.cp2.x+D*R.p1.x,z=B*R.p0.y+3*F*j*R.cp1.y+3*Z*L*R.cp2.y+D*R.p1.y;k+=Math.sqrt(Math.pow(U-w,2)+Math.pow(z-M,2)),w=U,M=z}_.push(k),A+=k}for(var W=A*r,G=0,K=0;K<_.length;K++){if(G+_[K]>=W||K===_.length-1){var V=v[K],q=_[K]>0?(W-G)/_[K]:0,X=Math.max(0,Math.min(1,q)),Y=X*X,Q=Y*X,$=1-X,J=$*$,ee=J*$,te=ee*V.p0.x+3*J*X*V.cp1.x+3*$*Y*V.cp2.x+Q*V.p1.x,ne=ee*V.p0.y+3*J*X*V.cp1.y+3*$*Y*V.cp2.y+Q*V.p1.y,re=3*J*(V.cp1.x-V.p0.x)+6*$*X*(V.cp2.x-V.cp1.x)+3*Y*(V.p1.x-V.cp2.x),oe=3*J*(V.cp1.y-V.p0.y)+6*$*X*(V.cp2.y-V.cp1.y)+3*Y*(V.p1.y-V.cp2.y);return{x:te,y:ne,angle:180*Math.atan2(oe,re)/Math.PI}}G+=_[K]}return{x:t[t.length-1].x,y:t[t.length-1].y,angle:0}}}),[H,h]),J=(0,d.useMemo)((function(){return!m||k?null:$(A)}),[m,k,A,$]),ee=(0,d.useMemo)((function(){if(!k)return null;for(var e=0,t=[],n=0;n<H.length-1;n++){var r=H[n+1].x-H[n].x,o=H[n+1].y-H[n].y;t.push(Math.sqrt(r*r+o*o)),e+=t[t.length-1]}var a=.5*e,i=a-5,l=a+5,s=function(e){for(var n=0,r=0;r<t.length;r++){if(n+t[r]>=e){var o=t[r]>0?(e-n)/t[r]:0,a=H[r],i=H[r+1];return{x:a.x+(i.x-a.x)*o,y:a.y+(i.y-a.y)*o,angle:180*Math.atan2(i.y-a.y,i.x-a.x)/Math.PI}}n+=t[r]}var l=H.length-1;return{x:H[l].x,y:H[l].y,angle:180*Math.atan2(H[l].y-H[l-1].y,H[l].x-H[l-1].x)/Math.PI}},c=s(a),u=s(Math.max(0,i)),d=s(Math.min(e,l));return{x:c.x,y:c.y,angle:c.angle,gapStart:u,gapEnd:d,totalLen:e}}),[W,G,z,k,H]),te=(0,d.useMemo)((function(){return k&&ee?{leftPath:"M ".concat(W.x," ").concat(W.y," L ").concat(ee.gapStart.x," ").concat(ee.gapStart.y),rightPath:"M ".concat(ee.gapEnd.x," ").concat(ee.gapEnd.y," L ").concat(G.x," ").concat(G.y)}:{leftPath:"",rightPath:""}}),[k,ee,W,G]),ne=(0,d.useMemo)((function(){if(!k||!ee||0===z.length)return null;for(var e=.5*ee.totalLen,t=e-5,n=e+5,r=[W],o=[],a=0,i=!1,l=!1,s=0;s<H.length-1;s++){var c=H[s],u=H[s+1],d=u.x-c.x,f=u.y-c.y,p=Math.sqrt(d*d+f*f);if(!i&&a+p>=t){var h=p>0?(t-a)/p:0;r.push({x:c.x+d*h,y:c.y+f*h}),i=!0}else i||r.push(u);if(!l&&a+p>=n){var m=p>0?(n-a)/p:0;o.push({x:c.x+d*m,y:c.y+f*m}),l=!0,o.push(u)}else l&&o.push(u);a+=p}return{leftPath:r.length>=2?"M ".concat(r[0].x," ").concat(r[0].y," ")+r.slice(1).map((function(e){return"L ".concat(e.x," ").concat(e.y)})).join(" "):"",rightPath:o.length>=2?"M ".concat(o[0].x," ").concat(o[0].y," ")+o.slice(1).map((function(e){return"L ".concat(e.x," ").concat(e.y)})).join(" "):""}}),[k,ee,z,H,W,G]),re=(0,d.useMemo)((function(){return k?z.length>0&&ne?ne:te:null}),[k,z,te,ne]),oe=(0,d.useMemo)((function(){if(!k||!m||!ee)return null;for(var e=(.5*ee.totalLen-5)*A,t=0,n=0;n<H.length-1;n++){var r=H[n+1].x-H[n].x,o=H[n+1].y-H[n].y,a=Math.sqrt(r*r+o*o);if(t+a>=e){var i=a>0?(e-t)/a:0,l=H[n],s=H[n+1];return{x:l.x+(s.x-l.x)*i,y:l.y+(s.y-l.y)*i,angle:180*Math.atan2(s.y-l.y,s.x-l.x)/Math.PI}}t+=a}return null}),[k,m,ee,A,H]),ae=(0,d.useMemo)((function(){if(!k||!m||!ee)return null;for(var e=.5*ee.totalLen+5,t=e+(ee.totalLen-e)*P,n=0,r=0;r<H.length-1;r++){var o=H[r+1].x-H[r].x,a=H[r+1].y-H[r].y,i=Math.sqrt(o*o+a*a);if(n+i>=t){var l=i>0?(t-n)/i:0,s=H[r],c=H[r+1];return{x:s.x+(c.x-s.x)*l,y:s.y+(c.y-s.y)*l,angle:180*Math.atan2(c.y-s.y,c.x-s.x)/Math.PI}}n+=i}return null}),[k,m,ee,P,H]),ie=null!==o&&void 0!==o?o:x.BLACK,le=p&&""!==p.trim()?p:void 0,se=Math.max(.8*U,1),ce=null!==R&&void 0!==R?R:Math.max(Z*(5/6),2),ue=null!==C&&void 0!==C?C:ie,de=function(e,t){var n=.6*e;switch(t){case"triangle":default:return"".concat(.5*-e,",").concat(-n," ").concat(.5*e,",0 ").concat(.5*-e,",").concat(n);case"chevron":return"".concat(.4*-e,",").concat(-n," ").concat(.4*e,",0 ").concat(.4*-e,",").concat(n);case"line":return"".concat(.3*-e,",").concat(-n," ").concat(.3*e,",0 ").concat(.3*-e,",").concat(n)}},fe="Sequence Connector\n"+"from: ".concat(D+F,"\n")+"to:   ".concat(D+F+1,"\n")+"molecule: ".concat(B,"\n")+"tip: Ctrl+click to add breakpoint, Right-click for properties";return(0,N.jsxs)("g",(0,l.Z)((0,l.Z)({id:M},(0,u.Z)({},v.SVG_PROPERTY_XRNA_TYPE,v.SvgPropertyXrnaType.SEQUENCE_CONNECTOR)),{},{children:[!k&&(0,N.jsx)("path",{d:Q,stroke:(0,x.toCSS)(ie),strokeWidth:U,strokeOpacity:null!==c&&void 0!==c?c:1,strokeDasharray:le||"none",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),k&&re&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("path",{d:re.leftPath,stroke:(0,x.toCSS)(ie),strokeWidth:U,strokeOpacity:null!==c&&void 0!==c?c:1,strokeDasharray:le||"none",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),(0,N.jsx)("path",{d:re.rightPath,stroke:(0,x.toCSS)(ie),strokeWidth:U,strokeOpacity:null!==c&&void 0!==c?c:1,strokeDasharray:le||"none",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]}),(0,N.jsx)("path",{d:q,fill:"none",stroke:"transparent",strokeWidth:Math.max(3*U,6),pointerEvents:"stroke",style:{cursor:"pointer"},onMouseDown:function(e){O(e,w,Y),e.preventDefault()},onMouseOver:function(){return L(fe)},onMouseLeave:function(){return L("")}}),E&&z.map((function(e,t){return(0,N.jsxs)("g",{children:[(0,N.jsx)("circle",{cx:e.x,cy:e.y,r:se,fill:(0,x.toCSS)(ie),fillOpacity:.8,stroke:(0,x.toCSS)(ie),strokeWidth:.3*U,style:{cursor:"move"},pointerEvents:"all",onMouseDown:function(e){j(e,w,t,Y),e.preventDefault()},onMouseOver:function(){return L("Breakpoint ".concat(t+1,"\n")+"tip: Drag to move, Ctrl+click to delete")},onMouseLeave:function(){return L("")}}),(0,N.jsx)("circle",{cx:e.x,cy:e.y,r:Math.max(3*se,4),fill:"transparent",stroke:"none",style:{cursor:"move"},pointerEvents:"all",onMouseDown:function(e){j(e,w,t,Y),e.preventDefault()},onMouseOver:function(){return L("Breakpoint ".concat(t+1,"\n")+"tip: Drag to move, Ctrl+click to delete")},onMouseLeave:function(){return L("")}})]},t)})),J&&!k&&(0,N.jsx)("g",{transform:"translate(".concat(J.x,", ").concat(J.y,") rotate(").concat(J.angle,")"),children:"chevron"===S||"line"===S?(0,N.jsx)("polyline",{points:de(ce,S),fill:"none",stroke:(0,x.toCSS)(ue),strokeWidth:U,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}):(0,N.jsx)("polygon",{points:de(ce,S),fill:(0,x.toCSS)(ue),stroke:"none",fillOpacity:null!==c&&void 0!==c?c:.9,pointerEvents:"none"})}),oe&&(0,N.jsx)("g",{transform:"translate(".concat(oe.x,", ").concat(oe.y,") rotate(").concat(oe.angle,")"),children:"chevron"===S||"line"===S?(0,N.jsx)("polyline",{points:de(ce,S),fill:"none",stroke:(0,x.toCSS)(ue),strokeWidth:U,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}):(0,N.jsx)("polygon",{points:de(ce,S),fill:(0,x.toCSS)(ue),stroke:"none",fillOpacity:null!==c&&void 0!==c?c:.9,pointerEvents:"none"})}),ae&&(0,N.jsx)("g",{transform:"translate(".concat(ae.x,", ").concat(ae.y,") rotate(").concat(ae.angle,")"),children:"chevron"===S||"line"===S?(0,N.jsx)("polyline",{points:de(ce,S),fill:"none",stroke:(0,x.toCSS)(ue),strokeWidth:U,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}):(0,N.jsx)("polygon",{points:de(ce,S),fill:(0,x.toCSS)(ue),stroke:"none",fillOpacity:null!==c&&void 0!==c?c:.9,pointerEvents:"none"})}),ee&&(0,N.jsxs)("g",{transform:"translate(".concat(ee.x,", ").concat(ee.y,") rotate(").concat(ee.angle,")"),children:[(0,N.jsx)("line",{x1:-4,y1:-4,x2:0,y2:4,stroke:(0,x.toCSS)(ie),strokeWidth:U,strokeLinecap:"round",pointerEvents:"none"}),(0,N.jsx)("line",{x1:0,y1:-4,x2:4,y2:4,stroke:(0,x.toCSS)(ie),strokeWidth:U,strokeLinecap:"round",pointerEvents:"none"})]})]}))}e.Component=t;e.MemoizedComponent=(0,d.memo)(t)}(r||(r={})),(o||(o={})).Component=function(e){var t,n=e.firstNucleotideIndex,o=e.nucleotideProps,a=e.nucleotideKeysToRerender,i=(0,d.useContext)(f._.RnaMolecule.Name),p=(0,d.useContext)(f._.RnaComplex.Index),h=(0,d.useContext)(f._.Label.Content.UpdateDefaultStyle),b=(0,d.useContext)(f._.App.Settings),E=b[y.pE.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE],C=b[y.pE.CONTOUR_LINE_WIDTH],I=b[y.pE.PATH_MODE],S=b[y.pE.PATH_LINE_WIDTH],_=(0,d.useContext)(f._.App.IndicesOfFrozenNucleotides),A=(0,d.useMemo)((function(){var e=Object.entries(o).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1],o=Number.parseInt(n),a=r;return a.key=o,a.nucleotideIndex=o,a}));return e.sort((function(e,t){return e.nucleotideIndex-t.nucleotideIndex})),e}),[o,a]),T=(0,d.useMemo)((function(){if(!(p in _))return[];var e=_[p];if(!(i in e))return[];var t,n=e[i],r=[],o=[],a=(0,c.Z)(A);try{for(a.s();!(t=a.n()).done;){var l=t.value;n.has(l.nucleotideIndex)?o.push({nucleotideIndex:l.nucleotideIndex,x:l.x,y:l.y,font:l.font}):o.length>0&&(r.push(o),o=[])}}catch(s){a.e(s)}finally{a.f()}return o.length>0&&r.push(o),r.map((function(e){var t,n,r=null!==(t=null===(n=e[0].font)||void 0===n?void 0:n.size)&&void 0!==t?t:g.default.DEFAULT_SIZE,o="string"===typeof r?(0,g.parseFontSize)(r):r,a=Math.max(o/12,.5);if(1===e.length){var i=e[0],l=o/2*1.3;return{type:"circle",x:i.x,y:i.y,radius:l,strokeWidth:a,indices:[i.nucleotideIndex]}}var u,d=o/2*1.3,f=[],p=(0,c.Z)(e);try{for(p.s();!(u=p.n()).done;)for(var h=u.value,m=0;m<8;m++){var v=m/8*2*Math.PI;f.push({x:h.x+d*Math.cos(v),y:h.y+d*Math.sin(v)})}}catch(s){p.e(s)}finally{p.f()}var x=function(e){if(e.length<3)return e;for(var t=e[0],n=1;n<e.length;n++)(e[n].y<t.y||e[n].y===t.y&&e[n].x<t.x)&&(t=e[n]);for(var r=e.slice().sort((function(e,n){var r=Math.atan2(e.y-t.y,e.x-t.x),o=Math.atan2(n.y-t.y,n.x-t.x);return r!==o?r-o:Math.hypot(e.x-t.x,e.y-t.y)-Math.hypot(n.x-t.x,n.y-t.y)})),o=[r[0],r[1]],a=2;a<r.length;a++){for(;o.length>1;){var i=o[o.length-2],l=o[o.length-1],s=r[a];if((l.x-i.x)*(s.y-i.y)-(l.y-i.y)*(s.x-i.x)>0)break;o.pop()}o.push(r[a])}return o}(f);if(x.length<3){var y=e[0];return{type:"circle",x:y.x,y:y.y,radius:d,strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}for(var b="M ".concat(x[0].x," ").concat(x[0].y),N=1;N<x.length;N++)b+=" L ".concat(x[N].x," ").concat(x[N].y);return{type:"path",path:b+=" Z",strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}))}),[A,_,p,i]);return(0,d.useEffect)((function(){for(var e=new Array,t=new Array,n=0,r=0,a=0,s=Object.values(o);a<s.length;a++){var u=s[a].labelContentProps;if(void 0!==u){var d=u.font,f=u.color;if(void 0!==d){r++,"string"===typeof d.size?n+=(0,g.parseFontSize)(d.size):n+=d.size;var m,v=!1,y=(0,c.Z)(t);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(g.PartialFont.areEqual(d,b.font)){b.count++,v=!0;break}}}catch(O){y.e(O)}finally{y.f()}v||t.push({font:d,count:1})}if(void 0!==f){var N,E=!1,C=(0,c.Z)(e);try{for(C.s();!(N=C.n()).done;){var I=N.value;if((0,x.areEqual)(f,I.color)){I.count++,E=!0;break}}}catch(O){C.e(O)}finally{C.f()}E||e.push({color:f,count:1})}}}for(var S={font:structuredClone(g.default.DEFAULT),count:0},_=0,A=t;_<A.length;_++){var T=A[_];T.count>S.count&&(S=T)}for(var P={color:structuredClone(x.BLACK),count:0},R=0,k=e;R<k.length;R++){var w=k[R];w.count<P.count&&(P=w)}var M=0===r?g.default.DEFAULT_SIZE:n/r;h(p,i,{color:P.color,font:(0,l.Z)((0,l.Z)({},S.font),{},{size:M})})}),[p,i,o]),(0,N.jsxs)("g",(0,l.Z)((0,l.Z)({},(t={},(0,u.Z)(t,v.SVG_PROPERTY_XRNA_TYPE,v.SvgPropertyXrnaType.RNA_MOLECULE),(0,u.Z)(t,v.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,i),(0,u.Z)(t,v.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,n),t)),{},{children:[E&&(0,N.jsx)("polyline",{points:A.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" "),pointerEvents:"none",stroke:"var(--color-text)",strokeWidth:C,fill:"none"}),I&&!E&&function(){var e,t=function(e,t){if(e.length<2)return"";if(2===e.length||0===t)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var n=1-t,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,c=n,u=(l.x-a.x)*(1-c)/2,d=(l.y-a.y)*(1-c)/2,f=(s.x-i.x)*(1-c)/2,p=(s.y-i.y)*(1-c)/2,h=i.x+u/3,m=i.y+d/3,v=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(m,", ").concat(v," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r},n=[],r=null,o=(0,c.Z)(A);try{for(o.s();!(e=o.n()).done;){var a,i,l=e.value,s=l.pathColor?"rgb(".concat(l.pathColor.red,", ").concat(l.pathColor.green,", ").concat(l.pathColor.blue,")"):"var(--color-text)",u=null!==(a=l.pathLineWidth)&&void 0!==a?a:S,d=null!==(i=l.pathCurvature)&&void 0!==i?i:0;r&&r.color===s&&r.width===u&&r.curvature===d?r.points.push({x:l.x,y:l.y}):(r&&r.points.length>0&&(r.points.push({x:l.x,y:l.y}),n.push(r)),r={points:[{x:l.x,y:l.y}],color:s,width:u,curvature:d})}}catch(f){o.e(f)}finally{o.f()}return r&&r.points.length>0&&n.push(r),(0,N.jsx)(N.Fragment,{children:n.map((function(e,n){return(0,N.jsx)("path",{d:t(e.points,e.curvature),pointerEvents:"none",stroke:e.color,strokeWidth:e.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round","data-xrna_type":"path"},"path-segment-".concat(n))}))})}(),!E&&A.length>0&&function(){var e=function(e,t){if(e.length<2)return"";if(2===e.length||0===t)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var n=1-t,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,c=n,u=(l.x-a.x)*(1-c)/2,d=(l.y-a.y)*(1-c)/2,f=(s.x-i.x)*(1-c)/2,p=(s.y-i.y)*(1-c)/2,h=i.x+u/3,m=i.y+d/3,v=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(m,", ").concat(v," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r}(A.map((function(e){return{x:e.x,y:e.y}})),.5);return(0,N.jsx)("path",{d:e,pointerEvents:"none",stroke:"rgb(0, 0, 0)",strokeWidth:.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",visibility:"hidden","data-xrna_type":"centerline"})}(),!E&&(0,N.jsxs)(f._.RnaMolecule.FirstNucleotideIndex.Provider,{value:n,children:[A.map((function(e){return(0,d.createElement)(m.Nucleotide.MemoizedComponent,e)})),A.map((function(e){var t=e.sequenceConnectorToNext,n=e.nucleotideIndex;if(!t||t.deleted)return null;var a=o[n+1];return a?(0,N.jsx)(r.MemoizedComponent,(0,l.Z)({id:"".concat(p,"|").concat(i,"|").concat(n,"|SequenceConnector"),start:{x:e.x,y:e.y},end:{x:a.x,y:a.y},fullKeys:{rnaComplexIndex:p,rnaMoleculeName:i,nucleotideIndex:n}},t),"".concat(n,"-connector")):null}))]}),!E&&T.map((function(e,t){return"circle"===e.type?(0,N.jsx)("circle",{cx:e.x,cy:e.y,r:e.radius,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(t)):(0,N.jsx)("path",{d:e.path,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(t))}))]}))},function(e){var t=e.TEXT_ANNOTATION_CLASS_NAME="text-annotation";function n(e){var n,r,o,a=e.id,i=e.content,c=e.x,p=e.y,h=(0,d.createRef)(),m=(0,d.useContext)(f._.TextAnnotation.OnMouseDownHelper),y=(0,d.useContext)(f._.App.SetMouseOverText),b=(0,d.useContext)(f._.RnaComplex.Index),E=(0,d.useState)({width:0,height:0}),C=(0,s.Z)(E,2),I=C[0],S=C[1],_=(0,d.useState)({x:0,y:0}),A=(0,s.Z)(_,2),T=A[0],P=A[1],R=(0,d.useMemo)((function(){var t;return null!==(t=e.color)&&void 0!==t?t:x.BLACK}),[e.color]),k=(0,d.useMemo)((function(){return e.strokeColor}),[e.strokeColor]),w=(0,d.useMemo)((function(){var t;return null!==(t=e.strokeWidth)&&void 0!==t?t:0}),[e.strokeWidth]),M=(0,d.useMemo)((function(){var t;return null!==(t=e.strokeOpacity)&&void 0!==t?t:1}),[e.strokeOpacity]),O=(0,d.useMemo)((function(){var t;return null!==(t=e.font)&&void 0!==t?t:structuredClone(g.default.DEFAULT)}),[e.font]),j=(0,d.useMemo)((function(){var t;return null!==(t=e.opacity)&&void 0!==t?t:1}),[e.opacity]),L=(0,d.useMemo)((function(){var t;return null!==(t=e.rotation)&&void 0!==t?t:0}),[e.rotation]),D=void 0!==k&&w>0,Z=e.backgroundColor,F=null!==(n=e.padding)&&void 0!==n?n:4,B=e.borderColor,U=null!==(r=e.borderWidth)&&void 0!==r?r:1,z=null!==(o=e.borderRadius)&&void 0!==o?o:2;(0,d.useEffect)((function(){if(h.current){var e=h.current.getBBox();S({width:e.width,height:e.height})}}),[i,O.size,O.family]),(0,d.useEffect)((function(){P({x:-.5*I.width,y:-.25*I.height})}),[I]);var W=void 0!==Z,G=void 0!==B;return(0,N.jsxs)("g",(0,l.Z)((0,l.Z)({transform:"translate(".concat(c,", ").concat(p,") rotate(").concat(-L,")"),style:{cursor:"move"}},(0,u.Z)({},v.SVG_PROPERTY_XRNA_TYPE,v.SvgPropertyXrnaType.TEXT_ANNOTATION)),{},{children:[(W||G)&&(0,N.jsx)("rect",{x:T.x-F,y:-I.height-T.y-F,width:I.width+2*F,height:I.height+2*F,fill:W?(0,x.toCSS)(Z):"none",stroke:G?(0,x.toCSS)(B):"none",strokeWidth:G?U:0,rx:z,ry:z,opacity:j,transform:"scale(1, -1)"}),(0,N.jsx)("text",{ref:h,className:"".concat(t," noselect"),transform:"translate(".concat(T.x,", ").concat(T.y,") scale(1, -1)"),fontSize:O.size,fontFamily:O.family,fontWeight:O.weight,fontStyle:O.style,stroke:D?(0,x.toCSS)(k):"none",strokeWidth:D?w:0,strokeOpacity:M,fill:(0,x.toCSS)(R),opacity:j,pointerEvents:"all",onMouseDown:function(e){m(e,b,a),e.preventDefault()},onMouseOver:function(){y('Text: "'.concat(i.substring(0,20)).concat(i.length>20?"...":"",'"\n')+"Position: (".concat(c.toFixed(1),", ").concat(p.toFixed(1),")\n")+"tip: Drag to move, Ctrl+click to delete")},onMouseLeave:function(){y("")},children:i})]}))}e.Component=n;e.MemoizedComponent=(0,d.memo)(n)}(a||(a={}));var E,C=n(6176),I=(0,u.Z)({},h.default.Type.WOBBLE,1.15),S=function(e){return e[e.DO_NOTHING=0]="DO_NOTHING",e[e.THROW_ERROR=1]="THROW_ERROR",e[e.DELETE_PREVIOUS_MAPPING=2]="DELETE_PREVIOUS_MAPPING",e}({});function _(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:S.DO_NOTHING,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=e.basePairs,d=u[t],f=null===d||void 0===d?void 0:d[n];if(Array.isArray(f)){var p=f.find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}));if(void 0!==p){var m,v;p.basePairType=i.basePairType;var x=null===(m=u[r])||void 0===m||null===(v=m[o])||void 0===v?void 0:v.find((function(e){return e.rnaMoleculeName===t&&e.nucleotideIndex===n}));void 0!==x&&(x.basePairType=i.basePairType)}return[{keys0:{rnaMoleculeName:t,nucleotideIndex:n},keys1:{rnaMoleculeName:r,nucleotideIndex:o}}]}void 0!==d&&Object.prototype.hasOwnProperty.call(d,n)&&delete d[n];var g=new Array,y=[],b={rnaMoleculeName:t,nucleotideIndex:n,basePairedRnaMoleculeName:r,basePairedNucleotideIndex:o,basePairType:i.basePairType},N={rnaMoleculeName:r,nucleotideIndex:o,basePairedRnaMoleculeName:t,basePairedNucleotideIndex:n,basePairType:i.basePairType};delete(i=structuredClone(i)).basePairType,void 0!==b.basePairType&&h.default.isDirectedType(b.basePairType)&&(N.basePairType=h.default.reverseDirectedTypeMap[b.basePairType]);for(var E=0,C=[b,N];E<C.length;E++){var I=C[E],_=I.rnaMoleculeName,T=I.nucleotideIndex,P=I.basePairedRnaMoleculeName,R=I.basePairedNucleotideIndex,k=I.basePairType;_ in u||(u[_]={});var w=u[_];if(T in w){var M,O=w[T],j=(0,c.Z)(O);try{for(j.s();!(M=j.n()).done;){var L=M.value;switch(a){case S.DO_NOTHING:break;case S.DELETE_PREVIOUS_MAPPING:var D=[{rnaMoleculeName:_,nucleotideIndex:T},L].sort(A),Z=(0,s.Z)(D,2),F=Z[0],B=Z[1];g.push({keys0:F,keys1:B});var U=u[L.rnaMoleculeName];U&&delete U[L.nucleotideIndex];break;case S.THROW_ERROR:throw"Duplicate base-pair keys were found within this RNA complex. This is not allowed."}}}catch(q){j.e(q)}finally{j.f()}}y.push({basePairsPerRnaMolecule:w,nucleotideIndex:T,mappedBasePairInformation:(0,l.Z)((0,l.Z)({rnaMoleculeName:P,nucleotideIndex:R},i),{},{basePairType:k})})}for(var z=0,W=y;z<W.length;z++){var G=W[z],H=G.basePairsPerRnaMolecule,K=G.nucleotideIndex,V=G.mappedBasePairInformation;K in H||(H[K]=[]),H[K].push(V)}return g}function A(e,t){return e.rnaMoleculeName.localeCompare(t.rnaMoleculeName)||e.nucleotideIndex-t.nucleotideIndex}function T(e,t){return A(e.keys0,t.keys0)||A(e.keys1,t.keys1)}function P(e,t){return A(e,t)<=0}function R(e,t){return P(e,t)?e:t}!function(e){function t(e){var t=e.keys0,n=e.keys1;return"#".concat(t.nucleotideIndex," in ").concat(t.rnaMoleculeName," basepaired to #").concat(n.nucleotideIndex," in ").concat(n.rnaMoleculeName)}e.Component=function(e){var n,m=e.name,x=e.rnaMoleculeProps,g=e.basePairs,y=e.nucleotideKeysToRerenderPerRnaComplex,E=e.basePairKeysToRerenderPerRnaComplex,S=e.basePairUpdateTrigger,_=(0,d.useContext)(f._.RnaComplex.Index),R=(0,d.useContext)(f._.BasePair.DataToEditPerRnaComplex),k=(0,d.useContext)(f._.BasePair.AverageDistances),w=(0,d.useContext)(f._.BasePair.UpdateAverageDistances),M=Object.entries(x),O=(0,d.useMemo)((function(){var e=new Array;return Object.entries(g).forEach((function(n){var r=(0,s.Z)(n,2),o=r[0],a=r[1],i=x[o];Object.entries(a).forEach((function(n){var r,a=(0,s.Z)(n,2),l=a[0],u=a[1],d=Number.parseInt(l),f={rnaMoleculeName:o,nucleotideIndex:d},p=(0,c.Z)(u);try{for(p.s();!(r=p.n()).done;){var v=r.value;if(P(f,v)){var g=i.nucleotideProps[d],y=x[v.rnaMoleculeName],b=y.nucleotideProps[v.nucleotideIndex];void 0===v.basePairType&&(v.basePairType=(0,h.getBasePairType)(g.symbol,b.symbol)),e.push({key:t({keys0:f,keys1:v}),mappedBasePair:v,position0:g,position1:b,rnaComplexIndex:_,rnaComplexName:m,rnaMoleculeName0:o,nucleotideIndex0:d,formattedNucleotideIndex0:d+i.firstNucleotideIndex,rnaMoleculeName1:v.rnaMoleculeName,nucleotideIndex1:v.nucleotideIndex,formattedNucleotideIndex1:v.nucleotideIndex+y.firstNucleotideIndex,updateTrigger:0})}}}catch(N){p.e(N)}finally{p.f()}}))})),e.sort((function(e,t){return T({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},{keys0:{rnaMoleculeName:t.rnaMoleculeName0,nucleotideIndex:t.nucleotideIndex0},keys1:{rnaMoleculeName:t.rnaMoleculeName1,nucleotideIndex:t.nucleotideIndex1}})})),e}),[g,S]),j=(0,d.useMemo)((function(){for(var e=0,t=0,n=0,r=Object.keys(g);n<r.length;n++)for(var o=r[n],a=g[o],i=0,l=Object.keys(a);i<l.length;i++){var s,u=l[i],d=a[Number.parseInt(u)],f=(0,c.Z)(d);try{for(f.s();!(s=f.n()).done;){var p=s.value.strokeWidth;void 0!==p&&(e++,t+=p)}}catch(h){f.e(h)}finally{f.f()}}return 0===e?C.DEFAULT_STROKE_WIDTH:t/e}),[g]),L=(0,d.useMemo)((function(){var e=(0,i.Z)(O);if(void 0!==R){var n,r=(0,c.Z)(R.delete);try{var o=function(){var t=n.value;t.keys0,t.keys1;(0,b.sortedArraySplice)(e,(function(e){return T({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},t)}),1,[],b.HandleQueryNotFound.DO_NOTHING)};for(r.s();!(n=r.n()).done;)o()}catch(w){r.e(w)}finally{r.f()}var a,s=(0,c.Z)(R.add);try{var u=function(){var n,r=a.value,o=r.keys0,i=r.keys1,l=o.rnaMoleculeName,s=o.nucleotideIndex,c=null===(n=g[l])||void 0===n?void 0:n[s];if(!c)return"continue";var u=c.find((function(e){return e.rnaMoleculeName===i.rnaMoleculeName&&e.nucleotideIndex===i.nucleotideIndex}));if(!u)return"continue";if(P(o,i)){var d=x[l],f=d.nucleotideProps[s],p=x[i.rnaMoleculeName],v=p.nucleotideProps[i.nucleotideIndex];void 0===u.basePairType&&(u.basePairType=(0,h.getBasePairType)(f.symbol,v.symbol));var y={mappedBasePair:u,position0:f,position1:v,rnaComplexIndex:_,rnaComplexName:m,rnaMoleculeName0:l,nucleotideIndex0:s,formattedNucleotideIndex0:s+d.firstNucleotideIndex,rnaMoleculeName1:i.rnaMoleculeName,nucleotideIndex1:i.nucleotideIndex,formattedNucleotideIndex1:i.nucleotideIndex+p.firstNucleotideIndex,key:t(r)};(0,b.sortedArraySplice)(e,(function(e){return T({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},r)}),0,[y],b.HandleQueryNotFound.ADD)}};for(s.s();!(a=s.n()).done;)u()}catch(w){s.e(w)}finally{s.f()}}var d,f=[],p={},v=(0,c.Z)(E);try{for(v.s();!(d=v.n()).done;){var y=d.value,N=y.rnaMoleculeName,C=y.nucleotideIndex;N in p&&p[N].has(C)||(f.push(y),N in p||(p[N]=new Set),p[N].add(C))}}catch(w){v.e(w)}finally{v.f()}for(var I=function(){var t=k[S],n=(0,b.binarySearch)(e,(function(e){return A({rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},t)}));if(null!==n){n.arrayIndex;for(var r=n.arrayIndex;r>=0;r--){var o=e[r];if(o.rnaMoleculeName0!==n.arrayEntry.rnaMoleculeName0||o.nucleotideIndex0!==n.arrayEntry.nucleotideIndex0)break;e[r]=(0,l.Z)((0,l.Z)({},o),{},{updateTrigger:Math.random()})}for(var a=n.arrayIndex;a<e.length;a++){var i=e[a];if(i.rnaMoleculeName0!==n.arrayEntry.rnaMoleculeName0||i.nucleotideIndex0!==n.arrayEntry.nucleotideIndex0)break;e[a]=(0,l.Z)((0,l.Z)({},i),{},{updateTrigger:Math.random()})}}},S=0,k=f;S<k.length;S++)I();return(0,i.Z)(e)}),[O,R,E]),D=(0,d.useMemo)((function(){return 1===M.length}),[M]);return(0,d.useEffect)((function(){var e,t={},n=(0,c.Z)(h.default.types);try{for(n.s();!(e=n.n()).done;){t[e.value]={count:0,distanceSum:0,distances:[]}}}catch(fe){n.e(fe)}finally{n.f()}for(var r=0,o=0,a=0,i=Object.entries(g);a<i.length;a++)for(var l=(0,s.Z)(i[a],2),u=l[0],d=l[1],f=0,m=Object.entries(d);f<m.length;f++){var v,y=(0,s.Z)(m[f],2),N=y[0],E=y[1],C=(0,c.Z)(E);try{for(C.s();!(v=C.n()).done;){var S,A=v.value,T=Number.parseInt(N),P=x[u].nucleotideProps[T],R=x[A.rnaMoleculeName].nucleotideProps[A.nucleotideIndex],k=(0,p.distance)(P,R);o+=k,r++;var M=t[null!==(S=A.basePairType)&&void 0!==S?S:(0,h.getBasePairType)(P.symbol,R.symbol)];M.count++,M.distanceSum+=k,M.distances.push(k)}}catch(fe){C.e(fe)}finally{C.f()}}for(var O=0,j=0,L={0:{nucleotideIndex:NaN,rnaMoleculeName:""},1:{nucleotideIndex:NaN,rnaMoleculeName:""},center:{x:NaN,y:NaN}},D=0,Z=Object.entries(g);D<Z.length;D++){var F,B=(0,s.Z)(Z[D],2),U=B[0],z=B[1],W=Object.entries(z).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),basePairsPerNucleotide:r}})),G=x[U],H=(0,c.Z)(W);try{for(H.s();!(F=H.n()).done;)for(var K=F.value,V=K.nucleotideIndex,q=K.basePairsPerNucleotide,X=0;X<q.length;X++){var Y=q[X],Q=G.nucleotideProps[V],$=x[Y.rnaMoleculeName].nucleotideProps[Y.nucleotideIndex],J={0:{nucleotideIndex:V,rnaMoleculeName:U},1:Y,center:(0,p.scaleUp)((0,p.add)(Q,$),.5)},ee=J[0].rnaMoleculeName===L[0].rnaMoleculeName&&J[1].rnaMoleculeName===L[1].rnaMoleculeName&&Math.abs(J[0].nucleotideIndex-L[0].nucleotideIndex)<=1&&Math.abs(J[1].nucleotideIndex-L[1].nucleotideIndex)<=1;ee&&(O+=(0,p.distance)(J.center,L.center),j++),(ee||X==q.length-1)&&(L=J)}}catch(fe){H.e(fe)}finally{H.f()}}var te,ne=o/(12*r),re={},oe=(0,c.Z)(h.default.types);try{for(oe.s();!(te=oe.n()).done;){var ae=te.value,ie=t[ae];re[ae]=(0,b.median)(ie.distances)}}catch(fe){oe.e(fe)}finally{oe.f()}var le=re[h.default.Type.CANONICAL];if(!Number.isNaN(le)){var se,ce=(0,c.Z)(h.default.types);try{for(ce.s();!(se=ce.n()).done;){var ue=se.value;if(Number.isNaN(re[ue])){var de=le;ue in I&&(de*=I[ue]),re[ue]=de}}}catch(fe){ce.e(fe)}finally{ce.f()}}w(_,{radius:ne,distances:re,helixDistance:O/j})}),[_,g]),_ in k?k[_].radius:f._.BasePair.DEFAULT_RADIUS,(0,N.jsx)("g",(0,l.Z)((0,l.Z)({},(n={},(0,u.Z)(n,v.SVG_PROPERTY_XRNA_TYPE,v.SvgPropertyXrnaType.RNA_COMPLEX),(0,u.Z)(n,v.SVG_PROPERTY_XRNA_COMPLEX_NAME,m),n)),{},{children:(0,N.jsx)(f._.RnaComplex.Name.Provider,{value:m,children:(0,N.jsx)(f._.RnaComplex.SingularRnaMoleculeFlag.Provider,{value:D,children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("g",{children:(0,N.jsx)(f._.BasePair.AverageStrokeWidth.Provider,{value:j,children:L.map((function(e){return(0,N.jsx)(h.default.MemoizedComponent,(0,l.Z)({},e))}))})}),M.map((function(e){var t,n=(0,s.Z)(e,2),r=n[0],a=n[1];return(0,N.jsx)(f._.RnaMolecule.Name.Provider,{value:r,children:(0,N.jsx)(o.Component,(0,l.Z)((0,l.Z)({},a),{},{nucleotideKeysToRerender:null!==(t=y[r])&&void 0!==t?t:[]}),r)},r)})),M.map((function(e){for(var t=(0,s.Z)(e,2),n=t[0],o=t[1],a=[],i=0,c=Object.entries(o.nucleotideProps);i<c.length;i++){var u,d=(0,s.Z)(c[i],2),f=d[0],p=d[1],h=Number(f),m=p.sequenceConnectorToNext;if(null!==m&&void 0!==m&&m.targetMoleculeName){var v=x[m.targetMoleculeName];if(v){var g=null!==(u=m.targetNucleotideIndex)&&void 0!==u?u:0,y=v.nucleotideProps[g];y&&a.push((0,N.jsx)(r.MemoizedComponent,(0,l.Z)({id:"".concat(_,"|").concat(n,"|").concat(h,"|InterMolConnector"),start:{x:p.x,y:p.y},end:{x:y.x,y:y.y},fullKeys:{rnaComplexIndex:_,rnaMoleculeName:n,nucleotideIndex:h}},m),"".concat(n,"-").concat(h,"-inter-mol-connector")))}}}return a})),e.textAnnotations&&Object.entries(e.textAnnotations).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,N.jsx)(a.MemoizedComponent,(0,l.Z)({},r),n)}))]})})})}))}}(E||(E={}))},4914:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var r,o,a=n(1413),i=n(3433),l=n(7762),s=n(2791),c=n(6768),u=n(3413),d=n(9750),f=n(9287),p=n(184);(o=r||(r={})).Component=function(e){var t=(0,s.useContext)(u._.App.Settings),n=t[d.pE.USE_DEGREES],r=t[d.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],o=(0,s.useMemo)((function(){var t=void 0,n=e.onUpdatePositions;if(r){t=[];var o,a=new Array,s=(0,l.Z)(e.positions);try{for(s.s();!(o=s.n()).done;){var c=o.value;if("symbol"in c&&"string"===typeof c.symbol&&f.Nucleotide.isSymbol(c.symbol)){var u,d=c,p=d.labelLineProps,h=d.labelContentProps;void 0!==h&&t.push(h),void 0!==p&&(a.push(p),(u=t).push.apply(u,(0,i.Z)(p.points)))}}}catch(m){s.e(m)}finally{s.f()}n=function(t){for(var n=0,r=a;n<r.length;n++){var o=r[n];o.points=(0,i.Z)(o.points)}e.onUpdatePositions(t)}}return{relativePositions:t,onUpdatePositions:n}}),[r,e.positions,e.onUpdatePositions]),h=o.relativePositions,m=o.onUpdatePositions;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,p.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#555",marginBottom:2},children:"Position"}),(0,p.jsx)(c.U.Component,(0,a.Z)((0,a.Z)({},e),{},{useDegreesFlag:n,relativePositions:h,onUpdatePositions:m}))]})})},o.Simplified=function(e){var t=(0,s.useContext)(u._.App.Settings),n=t[d.pE.USE_DEGREES],r=t[d.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],o=(0,s.useMemo)((function(){var t=void 0,n=e.onUpdatePositions;if(r){t=[];var o,a=new Array,s=(0,l.Z)(e.positions);try{for(s.s();!(o=s.n()).done;){var c=o.value;if("symbol"in c&&"string"===typeof c.symbol&&f.Nucleotide.isSymbol(c.symbol)){var u,d=c,p=d.labelLineProps,h=d.labelContentProps;void 0!==h&&t.push(h),void 0!==p&&(a.push(p),(u=t).push.apply(u,(0,i.Z)(p.points)))}}}catch(m){s.e(m)}finally{s.f()}n=function(t){for(var n=0,r=a;n<r.length;n++){var o=r[n];o.points=(0,i.Z)(o.points)}e.onUpdatePositions(t)}}return{relativePositions:t,onUpdatePositions:n}}),[r,e.positions,e.onUpdatePositions]),h=o.relativePositions,m=o.onUpdatePositions;return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,p.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#555",marginBottom:2},children:"Position"}),(0,p.jsx)(c.U.Simplified,(0,a.Z)((0,a.Z)({},e),{},{useDegreesFlag:n,relativePositions:h,onUpdatePositions:m}))]})})}},8161:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var r,o=n(4942),a=n(3433),i=n(1413),l=n(7762),s=n(9439),c=n(2791),u=n(3413),d=n(7744),f=n(7089),p=n(9750),h=n(1702),m=n(7457),v=n(7361),x=n(920),g=n(6176),y=n(184);!function(e){var t,n=12,r=!1,b=function(e){return e.TABLE_BASED="Table-based",e.TEXT_BASED="Text-based",e}({});e.EditorType=b;var N=Object.values(b);e.isEditorType=function(e){return N.includes(e)};var E,C=e.TextBasedEditor=(0,c.forwardRef)((function(e,t){var r=e.rnaComplexProps,o=e.setBasePairs,a=e.approveBasePairs,i=e.initialBasePairs,l=e.defaultRnaComplexIndex,u=e.defaultRnaMoleculeName0,d=e.defaultRnaMoleculeName1,p=(0,c.useState)(""),h=(0,s.Z)(p,2),m=h[0],v=h[1],x=(0,c.useState)(0),g=(0,s.Z)(x,2),b=g[0],N=g[1];function E(e){N(Math.min(e,5))}var C=(0,c.useMemo)((function(){return Object.values(r).map((function(e){return e.name}))}),[r]);return(0,c.useEffect)((function(){if(void 0!==i){var e=i.map((function(e){var t=e.rnaComplexIndex,n=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1,l=e.length,s=e.type,c=[null!==a&&void 0!==a?a:"#",null!==i&&void 0!==i?i:"#",null!==l&&void 0!==l?l:"#"];if(void 0===t){var u=void 0===n,d=void 0===o;u&&!d?c.push('"'+o+'"'):!u&&d?c.push('"'+n+'"'):u||d||c.push('"'+n+'"','"'+o+'"')}else c.push('"'+(null!==n&&void 0!==n?n:"")+'"','"'+(null!==o&&void 0!==o?o:"")+'"','"'+r[t].name+'"'),void 0!==s&&c.push('"'.concat(s,'"'));return c.join(" ")})).join("\n");v(e),E(i.length+1)}else v("")}),[i]),(0,c.useImperativeHandle)(t,(function(){return{updateAll:function(){var e=m.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));try{var t=e.map((function(e,t){var n=e.match(/^(-?\d+)\s+(-?\d+)\s+(\d+)(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?$/);if(null===n)throw"line #".concat(t+1," had an unrecognized format.");var o=n.slice(1).filter((function(e){return void 0!==e&&e.length>0}));if(o.length<3)throw"Too few arguments were found in line #".concat(t+1);var a=o[0],i=Number.parseInt(a),s="The provided nucleotide index #1 in line #".concat(t+1," is not an integer.");if(!/^-?\d+$/.test(a))throw s;if(Number.isNaN(i))throw s;var c=o[1],p=Number.parseInt(c),h="The provided nucleotide index #2 in line #".concat(t+1," is not an integer.");if(!/^-?\d+$/.test(c))throw h;if(Number.isNaN(p))throw h;var m=o[2],v="The provided helix length in line #".concat(t+1," is not a non-negative integer.");if(!/^\d+$/.test(m))throw v;var x,g=Number.parseInt(m);if(Number.isNaN(g))throw v;function y(e){var t=/^"(.*)"$/.exec(e);return null!==t&&(e=t[1]),e}if(o.length<6){if(void 0===l)throw"No name was provided for the RNA complex in line #".concat(t+1,".");x=l}else{var b=y(o[5]);if(-1===(x=C.findIndex((function(e){return b===e}))))throw"The provided RNA complex name in line #".concat(t+1," does not match any existing RNA complex's name.")}var N,E,I=r[x];if(o.length<4){if(void 0===u)throw"No name was provided for RNA-molecule #1 in line #".concat(t+1,".");N=u}else N=y(o[3]);if(!(N in I.rnaMoleculeProps))throw"The name provided for RNA molecule #1 in line #".concat(t+1," does not match any existing RNA molecule's name.");if(o.length<5){if(void 0===d)throw"No name was provided for RNA-molecule #2 in line #".concat(t+1,".");E=d}else E=y(o[4]);if(!(E in I.rnaMoleculeProps))throw"The name provided for RNA molecule #2 in line #".concat(t+1," does not match any existing RNA molecule's name.");for(var S=I.rnaMoleculeProps[N],_=I.rnaMoleculeProps[E],A=0;A<g;A++){var T=i+A,P=p-A;if(!(T in S.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(T,".");if(!(P in _.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(P,".")}var R=void 0,k=o[6];if(void 0!==k&&(k=y(k).toLocaleLowerCase(),void 0===(R=f.default.types.find((function(e){return e.toLocaleLowerCase()===k})))))throw'The provided base-pair type "'.concat(R,'" in line #').concat(t+1," was not recognized.");return{rnaComplexIndex:x,rnaMoleculeName0:N,rnaMoleculeName1:E,nucleotideIndex0:i,nucleotideIndex1:p,length:g,type:R}}));a(t),o(t)}catch(n){if("string"===typeof n)return void alert(n);throw n}}}})),(0,y.jsx)("textarea",{style:{width:"99%",height:"".concat(n*b,"px"),fontSize:"".concat(n,"px")},value:m,onInput:function(e){var t,n;E((null!==(t=null===(n=e.target.value.match(/\n/g))||void 0===n?void 0:n.length)&&void 0!==t?t:-1)+2)},onChange:function(e){var t=e.target.value;v(t)}})})),I=e.TableBasedEditor=(0,c.forwardRef)((function(e,t){var n=e.rnaComplexProps,r=e.setBasePairs,o=e.approveBasePairs,d=e.initialBasePairs,f=e.defaultRnaComplexIndex,p=e.defaultRnaMoleculeName0,h=e.defaultRnaMoleculeName1,v=e.setBasePairKeysToEdit,x=e.populateBasePairKeysToEdit,g=e.repositionWithCalculatedDistances,b=e.setRepositionWithCalculatedDistances;(0,c.useImperativeHandle)(t,(function(){return{updateAll:function(){R(C,new Set)}}}));var N=(0,c.useState)([]),E=(0,s.Z)(N,2),C=E[0],I=E[1],_=(0,c.useState)([]),A=(0,s.Z)(_,2),T=A[0],P=A[1];function R(e,t){try{o(e);var n=r(e,t);I(n)}catch(a){if("string"===typeof a)return void alert(a);throw a}}var k=(0,c.useContext)(u._.App.PushToUndoStack),w=(0,c.useMemo)((function(){return Object.entries(n).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return{rnaComplexIndex:Number.parseInt(n),singularRnaComplexProps:r}}))}),[n]);return(0,c.useEffect)((function(){var e,t=new Array,n=new Array,r=(0,l.Z)(null!==d&&void 0!==d?d:[]);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=(0,i.Z)({rnaComplexIndex:f,rnaMoleculeName0:p,rnaMoleculeName1:h},o);void 0===a.rnaComplexIndex||void 0===a.rnaMoleculeName0||void 0===a.rnaMoleculeName1||void 0===a.nucleotideIndex0||void 0===a.nucleotideIndex1||void 0===a.length?n.push(a):t.push(a)}}catch(s){r.e(s)}finally{r.f()}I(t),0===n.length&&n.push({}),P(n)}),[d]),(0,y.jsx)("div",{className:"visible-scrollbar",style:{overflow:"scroll",overflowX:"hidden",background:"inherit",position:"sticky"},children:(0,y.jsxs)("table",{style:{border:"inherit",borderCollapse:"collapse",borderSpacing:0,width:"auto",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:[(0,y.jsx)("thead",{style:{border:"1px solid black",position:"sticky",top:-1,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:(0,y.jsxs)("tr",{style:{border:"inherit",position:"sticky",top:0,background:"inherit"},children:[(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA complex"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #1"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #1"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #2"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #2"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Length"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Type"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Edit"}),(0,y.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Add / Delete"})]})}),(0,y.jsxs)("tbody",{style:{border:"inherit"},children:[C.map((function(e,t){var r=e.rnaComplexIndex,o=e.rnaMoleculeName0,i=e.rnaMoleculeName1,l=e.nucleotideIndex0,s=e.nucleotideIndex1,c=e.length,u=e.type,d=n[r];return(0,y.jsxs)("tr",{style:{textAlign:"center"},children:[(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:d.name}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:o}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:l}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:i}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:s}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:c}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:null!==u&&void 0!==u?u:"auto"}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,y.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){k();var n=T[0];void 0===n.rnaComplexIndex&&void 0===n.rnaMoleculeName0&&void 0===n.rnaMoleculeName1&&void 0===n.nucleotideIndex0&&void 0===n.nucleotideIndex1&&void 0===n.length&&void 0===n.type?P([e]):P([].concat((0,a.Z)(T),[e])),I([].concat((0,a.Z)(C.slice(0,t)),(0,a.Z)(C.slice(t+1))));var r={};x(e,r,"delete"),v(r)},children:"Edit"})}),(0,y.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,y.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){k();for(var e=new Set,n=0;n<C.length;n++)e.add(n);R([].concat((0,a.Z)(C.slice(0,t)),(0,a.Z)(C.slice(t+1))),e)},children:"Delete"})})]},t)})),(0,y.jsxs)("tr",{style:{border:"1px solid black",background:"black",height:10},children:[(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{}),(0,y.jsx)("td",{})]}),T.map((function(e,t){function r(){for(var t=new Set,n=0;n<C.length-1;n++)t.add(n);var r=(0,a.Z)(C),o=structuredClone(e);(0,m.sortedArraySplice)(r,(function(e){var t=e.rnaComplexIndex,n=e.rnaMoleculeName0,r=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1;return t-o.rnaComplexIndex||n.localeCompare(o.rnaMoleculeName0)||r.localeCompare(o.rnaMoleculeName1)||a-o.nucleotideIndex0||i-o.nucleotideIndex1}),0,[o],m.HandleQueryNotFound.ADD),R(r,t)}var o=0===t?function(){k(),r(),e.rnaComplexIndex=void 0,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,e.length=void 0,e.type=void 0,P((0,a.Z)(T))}:function(){k(),r(),P([].concat((0,a.Z)(T.slice(0,t)),(0,a.Z)(T.slice(t+1))))};return(0,y.jsx)(S,(0,i.Z)((0,i.Z)({},e),{},{setRnaComplexIndex:function(t){e.rnaComplexIndex=t,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,P((0,a.Z)(T))},setRnaMoleculeName0:function(t){e.rnaMoleculeName0=t,e.nucleotideIndex0=void 0,P((0,a.Z)(T))},setRnaMoleculeName1:function(t){e.rnaMoleculeName1=t,e.nucleotideIndex1=void 0,P((0,a.Z)(T))},setNucleotideIndex0:function(t){e.nucleotideIndex0=t,P((0,a.Z)(T))},setNucleotideIndex1:function(t){e.nucleotideIndex1=t,P((0,a.Z)(T))},setLength:function(t){e.length=t,P((0,a.Z)(T))},setType:function(t){e.type=t,P((0,a.Z)(T))},rnaComplexProps:n,flattenedRnaComplexProps:w,addButtonOnClick:o,repositionWithCalculatedDistances:g,setRepositionWithCalculatedDistances:b}),t)}))]})]})})}));t={},(0,o.Z)(t,b.TEXT_BASED,C),(0,o.Z)(t,b.TABLE_BASED,I);function S(e){var t=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,i=e.nucleotideIndex0,l=e.nucleotideIndex1,s=e.length,u=e.type,d=e.flattenedRnaComplexProps,p=e.rnaComplexProps,m=e.setRnaComplexIndex,v=e.setRnaMoleculeName0,x=e.setRnaMoleculeName1,b=e.setNucleotideIndex0,N=e.setNucleotideIndex1,E=e.setLength,C=e.setType,I=e.addButtonOnClick,S=(0,c.useMemo)((function(){var e=void 0,n=new Array;return void 0!==t&&(e=p[t],n=Object.keys(e.rnaMoleculeProps)),{singularRnaComplexProps:e,rnaMoleculeNames:n}}),[t]),_=S.singularRnaComplexProps,A=S.rnaMoleculeNames,T=(0,c.useMemo)((function(){return void 0===r?void 0:_.rnaMoleculeProps[r]}),[r]),P=(0,c.useMemo)((function(){return void 0===o?void 0:_.rnaMoleculeProps[o]}),[o]);return(0,y.jsxs)("tr",{style:{border:"inherit",maxHeight:n},children:[(0,y.jsx)("td",{style:{border:"1px solid black"},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==t&&void 0!==t?t:-1,onChange:function(e){var t=Number.parseInt(e.target.value);m(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA complex"}),d.map((function(e){var t=e.rnaComplexIndex,n=e.singularRnaComplexProps;return(0,y.jsx)("option",{value:t,children:n.name},t)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===A.length,value:r,onChange:function(e){var t=e.target.value;v(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),A.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===T,value:null!==i&&void 0!==i?i:NaN,setValue:b,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0===t||t in T.nucleotideProps?t:{errorMessage:"Nucleotide #".concat(t," does not exist in RNA molecule #1")}}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===A.length,value:o,onChange:function(e){var t=e.target.value;x(t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),A.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===P,value:null!==l&&void 0!==l?l:NaN,setValue:N,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0===t||t in P.nucleotideProps?t:{errorMessage:"Nucleotide #".concat(t," does not exist in RNA molecule #2")}}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsx)(h.Z.Integer,{style:{width:"100%",height:"100%"},value:null!==s&&void 0!==s?s:NaN,setValue:E,stringToValue:function(e){var t=(0,g.parseIntReturnUndefinedOnFail)(e);return void 0!==t&&t<0?{errorMessage:"Length must be non-negative"}:t}})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n},children:(0,y.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==u&&void 0!==u?u:-1,onChange:function(e){var t=e.target.value;C("auto"===t?void 0:t)},children:[(0,y.jsx)("option",{style:{display:"none"},children:"Select a base-pair type"}),["auto"].concat((0,a.Z)(f.default.types)).map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n,textAlign:"center"},children:(0,y.jsx)("span",{style:{width:"100%",height:"100%",textAlign:"center"},children:"N/A"})}),(0,y.jsx)("td",{style:{border:"1px solid black",maxHeight:n,padding:"4px"},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"10px",whiteSpace:"nowrap"},children:[(0,y.jsx)("input",{type:"checkbox",checked:e.repositionWithCalculatedDistances||!1,onChange:function(t){var n;return null===(n=e.setRepositionWithCalculatedDistances)||void 0===n?void 0:n.call(e,t.target.checked)},style:{margin:0,transform:"scale(0.8)"}}),(0,y.jsx)("span",{children:"Reposition"})]}),(0,y.jsx)("button",{disabled:!(void 0!==t&&void 0!==r&&void 0!==o&&void 0!==i&&void 0!==l&&void 0!==s&&s>=0),style:{width:"100%",height:"20px",fontSize:"10px"},onClick:I,children:"Add"})]})})]})}e.Component=function(e){var t=e.rnaComplexProps,n=(e.approveBasePairs,e.initialBasePairs),o=(e.defaultRnaComplexIndex,e.defaultRnaMoleculeName0,e.defaultRnaMoleculeName1,(0,c.useContext)(u._.Nucleotide.SetKeysToRerender)),i=(0,c.useContext)(u._.BasePair.SetKeysToEdit),h=(0,c.useContext)(u._.App.Settings),g=(0,c.useContext)(u._.BasePair.AverageDistances),N=(0,c.useContext)(u._.App.IndicesOfFrozenNucleotides),E=(0,c.useContext)(u._.App.PushToUndoStack),C=(0,c.useState)(b.TABLE_BASED),I=(0,s.Z)(C,2),S=(I[0],I[1],(0,c.useState)(!1)),_=(0,s.Z)(S,2),A=_[0],T=(_[1],(0,c.useState)(r)),P=(0,s.Z)(T,2),R=P[0],k=P[1],w=(0,c.useState)(r),M=(0,s.Z)(w,2),O=M[0],j=M[1],L=(0,c.useState)(1),D=(0,s.Z)(L,2),Z=D[0],F=D[1],B=(0,c.useState)(1),U=(0,s.Z)(B,2),z=U[0],W=U[1],G=(0,c.useState)(1),H=(0,s.Z)(G,2),K=H[0],V=H[1],q=(0,c.useState)(1),X=(0,s.Z)(q,2),Y=X[0],Q=X[1],$=(0,c.useState)(!1),J=(0,s.Z)($,2),ee=J[0],te=J[1],ne=(0,c.useState)([]),re=(0,s.Z)(ne,2),oe=re[0],ae=re[1],ie=(0,c.useState)(n),le=(0,s.Z)(ie,2),se=(le[0],le[1]),ce=(0,c.useRef)();ce.current=oe;var ue=(0,c.useRef)();ue.current=A;var de=(0,c.useRef)();de.current=R;var fe=(0,c.useRef)();fe.current=O;var pe=(0,c.useRef)();pe.current=Z;var he=(0,c.useRef)();he.current=K;var me=(0,c.useRef)();me.current=z;var ve=(0,c.useRef)();ve.current=Y;var xe=(0,c.useRef)();xe.current=N;var ge=(0,c.useMemo)((function(){return function(e,n,r){var o=xe.current,i=new Array,c=e.rnaComplexIndex,u=e.rnaMoleculeName0,f=e.rnaMoleculeName1,p=e.nucleotideIndex0,h=e.nucleotideIndex1,m=e.length,v=e.type,x=e.types,g=ue.current;c in n||(n[c]={add:[],delete:[]});var y=n[c],b=y[r],N=y.delete,E=t[c],C=E.rnaMoleculeProps[u],I=E.rnaMoleculeProps[f];p-=C.firstNucleotideIndex,h-=I.firstNucleotideIndex;for(var S=(c in o?o[c]:{}),_=(u in S?S[u]:new Set),A=(f in S?S[f]:new Set),T=[],P=[],R=function(){var e=p+k,t=h-k,n=_.has(e)||A.has(t);if(!n&&u in E.basePairs){var o=E.basePairs[u];if(e in o){var c,m=o[e],y=(0,l.Z)(m);try{for(y.s();!(c=y.n()).done;){var C=c.value;if(C.rnaMoleculeName in S){var I=S[C.rnaMoleculeName];n||(n=I.has(p))}}}catch(V){y.e(V)}finally{y.f()}}}if(!n&&f in E.basePairs){var R=E.basePairs[f];if(t in R){var w,M=R[t],O=(0,l.Z)(M);try{for(O.s();!(w=O.n()).done;){var j=w.value;if(j.rnaMoleculeName in S){var L=S[j.rnaMoleculeName];n||(n=L.has(h))}}}catch(V){O.e(V)}finally{O.f()}}}if(n)return i.push(k),T.push(k),"continue";var D=[{rnaMoleculeName:u,nucleotideIndex:e},{rnaMoleculeName:f,nucleotideIndex:t}].sort(d.compareBasePairKeys),Z=(0,s.Z)(D,2),F={keys0:Z[0],keys1:Z[1]};if("add"===r)try{var B=(0,d.insertBasePair)(E,u,e,f,t,g?d.DuplicateBasePairKeysHandler.DELETE_PREVIOUS_MAPPING:d.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:null!==v&&void 0!==v?v:void 0===x?void 0:x[k]});N.push.apply(N,[F].concat((0,a.Z)(B)))}catch(q){if("string"===typeof q)return i.push(k),P.push(k),"continue";throw q}else if("delete"===r){var U=E.basePairs[u],z=E.basePairs[f];if(e in U){var W=U[e],G=W.findIndex((function(e){return e.rnaMoleculeName===f&&e.nucleotideIndex===t}));-1!==G&&(1===W.length?delete U[e]:U[e]=[].concat((0,a.Z)(W.slice(0,G)),(0,a.Z)(W.slice(G+1))))}if(t in z){var H=z[t],K=H.findIndex((function(t){return t.rnaMoleculeName===u&&t.nucleotideIndex===e}));-1!==K&&(1===H.length?delete z[t]:z[t]=[].concat((0,a.Z)(H.slice(0,K)),(0,a.Z)(H.slice(K+1))))}}b.push(F)},k=0;k<m;k++)R();var w=[];return T.length>0&&w.push(["The following base pairs were not ".concat({add:"added",delete:"deleted"}[r]," due to the involvement of frozen nucleotide(s):")].concat((0,a.Z)(T.map((function(e){return"Base pair #".concat(e+1)})))).join("\n")),P.length>0&&w.push(["The following base pairs were not added due to conflicting, preexisting base pair(s). Activate the relevant setting if you want to override them:"].concat((0,a.Z)(P.map((function(e){return"#".concat(e+1)})))).join("\n")),i}}),[]),ye=(0,c.useMemo)((function(){return function(e){var n,r=(0,l.Z)(e);try{var o=function(){var e=n.value,r=t[e.rnaComplexIndex],o=r.rnaMoleculeProps[e.rnaMoleculeName0],a=r.rnaMoleculeProps[e.rnaMoleculeName1],i=r.basePairs[e.rnaMoleculeName0];e.types=[];for(var l=function(){var t,n=e.nucleotideIndex0-o.firstNucleotideIndex+s,r=e.nucleotideIndex1-a.firstNucleotideIndex-s,l=i[n],c=null===l||void 0===l?void 0:l.find((function(t){var n=t.rnaMoleculeName,o=t.nucleotideIndex;return n===e.rnaMoleculeName1&&o===r}));e.types.push(null!==(t=null===c||void 0===c?void 0:c.basePairType)&&void 0!==t?t:(0,f.getBasePairType)(o.nucleotideProps[n].symbol,a.nucleotideProps[r].symbol))},s=0;s<e.length;s++)l()};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}ae(e)}}),[]),be=(0,c.useMemo)((function(){return function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,a=arguments.length>2?arguments[2]:void 0,s=de.current,c=fe.current,u=ce.current,x=pe.current,g=he.current,y=me.current,b=ve.current,N={},E=new Array,C=(0,l.Z)(u);try{for(C.s();!(n=C.n()).done;){var I,S=n.value,_=ge(S,N,"delete"),A=Number.NaN,T=(0,l.Z)(_);try{for(T.s();!(I=T.n()).done;){var P=I.value,R=S.rnaComplexIndex,k=S.rnaMoleculeName0,w=S.rnaMoleculeName1,M=S.nucleotideIndex0,O=S.nucleotideIndex1,j=S.type;if(P===A+1){var L=E[E.length-1];L.type===j?L.length++:E.push({rnaComplexIndex:R,rnaMoleculeName0:k,rnaMoleculeName1:w,nucleotideIndex0:M+P,nucleotideIndex1:O-P,length:1,type:j})}else E.push({rnaComplexIndex:R,rnaMoleculeName0:k,rnaMoleculeName1:w,nucleotideIndex0:M+P,nucleotideIndex1:O-P,length:1,type:j});A=P}}catch(Ye){T.e(Ye)}finally{T.f()}}}catch(Ye){C.e(Ye)}finally{C.f()}var D,Z=new Set,F=(0,l.Z)(e);try{for(F.s();!(D=F.n()).done;){var B,U=D.value,z=ge(U,N,"add"),W=U.rnaComplexIndex,G=U.rnaMoleculeName0,H=U.rnaMoleculeName1,K=U.nucleotideIndex0,V=U.nucleotideIndex1,q=U.length,X=U.type,Y=-1,Q=(0,l.Z)(z);try{for(Q.s();!(B=Q.n()).done;){var $=B.value;if(0!==$){var J=$-Y-1;E.push({rnaComplexIndex:W,rnaMoleculeName0:G,rnaMoleculeName1:H,nucleotideIndex0:K+$-J,nucleotideIndex1:V-$+J,length:J,type:X}),Y=$}Z.add($)}}catch(Ye){Q.e(Ye)}finally{Q.f()}Y!==q-1&&E.push({rnaComplexIndex:W,rnaMoleculeName0:G,rnaMoleculeName1:H,nucleotideIndex0:K+Y+1,nucleotideIndex1:V-(Y+1),length:q-Y-1,type:X})}}catch(Ye){F.e(Ye)}finally{F.f()}if(null!==a&&void 0!==a?a:s||c){for(var te={},ne=E.map((function(e,n){var o=t[e.rnaComplexIndex],a=o.rnaMoleculeProps[e.rnaMoleculeName0],i=o.rnaMoleculeProps[e.rnaMoleculeName1],l=e.nucleotideIndex0-a.firstNucleotideIndex,s=e.nucleotideIndex1-i.firstNucleotideIndex,c=new Array,u=e.rnaComplexIndex,d=e.rnaMoleculeName0,p=e.rnaMoleculeName1;u in te||(te[u]={});var h=te[u];d in h||(h[d]=[]);var m=h[d];p in h||(h[p]=[]);for(var v=h[p],x=function(){var t=l+g,u=s-g;m.push(t),v.push(u);var h=a.nucleotideProps[t],x=i.nucleotideProps[u],y=e.type;if(void 0===y&&d in o.basePairs){var b=o.basePairs[d];if(t in b){var N=b[t].find((function(e){return e.rnaMoleculeName===p&&e.nucleotideIndex===u}));void 0!==N&&(y=N.basePairType)}}void 0===y&&(y=(0,f.getBasePairType)(h.symbol,x.symbol));var E=!r.has(n),C=Ne.current;if(C){var I=t+a.firstNucleotideIndex,S=u+i.firstNucleotideIndex,_=(void 0===C.start||I>=C.start)&&(void 0===C.end||I<=C.end),A=(void 0===C.start||S>=C.start)&&(void 0===C.end||S<=C.end);E=_||A}c.push({0:h,1:x,basePairType:y,allowRepositioningFlag:E})},g=0;g<e.length;g++)x();return c})),re=0;re<ne.length;re++){var oe=ne[re];if(0!==oe.length){for(var ae=oe[0],ie=ae[0],le=ae[1],se=(0,v.scaleUp)((0,v.add)(ie,le),.5),ue=(0,v.normalize)((0,v.subtract)(le,ie)),xe=(0,v.orthogonalize)(ue),be=0,Ee=0;Ee<oe.length;Ee++)for(var Ce=oe[Ee],Ie=0,Se=[Ce[0],Ce[1]];Ie<Se.length;Ie++){var _e=Se[Ie];be+=(0,m.sign)((0,v.dotProduct)((0,v.subtract)(_e,se),xe))}be<0&&(xe=(0,v.negate)(xe));for(var Ae=0;Ae<oe.length;Ae++){var Te=oe[Ae],Pe=Te[0],Re=Te[1],ke=Te.basePairType,we=(0,v.scaleUp)((0,v.add)(Pe,Re),.5),Me=(0,v.subtract)(Re,Pe),Oe=(0,v.normalize)(Me),je=0;if(Te.allowRepositioningFlag&&s)if(ee){var Le=h[p.pE.CANONICAL_BASE_PAIR_DISTANCE],De=h[p.pE.MISMATCH_BASE_PAIR_DISTANCE],Ze=h[p.pE.WOBBLE_BASE_PAIR_DISTANCE];switch(ke){case f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.CANONICAL:je=Number.isNaN(Le)?x:Le;break;case f.default.Type.MISMATCH:je=Number.isNaN(De)?y:De;break;case f.default.Type.WOBBLE:je=Number.isNaN(Ze)?g:Ze;break;default:je=Number.isNaN(De)?y:De}}else switch(ke){case f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case f.default.Type.CANONICAL:je=x;break;case f.default.Type.MISMATCH:je=y;break;case f.default.Type.WOBBLE:je=g;break;default:je=y}else je=(0,v.magnitude)(Me);if(je*=.5,Te.allowRepositioningFlag&&c){var Fe=ee?Number.isNaN(h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS])?b:h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS]:b;we=(0,v.add)(se,(0,v.scaleUp)(xe,Ae*Fe)),Oe=ue}Me=(0,v.scaleUp)(Oe,je);var Be=(0,v.subtract)(we,Me),Ue=(0,v.add)(we,Me);Pe.x=Be.x,Pe.y=Be.y,Re.x=Ue.x,Re.y=Ue.y}}}for(var ze=0,We=Object.values(te);ze<We.length;ze++)for(var Ge=We[ze],He=0,Ke=Object.values(Ge);He<Ke.length;He++){Ke[He].sort(m.subtractNumbers)}o(te)}for(var Ve=0,qe=Object.values(N);Ve<qe.length;Ve++){var Xe=qe[Ve];Xe.add.sort(d.compareFullBasePairKeys),Xe.delete.sort(d.compareFullBasePairKeys)}return i(N),ye(E),E}}),[]),Ne=(0,c.useRef)(null);return(0,c.useEffect)((function(){function e(e){Ne.current=e.detail||{},E(),be((0,a.Z)(oe),new Set)}return window.addEventListener("triggerReformatRange",e),function(){return window.removeEventListener("triggerReformatRange",e)}}),[oe]),(0,c.useEffect)((function(){var e,t={},n=(0,l.Z)(f.default.types);try{for(n.s();!(e=n.n()).done;){for(var r=e.value,o=[],a=0,i=Object.values(g);a<i.length;a++){var s=i[a].distances;o.push(s[r])}t[r]=(0,m.median)(o)}}catch(M){n.e(M)}finally{n.f()}var c=[t[f.default.Type.CANONICAL],t[f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK],t[f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]].filter((function(e){return!Number.isNaN(e)}));function u(e){return 1*e.reduce((function(e,t){return e+t}))/e.length}for(var d=0===c.length?1:u(c),v=f.default.types.filter((function(e){return e!==f.default.Type.CANONICAL&&e!==f.default.Type.CIS_WATSON_CRICK_WATSON_CRICK&&e!==f.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK&&e!==f.default.Type.WOBBLE})).map((function(e){return t[e]})).filter((function(e){return!Number.isNaN(e)})),x=0===v.length?1:u(v),y=t[f.default.Type.WOBBLE],N=0,E=0,C=0,I=Object.values(g);C<I.length;C++){var S=I[C].helixDistance;Number.isNaN(S)||(N+=S,E++)}var _=N/E,A=(b.TABLE_BASED,h[p.pE.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING]),T=h[p.pE.CANONICAL_BASE_PAIR_DISTANCE],P=h[p.pE.MISMATCH_BASE_PAIR_DISTANCE],R=h[p.pE.WOBBLE_BASE_PAIR_DISTANCE],w=h[p.pE.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS];k(A),j(A),F(Number.isNaN(T)?Number.isNaN(d)?1:d:T),W(Number.isNaN(P)?Number.isNaN(x)?1:x:P),V(Number.isNaN(R)?Number.isNaN(y)?1:y:R),Q(Number.isNaN(w)?Number.isNaN(_)?1:_:w)}),[g]),(0,c.useEffect)((function(){se(n),ye(void 0===n?[]:n.filter((function(e){return void 0!==e.rnaComplexIndex&&void 0!==e.rnaMoleculeName0&&void 0!==e.rnaMoleculeName1&&void 0!==e.nucleotideIndex0&&void 0!==e.nucleotideIndex1&&void 0!==e.length})))}),[n]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(x.z.Component,{title:"Base-pairs editor",initialCollapsedFlag:!1,children:[(0,y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",padding:"6px 8px",borderRadius:"4px",backgroundColor:ee?"#e8f5e8":"transparent",border:ee?"1px solid #4caf50":"1px solid transparent",transition:"all 0.2s ease"},children:[(0,y.jsx)("input",{type:"checkbox",checked:ee,onChange:function(e){return te(e.target.checked)},style:{margin:0}}),(0,y.jsx)("span",{style:{fontSize:"12px",fontWeight:ee?"600":"400",color:ee?"#2e7d32":"inherit"},children:"Reposition nucleotides with calculated distances"}),ee&&(0,y.jsx)("span",{style:{fontSize:"10px",color:"#666",fontStyle:"italic",marginLeft:"4px"},children:"(Using auto-calculated values from uploaded structure)"})]}),(0,y.jsx)("br",{})]}),(0,y.jsx)("div",{style:{display:"none"},children:(0,y.jsx)("button",{id:"__hidden_reformat_button__",onClick:function(){E(),be((0,a.Z)(oe),new Set)},children:"Re-format all"})})]})},(E||(E=e.EditorTypeSelector||(e.EditorTypeSelector={}))).Component=function(e){var t=e.editorType,n=e.onChange;return(0,y.jsx)("select",{value:t,onChange:function(e){n(e.target.value)},children:N.map((function(e,t){return(0,y.jsx)("option",{value:e,children:e},t)}))})},e.TableRow=S}(r||(r={}))},920:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r,o=n(1413),a=n(9439),i=n(2791),l=n(3413),s=n(184);(r||(r={})).Component=function(e){var t=e.initialCollapsedFlag,n=e.title,r=e.children,c=e.buttonStyle,u=e.divStyle,d=(0,i.useContext)(l._.Collapsible.Width),f=null!==d&&void 0!==d?d:"100%",p=(0,i.useState)(null===t||void 0===t||t),h=(0,a.Z)(p,2),m=h[0],v=h[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"collapsible",style:(0,o.Z)({width:f},c),onClick:function(){v(!m)},children:[(0,s.jsx)("span",{style:{display:"inline-block",textAlign:"left",width:"50%",whiteSpace:"nowrap"},children:n}),(0,s.jsx)("span",{style:{display:"inline-block",textAlign:"right",width:"50%"},children:m?"+":"-"})]}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{style:(0,o.Z)({display:m?"none":"block",paddingLeft:"10px"},u),children:(0,s.jsx)(l._.Collapsible.Width.Provider,{value:"100%",children:r})})]})}},1702:function(e,t,n){"use strict";var r,o=n(1413),a=n(9439),i=n(2791),l=n(6176),s=n(7457),c=n(184);!function(e){var t=function(e){return e.VALUE="value",e.UNDEFINED="undefined",e.ERROR="error",e}({});function n(e){var n=e.disabledFlag,r=(0,i.useState)(e.valueToString(e.value)),l=(0,a.Z)(r,2),s=l[0],u=l[1],d=(0,i.useState)(!0),f=(0,a.Z)(d,2),p=f[0],h=f[1],m=(0,i.useState)(!0),v=(0,a.Z)(m,2),x=v[0],g=v[1],y=(0,i.useState)(void 0),b=(0,a.Z)(y,2),N=b[0],E=b[1];return(0,i.useEffect)((function(){x?u(e.valueToString(e.value)):(g(!0),h(!0))}),[e.value]),(0,c.jsx)("input",{style:(0,o.Z)({border:"1px solid ".concat(p?"black":"red")},e.style),type:e.htmlInputType,value:s,onChange:function(n){g(!1);var r=n.target.value;u(r);var o,a=e.stringToValue(r);switch(void 0===(o=a)?t.UNDEFINED:null!==o&&"object"===typeof o&&"errorMessage"in o?t.ERROR:t.VALUE){case t.VALUE:e.setValue(a),E(void 0),h(!0);break;case t.UNDEFINED:h(!1),E(void 0);break;case t.ERROR:h(!1),E(a.errorMessage)}},step:e.step,min:e.min,max:e.max,title:N,disabled:n})}e.StringToValueReturnType=t,e.Component=n,e.Number=function(e){var t,r,a;return(0,c.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:l.numberToFormattedStringHelper,stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseFloatReturnUndefinedOnFail)(t);if(void 0!==n){if(void 0!==e.min&&n<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&n>e.max)return{errorMessage:"Input value is greater than the maximum."}}return n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number"},e))},e.Integer=function(e){var t,r,a;return(0,c.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:function(e){return e.toString()},stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseIntReturnUndefinedOnFail)(t);if(void 0!==n){if(void 0!==e.min&&n<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&n>e.max)return{errorMessage:"Input value is greater than the maximum."}}return n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number"},e))},e.Angle=function(e){var t,r,a,u=(0,i.useMemo)((function(){var t;return(null!==(t=e.step)&&void 0!==t?t:e.useDegreesFlag)?1:(0,s.degreesToRadians)(1)}),[e.step]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n,(0,o.Z)({style:e.style,valueToString:null!==(t=e.valueToString)&&void 0!==t?t:function(t){var n=e.useDegreesFlag?(0,s.radiansToDegrees)(t):t;return(0,l.numberToFormattedStringHelper)(n)},stringToValue:null!==(r=e.stringToValue)&&void 0!==r?r:function(t){var n=(0,l.parseFloatReturnUndefinedOnFail)(t);if(void 0!==n)return void 0!==e.min&&n<e.min?{errorMessage:"Input value is less than the minimum."}:void 0!==e.max&&n>e.max?{errorMessage:"Input value is greater than the maximum."}:e.useDegreesFlag?(0,s.degreesToRadians)(n):n},htmlInputType:null!==(a=e.htmlInputType)&&void 0!==a?a:"number",step:u},e)),e.useDegreesFlag?"\xb0":"radians"]})}}(r||(r={})),t.Z=r},8109:function(e,t,n){"use strict";n.d(t,{S:function(){return V}});var r=n(1413),o=n(9439),a=n(2791),i=n(3871);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var s=n(3366),c=function(e){return/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e)},u=255,d=100,f=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=Math.max(t,n,r),i=a-Math.min(t,n,r),l=i?a===t?(n-r)/i:a===n?2+(r-t)/i:4+(t-n)/i:0;return{h:60*(l<0?l+6:l),s:a?i/a*d:0,v:a/u*d,a:o}},p=function(e){var t=h(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},h=function(e){var t=e.h,n=e.s,r=e.v,o=e.a,a=(200-n)*r/d;return{h:t,s:a>0&&a<200?n*r/d/(a<=d?a:200-a)*d:0,l:a/2,a:o}},m=(Math.PI,function(e){var t,n=e.r,r=e.g,o=e.b;return"#"+(t=(n<<16|r<<8|o).toString(16),new Array(7-t.length).join("0")+t)}),v=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a="number"===typeof o&&(255*o|256).toString(16).slice(1);return""+m({r:t,g:n,b:r,a:o})+(a||"")},x=function(e){return f(g(e))},g=function(e){var t=e.replace("#","");/^#?/.test(e)&&3===t.length&&(e="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2));var n=new RegExp("[A-Za-z0-9]{2}","g"),r=e.match(n).map((function(e){return parseInt(e,16)})),a=(0,o.Z)(r,4),i=a[0],l=a[1],s=a[2],c=void 0===s?0:s,d=a[3];return{r:i,g:l,b:c,a:(null!=d?d:255)/u}},y=function(e){var t=e.h,n=e.s,r=e.v,o=e.a,a=t/60,i=n/d,s=r/d,c=Math.floor(a)%6,f=a-Math.floor(a),p=u*s*(1-i),h=u*s*(1-i*f),m=u*s*(1-i*(1-f));s*=u;var v={};switch(c){case 0:v.r=s,v.g=m,v.b=p;break;case 1:v.r=h,v.g=s,v.b=p;break;case 2:v.r=p,v.g=s,v.b=m;break;case 3:v.r=p,v.g=h,v.b=s;break;case 4:v.r=m,v.g=p,v.b=s;break;case 5:v.r=s,v.g=p,v.b=h}return v.r=Math.round(v.r),v.g=Math.round(v.g),v.b=Math.round(v.b),l({},v,{a:o})},b=function(e){return m(y(e))};function N(e){var t=(0,a.useRef)(e);return(0,a.useEffect)((function(){t.current=e})),(0,a.useCallback)((function(e,n){return t.current&&t.current(e,n)}),[])}var E=function(e){return"touches"in e},C=function(e){!E(e)&&e.preventDefault&&e.preventDefault()},I=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},S=function(e,t){var n=e.getBoundingClientRect(),r=E(t)?t.touches[0]:t;return{left:I((r.pageX-(n.left+window.pageXOffset))/n.width),top:I((r.pageY-(n.top+window.pageYOffset))/n.height),width:n.width,height:n.height,x:r.pageX-(n.left+window.pageXOffset),y:r.pageY-(n.top+window.pageYOffset)}},_=n(184),A=["prefixCls","className","onMove","onDown"],T=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"w-color-interactive":n,i=e.className,c=e.onMove,u=e.onDown,d=(0,s.Z)(e,A),f=(0,a.useRef)(null),p=(0,a.useRef)(!1),h=(0,a.useState)(!1),m=(0,o.Z)(h,2),v=m[0],x=m[1],g=N(c),y=N(u),b=(0,a.useCallback)((function(e){C(e),(E(e)?e.touches.length>0:e.buttons>0)&&f.current?g&&g(S(f.current,e),e):x(!1)}),[g]),I=(0,a.useCallback)((function(){return x(!1)}),[]),T=(0,a.useCallback)((function(e){var t=e?window.addEventListener:window.removeEventListener;t(p.current?"touchmove":"mousemove",b),t(p.current?"touchend":"mouseup",I)}),[]);(0,a.useEffect)((function(){return T(v),function(){v&&T(!1)}}),[v,T]);var P=(0,a.useCallback)((function(e){C(e.nativeEvent),function(e){return!(p.current&&!E(e))&&(p.current=E(e),!0)}(e.nativeEvent)&&(y&&y(S(f.current,e.nativeEvent),e.nativeEvent),x(!0))}),[y]);return(0,_.jsx)("div",l({},d,{className:[r,i||""].filter(Boolean).join(" "),style:l({},d.style,{touchAction:"none"}),ref:f,tabIndex:0,onMouseDown:P,onTouchStart:P}))}));T.displayName="Interactive";var P=T,R=function(e){var t=e.className,n=e.color,r=e.left,o=e.top,a=e.style,i=e.prefixCls,s=l({},a,{position:"absolute",top:o,left:r}),c=i+"-pointer "+(t||"");return(0,_.jsx)("div",{className:c,style:s,children:(0,_.jsx)("div",{className:i+"-fill",style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:(0,_.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:n}})})})},k=2*Math.PI,w=function(e,t){return(e%t+t)%t},M=function(e,t){return Math.sqrt(e*e+t*t)};function O(e){var t=e.width,n=void 0===t?0:t,r=n/2;return{width:n,radius:r,cx:r,cy:r}}function j(e){var t=e.width;return(void 0===t?0:t)/2}function L(e,t,n){var r=e.angle||0,o=e.direction;return n&&"clockwise"===o?t=r+t:"clockwise"===o?t=360-r+t:n&&"anticlockwise"===o?t=r+180-t:"anticlockwise"===o&&(t=r-t),w(t,360)}var D=["prefixCls","radius","pointer","className","style","width","height","oval","direction","angle","color","onChange"],Z=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"w-color-wheel":n,o=(e.radius,e.pointer),a=e.className,i=e.style,u=e.width,d=void 0===u?200:u,f=e.height,p=void 0===f?200:f,m=e.oval,g=e.direction,N=void 0===g?"anticlockwise":g,E=e.angle,C=void 0===E?180:E,I=e.color,S=e.onChange,A=(0,s.Z)(e,D),T="string"===typeof I&&c(I)?x(I):I||{},w=I?b(T):"",Z=function(e,t){var n=O(e),r=n.cx,o=n.cy,a=j(e),i=(180+L(e,t.h,!0))*(k/360),l=t.s/100*a,s="clockwise"===e.direction?-1:1;return{x:r+l*Math.cos(i)*s,y:o+l*Math.sin(i)*s}}({width:d},T),F={top:"0",left:"0",color:w},B=function(e,t){var n=function(e,t,n){var r=O(e),o=r.cx,a=r.cy,i=j(e);t=o-t,n=a-n;var l=L(e,Math.atan2(-n,-t)*(360/k)),s=Math.min(M(t,n),i);return{h:Math.round(l),s:Math.round(100/i*s)}}({width:d},d-e.x,p-e.y),r={h:n.h,s:n.s,v:T.v,a:T.a};S&&S(function(e){var t,n,r,o,a,i,l,s,u,d,f;return"string"===typeof e&&c(e)?(i=x(e),l=e):"string"!==typeof e&&(i=e),i&&(r={h:(f=i).h,s:f.s,v:f.v},a=h(i),o=y(i),s=v(o),l=b(i),n={h:(d=a).h,s:d.s,l:d.l},t={r:(u=o).r,g:u.g,b:u.b}),{rgb:t,hsl:n,hsv:r,rgba:o,hsla:a,hsva:i,hex:l,hexa:s}}(r))},U={zIndex:1,transform:"translate("+Z.x+"px, "+Z.y+"px) "+("x"===m||"X"===m?"scaleY(2)":"y"===m||"Y"===m?"scaleX(2)":"")},z=o&&"function"===typeof o?o(l({prefixCls:r,style:U},F)):(0,_.jsx)(R,l({prefixCls:r,style:U},F));return(0,_.jsxs)(P,l({className:[r,a||""].filter(Boolean).join(" ")},A,{style:l({position:"relative",width:d,transform:"x"===m||"X"===m?"scaleY(0.5)":"y"===m||"Y"===m?"scaleX(0.5)":"",height:p},i),ref:t,onMove:B,onDown:B,children:[z,(0,_.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===N?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)",transform:"rotateZ("+(C+90)+"deg)",inset:0}}),(0,_.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),(0,_.jsx)("div",{style:{backgroundColor:"#000",borderRadius:"50%",position:"absolute",inset:0,opacity:"number"===typeof T.v?1-T.v/100:0}})]}))}));Z.displayName="Wheel";var F=Z,B=["className","prefixCls","left","top","style","fillProps"],U=function(e){var t=e.className,n=e.prefixCls,r=e.left,o=e.top,a=e.style,i=e.fillProps,c=(0,s.Z)(e,B),u=l({},a,{position:"absolute",left:r,top:o}),d=l({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},null==i?void 0:i.style,{transform:r?"translate(-9px, -1px)":"translate(-1px, -9px)"});return(0,_.jsx)("div",l({className:n+"-pointer "+(t||""),style:u},c,{children:(0,_.jsx)("div",l({className:n+"-fill"},i,{style:d}))}))},z=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],W=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"w-color-alpha":n,o=e.className,a=e.hsva,i=e.background,c=e.bgProps,u=void 0===c?{}:c,d=e.innerProps,f=void 0===d?{}:d,h=e.pointerProps,m=void 0===h?{}:h,v=e.radius,x=void 0===v?0:v,g=e.width,y=e.height,b=void 0===y?16:y,N=e.direction,E=void 0===N?"horizontal":N,C=e.style,I=e.onChange,S=e.pointer,A=(0,s.Z)(e,z),T=function(e){I&&I(l({},a,{a:"horizontal"===E?e.left:e.top}),e)},R=p(Object.assign({},a,{a:1})),k="linear-gradient(to "+("horizontal"===E?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+R+" 100%)",w={};"horizontal"===E?w.left=100*a.a+"%":w.top=100*a.a+"%";var M=l({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:x,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==) left center",backgroundColor:"var(--alpha-background-color)"},C,{position:"relative"},{width:g,height:b}),O=S&&"function"===typeof S?S(l({prefixCls:r},m,w)):(0,_.jsx)(U,l({},m,{prefixCls:r},w));return(0,_.jsxs)("div",l({},A,{className:[r,r+"-"+E,o||""].filter(Boolean).join(" "),style:M,ref:t,children:[(0,_.jsx)("div",l({},u,{style:l({inset:0,position:"absolute",background:i||k,borderRadius:x},u.style)})),(0,_.jsx)(P,l({},f,{style:l({},f.style,{inset:0,zIndex:1,position:"absolute"}),onMove:T,onDown:T,children:O}))]}))}));W.displayName="Alpha";var G=W,H=["prefixCls","className","onChange","direction","hsva"],K=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"w-color-saturation":n,o=e.className,a=e.onChange,i=e.direction,c=void 0===i?"horizontal":i,u=e.hsva,d=(0,s.Z)(e,H),f=p(l({},u,{a:1,v:100}));return(0,_.jsx)(G,l({ref:t},d,{className:r+" "+(o||""),hsva:{h:u.h,s:u.s,v:u.v,a:1-u.v/100},direction:c,background:"linear-gradient(to "+("horizontal"===c?"right":"bottom")+", "+f+", rgb(0, 0, 0))",onChange:function(e,t){a&&a({v:"horizontal"===c?100-100*t.left:100-100*t.top})}}))}));K.displayName="ShadeSlider";var V,q=K,X=n(3413);!function(e){function t(e,t,n){var r=function(e){return Math.max(0,Math.min(255,e)).toString(16).padStart(2,"0").toUpperCase()};return"#".concat(r(e)).concat(r(t)).concat(r(n))}function n(e){var n,l,s,c,u=e.setColorHelper,d=e.color,p=e.children,h=(0,a.useState)(null!==(n=null===d||void 0===d?void 0:d.red)&&void 0!==n?n:0),m=(0,o.Z)(h,2),v=m[0],x=m[1],g=(0,a.useState)(null!==(l=null===d||void 0===d?void 0:d.green)&&void 0!==l?l:0),b=(0,o.Z)(g,2),N=b[0],E=b[1],C=(0,a.useState)(null!==(s=null===d||void 0===d?void 0:d.blue)&&void 0!==s?s:0),I=(0,o.Z)(C,2),S=I[0],A=I[1],T=(0,a.useState)(null!==(c=null===d||void 0===d?void 0:d.alpha)&&void 0!==c?c:255),P=(0,o.Z)(T,2),R=P[0],k=P[1],w=(0,a.useState)((function(){var e,n,r;return t(null!==(e=null===d||void 0===d?void 0:d.red)&&void 0!==e?e:0,null!==(n=null===d||void 0===d?void 0:d.green)&&void 0!==n?n:0,null!==(r=null===d||void 0===d?void 0:d.blue)&&void 0!==r?r:0)})),M=(0,o.Z)(w,2),O=M[0],j=M[1],L=(0,a.useState)((function(){var e,t,n,r;return f({r:null!==(e=null===d||void 0===d?void 0:d.red)&&void 0!==e?e:0,g:null!==(t=null===d||void 0===d?void 0:d.green)&&void 0!==t?t:0,b:null!==(n=null===d||void 0===d?void 0:d.blue)&&void 0!==n?n:0,a:(null!==(r=null===d||void 0===d?void 0:d.alpha)&&void 0!==r?r:255)/255})})),D=(0,o.Z)(L,2),Z=D[0],B=D[1],U=(0,a.useState)(!1),z=(0,o.Z)(U,2),W=z[0],G=z[1],H=(0,a.useState)(!1),K=(0,o.Z)(H,2),V=K[0],Y=K[1],Q=(0,a.useRef)(!1),$=(0,a.useRef)(!1),J=(0,a.useContext)(X._.App.PushToUndoStack);function ee(e,n,r,o){x(e),E(n),A(r),k(o),j(t(e,n,r)),B(f({r:e,g:n,b:r,a:o/255})),V||(J(),Y(!0)),$.current=!0,u({red:e,green:n,blue:r,alpha:o})}function te(){Q.current=!0}function ne(){Q.current=!1,Y(!1)}(0,a.useEffect)((function(){var e,n;if(Q.current||$.current)$.current=!1;else{var r=null!==d&&void 0!==d?d:i.BLACK;x(r.red),E(r.green),A(r.blue),k(null!==(e=r.alpha)&&void 0!==e?e:i.DEFAULT_ALPHA),j(t(r.red,r.green,r.blue)),B(f({r:r.red,g:r.green,b:r.blue,a:(null!==(n=r.alpha)&&void 0!==n?n:i.DEFAULT_ALPHA)/255}))}}),[d]);var re={width:"var(--color-editor-slider-width, 60px)",height:"var(--color-editor-slider-height, 4px)",cursor:"pointer"},oe={width:"var(--color-editor-number-width, 36px)",textAlign:"center",fontSize:"var(--color-editor-number-font-size, 10px)",padding:"var(--color-editor-number-padding, 2px 4px)",border:"1px solid #ddd",borderRadius:3},ae="rgba(".concat(v,", ").concat(N,", ").concat(S,", ").concat(R/255,")");return(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--color-editor-stack-gap, 8px)"},children:[p,(0,_.jsxs)("div",{style:{display:"flex",gap:"var(--color-editor-row-gap, 10px)",alignItems:"flex-start"},children:[(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[(0,_.jsx)("div",{onClick:function(){return G(!W)},style:{width:"var(--color-editor-preview-size, 48px)",height:"var(--color-editor-preview-size, 48px)",borderRadius:"var(--color-editor-preview-radius, 6px)",backgroundColor:ae,border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},title:"Click for color wheel"}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:2},children:[(0,_.jsx)("span",{style:{fontSize:"var(--color-editor-hex-prefix-font-size, 9px)",color:"#666"},children:"#"}),(0,_.jsx)("input",{type:"text",value:O.replace("#",""),onChange:function(e){var t="#"+e.target.value;j(t);var n=function(e){var t=/^#?([a-fA-F0-9]{6})$/.exec(e);return t?{r:parseInt(t[1].substring(0,2),16),g:parseInt(t[1].substring(2,4),16),b:parseInt(t[1].substring(4,6),16)}:null}(t);n&&ee(n.r,n.g,n.b,R)},style:{width:"var(--color-editor-hex-width, 50px)",fontFamily:"monospace",fontSize:"var(--color-editor-hex-font-size, 10px)",padding:"var(--color-editor-hex-padding, 3px 4px)",border:"1px solid #ddd",borderRadius:3,textAlign:"center"}})]})]}),(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--color-editor-channel-stack-gap, 3px)",flex:1},children:[(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--color-editor-channel-row-gap, 3px)"},children:[(0,_.jsx)("span",{style:{width:"var(--color-editor-channel-label-width, 12px)",fontSize:"var(--color-editor-channel-label-font-size, 9px)",fontWeight:600,color:"#e53935"},children:"R"}),(0,_.jsx)("input",{type:"range",min:0,max:255,value:v,onChange:function(e){return ee(parseInt(e.target.value),N,S,R)},onMouseDown:te,onMouseUp:ne,onMouseLeave:ne,style:(0,r.Z)((0,r.Z)({},re),{},{accentColor:"#e53935",flex:1})}),(0,_.jsx)("input",{type:"number",min:0,max:255,value:v,onChange:function(e){return ee(parseInt(e.target.value)||0,N,S,R)},style:oe})]}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--color-editor-channel-row-gap, 3px)"},children:[(0,_.jsx)("span",{style:{width:"var(--color-editor-channel-label-width, 12px)",fontSize:"var(--color-editor-channel-label-font-size, 9px)",fontWeight:600,color:"#43a047"},children:"G"}),(0,_.jsx)("input",{type:"range",min:0,max:255,value:N,onChange:function(e){return ee(v,parseInt(e.target.value),S,R)},onMouseDown:te,onMouseUp:ne,onMouseLeave:ne,style:(0,r.Z)((0,r.Z)({},re),{},{accentColor:"#43a047",flex:1})}),(0,_.jsx)("input",{type:"number",min:0,max:255,value:N,onChange:function(e){return ee(v,parseInt(e.target.value)||0,S,R)},style:oe})]}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--color-editor-channel-row-gap, 3px)"},children:[(0,_.jsx)("span",{style:{width:"var(--color-editor-channel-label-width, 12px)",fontSize:"var(--color-editor-channel-label-font-size, 9px)",fontWeight:600,color:"#1e88e5"},children:"B"}),(0,_.jsx)("input",{type:"range",min:0,max:255,value:S,onChange:function(e){return ee(v,N,parseInt(e.target.value),R)},onMouseDown:te,onMouseUp:ne,onMouseLeave:ne,style:(0,r.Z)((0,r.Z)({},re),{},{accentColor:"#1e88e5",flex:1})}),(0,_.jsx)("input",{type:"number",min:0,max:255,value:S,onChange:function(e){return ee(v,N,parseInt(e.target.value)||0,R)},style:oe})]})]})]}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 0"},children:[(0,_.jsx)("span",{style:{fontSize:10,fontWeight:600,color:"#666",minWidth:40},children:"Alpha"}),(0,_.jsx)("input",{type:"range",min:0,max:255,value:R,onChange:function(e){return ee(v,N,S,parseInt(e.target.value))},onMouseDown:te,onMouseUp:ne,onMouseLeave:ne,style:{flex:1,height:"var(--color-editor-alpha-slider-height, 6px)",cursor:"pointer",accentColor:"#666"}}),(0,_.jsxs)("span",{style:{fontSize:10,color:"#888",minWidth:32,textAlign:"right"},children:[Math.round(R/255*100),"%"]})]}),W&&(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:10,border:"1px solid #e0e0e0",borderRadius:8,backgroundColor:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,_.jsx)(F,{color:Z,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},Z),e.hsva);B(t),ee(e.rgba.r,e.rgba.g,e.rgba.b,R)},width:140,height:140})}),(0,_.jsx)(q,{hsva:Z,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},Z),{},{v:e.v});B(t);var n=y(t);ee(n.r,n.g,n.b,R)},style:{width:"100%",borderRadius:4}})]})]})}e.Inline=n,e.Component=function(e){var t=e.title,o=void 0===t?"Color":t;return(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,_.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#555",marginBottom:2},children:o}),(0,_.jsx)(n,(0,r.Z)({},e))]})}}(V||(V={}))},974:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var r,o=n(9439),a=n(2791),i=n(3413),l=n(184);!function(e){var t=e.commonFamilies=[{value:"serif",label:"Serif"},{value:"sans-serif",label:"Sans-serif"},{value:"monospace",label:"Monospace"},{value:"cursive",label:"Cursive"},{value:"fantasy",label:"Fantasy"},{value:"system-ui",label:"System"},{value:"Arial, sans-serif",label:"Arial"},{value:"Helvetica, Arial, sans-serif",label:"Helvetica"},{value:'"Times New Roman", Times, serif',label:"Times New Roman"},{value:"Georgia, serif",label:"Georgia"},{value:"Verdana, Geneva, sans-serif",label:"Verdana"},{value:"Tahoma, Geneva, sans-serif",label:"Tahoma"},{value:'"Courier New", Courier, monospace',label:"Courier New"},{value:'Consolas, "Courier New", monospace',label:"Consolas"}];e.Component=function(e){var n=e.family,r=e.style,s=e.weight,c=e.size,u=e.setFont,d=(0,a.useState)(!1),f=(0,o.Z)(d,2),p=f[0],h=f[1];function m(e){p||v(),u(e),h(!0)}var v=(0,a.useContext)(i._.App.PushToUndoStack);return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,l.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#555",marginBottom:2},children:"Font"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Common Families:"}),(0,l.jsxs)("select",{style:{flex:1},value:t.some((function(e){return e.value===n}))?n:"",onChange:function(e){var t=e.target.value;t&&m({family:t,style:r,weight:s,size:c})},children:[(0,l.jsx)("option",{value:"",children:"-"}),t.map((function(e){var t=e.value,n=e.label;return(0,l.jsx)("option",{value:t,children:n},t)}))]})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Custom Font:"}),(0,l.jsx)("input",{type:"text",style:{flex:1},value:n,onChange:function(e){m({family:e.target.value,style:r,weight:s,size:c})}})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)("span",{children:"Size:"}),(0,l.jsx)("input",{type:"number",step:.5,min:1,style:{width:60},value:c||"8.0",onChange:function(e){var t=parseFloat(e.target.value),o=isNaN(t)||t<1?"8.0":t.toFixed(1);m({family:n,style:r,weight:s,size:o})}}),(0,l.jsx)("span",{children:"Style:"}),(0,l.jsxs)("select",{style:{flex:1},value:r,onChange:function(e){m({family:n,style:e.target.value,weight:s,size:c})},children:[(0,l.jsx)("option",{value:"normal",children:"Normal"}),(0,l.jsx)("option",{value:"italic",children:"Italic"}),(0,l.jsx)("option",{value:"oblique",children:"Oblique"})]}),(0,l.jsx)("span",{children:"Weight:"}),(0,l.jsxs)("select",{style:{width:80},value:s,onChange:function(e){m({family:n,style:r,weight:e.target.value,size:c})},children:[(0,l.jsx)("option",{value:"normal",children:"Normal"}),(0,l.jsx)("option",{value:"bold",children:"Bold"}),(0,l.jsx)("option",{value:"100",children:"100"}),(0,l.jsx)("option",{value:"200",children:"200"}),(0,l.jsx)("option",{value:"300",children:"300"}),(0,l.jsx)("option",{value:"400",children:"400"}),(0,l.jsx)("option",{value:"500",children:"500"}),(0,l.jsx)("option",{value:"600",children:"600"}),(0,l.jsx)("option",{value:"700",children:"700"}),(0,l.jsx)("option",{value:"800",children:"800"}),(0,l.jsx)("option",{value:"900",children:"900"})]})]})]})}}(r||(r={}))},6768:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var r,o=n(9439),a=n(2791),i=n(7361),l=n(1702),s=n(3413),c=n(184);!function(e){function t(e){var t=e.initialCenter,n=e.positions,r=e.onUpdatePositions,u=e.useDegreesFlag,d=e.normal,f=e.initialAngle,p=e.initialScale,h=e.disabledFlag,m=e.relativePositions,v=e.applyCenterToRelativePositionsFlag,x=(0,a.useContext)(s._.OrientationEditor.ResetDataTrigger),g=(0,a.useContext)(s._.App.PushToUndoStack),y=(0,a.useMemo)((function(){return null!==f&&void 0!==f?f:0}),[f]),b=(0,a.useMemo)((function(){return null!==p&&void 0!==p?p:1}),[p]),N=(0,a.useMemo)((function(){return 1/b}),[b]),E=(0,a.useMemo)((function(){return n.map((function(e){return(0,i.toPolar)((0,i.subtract)(e,t))}))}),[t,n]),C=(0,a.useMemo)((function(){return(null!==m&&void 0!==m?m:[]).map(i.toPolar)}),[m,x]),I=(0,a.useMemo)((function(){return null!==h&&void 0!==h&&h}),[h]),S=(0,a.useState)(y),_=(0,o.Z)(S,2),A=_[0],T=_[1],P=(0,a.useState)(b),R=(0,o.Z)(P,2),k=R[0],w=R[1],M=(0,a.useState)(t.x),O=(0,o.Z)(M,2),j=O[0],L=O[1],D=(0,a.useState)(t.y),Z=(0,o.Z)(D,2),F=Z[0],B=Z[1],U=(0,a.useState)(!1),z=(0,o.Z)(U,2),W=z[0],G=z[1],H=(0,a.useState)(!1),K=(0,o.Z)(H,2),V=K[0],q=K[1];function X(e,t,o,a,l){V||(g(),q(!0));var s=o-y,c=a*N,u={x:e,y:t},f=[{cartesian:n,polar:E,cartesianCenter:u}];void 0!==m&&f.push({cartesian:m,polar:C,cartesianCenter:v?u:{x:0,y:0}});for(var p=0,h=f;p<h.length;p++){for(var x=h[p],b=x.cartesian,I=x.polar,S=x.cartesianCenter,_=0;_<b.length;_++){var A=b[_],T=structuredClone(I[_]);T.angle+=s,T.radius*=c;var P=(0,i.add)((0,i.toCartesian)(T),S);A.x=P.x,A.y=P.y}if(l)for(var R=Math.cos(s),k=Math.sin(s),w={x:d.x*R-d.y*k,y:d.x*k+d.y*R},M=0;M<b.length;M++){var O=b[M],j=(0,i.projectAndReject)((0,i.subtract)(O,S),w),L=(0,i.add)((0,i.subtract)(j.projection,j.rejection),S);O.x=L.x,O.y=L.y}}r(!1)}return(0,a.useRef)().current=k,(0,a.useEffect)((function(){T(y)}),[y]),(0,a.useEffect)((function(){w(b)}),[b]),(0,a.useEffect)((function(){L(t.x),B(t.y)}),[t]),(0,a.useEffect)((function(){G(!1),q(!1),T(y),w(b),L(t.x),B(t.y)}),[x,t,y,b]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr) auto minmax(0, 1fr)",columnGap:8,rowGap:4,alignItems:"center"},children:[(0,c.jsx)("span",{children:"x:"}),(0,c.jsx)(l.Z.Integer,{value:Math.round(j),setValue:function(e){L(e),X(e,F,A,k,W)},disabledFlag:I}),(0,c.jsx)("span",{children:"y:"}),(0,c.jsx)(l.Z.Integer,{value:Math.round(F),setValue:function(e){B(e),X(j,e,A,k,W)},disabledFlag:I})]}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr) auto minmax(0, 1fr) auto",columnGap:8,rowGap:4,alignItems:"center"},children:[(0,c.jsx)("span",{children:"rotation:"}),(0,c.jsx)(l.Z.Angle,{value:A,setValue:function(e){T(e),X(j,F,e,k,W)},useDegreesFlag:u,disabledFlag:I}),(0,c.jsx)("span",{children:"scale:"}),(0,c.jsx)(l.Z.Integer,{value:Math.round(k),setValue:function(e){X(j,F,A,e,W),w(e)},disabledFlag:I}),(0,c.jsx)("button",{onClick:function(){var e=!W;G(e),X(j,F,A,k,e)},disabled:I,children:"Flip"})]})]})})}e.Component=t,e.Simplified=function(e){var n=e.boundingVector0,r=e.boundingVector1,o=e.positions,l=e.onUpdatePositions,u=e.useDegreesFlag,d=e.orthogonalizeHelper,f=e.initialAngle,p=e.initialScale,h=e.disabledFlag,m=e.relativePositions,v=(0,a.useContext)(s._.OrientationEditor.ResetDataTrigger),x=(0,a.useMemo)((function(){return(null!==d&&void 0!==d?d:i.orthogonalizeLeft)((0,i.subtract)(r,n))}),[d,n,r,v]),g=(0,a.useMemo)((function(){return(0,i.scaleUp)((0,i.add)(n,r),.5)}),[n,r,v]);return(0,c.jsx)(t,{initialCenter:g,positions:o,onUpdatePositions:l,useDegreesFlag:u,normal:x,initialAngle:null!==f&&void 0!==f?f:(0,i.asAngle)(x),initialScale:null!==p&&void 0!==p?p:(0,i.distance)(n,r),disabledFlag:h,relativePositions:m})}}(r||(r={}))},1959:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(1413),o=n(9439),a=n(2791),i=n(4164),l=n(7587),s=n(184),c=function(e){var t=e.hint,n=e.position,r=e.theme,o=document.body;return(0,i.createPortal)((0,s.jsx)("div",{style:{position:"fixed",left:"".concat(n.left,"px"),top:"".concat(n.top,"px"),transform:"translate(-30%, -20%)",padding:"6px 10px",borderRadius:"6px",background:r.colors.surface,color:r.colors.text,fontSize:r.typography.fontSize.md,fontWeight:600,whiteSpace:"nowrap",zIndex:1e3,boxShadow:r.shadows.md,animation:"fadeIn 0.2s ease-out",pointerEvents:"none"},children:t}),o)},u=a.forwardRef((function(e,t){var n,i,u=e.onClick,d=e.icon,f=e.label,p=e.description,h=e.hint,m=e.disabled,v=void 0!==m&&m,x=e.variant,g=void 0===x?"secondary":x,y=(0,l.Fg)().theme,b=a.useState(!1),N=(0,o.Z)(b,2),E=N[0],C=N[1],I=a.useState(!1),S=(0,o.Z)(I,2),_=S[0],A=S[1],T=a.useRef(null),P=a.useState({top:0,left:0}),R=(0,o.Z)(P,2),k=R[0],w=R[1],M=function(){switch(g){case"primary":return{background:v?y.colors.surfaceHover:_?y.colors.primaryActive:E?y.colors.primaryHover:y.colors.primary,color:y.colors.textInverse,border:"1px solid ".concat(y.colors.primary)};case"accent":return{background:v?y.colors.surfaceHover:_?y.colors.accent:E?y.colors.accentHover:"transparent",color:v?y.colors.textMuted:E?y.colors.accent:y.colors.textSecondary,border:"1px solid ".concat(E?y.colors.accent:y.colors.border)};case"danger":return{background:v?y.colors.surfaceHover:_?y.colors.error:E?y.colors.error+"20":"transparent",color:v?y.colors.textMuted:E?y.colors.error:y.colors.text,border:"1px solid ".concat(E?y.colors.error:y.colors.border)};case"simpleHighlight":return{background:"transparent",color:v?y.colors.textMuted:y.colors.text,border:"2px solid ".concat(y.colors.primary)};default:return{background:v||_||E?y.colors.surfaceHover:"transparent",color:v?y.colors.textMuted:y.colors.text,border:"1px solid ".concat(y.colors.border)}}}(),O=null!==(n=null===f||void 0===f||null===(i=f.trim)||void 0===i?void 0:i.call(f))&&void 0!==n?n:f,j=Boolean(O),L=Boolean(p),D=j||L;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{ref:t||T,onClick:u,disabled:v,onMouseEnter:function(){if(T.current&&h&&!v){var e=T.current.getBoundingClientRect();w({top:e.top+e.height+10,left:e.right+10})}C(!0)},onMouseLeave:function(){return C(!1)},onMouseDown:function(){return A(!0)},onMouseUp:function(){return A(!1)},style:(0,r.Z)((0,r.Z)({position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:D?"6px":"0",height:y.buttonSizes.md.height,padding:y.buttonSizes.md.padding,borderRadius:y.buttonSizes.md.borderRadius,fontSize:y.buttonSizes.md.fontSize,fontWeight:"600",cursor:v?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:v?.4:1,flex:1,minWidth:"0"},M),{},{boxShadow:v?"none":_||E?y.shadows.sm:"none",transform:v?"none":_?"scale(0.95)":E?"translateY(-1px)":"translateY(0)"}),children:[(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:y.buttonSizes.md.iconSize,opacity:v?.5:1},children:d&&d}),D&&(0,s.jsxs)("div",{style:{textAlign:"center",opacity:E?1:.9},children:[j&&(0,s.jsx)("div",{style:{fontSize:y.typography.fontSize.sm,fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",maxWidth:"120px",opacity:E?1:.9},children:f}),L&&(0,s.jsx)("div",{style:{fontSize:y.typography.fontSize.xs,color:v?y.colors.textMuted:"primary"===g?y.colors.textInverse+"80":y.colors.textMuted,lineHeight:"1.2",maxWidth:"120px",opacity:E?1:.9},children:p})]})]}),E&&h&&!v&&(0,s.jsx)(c,{hint:h,position:k,theme:y})]})}))},6902:function(e,t,n){"use strict";n.d(t,{T:function(){return s},Z:function(){return c}});n(2791);var r=n(9100),o=(0,r.Z)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),a=(0,r.Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i=n(7587),l=n(184),s=function(e){var t=(0,i.Fg)(),n=t.theme,r=t.isDarkMode,s=t.toggleTheme;return(0,l.jsx)("button",{onClick:s,className:"minimal-theme-toggle ".concat(e.className||""),style:{background:"transparent",border:"none",color:n.colors.textSecondary,fontSize:n.typography.fontSize.md,cursor:"pointer",padding:n.spacing.sm,borderRadius:n.borderRadius.md,transition:n.transitions.default,outline:"none"},onMouseEnter:function(e){e.currentTarget.style.color=n.colors.text,e.currentTarget.style.background=n.colors.surfaceHover},onMouseLeave:function(e){e.currentTarget.style.color=n.colors.textSecondary,e.currentTarget.style.background="transparent"},onFocus:function(e){e.currentTarget.style.boxShadow="0 0 0 2px ".concat(n.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.boxShadow="none"},title:r?"Switch to Light Mode":"Switch to Dark Mode",children:r?(0,l.jsx)(o,{size:18}):(0,l.jsx)(a,{size:18})})},c=s},3413:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r,o=n(1413),a=n(7762),i=n(2791),l=n(7089),s=n(9750),c=n(9967),u=n(6176),d=n(7587),f=n(184);!function(e){var t,n,r,p,h,m,v,x,g,y,b,N,E,C;function I(e){var n=e.children,r=e.settingsRecord,a=e.setSettingsRecord,i=e.basePairOnMouseDownHelper,l=e.labelClassName,s=e.basePairClassName,c=e.pushToUndoStack,u=e.basePairRadius,p=e.indicesOfFrozenNucleotides,h=e.labelContentDefaultStyles,m=e.basePairAverageDistances,x=e.updateBasePairAverageDistances,b=e.updateLabelContentDefaultStyles,N=e.interactionConstraintOptions,C=e.updateInteractionConstraintOptions,I=e.setNucleotideKeysToRerender,S=e.setBasePairKeysToRerender,_=e.updateRnaMoleculeNameHelper,A=e.setBasePairKeysToEdit,T=e.singularRnaComplexFlag,P=e.averageNucleotideBoundingRectHeight,R=e.resetOrientationDataTrigger;return(0,f.jsx)(d.f6,{settingsRecord:r,updateSettings:function(e){var t=(0,o.Z)((0,o.Z)({},r),e);a(t)},children:(0,f.jsx)(g.OnMouseDownHelper.Provider,{value:i,children:(0,f.jsx)(t.PushToUndoStack.Provider,{value:c,children:(0,f.jsx)(t.IndicesOfFrozenNucleotides.Provider,{value:p,children:(0,f.jsx)(y.ClassName.Provider,{value:l,children:(0,f.jsx)(g.ClassName.Provider,{value:s,children:(0,f.jsx)(g.Radius.Provider,{value:u,children:(0,f.jsx)(g.AverageDistances.Provider,{value:m,children:(0,f.jsx)(g.UpdateAverageDistances.Provider,{value:x,children:(0,f.jsx)(y.Content.DefaultStyles.Provider,{value:h,children:(0,f.jsx)(y.Content.UpdateDefaultStyle.Provider,{value:b,children:(0,f.jsx)(t.InteractionConstraintOptions.Provider,{value:N,children:(0,f.jsx)(t.UpdateInteractionConstraintOptions.Provider,{value:C,children:(0,f.jsx)(v.SetKeysToRerender.Provider,{value:I,children:(0,f.jsx)(g.SetKeysToRerender.Provider,{value:S,children:(0,f.jsx)(t.Settings.Provider,{value:r,children:(0,f.jsx)(t.UpdateRnaMoleculeNameHelper.Provider,{value:_,children:(0,f.jsx)(g.SetKeysToEdit.Provider,{value:A,children:(0,f.jsx)(t.SingularRnaComplexFlag.Provider,{value:T,children:(0,f.jsx)(v.AverageBoundingRectHeight.Provider,{value:P,children:(0,f.jsx)(E.ResetDataTrigger.Provider,{value:R,children:n})})})})})})})})})})})})})})})})})})})})})}(n=t||(t=e.App||(e.App={}))).SetMouseOverText=(0,i.createContext)((function(e){})),n.Settings=(0,i.createContext)(s.Z),n.ComplexDocumentName=(0,i.createContext)(""),n.SetComplexDocumentName=(0,i.createContext)((function(e){})),n.UpdateRnaMoleculeNameHelper=(0,i.createContext)((function(e,t,n){})),n.InteractionConstraintOptions=(0,i.createContext)(c.Uq.DEFAULT_OPTIONS),n.UpdateInteractionConstraintOptions=(0,i.createContext)((function(e){})),n.IndicesOfFrozenNucleotides=(0,i.createContext)({}),n.PushToUndoStack=(0,i.createContext)((function(){})),n.RnaComplexProps=(0,i.createContext)(void 0),n.SingularRnaComplexFlag=(0,i.createContext)(void 0),(p=r||(r=e.RnaComplex||(e.RnaComplex={}))).Name=(0,i.createContext)(""),p.Index=(0,i.createContext)(NaN),p.BasePairs=(0,i.createContext)({}),p.SingularRnaMoleculeFlag=(0,i.createContext)(void 0),(m=h||(h=e.RnaMolecule||(e.RnaMolecule={}))).Name=(0,i.createContext)(""),m.FirstNucleotideIndex=(0,i.createContext)(NaN),(x=v||(v=e.Nucleotide||(e.Nucleotide={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t){})),x.OnMouseOverHelper=(0,i.createContext)((function(e,t){})),x.Index=(0,i.createContext)(NaN),x.SetKeysToRerender=(0,i.createContext)((function(e){})),x.LabelsOnlyFlag=(0,i.createContext)(!1),x.Symbol=(0,i.createContext)(""),x.AverageBoundingRectHeight=(0,i.createContext)(0),function(e){e.ClassName=(0,i.createContext)(void 0);var t,n=e.DEFAULT_RADIUS=1,r=e.DEFAULT_DISTANCES={},o=(0,a.Z)(l.BasePair.types);try{for(o.s();!(t=o.n()).done;){r[t.value]=12*n}}catch(s){o.e(s)}finally{o.f()}e.Radius=(0,i.createContext)(n),e.DataToEditPerRnaComplex=(0,i.createContext)({add:[],delete:[]}),e.SetKeysToEdit=(0,i.createContext)((function(e){})),e.SetKeysToRerender=(0,i.createContext)((function(e){})),e.UpdateAverageDistances=(0,i.createContext)((function(e,t){})),e.AverageDistances=(0,i.createContext)({}),e.AverageStrokeWidth=(0,i.createContext)(u.DEFAULT_STROKE_WIDTH),e.OnMouseDownHelper=(0,i.createContext)((function(e,t,n){}))}(g||(g=e.BasePair||(e.BasePair={}))),function(e){var t,n,r;e.ClassName=(0,i.createContext)(void 0);(n=t||(t=e.Content||(e.Content={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t){})),n.DefaultStyles=(0,i.createContext)({}),n.UpdateDefaultStyle=(0,i.createContext)((function(e,t,n){})),function(e){var t,n;(t||(t=e.Body||(e.Body={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n){})),(n||(n=e.Endpoint||(e.Endpoint={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n,r){}))}(r||(r=e.Line||(e.Line={})))}(y||(y=e.Label||(e.Label={}))),function(e){var t,n;(t||(t=e.Body||(e.Body={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n){})),(n||(n=e.Breakpoint||(e.Breakpoint={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n,r){}))}(b||(b=e.SequenceConnector||(e.SequenceConnector={}))),(N||(N=e.TextAnnotation||(e.TextAnnotation={}))).OnMouseDownHelper=(0,i.createContext)((function(e,t,n){})),(E||(E=e.OrientationEditor||(e.OrientationEditor={}))).ResetDataTrigger=(0,i.createContext)(!1),(C||(C=e.Collapsible||(e.Collapsible={}))).Width=(0,i.createContext)(void 0),e.Component=I;e.MemoizedComponent=i.memo(I)}(r||(r={}))},7587:function(e,t,n){"use strict";n.d(t,{Fg:function(){return g},f6:function(){return x}});var r=n(4942),o=n(9439),a=n(7762),i=n(2791),l=n(9750),s=n(184),c="#7491C8",u="#A47764",d={colors:{primary:c,primaryHover:"#6683BA",primaryActive:"#5A78AF",background:"#EFE8E0",backgroundSecondary:"#EAE2DA",surface:"#F4EEE7",surfaceHover:"#EDE5DD",border:"#D9CFC8",borderLight:"#E7DFD7",borderDark:"#C9BFB7",text:"#2C2320",textSecondary:"#5B4E48",textMuted:"#8E847E",textInverse:"#FFFFFF",success:"#899F6A",warning:"#D1A56C",error:"#C96B5A",info:c,accent:u,accentHover:"#8F6657",shadow:"rgba(61, 35, 19, 0.06)",overlay:"rgba(40, 26, 18, 0.40)",highlight:"#F2E9E2",successLight:"#EDF2E6",warningLight:"#FFF1DB",errorLight:"#F6E6E4",infoLight:"#E8EFF9",textStrong:"#1E1512",textWeak:"#A09088",surfaceStrong:"#E5DBD3",surfaceWeak:"#FAF7F2"},spacing:{xs:"4px",sm:"8px",md:"12px",lg:"16px",xl:"20px",xxl:"24px",xxxl:"32px"},typography:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:{xs:"12px",sm:"13px",md:"15px",lg:"17px",xl:"19px",xxl:"22px"},fontWeight:{light:"300",normal:"400",medium:"500",semibold:"600",bold:"700"},lineHeight:{tight:"1.3",normal:"1.6",relaxed:"1.8"}},borderRadius:{none:"0",sm:"4px",md:"8px",lg:"10px",xl:"14px",full:"9999px"},shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.05), 0 1px 1px rgba(0,0,0,0.03)",md:"0 3px 8px rgba(16,24,20,0.08)",lg:"0 8px 20px rgba(16,24,20,0.10)",xl:"0 16px 32px rgba(16,24,20,0.12)",inner:"inset 0 2px 4px rgba(0,0,0,0.04)"},buttonSizes:{sm:{height:"30px",padding:"0 10px",fontSize:"13px",iconSize:"16px",borderRadius:"6px"},md:{height:"38px",padding:"0 14px",fontSize:"15px",iconSize:"18px",borderRadius:"8px"},lg:{height:"46px",padding:"0 18px",fontSize:"17px",iconSize:"20px",borderRadius:"10px"}},transitions:{default:"all 0.18s ease-out",fast:"all 0.12s ease-out",slow:"all 0.28s ease-out"},colorPalleteCircleFills:["#E8C26A","#A9E890","#E890C0"]},f={colors:{primary:"#C89B85",primaryHover:"#BE8F79",primaryActive:"#B4836D",background:"#25211F",backgroundSecondary:"#292421",surface:"#2E2826",surfaceHover:"#352E2B",border:"#3A332F",borderLight:"#473F3B",borderDark:"#2E2724",text:"#F3EEEA",textSecondary:"#D9CFC8",textMuted:"#B7AAA4",textInverse:"#0F0E0D",success:"#94B17E",warning:"#D2A274",error:"#C77C6F",info:"#A1BDE6",accent:u,accentHover:"#B78976",shadow:"rgba(0, 0, 0, 0.45)",overlay:"rgba(14, 10, 8, 0.68)",highlight:"#302A27",successLight:"#1E261C",warningLight:"#272016",errorLight:"#261A18",infoLight:"#182231",textStrong:"#FAF7F4",textWeak:"#B9ADA7",surfaceStrong:"#292421",surfaceWeak:"#352E2B"},spacing:d.spacing,typography:d.typography,borderRadius:d.borderRadius,shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.22)",md:"0 4px 10px rgba(0,0,0,0.32)",lg:"0 10px 24px rgba(0,0,0,0.38)",xl:"0 18px 40px rgba(0,0,0,0.44)",inner:"inset 0 2px 4px rgba(0,0,0,0.28)"},buttonSizes:d.buttonSizes,transitions:d.transitions,colorPalleteCircleFills:["#4E7DA6","#7A9E3E","#C84E4E"]},p=(0,i.createContext)(void 0),h="exornata_dark_mode",m=31536e3;function v(){if("undefined"===typeof document)return null;var e,t=document.cookie.split(";"),n=(0,a.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value.trim().split("="),i=(0,o.Z)(r,2),l=i[0],s=i[1];if(l===h)return"true"===s}}catch(c){n.e(c)}finally{n.f()}return null}var x=function(e){var t=e.children,n=e.settingsRecord,a=e.updateSettings,c=(0,i.useState)((function(){var e=v();return null!==e&&void 0!==e&&e})),u=(0,o.Z)(c,2),x=u[0],g=u[1],y=i.useRef(x);y.current=x;var b=i.useRef(a);b.current=a,(0,i.useEffect)((function(){var e=v();if(null===e){if(n&&void 0!==n[l.pE.DARK_MODE])g(!!n[l.pE.DARK_MODE]);else if("undefined"!==typeof window&&window.matchMedia){var t=window.matchMedia("(prefers-color-scheme: dark)");g(t.matches)}}else g(e)}),[n]),(0,i.useEffect)((function(){var e;if(null===v()&&(!n||void 0===n[l.pE.DARK_MODE])&&"undefined"!==typeof window&&window.matchMedia){var t=window.matchMedia("(prefers-color-scheme: dark)"),r=function(e){return g(e.matches)};return null===(e=t.addEventListener)||void 0===e||e.call(t,"change",r),function(){var e;return null===(e=t.removeEventListener)||void 0===e?void 0:e.call(t,"change",r)}}}),[n]);var N=(0,i.useCallback)((function(e){var t=b.current;g(e),function(e){"undefined"!==typeof document&&(document.cookie="".concat(h,"=").concat(e,"; path=/; max-age=").concat(m,"; SameSite=Lax"))}(e),t&&t((0,r.Z)({},l.pE.DARK_MODE,e))}),[]),E=(0,i.useCallback)((function(){return N(!y.current)}),[]),C=x?f:d;(0,i.useEffect)((function(){var e=document.documentElement,t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce((function(r,o){var a=n.length?n+"-":"";return"object"===typeof t[o]&&null!==t[o]?Object.assign(r,e(t[o],a+o)):r[a+o]=t[o],r}),{})},n={color:C.colors,spacing:C.spacing,"font-size":C.typography.fontSize,"font-weight":C.typography.fontWeight,"line-height":C.typography.lineHeight,"border-radius":C.borderRadius,shadow:C.shadows,transition:C.transitions};Object.entries(n).forEach((function(n){var r=(0,o.Z)(n,2),a=r[0],i=r[1],l=t(i);Object.entries(l).forEach((function(t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];e.style.setProperty("--".concat(a,"-").concat(r),i)}))})),e.style.setProperty("--font-family",C.typography.fontFamily),e.setAttribute("data-theme",x?"dark":"light")}),[C,x]);var I=(0,i.useMemo)((function(){return{theme:C,isDarkMode:x,toggleTheme:E,setTheme:N}}),[C,x,E,N]);return(0,s.jsx)(p.Provider,{value:I,children:t})},g=function(){var e=(0,i.useContext)(p);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}},6745:function(e,t){"use strict";t.__esModule=!0,t.affineMatrixToString=t.identity=t.transformVector=t.parseAffineMatrix=t.multiplyAffineMatrices=void 0,t.multiplyAffineMatrices=function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],l=e[5],s=t[0],c=t[1],u=t[2],d=t[3],f=t[4],p=t[5];return[n*s+o*c,r*s+a*c,n*u+o*d,r*u+a*d,n*f+o*p+i,r*f+a*p+l]};var n={minimum:1,maximum:1,parser:function(e){var t=e[0],n=Math.cos(t),r=Math.sin(t);return[n,r,-r,n,0,0]}},r={matrix:{minimum:6,maximum:6,parser:function(e){return e}},translate:{minimum:2,maximum:2,parser:function(e){return[1,0,0,1,e[0],e[1]]}},translatex:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,e[0],0]}},translatey:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,0,e[0]]}},scale:{minimum:1,maximum:2,parser:function(e){var t=e[0],n=t;return e.length>1&&(n=e[1]),[t,0,0,n,0,0]}},scalex:{minimum:1,maximum:1,parser:function(e){return[e[0],0,0,1,0,0]}},scaley:{minimum:1,maximum:1,parser:function(e){return[1,0,0,e[0],0,0]}},rotate:n,rotatez:n,skew:{minimum:1,maximum:2,parser:function(e){var t=e[0],n=0;return e.length>1&&(n=Math.tan(e[1])),[1,n,Math.tan(t),1,0,0]}},skewx:{minimum:1,maximum:1,parser:function(e){return[1,0,Math.tan(e[0]),1,0,0]}},skewy:{maximum:1,minimum:1,parser:function(e){return[1,Math.tan(e[0]),0,1,0,0]}}};t.parseAffineMatrix=function(e){var t=(e=e.toLowerCase()).match(/^\s*([a-z]+)\s*\(([\d.,\s-e]+)\)\s*$/);if(null==t)throw"Unrecognized input-text format";var n=t[1];if(!(n in r))throw"Unrecognized transform type.";var o=r[n],a=o.minimum,i=o.maximum,l=o.parser,s=t[2],c=(s=(s=(s=s.trim()).replaceAll(/\s*,\s*/g,",")).replaceAll(/\s+/g,",")).split(",").map(Number.parseFloat),u=c.length;if(u<a)throw"The number of input numbers (".concat(u,") is less than the minimum required (").concat(a,")");if(u>i)throw"The number of input numbers (".concat(u,") is greater than the maximum required (").concat(i,")");return l(c)},t.transformVector=function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],l=e[5],s=t.x,c=t.y;return{x:n*s+o*c+i,y:r*s+a*c+l}},t.identity=function(){return[1,0,0,1,0,0]},t.affineMatrixToString=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5];return"matrix(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,", ").concat(a,", ").concat(i,")")}},3871:function(e,t,n){"use strict";n.r(t),n.d(t,{BLACK:function(){return d},BRIGHT_GRAY:function(){return f},CHARCOAL_GRAY:function(){return p},ColorFormat:function(){return i},DEFAULT_ALPHA:function(){return c},DEFAULT_COLOR_FORMAT:function(){return u},FOREST_GREEN:function(){return h},HandleUndefined:function(){return b},areEqual:function(){return E},byteMaps:function(){return s},colorFormats:function(){return l},fromCssString:function(){return N},fromHexadecimal:function(){return v},fromNumber:function(){return x},toCSS:function(){return m},toHexadecimal:function(){return y},toNumber:function(){return g}});var r,o=n(1413),a=n(4942),i=function(e){return e.RGB="RGB",e.RGBA="RGBA",e.ARGB="ARGB",e.BGR="BGR",e.BGRA="BGRA",e.ABGR="ABGR",e}({}),l=Object.values(i),s=(r={},(0,a.Z)(r,i.RGB,{red:2,green:1,blue:0}),(0,a.Z)(r,i.RGBA,{red:3,green:2,blue:1,alpha:0}),(0,a.Z)(r,i.ARGB,{red:2,green:1,blue:0,alpha:3}),(0,a.Z)(r,i.BGR,{red:0,green:1,blue:2}),(0,a.Z)(r,i.BGRA,{red:1,green:2,blue:3,alpha:0}),(0,a.Z)(r,i.ABGR,{red:0,green:1,blue:2,alpha:3}),r),c=255,u=i.RGB,d={red:0,green:0,blue:0,alpha:c},f={red:192,green:192,blue:192,alpha:c},p={red:54,green:64,blue:79},h={red:1,green:68,blue:33};function m(e){var t="".concat(e.red,", ").concat(e.green,", ").concat(e.blue);return null==e.alpha||Number.isNaN(e.alpha)||255===e.alpha?"rgb(".concat(t,")"):"rgba(".concat(t,", ").concat(e.alpha/255,")")}function v(e,t){return x(Number.parseInt(e,16),t)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n={0:255&e,1:e>>>8&255,2:e>>>16&255,3:e>>>24&255},r=s[t],a={red:n[r.red],green:n[r.green],blue:n[r.blue]};return void 0!==r.alpha&&(a=(0,o.Z)((0,o.Z)({},a),{},{alpha:n[r.alpha]})),a}function g(e,t){var n=s[t],r=void 0===n.alpha||void 0===e.alpha?0:e.alpha<<8*n.alpha;return e.red<<8*n.red|e.green<<8*n.green|e.blue<<8*n.blue|r}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(e,t).toString(16).toUpperCase();return n?"0".repeat(2*t.length-r.length)+r:r}var b=function(e){return e.THROW_ERROR="throw error",e.RETURN_BLACK="return black",e.RETURN_TRANSPARENT="return transparent",e}({});function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.RGB,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.RETURN_BLACK,r=/^rgb\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})\)$/.exec(e);if(null!==r)return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3])};if(null!==(r=/^rgba\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^rgb\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3])};if(null!==(r=/^rgba\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^\d+$/.exec(e)))return x(Number.parseInt(r[0]),t);if(null!==(r=/^#([abcdefABCDEF\d]+)$/.exec(e)))return v(r[1],t);if("undefined"===e)switch(n){case b.RETURN_BLACK:return d;case b.RETURN_TRANSPARENT:return{red:0,green:0,blue:0,alpha:0};case b.THROW_ERROR:throw'Unsupported color literal "'.concat(e,'"');default:throw"Unhandled switch case"}switch(e){case"none":return{red:0,blue:0,green:0,alpha:0};case"black":return{red:0,green:0,blue:0};case"silver":case"silver":return{red:192,green:192,blue:192};case"gray":return{red:128,green:128,blue:128};case"white":case"white":return{red:255,green:255,blue:255};case"maroon":case"maroon":return{red:128,green:0,blue:0};case"red":case"red":return{red:255,green:0,blue:0};case"purple":case"pruple":return{red:128,green:0,blue:128};case"fuchsia":case"magenta":return{red:255,green:0,blue:255};case"green":return{red:0,green:128,blue:0};case"lime":case"lime":return{red:0,green:255,blue:0};case"olive":case"olive":return{red:128,green:128,blue:0};case"yellow":case"yellow":return{red:255,green:255,blue:0};case"navy":case"navy":return{red:0,green:0,blue:128};case"blue":return{red:0,green:0,blue:255};case"teal":case"teal":return{red:0,green:128,blue:128};case"aqua":case"cyan":return{red:0,green:255,blue:255};case"aliceblue":return{red:240,green:248,blue:255};case"antiquewhite":return{red:250,green:235,blue:215};case"aquamarine":return{red:127,green:255,blue:212};case"azure":return{red:240,green:255,blue:255};case"beige":return{red:245,green:245,blue:220};case"bisque":return{red:255,green:228,blue:196};case"blanchedalmond":return{red:255,green:235,blue:205};case"blueviolet":return{red:138,green:43,blue:226};case"brown":return{red:165,green:42,blue:42};case"burlywood":return{red:222,green:184,blue:135};case"cadetblue":return{red:95,green:158,blue:160};case"chartreuse":return{red:127,green:255,blue:0};case"chocolate":return{red:210,green:105,blue:30};case"coral":return{red:255,green:127,blue:80};case"cornflowerblue":return{red:100,green:149,blue:237};case"cornsilk":return{red:255,green:248,blue:220};case"crimson":return{red:220,green:20,blue:60};case"darkblue":return{red:0,green:0,blue:139};case"darkcyan":return{red:0,green:139,blue:139};case"darkgoldenrod":return{red:184,green:134,blue:11};case"darkgreen":return{red:0,green:100,blue:0};case"darkkhaki":return{red:189,green:183,blue:107};case"darkmagenta":return{red:139,green:0,blue:139};case"darkolivegreen":return{red:85,green:107,blue:47};case"darkorange":return{red:255,green:140,blue:0};case"darkorchid":return{red:139,green:0,blue:0};case"darksalmon":return{red:233,green:150,blue:122};case"darkseagreen":return{red:143,green:188,blue:143};case"darkslateblue":return{red:72,green:61,blue:139};case"darkslategray":return{red:47,green:79,blue:79};case"darkturqoise":return{red:0,green:206,blue:209};case"darkviolet":return{red:148,green:0,blue:211};case"deeppink":return{red:255,green:20,blue:147};case"deepskyblue":return{red:0,green:191,blue:255};case"dimgray":return{red:105,green:105,blue:105};case"dodgerblue":return{red:30,green:144,blue:255};case"firebrick":return{red:178,green:34,blue:34};case"floralwhite":return{red:255,green:250,blue:240};case"forestgreen":return{red:34,green:139,blue:34};case"gainsboro":return{red:220,green:220,blue:220};case"ghostwhite":return{red:248,green:248,blue:255};case"gold":return{red:255,green:215,blue:0};case"goldenrod":return{red:218,green:165,blue:32};case"greenyellow":return{red:173,green:255,blue:47};case"honeydew":return{red:240,green:255,blue:240};case"hotpink":return{red:255,green:105,blue:180};case"indianred":return{red:205,green:92,blue:92};case"indigo":return{red:75,green:0,blue:130};case"ivory":return{red:255,green:255,blue:240};case"khaki":return{red:240,green:230,blue:140};case"lavender":return{red:230,green:230,blue:250};case"lavenderblush":return{red:255,green:240,blue:245};case"lawngreen":return{red:124,green:252,blue:0};case"lemonchiffon":return{red:255,green:250,blue:205};case"lightblue":return{red:173,green:216,blue:230};case"lightcoral":return{red:240,green:128,blue:128};case"lightcyan":return{red:224,green:255,blue:255};case"lightgoldenrodyellow":return{red:250,green:250,blue:210};case"lightgray":case"lightgrey":return{red:211,green:211,blue:211};case"lightgreen":return{red:148,green:238,blue:144};case"lightpink":return{red:255,green:182,blue:193};case"lightsalmon":return{red:255,green:160,blue:122};case"lightseagreen":return{red:32,green:178,blue:170};case"lightskyblue":return{red:135,green:206,blue:250};case"lightslategray":case"lightslategrey":return{red:119,green:136,blue:153};case"lightsleetblue":return{red:176,green:196,blue:222};case"lightyellow":return{red:255,green:255,blue:224};case"limegreen":return{red:50,green:205,blue:50};case"linen":return{red:250,green:240,blue:230};case"mediumaquamarine":return{red:102,green:205,blue:170};case"mediumblue":return{red:0,green:0,blue:205};case"mediumorchid":return{red:186,green:85,blue:211};case"mediumpruple":return{red:147,green:112,blue:219};case"mediumseagreen":return{red:60,green:179,blue:113};case"mediumslateblue":return{red:123,green:104,blue:238};case"mediumspringgreen":return{red:0,green:250,blue:154};case"mediumturquiose":return{red:72,green:209,blue:204};case"mediumvioletred":return{red:199,green:21,blue:133};case"midnightblue":return{red:25,green:25,blue:112};case"mintcream":return{red:245,green:255,blue:250};case"mistyrose":return{red:255,green:228,blue:225};case"moccasin":return{red:255,green:228,blue:181};case"navajowhite":return{red:255,green:222,blue:173};case"oldlace":return{red:253,green:245,blue:230};case"olivedrab":return{red:107,green:142,blue:35};case"orange":return{red:255,green:165,blue:0};case"orangered":return{red:255,green:69,blue:0};case"orchid":return{red:218,green:112,blue:214};case"palegoldenrod":return{red:238,green:232,blue:170};case"palegreen":return{red:152,green:251,blue:152};case"paleturquoise":return{red:175,green:238,blue:238};case"palevioletred":return{red:219,green:112,blue:147};case"papayawhip":return{red:255,green:239,blue:213};case"peachpuff":return{red:255,green:218,blue:185};case"peru":return{red:205,green:133,blue:63};case"pink":return{red:255,green:192,blue:203};case"plum":return{red:221,green:160,blue:221};case"powderblue":return{red:176,green:224,blue:230};case"rosybrown":return{red:188,green:143,blue:143};case"royalblue":return{red:65,green:105,blue:225};case"saddlebrown":return{red:139,green:69,blue:19};case"salmon":return{red:250,green:128,blue:114};case"sandybrown":return{red:244,green:264,blue:96};case"seagreen":return{red:46,green:139,blue:87};case"seashell":return{red:255,green:245,blue:238};case"sienna":return{red:160,green:82,blue:45};case"skyblue":return{red:135,green:206,blue:235};case"slateblue":return{red:106,green:80,blue:205};case"slategray":case"slategrey":return{red:112,green:128,blue:144};case"snow":return{red:255,green:250,blue:250};case"springgreen":return{red:0,green:255,blue:127};case"steelblue":return{red:70,green:130,blue:180};case"tan":return{red:210,green:180,blue:140};case"thistle":return{red:216,green:191,blue:216};case"tomato":return{red:255,green:99,blue:71};case"turquoise":return{red:64,green:224,blue:208};case"violet":return{red:238,green:130,blue:238};case"wheat":return{red:245,green:222,blue:179};case"yellowgreen":return{red:154,green:205,blue:50};default:throw"Unsupported color literal: ".concat(e)}}function E(e,t){return e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha}},433:function(e,t,n){"use strict";n.r(t),n.d(t,{PartialFont:function(){return l},parseFontSize:function(){return s}});var r=n(136),o=n(516),a=n(5671),i=n(3144),l=function(){function e(t,n,r){(0,a.Z)(this,e),this.family=void 0,this.style=void 0,this.weight=void 0,this.family=t,this.style=n,this.weight=r}return(0,i.Z)(e,null,[{key:"fromFontId",value:function(t){switch(t){case 0:default:return new e("Helvetica","normal","normal");case 1:return new e("Helvetica","italic","normal");case 2:return new e("Helvetica","normal","bold");case 3:return new e("Helvetica","italic","bold");case 4:case 12:return new e("TimesRoman","normal","normal");case 5:return new e("TimesRoman","italic","normal");case 6:return new e("TimesRoman","normal","bold");case 7:return new e("TimesRoman","italic","bold");case 8:return new e("Courier","normal","normal");case 9:return new e("Courier","italic","normal");case 10:return new e("Courier","normal","bold");case 11:return new e("Courier","italic","bold");case 13:return new e("Dialog","normal","normal");case 14:return new e("Dialog","italic","normal");case 15:return new e("Dialog","normal","bold");case 16:return new e("Dialog","italic","bold");case 17:return new e("DialogInput","normal","normal");case 18:return new e("DialogInput","italic","normal");case 19:return new e("DialogInput","normal","bold");case 20:return new e("DialogInput","italic","bold")}}},{key:"toFontId",value:function(e){switch("".concat(e.family,"_").concat(e.style,"_").concat(e.weight)){default:case"Helvetica_normal_normal":return 0;case"Helvetica_italic_normal":return 1;case"Helvetica_normal_bold":return 2;case"Helvetica_italic_bold":return 3;case"TimesRoman_normal_normal":return 4;case"TimesRoman_italic_normal":return 5;case"TimesRoman_normal_bold":return 6;case"TimesRoman_italic_bold":return 7;case"Courier_normal_normal":return 8;case"Courier_italic_normal":return 9;case"Courier_normal_bold":return 10;case"Courier_italic_bold":return 11;case"TimesRoman_normal_normal":return 12;case"Dialog_normal_normal":return 13;case"Dialog_italic_normal":return 14;case"Dialog_normal_bold":return 15;case"Dialog_italic_bold":return 16;case"DialogInput_normal_normal":return 17;case"DialogInput_italic_normal":return 18;case"DialogInput_normal_bold":return 19;case"DialogInput_italic_bold":return 20}}},{key:"areEqual",value:function(e,t){return e.family===t.family&&e.weight===t.weight&&e.style===t.style}}]),e}();function s(e){var t=e.match(/^([\d.]+)/);if(null===t)throw"Unrecognized font-size format ".concat(e);return Number.parseFloat(t[1])}l.DEFAULT_FONT_ID=0,l.DEFAULT=l.fromFontId(l.DEFAULT_FONT_ID);var c=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,o){var i,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.DEFAULT_SIZE;return(0,a.Z)(this,n),(i=t.call(this,e,r,o)).size=void 0,i.size=l,i}return(0,i.Z)(n,null,[{key:"fromPartialFont",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_SIZE;return new n(e.family,e.style,e.weight,t)}},{key:"fromFontId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_SIZE;return n.fromPartialFont(l.fromFontId(e),t)}},{key:"areEqual",value:function(e,t){return e.family===t.family&&e.style===t.style&&e.weight===t.weight&&e.size===t.size}}]),n}(l);c.DEFAULT_SIZE=8,c.DEFAULT=c.fromPartialFont(l.DEFAULT,c.DEFAULT_SIZE),t.default=c},4838:function(e,t,n){"use strict";t.Yq=void 0;var r=n(7457),o=n(7361);function a(e,t,n){return void 0===n&&(n=(0,o.crossProduct)(e.direction,t.direction)),(0,o.crossProduct)((0,o.subtract)(t.anchor,e.anchor),t.direction)/n}function i(e,t){return(0,o.add)(e.anchor,(0,o.scaleUp)(e.direction,t))}function l(e,t,n){var r={anchor:(0,o.scaleUp)((0,o.add)(t,n),.5),direction:(0,o.orthogonalize)((0,o.subtract)(t,n))},l=i(r,a(r,{anchor:(0,o.scaleUp)((0,o.add)(e,n),.5),direction:(0,o.orthogonalize)((0,o.subtract)(e,n))}));return{center:l,radius:(0,o.distance)(l,e)}}t.Yq=function(e,t,n){var a=(0,o.subtract)(t,n),i=(0,o.subtract)(e,n);if(0===(0,r.sign)((0,o.crossProduct)(a,i))){var s=0,c=[a,i,(0,o.subtract)(t,e)].map(o.magnitudeSquared).reduce((function(e,t,n){return t>=e?(s=n,t):e})),u=.5*Math.sqrt(c),d=void 0;switch(s){case 0:d=[t,n];break;case 1:d=[e,n];break;case 2:d=[e,t];break;default:throw"This state should be impossible."}return{center:(0,o.scaleUp)((0,o.add)(d[0],d[1]),.5),radius:u}}return l(e,t,n)}},7361:function(e,t,n){"use strict";t.__esModule=!0,t.distanceSquaredBetweenVector2DAndLineSegment=t.rotationDirection=t.projectAndRejectUsingNormalDirection=t.rejectUsingNormalDirection=t.projectUsingNormalDirection=t.projectAndReject=t.reject=t.project=t.scalarProject=t.angleBetweenNormalVectors=t.angleBetween=t.toPolar=t.toCartesian=t.toNormalCartesian=t.asAngle=t.crossProduct=t.dotProduct=t.distance=t.distanceSquared=t.magnitude=t.magnitudeSquared=t.interpolate=t.orthogonalize=t.orthogonalizeLeft=t.orthogonalizeRight=t.normalize=t.scaleDown=t.scaleUp=t.negate=t.subtract=t.add=void 0;var r=n(7457);function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}function a(e,t){return{x:e.x*t,y:e.y*t}}function i(e,t){return a(e,1/t)}function l(e){var t=e.x;return{x:-e.y,y:t}}function s(e,t,n){var r=1-n;return{x:r*e.x+n*t.x,y:r*e.y+n*t.y}}function c(e){var t=e.x,n=e.y;return t*t+n*n}function u(e){return Math.sqrt(c(e))}function d(e,t){return c(o(e,t))}function f(e,t){return u(o(e,t))}function p(e,t){return e.x*t.x+e.y*t.y}function h(e,t){return e.x*t.y-e.y*t.x}function m(e){var t=e.x,n=e.y;return Math.atan2(n,t)}function v(e){return{x:Math.cos(e),y:Math.sin(e)}}function x(e,t){return a(t,p(e,t)/c(t))}function g(e,t){return a(t,p(e,t))}t.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.subtract=o,t.negate=function(e){return{x:-e.x,y:-e.y}},t.scaleUp=a,t.scaleDown=i,t.normalize=function(e){return i(e,u(e))},t.orthogonalizeRight=function(e){var t=e.x;return{x:e.y,y:-t}},t.orthogonalizeLeft=l,t.orthogonalize=l,t.interpolate=s,t.magnitudeSquared=c,t.magnitude=u,t.distanceSquared=d,t.distance=f,t.dotProduct=p,t.crossProduct=h,t.asAngle=m,t.toNormalCartesian=v,t.toCartesian=function(e){return a(v(e.angle),e.radius)},t.toPolar=function(e){return{radius:u(e),angle:m(e)}},t.angleBetween=function(e,t){return Math.acos(p(e,t)/Math.sqrt(c(e)*c(t)))},t.angleBetweenNormalVectors=function(e,t){return Math.acos(p(e,t))},t.scalarProject=function(e,t){return p(e,t)/u(t)},t.project=x,t.reject=function(e,t){return o(e,x(e,t))},t.projectAndReject=function(e,t){var n=x(e,t);return{projection:n,rejection:o(e,n)}},t.projectUsingNormalDirection=g,t.rejectUsingNormalDirection=function(e,t){return o(e,g(e,t))},t.projectAndRejectUsingNormalDirection=function(e,t){var n=g(e,t);return{projection:n,rejection:o(e,n)}},t.rotationDirection=function(e,t){return(0,r.sign)(h(e,t))},t.distanceSquaredBetweenVector2DAndLineSegment=function(e,t,n){void 0===n&&(n=r.DEFAULT_EPSILON*r.DEFAULT_EPSILON);var a=o(t.v1,t.v0);if(c(a)>=n)return f(e,t.v0);var i=p(o(e,t.v0),a);return i<0?i=0:i>1&&(i=1),d(e,s(t.v0,t.v1,i))}},814:function(e,t,n){"use strict";t.__esModule=!0,t.dotBracketInputFileHandler=void 0;var r=n(9287),o=n(7744),a="Dot-bracket import",i=40,l=6,s={"(":")","[":"]","{":"}","<":">"},c=Object.entries(s).reduce((function(e,t){var n=t[0];return e[t[1]]=n,e}),{});function u(e){return e.replace(/\s+/g,"").toUpperCase()}t.dotBracketInputFileHandler=function(e){var t=function(e){for(var t=e.split(/\r?\n/),n=new Array,r=a,o=0;o<t.length;){var i=t[o].trim();if(0!==i.length)if(i.startsWith("#"))r===a&&i.length>1&&(r=i.substring(1).trim()||a),o++;else{if(!i.startsWith(">"))throw new Error('Unexpected content while parsing dot-bracket file: "'.concat(i,'"'));var l=i.substring(1).trim()||"Entry ".concat(n.length+1);for(o++;o<t.length&&0===t[o].trim().length;)o++;if(o>=t.length)throw new Error('No sequence found for entry "'.concat(l,'".'));var s=t[o].trim();if(s.startsWith(">"))throw new Error('Sequence for entry "'.concat(l,'" is missing.'));if(s.startsWith("#"))throw new Error('Sequence for entry "'.concat(l,'" cannot be a comment.'));var c=u(s);o++;for(var d=void 0;o<t.length;){var f=t[o].trim();if(0!==f.length){if(!f.startsWith("#")){if(f.startsWith(">"))break;d=f.replace(/\s+/g,""),o++;break}o++}else o++}if(void 0!==d&&d.length!==c.length)throw new Error("Structure length (".concat(d.length,") does not match sequence length (").concat(c.length,') for entry "').concat(l,'".'));n.push({name:l,sequence:c,structure:d})}else o++}if(0===n.length)throw new Error("No entries were found in the provided dot-bracket file.");return{entries:n,documentName:r}}(e),n=t.entries,d=t.documentName,f=n.map((function(e,t){for(var n,a=e.name,u=e.sequence,d=e.structure,f=a,p=u.length>0?a:"RNA molecule ".concat(t+1),h={firstNucleotideIndex:1,nucleotideProps:{}},m={name:f,rnaMoleculeProps:(n={},n[p]=h,n),basePairs:{}},v=function(e){for(var t=Math.max(i,e*l),n=t+10,r=2*Math.PI/e,o=new Array(e),a=0;a<e;a++){var s=-Math.PI/2+a*r;o[a]={x:n+t*Math.cos(s),y:n+t*Math.sin(s)}}return o}(u.length||1),x=0;x<u.length;x++){var g=u[x],y="T"===g?r.Nucleotide.Symbol.U:g,b=r.Nucleotide.isSymbol(y)?y:r.Nucleotide.Symbol.N,N=v[x],E=N.x,C=N.y;h.nucleotideProps[x]={symbol:b,x:E,y:C}}if(void 0!==d)for(var I=function(e){for(var t={},n=new Array,r=0;r<e.length;r++){var o=e[r];if("."!==o){var a=/[a-z]/.test(o),i=/[A-Z]/.test(o);if(o in s||a)(m=o)in t||(t[m]=[]),t[m].push({openSymbol:m,index:r});else{var l=void 0;if(o in c?l=c[o]:i&&(l=o.toLowerCase()),void 0===l)throw new Error('Unrecognized structure character "'.concat(o,'" at position ').concat(r+1,"."));if(void 0===(p=t[l])||0===p.length)throw new Error('Unbalanced structure: found closing "'.concat(o,'" at position ').concat(r+1," without matching opening."));var u=p.pop().index;n.push([u,r])}}}for(var d=0,f=Object.entries(t);d<f.length;d++){var p,h=f[d],m=h[0];if((p=h[1]).length>0){var v=p[p.length-1].index;throw new Error('Unbalanced structure: opening "'.concat(m,'" at position ').concat(v+1," has no matching closing character."))}}return n}(d),S=0,_=I;S<_.length;S++){var A=_[S],T=A[0],P=A[1];(0,o.insertBasePair)(m,p,T,p,P,o.DuplicateBasePairKeysHandler.DO_NOTHING)}return m}));return{complexDocumentName:d,rnaComplexProps:f}}},7669:function(e,t,n){"use strict";n.r(t),n.d(t,{fastaInputFileHandler:function(){return u}});var r=n(4942),o=n(7762),a=n(9287),i=n(6820),l="FASTA import",s=40,c=6;var u=function(e){var t=function(e){var t,n=e.split(/\r?\n/),r=new Array,a=void 0,s=l,c=!1,u=(0,o.Z)(n);try{for(u.s();!(t=u.n()).done;){var d=t.value.trim();if(0!==d.length)if(d.startsWith("#"))s===l&&d.length>1&&(s=d.substring(1).trim()||l);else if(d.startsWith(">"))void 0!==a&&r.push(a),a={name:d.substring(1).trim()||"Entry ".concat(r.length+1),sequence:"",structure:void 0},c=!1;else{if(void 0===a)throw new Error("FASTA data must start with a header line beginning with '>'");var f;c?a.structure=(null!==(f=a.structure)&&void 0!==f?f:"")+(0,i.vh)(d):a.sequence.length>0&&(0,i.wU)(d)?(a.structure=(0,i.vh)(d),c=!0):a.sequence+=d.replace(/\s+/g,"").toUpperCase()}}}catch(v){u.e(v)}finally{u.f()}if(void 0!==a&&r.push(a),0===r.length)throw new Error("No entries were found in the provided FASTA file.");for(var p=0,h=r;p<h.length;p++){var m=h[p];if(0===m.sequence.length)throw new Error('Entry "'.concat(m.name,'" does not contain a sequence.'));if(void 0!==m.structure&&m.structure.length!==m.sequence.length)throw new Error("Structure length (".concat(m.structure.length,") does not match sequence length (").concat(m.sequence.length,') for entry "').concat(m.name,'".'))}return{entries:r,documentName:s}}(e),n=t.entries;return{complexDocumentName:t.documentName,rnaComplexProps:n.map((function(e,t){for(var n=e.name,o=e.sequence,l=e.structure,u=n,d=o.length>0?n:"RNA molecule ".concat(t+1),f={firstNucleotideIndex:1,nucleotideProps:{}},p={name:u,rnaMoleculeProps:(0,r.Z)({},d,f),basePairs:{}},h=function(e){var t=Math.max(s,e*c),n=t+10,r=new Array(e);if(e<=1){var o=-Math.PI/2;return r[0]={x:n+t*Math.cos(o),y:n+t*Math.sin(o)},r}for(var a=(Math.min(2,Math.max(0,e-2))+1)*(2*Math.PI/e),i=(2*Math.PI-a)/(e-1),l=-Math.PI/2+a/2,u=0;u<e;u++){var d=l+u*i;r[u]={x:n+t*Math.cos(d),y:n+t*Math.sin(d)}}return r}(o.length||1),m=0;m<o.length;m++){var v=o[m],x="T"===v?a.Nucleotide.Symbol.U:v,g=a.Nucleotide.isSymbol(x)?x:a.Nucleotide.Symbol.N,y=h[m],b=y.x,N=y.y;f.nucleotideProps[m]={symbol:g,x:b,y:N}}if(void 0!==l){var E=(0,i.Fx)(l);(0,i.QL)(p,d,E)}return p}))}}},7084:function(e,t){"use strict";var n,r;t.__esModule=!0,t.fileExtensions=t.fileExtensionDescriptions=t.FileExtension=void 0,function(e){e.XML="xml",e.JSON="json",e.SVG="svg",e.XRNA="xrna",e.CSV="csv",e.TR="tr",e.BPSEQ="bpseq",e.STR="str",e.DOT_BRACKET="dbn",e.FASTA="fasta",e.FAS="fas",e.FA="fa"}(r=t.FileExtension||(t.FileExtension={})),t.fileExtensionDescriptions=((n={})[r.XRNA]="the native input-file format of XRNA (an extension of .xml)",n[r.XML]="a data-file format native to the internet. Highly similar to .xrna",n[r.JSON]="a general-purpose data-file format native to the internet. Logically equivalent to .xrna",n[r.CSV]="a comma-separated-values file. Logically equivalent to .xrna. Intended for use with RiboVision",n[r.BPSEQ]="a simplified, linear representation of the nucleotide sequence of the scene.",n[r.TR]="an XML-like format for R2DT. Contains nucleotides with 2D coordinates.",n[r.SVG]="an image-file format. Can be converted to other image-file formats (e.g. .jpg) using external tools",n[r.STR]="an image-file format containing nucleotide sequences and base pairs",n[r.DOT_BRACKET]="a dot-bracket notation file describing nucleotide sequence and secondary structure",n[r.FASTA]="a FASTA sequence file containing nucleotide sequences without coordinates",n[r.FAS]="a FASTA sequence file (alias .fasta)",n[r.FA]="a FASTA sequence file (alias .fasta)",n),t.fileExtensions=Object.values(r),t.default=r},8467:function(e,t,n){"use strict";var r,o,a,i,l=this&&this.__assign||function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};t.__esModule=!0,t.defaultInvertYAxisFlagRecord=t.r2dtLegacyInputFileReadersRecord=t.inputFileReadersRecord=t.isInputFileExtension=t.inputFileExtensions=t.InputFileExtension=void 0;var s=n(7084),c=n(7475),u=n(8479),d=n(4712),f=n(5481),p=n(814),h=n(1579),m=n(7669);t.InputFileExtension=((r={})[s.default.XRNA]=s.default.XRNA,r[s.default.XML]=s.default.XML,r[s.default.JSON]=s.default.JSON,r[s.default.STR]=s.default.STR,r[s.default.SVG]=s.default.SVG,r[s.default.DOT_BRACKET]=s.default.DOT_BRACKET,r[s.default.FASTA]=s.default.FASTA,r[s.default.FAS]=s.default.FAS,r[s.default.FA]=s.default.FA,r),t.inputFileExtensions=Object.values(t.InputFileExtension),t.isInputFileExtension=function(e){return t.inputFileExtensions.includes(e)},t.inputFileReadersRecord=((o={})[t.InputFileExtension.xrna]=c.xrnaInputFileHandler,o[t.InputFileExtension.xml]=c.xrnaInputFileHandler,o[t.InputFileExtension.json]=d.jsonInputFileHandler,o[t.InputFileExtension.str]=f.strInputFileHandler,o[t.InputFileExtension.svg]=h.svgInputFileHandler,o[t.InputFileExtension.dbn]=p.dotBracketInputFileHandler,o[t.InputFileExtension.fasta]=m.fastaInputFileHandler,o[t.InputFileExtension.fas]=m.fastaInputFileHandler,o[t.InputFileExtension.fa]=m.fastaInputFileHandler,o),t.r2dtLegacyInputFileReadersRecord=l(l({},t.inputFileReadersRecord),((a={})[t.InputFileExtension.json]=u.jsonInputFileHandler,a)),t.defaultInvertYAxisFlagRecord=((i={})[t.InputFileExtension.xrna]=!1,i[t.InputFileExtension.xml]=!1,i[t.InputFileExtension.json]=!0,i[t.InputFileExtension.str]=!1,i[t.InputFileExtension.svg]=!1,i[t.InputFileExtension.dbn]=!1,i[t.InputFileExtension.fasta]=!1,i[t.InputFileExtension.fas]=!1,i[t.InputFileExtension.fa]=!1,i)},8479:function(e,t,n){"use strict";n.r(t),n.d(t,{jsonInputFileHandler:function(){return v},jsonObjectHandler:function(){return m}});var r=n(7762),o=n(1413),a=n(7089),i=n(9287),l=n(7744),s=n(3871),c=n(433),u=n(7361),d=n(6176);function f(e,t){if(!Array.isArray(e))throw"Variable ".concat(t," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(t,' should include "x" and "y" properties.');var n=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(n)||Number.isNaN(r))throw"x and y properties of each element in ".concat(t," should be numbers.");return{x:n,y:r}}))}function p(e,t,n,r,o,i,c){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var u;if([null,void 0].includes(e.basePairType))u=void 0;else{if("string"!==typeof e.basePairType||!(0,a.isBasePairType)(e.basePairType))throw"Unrecognized base-pair type.";u=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=(0,s.fromCssString)(e.stroke)}var d=structuredClone(r),p=e.classes;if(void 0!==p){if(!Array.isArray(p))throw'Base-pair "classes" variable should be an array.';p.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":o=Number.parseFloat(e[1]);break;case"stroke":case"color":d=(0,s.fromCssString)(e[1])}}))}))}var h=void 0;if("points"in e&&(h=f(e.points,"basePair.points")),void 0===i){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var m=e.rnaMoleculeName1;if("string"!==typeof m)throw"rnaMoleculeName1 should be a string.";i=m}if(void 0===c){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var v=e.rnaMoleculeName2;if("string"!==typeof v)throw"rnaMoleculeName2 should be a string.";c=v}for(var x=n.rnaMoleculeProps[i],g=n.rnaMoleculeProps[c],y=0,b=[i,c];y<b.length;y++){var N=b[y];if(!(N in n.rnaMoleculeProps))throw'RNA molecule "'.concat(N,'" does not exist in the RNA complex.')}var E=Number.parseInt(e.residueIndex1)-x.firstNucleotideIndex,C=Number.parseInt(e.residueIndex2)-g.firstNucleotideIndex;(0,l.insertBasePair)(n,i,E,c,C,l.DuplicateBasePairKeysHandler.DO_NOTHING,{color:d,strokeWidth:o,basePairType:u,points:h})}function h(e){var t,n,r,o,a={id:e.id,content:e.content,x:Number.parseFloat(e.x),y:-Number.parseFloat(e.y)};e.font&&(a.font={family:null!==(t=e.font.family)&&void 0!==t?t:c.default.DEFAULT.family,size:null!==(n=e.font.size)&&void 0!==n?n:c.default.DEFAULT.size,weight:null!==(r=e.font.weight)&&void 0!==r?r:c.default.DEFAULT.weight,style:null!==(o=e.font.style)&&void 0!==o?o:c.default.DEFAULT.style});return e.color&&(a.color=(0,s.fromCssString)(e.color)),e.strokeColor&&(a.strokeColor=(0,s.fromCssString)(e.strokeColor)),void 0!==e.strokeWidth&&(a.strokeWidth=Number.parseFloat(e.strokeWidth)),void 0!==e.strokeOpacity&&(a.strokeOpacity=Number.parseFloat(e.strokeOpacity)),void 0!==e.opacity&&(a.opacity=Number.parseFloat(e.opacity)),void 0!==e.rotation&&(a.rotation=Number.parseFloat(e.rotation)),e.backgroundColor&&(a.backgroundColor=(0,s.fromCssString)(e.backgroundColor)),void 0!==e.padding&&(a.padding=Number.parseFloat(e.padding)),e.borderColor&&(a.borderColor=(0,s.fromCssString)(e.borderColor)),void 0!==e.borderWidth&&(a.borderWidth=Number.parseFloat(e.borderWidth)),void 0!==e.borderRadius&&(a.borderRadius=Number.parseFloat(e.borderRadius)),a}function m(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var t=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,n){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var a={name:"",rnaMoleculeProps:{},basePairs:{}};if(a.name=e.name,a.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var n={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},r={font:structuredClone(c.default.DEFAULT),color:structuredClone(s.BLACK)},l=e.classesForSequence;if(void 0!==l){if(!Array.isArray(l))throw'RNA-molecule "classesForSequence" variable should be an array;';l.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(r.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":r.font.family=e[1];break;case"font-size":r.font.size=e[1];break;case"font-weight":r.font.weight=e[1];break;case"font-style":r.font.style=e[1];break;case"color":r.color=(0,s.fromCssString)(e[1])}}))}))}var h=e.name;a.rnaMoleculeProps[h]=n,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var t=Number.parseInt(e.residueIndex);t<n.firstNucleotideIndex&&(n.firstNucleotideIndex=t)})),e.sequence.forEach((function(e){var o=Number.parseInt(e.residueIndex)-n.firstNucleotideIndex;if(!i.Nucleotide.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var a={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};a.font=structuredClone(r.font),a.color=structuredClone(r.color),e.sequenceConnector&&(a.sequenceConnectorToNext=function(e){var t={breakpoints:[]};return e.breakpoints&&Array.isArray(e.breakpoints)&&(t.breakpoints=e.breakpoints.map((function(e){return{x:Number.parseFloat(e.x),y:-Number.parseFloat(e.y)}}))),e.color&&(t.color=(0,s.fromCssString)(e.color)),void 0!==e.strokeWidth&&(t.strokeWidth=Number.parseFloat(e.strokeWidth)),void 0!==e.opacity&&(t.opacity=Number.parseFloat(e.opacity)),e.dashArray&&(t.dashArray=e.dashArray),void 0!==e.curvature&&(t.curvature=Number.parseFloat(e.curvature)),void 0!==e.showDirectionArrow&&(t.showDirectionArrow=e.showDirectionArrow),void 0!==e.showBreakpoints&&(t.showBreakpoints=e.showBreakpoints),e.arrowColor&&(t.arrowColor=(0,s.fromCssString)(e.arrowColor)),e.arrowShape&&(t.arrowShape=e.arrowShape),void 0!==e.arrowPosition&&(t.arrowPosition=Number.parseFloat(e.arrowPosition)),void 0!==e.arrowPositionRight&&(t.arrowPositionRight=Number.parseFloat(e.arrowPositionRight)),void 0!==e.arrowSize&&(t.arrowSize=Number.parseFloat(e.arrowSize)),e.lockedBreakpoints&&(t.lockedBreakpoints=e.lockedBreakpoints),e.breakpointGroups&&(t.breakpointGroups=e.breakpointGroups),e.targetMoleculeName&&(t.targetMoleculeName=e.targetMoleculeName),void 0!==e.targetNucleotideIndex&&(t.targetNucleotideIndex=Number.parseInt(e.targetNucleotideIndex)),void 0!==e.targetComplexIndex&&(t.targetComplexIndex=Number.parseInt(e.targetComplexIndex)),void 0!==e.deleted&&(t.deleted=e.deleted),void 0!==e.isORF&&(t.isORF=e.isORF),t}(e.sequenceConnector)),n.nucleotideProps[o]=a;var l=e.classes;if(void 0!==l){if(!Array.isArray(l))throw'Nucleotide "classes" variable should be an array.';l.forEach((function(e){e.startsWith("text-")&&(a.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":a.font.family=e[1];break;case"font-size":a.font.size=e[1];break;case"font-weight":a.font.weight=e[1];break;case"font-style":a.font.style=e[1];break;case"color":a.color=(0,s.fromCssString)(e[1])}}))}))}}));var m={font:structuredClone(c.default.DEFAULT),color:structuredClone(s.BLACK),stroke:structuredClone(s.BLACK),strokeWidth:d.DEFAULT_STROKE_WIDTH},v=e.classesForLabels;if(void 0!==v){if(!Array.isArray(v))throw'RNA-molecule "classsesForLabels" variable should be an array.';v.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(m.color=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":m.font.family=e[1];break;case"font-size":m.font.size=e[1];break;case"font-weight":m.font.weight=e[1];break;case"font-style":m.font.style=e[1];break;case"stroke":m.stroke=(0,s.fromCssString)(e[1]);break;case"color":m.color=(0,s.fromCssString)(e[1]);break;case"stroke-width":m.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=n.nucleotideProps[Number.parseInt(e.residueIndex)-n.firstNucleotideIndex];if("labelContent"in e){var a=structuredClone(m.font),i=structuredClone(m.color),l=e.labelContent.classes;if(void 0!==l){if(!Array.isArray(l))throw'LabelContent "classes" variable should be an array.';l.forEach((function(e){e.startsWith("text-")&&(i=(0,s.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":a.family=e[1];break;case"font-size":a.size=e[1];break;case"font-weight":a.weight=e[1];break;case"font-style":a.style=e[1];break;case"color":case"stroke":i=(0,s.fromCssString)(e[1])}}))}))}r.labelContentProps=(0,o.Z)((0,o.Z)({},(0,u.subtract)({x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y)},r)),{},{content:e.labelContent.label,font:a,color:i,strokeWidth:d.DEFAULT_STROKE_WIDTH})}if("labelLine"in e){var c=e.labelLine,p=structuredClone(m.stroke),h=m.strokeWidth,v=c.classes;if(void 0!==v){if(!Array.isArray(v))throw'Label-line "classes" variable should be an array.';v.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke":case"color":p=(0,s.fromCssString)(e[1]);break;case"stroke-width":h=Number.parseFloat(e[1])}}))}))}var x=[];if("points"in c)x=f(c.points,'label-line "points"');else{if(!("x1"in c&&"y1"in c&&"x2"in c&&"y2"in c))throw'Input label-line elements should have a "points" variable.';var g=Number.parseFloat(c.x1);if(Number.isNaN(g))throw'"x1" variable should be a number.';var y=Number.parseFloat(c.y1);if(Number.isNaN(y))throw'"y1" variable should be a number.';var b=Number.parseFloat(c.x2);if(Number.isNaN(b))throw'"x2" variable should be a number.';var N=Number.parseFloat(c.y2);if(Number.isNaN(N))throw'"y2" variable should be a number.';x.push({x:g,y:y},{x:b,y:N})}r.labelLineProps={points:x.map((function(e){return(0,u.subtract)(e,r)})),color:p,strokeWidth:h}}}));var x={strokeWidth:d.DEFAULT_STROKE_WIDTH,stroke:void 0},g=e.classesForBasePairs;if(void 0!==g){if(!Array.isArray(g))throw'RNA-molecule "classesForBasePairs" variable should be an array.';g.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":x.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":x.stroke=(0,s.fromCssString)(e[1])}}))}))}if("basePairs"in e){var y=e.basePairs;if(!Array.isArray(y))throw"The basePairs property of each input RNA molecule should be an array.";for(var b=0,N=e.basePairs;b<N.length;b++){p(N[b],null!==t&&void 0!==t?t:[],a,x.stroke,x.strokeWidth,h,h)}}return n})),"basePairs"in e){var l=e.basePairs;if(!Array.isArray(l))throw"The basePairs property of each input RNA complex should be an array.";var m,v=(0,r.Z)(e.basePairs);try{var x=function(){var n,r=m.value,o={strokeWidth:d.DEFAULT_STROKE_WIDTH,stroke:void 0},i=e.classesForBasePairs;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForBasePairs" variable should be an array.';i.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":o.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":o.stroke=(0,s.fromCssString)(e[1])}}))}))}p(r,null!==(n=e.classesForBasePairs)&&void 0!==n?n:[],a,o.stroke,o.strokeWidth)};for(v.s();!(m=v.n()).done;)x()}catch(N){v.e(N)}finally{v.f()}}if(e.textAnnotations&&Array.isArray(e.textAnnotations)){a.textAnnotations={};var g,y=(0,r.Z)(e.textAnnotations);try{for(y.s();!(g=y.n()).done;){var b=h(g.value);a.textAnnotations[b.id]=b}}catch(N){y.e(N)}finally{y.f()}}return a})),complexDocumentName:"Unknown"}}var v=function(e){return m(JSON.parse(e))}},4712:function(e,t,n){"use strict";n.r(t),n.d(t,{jsonInputFileHandler:function(){return h},jsonObjectHandler:function(){return p}});var r=n(7762),o=n(7089),a=n(9287),i=n(7744),l=n(3871),s=n(433),c=n(6176);function u(e,t){if(!Array.isArray(e))throw"Variable ".concat(t," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(t,' should include "x" and "y" properties.');var n=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(n)||Number.isNaN(r))throw"x and y properties of each element in ".concat(t," should be numbers.");return{x:n,y:r}}))}function d(e){var t,n,r,o,a={id:e.id,content:e.content,x:Number.parseFloat(e.x),y:-Number.parseFloat(e.y)};e.font&&(a.font={family:null!==(t=e.font.family)&&void 0!==t?t:s.default.DEFAULT.family,size:null!==(n=e.font.size)&&void 0!==n?n:s.default.DEFAULT.size,weight:null!==(r=e.font.weight)&&void 0!==r?r:s.default.DEFAULT.weight,style:null!==(o=e.font.style)&&void 0!==o?o:s.default.DEFAULT.style});return e.color&&(a.color=(0,l.fromCssString)(e.color)),e.strokeColor&&(a.strokeColor=(0,l.fromCssString)(e.strokeColor)),void 0!==e.strokeWidth&&(a.strokeWidth=Number.parseFloat(e.strokeWidth)),void 0!==e.strokeOpacity&&(a.strokeOpacity=Number.parseFloat(e.strokeOpacity)),void 0!==e.opacity&&(a.opacity=Number.parseFloat(e.opacity)),void 0!==e.rotation&&(a.rotation=Number.parseFloat(e.rotation)),e.backgroundColor&&(a.backgroundColor=(0,l.fromCssString)(e.backgroundColor)),void 0!==e.padding&&(a.padding=Number.parseFloat(e.padding)),e.borderColor&&(a.borderColor=(0,l.fromCssString)(e.borderColor)),void 0!==e.borderWidth&&(a.borderWidth=Number.parseFloat(e.borderWidth)),void 0!==e.borderRadius&&(a.borderRadius=Number.parseFloat(e.borderRadius)),a}function f(e,t,n,r,a,s,c){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var d;if([null,void 0].includes(e.basePairType))d=void 0;else{if("string"!==typeof e.basePairType||!(0,o.isBasePairType)(e.basePairType))throw"Unrecognized base-pair type.";d=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=(0,l.fromCssString)(e.stroke)}var f=structuredClone(r),p=e.classes;if(void 0!==p){if(!Array.isArray(p))throw'Base-pair "classes" variable should be an array.';p.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":a=Number.parseFloat(e[1]);break;case"stroke":case"color":f=(0,l.fromCssString)(e[1])}}))}))}var h=void 0;if("points"in e&&(h=u(e.points,"basePair.points")),void 0===s){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var m=e.rnaMoleculeName1;if("string"!==typeof m)throw"rnaMoleculeName1 should be a string.";s=m}if(void 0===c){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var v=e.rnaMoleculeName2;if("string"!==typeof v)throw"rnaMoleculeName2 should be a string.";c=v}for(var x=n.rnaMoleculeProps[s],g=n.rnaMoleculeProps[c],y=0,b=[s,c];y<b.length;y++){var N=b[y];if(!(N in n.rnaMoleculeProps))throw'RNA molecule "'.concat(N,'" does not exist in the RNA complex.')}var E=Number.parseInt(e.residueIndex1)-x.firstNucleotideIndex,C=Number.parseInt(e.residueIndex2)-g.firstNucleotideIndex;(0,i.insertBasePair)(n,s,E,c,C,i.DuplicateBasePairKeysHandler.DO_NOTHING,{color:f,strokeWidth:a,basePairType:d,points:h})}function p(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var t=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,n){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var o={name:"",rnaMoleculeProps:{},basePairs:{}};if(o.name=e.name,o.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var n={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},r={font:structuredClone(s.default.DEFAULT),color:structuredClone(l.BLACK)},i=e.classesForSequence;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForSequence" variable should be an array;';i.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(r.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":r.font.family=e[1];break;case"font-size":r.font.size=e[1];break;case"font-weight":r.font.weight=e[1];break;case"font-style":r.font.style=e[1];break;case"color":r.color=(0,l.fromCssString)(e[1])}}))}))}var d=e.name;o.rnaMoleculeProps[d]=n,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var t=Number.parseInt(e.residueIndex);t<n.firstNucleotideIndex&&(n.firstNucleotideIndex=t)})),e.sequence.forEach((function(e){var o=Number.parseInt(e.residueIndex)-n.firstNucleotideIndex;if(!a.Nucleotide.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var i={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};i.font=structuredClone(r.font),i.color=structuredClone(r.color),e.sequenceConnector&&(i.sequenceConnectorToNext=function(e){var t={breakpoints:[]};return e.breakpoints&&Array.isArray(e.breakpoints)&&(t.breakpoints=e.breakpoints.map((function(e){return{x:Number.parseFloat(e.x),y:-Number.parseFloat(e.y)}}))),e.color&&(t.color=(0,l.fromCssString)(e.color)),void 0!==e.strokeWidth&&(t.strokeWidth=Number.parseFloat(e.strokeWidth)),void 0!==e.opacity&&(t.opacity=Number.parseFloat(e.opacity)),e.dashArray&&(t.dashArray=e.dashArray),void 0!==e.curvature&&(t.curvature=Number.parseFloat(e.curvature)),void 0!==e.showDirectionArrow&&(t.showDirectionArrow=e.showDirectionArrow),void 0!==e.showBreakpoints&&(t.showBreakpoints=e.showBreakpoints),e.arrowColor&&(t.arrowColor=(0,l.fromCssString)(e.arrowColor)),e.arrowShape&&(t.arrowShape=e.arrowShape),void 0!==e.arrowPosition&&(t.arrowPosition=Number.parseFloat(e.arrowPosition)),void 0!==e.arrowPositionRight&&(t.arrowPositionRight=Number.parseFloat(e.arrowPositionRight)),void 0!==e.arrowSize&&(t.arrowSize=Number.parseFloat(e.arrowSize)),e.lockedBreakpoints&&(t.lockedBreakpoints=e.lockedBreakpoints),e.breakpointGroups&&(t.breakpointGroups=e.breakpointGroups),e.targetMoleculeName&&(t.targetMoleculeName=e.targetMoleculeName),void 0!==e.targetNucleotideIndex&&(t.targetNucleotideIndex=Number.parseInt(e.targetNucleotideIndex)),void 0!==e.targetComplexIndex&&(t.targetComplexIndex=Number.parseInt(e.targetComplexIndex)),void 0!==e.deleted&&(t.deleted=e.deleted),void 0!==e.isORF&&(t.isORF=e.isORF),t}(e.sequenceConnector)),n.nucleotideProps[o]=i;var s=e.classes;if(void 0!==s){if(!Array.isArray(s))throw'Nucleotide "classes" variable should be an array.';s.forEach((function(e){e.startsWith("text-")&&(i.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":i.font.family=e[1];break;case"font-size":i.font.size=e[1];break;case"font-weight":i.font.weight=e[1];break;case"font-style":i.font.style=e[1];break;case"color":i.color=(0,l.fromCssString)(e[1])}}))}))}}));var p={font:structuredClone(s.default.DEFAULT),color:structuredClone(l.BLACK),stroke:structuredClone(l.BLACK),strokeWidth:c.DEFAULT_STROKE_WIDTH},h=e.classesForLabels;if(void 0!==h){if(!Array.isArray(h))throw'RNA-molecule "classsesForLabels" variable should be an array.';h.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(p.color=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":p.font.family=e[1];break;case"font-size":p.font.size=e[1];break;case"font-weight":p.font.weight=e[1];break;case"font-style":p.font.style=e[1];break;case"stroke":p.stroke=(0,l.fromCssString)(e[1]);break;case"color":p.color=(0,l.fromCssString)(e[1]);break;case"stroke-width":p.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=n.nucleotideProps[Number.parseInt(e.residueIndex)-n.firstNucleotideIndex];if("labelContent"in e){var o=structuredClone(p.font),a=structuredClone(p.color),i=e.labelContent.classes;if(void 0!==i){if(!Array.isArray(i))throw'LabelContent "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a=(0,l.fromCssString)(e.substring("text-".length)));var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"font-family":o.family=e[1];break;case"font-size":o.size=e[1];break;case"font-weight":o.weight=e[1];break;case"font-style":o.style=e[1];break;case"color":case"stroke":a=(0,l.fromCssString)(e[1])}}))}))}r.labelContentProps={x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y),content:e.labelContent.label,font:o,color:a,strokeWidth:c.DEFAULT_STROKE_WIDTH}}if("labelLine"in e){var s=e.labelLine,d=structuredClone(p.stroke),f=p.strokeWidth,h=s.classes;if(void 0!==h){if(!Array.isArray(h))throw'Label-line "classes" variable should be an array.';h.forEach((function(e){var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke":case"color":d=(0,l.fromCssString)(e[1]);break;case"stroke-width":f=Number.parseFloat(e[1])}}))}))}var m=[];if("points"in s)m=u(s.points,'label-line "points"');else{if(!("x1"in s&&"y1"in s&&"x2"in s&&"y2"in s))throw'Input label-line elements should have a "points" variable.';var v=Number.parseFloat(s.x1);if(Number.isNaN(v))throw'"x1" variable should be a number.';var x=Number.parseFloat(s.y1);if(Number.isNaN(x))throw'"y1" variable should be a number.';var g=Number.parseFloat(s.x2);if(Number.isNaN(g))throw'"x2" variable should be a number.';var y=Number.parseFloat(s.y2);if(Number.isNaN(y))throw'"y2" variable should be a number.';m.push({x:v,y:x},{x:g,y:y})}r.labelLineProps={points:m,color:d,strokeWidth:f}}}));var m={strokeWidth:c.DEFAULT_STROKE_WIDTH,stroke:void 0},v=e.classesForBasePairs;if(void 0!==v){if(!Array.isArray(v))throw'RNA-molecule "classesForBasePairs" variable should be an array.';v.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":m.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":m.stroke=(0,l.fromCssString)(e[1])}}))}))}if("basePairs"in e){var x=e.basePairs;if(!Array.isArray(x))throw"The basePairs property of each input RNA molecule should be an array.";for(var g=0,y=e.basePairs;g<y.length;g++){f(y[g],null!==t&&void 0!==t?t:[],o,m.stroke,m.strokeWidth,d,d)}}return n})),"basePairs"in e){var i=e.basePairs;if(!Array.isArray(i))throw"The basePairs property of each input RNA complex should be an array.";var p,h=(0,r.Z)(e.basePairs);try{var m=function(){var n,r=p.value,a={strokeWidth:c.DEFAULT_STROKE_WIDTH,stroke:void 0},i=e.classesForBasePairs;if(void 0!==i){if(!Array.isArray(i))throw'RNA-molecule "classesForBasePairs" variable should be an array.';i.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var n=t.find((function(t){return t.name===e}));void 0!==n&&Object.entries(n).forEach((function(e){switch(e[0]){case"stroke-width":a.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":a.stroke=(0,l.fromCssString)(e[1])}}))}))}f(r,null!==(n=e.classesForBasePairs)&&void 0!==n?n:[],o,a.stroke,a.strokeWidth)};for(h.s();!(p=h.n()).done;)m()}catch(y){h.e(y)}finally{h.f()}}if(e.textAnnotations&&Array.isArray(e.textAnnotations)){o.textAnnotations={};var v,x=(0,r.Z)(e.textAnnotations);try{for(x.s();!(v=x.n()).done;){var g=d(v.value);o.textAnnotations[g.id]=g}}catch(y){x.e(y)}finally{x.f()}}return o})),complexDocumentName:"Unknown"}}var h=function(e){return p(JSON.parse(e))}},5495:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.parseGraphicalData=void 0;var a=n(7089),i=n(7744),l=n(7361),s=n(7457),c=1e-8,u={line:5,center:10},d={loose:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos((0,s.degreesToRadians)(160))},normal:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos((0,s.degreesToRadians)(170))},strict:{minimumDistanceRatio:.895,dotProductThreshold:Math.cos((0,s.degreesToRadians)(175))}},f="Too few nucleotides exist within the RNA complex (the number is less than the required number).";t.parseGraphicalData=function(e,t,n,s,p,h){var m,v,x,g,y,b,N,E;void 0===s&&(s={});for(var C=o(["undefined"],a.default.canonicalTypes,!0),I={},S=function(e,S){var _,A,T=Number.parseInt(e),P=t[T],R=n[T],k=null!==(m=s[T])&&void 0!==m?m:{};I[T]={};for(var w=I[T],M=[],O=0,j=Object.entries(S.rnaMoleculeProps);O<j.length;O++){var L=j[O],D=L[0],Z=L[1];w[D]={};for(var F=w[D],B=null!==(v=k[D])&&void 0!==v?v:{},U=0,z=Object.entries(Z.nucleotideProps);U<z.length;U++){var W=z[U],G=W[0],H=W[1],K=Number.parseInt(G),V=null!==(x=B[K])&&void 0!==x?x:{x:0,y:0},q={x:H.x-.5*V.x,y:H.y+V.y};F[K]=q,M.push({indices:{rnaMoleculeName:D,nucleotideIndex:K,arrayIndex:M.length},singularNucleotideProps:H,adjustedPosition:q})}}var X=p[T],Y=h[T];function Q(e,t){var n=e.vectorNearNucleotide,r=e.vectorNearLabelContent,o=e.labelContent,a=e.labelContentDimensions,i=M[t],s=i.singularNucleotideProps,c=i.adjustedPosition;s.labelLineProps={points:[(0,l.subtract)(n,c),(0,l.subtract)(r,c)]},o.x+=.5*a.width-c.x,o.y+=.5*-a.height-c.y,s.labelContentProps=o}if(X.length>0){for(var $=function(e,t,n,r){if(void 0!==n&&void 0!==r){var o=(0,l.distanceSquared)(e.labelContent,e.vectorNearLabelContent)/(0,l.distanceSquared)(e.vectorNearLabelContent,e.vectorNearNucleotide);if(o<n||o>r)return}t.sort((function(e,t){return e.distance-t.distance})),Q(e,t[0].indices.arrayIndex)},J=new Array,ee={},te=0,ne=Y;te<ne.length;te++){for(var re=ne[te],oe=re.labelContent,ae=re.rectangle,ie=oe.x,le=oe.y,se=ae.width,ce=ae.height,ue=[{x:ie,y:le},{x:ie+se,y:le},{x:ie+se,y:le-ce},{x:ie,y:le-ce}],de=[{v0:ue[0],v1:ue[1]},{v0:ue[1],v1:ue[2]},{v0:ue[2],v1:ue[3]},{v0:ue[3],v1:ue[0]}],fe={distanceSquared:Number.POSITIVE_INFINITY,vectorNearNucleotide:X[0].v0,vectorNearLabelContent:X[0].v1,labelLineIndex:NaN},pe=0;pe<X.length;pe++)for(var he=(Be=X[pe]).v0,me=Be.v1,ve=0,xe=[{vector:he,otherVector:me},{vector:me,otherVector:he}];ve<xe.length;ve++)for(var ge=xe[ve],ye=ge.vector,be=ge.otherVector,Ne=0,Ee=de;Ne<Ee.length;Ne++){var Ce=Ee[Ne],Ie=(0,l.distanceSquaredBetweenVector2DAndLineSegment)(ye,Ce);Ie<fe.distanceSquared&&(fe={distanceSquared:Ie,vectorNearNucleotide:be,vectorNearLabelContent:ye,labelLineIndex:pe})}var Se=fe.labelLineIndex,_e=fe.vectorNearNucleotide,Ae=fe.vectorNearLabelContent,Te=fe.distanceSquared;Se in ee||(ee[Se]=[]),ee[Se].push({vectorNearNucleotide:_e,vectorNearLabelContent:Ae,labelContent:oe,distanceSquared:Te,labelContentDimensions:ae})}for(var Pe=0,Re=Object.entries(ee);Pe<Re.length;Pe++){var ke=Re[Pe],we=ke[0],Me=ke[1];Se=Number.parseInt(we);Me.sort((function(e,t){return e.distanceSquared-t.distanceSquared})),J.push(r(r({},Me[0]),{labelLineIndex:Se}))}for(var Oe={},je=new Array,Le=0,De=J;Le<De.length;Le++){Se=(dt=De[Le]).labelLineIndex,oe=dt.labelContent,dt.distanceSquared,_e=dt.vectorNearNucleotide,Ae=dt.vectorNearLabelContent,dt.labelContentDimensions;var Ze=Rt(Tt(_e,7).sliced,_e),Fe=new Array,Be=X[Se],Ue=(0,l.normalize)((0,l.subtract)(Ae,_e)),ze=void 0;/^-?\d+$/.test(oe.content)&&(ze=Number.parseInt(oe.content));for(var We=0,Ge=Ze;We<Ge.length;We++){var He=Ge[We],Ke=He.indices,Ve=He.dv,qe=He.distance;Ve=(0,l.normalize)(Ve),(0,l.dotProduct)(Ue,Ve)>=d.loose.dotProductThreshold||Fe.push({indices:Ke,distance:qe})}if(1===Fe.length){Ke=Fe[0].indices;void 0!==ze&&((ot=ze-Ke.nucleotideIndex)in Oe||(Oe[ot]={multiplicity:0,candidates:[]}),(at=Oe[ot]).multiplicity++,at.candidates.push({pairedLabelDatum:dt,arrayIndex:Ke.arrayIndex,labelContentAsNumber:ze,unfilteredNucleotideData:Ze}))}else je.push({unfilteredNucleotideData:Ze,pairedLabelDatum:dt,labelContentAsNumber:ze})}var Xe=Object.entries(Oe);if(0===Xe.length)for(var Ye=0,Qe=je;Ye<Qe.length;Ye++){var $e=Qe[Ye];Ze=$e.unfilteredNucleotideData;$(dt=$e.pairedLabelDatum,Ze)}else{for(var Je=Xe.map((function(e){var t=e[0],n=e[1];return{nucleotideIndexDelta:Number.parseInt(t),multiplicityData:n}})).sort((function(e,t){return t.multiplicityData.multiplicity-e.multiplicityData.multiplicity})),et=0,tt=0,nt=Je;tt<nt.length;tt++){var rt=nt[tt],ot=rt.nucleotideIndexDelta,at=rt.multiplicityData;et+=at.multiplicity}for(var it=Je[0],lt=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY,ct=0,ut=it.multiplicityData.candidates;ct<ut.length;ct++){var dt=ut[ct].pairedLabelDatum,ft=(0,l.distanceSquared)(dt.labelContent,dt.vectorNearLabelContent)/(0,l.distanceSquared)(dt.vectorNearLabelContent,dt.vectorNearNucleotide);ft<lt&&(lt=ft),ft>st&&(st=ft)}Je=Je.filter((function(e){e.nucleotideIndexDelta;var t=e.multiplicityData,n=t.multiplicity>1&&t.multiplicity/et>.05;if(n)for(var r=0,o=t.candidates;r<o.length;r++){var a=o[r];Q(c=a.pairedLabelDatum,a.arrayIndex)}else for(var i=0,l=t.candidates;i<l.length;i++){var s=l[i],c=s.pairedLabelDatum,u=(s.arrayIndex,s.labelContentAsNumber),d=s.unfilteredNucleotideData;je.push({unfilteredNucleotideData:d,pairedLabelDatum:c,labelContentAsNumber:u})}return n}));for(var pt=0,ht=je;pt<ht.length;pt++){var mt=ht[pt];Ze=mt.unfilteredNucleotideData,dt=mt.pairedLabelDatum;if(void 0===(ze=mt.labelContentAsNumber))$(dt,Ze,lt,st);else{e:for(var vt=0,xt=Je;vt<xt.length;vt++){ot=xt[vt].nucleotideIndexDelta;for(var gt=0,yt=Ze;gt<yt.length;gt++){K=(Ke=yt[gt].indices).nucleotideIndex;var bt=Ke.arrayIndex;if(ot===ze-K){!0,Q(dt,bt);break e}}}}}}}for(var Nt=!1,Et=At(),Ct={},It=0,St=C;It<St.length;It++){var _t=St[It];Ct[_t]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY}}function At(){for(var e={},t=0,n=C;t<n.length;t++){e[n[t]]={lineData:[],centerData:[]}}return{zeroCandidateBasePairs:e,tooManyCandidateBasePairs:{lineDataWithIndices:[],centerDataWithIndices:[]}}}function Tt(e,t){var n=M.map((function(t){var n=t.indices,r=t.adjustedPosition;return{indices:n,adjustedPosition:r,squaredDistance:(0,l.distanceSquared)(e,r)}}));if(n.length<t)throw f;return n.sort((function(e,t){return e.squaredDistance-t.squaredDistance})),{all:n,sliced:n.slice(0,t)}}function Pt(e,t,n){(0,i.insertBasePair)(S,e.rnaMoleculeName,e.nucleotideIndex,t.rnaMoleculeName,t.nucleotideIndex,i.DuplicateBasePairKeysHandler.THROW_ERROR,{basePairType:n});var r=(0,l.distance)(M[e.arrayIndex].singularNucleotideProps,M[t.arrayIndex].singularNucleotideProps),o=Ct[null!==n&&void 0!==n?n:"undefined"];r<o.minimum&&(o.minimum=r),r>o.maximum&&(o.maximum=r),delete M[e.arrayIndex],delete M[t.arrayIndex]}function Rt(e,t){return e.map((function(e){var n=e.indices,r=e.adjustedPosition,o=e.squaredDistance;return{indices:n,dv:(0,l.subtract)(r,t),distance:Math.sqrt(o),adjustedPosition:r}}))}function kt(e,t,n){for(var r=t.dotProductThreshold,o=t.minimumDistanceRatio,i=1/o,s=(0,l.normalize)((0,l.subtract)(e.v1,e.v0)),c=(0,l.negate)(s),u=Tt(e.v0,n),d=Rt(u.sliced,e.v0).filter((function(e){var t=e.dv;return(0,l.dotProduct)(t,s)/(0,l.magnitude)(t)<r})),f=Tt(e.v1,n),p=Rt(f.sliced,e.v1).filter((function(e){var t=e.dv;return(0,l.dotProduct)(t,c)/(0,l.magnitude)(t)<r})),h=d.length,m=p.length,v=new Array,x=e.basePairType,g=0;g<h;g++)for(var y=d[g],b=y.indices,N=y.distance,E=S.rnaMoleculeProps[b.rnaMoleculeName].nucleotideProps[b.nucleotideIndex].symbol,C=0;C<m;C++){var I=p[C],_=I.indices,A=I.distance,T=S.rnaMoleculeProps[_.rnaMoleculeName].nucleotideProps[_.nucleotideIndex].symbol;if(!(b.rnaMoleculeName===_.rnaMoleculeName&&Math.abs(b.nucleotideIndex-_.nucleotideIndex)<=1)){var P=(0,a.getBasePairType)(E,T);if(void 0===x||x===P){var R=N/A;R<o||R>i||v.push({indices0:b,indices1:_,totalDistance:N+A,distanceRatio:R,type:P})}}}switch(v.length){case 0:Et.zeroCandidateBasePairs[null!==x&&void 0!==x?x:"undefined"].lineData.push({line:e,allClosestNucleotides:{0:[],1:[]}});break;case 1:var k=v[0];Pt(k.indices0,k.indices1,k.type);break;default:Et.tooManyCandidateBasePairs.lineDataWithIndices.push({line:e,arrayIndices:v.map((function(e){var t=e.indices0,n=e.indices1;return{0:t.arrayIndex,1:n.arrayIndex}})),allClosestNucleotides:{0:u.all,1:f.all}})}1!==v.length&&Nt&&console.error("Base-pair creation failed: ".concat(v.length," (line; ").concat(e.basePairType,"; (").concat(e.v0.x,", ").concat(e.v0.y,")-(").concat(e.v1.x,", ").concat(e.v1.y,"))"),v)}function wt(e,t,n){for(var r=t.dotProductThreshold,o=t.minimumDistanceRatio,i=1/o,s=Tt(e,n),c=s.all,u=Rt(s.sliced,e),d=new Array,f=u.length,p=e.basePairType,h=0;h<f;h++)for(var m=u[h],v=m.indices,x=m.distance,g=S.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex].symbol,y=h+1;y<f;y++){var b=u[y],N=b.indices,E=b.distance,C=S.rnaMoleculeProps[N.rnaMoleculeName].nucleotideProps[N.nucleotideIndex].symbol;if(!(v.rnaMoleculeName===N.rnaMoleculeName&&Math.abs(v.nucleotideIndex-N.nucleotideIndex)<=1)){var I=(0,a.getBasePairType)(g,C);if(void 0===p||p===I){var _=(0,l.dotProduct)(m.dv,b.dv)/(x*E);if(!(_>=r)){var A=x/E;A<o||A>i||d.push({indices0:v,indices1:N,dotProduct:_,totalDistance:x+E,distanceRatio:A,type:I})}}}}switch(d.length){case 0:Et.zeroCandidateBasePairs[null!==p&&void 0!==p?p:"undefined"].centerData.push({center:e,allClosestNucleotides:[]});break;case 1:var T=d[0];Pt(T.indices0,T.indices1,T.type);break;default:Et.tooManyCandidateBasePairs.centerDataWithIndices.push({center:e,arrayIndices:d.map((function(e){var t=e.indices0,n=e.indices1;return{0:t.arrayIndex,1:n.arrayIndex}})),allClosestNucleotides:c})}1!==d.length&&Nt&&console.error("Base-pair creation failed: ".concat(d.length," (center; ").concat(e.basePairType,"; ").concat(e.x,", ").concat(e.y,")"),d)}for(var Mt=((_={})[a.default.Type.WOBBLE]=0,_[a.default.Type.CANONICAL]=1,_[a.default.Type.CIS_WATSON_CRICK_WATSON_CRICK]=2,_[a.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]=3,_[a.default.Type.MISMATCH]=4,_[void 0]=5,_),Ot=Object.entries(Mt).sort((function(e,t){return e[1]-t[1]})).map((function(e){var t=e[0];e[1];return t})),jt=((A={undefined:{lines:[],centers:[]}})[a.default.Type.CANONICAL]={lines:[],centers:[]},A[a.default.Type.MISMATCH]={lines:[],centers:[]},A[a.default.Type.WOBBLE]={lines:[],centers:[]},A[a.default.Type.CIS_WATSON_CRICK_WATSON_CRICK]={lines:[],centers:[]},A[a.default.Type.TRANS_WATSON_CRICK_WATSON_CRICK]={lines:[],centers:[]},A),Lt=0,Dt=R;Lt<Dt.length;Lt++){var Zt=Dt[Lt];jt[null!==(g=Zt.basePairType)&&void 0!==g?g:"undefined"].centers.push(Zt)}for(var Ft=0,Bt=P;Ft<Bt.length;Ft++){var Ut=Bt[Ft],zt=jt[null!==(y=Ut.basePairType)&&void 0!==y?y:"undefined"];c>=(0,l.distanceSquared)(Ut.v0,Ut.v1)?zt.centers.push(Ut.v0):zt.lines.push(Ut)}for(var Wt=0,Gt=Ot;Wt<Gt.length;Wt++){for(var Ht=jt[Gt[Wt]],Kt=Ht.centers,Vt=0,qt=Ht.lines;Vt<qt.length;Vt++){kt(on=qt[Vt],d.normal,3)}for(var Xt=0,Yt=Kt;Xt<Yt.length;Xt++){wt(cn=Yt[Xt],d.normal,6)}}var Qt=structuredClone(Et);Et=At();for(var $t=new Array,Jt=new Array,en=Qt.zeroCandidateBasePairs,tn=Qt.tooManyCandidateBasePairs,nn=0,rn=tn.lineDataWithIndices;nn<rn.length;nn++){var on;switch((on=rn[nn]).arrayIndices=on.arrayIndices.filter((function(e){return e[0]in M&&e[1]in M})),on.arrayIndices.length){case 0:en[null!==(b=on.line.basePairType)&&void 0!==b?b:"undefined"].lineData.push(on);break;case 1:var an=on.arrayIndices[0];Pt(M[an[0]].indices,M[an[1]].indices,on.line.basePairType);break;default:$t.push(on)}}for(var ln=0,sn=tn.centerDataWithIndices;ln<sn.length;ln++){var cn;switch((cn=sn[ln]).arrayIndices=cn.arrayIndices.filter((function(e){return e[0]in M&&e[1]in M})),cn.arrayIndices.length){case 0:en[null!==(N=cn.center.basePairType)&&void 0!==N?N:"undefined"].centerData.push(cn);break;case 1:an=cn.arrayIndices[0];Pt(M[an[0]].indices,M[an[1]].indices,cn.center.basePairType);break;default:Jt.push(cn)}}for(var un=0,dn=Ot;un<dn.length;un++){for(var fn=en[dn[un]],pn=fn.centerData,hn=0,mn=fn.lineData;hn<mn.length;hn++){kt(mn[hn].line,d.loose,u.line)}for(var vn=0,xn=pn;vn<xn.length;vn++){wt(xn[vn].center,d.loose,u.center)}}$t.push.apply($t,Et.tooManyCandidateBasePairs.lineDataWithIndices),Jt.push.apply(Jt,Et.tooManyCandidateBasePairs.centerDataWithIndices);var gn=o(o([],$t.map((function(e){var t=e.line,n=e.arrayIndices;return{center:r(r({},(0,l.scaleUp)((0,l.add)(t.v0,t.v1),.5)),{basePairType:t.basePairType}),arrayIndices:n}})),!0),Jt,!0);gn.sort((function(e,t){return e.arrayIndices.length-t.arrayIndices.length}));for(var yn=function(e){var t=e.center,n=e.arrayIndices,r=Ct[null!==(E=t.basePairType)&&void 0!==E?E:"undefined"];if(0===(n=n.filter((function(e){if(!(e[0]in M))return!1;if(!(e[1]in M))return!1;var t=M[e[0]],n=M[e[1]],o=(0,l.distance)(t.singularNucleotideProps,n.singularNucleotideProps);return!(o<.95*r.minimum)&&!(o>1.05*r.maximum)}))).length)return console.error("Base pairing failed."),"continue";for(var o=n.map((function(e){var n=M[e[0]],r=M[e[1]];return{distanceSquared:(0,l.distanceSquared)((0,l.scaleUp)((0,l.add)(n.singularNucleotideProps,r.singularNucleotideProps),.5),t),indices0:n.indices,indices1:r.indices}})),a=o[0],i=1;i<o.length;i++){var s=o[i];s.distanceSquared<a.distanceSquared&&(a=s)}Pt(a.indices0,a.indices1,t.basePairType)},bn=0,Nn=gn;bn<Nn.length;bn++){yn(pn=Nn[bn])}},_=0,A=Object.entries(e);_<A.length;_++){var T=A[_];S(T[0],k=T[1])}for(var P=0,R=Object.values(e);P<R.length;P++)for(var k=R[P],w=0,M=Object.values(k.rnaMoleculeProps);w<M.length;w++)for(var O=M[w],j=0,L=Object.values(O.nucleotideProps);j<L.length;j++){var D=L[j];if(D.y*=-1,void 0!==D.labelContentProps&&(D.labelContentProps.y*=-1),void 0!==D.labelLineProps)for(var Z=0,F=D.labelLineProps.points;Z<F.length;Z++){F[Z].y*=-1}}}},6820:function(e,t,n){"use strict";n.d(t,{Fx:function(){return u},IU:function(){return h},QL:function(){return m},qh:function(){return v},vh:function(){return s},wU:function(){return c}});var r=n(7762),o=n(9439),a=n(7744),i={"(":")","[":"]","{":"}","<":">"},l=Object.entries(i).reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0];return e[n[1]]=r,e}),{});function s(e){return e.replace(/\s+/g,"")}function c(e){var t=e.replace(/\s+/g,"");if(0===t.length)return!1;if(!/[().\[\]{}<>]/.test(t))return!1;for(var n=0;n<t.length;n++){var r=t[n];if(!("."===r||r in i||r in l||/[a-zA-Z]/.test(r)))return!1}return!0}function u(e){for(var t={},n=new Array,r=0;r<e.length;r++){var a=e[r];if("."!==a){var s=/[A-Z]/.test(a),c=/[a-z]/.test(a);if(a in i){var u=a;u in t||(t[u]=[]),t[u].push({openSymbol:u,index:r})}else if(s){var d=a.toLowerCase();d in t||(t[d]=[]),t[d].push({openSymbol:d,index:r})}else{var f=void 0;if(a in l?f=l[a]:c&&(f=a),void 0===f)throw new Error('Unrecognized structure character "'.concat(a,'" at position ').concat(r+1,"."));var p=t[f];if(void 0===p||0===p.length)throw new Error('Unbalanced structure: found closing "'.concat(a,'" at position ').concat(r+1," without matching opening."));var h=p.pop().index;n.push([h,r])}}}for(var m=0,v=Object.entries(t);m<v.length;m++){var x=(0,o.Z)(v[m],2),g=x[0],y=x[1];if(y.length>0){var b=y[y.length-1].index;throw new Error('Unbalanced structure: opening "'.concat(g,'" at position ').concat(b+1," has no matching closing character."))}}return n}var d=[["(",")"],["[","]"],["{","}"],["<",">"]],f="abcdefghijklmnopqrstuvwxyz";function p(e){if(e<d.length)return d[e];var t=e-d.length;if(t>=f.length)throw new Error("Too many pseudoknots to encode using extended dot-bracket notation.");var n=f[t];return[n.toUpperCase(),n]}function h(e,t){var n=t.map((function(t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];if(r===a)throw new Error("Base pair cannot join a nucleotide to itself.");var i=r<a?[r,a]:[a,r],l=(0,o.Z)(i,2),s=l[0],c=l[1];if(s<0||c>=e)throw new Error("Base pair indices [".concat(r,", ").concat(a,"] are out of range for sequence length ").concat(e,"."));return{i:s,j:c}}));n.sort((function(e,t){return e.i-t.i||e.j-t.j}));for(var a,i,l=[],s=new Array(n.length),c=0;c<n.length;c++){for(var u=n[c],h=!1,m=0;m<l.length;m++){var v,x=l[m],g=!0,y=(0,r.Z)(x);try{for(y.s();!(v=y.n()).done;){var b=v.value;if(i=b,(a=u).i<i.i&&i.i<a.j&&a.j<i.j||i.i<a.i&&a.i<i.j&&i.j<a.j){g=!1;break}}}catch(P){y.e(P)}finally{y.f()}if(g){s[c]=m,x.push(u),h=!0;break}}if(!h){var N=d.length+f.length;if(l.length>=N)throw new Error("Too many pseudoknots to encode using extended dot-bracket notation.");s[c]=l.length,l.push([u])}}for(var E=new Array(e).fill("."),C=0;C<n.length;C++){var I=n[C],S=p(s[C]),_=(0,o.Z)(S,2),A=_[0],T=_[1];E[I.i]=A,E[I.j]=T}return E.join("")}function m(e,t,n){var i,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.DuplicateBasePairKeysHandler.DO_NOTHING,s=(0,r.Z)(n);try{for(s.s();!(i=s.n()).done;){var c=(0,o.Z)(i.value,2),u=c[0],d=c[1];(0,a.insertBasePair)(e,t,u,t,d,l)}}catch(f){s.e(f)}finally{s.f()}}function v(e,t){var n=[],i=e.basePairs[t];if(!i)return n;for(var l=0,s=Object.entries(i);l<s.length;l++){var c,u=(0,o.Z)(s[l],2),d=u[0],f=u[1],p=Number.parseInt(d,10),h={rnaMoleculeName:t,nucleotideIndex:p},m=(0,r.Z)(f);try{for(m.s();!(c=m.n()).done;){var v=c.value;if(v.rnaMoleculeName===t){var x={rnaMoleculeName:v.rnaMoleculeName,nucleotideIndex:v.nucleotideIndex};(0,a.isRelevantBasePairKeySetInPair)(h,x)&&n.push([p,v.nucleotideIndex])}}}catch(g){m.e(g)}finally{m.f()}}return n}},5481:function(e,t,n){"use strict";t.__esModule=!0,t.strInputFileHandler=void 0;var r=n(5495);t.strInputFileHandler=function(e){var t,n,o,a,i,l,s,c=/basefont[^\}]*\{[^\}]+\}[^\}\d]*(\d+)[^\}]*\}/.exec(e);null!==c&&Number.parseInt(c[1]);for(var u=e.matchAll(/(text|line)\s*\{/g),d=new Array,f=new Array,p="RNA molecule",h=((t={})[0]=[],t),m=((n={})[0]=[],n),v=new Array,x=0,g=u;x<g.length;x++){var y=g[x],b=1,N=y.index;if(void 0===N)throw"index should never be undefined.";for(var E=N+y[0].length,C=E-1;b>0;){var I=C+1,S=e.indexOf("{",I),_=e.indexOf("}",I);if(-1===S){if(-1===_)throw"This STR file is improper; it contains an unclosed bracket.";C=_,b--}else-1===_?(C=S,b++):_<S?(C=_,b--):(C=S,b++)}var A=e.substring(E,C);switch(y[1]){case"text":var T=/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s*\}.*(A|C|G|U)\s+0\s*$/,P=A.match(T);null!==P&&d.push({x:Number.parseFloat(P[1]),y:Number.parseFloat(P[2]),symbol:P[3]});break;case"line":T=/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s*\}/;var R=A.match(T);if(null===R)throw"lineRegexMatch should never be null.";f.push({v0:{x:Number.parseFloat(R[1]),y:Number.parseFloat(R[2])},v1:{x:Number.parseFloat(R[3]),y:Number.parseFloat(R[4])}})}}var k={firstNucleotideIndex:1,nucleotideProps:d},w=[{name:"RNA complex",rnaMoleculeProps:(o={},o[p]=k,o),basePairs:{}}];return(0,r.parseGraphicalData)(w,((a={})[0]=f,a),((i={})[0]=v,i),((l={})[0]=((s={})[p]=[],s),l),h,m),{complexDocumentName:"Scene",rnaComplexProps:w}}},1579:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.svgInputFileHandler=t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT=t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG=t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT=t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG=t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME=t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE=t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1=t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0=t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1=t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0=t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX=t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME=t.SVG_PROPERTY_XRNA_COMPLEX_NAME=t.SVG_PROPERTY_XRNA_TYPE=t.SvgPropertyXrnaType=void 0;var a,i=n(9634),l=n(7089),s=n(9287),c=n(7744),u=n(6745),d=n(3871),f=n(433),p=n(6176),h=n(5495);!function(e){e.SCENE="scene",e.RNA_COMPLEX="rna_complex",e.RNA_MOLECULE="rna_molecule",e.NUCLEOTIDE="nucleotide",e.LABEL_LINE="label_line",e.LABEL_CONTENT="label_content",e.BASE_PAIR="base_pair",e.PATH="path",e.CENTERLINE="centerline"}(a=t.SvgPropertyXrnaType||(t.SvgPropertyXrnaType={}));var m,v=Object.values(a);!function(e){e.LETTERS="Letters",e.LABELS_LINES="Labels_Lines",e.LABELS_TEXT="Labels_Text",e.BASE_PAIR_LINES="Nucleotide_Lines",e.BASE_PAIR_CIRCLES="Nucleotide_Circles"}(m||(m={}));var x;Object.values(m);!function(e){e.XRNA_JS="xrna.js",e.XRNA_GT="xrna_gt",e.UNFORMATTED="unformatted"}(x||(x={})),t.SVG_PROPERTY_XRNA_TYPE="data-xrna_type",t.SVG_PROPERTY_XRNA_COMPLEX_NAME="data-xrna_rna_complex_name",t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME="data-xrna_rna_molecule_name",t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX="data-xrna_rna_molecule_first_nucleotide_index",t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX="data-xrna_formatted_nucleotide_index",t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0="data-xrna_base_pair_rna_molecule_name_0",t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1="data-xrna_base_pair_rna_molecule_name_1",t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX="data-xrna_base_pair_formatted_nucleotide_index",t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0="data-xrna_base_pair_formatted_nucleotide_index_0",t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1="data-xrna_base_pair_formatted_nucleotide_index_1",t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE="data-xrna_base_pair_type",t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME="data-xrna_scene_name",t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG="data-xrna_relative_coordinates_flag",t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT=!0,t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG="data-xrna_invert_y_axis_flag",t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT=!1;var g="rectangle_width",y="rectangle_height",b=/matrix\(1\s+0\s+0\s+1\s+(-?[\d.]+)\s+(-?[\d.]+)\)/,N={defaults:{}};function E(e,n,o){var i,h,C,I,S,_,A,T,P,R,k=e.getAttribute(t.SVG_PROPERTY_XRNA_TYPE);if(null!==k&&(R=k,!v.includes(R)))throw'Unrecognized SvgXrnaDataType "'.concat(k,'"');for(var w=r({},N.root),M=0,O=e.classList;M<O.length;M++){(Z=O[M])in N.defaults&&(w=r(r({},w),N.defaults[Z]))}if(e.tagName in N)for(var j=N[e.tagName],L=0,D=e.classList;L<D.length;L++){var Z;if((Z=D[L])in j){var F=j[Z];w=r(r({},w),F)}}switch(o){case x.XRNA_JS:if(null===k)e.tagName;else{var B=null!==(i=n.invertYAxisFlag)&&void 0!==i?i:t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG_DEFAULT;switch(k){case a.SCENE:var U=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME);if(null===U)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_DOCUMENT_NAME,'" is missing.');n.complexDocumentName=U;var z=e.getAttribute(t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG);if(null==z)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG,'" is missing.');n.relativeCoordinatesFlag="true"===z;var W=e.getAttribute(t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG);if(null==W)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_INVERT_Y_AXIS_FLAG,'" is missing.');n.invertYAxisFlag="true"===W;break;case a.RNA_COMPLEX:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');n.singularRnaComplexProps={name:Ee,rnaMoleculeProps:{},basePairs:{}};var G=n.rnaComplexProps.length;n.rnaComplexPropsByName[Ee]=n.singularRnaComplexProps;var H=[];n.labelLinesPerRnaComplex=H,n.labelLines[G]=H;var K=[];n.labelContentsPerRnaComplex=K,n.labelContents[G]=K,n.rnaComplexProps.push(n.singularRnaComplexProps),n.temporaryBasePairsPerRnaComplex=[];break;case a.BASE_PAIR:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(yt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_0,'" is missing.');if(null===(bt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_0,'" is missing.');if(null===(Nt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_RNA_MOLECULE_NAME_1,'" is missing.');if(null===(Et=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_FORMATTED_NUCLEOTIDE_INDEX_1,'" is missing.');if(null===(nt=e.getAttribute(t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_BASE_PAIR_TYPE,'" is missing.');if(!(0,l.isBasePairType)(nt))throw'Unrecognized BasePair.Type "'.concat(nt,'"');var V={rnaMoleculeName0:yt,formattedNucleotideIndex0:Number.parseInt(bt),rnaMoleculeName1:Nt,formattedNucleotideIndex1:Number.parseInt(Et),basePairType:nt};null!==(de=e.getAttribute("stroke"))&&"none"!==de&&(V.color=(0,d.fromCssString)(de)),null!==(Ne=e.getAttribute("fill"))&&"none"!==Ne&&(V.color=(0,d.fromCssString)(Ne)),null!==(pe=e.getAttribute("stroke-width"))&&(V.strokeWidth=Number.parseFloat(pe)),Ee in n.temporaryBasePairsPerRnaComplexName||(n.temporaryBasePairsPerRnaComplexName[Ee]=[]),n.temporaryBasePairsPerRnaComplexName[Ee].push(V);break;case a.RNA_MOLECULE:if(null===(X=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,'" is missing.');if(n.singularRnaMoleculeProps={firstNucleotideIndex:Number.parseInt(X),nucleotideProps:{}},null===(Te=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(void 0===n.singularRnaComplexProps)throw"cache.singularRnaComplexProps should not be undefined at this point. The input SVG file is broken.";n.singularRnaComplexProps.rnaMoleculeProps[Te]=n.singularRnaMoleculeProps;break;case a.NUCLEOTIDE:if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(!(Ee in n.rnaComplexPropsByName)){var q={name:Ee,rnaMoleculeProps:{},basePairs:{}};n.rnaComplexPropsByName[Ee]=q,n.rnaComplexProps.push(q)}var X,Y=n.rnaComplexPropsByName[Ee];if(null===(Te=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(X=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_FIRST_NUCLEOTIDE_INDEX,'" is missing.');var Q=Number.parseInt(X);if(!(Te in Y.rnaMoleculeProps)){var $={firstNucleotideIndex:Q,nucleotideProps:{}};Y.rnaMoleculeProps[Te]=$}var J=Y.rnaMoleculeProps[Te];if(null===(Ge=e.getAttribute("transform")))throw'Required SVG-element property "transform" is missing.';var ee=(0,u.parseAffineMatrix)(Ge),te=e.getAttribute(t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX);if(null===te)throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_NUCLEOTIDE_INDEX,'" is missing.');var ne=Number.parseInt(te),re=e.textContent;if(null===re)throw'Required SVG-element property "textContent" is missing.';if(!s.Nucleotide.isSymbol(re))throw'"'.concat(re,'" is not a valid nucleotide symbol.');var oe=ee[4],ae=ee[5];B&&(ae*=-1);var ie={x:oe,y:ae,symbol:re};J.nucleotideProps[ne-Q]=ie;var le=structuredClone(f.default.DEFAULT);ie.font=le,null!==(ge=e.getAttribute("font-style"))?le.style=ge:void 0!==w.style&&(le.style=w.style),null!==(ye=e.getAttribute("font-weight"))?le.weight=ye:void 0!==w.weight&&(le.weight=w.weight),null!==(be=e.getAttribute("font-family"))?le.family=be:void 0!==w.family&&(le.family=w.family),null!==(xe=e.getAttribute("font-size"))?le.size=xe:void 0!==w.size&&(le.size=w.size),null!==(pe=e.getAttribute("stroke-width"))?ie.strokeWidth=Number.parseFloat(pe):void 0!==w.strokeWidth&&(ie.strokeWidth=w.strokeWidth),null!==(Ne=e.getAttribute("fill"))?ie.color=(0,d.fromCssString)(Ne):void 0!==w.fill&&(ie.color=w.fill);break;case a.LABEL_LINE:var se=Array.from(e.children).filter((function(e){return"polyline"===e.tagName}));if(1!==se.length)throw"Label-line SVG groups must have exactly one polyline child element.";var ce=se[0].getAttribute("points");if(null===ce)throw'Required SVG-element property "points" is missing.';var ue=new Array;ue=ce.split(/\s+/).map((function(e){var t=e.match(/(-?[\d.]+),\s*(-?[\d.]+)/);if(null===t)throw'Required SVG element property "points" does not match the expected format';var n=Number.parseFloat(t[1]),r=Number.parseFloat(t[2]);return B&&(r*=-1),{x:n,y:r}}));var de=e.getAttribute("stroke"),fe=d.BLACK;null!==de?fe=(0,d.fromCssString)(de):void 0!==w.stroke&&(fe=w.stroke);var pe=p.DEFAULT_STROKE_WIDTH,he=e.getAttribute("stroke-width");null!==he?pe=Number.parseFloat(he):void 0!==w.strokeWidth&&(pe=w.strokeWidth);var me={points:ue,color:fe,strokeWidth:pe};if(null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(Te=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(Ce=e.getAttribute(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,'" is missing.');var ve=Number.parseInt(Ce);Ee in n.temporaryLabelData||(n.temporaryLabelData[Ee]={}),Te in(Se=n.temporaryLabelData[Ee])||(Se[Te]={}),ve in(_e=Se[Te])||(_e[ve]={}),_e[ve].labelLineProps=me;break;case a.LABEL_CONTENT:if(null===(De=e.textContent))throw'Required SVG-element property "textContent" is missing.';if(null===(Ge=e.getAttribute("transform")))throw'Required SVG-element property "transform" is missing.';var xe,ge,ye,be;ee=(0,u.parseAffineMatrix)(Ge),le=structuredClone(f.default.DEFAULT);null!==(xe=e.getAttribute("font-size"))?le.size=xe:void 0!==w.size&&(le.size=w.size),null!==(ge=e.getAttribute("font-style"))?le.style=ge:void 0!==w.style&&(le.style=w.style),null!==(ye=e.getAttribute("font-weight"))?le.weight=ye:void 0!==w.weight&&(le.weight=w.weight),null!==(be=e.getAttribute("font-family"))?le.family=be:void 0!==w.family&&(le.family=w.family);oe=ee[4],ae=ee[5];B&&(ae*=-1);var Ne,Ee,Ce,Ie={content:De,x:oe,y:ae,font:le};if(null!==(Ne=e.getAttribute("fill"))?Ie.color=(0,d.fromCssString)(Ne):void 0!==w.fill&&(Ie.color=w.fill),null!==(pe=e.getAttribute("stroke-width"))?Ie.strokeWidth=Number.parseFloat(pe):void 0!==w.strokeWidth&&(Ie.strokeWidth=w.strokeWidth),null===(Ee=e.getAttribute(t.SVG_PROPERTY_XRNA_COMPLEX_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_COMPLEX_NAME,'" is missing.');if(null===(Te=e.getAttribute(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_RNA_MOLECULE_NAME,'" is missing.');if(null===(Ce=e.getAttribute(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX)))throw'Required SVG-element property "'.concat(t.SVG_PROPERTY_XRNA_LABEL_FORMATTED_NUCLEOTIDE_INDEX,'" is missing.');var Se,_e;ve=Number.parseInt(Ce);Ee in n.temporaryLabelData||(n.temporaryLabelData[Ee]={}),Te in(Se=n.temporaryLabelData[Ee])||(Se[Te]={}),ve in(_e=Se[Te])||(_e[ve]={}),_e[ve].labelContentProps=Ie;break;case a.PATH:case a.CENTERLINE:break;default:throw'Unrecognized SvgXrnaDataType "'.concat(k,'"')}}break;case x.XRNA_GT:switch(e.tagName){case"g":var Ae=e.getAttribute("id");if(n.mostRecentGroupId=null!==Ae&&void 0!==Ae?Ae:void 0,Ae===m.LETTERS){J={nucleotideProps:{},firstNucleotideIndex:0};n.rnaMoleculeCount++;var Te="RNA molecule #".concat(n.rnaMoleculeCount);n.currentRnaMoleculeName=Te,n.singularRnaComplexProps.rnaMoleculeProps[Te]=J;var Pe=n.graphicalAdjustmentsPerRnaComplex;Pe[Te]={},n.graphicalAdjustmentsPerRnaMolecule=Pe[Te]}break;case"text":switch(n.mostRecentGroupId){case m.LETTERS:for(var Re={id:e.getAttribute("id"),transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(g),rectangleHeight:e.getAttribute(y)},ke=0,we=Object.entries(Re);ke<we.length;ke++){var Me=we[ke],Oe=Me[0];if(null===Me[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var je=Re.id;ne=Number.NaN;if(/^-?\d+$/.test(je))ne=Number.parseInt(je);else{var Le=je.match(/^(\w+)_(\w+):(\d+)$/);if(null===Le)throw'Unrecognized nucleotide-index format "'.concat(je,'"');n.currentRnaMoleculeName=Le[2],ne=Number.parseInt(Le[3])}var De=Re.textContent.trim();if(!s.Nucleotide.isSymbol(De))throw'Unrecognized nucleotide symbol "'.concat(De,'"');if(null===(ut=(Ge=Re.transform).match(b)))throw'Unrecognized transform format "'.concat(Ge,'"');ie={symbol:De,x:Number.parseFloat(ut[1]),y:Number.parseFloat(ut[2])};null!==(He={fill:e.getAttribute("fill"),fontFamily:e.getAttribute("font-family"),fontWeight:e.getAttribute("font-weight"),fontStyle:e.getAttribute("font-style"),fontSize:e.getAttribute("font-size")}).fill&&(ie.color=(0,d.fromCssString)(He.fill));le=structuredClone(f.default.DEFAULT);ie.font=le,null!==He.fontFamily&&(le.family=He.fontFamily),null!==He.fontWeight&&(le.weight=He.fontWeight),null!==He.fontStyle&&(le.style=He.fontStyle),null!==He.fontSize&&(le.size=(0,f.parseFontSize)(He.fontSize));var Ze=(0,s.getGraphicalAdjustment)({width:Number.parseFloat(Re.rectangleWidth),height:Number.parseFloat(Re.rectangleHeight)}),Fe=n.currentRnaMoleculeName;if(void 0===Fe)throw"cache.currentRnaMoleculeName should not be undefined at this point.";if(!(Fe in n.singularRnaComplexProps.rnaMoleculeProps)){J={firstNucleotideIndex:0,nucleotideProps:{}};n.singularRnaMoleculeProps=J,n.singularRnaComplexProps.rnaMoleculeProps[Fe]=J;var Be={};n.graphicalAdjustmentsPerRnaMolecule=Be,n.graphicalAdjustmentsPerRnaComplex[Fe]=Be}n.singularRnaMoleculeProps.nucleotideProps[ne]=ie,n.graphicalAdjustmentsPerRnaMolecule[ne]=Ze;break;case m.LABELS_TEXT:Re={transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(g),rectangleHeight:e.getAttribute(y)};for(var Ue=0,ze=Object.entries(Re);Ue<ze.length;Ue++){var We=ze[Ue];Oe=We[0];if(null===We[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var Ge;if(Re.textContent=Re.textContent.trim(),null===(ut=(Ge=Re.transform).match(b)))throw"Unrecognized transform format ".concat(Ge);var He={fontFamily:e.getAttribute("font-family"),fontStyle:e.getAttribute("font-style"),fontWeight:e.getAttribute("font-weight"),fontSize:e.getAttribute("font-size"),color:e.getAttribute("fill")};le=structuredClone(f.default.DEFAULT);null!==He.fontFamily&&(le.family=He.fontFamily),null!==He.fontStyle&&(le.style=He.fontStyle),null!==He.fontWeight&&(le.weight=He.fontWeight),null!==He.fontSize&&(le.size=(0,f.parseFontSize)(He.fontSize));fe=structuredClone(d.BLACK);null!==He.color&&(fe=(0,d.fromCssString)(He.color));oe=Number.parseFloat(ut[1]),ae=Number.parseFloat(ut[2]);var Ke=Number.parseFloat(Re.rectangleWidth),Ve=Number.parseFloat(Re.rectangleHeight);n.labelContentsPerRnaComplex.push({labelContent:{content:Re.textContent,x:oe,y:ae,font:le,color:fe},rectangle:{width:Ke,height:Ve}})}break;case"line":Re={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")};for(var qe=0,Xe=Object.entries(Re);qe<Xe.length;qe++){var Ye=Xe[qe];Oe=Ye[0];if(null===Ye[1])throw"Required SVG property ".concat(Oe," is missing.")}He={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},fe=d.BLACK;null!==He.color&&(fe=(0,d.fromCssString)(He.color));pe=p.DEFAULT_STROKE_WIDTH;null!==He.strokeWidth&&(pe=Number.parseFloat(He.strokeWidth));var Qe={x:Number.parseFloat(Re.x1),y:Number.parseFloat(Re.y1)},$e={x:Number.parseFloat(Re.x2),y:Number.parseFloat(Re.y2)};switch(n.mostRecentGroupId){case m.BASE_PAIR_LINES:n.basePairLinesPerRnaComplex.push({v0:Qe,v1:$e,basePairType:l.default.Type.CANONICAL,color:fe,strokeWidth:pe});break;case m.LABELS_LINES:n.labelLinesPerRnaComplex.push({v0:Qe,v1:$e,color:fe,strokeWidth:pe})}break;case"circle":if(n.mostRecentGroupId===m.BASE_PAIR_CIRCLES){Re={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")};for(var Je=0,et=Object.entries(Re);Je<et.length;Je++){var tt=et[Je];Oe=tt[0];if(null===tt[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}null!==(He={fill:e.getAttribute("fill")}).fill&&(He.fill=He.fill.trim());var nt=null===He.fill?l.default.Type.MISMATCH:l.default.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(Re.cx),y:Number.parseFloat(Re.cy),basePairType:nt})}}break;case x.UNFORMATTED:switch(e.tagName){case"circle":Re={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")};for(var rt=0,ot=Object.entries(Re);rt<ot.length;rt++){var at=ot[rt];Oe=at[0];if(null===at[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}var it=void 0;null!==(He={fill:e.getAttribute("fill")}).fill&&(He.fill=He.fill.trim(),it=(0,d.fromCssString)(He.fill));nt=null===He.fill?l.default.Type.MISMATCH:l.default.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(Re.cx),y:Number.parseFloat(Re.cy),basePairType:nt,color:null!==(h=null!==it&&void 0!==it?it:w.fill)&&void 0!==h?h:w.stroke});break;case"text":De=(Re={textContent:e.textContent}).textContent.trim();for(var lt=0,st=Object.entries(Re);lt<st.length;lt++){var ct=st[lt];Oe=ct[0];if(null===ct[1])throw'Required SVG attribute "'.concat(Oe,'" is missing.')}He={transform:e.getAttribute("transform"),x:e.getAttribute("x"),y:e.getAttribute("y"),fontFamily:null!==(C=e.getAttribute("font-family"))&&void 0!==C?C:w.family,fontStyle:null!==(I=e.getAttribute("font-style"))&&void 0!==I?I:w.style,fontWeight:null!==(S=e.getAttribute("font-weight"))&&void 0!==S?S:w.weight,fontSize:null!==(_=e.getAttribute("font-size"))&&void 0!==_?_:w.size,color:null!==(T=null!==(A=e.getAttribute("fill"))&&void 0!==A?A:w.fill)&&void 0!==T?T:w.stroke,strokeWidth:null!==(P=e.getAttribute("stroke-width"))&&void 0!==P?P:w.strokeWidth},le=structuredClone(f.default.DEFAULT);He.fontFamily&&(le.family=He.fontFamily),He.fontStyle&&(le.style=He.fontStyle),He.fontWeight&&(le.weight=He.fontWeight),He.fontSize&&("number"==typeof He.fontSize?le.size=He.fontSize:le.size=(0,f.parseFontSize)(He.fontSize));fe=structuredClone(d.BLACK);He.color&&(fe="object"==typeof He.color?He.color:(0,d.fromCssString)(He.color));var ut;oe=0,ae=0;if(null!==He.transform)null!==(ut=He.transform.match(b))&&(oe=Number.parseFloat(ut[1]),ae=Number.parseFloat(ut[2]));null!==He.x&&(oe=Number.parseFloat(He.x)),null!==He.y&&(ae=Number.parseFloat(He.y));pe=p.DEFAULT_STROKE_WIDTH;if(He.strokeWidth&&(pe="number"==typeof He.strokeWidth?He.strokeWidth:Number.parseFloat(He.strokeWidth)),s.Nucleotide.isSymbol(De)){ie={x:oe,y:ae,symbol:De,color:fe,strokeWidth:pe,font:le};n.singularRnaMoleculeProps.nucleotideProps[n.nucleotideCount]=ie,n.nucleotideCount++}else{if(null===(Ke=e.getAttribute(g)))throw'Required SVG property "'.concat(g,'" is missing.');if(null===(Ve=e.getAttribute(y)))throw'Required SVG property "'.concat(y,'" is missing.');n.labelContentsPerRnaComplex.push({labelContent:{x:oe,y:ae,content:De,font:le,color:fe,strokeWidth:pe},rectangle:{width:Number.parseFloat(Ke),height:Number.parseFloat(Ve)}})}break;case"line":Re={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")};for(var dt=0,ft=Object.entries(Re);dt<ft.length;dt++){var pt=ft[dt];Oe=pt[0];if(null===pt[1])throw"Required SVG property ".concat(Oe," is missing.")}He={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},fe=d.BLACK;null!==He.color&&(fe=(0,d.fromCssString)(He.color));pe=p.DEFAULT_STROKE_WIDTH;null!==He.strokeWidth&&(pe=Number.parseFloat(He.strokeWidth));Qe={x:Number.parseFloat(Re.x1),y:Number.parseFloat(Re.y1)},$e={x:Number.parseFloat(Re.x2),y:Number.parseFloat(Re.y2)};n.basePairLinesPerRnaComplex.push({v0:Qe,v1:$e,basePairType:l.default.Type.CANONICAL,color:fe,strokeWidth:pe}),n.labelLinesPerRnaComplex.push({v0:Qe,v1:$e,color:fe,strokeWidth:pe})}break;default:throw"Unhandled switch case."}var ht=Array.from(e.children);n.parentSvgXrnaDataType=null!==k&&void 0!==k?k:void 0;for(var mt=0,vt=ht;mt<vt.length;mt++){E(vt[mt],n,o)}if(k===a.RNA_COMPLEX){Y=n.singularRnaComplexProps;for(var xt=0,gt=n.temporaryBasePairsPerRnaComplex;xt<gt.length;xt++){var yt=(V=gt[xt]).rnaMoleculeName0,bt=V.formattedNucleotideIndex0,Nt=V.rnaMoleculeName1,Et=V.formattedNucleotideIndex1;nt=V.basePairType,fe=V.color,pe=V.strokeWidth;if(!(yt in Y.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(yt,'"');var Ct=Y.rnaMoleculeProps[yt],It=bt-Ct.firstNucleotideIndex;if(!(It in Ct.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(bt);if(!(Nt in Y.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(Nt,'"');var St=Y.rnaMoleculeProps[Nt],_t=Et-St.firstNucleotideIndex;if(!(_t in St.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(Et);(0,c.insertBasePair)(Y,yt,It,Nt,_t,c.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:nt,strokeWidth:pe,color:fe})}}}function C(e){var t={},n=e.split(";");n=n.filter((function(e){return!e.match(/^\s*$/)}));for(var r=0,a=n;r<a.length;r++){var i=a[r],l=o([],i.matchAll(/:/g),!0).map((function(e){return e.index}));if(1!==l.length)throw"Multiple colons found within style string.";var s=l[0],c=i.substring(0,s).trim(),u=i.substring(s+1).trim();switch(c){case"fill":t.fill=(0,d.fromCssString)(u);break;case"stroke":t.stroke=(0,d.fromCssString)(u);break;case"stroke-width":t.strokeWidth=Number.parseFloat(u);break;case"font-size":t.size=u;break;case"font-weight":t.weight=u;break;case"font-family":t.family=u}}return t}t.svgInputFileHandler=function(e){var n,r,a=e.match(/<!\[CDATA\[([\s\S]*)\]\]>/m);if(N={defaults:{}},a){var l=a[1].split("\n");l=l.filter((function(e){return!e.match(/^\s*$/)}));for(var s=0,d=l;s<d.length;s++){var f=d[s].match(/^\s*([\w-.]+)\s*\{(.*)\}\s*$/);if(f){var p=f[1],m=o([],p.matchAll(/\./g),!0).map((function(e){return e.index})),v=void 0,b=void 0;switch(m.length){case 0:v=p,b="";break;case 1:var I=m[0];v=p.substring(0,I),b=p.substring(I+1);break;default:continue}var S=C(f[2]);if(""===v)N.defaults[b]=S;else{v in N||(N[v]={});var _=N[v];if(""===b)_.default=S;else _[b]=S}}}}var A=[],T={rnaComplexProps:A,graphicalAdjustments:{},basePairLinesPerRnaComplex:[],basePairCentersPerRnaComplex:[],rnaMoleculeCount:0,nucleotideCount:0,labelLines:{},labelContents:{},transform:(0,u.identity)(),rnaComplexPropsByName:{},temporaryBasePairsPerRnaComplexName:{},temporaryLabelData:{}},P=x.UNFORMATTED;if(/data-xrna_type/.test(e))P=x.XRNA_JS;else if(/id\s*=\s*"Letters"/.test(e)){P=x.XRNA_GT;var R={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}},k=A.length;A.push(R),T.singularRnaComplexProps=R;var w=[];T.labelLinesPerRnaComplex=w,T.labelLines[k]=w;var M=[];T.labelContentsPerRnaComplex=M,T.labelContents[k]=M,T.graphicalAdjustments[k]={},T.graphicalAdjustmentsPerRnaComplex=T.graphicalAdjustments[0]}else{P=x.UNFORMATTED;R={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}};A.push(R),T.singularRnaComplexProps=R;T.graphicalAdjustments[0]={},T.labelLines[0]=[],T.labelContents[0]=[],T.graphicalAdjustmentsPerRnaComplex=T.graphicalAdjustments[0];var O={firstNucleotideIndex:1,nucleotideProps:{}},j="RNA molecule";T.currentRnaMoleculeName=j,R.rnaMoleculeProps[j]=O,T.singularRnaMoleculeProps=O,T.graphicalAdjustmentsPerRnaComplex[j]={},T.graphicalAdjustmentsPerRnaMolecule=T.graphicalAdjustmentsPerRnaComplex[j],T.labelLinesPerRnaComplex=[],T.labelContentsPerRnaComplex=[]}if([x.UNFORMATTED,x.XRNA_GT].includes(P)){var L=document.getElementById(i.TEST_SPACE_ID);L.innerHTML=e;for(var D=0,Z=Array.from(L.querySelectorAll("text"));D<Z.length;D++){var F=Z[D],B=F.getBBox();F.setAttribute(g,"".concat(B.width)),F.setAttribute(y,"".concat(B.height))}e=L.innerHTML,L.innerHTML=""}var U=(new DOMParser).parseFromString(e,"image/svg+xml"),z=Array.from(U.children),W=U.querySelector("svg");if(!W)throw"No svg element was found within the input file.";var G=C(W.style.cssText);N.root=G;for(var H=0,K=z;H<K.length;H++){E(K[H],T,P)}function V(){for(var e=0,t=Object.values(A);e<t.length;e++)for(var n=t[e].rnaMoleculeProps,r=0,o=Object.entries(n);r<o.length;r++){var a=o[r],i=a[0],l=a[1];0===Object.values(l.nucleotideProps).length&&delete n[i]}}switch(P){case x.XRNA_JS:for(var q=null!==(n=T.relativeCoordinatesFlag)&&void 0!==n?n:t.SVG_PROPERTY_XRNA_RELATIVE_COORDINATES_FLAG_DEFAULT,X=0,Y=Object.keys(T.temporaryBasePairsPerRnaComplexName);X<Y.length;X++){if(!((de=Y[X])in T.temporaryBasePairsPerRnaComplexName))throw'A base pair within the input file referenced RNA complex "'.concat(de,'," which was not present within the input file.');R=T.rnaComplexPropsByName[de];for(var Q=0,$=T.temporaryBasePairsPerRnaComplexName[de];Q<$.length;Q++){var J=$[Q],ee=J.rnaMoleculeName0,te=J.rnaMoleculeName1,ne=J.formattedNucleotideIndex0,re=J.formattedNucleotideIndex1,oe=J.basePairType,ae=J.strokeWidth,ie=J.color;if(!(ee in R.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(ee,'," which was not present within the RNA complex.');var le=R.rnaMoleculeProps[ee];if(!(te in R.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(te,'," which was not present within the RNA complex.');var se=R.rnaMoleculeProps[te];(0,c.insertBasePair)(R,ee,ne-le.firstNucleotideIndex,te,re-se.firstNucleotideIndex,c.DuplicateBasePairKeysHandler.DO_NOTHING,{basePairType:oe,strokeWidth:ae,color:ie})}}for(var ce=0,ue=Object.keys(T.temporaryLabelData);ce<ue.length;ce++){var de=ue[ce],fe=T.temporaryLabelData[de];if(!(de in T.rnaComplexPropsByName))throw'RNA-complex name "'.concat(de,'" was referenced by a label, but was not present in the input file.');R=T.rnaComplexPropsByName[de];for(var pe=0,he=Object.keys(fe);pe<he.length;pe++){var me=fe[j=he[pe]];if(!(j in R.rnaMoleculeProps))throw'RNA-molecule name "'.concat(j,'" was referenced by a label, but was not present in the input file.');O=R.rnaMoleculeProps[j];for(var ve=0,xe=Object.keys(me);ve<xe.length;ve++){var ge=xe[ve],ye=Number.parseInt(ge),be=me[ye],Ne=be.labelLineProps,Ee=be.labelContentProps,Ce=ye-O.firstNucleotideIndex,Ie=O.nucleotideProps[Ce];if(void 0!==Ne){if(!q)for(var Se=0,_e=Ne.points;Se<_e.length;Se++){var Ae=_e[Se];Ae.x-=Ie.x,Ae.y-=Ie.y}Ie.labelLineProps=Ne}void 0!==Ee&&(Ie.labelContentProps=Ee,Ee.x-=Ie.x,Ee.y-=Ie.y)}}}break;case x.XRNA_GT:V();for(var Te=0,Pe=Object.entries(T.labelContents);Te<Pe.length;Te++)for(var Re=Pe[Te],ke=(Re[0],0),we=M=Re[1];ke<we.length;ke++){var Me=we[ke],Oe=Me.labelContent;B=Me.rectangle;Oe.x-=.125*B.width,Oe.y+=.25*B.height}(0,h.parseGraphicalData)(A,{0:T.basePairLinesPerRnaComplex},{0:T.basePairCentersPerRnaComplex},T.graphicalAdjustments,T.labelLines,T.labelContents);break;case x.UNFORMATTED:V(),(0,h.parseGraphicalData)(A,{0:T.basePairLinesPerRnaComplex},{0:T.basePairCentersPerRnaComplex},T.graphicalAdjustments,T.labelLines,T.labelContents);break;default:throw"Unhandled switch case."}return{complexDocumentName:null!==(r=T.complexDocumentName)&&void 0!==r?r:"Scene",rnaComplexProps:A}}},7475:function(e,t,n){"use strict";n.r(t),n.d(t,{xrnaInputFileHandler:function(){return d}});var r=n(1413),o=n(9439),a=n(7762),i=n(9287),l=n(7744),s=n(3871),c=n(433),u=n(6176),d=function(e){function t(e,n,d){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{singularRnaComplexProps:null,singularRnaMoleculeProps:null,rnaMoleculeName:null,partialBasePairs:new Array},p={tagName:e.tagName};switch(e.tagName){case"ComplexDocument":n.complexDocumentName=e.getAttribute("Name");break;case"Complex":f.singularRnaComplexProps={name:e.getAttribute("Name"),rnaMoleculeProps:{},basePairs:{}},n.rnaComplexProps.push(f.singularRnaComplexProps);break;case"RNAMolecule":var h=e.getAttribute("Name");f.singularRnaMoleculeProps={firstNucleotideIndex:0,nucleotideProps:[]},f.rnaMoleculeName=h,f.singularRnaComplexProps.rnaMoleculeProps[h]=f.singularRnaMoleculeProps;break;case"NucListData":var m=f.singularRnaComplexProps,v=f.singularRnaMoleculeProps,x=e.getAttribute("StartNucID");if(null!=x){var g=Number.parseInt(x);if(Number.isNaN(g))throw new Error("This <NucListData>.StartNucID is a non-integer: ".concat(x));v.firstNucleotideIndex=g}var y={};e.getAttribute("DataType").split(".").forEach((function(e,t){y[t]=e}));var b,N=0,E={},C=f.rnaMoleculeName,I=(0,a.Z)(e.textContent.split("\n"));try{var S=function(){var e=b.value;if(/^\s*$/.test(e))return"continue";var t=i.Nucleotide.Symbol.A,n=NaN,r=NaN,o=NaN,a=NaN;e.split(/\s+/).forEach((function(e,l){switch(y[l]){case"NucChar":if(!i.Nucleotide.symbols.some((function(t){return e===t})))throw new Error("This input NucChar is not a <Nucleotide.Symbol>: ".concat(e));t=e;break;case"NucID":if(n=Number.parseInt(e)-v.firstNucleotideIndex,Number.isNaN(n))throw new Error("This input <NucListData>.NucID is a non-integer: ".concat(e));N=n;break;case"XPos":if(r=Number.parseFloat(e),Number.isNaN(r))throw new Error("This input <NucListData>.XPos is not a number: ".concat(e));break;case"YPos":if(o=Number.parseFloat(e),Number.isNaN(o))throw new Error("This input <NucListData>.YPos is not a number: ".concat(e));break;case"FormatType":break;case"BPID":if(a=Number.parseInt(e),Number.isNaN(a))throw new Error("This input <NucListData>.BPID is a non-integer: ".concat(e));E[n]=a-v.firstNucleotideIndex}})),Number.isNaN(n)&&(n=N),N++;var l={symbol:t,x:r,y:o};if(n in v.nucleotideProps)throw new Error("This input <NucListData>.NucID is a duplicate: ".concat(n));v.nucleotideProps[n]=l};for(I.s();!(b=I.n()).done;)S()}catch(oe){I.e(oe)}finally{I.f()}for(var _=0,A=Object.entries(E);_<A.length;_++){var T=(0,o.Z)(A[_],2),P=T[0],R=T[1],k=Number.parseInt(P);if(!(R in v.nucleotideProps))throw new Error("This <NucListData>.BPID is outside the set of expected nucleotide indices. Found ".concat(R+v.firstNucleotideIndex));(0,l.insertBasePair)(m,C,k,C,R,l.DuplicateBasePairKeysHandler.DO_NOTHING)}break;case"BasePairs":var w=f.singularRnaMoleculeProps,M=e.getAttribute("nucID"),O=Number.parseInt(M);if(Number.isNaN(O))throw new Error("This <BasePairs>.nucID is a non-integer: ".concat(M));O-=w.firstNucleotideIndex;var j=e.getAttribute("bpNucID"),L=Number.parseInt(j);if(Number.isNaN(L))throw new Error("This <BasePairs>.bpNucID is a non-integer: ".concat(j));var D=e.getAttribute("length"),Z=Number.parseInt(D);if(Number.isNaN(Z))throw new Error("This <BasePairs>.length is a non-integer: ".concat(D));var F=f.rnaMoleculeName,B=e.getAttribute("bpName"),U=null!==B&&void 0!==B?B:F;f.partialBasePairs.push({rnaMoleculeName:F,nucleotideIndex:O,basePairRnaMoleculeName:U,unnormalizedBasePairNucleotideIndex:L,length:Z});break;case"Nuc":var z=e.getAttribute("Color"),W=null;null!==z&&(W=(0,s.fromHexadecimal)(z,s.ColorFormat.RGB));var G=e.getAttribute("FontID"),H=null;if(null!==G){var K=Number.parseInt(G);if(Number.isNaN(K))throw new Error("This <Nuc>.FontID attribute is non-integer: ".concat(G));H=c.PartialFont.fromFontId(K)}var V=e.getAttribute("FontSize"),q=null;if(null!==V&&(q=Number.parseFloat(V),Number.isNaN(q)))throw new Error("This <Nuc>.FontSize attribute is non-numeric: ".concat(V));var X=[],Y=f.singularRnaMoleculeProps.firstNucleotideIndex,Q=e.getAttribute("RefID");if(null!==Q){var $=Number.parseInt(Q)-Y;if(Number.isNaN($))throw new Error("This <Nuc>.RefID is a non-integer: ".concat(Q));X.push($),p.referencedNucleotideIndex=$}var J=e.getAttribute("RefIDs");if(null!==J){var ee=J.replace(/\s+/,"");if(!/^(-?\d+(--?\d+)?(,-?\d+(--?\d+)?)*)$/.test(ee))throw new Error("This <Nuc>.RefIDs attribute did not match the expected format: ".concat(J));ee.split(",").forEach((function(e){var t=e.match(/^(-?\d+)(?:-(-?\d+))?$/),n=Number.parseInt(t[1]);if(Number.isNaN(n))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(t[1]));if(n-=Y,void 0===t[2])X.push(Number.parseInt(t[1])-Y);else{var r=Number.parseInt(t[2]);if(Number.isNaN(r))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(r));if(n>(r-=Y)){var o=n;n=r,r=o}for(var a=n;a<=r;a++)X.push(a)}}))}var te=f.singularRnaMoleculeProps;X.forEach((function(e){var t;if(!(e in te.nucleotideProps))throw new Error("The referenced nucleotide index indexes a non-existent Nucleotide: ".concat(e));t=te.nucleotideProps[e],null!==W&&(t.color=W),null!==q&&(void 0===t.font&&(t.font=structuredClone(c.default.DEFAULT)),t.font.size=q),null!==H&&void 0===t.font&&(t.font=(0,r.Z)((0,r.Z)({},c.default.DEFAULT),H))}));break;case"LabelList":if("Nuc"===d.tagName){if(null===d.referencedNucleotideIndex)throw new Error("This <Nuc> had no attribute <RefID>");var ne=f.singularRnaMoleculeProps.nucleotideProps[d.referencedNucleotideIndex];e.textContent.split("\n").forEach((function(e){var t=e.trim().split(/\s+/);switch(t[0]){case"l":if(t.length<7)throw new Error("This <LabelList> label-line line has too few entries.");var n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],l=Number.parseFloat(n),d=Number.parseFloat(r),f=Number.parseFloat(o),p=Number.parseFloat(a),h=Number.parseFloat(i);if(Number.isNaN(l))throw new Error("This <LabelList> label-line line has a non-numeric x0 value: ".concat(n));if(Number.isNaN(d))throw new Error("This <LabelList> label-line line has a non-numeric y0 value: ".concat(r));if(Number.isNaN(f))throw new Error("This <LabelList> label-line line has a non-numeric x1 value: ".concat(o));if(Number.isNaN(p))throw new Error("This <LabelList> label-line line has a non-numeric y1 value: ".concat(a));if(Number.isNaN(h))throw new Error("This <LabelList> label-line line has a non-numeric strokeWidth value: ".concat(i));ne.labelLineProps={points:[{x:l,y:d},{x:f,y:p}],color:(0,s.fromHexadecimal)(t[6],s.ColorFormat.RGB),strokeWidth:h};break;case"s":if(t.length<8)throw new Error("This <LabelList> label-content line has too few entries.");var m=t[1],v=t[2],x=t[4],g=t[5],y=t[6],b=t[7],N=Number.parseFloat(m),E=Number.parseFloat(v),C=Number.parseFloat(x),I=Number.parseInt(g),S=(0,s.fromHexadecimal)(y,s.ColorFormat.RGB),_=b.match(/^"(.*)"$/);if(Number.isNaN(N))throw new Error("This <LabelList> label-content line has a non-numeric x value: ".concat(m));if(Number.isNaN(E))throw new Error("This <LabelList> label-content line has a non-numeric y value: ".concat(v));if(Number.isNaN(C))throw new Error("This <LabelList> label-content line has a non-numeric fontSize value: ".concat(x));if(Number.isNaN(I))throw new Error("This <LabelList> label-content line has a non-numeric fontId value: ".concat(g));if(null===_)throw new Error("This <LabelList> label-content line has a content value with an unrecognized format: ".concat(b));ne.labelContentProps={x:N,y:E,content:_[1],color:S,strokeWidth:u.DEFAULT_STROKE_WIDTH,font:c.default.fromFontId(I,C)}}}))}}if(Array.from(e.children).forEach((function(e){t(e,n,p,f)})),"Complex"===e.tagName){var re=f.singularRnaComplexProps;f.partialBasePairs.forEach((function(e){for(var t=e.basePairRnaMoleculeName,n=re.rnaMoleculeProps[t],r=e.unnormalizedBasePairNucleotideIndex-n.firstNucleotideIndex,o=0;o<e.length;o++)(0,l.insertBasePair)(re,e.rnaMoleculeName,e.nucleotideIndex+o,t,r-o,l.DuplicateBasePairKeysHandler.DO_NOTHING)}))}}e.startsWith("<!DOCTYPE")||(e+="<!DOCTYPE ComplexDocument [\n<!ELEMENT ComplexDocument (SceneNodeGeom?, ComplexDocument*, Label*, LabelList*, Complex*, WithComplex*)>\n<!ATTLIST ComplexDocument Name CDATA #REQUIRED Author CDATA #IMPLIED ExpandUponWrite CDATA #IMPLIED PSScale CDATA #IMPLIED LandscapeMode CDATA #IMPLIED> \n<!ELEMENT Complex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST Complex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT WithComplex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST WithComplex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT RnaMolecule (SceneNodeGeom?, Label*, LabelList*, Nuc*, NucSegment*, (NucListData | Nuc)*, RNAFile*, BasePairs*, BasePair*, Parent?, AlignmentFile?)>\n<!ATTLIST RnaMolecule Name CDATA #REQUIRED Author CDATA #IMPLIED>\n\x3c!-- parent is like for e.coli being the numbering --\x3e \n<!ELEMENT Parent (RnaMolecule)>\n<!ELEMENT AlignmentFile (#PCDATA)> \n<!ELEMENT BasePairs EMPTY>\n<!ATTLIST BasePairs nucID CDATA #REQUIRED bpNucID CDATA #REQUIRED length CDATA #REQUIRED bpName CDATA #IMPLIED>\n\x3c!-- BasePair can be used after above BasePairs is implemented and refers to base pairs already set, even across strands. --\x3e\n<!ELEMENT BasePair EMPTY>\n<!ATTLIST BasePair RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED Type (Canonical | Wobble | MisMatch | Weak | Phosphate | Unknown) 'Unknown' Line5PDeltaX CDATA #IMPLIED Line5PDeltaY CDATA #IMPLIED Line3PDeltaX CDATA #IMPLIED Line3PDeltaY CDATA #IMPLIED LabelDeltaX CDATA #IMPLIED LabelDeltaY CDATA #IMPLIED Label5PSide CDATA #IMPLIED> \n<!ELEMENT NucListData (#PCDATA)>\n<!ATTLIST NucListData StartNucID CDATA #IMPLIED DataType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'> \n<!ELEMENT Label (StringLabel | CircleLabel | Trianglelabel | LineLabel | ParallelogramLabel)>\n<!ATTLIST Label XPos CDATA #REQUIRED YPos CDATA #REQUIRED Color CDATA #IMPLIED>\n<!ELEMENT StringLabel EMPTY> \n<!ATTLIST StringLabel FontName CDATA #IMPLIED FontType CDATA #IMPLIED FontSize CDATA #REQUIRED Angle CDATA #IMPLIED  Text CDATA #REQUIRED>\n<!ELEMENT CircleLabel EMPTY> \n<!ATTLIST CircleLabel Arc0 CDATA #IMPLIED Arc1 CDATA #IMPLIED Radius CDATA #IMPLIED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT TriangleLabel EMPTY>\n<!ATTLIST TriangleLabel TopPtX CDATA #REQUIRED TopPtY CDATA #REQUIRED LeftPtX CDATA #REQUIRED LeftPtY CDATA #REQUIRED RightPtX CDATA #REQUIRED RightPtY CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT LineLabel EMPTY> \n<!ATTLIST LineLabel X1 CDATA #REQUIRED Y1 CDATA #REQUIRED LineWidth CDATA #IMPLIED> \n<!ELEMENT ParallelogramLabel EMPTY>\n<!ATTLIST ParallelogramLabel Angle1 CDATA #REQUIRED Side1 CDATA #REQUIRED Angle2 CDATA #REQUIRED Side2 CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED> \n<!ELEMENT LabelList (#PCDATA)>\n<!ELEMENT NucSegment (NucChars)> \n<!ATTLIST NucSegment StartNucID CDATA #IMPLIED> \n<!ELEMENT NucChars (#PCDATA)>\n<!ELEMENT NucSymbol (#PCDATA)> \n<!ELEMENT Nuc (Label*, LabelList?, NucSymbol?)>\n<!ATTLIST Nuc NucID CDATA #IMPLIED NucChar CDATA #IMPLIED XPos CDATA #IMPLIED YPos CDATA #IMPLIED Color CDATA #IMPLIED FontID CDATA #IMPLIED FontSize CDATA #IMPLIED FormatType CDATA #IMPLIED BPParent CDATA #IMPLIED BPNucID CDATA #IMPLIED RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED IsHidden CDATA #IMPLIED GroupName CDATA #IMPLIED IsSchematic CDATA #IMPLIED SchematicColor CDATA #IMPLIED SchematicLineWidth CDATA #IMPLIED SchematicBPLineWidth CDATA #IMPLIED SchematicBPGap CDATA #IMPLIED SchematicFPGap CDATA #IMPLIED SchematicTPGap CDATA #IMPLIED IsNucPath CDATA #IMPLIED NucPathColor CDATA #IMPLIED NucPathLineWidth CDATA #IMPLIED>\n<!ELEMENT RNAFile EMPTY>\n<!ATTLIST RNAFile FileName CDATA #REQUIRED FileType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'>\n<!ELEMENT SceneNodeGeom EMPTY>\n<!ATTLIST SceneNodeGeom CenterX CDATA #IMPLIED CenterY CDATA #IMPLIED Scale CDATA #IMPLIED>\n]>\n"+e);var n={rnaComplexProps:new Array,complexDocumentName:""};return Array.from((new DOMParser).parseFromString(e,"text/xml").children).forEach((function(e){t(e,n,{tagName:""})})),n}},9967:function(e,t,n){"use strict";n.d(t,{Uq:function(){return fe},RG:function(){return Ee},aN:function(){return be},P7:function(){return Ie},qs:function(){return ye},aU:function(){return xe},qj:function(){return ve},bc:function(){return ge},En:function(){return Ne}});var r,o,a=n(4942),i=n(9439),l=n(3433),s=n(7762),c=n(2791),u=n(4212),d=n(7744),f=n(3413),p=n(1413),h=n(5671),m=n(3144),v=n(136),x=n(516),g=n(8161),y=n(1702),b=n(7361),N=n(7457),E=n(6176),C=n(7089),I=n(3871),S=n(433),_=n(7587),A=n(184);!function(e){e.populateRegions=function(e,t,n){var r=Number.NaN,o=Number.NaN;t.sort(N.subtractNumbers);for(var a=0;a<t.length;a++){var i=t[a];e.has(i)?(Number.isNaN(r)||n.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o}),r=Number.NaN):(Number.isNaN(r)&&(r=i),o=i)}Number.isNaN(r)||n.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o})};var t=function(e){return e.CREATE="create",e.DELETE="delete",e}({});e.Component=function(e){var n=e.regions,r=e.rnaComplexProps,a=e.setNucleotideKeysToRerender,u=(0,c.useContext)(f._.BasePair.AverageDistances),d=(0,c.useContext)(f._.Label.Content.DefaultStyles),h=(0,c.useContext)(f._.App.PushToUndoStack),m=(0,_.Fg)().theme,v=(0,c.useState)(!0),x=(0,i.Z)(v,2),g=x[0],T=x[1],P=(0,c.useState)(!0),R=(0,i.Z)(P,2),k=R[0],w=R[1],M=(0,c.useState)(!1),O=(0,i.Z)(M,2),j=O[0],L=O[1],D=(0,c.useState)(10),Z=(0,i.Z)(D,2),F=Z[0],B=Z[1],U=(0,c.useState)(Ie().startingNucleotideIndicesPerRegion),z=(0,i.Z)(U,2),W=z[0],G=z[1],H=(0,c.useState)(Ie().startingNucleotideOverridingIndicesForLabelsPerRegion),K=(0,i.Z)(H,2),V=K[0],q=K[1],X=(0,c.useState)(!0),Y=(0,i.Z)(X,2),Q=Y[0],$=Y[1],J=(0,c.useState)(!1),ee=(0,i.Z)(J,2),te=(ee[0],ee[1],(0,c.useState)(void 0)),ne=(0,i.Z)(te,2),re=ne[0],oe=ne[1],ae=(0,c.useState)(-1),ie=(0,i.Z)(ae,2),le=ie[0],se=ie[1],ce=(0,c.useState)(-1),ue=(0,i.Z)(ce,2),de=ue[0],fe=ue[1],pe=(0,c.useState)(-1),he=(0,i.Z)(pe,2),me=he[0],ve=he[1],xe=(0,c.useState)(void 0),ge=(0,i.Z)(xe,2),ye=ge[0],be=ge[1];function Ne(e,t,n,r){V[e][t][n]=r,q(structuredClone(V))}function Ee(e,t){var n=e[t],r=t-1,o=r in e,a=t+1,i=a in e;if(o&&i){var l=.5*((0,b.asAngle)((0,b.subtract)(n,e[r]))+(0,b.asAngle)((0,b.subtract)(e[a],n)));return(0,b.toNormalCartesian)(l)}return o?(0,b.normalize)((0,b.subtract)(n,e[r])):i?(0,b.normalize)((0,b.subtract)(e[a],n)):{x:1,y:0}}function Ce(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,i={};for(var l in n){var s=Number.parseInt(l);s in i||(i[s]={});var c=i[s],u=Te.averageDistances[s],f=Te.rightOrthogonalizationFlagRecord[s],h=W[s],m=V[s],v=n[s],x=r[s].rnaMoleculeProps;for(var y in v){y in c||(c[y]=[]);for(var C=c[y],_=u[y],A=f[y],T=h[y],P=m[y],R=v[y],w=x[y],M=w.nucleotideProps,O=0;O<R.length;O++)for(var L=R[O],D=(L.minimumNucleotideIndexInclusive,L.maximumNucleotideIndexInclusive),Z=T[O],B=P[O]-Z,U=void 0!==re?Math.min(re,D):D,z=Z;z<=U;z+=o)if(z in M){var G=M[z];if(k||g)switch(C.push(z),e){case t.CREATE:var H=Ee(M,z),K=(A?b.orthogonalizeRight:b.orthogonalizeLeft)(H);if(g&&(void 0===G.labelLineProps||j)&&(G.labelLineProps={points:[(0,b.scaleUp)(K,_.labelPoint0Distance),(0,b.scaleUp)(K,_.labelPoint1Distance)]}),k&&(void 0===G.labelContentProps||j)){var q,X=(0,b.asAngle)(K),Y=.125*Math.cos(2*X),Q=null!==(q=d[s][y])&&void 0!==q?q:{color:structuredClone(I.BLACK),font:structuredClone(S.default.DEFAULT)};G.labelContentProps=(0,p.Z)((0,p.Z)({},(0,b.scaleUp)(K,_.labelContentDistance*(1+Y))),{},{content:"".concat(z+w.firstNucleotideIndex+B),font:structuredClone(Q.font),color:structuredClone(Q.color),strokeWidth:E.DEFAULT_STROKE_WIDTH})}break;case t.DELETE:g&&delete G.labelLineProps,k&&delete G.labelContentProps;break;default:throw"Unhandled switch case."}}}}for(var $=0,J=Object.values(i);$<J.length;$++)for(var ee=J[$],te=0,ne=Object.values(ee);te<ne.length;te++){ne[te].sort(N.subtractNumbers)}a(i)}function Ie(){var e={},t={};for(var r in n){var o=Number.parseInt(r),a=n[o];e[o]={};var i=e[o];t[o]={};var l=t[o];for(var s in a){var c=a[s];i[s]=[];var u=i[s];l[s]=[];for(var d=l[s],f=0;f<c.length;f++){var p=c[f];u.push(p.minimumNucleotideIndexInclusive),d.push(p.minimumNucleotideIndexInclusive)}}}return{startingNucleotideIndicesPerRegion:e,startingNucleotideOverridingIndicesForLabelsPerRegion:t}}var Se=(0,c.useMemo)((function(){if(-1!==le&&-1!==de&&-1!==me)return r[le].rnaMoleculeProps[de].firstNucleotideIndex}),[le,de,me]),_e=(0,c.useMemo)((function(){var e,t;if(-1!==le&&-1!==de&&-1!==me)return null===(e=W[le])||void 0===e||null===(t=e[de])||void 0===t?void 0:t[me]}),[le,de,me,W]),Ae=(0,c.useMemo)((function(){var e,t;if(-1!==le&&-1!==de&&-1!==me)return null===(e=V[le])||void 0===e||null===(t=e[de])||void 0===t?void 0:t[me]}),[le,de,me,V]),Te=(0,c.useMemo)((function(){var e={},t={};for(var n in r){var o=Number.parseInt(n);e[o]={};var a,i=e[o],c=u[o],d=f._.BasePair.DEFAULT_DISTANCES.canonical,p=(0,s.Z)(C.default.types);try{for(p.s();!(a=p.n()).done;){var h=a.value,m=c.distances[h];if(m!==Number.POSITIVE_INFINITY&&!Number.isNaN(m)){d=m;break}}}catch(F){p.e(F)}finally{p.f()}t[o]={};var v=t[o],x=r[o].rnaMoleculeProps;for(var g in x){i[g]={labelPoint0Distance:.25*d,labelPoint1Distance:.75*d,labelContentDistance:d};var y=i[g],E=0,I=x[g].nucleotideProps,S=0,_=0,A={labelPoint0:0,labelPoint1:0,labelContent:0};for(var T in I){var P=Number.parseInt(T),R=I[P],k=Ee(I,P);if(void 0!==R.labelLineProps){S++;var w=R.labelLineProps.points;if(w.length>0){var M=w.map(b.magnitude),O=Math.min.apply(Math,(0,l.Z)(M)),j=w[0];if(A.labelPoint0+=O,E-=(0,N.sign)((0,b.crossProduct)(k,j)),w.length>1){var L=Math.max.apply(Math,(0,l.Z)(M)),D=w[1];A.labelPoint1+=L,E-=(0,N.sign)((0,b.crossProduct)(k,D))}}}void 0!==R.labelContentProps&&(_++,A.labelContent+=(0,b.magnitude)(R.labelContentProps),E-=(0,N.sign)((0,b.crossProduct)(k,R.labelContentProps)))}if(0!==_&&(y.labelContentDistance=A.labelContent/_),S){var Z=1/S;y.labelPoint0Distance=A.labelPoint0*Z,y.labelPoint1Distance=A.labelPoint1*Z}v[g]=E>0}}return{averageDistances:e,rightOrthogonalizationFlagRecord:t}}),[]);(0,c.useEffect)((function(){var e=Ie(),t=e.startingNucleotideIndicesPerRegion,n=e.startingNucleotideOverridingIndicesForLabelsPerRegion;G(t),q(n)}),[n]),(0,c.useEffect)((function(){var e=Object.entries(n);if(1===e.length){var t=(0,i.Z)(e[0],2),r=t[0],o=t[1],a=Number.parseInt(r);se(a);var l=Object.keys(o);if(1===l.length){var s=l[0];fe(s);var c=o[s];1===c.length&&(ve(0),be(c[0]))}}else se(-1),fe(-1),ve(-1),be(void 0)}),[n]);var Pe=function(e){var t=e.label,n=e.checked,r=e.onChange;return(0,A.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",cursor:"pointer",userSelect:"none"},children:[(0,A.jsx)("input",{type:"checkbox",checked:n,onChange:r,style:{width:"16px",height:"16px",cursor:"pointer",accentColor:m.colors.primary}}),(0,A.jsx)("span",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,lineHeight:"1.4"},children:t})]})},Re=function(e){var t=e.title,n=e.children,r=e.defaultCollapsed,o=void 0!==r&&r,a=(0,c.useState)(o),l=(0,i.Z)(a,2),s=l[0],u=l[1];return(0,A.jsxs)("div",{style:{background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"8px",overflow:"hidden",marginBottom:"16px"},children:[(0,A.jsxs)("div",{onClick:function(){return u(!s)},style:{padding:"16px 20px",background:m.colors.background,borderBottom:s?"none":"1px solid ".concat(m.colors.border),cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",userSelect:"none"},children:[(0,A.jsx)("h3",{style:{margin:0,fontSize:m.typography.fontSize.sm,fontWeight:"600",color:m.colors.text},children:t}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.lg,color:m.colors.textSecondary,transform:s?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),!s&&(0,A.jsx)("div",{style:{padding:"20px"},children:n})]})};return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"16px",background:m.colors.background,minHeight:"100%"},children:[(0,A.jsx)(Re,{title:"Region Information",children:(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Selected Region"}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,padding:"8px 12px",background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"4px"},children:void 0!==ye&&void 0!==Se?"Range: ".concat(ye.minimumNucleotideIndexInclusive+Se," - ").concat(ye.maximumNucleotideIndexInclusive+Se):"No region selected"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Current Settings"}),(0,A.jsxs)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.text,padding:"8px 12px",background:m.colors.surface,border:"1px solid ".concat(m.colors.border),borderRadius:"4px"},children:["Increment: ",F," |",g?" Lines":"",k?" Text":""]})]})]})}),(0,A.jsxs)(Re,{title:"Labeling Controls",children:[(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Start Index"}),(0,A.jsx)(y.Z.Integer,{value:void 0!==_e&&void 0!==Se?_e+Se:1,setValue:function(e){if(-1!==le&&-1!==de&&-1!==me){var t=e-(null!==Se&&void 0!==Se?Se:0);n=de,r=me,o=t,W[le][n][r]=o,G(structuredClone(W)),Q&&Ne(le,de,me,t)}var n,r,o},min:void 0!==ye&&void 0!==Se?ye.minimumNucleotideIndexInclusive+Se:1,max:void 0!==ye&&void 0!==Se?ye.maximumNucleotideIndexInclusive+Se:Number.MAX_SAFE_INTEGER}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Where to start labeling"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Override Start (Optional)"}),(0,A.jsx)(y.Z.Integer,{value:void 0!==Ae&&void 0!==Se?Ae+Se:1,setValue:function(e){if(-1!==le&&-1!==de&&-1!==me){var t=r[le].rnaMoleculeProps[de];Ne(le,de,me,e-t.firstNucleotideIndex)}},min:1}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Custom label numbering offset"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Increment"}),(0,A.jsx)(y.Z.Integer,{value:F,setValue:B,min:1}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:"Label every Nth nucleotide"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{style:{fontSize:m.typography.fontSize.xs,fontWeight:"600",color:m.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"End Index (Optional)"}),(0,A.jsx)(y.Z.Integer,{value:null!==re&&void 0!==re?re:0,setValue:function(e){return oe(0===e?void 0:e)},min:void 0!==_e&&void 0!==Se?_e+Se+1:1,max:void 0!==ye&&void 0!==Se?ye.maximumNucleotideIndexInclusive+Se:Number.MAX_SAFE_INTEGER,valueToString:function(e){return 0===e?"":e.toString()},stringToValue:function(e){if(""===e||"0"===e)return 0;var t=(0,E.parseIntReturnUndefinedOnFail)(e);if(void 0!==t){if(void 0!==_e&&void 0!==Se&&t<=_e+Se)return{errorMessage:"End index must be greater than start index"};if(void 0!==ye&&void 0!==Se&&t>ye.maximumNucleotideIndexInclusive+Se)return{errorMessage:"End index cannot exceed sequence length"}}return t}}),(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.xs,color:m.colors.textMuted,marginTop:"6px"},children:void 0!==_e&&void 0!==Se&&void 0!==ye?"Leave empty to label entire region (min: ".concat(_e+Se+1,", max: ").concat(ye.maximumNucleotideIndexInclusive+Se,")"):"Leave empty to label entire region"})]})]}),(0,A.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"20px",borderTop:"1px solid ".concat(m.colors.border)},children:[(0,A.jsx)("button",{onClick:function(e){h(),Ce(t.CREATE)},style:{flex:1,padding:"12px 16px",background:m.colors.primary,color:"white",border:"none",fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"background-color 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.primaryHover||m.colors.primary},onMouseOut:function(e){e.currentTarget.style.background=m.colors.primary},children:"Create Annotations"}),(0,A.jsx)("button",{onClick:function(e){h(),Ce(t.DELETE,1)},style:{flex:1,padding:"12px 16px",background:"transparent",color:m.colors.textSecondary,border:"1px solid ".concat(m.colors.border),fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.surface,e.currentTarget.style.borderColor=m.colors.textSecondary},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor=m.colors.border},children:"Delete Selected"})]})]}),(0,A.jsxs)(Re,{title:"Advanced Selections",defaultCollapsed:!0,children:[(0,A.jsx)("div",{style:{fontSize:m.typography.fontSize.sm,color:m.colors.textMuted,marginBottom:"16px",lineHeight:"1.5"},children:"Configure which regions to label and sync settings."}),(0,A.jsx)(Pe,{label:"Auto-sync Start with Override",checked:Q,onChange:function(){return $(!Q)}}),(0,A.jsx)("div",{style:{marginTop:"20px"},children:(0,A.jsx)(o.Component,{regions:n,rnaComplexProps:r,startingNucleotideIndicesPerRegion:W,updateStartingNucleotideIndexHelper:function(e,t,n,r){W[e][t][n]=r,G(structuredClone(W))},startingNucleotideOverridingIndicesForLabelsPerRegion:V,updateStartingNucleotideOverridingIndexForLabelPerRegionHelper:function(e,t,n,r){V[e][t][n]=r,q(structuredClone(V))},copyStartingIndexToOverridingLabelIndexFlag:Q})})]}),(0,A.jsx)(Re,{title:"Labeling Options",defaultCollapsed:!0,children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,A.jsx)(Pe,{label:"Include Label Lines",checked:g,onChange:function(){return T(!g)}}),(0,A.jsx)(Pe,{label:"Include Label Text",checked:k,onChange:function(){return w(!k)}}),(0,A.jsx)(Pe,{label:"Recreate Existing Labels",checked:j,onChange:function(){return L(!j)}})]})}),(0,A.jsx)("div",{style:{marginTop:"8px"},children:(0,A.jsx)("button",{onClick:function(e){h();var t={};for(var n in r){var o=Number.parseInt(n);o in t||(t[o]={});var i=t[o],l=r[o].rnaMoleculeProps;for(var s in l){s in i||(i[s]=[]);var c=i[s],u=l[s].nucleotideProps;for(var d in u){var f=Number.parseInt(d),p=u[f];void 0===p.labelLineProps&&void 0===p.labelContentProps||(c.push(f),void 0!==p.labelLineProps&&delete p.labelLineProps,void 0!==p.labelContentProps&&delete p.labelContentProps)}}}for(var m=0,v=Object.values(t);m<v.length;m++)for(var x=v[m],g=0,y=Object.values(x);g<y.length;g++){y[g].sort(N.subtractNumbers)}a(t)},style:{width:"100%",padding:"12px 16px",background:"transparent",color:m.colors.error||"#dc3545",border:"1px solid ".concat(m.colors.error||"#dc3545"),fontSize:m.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=m.colors.error||"#dc3545",e.currentTarget.style.color="white"},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.color=m.colors.error||"#dc3545"},children:"Clear All Annotations"})})]})}}(r||(r={})),(o||(o={})).Component=function(e){var t=e.regions,n=e.rnaComplexProps,r=e.startingNucleotideIndicesPerRegion,o=(e.updateStartingNucleotideIndexHelper,e.startingNucleotideOverridingIndicesForLabelsPerRegion),a=(e.updateStartingNucleotideOverridingIndexForLabelPerRegionHelper,e.copyStartingIndexToOverridingLabelIndexFlag,(0,_.Fg)().theme),l=(0,c.useState)(-1),s=(0,i.Z)(l,2),u=s[0],d=s[1],f=(0,c.useState)(-1),p=(0,i.Z)(f,2),h=p[0],m=p[1],v=(0,c.useState)(-1),x=(0,i.Z)(v,2),g=x[0],y=x[1],b=(0,c.useState)(void 0),N=(0,i.Z)(b,2),E=N[0],C=N[1],I=(0,c.useState)(void 0),S=(0,i.Z)(I,2),T=S[0],P=S[1],R=(0,c.useState)(void 0),k=(0,i.Z)(R,2),w=(k[0],k[1]),M=(0,c.useState)(void 0),O=(0,i.Z)(M,2),j=O[0],L=O[1],D=(0,c.useState)(void 0),Z=(0,i.Z)(D,2),F=Z[0],B=Z[1],U=(0,c.useState)(void 0),z=(0,i.Z)(U,2),W=z[0],G=z[1],H=(0,c.useState)(void 0),K=(0,i.Z)(H,2),V=K[0],q=K[1],X=(0,c.useState)(void 0),Y=(0,i.Z)(X,2),Q=Y[0],$=Y[1],J=(0,c.useState)(void 0),ee=(0,i.Z)(J,2),te=(ee[0],ee[1]);function ne(e,n){if(d(e),-1!==e){var a=t[e];C(a);var l=r[e];L(l);var s=o[e];q(s);var c=Object.entries(n);if(1===c.length){var u=(0,i.Z)(c[0],2);re(u[0],u[1],n,l,s)}}else m(-1),y(-1)}function re(e,t,n,r,o){if(m(e),-1!==e){var a=n[e];P(a);var l=r[e];B(l);var s=o[e];$(s);var c=Object.entries(t);if(1===c.length){var u=(0,i.Z)(c[0],2),d=u[0];u[1],oe(Number.parseInt(d),a,l,s)}}else y(-1)}function oe(e,t,n,r){y(e),-1!==e&&(w(t[e]),void 0!==n&&G(n[e]),void 0!==r&&te(r[e]))}(0,c.useMemo)((function(){if(-1!==u&&-1!==h&&-1!==g&&void 0!==W)return n[u].rnaMoleculeProps[h].firstNucleotideIndex}),[u,h,g,W]),(0,c.useEffect)((function(){var e=Object.entries(t);if(1===e.length){var n=(0,i.Z)(e[0],2),r=n[0],o=n[1];ne(Number.parseInt(r),o)}else d(-1),m(-1),y(-1)}),[t,r,o]);var ae={width:"100%",padding:"8px 10px",background:a.colors.surface,border:"1px solid ".concat(a.colors.border),fontSize:a.typography.fontSize.sm,color:a.colors.text,cursor:"pointer",outline:"none"},ie={fontSize:a.typography.fontSize.xs,fontWeight:"600",color:a.colors.textSecondary,marginBottom:"6px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},le={marginBottom:"20px"};return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsxs)("div",{style:le,children:[(0,A.jsx)("label",{style:ie,children:"RNA Complex"}),(0,A.jsxs)("select",{value:u,onChange:function(e){var n=e.target.value,r=Number.parseInt(n);ne(r,t[r])},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA complex"}),Object.keys(t).map((function(e){var t=Number.parseInt(e),r=n[t].name;return(0,A.jsx)("option",{value:t,children:r},t)}))]})]}),-1!==u&&void 0!==E&&void 0!==j&&void 0!==V&&(0,A.jsxs)("div",{style:le,children:[(0,A.jsx)("label",{style:ie,children:"RNA Molecule"}),(0,A.jsxs)("select",{value:h,onChange:function(e){var t=e.target.value;re(t,E[t],E,j,V)},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA molecule"}),Object.keys(t[u]).map((function(e){return(0,A.jsx)("option",{value:e,children:e},e)}))]})]}),-1!==h&&void 0!==T&&void 0!==F&&void 0!==Q&&(0,A.jsxs)("div",{style:le,children:[(0,A.jsxs)("label",{style:ie,children:["Region (",T.length," total)"]}),(0,A.jsxs)("select",{value:g,onChange:function(e){oe(Number.parseInt(e.target.value),T,F,Q)},style:ae,children:[(0,A.jsx)("option",{style:{display:"none"},value:-1,children:"Select a region"}),T.map((function(e,t){return(0,A.jsxs)("option",{value:t,children:["Region ",t+1]},t)}))]})]})]})};var T,P=n(5987),R=n(4914),k=n(8109),w=n(974);!function(e){function t(e){var t,n,r,o=e.pathStyle,a=e.setPathStyle,i=(0,c.useContext)(f._.App.PushToUndoStack),l=null!==(t=o.pathColor)&&void 0!==t?t:I.BLACK,s=null!==(n=o.pathLineWidth)&&void 0!==n?n:E.DEFAULT_STROKE_WIDTH,u=null!==(r=o.pathCurvature)&&void 0!==r?r:0;return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,A.jsx)(k.S.Inline,{color:l,setColorHelper:function(e){a((0,p.Z)((0,p.Z)({},o),{},{pathColor:e}))}}),(0,A.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[(0,A.jsx)("div",{style:{flex:1},children:(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[(0,A.jsx)("span",{style:{fontSize:10,color:"#666"},children:"Width"}),(0,A.jsx)("input",{type:"range",min:.5,max:10,step:.5,value:s,onChange:function(e){a((0,p.Z)((0,p.Z)({},o),{},{pathLineWidth:parseFloat(e.target.value)}))},onMouseDown:function(){return i()},style:{width:60,height:4,cursor:"pointer"}}),(0,A.jsx)("input",{type:"number",min:.5,max:10,step:.5,value:s,onChange:function(e){a((0,p.Z)((0,p.Z)({},o),{},{pathLineWidth:parseFloat(e.target.value)||1}))},style:{width:36,textAlign:"center",fontSize:10,padding:"2px 4px",border:"1px solid #ddd",borderRadius:3}})]})}),(0,A.jsx)("div",{style:{flex:1},children:(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[(0,A.jsx)("span",{style:{fontSize:10,color:"#666"},children:"Curve"}),(0,A.jsx)("input",{type:"range",min:0,max:1,step:.05,value:u,onChange:function(e){a((0,p.Z)((0,p.Z)({},o),{},{pathCurvature:parseFloat(e.target.value)}))},onMouseDown:function(){return i()},style:{width:60,height:4,cursor:"pointer"}}),(0,A.jsx)("span",{style:{fontSize:10,color:"#888",width:45},children:0===u?"Straight":u<.5?"Slight":"Curvy"})]})})]})]})}e.Inline=t,e.Component=function(e){return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,A.jsx)("div",{style:{fontSize:11,fontWeight:600,color:"#555",marginBottom:2},children:"Path"}),(0,A.jsx)(t,(0,p.Z)({},e))]})}}(T||(T={}));var M,O,j,L=["headerContent"];(O=M||(M={})).Component=function(e){var t=e.positions,n=e.onUpdatePositions,r=t,o=(0,c.useState)(I.BLACK),a=(0,i.Z)(o,2),l=a[0],u=a[1],d=(0,c.useState)(S.default.DEFAULT),h=(0,i.Z)(d,2),m=h[0],v=h[1],x=(0,c.useState)({pathColor:I.BLACK,pathLineWidth:E.DEFAULT_STROKE_WIDTH,pathCurvature:0}),g=(0,i.Z)(x,2),y=g[0],b=g[1],N=(0,c.useState)(!1),C=(0,i.Z)(N,2),P=C[0],M=C[1],O=(0,c.useContext)(f._.App.PushToUndoStack);return(0,_.Fg)().theme,(0,c.useEffect)((function(){var e,t,n,o,a;if(0!==r.length){for(var i=!0,l=r[0],s=null!==(e=l.color)&&void 0!==e?e:I.BLACK,c=1;c<r.length;c++){var d;if(!(0,I.areEqual)(s,null!==(d=r[c].color)&&void 0!==d?d:I.BLACK)){i=!1;break}}for(var f=!0,p=null!==(t=l.font)&&void 0!==t?t:S.default.DEFAULT,h=1;h<r.length;h++){var m;if(!S.default.areEqual(p,null!==(m=r[h].font)&&void 0!==m?m:S.default.DEFAULT)){f=!1;break}}for(var x=!0,g=null!==(n=l.pathColor)&&void 0!==n?n:I.BLACK,y=1;y<r.length;y++){var N;if(!(0,I.areEqual)(g,null!==(N=r[y].pathColor)&&void 0!==N?N:I.BLACK)){x=!1;break}}for(var C=!0,_=null!==(o=l.pathLineWidth)&&void 0!==o?o:E.DEFAULT_STROKE_WIDTH,A=1;A<r.length;A++){var T;if(_!==(null!==(T=r[A].pathLineWidth)&&void 0!==T?T:E.DEFAULT_STROKE_WIDTH)){C=!1;break}}for(var P=!0,R=null!==(a=l.pathCurvature)&&void 0!==a?a:0,k=1;k<r.length;k++){var w;if(R!==(null!==(w=r[k].pathCurvature)&&void 0!==w?w:0)){P=!1;break}}u(i?s:I.BLACK),v(f?p:S.default.DEFAULT),b({pathColor:x?g:I.BLACK,pathLineWidth:C?_:E.DEFAULT_STROKE_WIDTH,pathCurvature:P?R:0})}}),[t]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R.Y.Component,(0,p.Z)((0,p.Z)({},e),{},{onUpdatePositions:function(e){!P&&e&&O(),n(!1),M(!0)}})),(0,A.jsx)(k.S.Component,{title:"Sequence Color",color:l,setColorHelper:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.color=e}catch(a){o.e(a)}finally{o.f()}u(e),n(!1)}}),(0,A.jsx)(T.Component,{pathStyle:y,setPathStyle:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;void 0!==e.pathColor&&(a.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(a.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(a.pathCurvature=e.pathCurvature)}}catch(i){o.e(i)}finally{o.f()}b(e),n(!1)}}),(0,A.jsx)(w.f.Component,(0,p.Z)((0,p.Z)({},m),{},{setFont:function(e){var t,o=(0,s.Z)(r);try{for(o.s();!(t=o.n()).done;)t.value.font=e}catch(a){o.e(a)}finally{o.f()}v(e),n(!1)}}))]})},O.Simplified=function(e){var t=e.headerContent,n=(0,P.Z)(e,L),r=n.positions,o=n.onUpdatePositions,a=r,l=(0,c.useState)(I.BLACK),u=(0,i.Z)(l,2),d=u[0],h=u[1],m=(0,c.useState)(S.default.DEFAULT),v=(0,i.Z)(m,2),x=v[0],g=v[1],y=(0,c.useState)({pathColor:I.BLACK,pathLineWidth:E.DEFAULT_STROKE_WIDTH,pathCurvature:0}),b=(0,i.Z)(y,2),N=b[0],C=b[1],M=(0,c.useState)(!1),O=(0,i.Z)(M,2),j=O[0],D=O[1],Z=(0,c.useContext)(f._.App.PushToUndoStack),F=(0,_.Fg)().theme;return(0,c.useEffect)((function(){var e,t,n,r,o;if(0!==a.length){for(var i=a[0],l=!0,s=!0,c=!0,u=!0,d=!0,f=null!==(e=i.color)&&void 0!==e?e:I.BLACK,p=null!==(t=i.font)&&void 0!==t?t:S.default.DEFAULT,m=null!==(n=i.pathColor)&&void 0!==n?n:I.BLACK,v=null!==(r=i.pathLineWidth)&&void 0!==r?r:E.DEFAULT_STROKE_WIDTH,x=null!==(o=i.pathCurvature)&&void 0!==o?o:0,y=1;y<a.length;y++){var b,N,_,A,T;l&&!(0,I.areEqual)(f,null!==(b=a[y].color)&&void 0!==b?b:I.BLACK)&&(l=!1),s&&!S.default.areEqual(p,null!==(N=a[y].font)&&void 0!==N?N:S.default.DEFAULT)&&(s=!1),c&&!(0,I.areEqual)(m,null!==(_=a[y].pathColor)&&void 0!==_?_:I.BLACK)&&(c=!1),u&&v!==(null!==(A=a[y].pathLineWidth)&&void 0!==A?A:E.DEFAULT_STROKE_WIDTH)&&(u=!1),d&&x!==(null!==(T=a[y].pathCurvature)&&void 0!==T?T:0)&&(d=!1)}h(l?f:I.BLACK),g(s?p:S.default.DEFAULT),C({pathColor:c?m:I.BLACK,pathLineWidth:u?v:E.DEFAULT_STROKE_WIDTH,pathCurvature:d?x:0})}}),[r]),(0,A.jsxs)(A.Fragment,{children:[t&&(0,A.jsx)("div",{style:{padding:"12px 14px",borderRadius:10,border:"1px solid ".concat(F.colors.borderLight),background:F.colors.surface,fontSize:F.typography.fontSize.sm,lineHeight:1.5,marginBottom:12},children:t}),(0,A.jsx)(R.Y.Simplified,(0,p.Z)((0,p.Z)({},n),{},{onUpdatePositions:function(e){!j&&e&&Z(),o(!1),D(!0)}})),(0,A.jsx)(k.S.Component,{title:"Sequence Color",color:d,setColorHelper:function(e){var t,n=(0,s.Z)(a);try{for(n.s();!(t=n.n()).done;)t.value.color=e}catch(r){n.e(r)}finally{n.f()}h(e),o(!1)}}),(0,A.jsx)(T.Component,{pathStyle:N,setPathStyle:function(e){var t,n=(0,s.Z)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0!==e.pathColor&&(r.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(r.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(r.pathCurvature=e.pathCurvature)}}catch(i){n.e(i)}finally{n.f()}C(e),o(!1)}}),(0,A.jsx)(w.f.Component,(0,p.Z)((0,p.Z)({},x),{},{setFont:function(e){var t,n=(0,s.Z)(a);try{for(n.s();!(t=n.n()).done;)t.value.font=e}catch(r){n.e(r)}finally{n.f()}g(e),o(!1)}}))]})},(j||(j={})).Component=function(e){var t=e.setNucleotideKeysToRerender,n=e.setBasePairKeysToRerender,r=e.rnaComplexProps,o=(0,c.useContext)(f._.App.ComplexDocumentName),a=(0,c.useContext)(f._.App.SetComplexDocumentName),l=(0,c.useContext)(f._.App.IndicesOfFrozenNucleotides),u=(0,c.useState)(o),p=(0,i.Z)(u,2),h=p[0],m=p[1],v=(0,c.useMemo)((function(){var e=new Array,o=Object.entries(r).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{rnaComplexIndex:Number.parseInt(n),singularRnaComplexProps:r}}));o.reverse();var a,c={0:{x:-1,y:0},1:{x:1,y:0}},u={},f={},p=(0,s.Z)(o);try{for(p.s();!(a=p.n()).done;){var h=a.value,m=h.rnaComplexIndex,v=h.singularRnaComplexProps,x=Object.entries(v.rnaMoleculeProps);x.reverse();var g=v.basePairs;u[m]={};var y=u[m];f[m]=[];for(var b=f[m],N=(m in l?l[m]:{}),E=0,C=x;E<C.length;E++){var I=(0,i.Z)(C[E],2),S=I[0],_=I[1],T=g[S];y[S]=[];var P,R=y[S],k=Object.entries(_.nucleotideProps).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}})),w=S in N?N[S]:new Set,O=(0,s.Z)(k);try{for(O.s();!(P=O.n()).done;){var j=P.value,L=j.nucleotideIndex,D=j.singularNucleotideProps;if(w.has(L)||(R.push(L),e.push(D)),T&&L in T){b.push({rnaMoleculeName:S,nucleotideIndex:L});var Z=T[L].reduce(d.selectRelevantBasePairKeys);c={0:D,1:v.rnaMoleculeProps[Z.rnaMoleculeName].nucleotideProps[Z.nucleotideIndex]}}}}catch(F){O.e(F)}finally{O.f()}}}}catch(F){p.e(F)}finally{p.f()}return(0,A.jsx)(M.Simplified,{boundingVector0:c[0],boundingVector1:c[1],positions:e,onUpdatePositions:function(){t(structuredClone(u)),n(structuredClone(f))}})}),[r]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("label",{children:["Name:\xa0",(0,A.jsx)("input",{type:"text",value:h,onChange:function(e){var t=e.target.value;m(t),a(t)}})]}),(0,A.jsx)("br",{}),v]})};var D={errorMessage:"Cannot interact with a base-paired nucleotide using this constraint."},Z={errorMessage:"Cannot interact with a non-base-paired nucleotide using this constraint."},F={errorMessage:"Cannot apply this constraint to a nucleotide with multiple base pairs. Try right-clicking on a base pair instead."},B=function(){function e(t,n,r,o,a,i,l){(0,h.Z)(this,e),this.indicesOfAffectedNucleotides={},this.rnaComplexProps=void 0,this.fullKeys0=void 0,this.fullKeys1=void 0,this.setNucleotideKeysToRerender=void 0,this.setBasePairKeysToRerender=void 0,this.setDebugVisualElements=void 0,this.indicesOfFrozenNucleotides=void 0,this.rnaComplexProps=t,this.fullKeys0=i,this.fullKeys1=l,this.setNucleotideKeysToRerender=n,this.setBasePairKeysToRerender=r,this.setDebugVisualElements=o,this.indicesOfFrozenNucleotides=a}return(0,m.Z)(e,[{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){for(var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=Math.abs(i[0]-a[0])+1,s=Math.sign(i[0]-a[0]),c=Math.sign(i[1]-a[1]),u=a[0],d=a[1],f=0;f<l;f++){if(n in t.indicesOfAffectedNucleotides){var p=t.indicesOfAffectedNucleotides[n];if(r in p&&p[r].has(u))return!0;if(o in p&&p[o].has(d))return!0}u+=s,d+=c}return!1}))}},{key:"addFullIndices",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var a=o[r],i=a.rnaComplexIndex,l=a.rnaMoleculeName,s=a.nucleotideIndex;i in this.indicesOfAffectedNucleotides||(this.indicesOfAffectedNucleotides[i]={});var c=this.indicesOfAffectedNucleotides[i];l in c||(c[l]=new Set),c[l].add(s)}}},{key:"addFullIndicesPerHelices",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];for(var a=0,i=r;a<i.length;a++)for(var l=i[a],s=l.rnaComplexIndex,c=l.rnaMoleculeName0,u=l.rnaMoleculeName1,d=l.nucleotideIndex0,f=l.nucleotideIndex1,p=l.length,h=0;h<p;h++)this.addFullIndices({rnaComplexIndex:s,rnaMoleculeName:c,nucleotideIndex:d+h-e},{rnaComplexIndex:s,rnaMoleculeName:u,nucleotideIndex:f-h-t})}},{key:"addFullIndicesPerNucleotideKeysToRerender",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++)for(var r=(0,i.Z)(n[t],2),o=r[0],a=r[1],l=Number.parseInt(o),c=0,u=Object.entries(a);c<u.length;c++){var d,f=(0,i.Z)(u[c],2),p=f[0],h=f[1],m=(0,s.Z)(h);try{for(m.s();!(d=m.n()).done;){var v=d.value;this.addFullIndices({rnaComplexIndex:l,rnaMoleculeName:p,nucleotideIndex:v})}}catch(x){m.e(x)}finally{m.f()}}}}]),e}();function U(e,t,n){var r=t.map((function(t){return(0,b.subtract)(t,e)})),o=t.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var a=0;a<o;a++){var i=r[a],l=t[a];l.x=e.x+i.x,l.y=e.y+i.y}n()}}}var z,W=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,a,c,u,f,p,m){var v,x=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,a,u,p,m)).editMenuProps=void 0,v.initialBasePairs=void 0,v.dragListener=void 0,v.helices=void 0;var g={},y={};v.editMenuProps={rnaComplexProps:v.rnaComplexProps,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var b=[],E=ve(e,x),C=[];v.helices=C,E.forEach((function(e){var t=e.rnaComplexIndex;e.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0;C.push.apply(C,(0,l.Z)(e.helixData.map((function(e){var r=e.start,o=e.stop,a=e.rnaMoleculeName1;return{rnaComplexIndex:t,rnaMoleculeName0:n,rnaMoleculeName1:a,start:r,stop:o}}))))}))})),E.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,o=r.rnaMoleculeProps[t];b.push.apply(b,(0,l.Z)(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),v.initialBasePairs=b;for(var I=new Array,S=0,_=Object.entries(e);S<_.length;S++){var A=(0,i.Z)(_[S],2),T=A[0],P=A[1].rnaMoleculeProps,R=Number.parseInt(T),k=R in u?u[R]:{};g[R]={};var w=g[R];y[R]=[];for(var M=y[R],O=e[R],j=O.basePairs,L=0,D=Object.entries(P);L<D.length;L++){var Z=(0,i.Z)(D[L],2),F=Z[0],B=Z[1].nucleotideProps,z=F in k?k[F]:new Set;w[F]=[];for(var W=w[F],G=O.rnaMoleculeProps[F],H=(F in j?j[F]:{}),K=0,V=Object.keys(B);K<V.length;K++){var q=V[K],X=Number.parseInt(q);if(v.addFullIndices({rnaComplexIndex:R,rnaMoleculeName:F,nucleotideIndex:X}),!z.has(X)){W.push(X);var Y=G.nucleotideProps[X];I.push(Y)}if(X in H){var Q,$={rnaMoleculeName:F,nucleotideIndex:X},J=H[X],ee=(0,s.Z)(J);try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;M.push((0,d.selectRelevantBasePairKeys)($,te))}}catch(pe){ee.e(pe)}finally{ee.f()}}}}}for(var ne=p.rnaComplexIndex,re=p.rnaMoleculeName,oe=p.nucleotideIndex,ae=e[ne].rnaMoleculeProps[re].nucleotideProps[oe],ie=0,le=Object.values(g);ie<le.length;ie++)for(var se=le[ie],ce=0,ue=Object.values(se);ce<ue.length;ce++){ue[ce].sort(N.subtractNumbers)}for(var de=0,fe=Object.values(y);de<fe.length;de++){fe[de].sort(d.compareBasePairKeys)}return v.dragListener=U({x:ae.x,y:ae.y},I,(function(){r(structuredClone(g)),o(structuredClone(y))})),v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t;switch(e){case u.OK.EDIT:t=(0,A.jsx)(j.Component,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case u.OK.ANNOTATE:var n={};for(var o in this.rnaComplexProps){var a=Number.parseInt(o),i={};a in this.indicesOfFrozenNucleotides&&(i=this.indicesOfFrozenNucleotides[a]),n[a]={};var l=n[a],s=this.rnaComplexProps[a];for(var c in s.rnaMoleculeProps){l[c]=[];var d=s.rnaMoleculeProps[c],f=l[c],h=new Set;c in i&&(h=i[c]);var m=new Array;for(var v in d.nucleotideProps){var x=Number.parseInt(v);m.push(x)}r.populateRegions(h,m,f)}}t=(0,A.jsx)(r.Component,{regions:n,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," entire scene:"]}),(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){return e}}]),n}(B);(z||(z={})).Component=function(e){var t=e.rnaComplexIndex,n=e.rerender,r=e.singularRnaComplexProps,o=(0,c.useContext)(f._.App.IndicesOfFrozenNucleotides),a=t in o?o[t]:{},l=(0,c.useState)(r.name),u=(0,i.Z)(l,2),p=u[0],h=u[1],m=(0,c.useMemo)((function(){var e=r.basePairs,t={0:{x:-1,y:0},1:{x:1,y:0}},o=new Array,l=Object.entries(r.rnaMoleculeProps);l.reverse();for(var c=0,u=l;c<u.length;c++){var f=(0,i.Z)(u[c],2),p=f[0],h=f[1],m=e[p],v=Object.entries(h.nucleotideProps).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return{nucleotideIndex:Number.parseInt(n),singularNucleotideProps:r}}));v.sort((function(e,t){return t.nucleotideIndex-e.nucleotideIndex}));var x,g=p in a?a[p]:new Set,y=(0,s.Z)(v);try{for(y.s();!(x=y.n()).done;){var b=x.value,N=b.nucleotideIndex,E=b.singularNucleotideProps;if(g.has(N)||o.push(E),m&&N in m){var C=m[N].reduce(d.selectRelevantBasePairKeys);t={0:E,1:r.rnaMoleculeProps[C.rnaMoleculeName].nucleotideProps[C.nucleotideIndex]}}}}catch(I){y.e(I)}finally{y.f()}}return(0,A.jsx)(M.Simplified,{boundingVector0:t[0],boundingVector1:t[1],positions:o,onUpdatePositions:n})}),[a,r]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("label",{children:"Name:\xa0"}),(0,A.jsx)("input",{type:"text",value:p,onChange:function(e){var t=e.target.value;h(t),r.name=t}}),(0,A.jsx)("br",{}),m]})};var G,H=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,c,u,f,p,m){var v,x=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,i,u,p,m)).dragListener=void 0,v.editMenuProps=void 0,v.initialBasePairs=void 0,v.helices=void 0;for(var g=v.fullKeys0,y=g.rnaComplexIndex,b=g.rnaMoleculeName,E=g.nucleotideIndex,C=(0,a.Z)({},y,{}),I=C[y],S=(0,a.Z)({},y,[]),_=S[y],A=new Array,T=v.rnaComplexProps[y],P=T.basePairs,R=(y in u?u[y]:{}),k=0,w=Object.keys(T.rnaMoleculeProps);k<w.length;k++){var M=w[k];I[M]=[];var O,j=I[M],L=T.rnaMoleculeProps[M],D=P[M],Z=Object.keys(L.nucleotideProps).map(N.parseInteger),F=M in R?R[M]:new Set,B=(0,s.Z)(Z);try{for(B.s();!(O=B.n()).done;){var z=O.value;if(v.addFullIndices({rnaComplexIndex:y,rnaMoleculeName:M,nucleotideIndex:z}),!F.has(z)){var W=L.nucleotideProps[z];A.push(W),j.push(z)}z in D&&_.push({rnaMoleculeName:M,nucleotideIndex:z})}}catch(X){B.e(X)}finally{B.f()}}_.sort(d.compareBasePairKeys);var G=T.rnaMoleculeProps[b].nucleotideProps[E];function H(){r(structuredClone(C)),o(structuredClone(S))}v.dragListener=U(structuredClone(G),A,H),v.editMenuProps={rnaComplexIndex:y,rerender:H,singularRnaComplexProps:T};var K=[],V=xe(y,T,x),q=[];return v.helices=q,V.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0;q.push.apply(q,(0,l.Z)(e.helixData.map((function(e){var n=e.rnaMoleculeName1,r=e.start,o=e.stop;return{rnaComplexIndex:y,rnaMoleculeName0:t,rnaMoleculeName1:n,start:r,stop:o}}))))})),V.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,n=T.rnaMoleculeProps[t];K.push.apply(K,(0,l.Z)(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=T.rnaMoleculeProps[r];return{rnaComplexIndex:y,rnaMoleculeName0:t,rnaMoleculeName1:r,nucleotideIndex0:e.start[0]+n.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+o.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))})),v.initialBasePairs=K,v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0.rnaComplexIndex,o=this.rnaComplexProps[n],i=(0,A.jsxs)("b",{children:[e,' RNA complex "',o.name,'":']});switch(e){case u.OK.EDIT:i=(0,A.jsxs)("b",{children:[e," RNA complex:"]}),t=(0,A.jsx)(z.Component,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(n!==r.rnaComplexIndex)throw"This constraint expects base pairs to be placed within the clicked-on RNA complex. The base pair(s) on line ".concat(t+1," do not.")}}});break;case u.OK.ANNOTATE:var l=(0,a.Z)({},n,{}),s=l[n];for(var c in this.rnaComplexProps){var d=Number.parseInt(c),f=this.rnaComplexProps[d],h=d in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[d]:{};for(var m in f.rnaMoleculeProps){s[m]=[];var v=s[m],x=f.rnaMoleculeProps[m],y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;for(var E in x.nucleotideProps){var C=Number.parseInt(E);C<y&&(y=C),C>b&&(b=C)}var I=m in h?h[m]:new Set;r.populateRegions(I,(0,N.range)(b+1,y),v)}}t=(0,A.jsx)(r.Component,{regions:l,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[i,(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){return e.rnaComplexIndex===t.fullKeys0.rnaComplexIndex}))}}]),n}(B),K=n(9750);(G||(G={})).Component=function(e){var t=e.initialRadius,n=e.minimumRadius,r=e.updatePositionsHelper,o=e.cycleGraphNucleotides,a=e.branchNucleotides,l=e.rerender,u=e.getRadius,d=(0,c.useContext)(f._.OrientationEditor.ResetDataTrigger),h=(0,c.useContext)(f._.App.Settings)[K.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],m=(0,c.useContext)(f._.App.PushToUndoStack),v=(0,c.useState)(t),x=(0,i.Z)(v,2),g=x[0],b=x[1],N=(0,c.useState)(structuredClone(I.BLACK)),E=(0,i.Z)(N,2),C=E[0],_=E[1],T=(0,c.useState)(structuredClone(S.default.DEFAULT)),P=(0,i.Z)(T,2),R=P[0],M=P[1],O=(0,c.useState)(!1),j=(0,i.Z)(O,2),L=j[0],D=j[1];function Z(e,t){L||m(),r(e,t),D(!0)}return(0,c.useEffect)((function(){b(u())}),[d]),(0,c.useEffect)((function(){for(var e,t=0===o.length?I.BLACK:null!==(e=o[0].color)&&void 0!==e?e:I.BLACK,n=0;n<o.length;n++){var r,a=o[n];if(!(0,I.areEqual)(t,null!==(r=a.color)&&void 0!==r?r:I.BLACK))break}}),[o]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("button",{onClick:function(){Z(g,h)},children:"Normalize"}),(0,A.jsx)("br",{}),(0,A.jsxs)("label",{children:["Radius:\xa0",(0,A.jsx)(y.Z.Number,{value:g,setValue:function(e){b(e),Z(e,h)},min:n})]}),(0,A.jsx)("br",{}),(0,A.jsx)(k.S.Component,{color:C,setColorHelper:function(e){_(e);var t,n=(0,s.Z)(o);try{for(n.s();!(t=n.n()).done;)t.value.color=e}catch(c){n.e(c)}finally{n.f()}var r,i=(0,s.Z)(a);try{for(i.s();!(r=i.n()).done;)r.value.color=e}catch(c){i.e(c)}finally{i.f()}l()}}),(0,A.jsx)(w.f.Component,(0,p.Z)((0,p.Z)({},R),{},{setFont:function(e){M(e);var t,n=(0,s.Z)(o);try{for(n.s();!(t=n.n()).done;)t.value.font=e}catch(c){n.e(c)}finally{n.f()}var r,i=(0,s.Z)(a);try{for(i.s();!(r=i.n()).done;)r.value.font=e}catch(c){i.e(c)}finally{i.f()}l()}}))]})};var V,q=n(4838),X=.01,Y={errorMessage:"The clicked-on nucleotide is not part of an RNA cycle."},Q=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,c,u,f,m,v,x){var g,y=m.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(g=t.call(this,e,r,o,c,f,v,x)).rnaCycleBoundsText=void 0,g.editMenuProps=void 0,g.cycleIndices=void 0,g.initialDrag=void 0,g.boundingVector0=void 0,g.boundingVector1=void 0,g.updatePositionsHelper=void 0,g.minimumRadius=void 0,g.initialBasePairs=void 0,g.helices=void 0;var E=e[v.rnaComplexIndex];g.initialDrag=structuredClone(E.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex]);var I=E.basePairs;if(v.rnaMoleculeName in I&&v.nucleotideIndex in I[v.rnaMoleculeName]&&I[v.rnaMoleculeName][v.nucleotideIndex].some((function(e){var t;return C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(E.rnaMoleculeProps[v.rnaMoleculeName].nucleotideProps[v.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)})))throw D;function S(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex,r=[{rnaMoleculeName:t,nucleotideIndex:n-1},{rnaMoleculeName:t,nucleotideIndex:n+1}].filter((function(e){var t=e.rnaMoleculeName;return e.nucleotideIndex in E.rnaMoleculeProps[t].nucleotideProps})),o=I[t];if(n in o){var a=o[n].filter((function(e){var r;return C.default.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:(0,C.getBasePairType)(E.rnaMoleculeProps[t].nucleotideProps[n].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)}));r.push.apply(r,(0,l.Z)(a))}return r}function _(e,t){var n=[e],r={};function o(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;t in r||(r[t]=new Set),r[t].add(n)}o(v),o(e);for(var a={};n.length>0;){var i=n.shift(),l=i,c=l.rnaMoleculeName,u=l.nucleotideIndex;if(c===t.rnaMoleculeName&&u===t.nucleotideIndex){for(var d=[];i.rnaMoleculeName in a&&i.nucleotideIndex in a[i.rnaMoleculeName];)d.push(i),i=a[i.rnaMoleculeName][i.nucleotideIndex];return d.push(i),d.reverse()}var f,p=(0,s.Z)(S(i));try{for(p.s();!(f=p.n()).done;){var h=f.value;h.rnaMoleculeName in r&&r[h.rnaMoleculeName].has(h.nucleotideIndex)||(o(h),h.rnaMoleculeName in a||(a[h.rnaMoleculeName]={}),a[h.rnaMoleculeName][h.nucleotideIndex]=i,n.push(h))}}catch(m){p.e(m)}finally{p.f()}}}for(var T=S(v),P=void 0,R=0;R<T.length;R++)for(var k=R+1;k<T.length;k++){var w=_(T[R],T[k]);void 0!==w&&((void 0===P||P.length>w.length)&&(P=w))}if(void 0===P)throw Y;var M=[].concat((0,l.Z)(P),[v]);g.cycleIndices=M;var O,j=M.map((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return E.rnaMoleculeProps[t].nucleotideProps[n]})),L=(0,s.Z)(M);try{for(L.s();!(O=L.n()).done;){var Z=O.value,F=Z.rnaMoleculeName,B=Z.nucleotideIndex;g.addFullIndices({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName:F,nucleotideIndex:B})}}catch(Un){L.e(Un)}finally{L.f()}var U=0,z=M.reduce((function(e,t,n){return(0,d.compareBasePairKeys)(e,t)<0?e:(U=n,t)})),W=I[z.rnaMoleculeName][z.nucleotideIndex].filter((function(e){var t;return C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(E.rnaMoleculeProps[z.rnaMoleculeName].nucleotideProps[z.nucleotideIndex].symbol,E.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),y)})).filter((function(e){return M.some((function(t){return e.rnaMoleculeName===t.rnaMoleculeName&&e.nucleotideIndex===t.nucleotideIndex}))})).reduce((function(e,t){return(0,d.compareBasePairKeys)(e,t)>0?e:t})),G=M.findIndex((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===W.rnaMoleculeName&&n===W.nucleotideIndex}));if(-1===G)throw"Cannot find the minimum graph node.";var H=(U+1)%M.length===G?-1:1,K=j[U],V=j[G];g.boundingVector0=K,g.boundingVector1=V;var Q=.5*(0,b.distance)(K,V)+X;if((0,N.areEqual)(Q,0,.02))throw{errorMessage:"Cannot determine repositioning data for this cycle, because its anchoring vector positions are exactly equal."};var $,J=(0,b.scaleUp)((0,b.add)(K,V),.5),ee=(0,b.orthogonalizeLeft)((0,b.subtract)(V,K)),te=K.x,ne=K.y,re=V.x,oe=V.y,ae=te*te,ie=ne*ne,le=re-te;if((0,N.areEqual)(le,0)){var se=1/(oe-ne),ce=(te-re)*se,ue=(re*re-ae+oe*oe-ie)*se*.5,de=1+ce*ce,fe=1/(2*de),pe=4*de,he=2*(ce*(-ne+ue)-te),me=-he,ve=he*he,ge=ae+ie+ue*(ue-2*ne),ye=1/ee.x;$=function(e){var t=ge-e*e,n=(me+Math.sqrt(ve-pe*t))*fe,r=Math.abs((n-J.x)*ye);return(0,b.add)(J,(0,b.scaleUp)(ee,r))}}else{var be=1/le,Ne=(ne-oe)*be,Ee=(re*re-ae+oe*oe-ie)*be*.5,Ce=1+Ne*Ne,Ie=1/(2*Ce),Se=4*Ce,_e=2*(Ne*(-te+Ee)-ne),Ae=-_e,Te=_e*_e,Pe=ae+ie+Ee*(Ee-2*te),Re=1/ee.y;$=function(e){var t=Pe-e*e,n=(Ae+Math.sqrt(Te-Se*t))*Ie,r=Math.abs((n-J.y)*Re);return(0,b.add)(J,(0,b.scaleUp)(ee,r))}}var ke=j.map((function(e){return(0,q.Yq)(K,V,e).radius})),we=Math.max(Q,ke.reduce((function(e,t){return e+t}),0)/ke.length);var Me,Oe=$(we),je=(0,a.Z)({},v.rnaComplexIndex,{}),Le=je[v.rnaComplexIndex],De=(0,a.Z)({},v.rnaComplexIndex,[]),Ze=De[v.rnaComplexIndex],Fe=(0,s.Z)(M);try{for(Fe.s();!(Me=Fe.n()).done;){var Be=Me.value,Ue=Be.rnaMoleculeName,ze=Be.nucleotideIndex;if(Ue in Le||(Le[Ue]=[]),Le[Ue].push(ze),Ue in I){var We=I[Ue];if(ze in We){var Ge,He=We[ze],Ke=(0,s.Z)(He);try{for(Ke.s();!(Ge=Ke.n()).done;){var Ve=Ge.value;Ze.push((0,d.selectRelevantBasePairKeys)(Be,Ve))}}catch(Un){Ke.e(Un)}finally{Ke.f()}}}}}catch(Un){Fe.e(Un)}finally{Fe.f()}for(var qe=new Array,Xe=0;Xe<M.length;Xe++)if(Xe!==U&&Xe!==G){var Ye=M[Xe],Qe=(Xe+1)%M.length,$e=M[Qe],Je=j[Xe],et=j[Qe],tt=(0,b.scaleUp)((0,b.add)(Je,et),.5),nt=(0,b.orthogonalizeLeft)((0,b.subtract)(et,Je));(0,b.dotProduct)(nt,(0,b.subtract)(tt,Oe))<0&&(nt=(0,b.negate)(nt));var rt=(0,b.asAngle)(nt);if(Ye.rnaMoleculeName!==$e.rnaMoleculeName||1!==Math.abs(Ye.nucleotideIndex-$e.nucleotideIndex)){var ot=.5*(0,b.distance)(Je,et),at=Ye.rnaMoleculeName,it=$e.rnaMoleculeName,lt=Ye.nucleotideIndex,st=$e.nucleotideIndex,ct=E.rnaMoleculeProps[at],ut=E.rnaMoleculeProps[it],dt=ct.nucleotideProps,ft=ut.nucleotideProps,pt=I[at],ht=I[it];at in Le||(Le[at]=[]);var mt=Le[at];it in Le||(Le[it]=[]);for(var vt=Le[it],xt=new Array,gt=lt-M[(Xe-1+M.length)%M.length].nucleotideIndex,yt=st-M[(Xe+2)%M.length].nucleotideIndex,bt=0,Nt=[{rnaMoleculeName:at,nucleotideIndex:lt+gt,otherRnaMoleculeName:it,otherInitialNucleotideIndex:st,nucleotideProps:dt,nucleotideKeysToRerenderPerRnaMolecule:mt,basePairsPerRnaMolecule:pt,nucleotideIndexIncrement:gt,otherNucleotideIndexIncrement:yt},{rnaMoleculeName:it,nucleotideIndex:st+yt,otherRnaMoleculeName:at,otherInitialNucleotideIndex:lt,nucleotideProps:ft,nucleotideKeysToRerenderPerRnaMolecule:vt,basePairsPerRnaMolecule:ht,nucleotideIndexIncrement:yt,otherNucleotideIndexIncrement:gt}];bt<Nt.length;bt++){var Et=Nt[bt],Ct=Et.rnaMoleculeName,It=Et.nucleotideIndex,St=Et.otherRnaMoleculeName,_t=Et.otherInitialNucleotideIndex,At=Et.nucleotideProps,Tt=Et.nucleotideKeysToRerenderPerRnaMolecule,Pt=Et.basePairsPerRnaMolecule,Rt=Et.nucleotideIndexIncrement;for(Et.otherNucleotideIndexIncrement;It&&(Ct!==St||It!==_t)&&It in At;){g.addFullIndices({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName:Ct,nucleotideIndex:It});var kt=At[It],wt=(0,b.toPolar)((0,b.subtract)(kt,tt));wt.angle-=rt;var Mt=void 0,Ot=new Array;if(void 0!==kt.labelContentProps&&(Mt=(0,b.asAngle)(kt.labelContentProps),Ot.push({position:kt.labelContentProps,magnitude:(0,b.magnitude)(kt.labelContentProps)})),void 0!==kt.labelLineProps){var jt=kt.labelLineProps.points;Mt=(0,b.asAngle)(jt[0]),Ot.push.apply(Ot,(0,l.Z)(jt.map((function(e){return{position:e,magnitude:(0,b.magnitude)(e)}}))))}if(void 0!==Mt&&(Mt-=rt),xt.push({singularNucleotideProps:kt,polarWithAngleSubtracted:wt,annotationData:void 0===Mt?void 0:{subtractedAnnotationAngle:Mt,positionsWithMagnitudes:Ot}}),Tt.push(It),It in Pt){var Lt,Dt={rnaMoleculeName:Ct,nucleotideIndex:It},Zt=Pt[It],Ft=(0,s.Z)(Zt);try{for(Ft.s();!(Lt=Ft.n()).done;){var Bt=Lt.value;Ze.push((0,d.selectRelevantBasePairKeys)(Dt,Bt))}}catch(Un){Ft.e(Un)}finally{Ft.f()}}It+=Rt}}qe.push({arrayIndex:Xe,positionsToEdit:xt,originalBasePairDistanceOverTwo:ot})}}for(var Ut=0,zt=Object.values(Le);Ut<zt.length;Ut++){zt[Ut].sort(N.subtractNumbers)}function Wt(){r(structuredClone(je)),o(structuredClone(De))}Ze.sort(d.compareBasePairKeys);for(var Gt=new Array,Ht=0,Kt=Object.entries(f);Ht<Kt.length;Ht++)for(var Vt=(0,i.Z)(Kt[Ht],2),qt=Vt[0],Xt=Vt[1],Yt=(Number.parseInt(qt),0),Qt=Object.entries(Xt);Yt<Qt.length;Yt++)for(var $t=(0,i.Z)(Qt[Yt],2),Jt=$t[0],en=$t[1],tn=E.rnaMoleculeProps[Jt],nn=0,rn=Array.from(en);nn<rn.length;nn++){var on=rn[nn],an=tn.nucleotideProps[on];Gt.push(an)}g.updatePositionsHelper=function(e,t){for(var n=$(e),r=(0,b.subtract)(K,n),o=(0,b.subtract)(V,n),a=(0,b.angleBetween)(r,o),i=(0,b.asAngle)(r),c=(2*Math.PI-a)/(j.length-1)*(0,N.sign)((0,b.crossProduct)(o,r)),u=i,d=U,f=new Array,h=0;h<j.length-2;h++){u+=c,d=(d+H+j.length)%j.length;var m=(0,b.add)(n,(0,b.toCartesian)({radius:e,angle:u})),v=j[d];f.push({angle:u,singularNucleotideProps:v}),Gt.includes(v)||(v.x=m.x,v.y=m.y)}if(t){var x,g=(0,s.Z)(f);try{for(g.s();!(x=g.n()).done;){var y=x.value,E=y.angle,C=y.singularNucleotideProps;if(!Gt.includes(C)){var I=(0,b.toNormalCartesian)(E),S=[];void 0!==C.labelContentProps&&S.push(C.labelContentProps),void 0!==C.labelLineProps&&(C.labelLineProps.points=(0,l.Z)(C.labelLineProps.points),S.push.apply(S,(0,l.Z)(C.labelLineProps.points)));for(var _=0,A=S;_<A.length;_++){var T=A[_],P=(0,b.scaleUp)(I,(0,b.magnitude)(T));T.x=P.x,T.y=P.y}}}}catch(Un){g.e(Un)}finally{g.f()}}for(var R=function(){var r=w[k],o=r.arrayIndex,a=r.positionsToEdit,i=r.originalBasePairDistanceOverTwo,c=j[o],u=j[(o+1)%j.length],d=(0,b.scaleUp)((0,b.add)(c,u),.5),f=(0,b.asAngle)((0,b.subtract)(d,n)),h=i/e,m=(0,b.add)((0,b.toCartesian)({angle:f,radius:e*Math.sqrt(1-h*h)}),n),v=(0,b.scaleUp)((0,b.normalize)((0,b.subtract)(c,d)),i),x=(0,b.add)(m,v),g=(0,b.subtract)(m,v);if(Gt.includes(c)||(c.x=x.x,c.y=x.y),Gt.includes(u)||(u.x=g.x,u.y=g.y),d=(0,b.scaleUp)((0,b.add)(x,g),.5),0===a.length)return"continue";var y,N=a.map((function(e){var t=e.singularNucleotideProps,n=e.polarWithAngleSubtracted,r=(0,p.Z)({},n);return r.angle+=f,{singularNucleotideProps:t,dv:(0,b.toCartesian)(r)}})),E=(0,b.dotProduct)((0,b.subtract)(d,n),N[0].dv)<0,C=E?b.subtract:b.add,I=(0,s.Z)(N);try{for(I.s();!(y=I.n()).done;){var S=y.value,_=S.singularNucleotideProps,A=C(d,S.dv);Gt.includes(_)||(_.x=A.x,_.y=A.y)}}catch(Un){I.e(Un)}finally{I.f()}if(t){var T,P=(0,s.Z)(a);try{for(P.s();!(T=P.n()).done;){var R=T.value,M=R.singularNucleotideProps,O=R.annotationData;if(void 0!==O){var L=E?f-O.subtractedAnnotationAngle:f+O.subtractedAnnotationAngle;void 0!==M.labelLineProps&&(M.labelLineProps.points=(0,l.Z)(M.labelLineProps.points));var D,Z=(0,b.toNormalCartesian)(L),F=(0,s.Z)(O.positionsWithMagnitudes);try{for(F.s();!(D=F.n()).done;){var B=D.value,U=B.position,z=B.magnitude,W=(0,b.scaleUp)(Z,z);Gt.includes(U)||(U.x=W.x,U.y=W.y)}}catch(Un){F.e(Un)}finally{F.f()}}}}catch(Un){P.e(Un)}finally{P.f()}}},k=0,w=qe;k<w.length;k++)R();Wt()};var ln=M[U],sn=ln.rnaMoleculeName,cn=E.rnaMoleculeProps[sn],un=M[G],dn=un.rnaMoleculeName,fn=E.rnaMoleculeProps[dn];g.rnaCycleBoundsText=(0,A.jsxs)(A.Fragment,{children:["Anchored by:",(0,A.jsx)("br",{}),"Nucleotide #",ln.nucleotideIndex+cn.firstNucleotideIndex,(0,A.jsx)("br",{}),'In RNA molecule "',sn,'"',(0,A.jsx)("br",{}),"And",(0,A.jsx)("br",{}),"Nucleotide #",un.nucleotideIndex+fn.firstNucleotideIndex,(0,A.jsx)("br",{}),'In RNA molecule "',dn,'"',(0,A.jsx)("br",{}),'In RNA complex "',E.name,'"']});for(var pn=new Array,hn=0,mn=qe;hn<mn.length;hn++){var vn,xn=mn[hn].positionsToEdit,gn=(0,s.Z)(xn);try{for(gn.s();!(vn=gn.n()).done;){var yn=vn.value.singularNucleotideProps;pn.push(yn)}}catch(Un){gn.e(Un)}finally{gn.f()}}Q=qe.reduce((function(e,t){var n=t.originalBasePairDistanceOverTwo;return Math.max(e,n+X)}),Q),g.minimumRadius=Q,g.editMenuProps={initialRadius:we,minimumRadius:Q,updatePositionsHelper:g.updatePositionsHelper,cycleGraphNucleotides:j.filter((function(e){return!Gt.includes(e)})),branchNucleotides:pn.filter((function(e){return!Gt.includes(e)})),rerender:Wt,getRadius:function(){return Math.max((0,q.Yq)(j[0],K,V).radius,Q)}};var bn=xe(v.rnaComplexIndex,E,y),Nn=g.indicesOfAffectedNucleotides[v.rnaComplexIndex],En=[];g.helices=[];var Cn,In=(0,s.Z)(bn.helixDataPerRnaMolecules);try{for(In.s();!(Cn=In.n()).done;){var Sn,_n=Cn.value,An=_n.rnaMoleculeName0,Tn=_n.helixData,Pn=(0,s.Z)(Tn);try{for(Pn.s();!(Sn=Pn.n()).done;){var Rn=Sn.value,kn=Rn.rnaMoleculeName1,wn=Rn.start,Mn=Rn.stop,On={rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName0:An,rnaMoleculeName1:kn,nucleotideIndex0:wn[0]+E.rnaMoleculeProps[An].firstNucleotideIndex,nucleotideIndex1:Math.max(wn[1],Mn[1])+E.rnaMoleculeProps[kn].firstNucleotideIndex,length:Math.abs(wn[0]-Mn[0])+1},jn=!0;e:for(var Ln=0;Ln<On.length;Ln++){var Dn=On.nucleotideIndex0+Ln,Zn=On.nucleotideIndex1-Ln;if(!(An in Nn)){jn=!1;break}if(!(kn in Nn)){jn=!1;break}var Fn=Nn[An],Bn=Nn[kn];if(!Fn.has(Dn)||!Bn.has(Zn)){jn=!1;break e}}jn&&(En.push(On),g.helices.push({rnaComplexIndex:v.rnaComplexIndex,rnaMoleculeName0:An,rnaMoleculeName1:kn,start:wn,stop:Mn}))}}catch(Un){Pn.e(Un)}finally{Pn.f()}}}catch(Un){In.e(Un)}finally{In.f()}return g.initialBasePairs=En,g}return(0,m.Z)(n,[{key:"drag",value:function(){var e=this.initialDrag,t=this.updatePositionsHelper,n=this.boundingVector0,r=this.boundingVector1,o=this.minimumRadius;return{initiateDrag:function(){return e},continueDrag:function(e,a){t(Math.max((0,q.Yq)(n,r,e).radius,o),a)}}}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex;n.rnaMoleculeName;switch(e){case u.OK.EDIT:t=(0,A.jsx)(G.Component,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(){}});break;case u.OK.ANNOTATE:var i,l=(0,a.Z)({},o,{}),c=l[o],d={rnaMoleculeName:void 0},f=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},h=(0,s.Z)(this.cycleIndices);try{for(h.s();!(i=h.n()).done;){var m=i.value,v=m.rnaMoleculeName,x=m.nucleotideIndex;v in c||(c[v]=[]);var y=v in f?f[v]:new Set,b=c[v];if(!y.has(x))if(v===d.rnaMoleculeName&&b.length>0){var N=b[b.length-1];x===N.minimumNucleotideIndexInclusive-1?N.minimumNucleotideIndexInclusive=x:x===N.maximumNucleotideIndexInclusive+1?N.maximumNucleotideIndexInclusive=x:b.push({minimumNucleotideIndexInclusive:x,maximumNucleotideIndexInclusive:x})}else b.push({minimumNucleotideIndexInclusive:x,maximumNucleotideIndexInclusive:x})}}catch(E){h.e(E)}finally{h.f()}t=(0,A.jsx)(r.Component,{regions:l,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA cycle:"]}),(0,A.jsx)("br",{}),this.rnaCycleBoundsText,(0,A.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(B),$=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,s,c,u,f){var p,m,v,x=c.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(v=t.call(this,e,r,o,i,s,u,f)).dragListener=void 0,v.partialHeader=void 0,v.editMenuProps=void 0,v.initialBasePairs=void 0,v.helix=void 0;var g=v.fullKeys0,y=g.rnaComplexIndex,E=g.rnaMoleculeName,S=g.nucleotideIndex,_=E,T=v.rnaComplexProps[y],P=T.basePairs,R=T.rnaMoleculeProps[_],k=R.nucleotideProps[S];if(!C.default.isNucleotideBasePaired(k.symbol,T,P,E,S,x))throw Z;var w,M=P[_][S];if(1===M.length)w=M[0];else{var O;if(void 0===f)throw F;if(w=M.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return f.rnaMoleculeName===t&&f.nucleotideIndex===n})),!C.default.isEnabledBasePair(null!==(O=w.basePairType)&&void 0!==O?O:(0,C.getBasePairType)(k.symbol,T.rnaMoleculeProps[w.rnaMoleculeName].nucleotideProps[w.nucleotideIndex].symbol),x))throw Z}var j=w.rnaMoleculeName,L=T.rnaMoleculeProps[j],D=L.nucleotideProps[w.nucleotideIndex],B=new Array,z=(p={},(0,a.Z)(p,_,[]),(0,a.Z)(p,j,[]),p),W=z[_],G=z[j],H=(0,a.Z)({},y,z),K=(0,a.Z)({},y,[]),V=K[y];V.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:_,nucleotideIndex:S},{rnaMoleculeName:j,nucleotideIndex:w.nucleotideIndex}));var q=Ne(T,_,S,j,w.nucleotideIndex,B,x,V,(function(e){z[e.rnaMoleculeName].push(e.nucleotideIndex)})),X=q.start,Y=q.stop;if(_===j){var Q=Ee(X,Y);0===Q?(be(T,_,X,B,W,x),X[0]!==Y[0]&&be(T,_,Y,B,W,x)):be(T,_,Q<0?X:Y,B,W,x)}function $(){r(structuredClone(H)),o(structuredClone(K))}W.sort(N.subtractNumbers),G.sort(N.subtractNumbers),V.sort(d.compareBasePairKeys);var J=new Array;if(y in s){var ee=s[y];if(_ in ee)for(var te=ee[_],ne=0,re=Array.from(te);ne<re.length;ne++){var oe=re[ne];J.push(R.nucleotideProps[oe])}if(j in ee)for(var ae=ee[j],ie=0,le=Array.from(ae);ie<le.length;ie++){var se=le[ie];J.push(L.nucleotideProps[se])}}B=B.filter((function(e){return!J.includes(e)})),v.dragListener=U({x:k.x,y:k.y},B,$);var ce,ue,de,fe="[".concat(X[0]+R.firstNucleotideIndex,", ").concat(Y[0]+R.firstNucleotideIndex,"]"),pe="[".concat(X[1]+L.firstNucleotideIndex,", ").concat(Y[1]+L.firstNucleotideIndex,"]"),he={display:"inline-block",width:80,color:"#666"};if(ce=_===j?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Nucleotides:"}),fe]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Bound to:"}),pe]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Molecule:"}),_]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Nucleotides:"}),fe," in ",_]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Bound to:"}),pe," in ",j]})]}),_===j){var me,ve=Math.min(X[0],X[1],Y[0],Y[1]);switch(ve){case X[0]:me=X[1];break;case X[1]:me=X[0];break;case Y[0]:me=Y[1];break;case Y[1]:me=Y[0];break;default:throw"This condition should be impossible."}ue=R.nucleotideProps[ve],de=R.nucleotideProps[me]}else ue=k,de=D;(0,b.scaleUp)((0,b.add)(ue,de),.5),(0,b.orthogonalizeLeft)((0,b.subtract)(de,ue));v.partialHeader=(0,A.jsxs)(A.Fragment,{children:[ce,(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{style:he,children:"Complex:"}),T.name]})]});for(var xe=B.length>0&&null!==(m=B[0].color)&&void 0!==m?m:I.BLACK,ge=1;ge<B.length;ge++){var ye;if(!(0,I.areEqual)(xe,null!==(ye=B[ge].color)&&void 0!==ye?ye:I.BLACK)){!1;break}}v.editMenuProps={positions:B,onUpdatePositions:$,boundingVector0:ue,boundingVector1:de};var Ce={rnaComplexIndex:y,rnaMoleculeName0:_,rnaMoleculeName1:j,nucleotideIndex0:Math.min(X[0],Y[0])+R.firstNucleotideIndex,nucleotideIndex1:Math.max(X[1],Y[1])+L.firstNucleotideIndex,length:Y[0]-X[0]+1};return v.initialBasePairs=[Ce],v.addFullIndicesPerNucleotideKeysToRerender(H),v.helix={rnaComplexIndex:y,rnaMoleculeName0:_,rnaMoleculeName1:j,start:X,stop:Y},v}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," helix:"]}),this.partialHeader]});switch(e){case u.OK.EDIT:return(0,A.jsx)(M.Simplified,(0,p.Z)((0,p.Z)({},this.editMenuProps),{},{headerContent:l}));case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case u.OK.ANNOTATE:var s,c=this.initialBasePairs[0],d=c.rnaMoleculeName0,f=c.rnaMoleculeName1,h=c.nucleotideIndex0,m=c.nucleotideIndex1,v=c.length,x=this.rnaComplexProps[o],y=x.rnaMoleculeProps[d],b=x.rnaMoleculeProps[f],E=h-y.firstNucleotideIndex,C=m-b.firstNucleotideIndex,I={minimumNucleotideIndexInclusive:E,maximumNucleotideIndexInclusive:E+v-1},S={minimumNucleotideIndexInclusive:C-v+1,maximumNucleotideIndexInclusive:C},_=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},T=d in _?_[d]:new Set,P=f in _?_[f]:new Set,R=[],k=[];r.populateRegions(T,(0,N.range)(I.maximumNucleotideIndexInclusive+1,I.minimumNucleotideIndexInclusive),R),r.populateRegions(P,(0,N.range)(S.maximumNucleotideIndexInclusive+1,S.minimumNucleotideIndexInclusive),k),s=d===f?(0,a.Z)({},o,(0,a.Z)({},d,R)):(0,a.Z)({},o,{regionsPerRnaMoleculeName0:R,regionsPerRnaMoleculeName1:k}),t=(0,A.jsx)(r.Component,{regions:s,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unrecognized Tab"}return(0,A.jsxs)(A.Fragment,{children:[l,t]})}},{key:"getHelices",value:function(){return[this.helix]}}]),n}(B);(V||(V={})).Component=function(e){var t=e.initialName,n=e.rnaComplexIndex,r=e.rnaMoleculeName,o=e.rnaComplexProps,l=e.setNucleotideKeysToRerender,u=e.setBasePairKeysToRerender,d=o[n],h=d.basePairs,m=(0,c.useContext)(f._.App.UpdateRnaMoleculeNameHelper),v=(0,c.useContext)(f._.App.IndicesOfFrozenNucleotides),x=n in v?v[n]:{},g=r in x?x[r]:new Set,E=(0,c.useState)(t),C=(0,i.Z)(E,2),I=C[0],S=C[1];(0,c.useEffect)((function(){S(t)}),[t]);var _=(0,c.useMemo)((function(){var e=d.rnaMoleculeProps[t],r=h[t],o=e.nucleotideProps,i=Object.keys(o).map(N.parseInteger),c=new Array,f=(0,a.Z)({},n,(0,a.Z)({},t,[])),p=f[n][t],m=(0,a.Z)({},n,[]),v=m[n],x=void 0;i.sort(N.subtractNumbersNegated);var y,E=!1,C=(0,s.Z)(i);try{for(C.s();!(y=C.n()).done;){var I=y.value;p.unshift(I);var S=o[I];if(g.has(I)||c.unshift(S),r&&I in r){v.unshift({rnaMoleculeName:t,nucleotideIndex:I});var _,A=r[I],T=(0,s.Z)(A);try{for(T.s();!(_=T.n()).done;)_.value.rnaMoleculeName!==t&&(E=!0)}catch(w){T.e(w)}finally{T.f()}var P=A.reduce((function(e,t){return Math.max(e,t.nucleotideIndex)}),Number.NEGATIVE_INFINITY);x={0:S,1:o[P]}}}}catch(w){C.e(w)}finally{C.f()}if(void 0===x){var R=Object.values(o)[0];x={0:(0,b.add)(R,{x:-1,y:0}),1:(0,b.add)(R,{x:1,y:0})}}function k(){l(structuredClone(f)),u(structuredClone(m))}return E?{errorMessage:"Cannot re-position nucleotides of this RNA molecule, because it is base-paired to another RNA molecule.",orientationEditorProps:{boundingVector0:{x:0,y:0},boundingVector1:{x:1,y:0},positions:c,onUpdatePositions:k,disabledFlag:!0}}:{orientationEditorProps:{positions:c,onUpdatePositions:k,boundingVector0:x[0],boundingVector1:x[1]},errorMessage:void 0}}),[t]),T=_.orientationEditorProps,P=_.errorMessage;return(0,A.jsxs)(A.Fragment,{children:["Name:\xa0",(0,A.jsx)(y.Z.Component,{value:I,setValue:function(e){S(e)},valueToString:function(e){return e},stringToValue:function(e){return e in d.rnaMoleculeProps?(alert("This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."),{errorMessage:"This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."}):(m(n,I,e),e)},htmlInputType:"text"}),(0,A.jsx)("br",{}),P&&(0,A.jsxs)(A.Fragment,{children:[P,(0,A.jsx)("br",{})]}),(0,A.jsx)(M.Simplified,(0,p.Z)({},T))]})};var J,ee=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,c,u,f,p){var m,v=u.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,c,f,p)).dragListener=void 0,m.dragError=void 0,m.editMenuProps=void 0,m.initialBasePairs=void 0,m.helices=void 0;var x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,E=m.rnaComplexProps[g],C=E.rnaMoleculeProps[y],I=C.nucleotideProps[b],S=new Array,_=E.basePairs[y],A=(0,a.Z)({},g,(0,a.Z)({},y,[])),T=A[g][y],P=(0,a.Z)({},g,[]),R=P[g],k=Object.keys(C.nucleotideProps).map(N.parseInteger);k.sort(N.subtractNumbers);var w,M=g in c?c[g]:{},O=y in M?M[y]:new Set,j=(0,s.Z)(k);try{for(j.s();!(w=j.n()).done;){var L=w.value;if(m.addFullIndices({rnaComplexIndex:g,rnaMoleculeName:y,nucleotideIndex:L}),O.has(L)||(S.push(C.nucleotideProps[L]),T.push(L)),_&&L in _){var D,Z=_[L],F={rnaMoleculeName:y,nucleotideIndex:L},B=(0,s.Z)(Z);try{for(B.s();!(D=B.n()).done;){var z=D.value;R.push((0,d.selectRelevantBasePairKeys)(F,z))}}catch(G){B.e(G)}finally{B.f()}}}}catch(G){j.e(G)}finally{j.f()}R.sort(d.compareBasePairKeys),m.dragListener=U(structuredClone(I),S,(function(){r(structuredClone(A)),o(structuredClone(P))})),m.editMenuProps={initialName:y,rnaComplexProps:e,rnaComplexIndex:f.rnaComplexIndex,rnaMoleculeName:y,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var W=ge(E,y,v);return m.helices=W.helixData.map((function(e){var t=e.rnaMoleculeName1,n=e.start,r=e.stop;return{rnaComplexIndex:g,rnaMoleculeName0:y,rnaMoleculeName1:t,start:n,stop:r}})),m.initialBasePairs=W.helixData.map((function(e){return{rnaComplexIndex:g,rnaMoleculeName0:y,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+C.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+C.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}})),m}return(0,m.Z)(n,[{key:"drag",value:function(){if(void 0!==this.dragError)throw this.dragError;return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,s=(0,A.jsxs)("b",{children:[e,' RNA molecule "',i,'":',(0,A.jsx)("br",{})]});switch(e){case u.OK.EDIT:s=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA molecule:"]}),(0,A.jsx)("br",{})]}),t=(0,A.jsx)(V.Component,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var n=e[t],r="This constraint expects base pairs to involve the clicked-on RNA molecule. The base pair on line #".concat(t+1," does not.");if(o!==n.rnaComplexIndex||i!==n.rnaMoleculeName0&&i!==n.rnaMoleculeName1)throw r}}});break;case u.OK.ANNOTATE:var c=this.rnaComplexProps[o].rnaMoleculeProps[i],d=Math.max.apply(Math,(0,l.Z)(Object.keys(c.nucleotideProps).map(N.parseInteger))),f=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},h=i in f?f[i]:new Set,m=[];r.populateRegions(h,(0,N.range)(d+1,0),m),t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,m)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[s,t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1;return n===t.fullKeys0.rnaComplexIndex&&[r,o].includes(t.fullKeys0.rnaMoleculeName)}))}}]),n}(B);!function(e){var t=function(e){return e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counterclockwise",e.STRAIGHT="straight",e}({});e.Orientation=t,e.Component=function(e){var n=e.updateSingleStrandPositions,r=e.updateSingleStrandColors,o=e.updateSingleStrandFonts,a=e.initialColor,l=e.initialFont,s=e.getDisplacementAlongNormal,u=e.getOrientation,d=e.nucleotideCount,h=e.formattedLowerBoundingNucleotideIndex,m=e.formattedUpperBoundingNucleotideIndex,v=e.rnaMoleculeName,x=e.rnaComplexName,g=(0,_.Fg)().theme,b=(0,c.useContext)(f._.OrientationEditor.ResetDataTrigger),N=(0,c.useContext)(f._.App.Settings)[K.pE.AUTOMATICALLY_REPOSITION_ANNOTATIONS],E=(0,c.useContext)(f._.App.PushToUndoStack),C=(0,c.useState)(u()),I=(0,i.Z)(C,2),S=I[0],T=I[1],P=(0,c.useState)(s()),R=(0,i.Z)(P,2),M=R[0],O=R[1],j=(0,c.useState)(a),L=(0,i.Z)(j,2),D=L[0],Z=L[1],F=(0,c.useState)(l),B=(0,i.Z)(F,2),U=B[0],z=B[1],W=(0,c.useState)(!1),G=(0,i.Z)(W,2),H=G[0],V=G[1],q=(0,c.useState)(!1),X=(0,i.Z)(q,2),Y=X[0],Q=X[1];(0,c.useEffect)((function(){O(s()),T(u())}),[b]);var $="orientation";function J(e){Y||E(),T(e),Q(!0),n(e,M,N)}return(0,c.useEffect)((function(){Z(a)}),[a]),(0,c.useEffect)((function(){z(l)}),[l]),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,fontSize:g.typography.fontSize.md,color:g.colors.text},children:[(0,A.jsxs)("div",{style:{padding:"12px 14px",borderRadius:10,border:"1px solid ".concat(g.colors.borderLight),background:g.colors.surface,fontSize:g.typography.fontSize.sm,lineHeight:1.5,display:"flex",flexDirection:"column",gap:6},children:[(0,A.jsx)("span",{style:{fontSize:g.typography.fontSize.lg,fontWeight:g.typography.fontWeight.semibold,color:g.colors.text},children:"Edit single-stranded region"}),(0,A.jsx)("span",{style:{fontSize:g.typography.fontSize.sm,color:g.colors.textSecondary},children:"".concat(d," nucleotides in the range (").concat(h,", ").concat(m,")")}),(0,A.jsx)("span",{style:{fontSize:g.typography.fontSize.sm,color:g.colors.textSecondary},children:'In RNA molecule "'.concat(v,'"')}),(0,A.jsx)("span",{style:{fontSize:g.typography.fontSize.sm,color:g.colors.textSecondary},children:'In RNA complex "'.concat(x,'"')})]}),(0,A.jsxs)("div",{style:{padding:"10px 12px",borderRadius:10,border:"1px solid ".concat(g.colors.borderLight),background:g.colors.surface},children:[(0,A.jsx)("div",{style:{marginBottom:8,fontSize:g.typography.fontSize.sm,color:g.colors.textSecondary},children:"Orientation"}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,A.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,A.jsx)("input",{type:"radio",value:"clockwise",name:$,onChange:function(){J(t.CLOCKWISE)},checked:S===t.CLOCKWISE}),(0,A.jsx)("span",{children:"Clockwise"})]}),(0,A.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,A.jsx)("input",{type:"radio",value:"straight",name:$,onChange:function(){J(t.STRAIGHT)},checked:S===t.STRAIGHT}),(0,A.jsx)("span",{children:"Straight"})]}),(0,A.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,A.jsx)("input",{type:"radio",value:"counterclockwise",name:$,onChange:function(){J(t.COUNTERCLOCKWISE)},checked:S===t.COUNTERCLOCKWISE}),(0,A.jsx)("span",{children:"Counterclockwise"})]})]})]}),(S===t.CLOCKWISE||S===t.COUNTERCLOCKWISE)&&(0,A.jsxs)("div",{style:{padding:"10px 12px",borderRadius:10,border:"1px solid ".concat(g.colors.borderLight),background:g.colors.surface},children:[(0,A.jsx)("div",{style:{marginBottom:6,fontSize:g.typography.fontSize.sm,color:g.colors.textSecondary},children:"Displacement along normal"}),(0,A.jsx)(y.Z.Number,{value:M,setValue:function(e){!function(e){H||E(),O(e),V(!0)}(e),n(S,e,N)}})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"10px 12px",borderRadius:10,border:"1px solid ".concat(g.colors.borderLight),background:g.colors.surface},children:[(0,A.jsx)(k.S.Component,{color:D,setColorHelper:function(e){r(e),Z(e)}}),(0,A.jsx)(w.f.Component,(0,p.Z)((0,p.Z)({},U),{},{setFont:function(e){z(e),o(e)}}))]})]})}}(J||(J={}));var te=2*Math.PI;function ne(e,t,n,r,o){var a,i=e.angleTraversal/(n-t),c=e.beginningAngle+i,u=new Array,d=(0,s.Z)(r);try{for(d.s();!(a=d.n()).done;){var f=a.value;u.push({angle:c,singularNucleotideProps:f});var p=(0,b.add)(e.boundingCircle.center,(0,b.toCartesian)({angle:c,radius:e.boundingCircle.radius}));f.x=p.x,f.y=p.y,c+=i}}catch(_){d.e(_)}finally{d.f()}if(o){var h,m=(0,s.Z)(u);try{for(m.s();!(h=m.n()).done;){var v=h.value,x=v.singularNucleotideProps,g=v.angle,y=(0,b.toNormalCartesian)(g),N=[];void 0!==x.labelContentProps&&N.push(x.labelContentProps),void 0!==x.labelLineProps&&(x.labelLineProps.points=(0,l.Z)(x.labelLineProps.points),N.push.apply(N,(0,l.Z)(x.labelLineProps.points)));for(var E=0,C=N;E<C.length;E++){var I=C[E],S=(0,b.scaleUp)(y,(0,b.magnitude)(I));I.x=S.x,I.y=S.y}}}catch(_){m.e(_)}finally{m.f()}}}function re(e,t,n,r){var o=(0,b.subtract)(t,e),a=(0,b.subtract)(n,e),i=(0,b.asAngle)(o),l=((0,b.asAngle)(a)-i+te)%te;return r(l)&&(l=function(e){return e<0?e+te:e-te}(l)),{beginningAngle:i,angleTraversal:l}}var oe,ae=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,c,u,f,m){var v,x,g=u.truncateRnaSingleStrandFlag,y=u.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(x=t.call(this,e,r,o,i,c,f,m)).dragListener=void 0,x.partialMenuHeader=void 0,x.getDisplacementAlongNormal=void 0,x.getOrientation=void 0,x.updateSingleStrandPositions=void 0,x.updateSingleStrandColors=void 0,x.updateSingleStrandFonts=void 0,x.formattedLowerBoundingNucleotideIndex=void 0,x.formattedUpperBoundingNucleotideIndex=void 0,x.lowerBoundingNucleotideIndex=void 0,x.upperBoundingNucleotideIndex=void 0,x.nucleotideCount=void 0;var E=x.fullKeys0,I=E.rnaComplexIndex,S=E.rnaMoleculeName,_=E.nucleotideIndex,T=new Set;if(I in c){var P=c[I];S in P&&(T=P[S])}var R=x.rnaComplexProps[I],k=null!==(v=R.basePairs[S])&&void 0!==v?v:{};if(_ in k)throw D;var w,M=R.rnaMoleculeProps[S],O=new Array,j=[],L=(0,a.Z)({},I,(0,a.Z)({},S,j)),Z=[],F=(0,a.Z)({},I,Z),B=_;x.addFullIndices({rnaComplexIndex:I,rnaMoleculeName:S,nucleotideIndex:_});for(var z={x:0,y:0},W=function(){var e=B-1;if(B=e,!(e in M.nucleotideProps))return z=structuredClone(M.nucleotideProps[e+1]),w=!1,"break";var t=M.nucleotideProps[e];if(e in k&&k[e].some((function(t){var n,r=t.rnaMoleculeName,o=t.nucleotideIndex,a=null!==(n=t.basePairType)&&void 0!==n?n:(0,C.getBasePairType)(M.nucleotideProps[e].symbol,R.rnaMoleculeProps[r].nucleotideProps[o].symbol);return C.default.isEnabledBasePair(a,y)}))||g&&T.has(_)!==T.has(e))return z=t,w=!0,"break";j.unshift(e),x.addFullIndices({rnaComplexIndex:I,rnaMoleculeName:S,nucleotideIndex:e}),O.unshift(t)};;){if("break"===W())break}var G=O.length;j.push(_),O.push(M.nucleotideProps[_]);for(var H,K=_,V={x:0,y:0},X=function(){var e=K+1;if(K=e,!(e in M.nucleotideProps))return V=structuredClone(M.nucleotideProps[e-1]),H=!1,"break";var t=M.nucleotideProps[e];if(e in k&&k[e].some((function(t){var n,r=t.rnaMoleculeName,o=t.nucleotideIndex,a=null!==(n=t.basePairType)&&void 0!==n?n:(0,C.getBasePairType)(M.nucleotideProps[e].symbol,R.rnaMoleculeProps[r].nucleotideProps[o].symbol);return C.default.isEnabledBasePair(a,y)}))||g&&T.has(_)!==T.has(e))return V=t,H=!0,"break";j.push(e),x.addFullIndices({rnaComplexIndex:I,rnaMoleculeName:S,nucleotideIndex:e}),O.push(t)};;){if("break"===X())break}for(var Y=B;Y<=K;Y++)if(Y in k){var Q,$=k[Y],ee=(0,s.Z)($);try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;Z.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:S,nucleotideIndex:Y},te))}}catch(de){ee.e(de)}finally{ee.f()}}function oe(){r(structuredClone(L)),o(structuredClone(F))}Z.sort(d.compareBasePairKeys);var ae=O[G],ie={x:ae.x,y:ae.y};if(T.has(_))x.dragListener={initiateDrag:function(){return{x:0,y:0}},continueDrag:function(){}},K=_-1,B=_+1;else if(w!==H){var le;w?le=z:(O.reverse(),G=O.length-G-1,le=V),x.dragListener=function(e,t,n,r,o){var a=1/(n+1),i=t.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var n=(0,b.subtract)(e,r),l=(0,b.scaleUp)(n,a),s=r,c=0;c<i;c++){var u=t[c];u.x=s.x,u.y=s.y,s=(0,b.add)(s,l),u.x=s.x,u.y=s.y}o()}}}(ie,O,G,le,oe)}else x.dragListener=w?{initiateDrag:function(){return ie},continueDrag:function(e,t){var n=function(e,t,n,r){var o=(0,q.Yq)(e,t,n);return(0,p.Z)((0,p.Z)({},re(o.center,t,n,r)),{},{boundingCircle:o})}(e,z,V,(function(){return function(e,t,n){return(0,N.sign)((0,b.crossProduct)((0,b.subtract)(e,t),(0,b.subtract)(n,t)))<0}(e,z,V)}));ne(n,B,K,O,t),oe()}}:U(ie,O,oe);x.partialMenuHeader=(0,A.jsx)(A.Fragment,{});var se=(0,b.subtract)(V,z),ce=(0,b.scaleUp)((0,b.add)(V,z),.5),ue=(0,b.normalize)((0,b.orthogonalizeRight)(se));return x.getDisplacementAlongNormal=function(){for(var e={x:0,y:0},t=0,n=O;t<n.length;t++){var r=n[t],o=(0,q.Yq)(r,z,V);e=(0,b.add)(e,o.center)}var a=(0,b.scaleDown)(e,O.length);return(0,b.dotProduct)((0,b.subtract)(a,ce),ue)},x.getOrientation=function(){switch((0,N.sign)((0,b.crossProduct)((0,b.subtract)(O[0],ce),se))){case 0:return J.Orientation.STRAIGHT;case-1:return J.Orientation.CLOCKWISE;case 1:return J.Orientation.COUNTERCLOCKWISE}},x.lowerBoundingNucleotideIndex=B,x.upperBoundingNucleotideIndex=K,x.updateSingleStrandPositions=function(e,t,n){function r(e){var r=(0,b.add)(ce,(0,b.scaleUp)(ue,t)),o=(0,b.distance)(r,z);ne((0,p.Z)((0,p.Z)({},re(r,z,V,(function(t){return t<0!==e}))),{},{boundingCircle:{center:r,radius:o}}),B,K,O,n),oe()}switch(e){case J.Orientation.CLOCKWISE:r(!0);break;case J.Orientation.COUNTERCLOCKWISE:r(!1);break;case J.Orientation.STRAIGHT:for(var o=(0,b.scaleDown)((0,b.subtract)(V,z),O.length+1),a=(0,b.add)(z,o),i=B+1;i<K;i++){var l=M.nucleotideProps[i];l.x=a.x,l.y=a.y,a=(0,b.add)(a,o)}oe();break;default:throw"Unrecognized orientation value."}},x.updateSingleStrandColors=function(e){for(var t=B+1;t<K;t++){M.nucleotideProps[t].color=e}oe()},x.updateSingleStrandFonts=function(e){for(var t=B+1;t<K;t++){M.nucleotideProps[t].font=e}oe()},x.formattedLowerBoundingNucleotideIndex=B+M.firstNucleotideIndex,x.formattedUpperBoundingNucleotideIndex=K+M.firstNucleotideIndex,x.nucleotideCount=O.length,x}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=t.nucleotideIndex,l=this.formattedLowerBoundingNucleotideIndex,s=this.formattedUpperBoundingNucleotideIndex,c=this.rnaComplexProps[n],d=c.rnaMoleculeProps[o],f=i+d.firstNucleotideIndex;switch(e){case u.OK.EDIT:for(var p,h,m=!0,v=!0,x=d.nucleotideProps[this.lowerBoundingNucleotideIndex+1],y=null!==(p=x.color)&&void 0!==p?p:I.BLACK,b=null!==(h=x.font)&&void 0!==h?h:S.default.DEFAULT,N=this.lowerBoundingNucleotideIndex+1;N<this.upperBoundingNucleotideIndex;N++){var E,C,_=d.nucleotideProps[N];(0,I.areEqual)(null!==(E=_.color)&&void 0!==E?E:I.BLACK,y)||(m=!1),S.default.areEqual(null!==(C=_.font)&&void 0!==C?C:S.default.DEFAULT,b)||(v=!1)}return(0,A.jsx)(J.Component,{initialColor:m?y:I.BLACK,initialFont:v?b:S.default.DEFAULT,updateSingleStrandPositions:this.updateSingleStrandPositions,updateSingleStrandColors:this.updateSingleStrandColors,updateSingleStrandFonts:this.updateSingleStrandFonts,getDisplacementAlongNormal:this.getDisplacementAlongNormal,getOrientation:this.getOrientation,nucleotideCount:this.nucleotideCount,formattedLowerBoundingNucleotideIndex:l,formattedUpperBoundingNucleotideIndex:s,rnaMoleculeName:o,rnaComplexName:c.name});case u.OK.FORMAT:return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," single-stranded region:"]}),(0,A.jsx)("br",{}),this.nucleotideCount," nucleotides in the range (",l,", ",s,")",(0,A.jsx)("br",{}),'In RNA molecule "',o,'"',(0,A.jsx)("br",{}),'In RNA complex "',c.name,'"',(0,A.jsx)("br",{}),(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:n,rnaMoleculeName0:o,nucleotideIndex0:f}],approveBasePairs:function(e){for(var t=0;t<e.length;t++){var r=e[t],a="This constraint expects base pairs to include the clicked-on single-stranded nucleotide region. The helix on line ".concat(t+1," does not.");if(n!==r.rnaComplexIndex)throw a;var i=o===r.rnaMoleculeName0,c=o===r.rnaMoleculeName1;if(i&&c){if((s-1<r.nucleotideIndex0||l+1>=r.nucleotideIndex0+r.length)&&(s-1<=r.nucleotideIndex1-r.length||l+1>r.nucleotideIndex1))throw a}else if(i){if(s-1<r.nucleotideIndex0||l+1>=r.nucleotideIndex0+r.length)throw a}else{if(!c)throw a;if(s-1<=r.nucleotideIndex1-r.length||l+1>r.nucleotideIndex1)throw a}}},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o})]});case u.OK.ANNOTATE:return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," single-stranded region:"]}),(0,A.jsx)("br",{}),this.nucleotideCount," nucleotides in the range (",l,", ",s,")",(0,A.jsx)("br",{}),'In RNA molecule "',o,'"',(0,A.jsx)("br",{}),'In RNA complex "',c.name,'"',(0,A.jsx)("br",{}),(0,A.jsx)(r.Component,{regions:(0,a.Z)({},n,(0,a.Z)({},o,[{minimumNucleotideIndexInclusive:l-d.firstNucleotideIndex+1,maximumNucleotideIndexInclusive:s-d.firstNucleotideIndex-1}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw{errorMessage:"Unhandled switch case."}}}},{key:"getHelices",value:function(){return[]}}]),n}(B),ie=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,c,u,f,p,m){var v,x,g,y,E=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(y=t.call(this,e,r,o,i,u,p,m)).dragListener=void 0,y.partialHeader=void 0,y.editMenuProps=void 0,y.initialBasePairs=void 0,y.rnaMoleculeName0=void 0,y.rnaMoleculeName1=void 0,y.helices=void 0;var I=e[p.rnaComplexIndex],S=I.basePairs,_=S[p.rnaMoleculeName];if(!(p.nucleotideIndex in _))throw Z;var T,P=_[p.nucleotideIndex].filter((function(e){var t;return C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(I.rnaMoleculeProps[p.rnaMoleculeName].nucleotideProps[p.nucleotideIndex].symbol,I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),E)}));if(0===P.length)throw Z;if(P.length>1){if(void 0===m)throw F;T=P.find((function(e){return e.rnaMoleculeName===m.rnaMoleculeName&&e.nucleotideIndex===m.nucleotideIndex}))}else T=P[0];y.rnaMoleculeName0=p.rnaMoleculeName,y.rnaMoleculeName1=T.rnaMoleculeName;for(var R=(v={},(0,a.Z)(v,y.rnaMoleculeName0,new Set),(0,a.Z)(v,y.rnaMoleculeName1,new Set),v),k=[p,T],w=[],M=function(){var e;if(k.length>0)e=k.shift();else if(e=w.shift(),!R[e.rnaMoleculeName].has(e.nucleotideIndex-1)&&!R[e.rnaMoleculeName].has(e.nucleotideIndex+1))return"continue";var t=e,n=t.rnaMoleculeName,r=t.nucleotideIndex;if(R[n].has(r))return"continue";R[n].add(r);for(var o=function(){var e=i[a];if(!(e.nucleotideIndex in I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps))return"continue";var t=[];if(e.nucleotideIndex in I.basePairs[e.rnaMoleculeName]&&(t=I.basePairs[e.rnaMoleculeName][e.nucleotideIndex]).filter((function(t){var n;return C.default.isEnabledBasePair(null!==(n=t.basePairType)&&void 0!==n?n:(0,C.getBasePairType)(I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol,I.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),E)})).length>0){var n=t.filter((function(e){return e.rnaMoleculeName===y.rnaMoleculeName0||e.rnaMoleculeName===y.rnaMoleculeName1})),r=function(e){return R[e.rnaMoleculeName].has(e.nucleotideIndex-1)||R[e.rnaMoleculeName].has(e.nucleotideIndex+1)};k.push.apply(k,(0,l.Z)(n.filter(r))),w.push.apply(w,(0,l.Z)(n.filter((function(e){return!r(e)}))))}else k.push(e)},a=0,i=[{rnaMoleculeName:n,nucleotideIndex:r-1},{rnaMoleculeName:n,nucleotideIndex:r+1}];a<i.length;a++)o();r in S[n]&&w.push.apply(w,(0,l.Z)(S[n][r].filter((function(e){var t;return(e.rnaMoleculeName===y.rnaMoleculeName0||e.rnaMoleculeName===y.rnaMoleculeName1)&&C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(I.rnaMoleculeProps[n].nucleotideProps[r].symbol,I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),E)}))))};k.length>0||w.length>0;)M();for(var O=new Array,j=(0,a.Z)({},p.rnaComplexIndex,(x={},(0,a.Z)(x,y.rnaMoleculeName0,[]),(0,a.Z)(x,y.rnaMoleculeName1,[]),x)),L=j[p.rnaComplexIndex],D=L[y.rnaMoleculeName0],B=L[y.rnaMoleculeName1],z=(0,a.Z)({},p.rnaComplexIndex,[]),W=z[p.rnaComplexIndex],G=[],H={},K={},V=function(){var e,t,n=X[q],r=Array.from(R[n]);function o(e){var t=r[e];return t in I.basePairs[n]&&I.basePairs[n][t].some((function(e){var r;return C.default.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:(0,C.getBasePairType)(I.rnaMoleculeProps[n].nucleotideProps[t].symbol,I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),E)}))}for(r.sort(N.subtractNumbers);!o(0);)r.shift();for(;!o(r.length-1);)r.pop();for(var a=0;a<r.length-1;){if(o(a))a++;else r[a]!==r[a+1]-1?(r.splice(a,1),a--):a++}for(var i=r.length-1;i>0;){if(o(i))i--;else r[i]!==r[i-1]+1?(r.splice(i,1),i++):i--}(e=G).push.apply(e,(0,l.Z)(r.filter((function(e){if(!(p.rnaComplexIndex in u))return!0;var t=u[p.rnaComplexIndex];return!(n in t)||!t[n].has(e)})).map((function(e){return I.rnaMoleculeProps[n].nucleotideProps[e]})))),(t=L[n]).push.apply(t,r);for(var c=S[n],f=0,h=r;f<h.length;f++){var m=h[f];if(m in c){var v,x=c[m],g=(0,s.Z)(x);try{for(g.s();!(v=g.n()).done;){var y=v.value;W.push((0,d.selectRelevantBasePairKeys)({rnaMoleculeName:n,nucleotideIndex:m},y))}}catch(A){g.e(A)}finally{g.f()}}}K[n]=r;var b=Math.min.apply(Math,r),_=Math.max.apply(Math,r);H[n]=[b,_]},q=0,X=[y.rnaMoleculeName0,y.rnaMoleculeName1];q<X.length;q++)V();var Y=(0,d.selectRelevantBasePairKeys)({rnaMoleculeName:y.rnaMoleculeName0,nucleotideIndex:H[y.rnaMoleculeName0][0]},{rnaMoleculeName:y.rnaMoleculeName1,nucleotideIndex:H[y.rnaMoleculeName1][0]}),Q=I.rnaMoleculeProps[Y.rnaMoleculeName].nucleotideProps[Y.nucleotideIndex],$=S[Y.rnaMoleculeName][Y.nucleotideIndex].filter((function(e){var t;return(e.rnaMoleculeName===y.rnaMoleculeName0||e.rnaMoleculeName===y.rnaMoleculeName1)&&K[e.rnaMoleculeName].includes(e.nucleotideIndex)&&C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(I.rnaMoleculeProps[Y.rnaMoleculeName].nucleotideProps[Y.nucleotideIndex].symbol,I.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),E)})),J=$.sort(d.compareBasePairKeys)[$.length-1],ee=I.rnaMoleculeProps[J.rnaMoleculeName].nucleotideProps[J.nucleotideIndex],te=(0,b.orthogonalizeLeft)((0,b.subtract)(ee,Q));function ne(){r(structuredClone(j)),o(structuredClone(z))}y.editMenuProps={boundingVector0:Q,boundingVector1:ee,positions:G,onUpdatePositions:ne,initialAngle:(0,b.asAngle)(te)},D.sort(N.subtractNumbers),B.sort(N.subtractNumbers),W.sort(d.compareBasePairKeys),G=G.filter((function(e){return!O.includes(e)})),y.dragListener=U(structuredClone(e[p.rnaComplexIndex].rnaMoleculeProps[p.rnaMoleculeName].nucleotideProps[p.nucleotideIndex]),G,ne);var re=I.rnaMoleculeProps[y.rnaMoleculeName0],oe=I.rnaMoleculeProps[y.rnaMoleculeName1],ae=ge(I,y.rnaMoleculeName0,E),ie=y.rnaMoleculeName0,le=y.rnaMoleculeName1,se=ae.helixData.filter((function(e){return e.rnaMoleculeName1===y.rnaMoleculeName1&&K[y.rnaMoleculeName0].includes(e.start[0])&&K[y.rnaMoleculeName1].includes(e.start[1])&&K[y.rnaMoleculeName0].includes(e.stop[0])&&K[y.rnaMoleculeName1].includes(e.stop[1])}));function ce(e){var t=I.basePairs[ie];if(!(e in t))throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";var n=t[e].filter((function(t){var n;return C.default.isEnabledBasePair(null!==(n=t.basePairType)&&void 0!==n?n:(0,C.getBasePairType)(I.rnaMoleculeProps[ie].nucleotideProps[e].symbol,I.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),E)&&t.rnaMoleculeName===le&&K[le].includes(t.nucleotideIndex)}));if(0===n.length)throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";return n[0].nucleotideIndex}y.initialBasePairs=se.map((function(e){return{rnaComplexIndex:p.rnaComplexIndex,rnaMoleculeName0:ie,rnaMoleculeName1:le,nucleotideIndex0:e.start[0]+re.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+oe.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));var ue,de=H[y.rnaMoleculeName0][0],fe=null!==(g=K[y.rnaMoleculeName0].find((function(e,t){return e!==K[y.rnaMoleculeName0][t+1]-1})))&&void 0!==g?g:K[y.rnaMoleculeName0][K[y.rnaMoleculeName0].length-1],pe="Nucleotides [".concat(de+re.firstNucleotideIndex,", ").concat(fe+re.firstNucleotideIndex,"]"),he="Nucleotides [".concat(ce(de)+oe.firstNucleotideIndex,", ").concat(ce(fe)+oe.firstNucleotideIndex,"]");return ue=y.rnaMoleculeName0===y.rnaMoleculeName1?(0,A.jsxs)(A.Fragment,{children:[pe,(0,A.jsx)("br",{}),"Bound to",(0,A.jsx)("br",{}),he,(0,A.jsx)("br",{}),'In RNA molecule "',y.rnaMoleculeName0,'"']}):(0,A.jsxs)(A.Fragment,{children:[pe,(0,A.jsx)("br",{}),'In RNA molecule "',y.rnaMoleculeName0,'"',(0,A.jsx)("br",{}),he,(0,A.jsx)("br",{}),'In RNA molecule "',y.rnaMoleculeName1,'"']}),y.partialHeader=(0,A.jsxs)(A.Fragment,{children:[ue,(0,A.jsx)("br",{}),'In RNA complex "',I.name,'"',(0,A.jsx)("br",{})]}),y.addFullIndicesPerNucleotideKeysToRerender(j),y.helices=se.map((function(e){var t=e.rnaMoleculeName1,n=e.start,r=e.stop;return{rnaComplexIndex:p.rnaComplexIndex,rnaMoleculeName0:ae.rnaMoleculeName0,rnaMoleculeName1:t,start:n,stop:r}})),y}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=this.rnaMoleculeName0,l=this.rnaMoleculeName1,c=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," stacked helices:"]}),(0,A.jsx)("br",{}),this.partialHeader]});switch(e){case u.OK.EDIT:return(0,A.jsx)(M.Simplified,(0,p.Z)((0,p.Z)({},this.editMenuProps),{},{headerContent:c}));case u.OK.FORMAT:return(0,A.jsxs)(A.Fragment,{children:[c,(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){var t,n=(0,s.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if((i!==r.rnaMoleculeName0||l!==r.rnaMoleculeName1)&&(l!==r.rnaMoleculeName0||i!==r.rnaMoleculeName1)){throw i===l?'This constraint exclusively expects base-pairs between RNA molecule "'.concat(i,'" and RNA molecule "').concat(l,'".'):'This constraint exclusivley expects base-pairs within RNA molecule "'.concat(i,'"')}}}catch(o){n.e(o)}finally{n.f()}},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o})]});case u.OK.ANNOTATE:var d,f,h=(0,a.Z)({},n,(d={},(0,a.Z)(d,i,[]),(0,a.Z)(d,l,[]),d)),m=h[n],v=m[i],x=m[l],y=this.rnaComplexProps[n],b=y.rnaMoleculeProps[i],E=y.rnaMoleculeProps[l],C=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,T=n in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[n]:{},P=i in T?T[i]:new Set,R=l in T?T[l]:new Set,k=(0,s.Z)(this.initialBasePairs);try{for(k.s();!(f=k.n()).done;){var w=f.value,O=w.nucleotideIndex0,j=w.nucleotideIndex1,L=w.length,D=O-b.firstNucleotideIndex,Z=D+L-1;D<C&&(C=D),Z>I&&(I=Z);var F=j-E.firstNucleotideIndex,B=F-L+1;B<S&&(S=B),F>_&&(_=F)}}catch(U){k.e(U)}finally{k.f()}return i===l?(I=Math.max(I,_),C=Math.min(C,S),r.populateRegions(P,(0,N.range)(I+1,C),v)):(r.populateRegions(P,(0,N.range)(I+1,C),v),r.populateRegions(R,(0,N.range)(_+1,S),x)),(0,A.jsxs)(A.Fragment,{children:[c,(0,A.jsx)(r.Component,{regions:h,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw"Unhandled switch case"}}},{key:"getHelices",value:function(){return this.helices}}]),n}(B),le=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,c,u,f,p){var m,v=u.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,c,f,p)).dragListener=void 0,m.partialMenuHeader=void 0,m.editMenuProps=void 0,m.initialBasePairs=void 0,m.minimumNucleotideIndex=void 0,m.maximumNucleotideIndex=void 0,m.helices=void 0;var x=f.rnaComplexIndex,g=f.rnaMoleculeName,y=f.nucleotideIndex,E=g,I=y,S=m.rnaComplexProps[x],_=S.rnaMoleculeProps[E],T=_.nucleotideProps[y],P=S.basePairs;if(!C.default.isNucleotideBasePaired(T.symbol,S,P,E,I,v))throw Z;var R,k=P[E],w=k[y];if(1===w.length)R=w[0];else{if(void 0===p)throw F;R=w.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return p.rnaMoleculeName===t&&p.nucleotideIndex===n}))}var M=R.rnaMoleculeName;if(E!==M)throw{errorMessage:"Cannot interact with a base pair between two distinct rna molecules using this constraint."};var O=R.nucleotideIndex,j=new Array,L=(0,a.Z)({},x,(0,a.Z)({},E,[])),D=L[x][E],B=[],z=(0,a.Z)({},x,B),W=[];var G=Ne(S,E,I,M,O,j,v,B,(function(e){W.push(e.nucleotideIndex)})),H=G.stop,K=G.start;W.sort(N.subtractNumbers),m.minimumNucleotideIndex=Math.min(K[0],K[1],H[0],H[1]),m.maximumNucleotideIndex=Math.max(K[0],K[1],H[0],H[1]);for(var V=m.minimumNucleotideIndex;V<=m.maximumNucleotideIndex;V++)if(j.push(_.nucleotideProps[V]),D.push(V),V in k){var q,X={rnaMoleculeName:g,nucleotideIndex:V},Y=k[V],Q=(0,s.Z)(Y);try{for(Q.s();!(q=Q.n()).done;){var $=q.value;B.push((0,d.selectRelevantBasePairKeys)(X,$))}}catch(pe){Q.e(pe)}finally{Q.f()}}function J(){r(structuredClone(L)),o(structuredClone(z))}D.sort(N.subtractNumbers),B.sort(d.compareBasePairKeys);var ee=new Array;if(x in c){var te=c[x];if(E in te)for(var ne=te[g],re=0,oe=Array.from(ne);re<oe.length;re++){var ae=oe[re];ee.push(_.nucleotideProps[ae])}}j=j.filter((function(e){return!ee.includes(e)})),m.dragListener=U(structuredClone(T),j,J);var ie=W[0],le=W[W.length-1],se=_.nucleotideProps[ie],ce=_.nucleotideProps[le];m.partialMenuHeader=(0,A.jsxs)(A.Fragment,{children:["Nucleotides bound by",(0,A.jsx)("br",{}),"#",ie+_.firstNucleotideIndex," (",se.symbol,")",(0,A.jsx)("br",{}),"and",(0,A.jsx)("br",{}),"#",le+_.firstNucleotideIndex," (",ce.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',g,'"',(0,A.jsx)("br",{}),'In RNA complex "',S.name,'"',(0,A.jsx)("br",{})]});var ue=(0,b.orthogonalizeLeft)((0,b.subtract)(ce,se));m.editMenuProps={boundingVector0:se,boundingVector1:ce,positions:j,onUpdatePositions:J,initialAngle:(0,b.asAngle)(ue)};var de=ye(S,g,m.minimumNucleotideIndex,m.maximumNucleotideIndex,v);m.helices=de.helixData.map((function(e){var t=e.start,n=e.stop;return{rnaComplexIndex:x,rnaMoleculeName0:g,rnaMoleculeName1:g,start:t,stop:n}}));var fe=de.helixData.map((function(e){return{rnaComplexIndex:x,rnaMoleculeName0:g,rnaMoleculeName1:g,nucleotideIndex0:e.start[0]+_.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+_.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));return m.addFullIndicesPerNucleotideKeysToRerender(L),m.initialBasePairs=fe,m}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=this.rnaComplexProps[o].rnaMoleculeProps[i],s=this.minimumNucleotideIndex+l.firstNucleotideIndex,c=this.maximumNucleotideIndex+l.firstNucleotideIndex;switch(e){case u.OK.EDIT:t=(0,A.jsx)(M.Simplified,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){for(var t=0;t<e.length;t++){var n="This constraint expects base-pairs to exist strictly within the clicked-on subdomain.",r=e[t];if(r.rnaComplexIndex!==o)throw n;if(r.rnaMoleculeName0!==i||r.rnaMoleculeName1!==i)throw n;for(var a=0,l=[r.nucleotideIndex0,r.nucleotideIndex0+r.length-1,r.nucleotideIndex1,r.nucleotideIndex1-r.length+1];a<l.length;a++){var u=l[a];if(u<s||u>c)throw n}}},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case u.OK.ANNOTATE:var d=o in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[o]:{},f=i in d?d[i]:new Set,h=[];r.populateRegions(f,(0,N.range)(this.maximumNucleotideIndex+1,this.minimumNucleotideIndex),h),t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,h)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," RNA subdomain:"]}),(0,A.jsx)("br",{}),this.partialMenuHeader,t]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(B);(oe||(oe={})).Component=function(e){var t=e.initialColor,n=e.initialFont,r=e.onUpdatePositions,o=e.boundingNucleotides,a=e.allNucleotides,l=e.headerContent,s=(0,c.useContext)(f._.App.InteractionConstraintOptions).affectHairpinNucleotidesFlag,u=(0,c.useState)(null!==t&&void 0!==t?t:I.BLACK),d=(0,i.Z)(u,2),p=(d[0],d[1]),h=(0,c.useState)(null!==n&&void 0!==n?n:S.default.DEFAULT),m=(0,i.Z)(h,2),v=m[0],x=m[1];return(0,c.useMemo)((function(){return s?a:o}),[s]),(0,c.useEffect)((function(){p(t)}),[t]),(0,c.useEffect)((function(){x(v)}),[n]),(0,A.jsxs)(A.Fragment,{children:["Base-pair type: ",e.basePairType.toLocaleLowerCase(),(0,A.jsx)("br",{}),(0,A.jsx)(M.Simplified,{positions:a,onUpdatePositions:r,boundingVector0:o[0],boundingVector1:o[1],headerContent:l})]})};var se=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,l,c,u,f,m,v){var x,g,y,N,E,_,T=f.affectHairpinNucleotidesFlag,P=f.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(_=t.call(this,e,r,o,l,u,m,v)).dragListener=void 0,_.editMenuProps=void 0,_.partialHeader=void 0,_.initialBasePairs=void 0,_.basePairedKeys=void 0,_.nucleotideIndices=void 0,_.frozenFlag0=!1,_.frozenFlag1=!1,_.hairpinLoopFlag=!1,_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=void 0,_.helices=void 0;var R=_.fullKeys0,k=R.rnaComplexIndex,w=R.rnaMoleculeName,M=R.nucleotideIndex,O={},j=(0,a.Z)({},k,[]),L=_.rnaComplexProps[k],D=L.basePairs;if(!C.default.isNucleotideBasePaired(L.rnaMoleculeProps[w].nucleotideProps[M].symbol,L,D,w,M,P))throw Z;var B,z={rnaMoleculeName:w,nucleotideIndex:M},W=D[w][M];if(1===W.length)B=W[0];else{var G;if(void 0===v)throw F;if(B=W.find((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return v.rnaMoleculeName===t&&v.nucleotideIndex===n})),!C.default.isEnabledBasePair(null!==(G=B.basePairType)&&void 0!==G?G:(0,C.getBasePairType)(L.rnaMoleculeProps[w].nucleotideProps[M].symbol,L.rnaMoleculeProps[B.rnaMoleculeName].nucleotideProps[B.nucleotideIndex].symbol),P))throw Z}for(var H=L.rnaMoleculeProps[w],K=H.nucleotideProps[M],V=L.rnaMoleculeProps[B.rnaMoleculeName],q=V.nucleotideProps[B.nucleotideIndex],X=D[B.rnaMoleculeName][B.nucleotideIndex],Y=j[k],Q=0,$=[{keys0:z,basePairsPerNucleotide:W},{keys0:B,basePairsPerNucleotide:X}];Q<$.length;Q++){var J,ee=$[Q],te=ee.keys0,ne=ee.basePairsPerNucleotide,re=(0,s.Z)(ne);try{for(re.s();!(J=re.n()).done;){var oe=J.value,ae=(0,d.selectRelevantBasePairKeys)(te,oe);Y.push(ae)}}catch(Fe){re.e(Fe)}finally{re.f()}}Y.sort(d.compareBasePairKeys);var ie=[z,B].sort(d.compareBasePairKeys),le=(0,i.Z)(ie,2),se=le[0],ce=le[1],ue={x:K.x,y:K.y},de=M,fe=B.nucleotideIndex,pe=w,he=B.rnaMoleculeName;if(_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=new Set,k in u){var me=u[k];if(pe in me&&(_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=me[pe],_.frozenFlag0=_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(de)),he in me){var ve=me[he];_.frozenFlag1=ve.has(fe)}}var xe=[];_.frozenFlag0||xe.push(K),_.frozenFlag1||xe.push(q),_.nucleotideIndices={rnaMoleculeName0:pe,nucleotideIndex0:de,rnaMoleculeName1:he,nucleotideIndex1:fe};var ge=D[pe];if(pe===he){var ye,be=[];O[k]=(0,a.Z)({},w,be),be.push(se.nucleotideIndex),_.hairpinLoopFlag=!0;for(var Ne=[],Ee=se.nucleotideIndex+1;Ee<ce.nucleotideIndex;Ee++){if(Ee in ge){_.hairpinLoopFlag=!1;break}Ne.push({index:Ee,props:H.nucleotideProps[Ee]})}if((ye=_).hairpinLoopFlag&&(ye.hairpinLoopFlag=T),_.hairpinLoopFlag){var Ce,Ie=(0,s.Z)(Ne);try{for(Ie.s();!(Ce=Ie.n()).done;){var Se=Ce.value,_e=Se.index,Ae=Se.props;_.addFullIndices({rnaComplexIndex:k,rnaMoleculeName:w,nucleotideIndex:_e}),_.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(_e)||(be.push(_e),xe.push(Ae))}}catch(Fe){Ie.e(Fe)}finally{Ie.f()}}be.push(ce.nucleotideIndex)}function Te(){r(structuredClone(O)),o(structuredClone(j))}var Pe,Re,ke,we,Me=[K,q];(_.dragListener=U(ue,T?xe:[K,q],Te),_.partialHeader=(0,A.jsxs)(A.Fragment,{children:["Nucleotide #",M+V.firstNucleotideIndex," (",K.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',w,'"',(0,A.jsx)("br",{}),"Base-paired to:",(0,A.jsx)("br",{}),"Nucleotide #",B.nucleotideIndex+V.firstNucleotideIndex," (",q.symbol,")",(0,A.jsx)("br",{}),'In RNA molecule "',B.rnaMoleculeName,'"',(0,A.jsx)("br",{}),'In RNA complex "',L.name,'"',(0,A.jsx)("br",{})]}),pe===he)?(de<fe?(ke=de,we=fe):(ke=fe,we=de),Pe=H.nucleotideProps[ke],Re=H.nucleotideProps[we]):(Pe=K,Re=q);var Oe=null!==(x=B.basePairType)&&void 0!==x?x:(0,C.getBasePairType)(K.symbol,q.symbol),je=null!==(g=K.color)&&void 0!==g?g:I.BLACK,Le=null!==(y=q.color)&&void 0!==y?y:I.BLACK,De=null!==(N=K.font)&&void 0!==N?N:S.default.DEFAULT,Ze=null!==(E=q.font)&&void 0!==E?E:S.default.DEFAULT;return _.editMenuProps={boundingVector0:Pe,boundingVector1:Re,positions:xe,onUpdatePositions:Te,orthogonalizeHelper:b.orthogonalizeLeft,basePairType:Oe,initialColor:(0,I.areEqual)(je,Le)?je:I.BLACK,initialFont:S.default.areEqual(De,Ze)?De:S.default.DEFAULT,boundingNucleotides:Me,allNucleotides:xe},_.initialBasePairs=[{rnaComplexIndex:k,rnaMoleculeName0:pe,rnaMoleculeName1:he,nucleotideIndex0:de+L.rnaMoleculeProps[pe].firstNucleotideIndex,nucleotideIndex1:fe+L.rnaMoleculeProps[he].firstNucleotideIndex,length:1,type:Oe}],_.basePairedKeys={rnaMoleculeName:he,nucleotideIndex:fe},_.addFullIndices(m,(0,p.Z)({rnaComplexIndex:k},B)),_.helices=[{rnaComplexIndex:k,rnaMoleculeName0:pe,rnaMoleculeName1:he,start:{0:de,1:fe},stop:{0:de,1:fe}}],_}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t=this.fullKeys0,n=t.rnaComplexIndex,o=t.rnaMoleculeName,i=(this.fullKeys0,this.basePairedKeys,this.nucleotideIndices),l=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," single base pair:"]}),(0,A.jsx)("br",{}),this.partialHeader]}),s=(0,A.jsx)(A.Fragment,{});switch(e){case u.OK.EDIT:return(0,A.jsx)(oe.Component,(0,p.Z)((0,p.Z)({},this.editMenuProps),{},{headerContent:l}));case u.OK.FORMAT:s=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){if(e.length>1)throw"This constraint expects at most one base pair.";if(1===e.length&&e[0].length>1)throw"This constraint expects at most one base pair."},defaultRnaComplexIndex:n,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o});break;case u.OK.ANNOTATE:var c,d={minimumNucleotideIndexInclusive:i.nucleotideIndex0,maximumNucleotideIndexInclusive:i.nucleotideIndex0},f={minimumNucleotideIndexInclusive:i.nucleotideIndex1,maximumNucleotideIndexInclusive:i.nucleotideIndex1};if(i.rnaMoleculeName0===i.rnaMoleculeName1){var h=[],m=Math.min(i.nucleotideIndex0,i.nucleotideIndex1),v=Math.max(i.nucleotideIndex0,i.nucleotideIndex1);this.hairpinLoopFlag?r.populateRegions(this.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0,(0,N.range)(v+1,m),h):(this.frozenFlag0||h.push(d),this.frozenFlag1||h.push(f)),c=(0,a.Z)({},n,(0,a.Z)({},i.rnaMoleculeName0,h))}else{var x={};this.frozenFlag0||(x[i.rnaMoleculeName0]=[d]),this.frozenFlag1||(x[i.rnaMoleculeName1]=[f]),c=(0,a.Z)({},n,x)}s=(0,A.jsx)(r.Component,{regions:c,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})}return(0,A.jsxs)(A.Fragment,{children:[l,s]})}},{key:"getHelices",value:function(){return this.helices}}]),n}(B),ce=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,a,i,c,u,d,f){var p,m,v=u.treatNoncanonicalBasePairsAsUnpairedFlag;(0,h.Z)(this,n),(m=t.call(this,e,r,o,a,c,d,f)).dragListener=void 0,m.editMenuProps=void 0,m.color=void 0,m.initialBasePairs=void 0,m.approveBasePair=void 0,m.fullKeysOfNucleotidesWithColor=void 0,m.helices=void 0;var x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,E=new Array,C={},S={},_=m.rnaComplexProps[g].rnaMoleculeProps[y].nucleotideProps[b],A=null!==(p=_.color)&&void 0!==p?p:I.BLACK;m.color=A,m.fullKeysOfNucleotidesWithColor=[];var T,P=Object.keys(m.rnaComplexProps).map(N.parseInteger),R=(0,s.Z)(P);try{for(R.s();!(T=R.n()).done;){var k=T.value,w=m.rnaComplexProps[k];C[k]={};var M=C[k];S[k]=[];for(var O=S[k],j=w.basePairs,L=Object.keys(w.rnaMoleculeProps),D=0,Z=L;D<Z.length;D++){var F=Z[D],B=w.rnaMoleculeProps[F];M[F]=[];var z,W=M[F],G=j[F],H=Object.keys(B.nucleotideProps).map(N.parseInteger),K=(0,s.Z)(H);try{for(K.s();!(z=K.n()).done;){var V,q=z.value,X=B.nucleotideProps[q],Y=null!==(V=X.color)&&void 0!==V?V:I.BLACK;if((0,I.areEqual)(A,Y)){var Q=!1;if(k in c){var $=c[k];if(F in $)$[F].has(q)&&(Q=!0)}m.fullKeysOfNucleotidesWithColor.push({rnaComplexIndex:k,rnaMoleculeName:F,nucleotideIndex:q}),W.push(q),Q||(E.push(X),q in G&&O.push({rnaMoleculeName:F,nucleotideIndex:q}))}}}catch(ae){K.e(ae)}finally{K.f()}}}}catch(ae){R.e(ae)}finally{R.f()}function J(){r(structuredClone(C)),o(structuredClone(S))}m.dragListener=U(structuredClone(_),E,J),m.editMenuProps={initialCenter:_,normal:{x:1,y:0},positions:E,onUpdatePositions:J};var ee=[],te=ve(e,v),ne=new Array;function re(t){for(var n=e[t.rnaComplexIndex],r=n.rnaMoleculeProps[t.rnaMoleculeName0],o=n.rnaMoleculeProps[t.rnaMoleculeName1],a=t.nucleotideIndex0-r.firstNucleotideIndex,i=t.nucleotideIndex1-o.firstNucleotideIndex,l=0;l<t.length;l++){var s,c,u=r.nucleotideProps[a+l],d=o.nucleotideProps[i-l];if(!(0,I.areEqual)(A,null!==(s=u.color)&&void 0!==s?s:I.BLACK))return!1;if(!(0,I.areEqual)(A,null!==(c=d.color)&&void 0!==c?c:I.BLACK))return!1}return!0}te.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0;r.rnaMoleculeProps[t];ne.push.apply(ne,(0,l.Z)(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=e.start,a=e.stop;return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:r,start:o,stop:a}}))))}))})),te.forEach((function(t){var n=t.rnaComplexIndex,r=e[n];t.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0,o=r.rnaMoleculeProps[t];ee.push.apply(ee,(0,l.Z)(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),m.approveBasePair=re;var oe=ee.filter(re);return m.initialBasePairs=oe,m.addFullIndicesPerNucleotideKeysToRerender(C),m.helices=ne.filter((function(t){for(var n=t.rnaComplexIndex,r=t.rnaMoleculeName0,o=t.rnaMoleculeName1,a=t.start,i=t.stop,l=e[n],s=l.rnaMoleculeProps[r],c=l.rnaMoleculeProps[o],u=Math.abs(i[0]-a[0])+1,d=0;d<u;d++){var f,p,h=s.nucleotideProps[a[0]+d],m=c.nucleotideProps[a[1]+d];return(0,I.areEqual)(A,null!==(f=h.color)&&void 0!==f?f:I.BLACK)&&(0,I.areEqual)(A,null!==(p=m.color)&&void 0!==p?p:I.BLACK)}return!1})),m}return(0,m.Z)(n,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var t,n,o=this.color;this.approveBasePair;switch(e){case u.OK.EDIT:n=(0,A.jsx)(M.Component,(0,p.Z)({},this.editMenuProps));break;case u.OK.FORMAT:n=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case u.OK.ANNOTATE:var a,i={},l=(0,s.Z)(this.fullKeysOfNucleotidesWithColor);try{for(l.s();!(a=l.n()).done;){var c=a.value,d=c.rnaComplexIndex,f=c.rnaMoleculeName,h=c.nucleotideIndex;d in i||(i[d]={});var m=i[d];f in m||(m[f]=[]);var v=m[f];if(v.length>0){var x=v[v.length-1];h===x.maximumNucleotideIndexInclusive+1?x.maximumNucleotideIndexInclusive=h:h===x.minimumNucleotideIndexInclusive-1?x.minimumNucleotideIndexInclusive=h:v.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}else v.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}}catch(y){l.e(y)}finally{l.f()}n=(0,A.jsx)(r.Component,{regions:i,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," all nucleotides of the same color:"]}),(0,A.jsx)("br",{}),"(red = ",o.red,", green = ",o.green,", blue = ",o.blue,", alpha = ",null!==(t=o.alpha)&&void 0!==t?t:I.DEFAULT_ALPHA,"):",(0,A.jsx)("br",{}),n]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var t=this;return e.filter((function(e){for(var n=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=t.rnaComplexProps[n],s=l.rnaMoleculeProps[r],c=l.rnaMoleculeProps[o],u=Math.abs(i[0]-a[0])+1,d=Math.sign(i[0]-a[0]),f=Math.sign(i[1]-a[1]),p=a[0],h=a[1],m=0;m<u;m++){var v,x,g=s.nucleotideProps[p],y=c.nucleotideProps[h],b=null!==(v=g.color)&&void 0!==v?v:I.BLACK,N=null!==(x=y.color)&&void 0!==x?x:I.BLACK;if((0,I.areEqual)(t.color,b)||(0,I.areEqual)(t.color,N))return!0;p+=d,h+=f}return!1}))}}]),n}(B);var ue,de=n(9287);(ue||(ue={})).Component=function(e){var t,n,r=e.rnaComplexProps,o=e.fullKeys,a=e.triggerRerender,l=(0,_.Fg)().theme,s=(0,c.useContext)(f._.OrientationEditor.ResetDataTrigger),u=(0,c.useMemo)((function(){var e=o.rnaComplexIndex,t=o.rnaMoleculeName,n=o.nucleotideIndex,a=r[e],i=a.rnaMoleculeProps[t],l=i.nucleotideProps[n];return(0,p.Z)((0,p.Z)({},o),{},{singularRnaComplexProps:a,singularRnaMoleculeProps:i,singularNucleotideProps:l})}),[o]),d=(u.rnaComplexIndex,u.rnaMoleculeName),h=u.nucleotideIndex,m=u.singularRnaComplexProps,v=u.singularRnaMoleculeProps,x=u.singularNucleotideProps;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(o);var g=v.firstNucleotideIndex+h,N=(0,c.useState)(x.symbol),C=(0,i.Z)(N,2),T=C[0],P=C[1],R=(0,c.useState)(x.x),M=(0,i.Z)(R,2),O=M[0],j=M[1],L=(0,c.useState)(x.y),D=(0,i.Z)(L,2),Z=D[0],F=D[1],B=(0,c.useState)(null!==(t=x.color)&&void 0!==t?t:I.BLACK),U=(0,i.Z)(B,2),z=U[0],W=U[1],G=(0,c.useState)(null!==(n=x.font)&&void 0!==n?n:S.default.DEFAULT),H=(0,i.Z)(G,2),K=H[0],V=H[1],q=(0,c.useState)(!1),X=(0,i.Z)(q,2),Y=X[0],Q=X[1],$=(0,c.useState)(!1),J=(0,i.Z)($,2),ee=J[0],te=J[1],ne=(0,c.useContext)(f._.App.PushToUndoStack),re=(0,c.useMemo)((function(){return h-1 in v.nucleotideProps?v.nucleotideProps[h-1]:void 0}),[h]),oe=(0,c.useMemo)((function(){return h+1 in v.nucleotideProps?v.nucleotideProps[h+1]:void 0}),[h]),ae=(0,c.useMemo)((function(){return void 0===re?(0,A.jsx)(A.Fragment,{}):(0,A.jsxs)(A.Fragment,{children:["Distance to previous nucleotide: ",(0,b.distance)({x:O,y:Z},re).toFixed(E.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)]})}),[re,O,Z]),ie=(0,c.useMemo)((function(){return void 0===oe?(0,A.jsx)(A.Fragment,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("br",{}),"Distance to next nucleotide: ",(0,b.distance)({x:O,y:Z},oe).toFixed(E.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT)]})}),[oe,O,Z]),le=void 0!==re||void 0!==oe;return(0,c.useEffect)((function(){P(x.symbol),j(x.x),F(x.y)}),[o,s]),(0,c.useEffect)((function(){var e;W(null!==(e=x.color)&&void 0!==e?e:I.BLACK)}),[x.color]),(0,c.useEffect)((function(){var e;V(null!==(e=x.font)&&void 0!==e?e:S.default.DEFAULT)}),[x.font]),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,fontSize:l.typography.fontSize.md,color:l.colors.text},children:[(0,A.jsxs)("div",{style:{padding:"12px 14px",borderRadius:10,border:"1px solid ".concat(l.colors.borderLight),background:l.colors.surface,fontSize:l.typography.fontSize.sm,lineHeight:1.5,display:"flex",flexDirection:"column",gap:6},children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,A.jsx)("span",{style:{fontSize:l.typography.fontSize.lg,fontWeight:l.typography.fontWeight.semibold,color:l.colors.text},children:"Edit nucleotide #".concat(g)}),(0,A.jsx)("span",{style:{fontSize:l.typography.fontSize.sm,color:l.colors.textSecondary},children:'In RNA molecule "'.concat(d,'"')}),(0,A.jsx)("span",{style:{fontSize:l.typography.fontSize.sm,color:l.colors.textSecondary},children:'In RNA complex "'.concat(m.name,'"')})]}),le&&(0,A.jsxs)("div",{style:{marginTop:6,paddingTop:8,borderTop:"1px solid ".concat(l.colors.borderLight),display:"flex",flexDirection:"column",gap:2},children:[ae,ie]})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"10px 12px",borderRadius:10,border:"1px solid ".concat(l.colors.borderLight),background:l.colors.surface},children:[(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.4fr) minmax(0, 1.6fr)",alignItems:"center",gap:8},children:[(0,A.jsx)("div",{style:{fontSize:l.typography.fontSize.sm,color:l.colors.textSecondary},children:"Symbol"}),(0,A.jsx)("select",{value:T,onChange:function(e){var t=e.target.value;!function(e){Y||ne(),P(e),Q(!0)}(t),x.symbol=t,a()},style:{width:"100%",padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(l.colors.border),background:l.colors.surface,color:l.colors.text,fontSize:l.typography.fontSize.sm},children:de.Nucleotide.symbols.map((function(e){return(0,A.jsx)("option",{value:e,children:e},e)}))})]}),(0,A.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:8},children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,A.jsx)("span",{style:{fontSize:l.typography.fontSize.sm,color:l.colors.textSecondary},children:"x"}),(0,A.jsx)(y.Z.Number,{value:O,setValue:function(e){x.x=e,function(e){ee||ne(),j(e),te(!0)}(e),a()}})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,A.jsx)("span",{style:{fontSize:l.typography.fontSize.sm,color:l.colors.textSecondary},children:"y"}),(0,A.jsx)(y.Z.Number,{value:Z,setValue:function(e){x.y=e,function(e){ee||ne(),F(e),te(!0)}(e),a()}})]})]})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"10px 12px",borderRadius:10,border:"1px solid ".concat(l.colors.borderLight),background:l.colors.surface},children:[(0,A.jsx)(k.S.Component,{color:z,setColorHelper:function(e){x.color=e,W(e),a()}}),(0,A.jsx)(w.f.Component,(0,p.Z)((0,p.Z)({},K),{},{setFont:function(e){x.font=e,V(e),a()}}))]})]})};var fe,pe=function(e){(0,v.Z)(n,e);var t=(0,x.Z)(n);function n(e,r,o,i,l,c,u,f,p){var m;(0,h.Z)(this,n),(m=t.call(this,e,r,o,i,c,f,p)).singularNucleotideProps=void 0,m.error=void 0,m.rerender=void 0;var v,x=m.fullKeys0,g=x.rnaComplexIndex,y=x.rnaMoleculeName,b=x.nucleotideIndex,N=m.rnaComplexProps[g],E=N.basePairs;if(m.singularNucleotideProps=N.rnaMoleculeProps[y].nucleotideProps[b],m.addFullIndices(f),y in E&&b in(v=E[y])){v[b];m.error=D,m.rerender=function(){r((0,a.Z)({},g,(0,a.Z)({},y,[b])));var e,t={rnaMoleculeName:y,nucleotideIndex:b},n=(0,a.Z)({},g,[]),i=n[g],l=v[b],c=(0,s.Z)(l);try{for(c.s();!(e=c.n()).done;){var u=e.value;i.push((0,d.selectRelevantBasePairKeys)(t,u))}}catch(f){c.e(f)}finally{c.f()}o(n)}}else m.rerender=function(){r((0,a.Z)({},g,(0,a.Z)({},y,[b])))};if(g in c){var C=c[g];if(y in C)C[y].has(b)&&(m.error={errorMessage:"Cannot interact with this frozen nucleotide."})}return m}return(0,m.Z)(n,[{key:"drag",value:function(){if(void 0!==this.error&&this.error!==D)throw this.error;var e=this.singularNucleotideProps,t=this.rerender;return{initiateDrag:function(){return{x:e.x,y:e.y}},continueDrag:function(n){e.x=n.x,e.y=n.y,t()}}}},{key:"createRightClickMenu",value:function(e){var t,n=this.fullKeys0,o=n.rnaComplexIndex,i=n.rnaMoleculeName,l=n.nucleotideIndex,s=this.rnaComplexProps[o],c=s.rnaMoleculeProps[i],d=this.rerender,f=null;if(e!==u.OK.EDIT&&(f=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("b",{children:[e," nucleotide #",c.firstNucleotideIndex+l]}),(0,A.jsx)("br",{}),'In RNA molecule "',i,'"',(0,A.jsx)("br",{}),'In RNA complex "',s.name,'"',(0,A.jsx)("br",{})]})),void 0!==this.error&&this.error!==D)throw this.error;switch(e){case u.OK.EDIT:t=(0,A.jsx)(ue.Component,{rnaComplexProps:this.rnaComplexProps,fullKeys:this.fullKeys0,triggerRerender:d});break;case u.OK.FORMAT:if(void 0!==this.error)throw this.error;var p=l+c.firstNucleotideIndex;t=(0,A.jsx)(g.w.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:o,rnaMoleculeName0:i,nucleotideIndex0:p,length:1}],approveBasePairs:function(e){switch(e.length){case 0:break;case 1:var t=e[0];if(t.length>1)throw"This constraint expects at most one base pair.";if(t.rnaComplexIndex!==o||![t.rnaMoleculeName0,t.rnaMoleculeName1].includes(i)||![t.nucleotideIndex0,t.nucleotideIndex1].includes(p))throw"This constraint expects a base pair involving the clicked-on nucleotide.";break;default:throw"This constraint expects at most one base pair."}},defaultRnaComplexIndex:o,defaultRnaMoleculeName0:i,defaultRnaMoleculeName1:i});break;case u.OK.ANNOTATE:t=(0,A.jsx)(r.Component,{regions:(0,a.Z)({},o,(0,a.Z)({},i,[{minimumNucleotideIndexInclusive:l,maximumNucleotideIndexInclusive:l}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw{errorMessage:"Not yet implemented."}}return(0,A.jsxs)(A.Fragment,{children:[f,t]})}},{key:"getHelices",value:function(){return[]}}]),n}(B),he=n(920);function me(e,t){for(var n=e.basePairs,r=[],o=0,a=Object.keys(n);o<a.length;o++)for(var i=a[o],l=n[i],c=0,u=Object.keys(l);c<u.length;c++){var f,p=u[c],h=Number.parseInt(p),m={rnaMoleculeName:i,nucleotideIndex:h},v=l[h],x=(0,s.Z)(v);try{for(x.s();!(f=x.n()).done;){var g,y=f.value;C.default.isEnabledBasePair(null!==(g=y.basePairType)&&void 0!==g?g:(0,C.getBasePairType)(e.rnaMoleculeProps[i].nucleotideProps[h].symbol,e.rnaMoleculeProps[y.rnaMoleculeName].nucleotideProps[y.nucleotideIndex].symbol),t)&&((0,d.isRelevantBasePairKeySetInPair)(m,y)&&r.push({keys0:m,keys1:y,mappedBasePair:y}))}}catch(b){x.e(b)}finally{x.f()}}return r.sort((function(e,t){return(0,d.compareBasePairKeys)(e.keys0,t.keys0)||(0,d.compareBasePairKeys)(e.keys1,t.keys1)})),r}function ve(e,t){var n,r=[],o=(0,s.Z)(Object.keys(e).map((function(e){return Number.parseInt(e)})).sort(N.subtractNumbers));try{for(o.s();!(n=o.n()).done;){var a=n.value,i=me(e[a],t);r.push(xe(a,e[a],t,i))}}catch(l){o.e(l)}finally{o.f()}return r}function xe(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:me(t,n),a=[],i=(0,s.Z)(Object.keys(t.rnaMoleculeProps).sort());try{for(i.s();!(r=i.n()).done;){var l=ge(t,r.value,n,o);a.push(l)}}catch(c){i.e(c)}finally{i.f()}return{rnaComplexIndex:e,helixDataPerRnaMolecules:a}}function ge(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:me(e,n),o=e.rnaMoleculeProps[t],a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var l in o.nucleotideProps){var s=Number.parseInt(l);s<a&&(a=s),s>i&&(i=s)}return ye(e,t,a,i,n,r)}function ye(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:me(e,o),i=[],l={};function c(e,t,n,r){t in e||(e[t]={});var o=e[t];n in o||(o[n]=r)}a=a.filter((function(e){var o=e.keys0,a=e.keys1;return o.rnaMoleculeName===t&&o.nucleotideIndex>=n&&o.nucleotideIndex<=r||a.rnaMoleculeName===t&&a.nucleotideIndex>=n&&a.nucleotideIndex<=r}));var u,d=(0,s.Z)(a);try{for(d.s();!(u=d.n()).done;){var f=u.value,p=f.keys0,h=f.keys1;f.mappedBasePair;p.rnaMoleculeName in l||(l[p.rnaMoleculeName]={});var m=l[p.rnaMoleculeName];h.rnaMoleculeName in m||(m[h.rnaMoleculeName]={});var v=m[h.rnaMoleculeName],x=!1;if(p.nucleotideIndex-1 in v){var g=v[p.nucleotideIndex-1];if(h.nucleotideIndex+1 in g){var y=g[h.nucleotideIndex+1];Math.abs(y.stop[0]+1-y.start[0])===Math.abs(y.stop[1]-1-y.start[1])&&(y.stop[0]++,y.stop[1]--,c(v,p.nucleotideIndex,h.nucleotideIndex,y),x=!0)}}if(!x){var b={start:{0:p.nucleotideIndex,1:h.nucleotideIndex},stop:{0:p.nucleotideIndex,1:h.nucleotideIndex},rnaMoleculeName1:p.rnaMoleculeName===t?h.rnaMoleculeName:p.rnaMoleculeName};i.push(b),c(v,p.nucleotideIndex,h.nucleotideIndex,b)}}}catch(N){d.e(N)}finally{d.f()}return{rnaMoleculeName0:t,helixData:i}}function be(e,t,n,r,o,a){var i,s,c=e.basePairs[t],u=e.rnaMoleculeProps[t],d=[];n[0]<=n[1]?(i=n[0],s=n[1]):(i=n[1],s=n[0]);for(var f=!0,p=function(t){if(t in c&&c[t].some((function(n){var r;return C.default.isEnabledBasePair(null!==(r=n.basePairType)&&void 0!==r?r:(0,C.getBasePairType)(u.nucleotideProps[t].symbol,e.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),a)})))return f=!1,"break";d.push(t)},h=i+1;h<s;h++){if("break"===p(h))break}f&&(o.push.apply(o,d),r.push.apply(r,(0,l.Z)(d.map((function(e){return u.nucleotideProps[e]})))))}function Ne(e,t,n,r,o,a,l,c){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(){},f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:me(e,l);return function(e,t,n,r,o,a){var l,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},u=ge(e,t,a,arguments.length>7&&void 0!==arguments[7]?arguments[7]:me(e,a)).helixData,f=[{rnaMoleculeName:t,nucleotideIndex:n},{rnaMoleculeName:r,nucleotideIndex:o}].sort(d.compareBasePairKeys),p=(0,i.Z)(f,2),h=p[0],m=p[1],v=(0,s.Z)(u);try{for(v.s();!(l=v.n()).done;){var x=l.value,g=x.start,y=x.stop,b=Math.min(g[0],y[0]),N=Math.max(g[0],y[0]),E=Math.min(g[1],y[1]),C=Math.max(g[1],y[1]);if(r===x.rnaMoleculeName1&&h.nucleotideIndex>=b&&h.nucleotideIndex<=N&&m.nucleotideIndex>=E&&m.nucleotideIndex<=C){e.rnaMoleculeProps[r];for(var I=b;I<=N;I++)c({rnaMoleculeName:h.rnaMoleculeName,nucleotideIndex:I});for(var S=E;S<=C;S++)c({rnaMoleculeName:m.rnaMoleculeName,nucleotideIndex:S});return x}}}catch(_){v.e(_)}finally{v.f()}throw"Could not find the relevant helix!"}(e,t,n,r,o,l,(function(t){u(t);var n=t.rnaMoleculeName,r=t.nucleotideIndex,o=e.rnaMoleculeProps[n];if(a.push(o.nucleotideProps[r]),void 0!==c){var i,l=e.basePairs[n][r],f=(0,s.Z)(l);try{for(f.s();!(i=f.n()).done;){var p=i.value;c.push((0,d.selectRelevantBasePairKeys)(t,p))}}catch(h){f.e(h)}finally{f.f()}}}),f)}function Ee(e,t){return Math.abs(e[0]-e[1])-Math.abs(t[0]-t[1])}function Ce(e,t){return e.rnaComplexIndex-t.rnaComplexIndex||e.rnaMoleculeName.localeCompare(t.rnaMoleculeName)||e.nucleotideIndex-t.nucleotideIndex}function Ie(e,t,n){function r(){var r;e.sort(Ce);for(var o=e[0],i=e[e.length-1],l=!0,c=!0,u=!1,d=void 0,f=1;f<e.length;f++){var p=e[f],h=p.rnaComplexIndex,m=p.rnaMoleculeName;h!==o.rnaComplexIndex&&(l=!1),m!==o.rnaMoleculeName&&(c=!1,void 0===d?(d=m,u=!0):m!==d&&(u=!1))}l||(c=!1);var v=!0,x=!0,g=e.map((function(e){var r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex,i=t[r],l=i.basePairs;if(o in l){var s=l[o];if(a in s)if(s[a].some((function(e){var t;return C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(i.rnaMoleculeProps[o].nucleotideProps[a].symbol,i.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)})))return x=!1,s[a]}v=!1}));function y(){if(!c)return!1;var e=g[0];if(void 0===e||!e.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===i.rnaMoleculeName&&n===i.nucleotideIndex})))return!1;for(var n=t[o.rnaComplexIndex].basePairs[o.rnaMoleculeName],r=o.nucleotideIndex+1;r<i.nucleotideIndex;r++){var a=n[r];if(void 0!==a&&a.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t!==o.rnaMoleculeName||n<o.nucleotideIndex||n>i.nucleotideIndex})))return!1}return!0}function b(t){if(!t||!c&&!u)return!1;var n=[],r=e[0],o=1,a=void 0!==g[0],i=void 0;if(!a)return!1;for(n.push(r);o<e.length;o++){var l=e[o],s=l.rnaMoleculeName,d=l.nucleotideIndex;if(s!==r.rnaMoleculeName||d!==r.nucleotideIndex+1){i=o;break}var f=void 0!==g[o];f&&n.push(l),a=f,r=l}if(!a)return!1;var p=g[o];if(void 0===p)return!1;p.some((function(e){var t=e.rnaMoleculeName,n=e.nucleotideIndex;return t===r.rnaMoleculeName&&n===r.nucleotideIndex}))||n.reverse();for(var h=function(){var t=e[o],a=t.rnaMoleculeName,l=t.nucleotideIndex;if(o!==i&&(a!==r.rnaMoleculeName||l!==r.nucleotideIndex+1))return{v:!1};var s=g[o];if(void 0!==s){var c=n.pop();if(void 0===c)return{v:!1};if(!s.some((function(e){return c.rnaMoleculeName,e.rnaMoleculeName,c.nucleotideIndex===e.nucleotideIndex})))return{v:!1}}r=t};o<e.length;o++){var m=h();if("object"===typeof m)return m.v}return void 0!==g[g.length-1]}var N=function(){if(!l)return!1;var r,i={},c=(0,s.Z)(e);try{for(c.s();!(r=c.n()).done;){var u=r.value,d=u.rnaMoleculeName,f=u.nucleotideIndex;d in i||(i[d]=new Set),i[d].add(f)}}catch(b){c.e(b)}finally{c.f()}for(var p=t[o.rnaComplexIndex],h=p.rnaMoleculeProps,m=p.basePairs,v=(0,a.Z)({},o.rnaMoleculeName,new Set([o.nucleotideIndex])),x=new Array(o),g=0,y=function(){g++;var e=x.shift(),t=e.rnaMoleculeName,r=e.nucleotideIndex,o=h[t].nucleotideProps,a=m[t],l=new Array;if(r-1 in o&&l.push({rnaMoleculeName:t,nucleotideIndex:r-1}),r+1 in o&&l.push({rnaMoleculeName:t,nucleotideIndex:r+1}),r in a){var c,u=a[r].filter((function(e){var o;return C.default.isEnabledBasePair(null!==(o=e.basePairType)&&void 0!==o?o:(0,C.getBasePairType)(p.rnaMoleculeProps[t].nucleotideProps[r].symbol,p.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)})),d=(0,s.Z)(u);try{for(d.s();!(c=d.n()).done;){var f=c.value;l.push(f)}}catch(b){d.e(b)}finally{d.f()}}for(var y=0,N=l;y<N.length;y++){var E=N[y],I=E.rnaMoleculeName,S=E.nucleotideIndex;if(I in i&&i[I].has(S)&&(!(I in v)||!v[I].has(S)))I in v||(v[I]=new Set),v[I].add(S),x.push(E)}};x.length>0;)y();return g===e.length}();if(x){if(N)return{fullKeys:o,interactionConstraint:fe.Enum.RNA_SINGLE_STRAND}}else if(v){if(N&&(c||u))return{fullKeys:o,interactionConstraint:fe.Enum.RNA_HELIX};if(y())return{fullKeys:o,interactionConstraint:fe.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:o,interactionConstraint:fe.Enum.RNA_STACKED_HELIX}}else{if(y())return{fullKeys:o,interactionConstraint:fe.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:e.find((function(e,t){return void 0!==g[t]})),interactionConstraint:fe.Enum.RNA_STACKED_HELIX};if(N)return{fullKeys:e.find((function(e,t){return void 0===g[t]})),interactionConstraint:fe.Enum.RNA_CYCLE}}if(c)return{fullKeys:o,interactionConstraint:fe.Enum.RNA_MOLECULE};if(l)return{fullKeys:o,interactionConstraint:fe.Enum.RNA_COMPLEX};for(var E=null!==(r=t[o.rnaComplexIndex].rnaMoleculeProps[o.rnaMoleculeName].nucleotideProps[o.nucleotideIndex].color)&&void 0!==r?r:I.BLACK,S=!0,_=1;_<e.length;_++){var A,T=e[_],P=T.rnaComplexIndex,R=T.rnaMoleculeName,k=T.nucleotideIndex,w=null!==(A=t[P].rnaMoleculeProps[R].nucleotideProps[k].color)&&void 0!==A?A:I.BLACK;if(!(0,I.areEqual)(E,w)){S=!1;break}}return S?{fullKeys:o,interactionConstraint:fe.Enum.SINGLE_COLOR}:{fullKeys:o,interactionConstraint:fe.Enum.ENTIRE_SCENE}}switch(e.length){case 0:return;case 1:var o=e[0],i=o.rnaComplexIndex,l=o.rnaMoleculeName,c=o.nucleotideIndex,u=t[i],d=u.basePairs,f=fe.Enum.SINGLE_NUCLEOTIDE;if(l in d){var p=d[l];c in p&&p[c].some((function(e){var t;return C.default.isEnabledBasePair(null!==(t=e.basePairType)&&void 0!==t?t:(0,C.getBasePairType)(u.rnaMoleculeProps[l].nucleotideProps[c].symbol,u.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),n)}))&&(f=fe.Enum.SINGLE_BASE_PAIR)}return{fullKeys:o,interactionConstraint:f};case 2:var h,m=e[0],v=e[1],x=t[m.rnaComplexIndex],g=x.basePairs;return m.rnaComplexIndex===v.rnaComplexIndex&&m.rnaMoleculeName in g&&m.nucleotideIndex in(h=g[m.rnaMoleculeName])&&h[m.nucleotideIndex].some((function(e){var t=e.rnaMoleculeName,r=e.nucleotideIndex,o=e.basePairType;return v.rnaMoleculeName===t&&v.nucleotideIndex===r&&C.default.isEnabledBasePair(null!==o&&void 0!==o?o:(0,C.getBasePairType)(x.rnaMoleculeProps[m.rnaMoleculeName].nucleotideProps[m.nucleotideIndex].symbol,x.rnaMoleculeProps[t].nucleotideProps[r].symbol),n)}))?{fullKeys:m,interactionConstraint:fe.Enum.SINGLE_BASE_PAIR}:r();default:return r()}}!function(e){var t,n,r,o,i=e.supportedTabs=(t={},(0,a.Z)(t,u.OK.EDIT,u.OK.EDIT),(0,a.Z)(t,u.OK.FORMAT,u.OK.FORMAT),(0,a.Z)(t,u.OK.ANNOTATE,u.OK.ANNOTATE),t);e.isSupportedTab=function(e){return e in i};var l=function(e){return e.SINGLE_NUCLEOTIDE="Single nucleotide",e.SINGLE_BASE_PAIR="Single basepair",e.RNA_SINGLE_STRAND="RNA single strand",e.RNA_HELIX="RNA helix",e.RNA_SUB_DOMAIN="RNA sub-domain",e.RNA_STACKED_HELIX="RNA stacked helix",e.RNA_CYCLE="RNA cycle",e.RNA_MOLECULE="RNA molecule",e.RNA_COMPLEX="RNA complex",e.SINGLE_COLOR="Single color",e.ENTIRE_SCENE="Entire scene",e}({});e.Enum=l;var s=e.all=Object.values(l);e.isEnum=function(e){return s.includes(e)};e.record=(n={},(0,a.Z)(n,l.SINGLE_NUCLEOTIDE,pe),(0,a.Z)(n,l.SINGLE_BASE_PAIR,se),(0,a.Z)(n,l.RNA_SINGLE_STRAND,ae),(0,a.Z)(n,l.RNA_HELIX,$),(0,a.Z)(n,l.RNA_SUB_DOMAIN,le),(0,a.Z)(n,l.RNA_STACKED_HELIX,ie),(0,a.Z)(n,l.RNA_CYCLE,Q),(0,a.Z)(n,l.RNA_MOLECULE,ee),(0,a.Z)(n,l.RNA_COMPLEX,H),(0,a.Z)(n,l.SINGLE_COLOR,ce),(0,a.Z)(n,l.ENTIRE_SCENE,W),n),e.descriptionRecord=(r={},(0,a.Z)(r,l.SINGLE_NUCLEOTIDE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single nucleotide.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=150&end=168",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.SINGLE_BASE_PAIR,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single base pair between two nucleotides.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=167&end=178",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_SINGLE_STRAND,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of single (non-basepaired) nucleotides.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=176&end=204",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_HELIX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of base-paired nucleotides.",(0,A.jsx)("br",{}),'"Helix" is defined as two series of nucleotides which are mutually base-paired without gaps.',(0,A.jsx)("br",{}),"This involves at most two RNA molecules.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=202&end=214",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_SUB_DOMAIN,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of nucleotides constrainted by a helix.",(0,A.jsx)("br",{}),"This constraint involves only one RNA molecule.",(0,A.jsx)("br",{}),"This includes all nucleotides with nucleotide indices:",(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Greater than or equal to the least nucleotide index in the helix"}),(0,A.jsx)("li",{children:"Less than or equal to the greatest nucleotide index in the helix"})]}),(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=212&end=243",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_STACKED_HELIX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a contiguous series of helices between RNA molecules.",(0,A.jsx)("br",{}),"These helices may be separated by single (non-basepaired) nucleotides, but their mutually-basepaired status must resume outside the single-stranded regions.",(0,A.jsx)("br",{}),"This constraint involves at most two RNA molecules.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=243&end=269",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_CYCLE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a cycle of nucleotides.",(0,A.jsx)("br",{}),"An RNA cycle is calculated as follows:",(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Treat the nucleotides as nodes in a graph"}),(0,A.jsx)("li",{children:"Treat the following as edges in the graph:"}),(0,A.jsxs)("ul",{style:{margin:0},children:[(0,A.jsx)("li",{children:"Base pairs between nucleotides"}),(0,A.jsx)("li",{children:"Neighboring nucleotides within a given RNA molecule (with nucleotide indices i, j such that abs(i - j) = 1)"})]}),(0,A.jsx)("li",{children:"Calculate the smallest cycle within the graph involving the clicked-on nucleotide"})]}),(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=269&end=298",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_MOLECULE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single RNA molecule.",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=311&end=325",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.RNA_COMPLEX,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with a single RNA complex (which may contain more than one RNA molecule).",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=324&end=340",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.SINGLE_COLOR,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels with the same color",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=340&end=358",allowFullScreen:!0,width:960,height:540})})]})),(0,a.Z)(r,l.ENTIRE_SCENE,(0,A.jsxs)(A.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels within the scene (i.e. viewport)",(0,A.jsx)(he.z.Component,{title:"Demo",children:(0,A.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=354",allowFullScreen:!0,width:960,height:540})})]})),r);e.DEFAULT_OPTIONS={affectHairpinNucleotidesFlag:!0,truncateRnaSingleStrandFlag:!0,treatNoncanonicalBasePairsAsUnpairedFlag:K.Z[K.pE.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]},e.optionsMenuRecord=(o={},(0,a.Z)(o,l.SINGLE_BASE_PAIR,(function(e){var t=(0,c.useContext)(f._.App.InteractionConstraintOptions),n=(0,c.useContext)(f._.App.UpdateInteractionConstraintOptions),r=t.affectHairpinNucleotidesFlag;return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("label",{children:["Affect hairpin-loop nucleotides:\xa0",(0,A.jsx)("input",{type:"checkbox",checked:r,onChange:function(){n({affectHairpinNucleotidesFlag:!r})}})]})})})),(0,a.Z)(o,l.RNA_SINGLE_STRAND,(function(e){var t=(0,c.useContext)(f._.App.InteractionConstraintOptions),n=(0,c.useContext)(f._.App.UpdateInteractionConstraintOptions),r=t.truncateRnaSingleStrandFlag;return(0,A.jsxs)("label",{children:["Truncate Single Strand At Frozen Nucleotides:\xa0",(0,A.jsx)("input",{type:"checkbox",checked:r,onChange:function(){n({truncateRnaSingleStrandFlag:!r})}})]})})),o)}(fe||(fe={}))},9750:function(e,t,n){"use strict";n.d(t,{GO:function(){return f},OP:function(){return h},Xd:function(){return u},Z:function(){return m},kR:function(){return p},pE:function(){return c},zT:function(){return d}});var r,o,a,i,l=n(4942),s=n(6176),c=function(e){return e.COPY_FILE_NAME="copy_file_name",e.COPY_FILE_EXTENSION="copy_file_extension",e.RESET_VIEWPORT_AFTER_FILE_UPLOAD="reset_viewport_after_file_upload",e.USE_DEGREES="use_degrees",e.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING="reposition_nucleotides_when_formatting",e.AUTOMATICALLY_REPOSITION_ANNOTATIONS="automatically_reposition_annotations",e.CANONICAL_BASE_PAIR_DISTANCE="canonical_base_pair_distance",e.WOBBLE_BASE_PAIR_DISTANCE="wobble_base_pair_distance",e.MISMATCH_BASE_PAIR_DISTANCE="mismatch_base_pair_distance",e.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS="distance_between_contiguous_base_pairs",e.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE="replace_nucleotides_with_contour_line",e.CONTOUR_LINE_WIDTH="contour_line_width",e.PATH_MODE="path_mode",e.PATH_LINE_WIDTH="path_line_width",e.DARK_MODE="dark_mode",e.DISABLE_NAVIGATE_AWAY_PROMPT="disable_navigate_away_prompt",e.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED="treat_non_canonical_base_pairs_as_unpaired",e.BASE_PAIR_RADIUS="base_pair_radius",e.DEFAULT_FONT_SIZE="default_font_size",e.DEFAULT_FONT_FAMILY="default_font_family",e.SEQUENCE_CONNECTOR_AUTO_TRIGGER="sequence_connector_auto_trigger",e.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD="sequence_connector_distance_threshold",e.SEQUENCE_CONNECTOR_INTER_MOLECULE="sequence_connector_inter_molecule",e.SEQUENCE_CONNECTOR_INTER_COMPLEX="sequence_connector_inter_complex",e.GRID_ENABLED="grid_enabled",e.GRID_HORIZONTAL_LINES="grid_horizontal_lines",e.GRID_VERTICAL_LINES="grid_vertical_lines",e.GRID_LEFT_RIGHT_DIAGONAL="grid_left_right_diagonal",e.GRID_RIGHT_LEFT_DIAGONAL="grid_right_left_diagonal",e.GRID_CONCENTRIC_CIRCLES="grid_concentric_circles",e.GRID_DOTTED="grid_dotted",e.GRID_SPACING="grid_spacing",e.GRID_COLOR="grid_color",e.CANVAS_COLOR="canvas_color",e}({}),u=Object.values(c),d=(r={},(0,l.Z)(r,c.COPY_FILE_NAME,"Copy input-file names to output-file names"),(0,l.Z)(r,c.COPY_FILE_EXTENSION,"Copy input-file extensions to downloadable output files"),(0,l.Z)(r,c.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset viewport after file upload"),(0,l.Z)(r,c.USE_DEGREES,"Use degrees"),(0,l.Z)(r,c.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when editing"),(0,l.Z)(r,c.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),(0,l.Z)(r,c.CANONICAL_BASE_PAIR_DISTANCE,"Canonical base-pair distance"),(0,l.Z)(r,c.WOBBLE_BASE_PAIR_DISTANCE,"Wobble base-pair distance"),(0,l.Z)(r,c.MISMATCH_BASE_PAIR_DISTANCE,"Mismatch base-pair distance"),(0,l.Z)(r,c.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"Distance between contiguous base pairs"),(0,l.Z)(r,c.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Replace nucleotides with contour line"),(0,l.Z)(r,c.CONTOUR_LINE_WIDTH,"Contour-line width"),(0,l.Z)(r,c.PATH_MODE,"Path mode (show lines, hide nucleotide text)"),(0,l.Z)(r,c.PATH_LINE_WIDTH,"Path-line width"),(0,l.Z)(r,c.DARK_MODE,"Dark mode"),(0,l.Z)(r,c.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the navigate-away prompt"),(0,l.Z)(r,c.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Treat non-canonical base pairs as unpaired (when editing and formatting)"),(0,l.Z)(r,c.BASE_PAIR_RADIUS,"Radius of base-pair circles"),(0,l.Z)(r,c.DEFAULT_FONT_SIZE,"Default font size"),(0,l.Z)(r,c.DEFAULT_FONT_FAMILY,"Default font family"),(0,l.Z)(r,c.SEQUENCE_CONNECTOR_AUTO_TRIGGER,"Auto-trigger sequence connectors"),(0,l.Z)(r,c.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD,"Connector distance threshold (multiplier)"),(0,l.Z)(r,c.SEQUENCE_CONNECTOR_INTER_MOLECULE,"Show inter-molecule connectors"),(0,l.Z)(r,c.SEQUENCE_CONNECTOR_INTER_COMPLEX,"Show inter-complex connectors"),(0,l.Z)(r,c.GRID_ENABLED,"Enable canvas grid"),(0,l.Z)(r,c.GRID_HORIZONTAL_LINES,"Show horizontal grid lines"),(0,l.Z)(r,c.GRID_VERTICAL_LINES,"Show vertical grid lines"),(0,l.Z)(r,c.GRID_LEFT_RIGHT_DIAGONAL,"Show left-to-right diagonal lines"),(0,l.Z)(r,c.GRID_RIGHT_LEFT_DIAGONAL,"Show right-to-left diagonal lines"),(0,l.Z)(r,c.GRID_CONCENTRIC_CIRCLES,"Show concentric circles"),(0,l.Z)(r,c.GRID_DOTTED,"Show dotted grid pattern"),(0,l.Z)(r,c.GRID_SPACING,"Grid line spacing"),(0,l.Z)(r,c.GRID_COLOR,"Grid color"),(0,l.Z)(r,c.CANVAS_COLOR,"Canvas background color"),r),f=(o={},(0,l.Z)(o,c.COPY_FILE_NAME,"Copy the name from uploaded input files to downloadable output files"),(0,l.Z)(o,c.COPY_FILE_EXTENSION,"Copy the extension from uploaded input files to downloadable output files (when supported)"),(0,l.Z)(o,c.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset the viewport translation and scale after parsing an input file"),(0,l.Z)(o,c.USE_DEGREES,"Use degrees (instead of radians) when editing angles"),(0,l.Z)(o,c.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when their parent nucleotides are repositioned"),(0,l.Z)(o,c.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),(0,l.Z)(o,c.CANONICAL_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "canonical." (i.e. Watson-Crick). Applied when formatting base pairs'),(0,l.Z)(o,c.WOBBLE_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "wobble." Applied when formatting base pairs'),(0,l.Z)(o,c.MISMATCH_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "mismatch." Applied when formatting base pairs'),(0,l.Z)(o,c.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"The default distance between base pairs which are contiguous. Applied when formatting base pairs"),(0,l.Z)(o,c.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Display only a countour line per RNA molecule, instead of individual nucleotides"),(0,l.Z)(o,c.CONTOUR_LINE_WIDTH,"Width of the contour line (applied when replacing nucleotides with a contour line)"),(0,l.Z)(o,c.PATH_MODE,"Display lines tracing the centers of nucleotides while hiding the nucleotide text. This provides an abstracted view ideal for visualizing larger structures efficiently while keeping base pairs, labels, and other features visible."),(0,l.Z)(o,c.PATH_LINE_WIDTH,"Width of the path line (applied when path mode is enabled)"),(0,l.Z)(o,c.DARK_MODE,"Change background colors and scene colors to darken the scene"),(0,l.Z)(o,c.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the prompt asking you to save your work, when you navigate away from this page"),(0,l.Z)(o,c.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Disable editing and formatting of non-canonical base pairs."),(0,l.Z)(o,c.BASE_PAIR_RADIUS,"Radius of base-pair circles (also affects dimensions of non-canonical base pairs)"),(0,l.Z)(o,c.DEFAULT_FONT_SIZE,"The default font size used for nucleotides. Calculated from the loaded structure's average font size."),(0,l.Z)(o,c.DEFAULT_FONT_FAMILY,"The default font family used for nucleotides. Calculated from the most common font in the loaded structure."),(0,l.Z)(o,c.SEQUENCE_CONNECTOR_AUTO_TRIGGER,"Automatically show a connector line between sequential nucleotides when they are moved too far apart."),(0,l.Z)(o,c.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD,"The multiplier of the average nucleotide distance at which the sequence connector automatically appears (e.g., 3 means 3x average distance)."),(0,l.Z)(o,c.SEQUENCE_CONNECTOR_INTER_MOLECULE,"Show connector lines between nucleotides that belong to different RNA molecules within the same complex."),(0,l.Z)(o,c.SEQUENCE_CONNECTOR_INTER_COMPLEX,"Show connector lines between nucleotides that belong to different RNA complexes."),(0,l.Z)(o,c.GRID_ENABLED,"Enable or disable the canvas grid system. When enabled, you can choose which grid types to display."),(0,l.Z)(o,c.GRID_HORIZONTAL_LINES,"Display horizontal parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,c.GRID_VERTICAL_LINES,"Display vertical parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,c.GRID_LEFT_RIGHT_DIAGONAL,"Display diagonal lines from top-left to bottom-right. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,c.GRID_RIGHT_LEFT_DIAGONAL,"Display diagonal lines from top-right to bottom-left. These lines move with the viewport pan but maintain their spacing."),(0,l.Z)(o,c.GRID_CONCENTRIC_CIRCLES,"Display concentric circles centered on the canvas. The radius between circles is controlled by the grid spacing setting."),(0,l.Z)(o,c.GRID_DOTTED,"Display a dotted grid pattern across the canvas. The spacing between dots is controlled by the grid spacing setting."),(0,l.Z)(o,c.GRID_SPACING,"Control the distance between parallel grid lines or the radius increment for concentric circles. Higher values create more spaced out grids."),(0,l.Z)(o,c.GRID_COLOR,"Customize the color of all grid elements. Leave empty to use automatic theme-based colors."),(0,l.Z)(o,c.CANVAS_COLOR,"Customize the canvas background color. Leave empty to use automatic theme-based colors."),o),p=(a={},(0,l.Z)(a,c.COPY_FILE_NAME,"boolean"),(0,l.Z)(a,c.COPY_FILE_EXTENSION,"boolean"),(0,l.Z)(a,c.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"boolean"),(0,l.Z)(a,c.USE_DEGREES,"boolean"),(0,l.Z)(a,c.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"boolean"),(0,l.Z)(a,c.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"boolean"),(0,l.Z)(a,c.CANONICAL_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,c.WOBBLE_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,c.MISMATCH_BASE_PAIR_DISTANCE,"number"),(0,l.Z)(a,c.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"number"),(0,l.Z)(a,c.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"boolean"),(0,l.Z)(a,c.CONTOUR_LINE_WIDTH,"number"),(0,l.Z)(a,c.PATH_MODE,"boolean"),(0,l.Z)(a,c.PATH_LINE_WIDTH,"number"),(0,l.Z)(a,c.DARK_MODE,"boolean"),(0,l.Z)(a,c.DISABLE_NAVIGATE_AWAY_PROMPT,"boolean"),(0,l.Z)(a,c.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"boolean"),(0,l.Z)(a,c.BASE_PAIR_RADIUS,"number"),(0,l.Z)(a,c.DEFAULT_FONT_SIZE,"number"),(0,l.Z)(a,c.DEFAULT_FONT_FAMILY,"string"),(0,l.Z)(a,c.SEQUENCE_CONNECTOR_AUTO_TRIGGER,"boolean"),(0,l.Z)(a,c.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD,"number"),(0,l.Z)(a,c.SEQUENCE_CONNECTOR_INTER_MOLECULE,"boolean"),(0,l.Z)(a,c.SEQUENCE_CONNECTOR_INTER_COMPLEX,"boolean"),(0,l.Z)(a,c.GRID_ENABLED,"boolean"),(0,l.Z)(a,c.GRID_HORIZONTAL_LINES,"boolean"),(0,l.Z)(a,c.GRID_VERTICAL_LINES,"boolean"),(0,l.Z)(a,c.GRID_LEFT_RIGHT_DIAGONAL,"boolean"),(0,l.Z)(a,c.GRID_RIGHT_LEFT_DIAGONAL,"boolean"),(0,l.Z)(a,c.GRID_CONCENTRIC_CIRCLES,"boolean"),(0,l.Z)(a,c.GRID_DOTTED,"boolean"),(0,l.Z)(a,c.GRID_SPACING,"number"),(0,l.Z)(a,c.GRID_COLOR,"string"),(0,l.Z)(a,c.CANVAS_COLOR,"string"),a);function h(e){return u.includes(e)}var m=(i={},(0,l.Z)(i,c.COPY_FILE_NAME,!0),(0,l.Z)(i,c.COPY_FILE_EXTENSION,!0),(0,l.Z)(i,c.RESET_VIEWPORT_AFTER_FILE_UPLOAD,!0),(0,l.Z)(i,c.USE_DEGREES,!0),(0,l.Z)(i,c.AUTOMATICALLY_REPOSITION_ANNOTATIONS,!0),(0,l.Z)(i,c.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,!0),(0,l.Z)(i,c.CANONICAL_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,c.WOBBLE_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,c.MISMATCH_BASE_PAIR_DISTANCE,NaN),(0,l.Z)(i,c.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,NaN),(0,l.Z)(i,c.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,!1),(0,l.Z)(i,c.CONTOUR_LINE_WIDTH,s.DEFAULT_STROKE_WIDTH),(0,l.Z)(i,c.PATH_MODE,!1),(0,l.Z)(i,c.PATH_LINE_WIDTH,s.DEFAULT_STROKE_WIDTH),(0,l.Z)(i,c.DARK_MODE,!1),(0,l.Z)(i,c.DISABLE_NAVIGATE_AWAY_PROMPT,!1),(0,l.Z)(i,c.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,!0),(0,l.Z)(i,c.BASE_PAIR_RADIUS,Number.NaN),(0,l.Z)(i,c.DEFAULT_FONT_SIZE,Number.NaN),(0,l.Z)(i,c.DEFAULT_FONT_FAMILY,""),(0,l.Z)(i,c.SEQUENCE_CONNECTOR_AUTO_TRIGGER,!0),(0,l.Z)(i,c.SEQUENCE_CONNECTOR_DISTANCE_THRESHOLD,3),(0,l.Z)(i,c.SEQUENCE_CONNECTOR_INTER_MOLECULE,!1),(0,l.Z)(i,c.SEQUENCE_CONNECTOR_INTER_COMPLEX,!1),(0,l.Z)(i,c.GRID_ENABLED,!1),(0,l.Z)(i,c.GRID_HORIZONTAL_LINES,!0),(0,l.Z)(i,c.GRID_VERTICAL_LINES,!0),(0,l.Z)(i,c.GRID_LEFT_RIGHT_DIAGONAL,!1),(0,l.Z)(i,c.GRID_RIGHT_LEFT_DIAGONAL,!1),(0,l.Z)(i,c.GRID_CONCENTRIC_CIRCLES,!1),(0,l.Z)(i,c.GRID_DOTTED,!1),(0,l.Z)(i,c.GRID_SPACING,50),(0,l.Z)(i,c.GRID_COLOR,""),(0,l.Z)(i,c.CANVAS_COLOR,""),i)},6176:function(e,t,n){"use strict";t.__esModule=!0,t.MouseButtonIndices=t.parseFloatReturnUndefinedOnFail=t.parseIntReturnUndefinedOnFail=t.numberToFormattedStringHelper=t.FLOATING_POINT_REGEX=t.ONE_OVER_LOG_OF_SCALE_BASE=t.SCALE_BASE=t.DEFAULT_BACKGROUND_COLOR_CSS_STRING=t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT=t.DEFAULT_TRANSLATION_MAGNITUDE=t.DEFAULT_STROKE_WIDTH=void 0;var r=n(3871);t.DEFAULT_STROKE_WIDTH=.2,t.DEFAULT_TRANSLATION_MAGNITUDE=.5,t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT=2,t.DEFAULT_BACKGROUND_COLOR_CSS_STRING=(0,r.toCSS)(r.CHARCOAL_GRAY),t.SCALE_BASE=1.1,t.ONE_OVER_LOG_OF_SCALE_BASE=1/Math.log(t.SCALE_BASE),t.FLOATING_POINT_REGEX="-?(?:(?:\\d+)|(?:(?:\\d+)?\\.\\d+))(?:e-?\\d+)?";t.numberToFormattedStringHelper=function(e,n){return void 0===n&&(n=t.DEFAULT_FORMATTED_NUMBER_DECIMAL_DIGITS_COUNT),e.toFixed(n)};t.parseIntReturnUndefinedOnFail=function(e){return/^-?(0x)?\d+$/.test(e)?Number.parseInt(e):void 0};t.parseFloatReturnUndefinedOnFail=function(e){var t=Number.parseFloat(e);return Number.isNaN(t)?void 0:t},function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"}(t.MouseButtonIndices||(t.MouseButtonIndices={}))},7457:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};t.__esModule=!0,t.median=t.getLineBoundingPath=t.isEmpty=t.max=t.min=t.parseInteger=t.subtractNumbersNegated=t.subtractNumbers=t.degreesToRadians=t.radiansToDegrees=t.sortedArraySplice=t.HandleQueryNotFound=t.binarySearch=t.areEqual=t.compare=t.sign=t.flattenRecordWithStringKeys=t.flattenRecordWithNumberKeys=t.flattenRecordWithIntegerKeys=t.flattenRecord=t.range=t.DEFAULT_EPSILON=void 0;var o,a=n(7361);function i(e,t){for(var n=Object.entries(e),r=0;r<n.length;r++)n[r][0]=t(n[r][0]);return n}function l(e,n){return void 0===n&&(n=t.DEFAULT_EPSILON),e<-n?-1:e<n?0:1}function s(e,n,r){return void 0===r&&(r=t.DEFAULT_EPSILON),l(e-n,r)}function c(e,t){return e-t}function u(e,t,n){if(0!==t.length){for(var r=t[0],o=1;o<t.length;o++){var a=t[o];n(e(a,r))&&(r=a)}return r}}t.DEFAULT_EPSILON=1e-7,t.range=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=1),(e-t)*n<=0)throw"Infinite loop error";for(var r=[],o=t;o<e;o+=n)r.push(o);return r},t.flattenRecord=i,t.flattenRecordWithIntegerKeys=function(e){return i(e,Number.parseInt)},t.flattenRecordWithNumberKeys=function(e){return i(e,Number.parseFloat)},t.flattenRecordWithStringKeys=function(e){return i(e,(function(e){return e}))},t.sign=l,t.compare=s,t.areEqual=function(e,n,r){return void 0===r&&(r=t.DEFAULT_EPSILON),0===s(e,n,r)},t.binarySearch=function(e,t){if(0===e.length)return null;for(var n=0,r=e.length-1;;){var o=n+r>>1,a=e[o],i=t(a);if(0===i)return{arrayEntry:a,arrayIndex:o};if(i>0?r=o-1:n=o+1,n>r)break}return null},function(e){e.THROW_ERROR="Throw error",e.DELETE_AND_ADD="Delete and add",e.DELETE="Delete",e.ADD="Add",e.DO_NOTHING="Do nothing"}(o=t.HandleQueryNotFound||(t.HandleQueryNotFound={})),t.sortedArraySplice=function(e,t,n,a,i){void 0===a&&(a=[]),void 0===i&&(i=o.THROW_ERROR);for(var l=0,s=e.length-1,c=!0;l<=s;){var u=l+s>>1,d=t(e[u]);if(0===d){l=u,c=!1;break}d>0?s=u-1:l=u+1}var f=n,p=a;if(c)switch(i){case o.THROW_ERROR:throw"The query was not found within the input sorted array.";case o.DELETE_AND_ADD:break;case o.DELETE:p=[];break;case o.ADD:f=0;break;case o.DO_NOTHING:p=[],f=0;break;default:throw"Unhandled switch case."}e.splice.apply(e,r([l,f],p,!1))},t.radiansToDegrees=function(e){return 57.2957795131*e},t.degreesToRadians=function(e){return.01745329251*e},t.subtractNumbers=c,t.subtractNumbersNegated=function(e,t){return t-e},t.parseInteger=function(e){return Number.parseInt(e)},t.min=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return u(e,t,(function(e){return e>0}))},t.max=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return u(e,t,(function(e){return e<0}))},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.getLineBoundingPath=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=1);var o=(0,a.subtract)(t,e),i=(0,a.scaleUp)((0,a.orthogonalize)(o),r/(0,a.magnitude)(o)),l=(0,a.add)(e,i),s=(0,a.subtract)(e,i),c=(0,a.add)(t,i),u=(0,a.subtract)(t,i);return"M ".concat(l.x," ").concat(l.y," A 1 1 0 0 ").concat(n?1:0," ").concat(s.x," ").concat(s.y," L ").concat(u.x," ").concat(u.y," A 1 1 0 0 ").concat(n?1:0," ").concat(c.x," ").concat(c.y," z")},t.median=function(e){e.sort(c);var t=e.length>>1;return e.length%2==0?.5*(e[t-1]+e[t]):e[t]}},7197:function(e,t,n){var r=n(7009).Symbol;e.exports=r},9066:function(e,t,n){var r=n(7197),o=n(1587),a=n(3581),i="[object Null]",l="[object Undefined]",s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?l:i:s&&s in Object(e)?o(e):a(e)}},821:function(e,t,n){var r=n(6050),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},1032:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},1587:function(e,t,n){var r=n(7197),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(s){}var o=i.call(e);return r&&(t?e[l]=n:delete e[l]),o}},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7009:function(e,t,n){var r=n(1032),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},6050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8573:function(e,t,n){var r=n(8092),o=n(72),a=n(2582),i="Expected a function",l=Math.max,s=Math.min;e.exports=function(e,t,n){var c,u,d,f,p,h,m=0,v=!1,x=!1,g=!0;if("function"!=typeof e)throw new TypeError(i);function y(t){var n=c,r=u;return c=u=void 0,m=t,f=e.apply(r,n)}function b(e){var n=e-h;return void 0===h||n>=t||n<0||x&&e-m>=d}function N(){var e=o();if(b(e))return E(e);p=setTimeout(N,function(e){var n=t-(e-h);return x?s(n,d-(e-m)):n}(e))}function E(e){return p=void 0,g&&c?y(e):(c=u=void 0,f)}function C(){var e=o(),n=b(e);if(c=arguments,u=this,h=e,n){if(void 0===p)return function(e){return m=e,p=setTimeout(N,t),v?y(e):f}(h);if(x)return clearTimeout(p),p=setTimeout(N,t),y(h)}return void 0===p&&(p=setTimeout(N,t)),f}return t=a(t)||0,r(n)&&(v=!!n.leading,d=(x="maxWait"in n)?l(a(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==p&&clearTimeout(p),m=0,c=h=u=p=void 0},C.flush=function(){return void 0===p?f:E(o())},C}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,t,n){var r=n(9066),o=n(3141),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==a}},72:function(e,t,n){var r=n(7009);e.exports=function(){return r.Date.now()}},3038:function(e,t,n){var r=n(8573),o=n(8092),a="Expected a function";e.exports=function(e,t,n){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),r(e,t,{leading:i,maxWait:t,trailing:l})}},2582:function(e,t,n){var r=n(821),o=n(8092),a=n(152),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):l.test(e)?i:+e}},9100:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(1413),o=n(5987),a=n(2791),i=function(e){var t=function(e){return e.replace(/^([A-Z])|[\s-_]+(\w)/g,(function(e,t,n){return n?n.toUpperCase():t.toLowerCase()}))}(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e,t,n){return Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t})).join(" ").trim()},s=n(9439),c=n(3433),u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},d=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],f=(0,a.forwardRef)((function(e,t){var n=e.color,i=void 0===n?"currentColor":n,f=e.size,p=void 0===f?24:f,h=e.strokeWidth,m=void 0===h?2:h,v=e.absoluteStrokeWidth,x=e.className,g=void 0===x?"":x,y=e.children,b=e.iconNode,N=(0,o.Z)(e,d);return(0,a.createElement)("svg",(0,r.Z)((0,r.Z)((0,r.Z)({ref:t},u),{},{width:p,height:p,stroke:i,strokeWidth:v?24*Number(m)/Number(p):m,className:l("lucide",g)},!y&&!function(e){for(var t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0}(N)&&{"aria-hidden":"true"}),N),[].concat((0,c.Z)(b.map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,a.createElement)(n,r)}))),(0,c.Z)(Array.isArray(y)?y:[y])))})),p=["className"],h=function(e,t){var n=(0,a.forwardRef)((function(n,s){var c,u=n.className,d=(0,o.Z)(n,p);return(0,a.createElement)(f,(0,r.Z)({ref:s,iconNode:t,className:l("lucide-".concat((c=i(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),u)},d))}));return n.displayName=i(e),n}},966:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(0,n(9100).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5094:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(0,n(9100).Z)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]])},6088:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=(0,n(9100).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4463:function(e,t,n){"use strict";var r=n(2791),o=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=v.hasOwnProperty(t)?v[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),w=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,D=Object.assign;function Z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||o[i]!==a[l]){var s="\n"+o[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function U(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case E:return"Portal";case S:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function V(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var xe=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Ie=null;function Se(e){if(e=bo(e)){if("function"!==typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=Eo(t),Ee(e.stateNode,e.type,t))}}function _e(e){Ce?Ie?Ie.push(e):Ie=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=Ie;if(Ie=Ce=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Re=!1;function ke(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==Ce||null!==Ie)&&(Pe(),Ae())}}function we(e,t){var n=e.stateNode;if(null===n)return null;var r=Eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Me=!1}function je(e,t,n,r,o,a,i,l,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,De=null,Ze=!1,Fe=null,Be={onError:function(e){Le=!0,De=e}};function Ue(e,t,n,r,o,a,i,l,s){Le=!1,De=null,je.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ge(o),e;if(i===r)return Ge(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var l=!1,s=o.child;s;){if(s===n){l=!0,n=o,r=i;break}if(s===r){l=!0,r=o,n=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===n){l=!0,n=i,r=o;break}if(s===r){l=!0,r=i,n=o;break}s=s.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ve=o.unstable_scheduleCallback,qe=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Qe=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/st|0)|0},lt=Math.log,st=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~o;0!==l?r=dt(l):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~o)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,Et,Ct,It,St,_t=!1,At=[],Tt=null,Pt=null,Rt=null,kt=new Map,wt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wt.delete(t.pointerId)}}function Lt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=yo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Zt(e)&&n.delete(t)}function Bt(){_t=!1,null!==Tt&&Zt(Tt)&&(Tt=null),null!==Pt&&Zt(Pt)&&(Pt=null),null!==Rt&&Zt(Rt)&&(Rt=null),kt.forEach(Ft),wt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),null!==Rt&&Ut(Rt,e),kt.forEach(t),wt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Mt.shift()}var Wt=b.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var o=yt,a=Wt.transition;Wt.transition=null;try{yt=1,Vt(e,t,n,r)}finally{yt=o,Wt.transition=a}}function Kt(e,t,n,r){var o=yt,a=Wt.transition;Wt.transition=null;try{yt=4,Vt(e,t,n,r)}finally{yt=o,Wt.transition=a}}function Vt(e,t,n,r){if(Gt){var o=Xt(e,t,n,r);if(null===o)Gr(e,t,r,qt,n),jt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,o),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,r,o),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return kt.set(a,Lt(kt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,wt.set(a,Lt(wt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&Nt(a),null===(a=Xt(e,t,n,r))&&Gr(e,t,r,qt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=yo(e=Ne(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,ln,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=D({},cn,{view:0,detail:0}),fn=on(dn),pn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,ln=e.screenY-sn.screenY):ln=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),hn=on(pn),mn=on(D({},pn,{dataTransfer:0})),vn=on(D({},dn,{relatedTarget:0})),xn=on(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(gn),bn=on(D({},cn,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Sn(){return In}var _n=D({},dn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(_n),Tn=on(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=on(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wn=on(kn),Mn=[9,13,27,32],On=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Dn=u&&(!On||jn&&8<jn&&11>=jn),Zn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Vn=null;function qn(e){Zr(e,0)}function Xn(e){if(V(No(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(u){var $n;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Vn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Vn)){var t=[];Hn(t,Vn,e,Ne(e)),ke(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Vn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Vn)}function ar(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!lr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var i=ur(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,xr=null,gr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==q(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(xr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionend:Nr("Transition","TransitionEnd")},Cr={},Ir={};function Sr(e){if(Cr[e])return Cr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Cr[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var _r=Sr("animationend"),Ar=Sr("animationiteration"),Tr=Sr("animationstart"),Pr=Sr("transitionend"),Rr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){Rr.set(e,t),s(t,[e])}for(var Mr=0;Mr<kr.length;Mr++){var Or=kr[Mr];wr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}wr(_r,"onAnimationEnd"),wr(Ar,"onAnimationIteration"),wr(Tr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,l,s,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=De;Le=!1,De=null,Ze||(Ze=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,c),a=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,c=l.currentTarget,l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,c),a=s}}}if(Ze)throw e=Fe,Ze=!1,Fe=null,e}function Fr(e,t){var n=t[vo];void 0===n&&(n=t[vo]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var o=Ht;break;case 4:o=Kt;break;default:o=Vt}n=o.bind(null,t,n,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=yo(l)))return;if(5===(s=i.tag)||6===s){r=a=i;continue e}l=l.parentNode}}r=r.return}ke((function(){var r=a,o=Ne(n),i=[];e:{var l=Rr.get(e);if(void 0!==l){var s=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=vn;break;case"focusout":c="blur",s=vn;break;case"beforeblur":case"afterblur":s=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case _r:case Ar:case Tr:s=xn;break;case Pr:s=Rn;break;case"scroll":s=fn;break;case"wheel":s=wn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==l?l+"Capture":null:l;u=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=we(h,f))&&u.push(Hr(h,m,p)))),d)break;h=h.return}0<u.length&&(l=new s(l,c,null,n,o),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yo(c)&&!c[mo])&&(s||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?yo(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(u=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==s?l:No(s),p=null==c?l:No(c),(l=new u(m,h+"leave",s,n,o)).target=d,l.relatedTarget=p,m=null,yo(o)===r&&((u=new u(f,h+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,s&&c)e:{for(f=c,h=0,p=u=s;p;p=Vr(p))h++;for(p=0,m=f;m;m=Vr(m))p++;for(;0<h-p;)u=Vr(u),h--;for(;0<p-h;)f=Vr(f),p--;for(;h--;){if(u===f||null!==f&&u===f.alternate)break e;u=Vr(u),f=Vr(f)}u=null}else u=null;null!==s&&qr(i,l,s,u,!1),null!==c&&null!==d&&qr(i,d,c,u,!0)}if("select"===(s=(l=r?No(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var v=Yn;else if(Gn(l))if(Qn)v=ir;else{v=or;var x=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(v=ar);switch(v&&(v=v(e,r))?Hn(i,v,n,o):(x&&x(e,l,r),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&ee(l,"number",l.value)),x=r?No(r):window,e){case"focusin":(Gn(x)||"true"===x.contentEditable)&&(vr=x,xr=r,gr=null);break;case"focusout":gr=xr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,o)}var g;if(On)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(g=en()):($t="value"in(Qt=o)?Qt.value:Qt.textContent,zn=!0)),0<(x=Kr(r,y)).length&&(y=new bn(y,e,null,n,o),i.push({event:y,listeners:x}),g?y.data=g:null!==(g=Un(n))&&(y.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Zn);case"textInput":return(e=t.data)===Zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Jt=$t=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=g))}Zr(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=we(e,n))&&r.unshift(Hr(e,a,o)),null!=(a=we(e,t))&&r.push(Hr(e,a,o))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==c&&(l=c,o?null!=(s=we(n,a))&&i.unshift(Hr(n,s,l)):o||null!=(s=we(n,a))&&i.push(Hr(n,s,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(lo)}:ro;function lo(e){setTimeout((function(){throw e}))}function so(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,mo="__reactContainer$"+fo,vo="__reactEvents$"+fo,xo="__reactListeners$"+fo,go="__reactHandles$"+fo;function yo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function No(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Eo(e){return e[ho]||null}var Co=[],Io=-1;function So(e){return{current:e}}function _o(e){0>Io||(e.current=Co[Io],Co[Io]=null,Io--)}function Ao(e,t){Io++,Co[Io]=e.current,e.current=t}var To={},Po=So(To),Ro=So(!1),ko=To;function wo(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oo(){_o(Ro),_o(Po)}function jo(e,t,n){if(Po.current!==To)throw Error(a(168));Ao(Po,t),Ao(Ro,n)}function Lo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,W(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,ko=Po.current,Ao(Po,e),Ao(Ro,Ro.current),!0}function Zo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Lo(e,t,ko),r.__reactInternalMemoizedMergedChildContext=e,_o(Ro),_o(Po),Ao(Po,e)):_o(Ro),Ao(Ro,n)}var Fo=null,Bo=!1,Uo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Wo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=yt;try{var n=Fo;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,Bo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ve(Je,Wo),o}finally{yt=t,Uo=!1}}return null}var Go=[],Ho=0,Ko=null,Vo=0,qo=[],Xo=0,Yo=null,Qo=1,$o="";function Jo(e,t){Go[Ho++]=Vo,Go[Ho++]=Ko,Ko=e,Vo=t}function ea(e,t,n){qo[Xo++]=Qo,qo[Xo++]=$o,qo[Xo++]=Yo,Yo=e;var r=Qo;e=$o;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Qo=1<<32-it(t)+o|n<<o|r,$o=a+e}else Qo=1<<a|n<<o|r,$o=e}function ta(e){null!==e.return&&(Jo(e,1),ea(e,1,0))}function na(e){for(;e===Ko;)Ko=Go[--Ho],Go[Ho]=null,Vo=Go[--Ho],Go[Ho]=null;for(;e===Yo;)Yo=qo[--Xo],qo[Xo]=null,$o=qo[--Xo],qo[Xo]=null,Qo=qo[--Xo],qo[Xo]=null}var ra=null,oa=null,aa=!1,ia=null;function la(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Qo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(aa){var t=oa;if(t){var n=t;if(!sa(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&sa(e,t)?la(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw pa(),Error(a(418));for(;t;)la(e,t),t=co(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=co(e.nextSibling)}function ha(){oa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var va=b.ReactCurrentBatchConfig;function xa(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=So(null),ya=null,ba=null,Na=null;function Ea(){Na=ba=ya=null}function Ca(e){var t=ga.current;_o(ga),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ya=e,Na=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Aa=null;function Ta(e){null===Aa?Aa=[e]:Aa.push(e)}function Pa(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ta(t)):(n.next=o.next,o.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ka=!1;function wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ps)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Ra(e,n)}return null===(o=r.interleaved)?(t.next=t,Ta(r)):(t.next=o.next,o.next=t),r.interleaved=t,Ra(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Za(e,t,n,r){var o=e.updateQueue;ka=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,c=s.next;s.next=null,null===i?a=c:i.next=c,i=s;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s))}if(null!==a){var d=o.baseState;for(i=0,u=c=s=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,m=l;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=D({},d,f);break e;case 2:ka=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=p,s=d):u=u.next=p,i|=f;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(f=l).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(s=d),o.baseState=s,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Ds|=i,e.lanes=i,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Ba=(new r.Component).refs;function Ua(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),a=Oa(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,o))&&(rc(t,e,o,r),La(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),a=Oa(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,o))&&(rc(t,e,o,r),La(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Oa(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=ja(e,o,r))&&(rc(t,e,r,n),La(t,e,r))}};function Wa(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(o,a))}function Ga(e,t,n){var r=!1,o=To,a=t.contextType;return"object"===typeof a&&null!==a?a=_a(a):(o=Mo(t)?ko:Po.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?wo(e,o):To),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Ba,wa(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=_a(a):(a=Mo(t)?ko:Po.current,o.context=wo(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ua(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&za.enqueueReplaceState(o,o.state,null),Za(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===Ba&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Zc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===w&&Xa(a)===t.type)?((r=o(t,n.props)).ref=Va(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Va(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Va(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case w:return f(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===o?c(e,t,n,r):null;case E:return n.key===o?u(e,t,n,r):null;case w:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||j(n))return null!==o?null:d(e,t,n,r,null);qa(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case w:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,o,null);qa(t,r)}return null}function m(o,a,l,s){for(var c=null,u=null,d=a,m=a=0,v=null;null!==d&&m<l.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var x=p(o,d,l[m],s);if(null===x){null===d&&(d=v);break}e&&d&&null===x.alternate&&t(o,d),a=i(x,a,m),null===u?c=x:u.sibling=x,u=x,d=v}if(m===l.length)return n(o,d),aa&&Jo(o,m),c;if(null===d){for(;m<l.length;m++)null!==(d=f(o,l[m],s))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return aa&&Jo(o,m),c}for(d=r(o,d);m<l.length;m++)null!==(v=h(d,o,m,l[m],s))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=i(v,a,m),null===u?c=v:u.sibling=v,u=v);return e&&d.forEach((function(e){return t(o,e)})),aa&&Jo(o,m),c}function v(o,l,s,c){var u=j(s);if("function"!==typeof u)throw Error(a(150));if(null==(s=u.call(s)))throw Error(a(151));for(var d=u=null,m=l,v=l=0,x=null,g=s.next();null!==m&&!g.done;v++,g=s.next()){m.index>v?(x=m,m=null):x=m.sibling;var y=p(o,m,g.value,c);if(null===y){null===m&&(m=x);break}e&&m&&null===y.alternate&&t(o,m),l=i(y,l,v),null===d?u=y:d.sibling=y,d=y,m=x}if(g.done)return n(o,m),aa&&Jo(o,v),u;if(null===m){for(;!g.done;v++,g=s.next())null!==(g=f(o,g.value,c))&&(l=i(g,l,v),null===d?u=g:d.sibling=g,d=g);return aa&&Jo(o,v),u}for(m=r(o,m);!g.done;v++,g=s.next())null!==(g=h(m,o,v,g.value,c))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),l=i(g,l,v),null===d?u=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(o,e)})),aa&&Jo(o,v),u}return function e(r,a,i,s){if("object"===typeof i&&null!==i&&i.type===C&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case N:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===C){if(7===u.tag){n(r,u.sibling),(a=o(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===w&&Xa(c)===u.type){n(r,u.sibling),(a=o(u,i.props)).ref=Va(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===C?((a=Lc(i.props.children,r.mode,s,i.key)).return=r,r=a):((s=jc(i.type,i.key,i.props,null,r.mode,s)).ref=Va(r,a,i),s.return=r,r=s)}return l(r);case E:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(i,r.mode,s)).return=r,r=a}return l(r);case w:return e(r,a,(u=i._init)(i._payload),s)}if(te(i))return m(r,a,i,s);if(j(i))return v(r,a,i,s);qa(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Zc(i,r.mode,s)).return=r,r=a),l(r)):n(r,a)}}var Qa=Ya(!0),$a=Ya(!1),Ja={},ei=So(Ja),ti=So(Ja),ni=So(Ja);function ri(e){if(e===Ja)throw Error(a(174));return e}function oi(e,t){switch(Ao(ni,t),Ao(ti,e),Ao(ei,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_o(ei),Ao(ei,t)}function ai(){_o(ei),_o(ti),_o(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=se(t,e.type);t!==n&&(Ao(ti,e),Ao(ei,n))}function li(e){ti.current===e&&(_o(ei),_o(ti))}var si=So(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=[];function di(){for(var e=0;e<ui.length;e++)ui[e]._workInProgressVersionPrimary=null;ui.length=0}var fi=b.ReactCurrentDispatcher,pi=b.ReactCurrentBatchConfig,hi=0,mi=null,vi=null,xi=null,gi=!1,yi=!1,bi=0,Ni=0;function Ei(){throw Error(a(321))}function Ci(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function Ii(e,t,n,r,o,i){if(hi=i,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?ll:sl,e=n(r,o),yi){i=0;do{if(yi=!1,bi=0,25<=i)throw Error(a(301));i+=1,xi=vi=null,t.updateQueue=null,fi.current=cl,e=n(r,o)}while(yi)}if(fi.current=il,t=null!==vi&&null!==vi.next,hi=0,xi=vi=mi=null,gi=!1,t)throw Error(a(300));return e}function Si(){var e=0!==bi;return bi=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?mi.memoizedState=xi=e:xi=xi.next=e,xi}function Ai(){if(null===vi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=vi.next;var t=null===xi?mi.memoizedState:xi.next;if(null!==t)xi=t,vi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vi=e).memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},null===xi?mi.memoizedState=xi=e:xi=xi.next=e}return xi}function Ti(e,t){return"function"===typeof t?t(e):t}function Pi(e){var t=Ai(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=l=null,c=null,u=i;do{var d=u.lane;if((hi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(s=c=f,l=r):c=c.next=f,mi.lanes|=d,Ds|=d}u=u.next}while(null!==u&&u!==i);null===c?l=r:c.next=s,lr(r,t.memoizedState)||(bl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,mi.lanes|=i,Ds|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=Ai(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{i=e(i,l.action),l=l.next}while(l!==o);lr(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ki(){}function wi(e,t){var n=mi,r=Ai(),o=t(),i=!lr(r.memoizedState,o);if(i&&(r.memoizedState=o,bl=!0),r=r.queue,Gi(ji.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==xi&&1&xi.memoizedState.tag){if(n.flags|=2048,Fi(9,Oi.bind(null,n,r,o,t),void 0,null),null===Rs)throw Error(a(349));0!==(30&hi)||Mi(n,t,o)}return o}function Mi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oi(e,t,n,r){t.value=n,t.getSnapshot=r,Li(t)&&Di(e)}function ji(e,t,n){return n((function(){Li(t)&&Di(e)}))}function Li(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Di(e){var t=Ra(e,1);null!==t&&rc(t,e,1,-1)}function Zi(e){var t=_i();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:e},t.queue=e,e=e.dispatch=nl.bind(null,mi,e),[t.memoizedState,e]}function Fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bi(){return Ai().memoizedState}function Ui(e,t,n,r){var o=_i();mi.flags|=e,o.memoizedState=Fi(1|t,n,void 0,void 0===r?null:r)}function zi(e,t,n,r){var o=Ai();r=void 0===r?null:r;var a=void 0;if(null!==vi){var i=vi.memoizedState;if(a=i.destroy,null!==r&&Ci(r,i.deps))return void(o.memoizedState=Fi(t,n,a,r))}mi.flags|=e,o.memoizedState=Fi(1|t,n,a,r)}function Wi(e,t){return Ui(8390656,8,e,t)}function Gi(e,t){return zi(2048,8,e,t)}function Hi(e,t){return zi(4,2,e,t)}function Ki(e,t){return zi(4,4,e,t)}function Vi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,Vi.bind(null,t,e),n)}function Xi(){}function Yi(e,t){var n=Ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ci(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qi(e,t){var n=Ai();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ci(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $i(e,t,n){return 0===(21&hi)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),mi.lanes|=n,Ds|=n,e.baseState=!0),t)}function Ji(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=pi.transition;pi.transition={};try{e(!1),t()}finally{yt=n,pi.transition=r}}function el(){return Ai().memoizedState}function tl(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rl(e))ol(t,n);else if(null!==(n=Pa(e,t,n,r))){rc(n,e,r,tc()),al(n,t,r)}}function nl(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rl(e))ol(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,n);if(o.hasEagerState=!0,o.eagerState=l,lr(l,i)){var s=t.interleaved;return null===s?(o.next=o,Ta(t)):(o.next=s.next,s.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Pa(e,t,o,r))&&(rc(n,e,r,o=tc()),al(n,t,r))}}function rl(e){var t=e.alternate;return e===mi||null!==t&&t===mi}function ol(e,t){yi=gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function al(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var il={readContext:_a,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},ll={readContext:_a,useCallback:function(e,t){return _i().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Wi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ui(4194308,4,Vi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ui(4,2,e,t)},useMemo:function(e,t){var n=_i();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_i();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tl.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_i().memoizedState=e},useState:Zi,useDebugValue:Xi,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=Zi(!1),t=e[0];return e=Ji.bind(null,e[1]),_i().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mi,o=_i();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rs)throw Error(a(349));0!==(30&hi)||Mi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Wi(ji.bind(null,r,i,e),[e]),r.flags|=2048,Fi(9,Oi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_i(),t=Rs.identifierPrefix;if(aa){var n=$o;t=":"+t+"R"+(n=(Qo&~(1<<32-it(Qo)-1)).toString(32)+n),0<(n=bi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ni++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sl={readContext:_a,useCallback:Yi,useContext:_a,useEffect:Gi,useImperativeHandle:qi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:Qi,useReducer:Pi,useRef:Bi,useState:function(){return Pi(Ti)},useDebugValue:Xi,useDeferredValue:function(e){return $i(Ai(),vi.memoizedState,e)},useTransition:function(){return[Pi(Ti)[0],Ai().memoizedState]},useMutableSource:ki,useSyncExternalStore:wi,useId:el,unstable_isNewReconciler:!1},cl={readContext:_a,useCallback:Yi,useContext:_a,useEffect:Gi,useImperativeHandle:qi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:Qi,useReducer:Ri,useRef:Bi,useState:function(){return Ri(Ti)},useDebugValue:Xi,useDeferredValue:function(e){var t=Ai();return null===vi?t.memoizedState=e:$i(t,vi.memoizedState,e)},useTransition:function(){return[Ri(Ti)[0],Ai().memoizedState]},useMutableSource:ki,useSyncExternalStore:wi,useId:el,unstable_isNewReconciler:!1};function ul(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pl="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ks=r),fl(0,t)},n}function ml(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){fl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!==typeof r&&(null===Vs?Vs=new Set([this]):Vs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var yl=b.ReactCurrentOwner,bl=!1;function Nl(e,t,n,r){t.child=null===e?$a(t,null,n,r):Qa(t,e.child,n,r)}function El(e,t,n,r,o){n=n.render;var a=t.ref;return Sa(t,o),r=Ii(e,t,n,r,a,o),n=Si(),null===e||bl?(aa&&n&&ta(t),t.flags|=1,Nl(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Cl(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Mc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Il(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)return Hl(e,t,o)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Il(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bl=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Hl(e,t,o);0!==(131072&e.flags)&&(bl=!0)}}return Al(e,t,n,r,o)}function Sl(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(Os,Ms),Ms|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(Os,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ao(Os,Ms),Ms|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ao(Os,Ms),Ms|=r;return Nl(e,t,o,n),t.child}function _l(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Al(e,t,n,r,o){var a=Mo(n)?ko:Po.current;return a=wo(t,a),Sa(t,o),n=Ii(e,t,n,r,a,o),r=Si(),null===e||bl?(aa&&r&&ta(t),t.flags|=1,Nl(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hl(e,t,o))}function Tl(e,t,n,r,o){if(Mo(n)){var a=!0;Do(t)}else a=!1;if(Sa(t,o),null===t.stateNode)Gl(e,t),Ga(t,n,r),Ka(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var s=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=_a(c):c=wo(t,c=Mo(n)?ko:Po.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||s!==c)&&Ha(t,i,r,c),ka=!1;var f=t.memoizedState;i.state=f,Za(t,r,i,o),s=t.memoizedState,l!==r||f!==s||Ro.current||ka?("function"===typeof u&&(Ua(t,n,u,r),s=t.memoizedState),(l=ka||Wa(t,n,l,r,f,s,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),i.props=r,i.state=s,i.context=c,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ma(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:xa(t.type,l),i.props=c,d=t.pendingProps,f=i.context,"object"===typeof(s=n.contextType)&&null!==s?s=_a(s):s=wo(t,s=Mo(n)?ko:Po.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||f!==s)&&Ha(t,i,r,s),ka=!1,f=t.memoizedState,i.state=f,Za(t,r,i,o);var h=t.memoizedState;l!==d||f!==h||Ro.current||ka?("function"===typeof p&&(Ua(t,n,p,r),h=t.memoizedState),(c=ka||Wa(t,n,c,r,f,h,s)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=s,r=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,a,o)}function Pl(e,t,n,r,o,a){_l(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Zo(t,n,!1),Hl(e,t,a);r=t.stateNode,yl.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Qa(t,e.child,null,a),t.child=Qa(t,null,l,a)):Nl(e,t,l,a),t.memoizedState=r.state,o&&Zo(t,n,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?jo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&jo(0,t.context,!1),oi(e,t.containerInfo)}function kl(e,t,n,r,o){return ha(),ma(o),t.flags|=256,Nl(e,t,n,r),t.child}var wl,Ml,Ol,jl,Ll={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zl(e,t,n){var r,o=t.pendingProps,i=si.current,l=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ao(si,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,l?(o=t.mode,l=t.child,s={mode:"hidden",children:s},0===(1&o)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Dc(s,o,0,null),e=Lc(e,o,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Dl(n),t.memoizedState=Ll,e):Fl(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,l){if(n)return 256&t.flags?(t.flags&=-257,Bl(e,t,l,r=dl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Dc({mode:"visible",children:r.children},o,0,null),(i=Lc(i,o,l,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Qa(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=Ll,i);if(0===(1&t.mode))return Bl(e,t,l,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Bl(e,t,l,r=dl(i=Error(a(419)),r,void 0))}if(s=0!==(l&e.childLanes),bl||s){if(null!==(r=Rs)){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|l))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Ra(e,o),rc(r,e,o,-1))}return vc(),Bl(e,t,l,r=dl(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(qo[Xo++]=Qo,qo[Xo++]=$o,qo[Xo++]=Yo,Qo=e.id,$o=e.overflow,Yo=t),t=Fl(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(l){l=o.fallback,s=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&s)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=Oc(r,l):(l=Lc(l,s,n,null)).flags|=2,l.return=t,o.return=t,o.sibling=l,t.child=o,o=l,l=t.child,s=null===(s=e.child.memoizedState)?Dl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~n,t.memoizedState=Ll,o}return e=(l=e.child).sibling,o=Oc(l,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fl(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bl(e,t,n,r){return null!==r&&ma(r),Qa(t,e.child,null,n),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ul(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function zl(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Wl(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Nl(e,t,r.children,n),0!==(2&(r=si.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ul(e,n,t);else if(19===e.tag)Ul(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(si,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ci(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),zl(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ci(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}zl(t,!0,n,null,a);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kl(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ql(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return Mo(t.type)&&Oo(),Vl(t),null;case 3:return r=t.stateNode,ai(),_o(Ro),_o(Po),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(lc(ia),ia=null))),Ml(e,t),Vl(t),null;case 5:li(t);var o=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Ol(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vl(t),null}if(e=ri(ei.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[ho]=i,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<jr.length;o++)Fr(jr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":oe(r,i),Fr("invalid",r)}for(var s in ge(n,i),o=null,i)if(i.hasOwnProperty(s)){var c=i[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),o=["children",""+c]):l.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":K(r),J(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[po]=t,e[ho]=r,wl(e,t,!1,!1),t.stateNode=e;e:{switch(s=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<jr.length;o++)Fr(jr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":Y(e,r),o=X(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(i in ge(n,o),c=o)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ve(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Fr("scroll",e):null!=u&&y(e,i,u,s))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)jl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ri(ni.current),ri(ei.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Vl(t),null;case 13:if(_o(si),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),ha(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),i=!1}else null!==ia&&(lc(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&si.current)?0===js&&(js=3):vc())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return ai(),Ml(e,t),null===e&&zr(t.stateNode.containerInfo),Vl(t),null;case 10:return Ca(t.type._context),Vl(t),null;case 19:if(_o(si),null===(i=t.memoizedState))return Vl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Kl(i,!1);else{if(0!==js||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ci(e))){for(t.flags|=128,Kl(i,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ao(si,1&si.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Ws&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!aa)return Vl(t),null}else 2*Qe()-i.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=si.current,Ao(si,r?1&n|2:1&n),t):(Vl(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ms)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xl(e,t){switch(na(t),t.tag){case 1:return Mo(t.type)&&Oo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ai(),_o(Ro),_o(Po),di(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return li(t),null;case 13:if(_o(si),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _o(si),null;case 4:return ai(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}wl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ml=function(){},Ol=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ri(ei.current);var a,i=null;switch(n){case"input":o=X(e,o),r=X(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ge(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var s=o[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(l.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(s=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(null!=c||null!=s))if("style"===u)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(l.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),i||s===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},jl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yl=!1,Ql=!1,$l="function"===typeof WeakSet?WeakSet:Set,Jl=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&ts(t,n,a)}o=o.next}while(o!==r)}}function os(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function is(e){var t=e.alternate;null!==t&&(e.alternate=null,is(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[vo],delete t[xo],delete t[go])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ls(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function us(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(us(e,t,n),e=e.sibling;null!==e;)us(e,t,n),e=e.sibling}var ds=null,fs=!1;function ps(e,t,n){for(n=n.child;null!==n;)hs(e,t,n),n=n.sibling}function hs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(l){}switch(n.tag){case 5:Ql||es(n,t);case 6:var r=ds,o=fs;ds=null,ps(e,t,n),fs=o,null!==(ds=r)&&(fs?(e=ds,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ds.removeChild(n.stateNode));break;case 18:null!==ds&&(fs?(e=ds,n=n.stateNode,8===e.nodeType?so(e.parentNode,n):1===e.nodeType&&so(e,n),zt(e)):so(ds,n.stateNode));break;case 4:r=ds,o=fs,ds=n.stateNode.containerInfo,fs=!0,ps(e,t,n),ds=r,fs=o;break;case 0:case 11:case 14:case 15:if(!Ql&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&ts(n,t,i),o=o.next}while(o!==r)}ps(e,t,n);break;case 1:if(!Ql&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Sc(n,t,l)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:1&n.mode?(Ql=(r=Ql)||null!==n.memoizedState,ps(e,t,n),Ql=r):ps(e,t,n);break;default:ps(e,t,n)}}function ms(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $l),t.forEach((function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 5:ds=s.stateNode,fs=!1;break e;case 3:case 4:ds=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ds)throw Error(a(160));hs(i,l,o),ds=null,fs=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Sc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xs(t,e),t=t.sibling}function xs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),gs(e),4&r){try{rs(3,e,e.return),os(3,e)}catch(v){Sc(e,e.return,v)}try{rs(5,e,e.return)}catch(v){Sc(e,e.return,v)}}break;case 1:vs(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(vs(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(v){Sc(e,e.return,v)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===i.type&&null!=i.name&&Q(o,i),ye(s,l);var u=ye(s,i);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];"style"===d?ve(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):y(o,d,f,u)}switch(s){case"input":$(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?ne(o,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[ho]=i}catch(v){Sc(e,e.return,v)}}break;case 6:if(vs(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(v){Sc(e,e.return,v)}}break;case 3:if(vs(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){Sc(e,e.return,v)}break;case 4:default:vs(t,e),gs(e);break;case 13:vs(t,e),gs(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(zs=Qe())),4&r&&ms(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ql=(u=Ql)||d,vs(t,e),Ql=u):vs(t,e),gs(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jl=e,d=e.child;null!==d;){for(f=Jl=d;null!==Jl;){switch(h=(p=Jl).child,p.tag){case 0:case 11:case 14:case 15:rs(4,p,p.return);break;case 1:es(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Sc(r,n,v)}}break;case 5:es(p,p.return);break;case 22:if(null!==p.memoizedState){Es(f);continue}}null!==h?(h.return=p,Jl=h):Es(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=f.stateNode,l=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=me("display",l))}catch(v){Sc(e,e.return,v)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Sc(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),gs(e),4&r&&ms(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ls(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),us(e,ss(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;cs(e,ss(e),i);break;default:throw Error(a(161))}}catch(l){Sc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ys(e,t,n){Jl=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Jl;){var o=Jl,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Yl;if(!i){var l=o.alternate,s=null!==l&&null!==l.memoizedState||Ql;l=Yl;var c=Ql;if(Yl=i,(Ql=s)&&!c)for(Jl=o;null!==Jl;)s=(i=Jl).child,22===i.tag&&null!==i.memoizedState?Cs(o):null!==s?(s.return=i,Jl=s):Cs(o);for(;null!==a;)Jl=a,bs(a,t,n),a=a.sibling;Jl=o,Yl=l,Ql=c}Ns(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Jl=a):Ns(e)}}function Ns(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ql||os(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ql)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:xa(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Fa(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,l,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Ql||512&t.flags&&as(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Jl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jl=n;break}Jl=t.return}}function Es(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jl=n;break}Jl=t.return}}function Cs(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{os(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Sc(t,o,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var i=t.return;try{as(t)}catch(s){Sc(t,i,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var Is,Ss=Math.ceil,_s=b.ReactCurrentDispatcher,As=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Ps=0,Rs=null,ks=null,ws=0,Ms=0,Os=So(0),js=0,Ls=null,Ds=0,Zs=0,Fs=0,Bs=null,Us=null,zs=0,Ws=1/0,Gs=null,Hs=!1,Ks=null,Vs=null,qs=!1,Xs=null,Ys=0,Qs=0,$s=null,Js=-1,ec=0;function tc(){return 0!==(6&Ps)?Qe():-1!==Js?Js:Js=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ps)&&0!==ws?ws&-ws:null!==va.transition?(0===ec&&(ec=mt()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Qs)throw Qs=0,$s=null,Error(a(185));xt(e,n,r),0!==(2&Ps)&&e===Rs||(e===Rs&&(0===(2&Ps)&&(Zs|=n),4===js&&sc(e,ws)),oc(e,r),1===n&&0===Ps&&0===(1&t.mode)&&(Ws=Qe()+500,Bo&&Wo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),l=1<<i,s=o[i];-1===s?0!==(l&n)&&0===(l&r)||(o[i]=pt(l,t)):s<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=ft(e,e===Rs?ws:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bo=!0,zo(e)}(cc.bind(null,e)):zo(cc.bind(null,e)),io((function(){0===(6&Ps)&&Wo()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Js=-1,ec=0,0!==(6&Ps))throw Error(a(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=ft(e,e===Rs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var o=Ps;Ps|=2;var i=mc();for(Rs===e&&ws===t||(Gs=null,Ws=Qe()+500,pc(e,t));;)try{yc();break}catch(s){hc(e,s)}Ea(),_s.current=i,Ps=o,null!==ks?t=0:(Rs=null,ws=0,t=js)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=ic(e,o))),1===t)throw n=Ls,pc(e,0),sc(e,r),oc(e,Qe()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!lr(a(),o))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=xc(e,r))&&(0!==(i=ht(e))&&(r=i,t=ic(e,i))),1===t))throw n=Ls,pc(e,0),sc(e,r),oc(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ec(e,Us,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Qe())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Ec.bind(null,e,Us,Gs),t);break}Ec(e,Us,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-it(r);i=1<<l,(l=t[l])>o&&(o=l),r&=~i}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ro(Ec.bind(null,e,Us,Gs),r);break}Ec(e,Us,Gs);break;default:throw Error(a(329))}}}return oc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Us,Us=n,null!==t&&lc(t)),e}function lc(e){null===Us?Us=e:Us.push.apply(Us,e)}function sc(e,t){for(t&=~Fs,t&=~Zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ps))throw Error(a(327));Cc();var t=ft(e,0);if(0===(1&t))return oc(e,Qe()),null;var n=xc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ls,pc(e,0),sc(e,t),oc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Us,Gs),oc(e,Qe()),null}function uc(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Ws=Qe()+500,Bo&&Wo())}}function dc(e){null!==Xs&&0===Xs.tag&&0===(6&Ps)&&Cc();var t=Ps;Ps|=1;var n=Ts.transition,r=yt;try{if(Ts.transition=null,yt=1,e)return e()}finally{yt=r,Ts.transition=n,0===(6&(Ps=t))&&Wo()}}function fc(){Ms=Os.current,_o(Os)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oo();break;case 3:ai(),_o(Ro),_o(Po),di();break;case 5:li(r);break;case 4:ai();break;case 13:case 19:_o(si);break;case 10:Ca(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Rs=e,ks=e=Oc(e.current,null),ws=Ms=t,js=0,Ls=null,Fs=Zs=Ds=0,Us=Bs=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(r=(n=Aa[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Aa=null}return e}function hc(e,t){for(;;){var n=ks;try{if(Ea(),fi.current=il,gi){for(var r=mi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}gi=!1}if(hi=0,xi=vi=mi=null,yi=!1,bi=0,As.current=null,null===n||null===n.return){js=1,Ls=t,ks=null;break}e:{var i=e,l=n.return,s=n,c=t;if(t=ws,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=s,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=xl(l);if(null!==h){h.flags&=-257,gl(h,l,s,0,t),1&h.mode&&vl(i,u,t),c=u;var m=(t=h).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vl(i,u,t),vc();break e}c=Error(a(426))}else if(aa&&1&s.mode){var x=xl(l);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),gl(x,l,s,0,t),ma(ul(c,s));break e}}i=c=ul(c,s),4!==js&&(js=2),null===Bs?Bs=[i]:Bs.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Da(i,hl(0,c,t));break e;case 1:s=c;var g=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Vs||!Vs.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Da(i,ml(i,s,t));break e}}i=i.return}while(null!==i)}Nc(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function mc(){var e=_s.current;return _s.current=il,null===e?il:e}function vc(){0!==js&&3!==js&&2!==js||(js=4),null===Rs||0===(268435455&Ds)&&0===(268435455&Zs)||sc(Rs,ws)}function xc(e,t){var n=Ps;Ps|=2;var r=mc();for(Rs===e&&ws===t||(Gs=null,pc(e,t));;)try{gc();break}catch(o){hc(e,o)}if(Ea(),Ps=n,_s.current=r,null!==ks)throw Error(a(261));return Rs=null,ws=0,js}function gc(){for(;null!==ks;)bc(ks)}function yc(){for(;null!==ks&&!Xe();)bc(ks)}function bc(e){var t=Is(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Nc(e):ks=t,As.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ql(n,t,Ms)))return void(ks=n)}else{if(null!==(n=Xl(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return js=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===js&&(js=5)}function Ec(e,t,n){var r=yt,o=Ts.transition;try{Ts.transition=null,yt=1,function(e,t,n,r){do{Cc()}while(null!==Xs);if(0!==(6&Ps))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Rs&&(ks=Rs=null,ws=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qs||(qs=!0,Rc(tt,(function(){return Cc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Ts.transition,Ts.transition=null;var l=yt;yt=1;var s=Ps;Ps|=4,As.current=null,function(e,t){if(eo=Gt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(N){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==o&&3!==f.nodeType||(s=l+o),f!==i||0!==r&&3!==f.nodeType||(c=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===o&&(s=l),p===i&&++d===r&&(c=l),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Gt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,x=m.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:xa(t.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(N){Sc(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}m=ns,ns=!1}(e,n),xs(n,e),hr(to),Gt=!!eo,to=eo=null,e.current=n,ys(n,e,o),Ye(),Ps=s,yt=l,Ts.transition=i}else e.current=n;if(qs&&(qs=!1,Xs=e,Ys=o),i=e.pendingLanes,0===i&&(Vs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hs)throw Hs=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&Cc(),i=e.pendingLanes,0!==(1&i)?e===$s?Qs++:(Qs=0,$s=e):Qs=0,Wo()}(e,t,n,r)}finally{Ts.transition=o,yt=r}return null}function Cc(){if(null!==Xs){var e=bt(Ys),t=Ts.transition,n=yt;try{if(Ts.transition=null,yt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,Ys=0,0!==(6&Ps))throw Error(a(331));var o=Ps;for(Ps|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var s=i.deletions;if(null!==s){for(var c=0;c<s.length;c++){var u=s[c];for(Jl=u;null!==Jl;){var d=Jl;switch(d.tag){case 0:case 11:case 15:rs(8,d,i)}var f=d.child;if(null!==f)f.return=d,Jl=f;else for(;null!==Jl;){var p=(d=Jl).sibling,h=d.return;if(is(d),d===u){Jl=null;break}if(null!==p){p.return=h,Jl=p;break}Jl=h}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(null!==v)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var g=i.sibling;if(null!==g){g.return=i.return,Jl=g;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var b=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==b)b.return=l,Jl=b;else e:for(l=y;null!==Jl;){if(0!==(2048&(s=Jl).flags))try{switch(s.tag){case 0:case 11:case 15:os(9,s)}}catch(E){Sc(s,s.return,E)}if(s===l){Jl=null;break e}var N=s.sibling;if(null!==N){N.return=s.return,Jl=N;break e}Jl=s.return}}if(Ps=o,Wo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(E){}r=!0}return r}finally{yt=n,Ts.transition=t}}return!1}function Ic(e,t,n){e=ja(e,t=hl(0,t=ul(n,t),1),1),t=tc(),null!==e&&(xt(e,1,t),oc(e,t))}function Sc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vs||!Vs.has(r))){t=ja(t,e=ml(t,e=ul(n,e),1),1),e=tc(),null!==t&&(xt(t,1,e),oc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(ws&n)===n&&(4===js||3===js&&(130023424&ws)===ws&&500>Qe()-zs?pc(e,0):Fs|=n),oc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ra(e,t))&&(xt(e,t,n),oc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ac(e,n)}function Rc(e,t){return Ve(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new kc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,o,i){var l=2;if(r=e,"function"===typeof e)Mc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case C:return Lc(n.children,o,i,t);case I:l=8,o|=8;break;case S:return(e=wc(12,n,t,2|o)).elementType=S,e.lanes=i,e;case P:return(e=wc(13,n,t,o)).elementType=P,e.lanes=i,e;case R:return(e=wc(19,n,t,o)).elementType=R,e.lanes=i,e;case M:return Dc(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:l=10;break e;case A:l=9;break e;case T:l=11;break e;case k:l=14;break e;case w:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wc(l,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=wc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Zc(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,a,i,l,s){return e=new Bc(e,t,n,l,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wa(a),e}function zc(e){if(!e)return To;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Mo(n))return Lo(e,n,t)}return t}function Wc(e,t,n,r,o,a,i,l,s){return(e=Uc(n,r,!0,e,0,a,0,l,s)).context=zc(null),n=e.current,(a=Oa(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,ja(n,a,o),e.current.lanes=o,xt(e,o,r),oc(e,r),e}function Gc(e,t,n,r){var o=t.current,a=tc(),i=nc(o);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(o,t,i))&&(rc(e,o,i,a),La(e,o,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)bl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bl=!1,function(e,t,n){switch(t.tag){case 3:Rl(t),ha();break;case 5:ii(t);break;case 1:Mo(t.type)&&Do(t);break;case 4:oi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ao(ga,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ao(si,1&si.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zl(e,t,n):(Ao(si,1&si.current),null!==(e=Hl(e,t,n))?e.sibling:null);Ao(si,1&si.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wl(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(si,si.current),r)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,n)}return Hl(e,t,n)}(e,t,n);bl=0!==(131072&e.flags)}else bl=!1,aa&&0!==(1048576&t.flags)&&ea(t,Vo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gl(e,t),e=t.pendingProps;var o=wo(t,Po.current);Sa(t,n),o=Ii(null,t,r,e,o,n);var i=Si();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(r)?(i=!0,Do(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,wa(t),o.updater=za,t.stateNode=o,o._reactInternals=t,Ka(t,r,e,n),t=Pl(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),Nl(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gl(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===k)return 14}return 2}(r),e=xa(r,e),o){case 0:t=Al(null,t,r,e,n);break e;case 1:t=Tl(null,t,r,e,n);break e;case 11:t=El(null,t,r,e,n);break e;case 14:t=Cl(null,t,r,xa(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Al(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 1:return r=t.type,o=t.pendingProps,Tl(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 3:e:{if(Rl(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,Ma(e,t),Za(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=kl(e,t,r,n,o=ul(Error(a(423)),t));break e}if(r!==o){t=kl(e,t,r,n,o=ul(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===o){t=Hl(e,t,n);break e}Nl(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&ua(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,l=o.children,no(r,o)?l=null:null!==i&&no(r,i)&&(t.flags|=32),_l(e,t),Nl(e,t,l,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Zl(e,t,n);case 4:return oi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qa(t,null,r,n):Nl(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,El(e,t,r,o=t.elementType===r?o:xa(r,o),n);case 7:return Nl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Nl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,Ao(ga,r._currentValue),r._currentValue=l,null!==i)if(lr(i.value,l)){if(i.children===o.children&&!Ro.current){t=Hl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Oa(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ia(i.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Ia(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}Nl(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Sa(t,n),r=r(o=_a(o)),t.flags|=1,Nl(e,t,r,n),t.child;case 14:return o=xa(r=t.type,t.pendingProps),Cl(e,t,r,o=xa(r.type,o),n);case 15:return Il(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xa(r,o),Gl(e,t),t.tag=1,Mo(r)?(e=!0,Do(t)):e=!1,Sa(t,n),Ga(t,r,o),Ka(t,r,o,n),Pl(null,t,r,!0,e,n);case 19:return Wl(e,t,n);case 22:return Sl(e,t,n)}throw Error(a(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var l=o;o=function(){var e=Hc(i);l.call(e)}}Gc(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[mo]=i.current,zr(8===e.nodeType?e.parentNode:e),dc(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var l=r;r=function(){var e=Hc(s);l.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[mo]=s.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Gc(t,s,n,r)})),s}(n,t,e,o,r);return Hc(i)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Gc(null,e,null,null)})),t[mo]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Dt(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(gt(t,1|n),oc(t,Qe()),0===(6&Ps)&&(Ws=Qe()+500,Wo()))}break;case 13:dc((function(){var t=Ra(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Vc(e,1)}},Et=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)rc(t,e,134217728,tc());Vc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nc(e),n=Ra(e,t);if(null!==n)rc(n,e,t,tc());Vc(e,t)}},It=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Eo(r);if(!o)throw Error(a(90));V(r),$(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Pe=dc;var tu={usingClientEntryPoint:!1,Events:[bo,No,Eo,_e,Ae,uc]},nu={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),at=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(a(299));var n=!1,r="",o=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",l=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,o,0,i,l),e[mo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function x(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=x.prototype;var b=y.prototype=new g;b.constructor=y,m(b,x.prototype),b.isPureReactComponent=!0;var N=Array.isArray,E=Object.prototype.hasOwnProperty,C={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var o,a={},i=null,l=null;if(null!=t)for(o in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,o)&&!I.hasOwnProperty(o)&&(a[o]=t[o]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===a[o]&&(a[o]=s[o]);return{$$typeof:n,type:e,key:i,ref:l,props:a,_owner:C.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,o,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return i=i(s=e),e=""===a?"."+T(s,0):a,N(i)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),P(i,t,o,"",(function(e){return e}))):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(s=0,a=""===a?".":a+":",N(e))for(var c=0;c<e.length;c++){var u=a+T(l=e[c],c);s+=P(l,t,o,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(l=e.next()).done;)s+=P(l=l.value,t,o,u=a+T(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var w={current:null},M={transition:null},O={ReactCurrentDispatcher:w,ReactCurrentBatchConfig:M,ReactCurrentOwner:C};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=o,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)E.call(t,c)&&!I.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];o.children=s}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return w.current.useCallback(e,t)},t.useContext=function(e){return w.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return w.current.useDeferredValue(e)},t.useEffect=function(e,t){return w.current.useEffect(e,t)},t.useId=function(){return w.current.useId()},t.useImperativeHandle=function(e,t,n){return w.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.current.useMemo(e,t)},t.useReducer=function(e,t,n){return w.current.useReducer(e,t,n)},t.useRef=function(e){return w.current.useRef(e)},t.useState=function(e){return w.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>a(s,n))c<o&&0>a(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<o&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],u=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,x="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function N(e){if(v=!1,b(e),!m)if(null!==r(c))m=!0,M(E);else{var t=r(u);null!==t&&O(N,t.startTime-e)}}function E(e,n){m=!1,v&&(v=!1,g(_),_=-1),h=!0;var a=p;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!P());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var l=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?f.callback=l:f===r(c)&&o(c),b(n)}else o(c);f=r(c)}if(null!==f)var s=!0;else{var d=r(u);null!==d&&O(N,d.startTime-n),s=!1}return s}finally{f=null,p=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,I=!1,S=null,_=-1,A=5,T=-1;function P(){return!(t.unstable_now()-T<A)}function R(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?C():(I=!1,S=null)}}else I=!1}if("function"===typeof y)C=function(){y(R)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,w=k.port2;k.port1.onmessage=R,C=function(){w.postMessage(null)}}else C=function(){x(R,0)};function M(e){S=e,I||(I=!0,C())}function O(e,n){_=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,M(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(v?(g(_),_=-1):v=!0,O(N,a-i))):(e.sortIndex=l,n(c,e),m||h||(m=!0,M(E))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},3508:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function l(e){r(i,o,a,l,s,"next",e)}function s(e){r(i,o,a,l,s,"throw",e)}l(void 0)}))}}n.d(t,{Z:function(){return o}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.Z)(o.key),o)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(181);function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}},516:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1120),o=n(8814),a=n(1002);function i(e,t){if(t&&("object"===(0,a.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){var t=(0,o.Z)();return function(){var n,o=(0,r.Z)(e);if(t){var a=(0,r.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9142);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9611);function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3366);function o(e,t){if(null==e)return{};var n,o,a=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{Z:function(){return r}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1002);function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),l=new A(r||[]);return a(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var x={};u(x,l,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,l)&&(x=y);var b=v.prototype=h.prototype=Object.create(x);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var c=f(e[a],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function C(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return P()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=I(i,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},N(E.prototype),u(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(d(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(b),u(b,c,"Generator"),u(b,l,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var o=n(181),a=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(u){c=!0,o=u}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||(0,o.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var o=n(9199),a=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,o.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1002);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},n.d(a,i),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".014ccd8a.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="xrna-in-typescript:";n.l=function(r,o,a,i){if(e[r])e[r].push(o);else{var l,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=r),e[r]=[o];var f=function(t,n){l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",function(){var e={179:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=a);var i=n.p+n.u(t),l=new Error;n.l(i,(function(r){if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}}),"chunk-"+t,t)}};var t=function(t,r){var o,a,i=r[0],l=r[1],s=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)s(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkxrna_in_typescript=self.webpackChunkxrna_in_typescript||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),o=n(9634),a=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))},i=n(4165),l=n(5861),s=n(3144),c=n(5671),u=n(9439),d=n(4164),f=n.t(d,2),p=n(136),h=n(516),m=n(4942),v=n(1120),x=n(9611);var g=n(8814);function y(e,t,n){return y=(0,g.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,x.Z)(o,n.prototype),o},y.apply(null,arguments)}function b(e){var t="function"===typeof Map?new Map:void 0;return b=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,(0,v.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,x.Z)(r,e)},b(e)}var N=n(3878),E=n(9199),C=n(181),I=n(5267);var S,_=n(7762),A=n(3433);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(S||(S={}));var P,R="popstate";function k(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function M(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),T({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?L(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function j(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,o=void 0===r?"":r,a=e.hash,i=void 0===a?"":a;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(e,t,n,r){void 0===r&&(r={});var o=r,a=o.window,i=void 0===a?document.defaultView:a,l=o.v5Compat,s=void 0!==l&&l,c=i.history,u=S.Pop,d=null,f=p();function p(){return(c.state||{idx:null}).idx}function h(){u=S.Pop;var e=p(),t=null==e?null:e-f;f=e,d&&d({action:u,location:v.location,delta:t})}function m(e){var t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:j(e);return k(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,c.replaceState(T({},c.state,{idx:f}),""));var v={get action(){return u},get location(){return e(i,c)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(R,h),d=e,function(){i.removeEventListener(R,h),d=null}},createHref:function(e){return t(i,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u=S.Push;var r=O(v.location,e,t);n&&n(r,e);var o=M(r,f=p()+1),a=v.createHref(r);try{c.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(a)}s&&d&&d({action:u,location:v.location,delta:1})},replace:function(e,t){u=S.Replace;var r=O(v.location,e,t);n&&n(r,e);var o=M(r,f=p()),a=v.createHref(r);c.replaceState(o,"",a),s&&d&&d({action:u,location:v.location,delta:0})},go:function(e){return c.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(P||(P={}));var Z=new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map((function(e,o){var a=[].concat((0,A.Z)(n),[o]),i="string"===typeof e.id?e.id:a.join("-");if(k(!0!==e.index||!e.children,"Cannot specify children on an index route"),k(!r[i],'Found a route id collision on id "'+i+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var l=T({},e,t(e),{id:i});return r[i]=l,l}var s=T({},e,t(e),{id:i,children:void 0});return r[i]=s,e.children&&(s.children=F(e.children,t,a,r)),s}))}function B(e,t,n){void 0===n&&(n="/");var r=ee(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var o=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(o);for(var a=null,i=0;null==a&&i<o.length;++i)a=Q(o[i],J(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var o=function(e,o,a){var i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(k(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var l=oe([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(k(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),U(e.children,t,s,l)),(null!=e.path||e.index)&&t.push({path:l,score:Y(l,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,_.Z)(z(e.path));try{for(a.s();!(r=a.n()).done;){var i=r.value;o(e,t,i)}}catch(l){a.e(l)}finally{a.f()}}else o(e,t)})),t}function z(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,N.Z)(n)||(0,E.Z)(n)||(0,C.Z)(n)||(0,I.Z)()),o=r[0],a=r.slice(1),i=o.endsWith("?"),l=o.replace(/\?$/,"");if(0===a.length)return i?[l,""]:[l];var s=z(a.join("/")),c=[];return c.push.apply(c,(0,A.Z)(s.map((function(e){return""===e?l:[l,e].join("/")})))),i&&c.push.apply(c,(0,A.Z)(s)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var W=/^:\w+$/,G=3,H=2,K=1,V=10,q=-2,X=function(e){return"*"===e};function Y(e,t){var n=e.split("/"),r=n.length;return n.some(X)&&(r+=q),t&&(r+=H),n.filter((function(e){return!X(e)})).reduce((function(e,t){return e+(W.test(t)?G:""===t?K:V)}),r)}function Q(e,t){for(var n=e.routesMeta,r={},o="/",a=[],i=0;i<n.length;++i){var l=n[i],s=i===n.length-1,c="/"===o?t:t.slice(o.length)||"/",u=$({path:l.relativePath,caseSensitive:l.caseSensitive,end:s},c);if(!u)return null;Object.assign(r,u.params);var d=l.route;a.push({params:r,pathname:oe([o,u.pathname]),pathnameBase:ae(oe([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=oe([o,u.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,t,n){return r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");var a=new RegExp(o,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,u.Z)(n,2),o=r[0],a=r[1],i=t.match(o);if(!i)return null;var l=i[0],s=l.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:a.reduce((function(e,t,n){var r=t.paramName,o=t.isOptional;if("*"===r){var a=c[n]||"";s=l.slice(0,l.length-a.length).replace(/(.)\/+$/,"$1")}var i=c[n];return e[r]=o&&!i?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return w(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(i||"",r),e}),{}),pathname:l,pathnameBase:s,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return w(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function te(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ne(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function re(e,t,n,r){var o;void 0===r&&(r=!1),"string"===typeof e?o=L(e):(k(!(o=T({},e)).pathname||!o.pathname.includes("?"),te("?","pathname","search",o)),k(!o.pathname||!o.pathname.includes("#"),te("#","pathname","hash",o)),k(!o.search||!o.search.includes("#"),te("#","search","hash",o)));var a,i=""===e||""===o.pathname,l=i?"/":o.pathname;if(null==l)a=n;else if(r){var s=0===t.length?[]:t[t.length-1].replace(/^\//,"").split("/");if(l.startsWith("..")){for(var c=l.split("/");".."===c[0];)c.shift(),s.pop();o.pathname=c.join("/")}a="/"+s.join("/")}else{var u=t.length-1;if(l.startsWith("..")){for(var d=l.split("/");".."===d[0];)d.shift(),u-=1;o.pathname=d.join("/")}a=u>=0?t[u]:"/"}var f=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,o=n.search,a=void 0===o?"":o,i=n.hash,l=void 0===i?"":i,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:le(l)}}(o,a),p=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&n.endsWith("/");return f.pathname.endsWith("/")||!p&&!h||(f.pathname+="/"),f}var oe=function(e){return e.join("/").replace(/\/\/+/g,"/")},ae=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},le=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},se=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(b(Error));var ce=(0,s.Z)((function e(t,n,r,o){(0,c.Z)(this,e),void 0===o&&(o=!1),this.status=t,this.statusText=n||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var de=["post","put","patch","delete"],fe=new Set(de),pe=["get"].concat(de),he=new Set(pe),me=new Set([301,302,303,307,308]),ve=new Set([307,308]),xe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ge={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ye={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},be=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=function(e){return{hasErrorBoundary:Boolean(e.hasErrorBoundary)}},Ee="remix-router-transitions";function Ce(e){var t,n=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof n&&"undefined"!==typeof n.document&&"undefined"!==typeof n.document.createElement,o=!r;if(k(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){var a=e.detectErrorBoundary;t=function(e){return{hasErrorBoundary:a(e)}}}else t=Ne;var s,c,d={},f=F(e.routes,t,void 0,d),p=e.basename||"/",h=T({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),v=null,x=new Set,g=null,y=null,b=null,N=null!=e.hydrationData,E=B(f,e.history.location,p),C=null;if(null==E){var I=ze(404,{pathname:e.history.location.pathname}),R=Ue(f),M=R.matches,j=R.route;E=M,C=(0,m.Z)({},j.id,I)}var L,D=E.some((function(e){return e.route.lazy})),Z=E.some((function(e){return e.route.loader}));if(D)c=!1;else if(Z)if(h.v7_partialHydration){var U=e.hydrationData?e.hydrationData.loaderData:null,z=e.hydrationData?e.hydrationData.errors:null;c=E.every((function(e){return e.route.loader&&!0!==e.route.loader.hydrate&&(U&&void 0!==U[e.route.id]||z&&void 0!==z[e.route.id])}))}else c=null!=e.hydrationData;else c=!0;var W,G={historyAction:e.history.action,location:e.history.location,matches:E,initialized:c,navigation:xe,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||C,fetchers:new Map,blockers:new Map},H=S.Pop,K=!1,V=!1,q=new Map,X=null,Y=!1,Q=!1,$=[],J=[],te=new Map,ne=0,re=-1,oe=new Map,ae=new Set,ie=new Map,le=new Map,se=new Set,ce=new Map,ue=new Map,de=!1;function fe(e,t){void 0===t&&(t={}),G=T({},G,e);var n=[],r=[];h.v7_fetcherPersist&&G.fetchers.forEach((function(e,t){"idle"===e.state&&(se.has(t)?r.push(t):n.push(t))})),(0,A.Z)(x).forEach((function(e){return e(G,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync})})),h.v7_fetcherPersist&&(n.forEach((function(e){return G.fetchers.delete(e)})),r.forEach((function(e){return rt(e)})))}function pe(t,n,r){var o,a,i,l=(void 0===r?{}:r).flushSync,c=null!=G.actionData&&null!=G.navigation.formMethod&&$e(G.navigation.formMethod)&&"loading"===G.navigation.state&&!0!==(null==(o=t.state)?void 0:o._isRedirect);i=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:c?G.actionData:null;var u=n.loaderData?Fe(G.loaderData,n.loaderData,n.matches||[],n.errors):G.loaderData,d=G.blockers;d.size>0&&(d=new Map(d)).forEach((function(e,t){return d.set(t,ye)}));var p,h=!0===K||null!=G.navigation.formMethod&&$e(G.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(s&&(f=s,s=void 0),Y||H===S.Pop||(H===S.Push?e.history.push(t,t.state):H===S.Replace&&e.history.replace(t,t.state)),H===S.Pop){var m=q.get(G.location.pathname);m&&m.has(t.pathname)?p={currentLocation:G.location,nextLocation:t}:q.has(t.pathname)&&(p={currentLocation:t,nextLocation:G.location})}else if(V){var v=q.get(G.location.pathname);v?v.add(t.pathname):(v=new Set([t.pathname]),q.set(G.location.pathname,v)),p={currentLocation:G.location,nextLocation:t}}fe(T({},n,{actionData:i,loaderData:u,historyAction:H,location:t,initialized:!0,navigation:xe,revalidation:"idle",restoreScrollPosition:Nt(t,n.matches||G.matches),preventScrollReset:h,blockers:d}),{viewTransitionOpts:p,flushSync:!0===l}),H=S.Pop,K=!1,V=!1,Y=!1,Q=!1,$=[],J=[]}function he(e,t){return me.apply(this,arguments)}function me(){return me=(0,l.Z)((0,i.Z)().mark((function t(n,r){var o,a,l,s,c,u,d,f,m,v,x,g;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:if(o=Ie(G.location,G.matches,p,h.v7_prependBasename,n,h.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),a=Se(h.v7_normalizeFormMethod,!1,o,r),l=a.path,s=a.submission,c=a.error,u=G.location,d=T({},d=O(G.location,l,r&&r.state),e.history.encodeLocation(d)),f=r&&null!=r.replace?r.replace:void 0,m=S.Push,!0===f?m=S.Replace:!1===f||null!=s&&$e(s.formMethod)&&s.formAction===G.location.pathname+G.location.search&&(m=S.Replace),v=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,x=!0===(r&&r.unstable_flushSync),!(g=xt({currentLocation:u,nextLocation:d,historyAction:m}))){t.next=17;break}return vt(g,{state:"blocked",location:d,proceed:function(){vt(g,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),he(n,r)},reset:function(){var e=new Map(G.blockers);e.set(g,ye),fe({blockers:e})}}),t.abrupt("return");case 17:return t.next=19,Ce(m,d,{submission:s,pendingError:c,preventScrollReset:v,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:x});case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)}))),me.apply(this,arguments)}function Ce(e,t,n){return _e.apply(this,arguments)}function _e(){return _e=(0,l.Z)((0,i.Z)().mark((function t(n,r,o){var a,l,c,u,d,h,v,x,g,y,b,N,E,C,I,S;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(W&&W.abort(),W=null,H=n,Y=!0===(o&&o.startUninterruptedRevalidation),bt(G.location,G.matches),K=!0===(o&&o.preventScrollReset),V=!0===(o&&o.enableViewTransition),a=s||f,l=o&&o.overrideNavigation,c=B(a,r,p),u=!0===(o&&o.flushSync),c){t.next=17;break}return d=ze(404,{pathname:r.pathname}),h=Ue(a),v=h.matches,x=h.route,gt(),pe(r,{matches:v,loaderData:{},errors:(0,m.Z)({},x.id,d)},{flushSync:u}),t.abrupt("return");case 17:if(!G.initialized||Q||!He(G.location,r)||o&&o.submission&&$e(o.submission.formMethod)){t.next=20;break}return pe(r,{matches:c},{flushSync:u}),t.abrupt("return");case 20:if(W=new AbortController,g=Oe(e.history,r,W.signal,o&&o.submission),!o||!o.pendingError){t.next=26;break}b=(0,m.Z)({},Be(c).route.id,o.pendingError),t.next=37;break;case 26:if(!(o&&o.submission&&$e(o.submission.formMethod))){t.next=37;break}return t.next=29,Te(g,r,o.submission,c,{replace:o.replace,flushSync:u});case 29:if(!(N=t.sent).shortCircuited){t.next=32;break}return t.abrupt("return");case 32:y=N.pendingActionData,b=N.pendingActionError,l=it(r,o.submission),u=!1,g=new Request(g.url,{signal:g.signal});case 37:return t.next=39,Re(g,r,c,l,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,o&&!0===o.initialHydration,u,y,b);case 39:if(E=t.sent,C=E.shortCircuited,I=E.loaderData,S=E.errors,!C){t.next=45;break}return t.abrupt("return");case 45:W=null,pe(r,T({matches:c},y?{actionData:y}:{},{loaderData:I,errors:S}));case 47:case"end":return t.stop()}}),t)}))),_e.apply(this,arguments)}function Te(e,t,n,r,o){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,l.Z)((0,i.Z)().mark((function e(n,r,o,a,l){var s,c,u,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===l&&(l={}),Ye(),fe({navigation:lt(r,o)},{flushSync:!0===l.flushSync}),(c=ot(a,r)).route.action||c.route.lazy){e.next=9;break}s={type:P.error,error:ze(405,{method:n.method,pathname:r.pathname,routeId:c.route.id})},e.next=14;break;case 9:return e.next=11,we("action",n,c,a,d,t,p,h.v7_relativeSplatPath);case 11:if(s=e.sent,!n.signal.aborted){e.next=14;break}return e.abrupt("return",{shortCircuited:!0});case 14:if(!qe(s)){e.next=19;break}return u=l&&null!=l.replace?l.replace:s.location===G.location.pathname+G.location.search,e.next=18,Le(G,s,{submission:o,replace:u});case 18:return e.abrupt("return",{shortCircuited:!0});case 19:if(!Ve(s)){e.next=23;break}return f=Be(a,c.route.id),!0!==(l&&l.replace)&&(H=S.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:(0,m.Z)({},f.route.id,s.error)});case 23:if(!Ke(s)){e.next=25;break}throw ze(400,{type:"defer-action"});case 25:return e.abrupt("return",{pendingActionData:(0,m.Z)({},c.route.id,s.data)});case 26:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Re(e,t,n,r,o,a,i,l,s,c,u){return ke.apply(this,arguments)}function ke(){return ke=(0,l.Z)((0,i.Z)().mark((function t(n,r,o,a,l,c,d,m,v,x,g){var y,b,N,E,C,I,S,_,A,P,R,k,w,M,O,j,L,D,Z,F,B,U;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y=a||it(r,l),b=l||c||at(y),N=s||f,E=Ae(e.history,G,o,b,r,h.v7_partialHydration&&!0===m,Q,$,J,se,ie,ae,N,p,x,g),C=(0,u.Z)(E,2),I=C[0],S=C[1],gt((function(e){return!(o&&o.some((function(t){return t.route.id===e})))||I&&I.some((function(t){return t.route.id===e}))})),re=++ne,0!==I.length||0!==S.length){t.next=10;break}return _=pt(),pe(r,T({matches:o,loaderData:{},errors:g||null},x?{actionData:x}:{},_?{fetchers:new Map(G.fetchers)}:{}),{flushSync:v}),t.abrupt("return",{shortCircuited:!0});case 10:return Y||h.v7_partialHydration&&m||(S.forEach((function(e){var t=G.fetchers.get(e.key),n=st(void 0,t?t.data:void 0);G.fetchers.set(e.key,n)})),A=x||G.actionData,fe(T({navigation:y},A?0===Object.keys(A).length?{actionData:null}:{actionData:A}:{},S.length>0?{fetchers:new Map(G.fetchers)}:{}),{flushSync:v})),S.forEach((function(e){te.has(e.key)&&dt(e.key),e.controller&&te.set(e.key,e.controller)})),P=function(){return S.forEach((function(e){return dt(e.key)}))},W&&W.signal.addEventListener("abort",P),t.next=16,Ge(G.matches,o,I,S,n);case 16:if(R=t.sent,k=R.results,w=R.loaderResults,M=R.fetcherResults,!n.signal.aborted){t.next=22;break}return t.abrupt("return",{shortCircuited:!0});case 22:if(W&&W.signal.removeEventListener("abort",P),S.forEach((function(e){return te.delete(e.key)})),!(O=We(k))){t.next=30;break}return O.idx>=I.length&&(j=S[O.idx-I.length].key,ae.add(j)),t.next=29,Le(G,O.result,{replace:d});case 29:return t.abrupt("return",{shortCircuited:!0});case 30:return L=Ze(G,o,I,w,g,S,M,ce),D=L.loaderData,Z=L.errors,ce.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&ce.delete(t)}))})),F=pt(),B=ht(re),U=F||B||S.length>0,t.abrupt("return",T({loaderData:D,errors:Z},U?{fetchers:new Map(G.fetchers)}:{}));case 36:case"end":return t.stop()}}),t)}))),ke.apply(this,arguments)}function Me(){return Me=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,c,v,x){var g,y,b,N,E,C,I,S,_,A,T,P,R,w,M,O,j,L,D,Z,F,U,z,K,V,q,X;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ye(),ie.delete(r),l.route.action||l.route.lazy){n.next=6;break}return g=ze(405,{method:x.formMethod,pathname:a,routeId:o}),et(r,o,g,{flushSync:v}),n.abrupt("return");case 6:return y=G.fetchers.get(r),Qe(r,ct(x,y),{flushSync:v}),b=new AbortController,N=Oe(e.history,a,b.signal,x),te.set(r,b),E=ne,n.next=14,we("action",N,l,c,d,t,p,h.v7_relativeSplatPath);case 14:if(C=n.sent,!N.signal.aborted){n.next=18;break}return te.get(r)===b&&te.delete(r),n.abrupt("return");case 18:if(!se.has(r)){n.next=21;break}return Qe(r,ut(void 0)),n.abrupt("return");case 21:if(!qe(C)){n.next=31;break}if(te.delete(r),!(re>E)){n.next=28;break}return Qe(r,ut(void 0)),n.abrupt("return");case 28:return ae.add(r),Qe(r,st(x)),n.abrupt("return",Le(G,C,{fetcherSubmission:x}));case 31:if(!Ve(C)){n.next=34;break}return et(r,o,C.error),n.abrupt("return");case 34:if(!Ke(C)){n.next=36;break}throw ze(400,{type:"defer-action"});case 36:return I=G.navigation.location||G.location,S=Oe(e.history,I,b.signal),_=s||f,k(A="idle"!==G.navigation.state?B(_,G.navigation.location,p):G.matches,"Didn't find any matches after fetcher action"),T=++ne,oe.set(r,T),P=st(x,C.data),G.fetchers.set(r,P),R=Ae(e.history,G,A,x,I,!1,Q,$,J,se,ie,ae,_,p,(0,m.Z)({},l.route.id,C.data),void 0),w=(0,u.Z)(R,2),M=w[0],(O=w[1]).filter((function(e){return e.key!==r})).forEach((function(e){var t=e.key,n=G.fetchers.get(t),r=st(void 0,n?n.data:void 0);G.fetchers.set(t,r),te.has(t)&&dt(t),e.controller&&te.set(t,e.controller)})),fe({fetchers:new Map(G.fetchers)}),j=function(){return O.forEach((function(e){return dt(e.key)}))},b.signal.addEventListener("abort",j),n.next=52,Ge(G.matches,A,M,O,S);case 52:if(L=n.sent,D=L.results,Z=L.loaderResults,F=L.fetcherResults,!b.signal.aborted){n.next=58;break}return n.abrupt("return");case 58:if(b.signal.removeEventListener("abort",j),oe.delete(r),te.delete(r),O.forEach((function(e){return te.delete(e.key)})),!(U=We(D))){n.next=66;break}return U.idx>=M.length&&(z=O[U.idx-M.length].key,ae.add(z)),n.abrupt("return",Le(G,U.result));case 66:K=Ze(G,G.matches,M,Z,void 0,O,F,ce),V=K.loaderData,q=K.errors,G.fetchers.has(r)&&(X=ut(C.data),G.fetchers.set(r,X)),ht(T),"loading"===G.navigation.state&&T>re?(k(H,"Expected pending action"),W&&W.abort(),pe(G.navigation.location,{matches:A,loaderData:V,errors:q,fetchers:new Map(G.fetchers)})):(fe({errors:q,loaderData:Fe(G.loaderData,V,A,q),fetchers:new Map(G.fetchers)}),Q=!1);case 70:case"end":return n.stop()}}),n)}))),Me.apply(this,arguments)}function je(){return je=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,s,c,u){var f,m,v,x,g;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=G.fetchers.get(r),Qe(r,st(u,f?f.data:void 0),{flushSync:c}),m=new AbortController,v=Oe(e.history,a,m.signal),te.set(r,m),x=ne,n.next=8,we("loader",v,l,s,d,t,p,h.v7_relativeSplatPath);case 8:if(!Ke(g=n.sent)){n.next=16;break}return n.next=12,tt(g,v.signal,!0);case 12:if(n.t0=n.sent,n.t0){n.next=15;break}n.t0=g;case 15:g=n.t0;case 16:if(te.get(r)===m&&te.delete(r),!v.signal.aborted){n.next=19;break}return n.abrupt("return");case 19:if(!se.has(r)){n.next=22;break}return Qe(r,ut(void 0)),n.abrupt("return");case 22:if(!qe(g)){n.next=32;break}if(!(re>x)){n.next=28;break}return Qe(r,ut(void 0)),n.abrupt("return");case 28:return ae.add(r),n.next=31,Le(G,g);case 31:return n.abrupt("return");case 32:if(!Ve(g)){n.next=35;break}return et(r,o,g.error),n.abrupt("return");case 35:k(!Ke(g),"Unhandled fetcher deferred data"),Qe(r,ut(g.data));case 37:case"end":return n.stop()}}),n)}))),je.apply(this,arguments)}function Le(e,t,n){return De.apply(this,arguments)}function De(){return De=(0,l.Z)((0,i.Z)().mark((function t(o,a,l){var s,c,u,d,f,h,m,v,x,g,y,b,N,E;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(s=void 0===l?{}:l).submission,u=s.fetcherSubmission,d=s.replace,a.revalidate&&(Q=!0),k(f=O(o.location,a.location,{_isRedirect:!0}),"Expected a location on the redirect navigation"),!r){t.next=10;break}if(h=!1,a.reloadDocument?h=!0:be.test(a.location)&&(m=e.history.createURL(a.location),h=m.origin!==n.location.origin||null==ee(m.pathname,p)),!h){t.next=10;break}return d?n.location.replace(a.location):n.location.assign(a.location),t.abrupt("return");case 10:if(W=null,v=!0===d?S.Replace:S.Push,x=o.navigation,g=x.formMethod,y=x.formAction,b=x.formEncType,!c&&!u&&g&&y&&b&&(c=at(o.navigation)),N=c||u,!(ve.has(a.status)&&N&&$e(N.formMethod))){t.next=20;break}return t.next=18,Ce(v,f,{submission:T({},N,{formAction:a.location}),preventScrollReset:K});case 18:t.next=23;break;case 20:return E=it(f,c),t.next=23,Ce(v,f,{overrideNavigation:E,fetcherSubmission:u,preventScrollReset:K});case 23:case"end":return t.stop()}}),t)}))),De.apply(this,arguments)}function Ge(e,t,n,r,o){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,l.Z)((0,i.Z)().mark((function n(r,o,a,l,s){var c,u,f;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([].concat((0,A.Z)(a.map((function(e){return we("loader",s,e,o,d,t,p,h.v7_relativeSplatPath)}))),(0,A.Z)(l.map((function(n){return n.matches&&n.match&&n.controller?we("loader",Oe(e.history,n.path,n.controller.signal),n.match,n.matches,d,t,p,h.v7_relativeSplatPath):{type:P.error,error:ze(404,{pathname:n.path})}})))));case 2:return c=n.sent,u=c.slice(0,a.length),f=c.slice(a.length),n.next=7,Promise.all([Je(r,a,u,u.map((function(){return s.signal})),!1,G.loaderData),Je(r,l.map((function(e){return e.match})),f,l.map((function(e){return e.controller?e.controller.signal:null})),!0)]);case 7:return n.abrupt("return",{results:c,loaderResults:u,fetcherResults:f});case 8:case"end":return n.stop()}}),n)}))),Xe.apply(this,arguments)}function Ye(){var e;Q=!0,(e=$).push.apply(e,(0,A.Z)(gt())),ie.forEach((function(e,t){te.has(t)&&(J.push(t),dt(t))}))}function Qe(e,t,n){void 0===n&&(n={}),G.fetchers.set(e,t),fe({fetchers:new Map(G.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function et(e,t,n,r){void 0===r&&(r={});var o=Be(G.matches,t);rt(e),fe({errors:(0,m.Z)({},o.route.id,n),fetchers:new Map(G.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function nt(e){return h.v7_fetcherPersist&&(le.set(e,(le.get(e)||0)+1),se.has(e)&&se.delete(e)),G.fetchers.get(e)||ge}function rt(e){var t=G.fetchers.get(e);!te.has(e)||t&&"loading"===t.state&&oe.has(e)||dt(e),ie.delete(e),oe.delete(e),ae.delete(e),se.delete(e),G.fetchers.delete(e)}function dt(e){var t=te.get(e);k(t,"Expected fetch controller: "+e),t.abort(),te.delete(e)}function ft(e){var t,n=(0,_.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=ut(nt(r).data);G.fetchers.set(r,o)}}catch(a){n.e(a)}finally{n.f()}}function pt(){var e,t=[],n=!1,r=(0,_.Z)(ae);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=G.fetchers.get(o);k(a,"Expected fetcher: "+o),"loading"===a.state&&(ae.delete(o),t.push(o),n=!0)}}catch(i){r.e(i)}finally{r.f()}return ft(t),n}function ht(e){var t,n=[],r=(0,_.Z)(oe);try{for(r.s();!(t=r.n()).done;){var o=(0,u.Z)(t.value,2),a=o[0];if(o[1]<e){var i=G.fetchers.get(a);k(i,"Expected fetcher: "+a),"loading"===i.state&&(dt(a),oe.delete(a),n.push(a))}}}catch(l){r.e(l)}finally{r.f()}return ft(n),n.length>0}function mt(e){G.blockers.delete(e),ue.delete(e)}function vt(e,t){var n=G.blockers.get(e)||ye;k("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);var r=new Map(G.blockers);r.set(e,t),fe({blockers:r})}function xt(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==ue.size){ue.size>1&&w(!1,"A router only supports one blocker at a time");var o=Array.from(ue.entries()),a=(0,u.Z)(o[o.length-1],2),i=a[0],l=a[1],s=G.blockers.get(i);if(!s||"proceeding"!==s.state)return l({currentLocation:t,nextLocation:n,historyAction:r})?i:void 0}}function gt(e){var t=[];return ce.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),ce.delete(r))})),t}function yt(e,t){if(y){var n=y(e,t.map((function(e){return function(e,t){var n=e.route,r=e.pathname,o=e.params;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}(e,G.loaderData)})));return n||e.key}return e.key}function bt(e,t){if(g&&b){var n=yt(e,t);g[n]=b()}}function Nt(e,t){if(g){var n=yt(e,t),r=g[n];if("number"===typeof r)return r}return null}return L={get basename(){return p},get future(){return h},get state(){return G},get routes(){return f},get window(){return n},initialize:function(){if(v=e.history.listen((function(t){var n=t.action,r=t.location,o=t.delta;if(!de){w(0===ue.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=xt({currentLocation:G.location,nextLocation:r,historyAction:n});return a&&null!=o?(de=!0,e.history.go(-1*o),void vt(a,{state:"blocked",location:r,proceed:function(){vt(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(o)},reset:function(){var e=new Map(G.blockers);e.set(a,ye),fe({blockers:e})}})):Ce(n,r)}de=!1})),r){!function(e,t){try{var n=e.sessionStorage.getItem(Ee);if(n)for(var r=JSON.parse(n),o=0,a=Object.entries(r||{});o<a.length;o++){var i=(0,u.Z)(a[o],2),l=i[0],s=i[1];s&&Array.isArray(s)&&t.set(l,new Set(s||[]))}}catch(c){}}(n,q);var t=function(){return function(e,t){if(t.size>0){var n,r={},o=(0,_.Z)(t);try{for(o.s();!(n=o.n()).done;){var a=(0,u.Z)(n.value,2),i=a[0],l=a[1];r[i]=(0,A.Z)(l)}}catch(s){o.e(s)}finally{o.f()}try{e.sessionStorage.setItem(Ee,JSON.stringify(r))}catch(I){w(!1,"Failed to save applied view transitions in sessionStorage ("+I+").")}}}(n,q)};n.addEventListener("pagehide",t),X=function(){return n.removeEventListener("pagehide",t)}}return G.initialized||Ce(S.Pop,G.location,{initialHydration:!0}),L},subscribe:function(e){return x.add(e),function(){return x.delete(e)}},enableScrollRestoration:function(e,t,n){if(g=e,b=t,y=n||null,!N&&G.navigation===xe){N=!0;var r=Nt(G.location,G.matches);null!=r&&fe({restoreScrollPosition:r})}return function(){g=null,b=null,y=null}},navigate:he,fetch:function(e,t,n,r){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(e)&&dt(e);var a=!0===(r&&r.unstable_flushSync),i=s||f,l=Ie(G.location,G.matches,p,h.v7_prependBasename,n,h.v7_relativeSplatPath,t,null==r?void 0:r.relative),c=B(i,l,p);if(c){var u=Se(h.v7_normalizeFormMethod,!0,l,r),d=u.path,m=u.submission,v=u.error;if(v)et(e,t,v,{flushSync:a});else{var x=ot(c,d);K=!0===(r&&r.preventScrollReset),m&&$e(m.formMethod)?function(e,t,n,r,o,a,i){Me.apply(this,arguments)}(e,t,d,x,c,a,m):(ie.set(e,{routeId:t,path:d}),function(e,t,n,r,o,a,i){je.apply(this,arguments)}(e,t,d,x,c,a,m))}}else et(e,t,ze(404,{pathname:l}),{flushSync:a})},revalidate:function(){Ye(),fe({revalidation:"loading"}),"submitting"!==G.navigation.state&&("idle"!==G.navigation.state?Ce(H||G.historyAction,G.navigation.location,{overrideNavigation:G.navigation}):Ce(G.historyAction,G.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:nt,deleteFetcher:function(e){if(h.v7_fetcherPersist){var t=(le.get(e)||0)-1;t<=0?(le.delete(e),se.add(e)):le.set(e,t)}else rt(e);fe({fetchers:new Map(G.fetchers)})},dispose:function(){v&&v(),X&&X(),x.clear(),W&&W.abort(),G.fetchers.forEach((function(e,t){return rt(t)})),G.blockers.forEach((function(e,t){return mt(t)}))},getBlocker:function(e,t){var n=G.blockers.get(e)||ye;return ue.get(e)!==t&&ue.set(e,t),n},deleteBlocker:mt,_internalFetchControllers:te,_internalActiveDeferreds:ce,_internalSetRoutes:function(e){s=F(e,t,void 0,d={})}},L}Symbol("deferred");function Ie(e,t,n,r,o,a,i,l){var s,c;if(i){s=[];var u,d=(0,_.Z)(t);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(s.push(f),f.route.id===i){c=f;break}}}catch(h){d.e(h)}finally{d.f()}}else s=t,c=t[t.length-1];var p=re(o||".",function(e,t){var n=ne(e);return t?n.map((function(t,n){return n===e.length-1?t.pathname:t.pathnameBase})):n.map((function(e){return e.pathnameBase}))}(s,a),ee(e.pathname,n)||e.pathname,"path"===l);return null==o&&(p.search=e.search,p.hash=e.hash),null!=o&&""!==o&&"."!==o||!c||!c.route.index||rt(p.search)||(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(p.pathname="/"===p.pathname?n:oe([n,p.pathname])),j(p)}function Se(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Qe(r.formMethod))return{path:n,error:ze(405,{method:r.formMethod})};var o,a,i=function(){return{path:n,error:ze(400,{type:"invalid-body"})}},l=r.formMethod||"get",s=e?l.toUpperCase():l.toLowerCase(),c=Ge(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!$e(s))return i();var d="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((function(e,t){var n=(0,u.Z)(t,2);return""+e+n[0]+"="+n[1]+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:s,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}if("application/json"===r.formEncType){if(!$e(s))return i();try{var f="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:c,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch(m){return i()}}}if(k("function"===typeof FormData,"FormData is not available in this environment"),r.formData)o=je(r.formData),a=r.formData;else if(r.body instanceof FormData)o=je(r.body),a=r.body;else if(r.body instanceof URLSearchParams)a=Le(o=r.body);else if(null==r.body)o=new URLSearchParams,a=new FormData;else try{a=Le(o=new URLSearchParams(r.body))}catch(m){return i()}var p={formMethod:s,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if($e(p.formMethod))return{path:n,submission:p};var h=L(n);return t&&h.search&&rt(h.search)&&o.append("index",""),h.search="?"+o,{path:j(h),submission:p}}function _e(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function Ae(e,t,n,r,o,a,i,l,s,c,u,d,f,p,h,m){var v=m?Object.values(m)[0]:h?Object.values(h)[0]:void 0,x=e.createURL(t.location),g=e.createURL(o),y=m?Object.keys(m)[0]:void 0,b=_e(n,y).filter((function(e,n){if(a)return function(e,t){if(!t.loader)return!1;if(t.loader.hydrate)return!0;return void 0===e.loaderData[t.id]&&(!e.errors||void 0===e.errors[t.id])}(t,e.route);if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,o=void 0===e[n.route.id];return r||o}(t.loaderData,t.matches[n],e)||l.some((function(t){return t===e.route.id})))return!0;var o=t.matches[n],s=e;return Pe(e,T({currentUrl:x,currentParams:o.params,nextUrl:g,nextParams:s.params},r,{actionResult:v,defaultShouldRevalidate:i||x.pathname+x.search===g.pathname+g.search||x.search!==g.search||Te(o,s)}))})),N=[];return u.forEach((function(e,o){if(!a&&n.some((function(t){return t.route.id===e.routeId}))&&!c.has(o)){var l=B(f,e.path,p);if(l){var u=t.fetchers.get(o),h=ot(l,e.path);!d.has(o)&&(!!s.includes(o)||(u&&"idle"!==u.state&&void 0===u.data?i:Pe(h,T({currentUrl:x,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:i}))))&&N.push({key:o,routeId:e.routeId,path:e.path,matches:l,match:h,controller:new AbortController})}else N.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null})}})),[b,N]}function Te(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Pe(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function Re(e,t,n){return ke.apply(this,arguments)}function ke(){return ke=(0,l.Z)((0,i.Z)().mark((function e(t,n,r){var o,a,l,s,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.lazy();case 4:if(o=e.sent,t.lazy){e.next=7;break}return e.abrupt("return");case 7:for(s in k(a=r[t.id],"No route found in manifest"),l={},o)c=a[s],w(!(u=void 0!==c&&"hasErrorBoundary"!==s),'Route "'+a.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),u||Z.has(s)||(l[s]=o[s]);Object.assign(a,l),Object.assign(a,T({},n(a),{lazy:void 0}));case 13:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function we(e,t,n,r,o,a,i,l,s){return Me.apply(this,arguments)}function Me(){return Me=(0,l.Z)((0,i.Z)().mark((function e(t,n,r,o,a,l,s,c,u){var d,f,p,h,m,v,x,g,y,b,N,E,C,I,S,_,A,T,R;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===u&&(u={}),h=function(e){var t,o=new Promise((function(e,n){return t=n}));return p=function(){return t()},n.signal.addEventListener("abort",p),Promise.race([e({request:n,params:r.params,context:u.requestContext}),o])},e.prev=2,m=r.route[t],!r.route.lazy){e.next=32;break}if(!m){e.next=14;break}return e.next=8,Promise.all([h(m).catch((function(e){v=e})),Re(r.route,l,a)]);case 8:if(x=e.sent,!v){e.next=11;break}throw v;case 11:f=x[0],e.next=30;break;case 14:return e.next=16,Re(r.route,l,a);case 16:if(!(m=r.route[t])){e.next=23;break}return e.next=20,h(m);case 20:f=e.sent,e.next=30;break;case 23:if("action"!==t){e.next=29;break}throw g=new URL(n.url),y=g.pathname+g.search,ze(405,{method:n.method,pathname:y,routeId:r.route.id});case 29:return e.abrupt("return",{type:P.data,data:void 0});case 30:e.next=41;break;case 32:if(m){e.next=38;break}throw b=new URL(n.url),ze(404,{pathname:b.pathname+b.search});case 38:return e.next=40,h(m);case 40:f=e.sent;case 41:k(void 0!==f,"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(2),d=P.error,f=e.t0;case 48:return e.prev=48,p&&n.signal.removeEventListener("abort",p),e.finish(48);case 51:if(!Ye(f)){e.next=83;break}if(N=f.status,!me.has(N)){e.next=61;break}if(k(E=f.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),be.test(E)?u.isStaticRequest||(C=new URL(n.url),I=E.startsWith("//")?new URL(C.protocol+E):new URL(E),S=null!=ee(I.pathname,s),I.origin===C.origin&&S&&(E=I.pathname+I.search+I.hash)):E=Ie(new URL(n.url),o.slice(0,o.indexOf(r)+1),s,!0,E,c),!u.isStaticRequest){e.next=60;break}throw f.headers.set("Location",E),f;case 60:return e.abrupt("return",{type:P.redirect,status:N,location:E,revalidate:null!==f.headers.get("X-Remix-Revalidate"),reloadDocument:null!==f.headers.get("X-Remix-Reload-Document")});case 61:if(!u.isRouteRequest){e.next=64;break}throw{type:d===P.error?P.error:P.data,response:f};case 64:if(e.prev=64,!(A=f.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(A)){e.next=72;break}return e.next=69,f.json();case 69:_=e.sent,e.next=75;break;case 72:return e.next=74,f.text();case 74:_=e.sent;case 75:e.next=80;break;case 77:return e.prev=77,e.t1=e.catch(64),e.abrupt("return",{type:P.error,error:e.t1});case 80:if(d!==P.error){e.next=82;break}return e.abrupt("return",{type:d,error:new ce(N,f.statusText,_),headers:f.headers});case 82:return e.abrupt("return",{type:P.data,data:_,statusCode:f.status,headers:f.headers});case 83:if(d!==P.error){e.next=85;break}return e.abrupt("return",{type:d,error:f});case 85:if(!Xe(f)){e.next=87;break}return e.abrupt("return",{type:P.deferred,deferredData:f,statusCode:null==(T=f.init)?void 0:T.status,headers:(null==(R=f.init)?void 0:R.headers)&&new Headers(f.init.headers)});case 87:return e.abrupt("return",{type:P.data,data:f});case 88:case"end":return e.stop()}}),e,null,[[2,44,48,51],[64,77]])}))),Me.apply(this,arguments)}function Oe(e,t,n,r){var o=e.createURL(Ge(t)).toString(),a={signal:n};if(r&&$e(r.formMethod)){var i=r.formMethod,l=r.formEncType;a.method=i.toUpperCase(),"application/json"===l?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):"text/plain"===l?a.body=r.text:"application/x-www-form-urlencoded"===l&&r.formData?a.body=je(r.formData):a.body=r.formData}return new Request(o,a)}function je(e){var t,n=new URLSearchParams,r=(0,_.Z)(e.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,u.Z)(t.value,2),a=o[0],i=o[1];n.append(a,"string"===typeof i?i:i.name)}}catch(l){r.e(l)}finally{r.f()}return n}function Le(e){var t,n=new FormData,r=(0,_.Z)(e.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,u.Z)(t.value,2),a=o[0],i=o[1];n.append(a,i)}}catch(l){r.e(l)}finally{r.f()}return n}function De(e,t,n,r,o){var a,i={},l=null,s=!1,c={};return n.forEach((function(n,u){var d=t[u].route.id;if(k(!qe(n),"Cannot handle redirect results in processLoaderData"),Ve(n)){var f=Be(e,d),p=n.error;r&&(p=Object.values(r)[0],r=void 0),null==(l=l||{})[f.route.id]&&(l[f.route.id]=p),i[d]=void 0,s||(s=!0,a=ue(n.error)?n.error.status:500),n.headers&&(c[d]=n.headers)}else Ke(n)?(o.set(d,n.deferredData),i[d]=n.deferredData.data):i[d]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[d]=n.headers)})),r&&(l=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:l,statusCode:a||200,loaderHeaders:c}}function Ze(e,t,n,r,o,a,i,l){for(var s=De(t,n,r,o,l),c=s.loaderData,u=s.errors,d=0;d<a.length;d++){var f=a[d],p=f.key,h=f.match,v=f.controller;k(void 0!==i&&void 0!==i[d],"Did not find corresponding fetcher result");var x=i[d];if(!v||!v.signal.aborted)if(Ve(x)){var g=Be(e.matches,null==h?void 0:h.route.id);u&&u[g.route.id]||(u=T({},u,(0,m.Z)({},g.route.id,x.error))),e.fetchers.delete(p)}else if(qe(x))k(!1,"Unhandled fetcher revalidation redirect");else if(Ke(x))k(!1,"Unhandled fetcher deferred data");else{var y=ut(x.data);e.fetchers.set(p,y)}}return{loaderData:c,errors:u}}function Fe(e,t,n,r){var o,a=T({},t),i=(0,_.Z)(n);try{for(i.s();!(o=i.n()).done;){var l=o.value,s=l.route.id;if(t.hasOwnProperty(s)?void 0!==t[s]&&(a[s]=t[s]):void 0!==e[s]&&l.route.loader&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(c){i.e(c)}finally{i.f()}return a}function Be(e,t){return(t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):(0,A.Z)(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Ue(e){var t=1===e.length?e[0]:e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ze(e,t){var n=void 0===t?{}:t,r=n.pathname,o=n.routeId,a=n.method,i=n.type,l="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(l="Bad Request",a&&r&&o?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+o+'", so there is no way to handle the request.':"defer-action"===i?s="defer() is not supported in actions":"invalid-body"===i&&(s="Unable to encode submission body")):403===e?(l="Forbidden",s='Route "'+o+'" does not match URL "'+r+'"'):404===e?(l="Not Found",s='No route matches URL "'+r+'"'):405===e&&(l="Method Not Allowed",a&&r&&o?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+o+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new ce(e||500,l,new Error(s),!0)}function We(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(qe(n))return{result:n,idx:t}}}function Ge(e){return j(T({},"string"===typeof e?L(e):e,{hash:""}))}function He(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}function Ke(e){return e.type===P.deferred}function Ve(e){return e.type===P.error}function qe(e){return(e&&e.type)===P.redirect}function Xe(e){var t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}function Ye(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Qe(e){return he.has(e.toLowerCase())}function $e(e){return fe.has(e.toLowerCase())}function Je(e,t,n,r,o,a){return et.apply(this,arguments)}function et(){return(et=(0,l.Z)((0,i.Z)().mark((function e(t,n,r,o,a,l){var s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=(0,i.Z)().mark((function e(s){var c,u,d,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r[s],u=n[s]){e.next=4;break}return e.abrupt("return","continue");case 4:if(d=t.find((function(e){return e.route.id===u.route.id})),f=null!=d&&!Te(d,u)&&void 0!==(l&&l[u.route.id]),!Ke(c)||!a&&!f){e.next=11;break}return k(p=o[s],"Expected an AbortSignal for revalidating fetcher deferred result"),e.next=11,tt(c,p,a).then((function(e){e&&(r[s]=e||r[s])}));case 11:case"end":return e.stop()}}),e)})),c=0;case 2:if(!(c<r.length)){e.next=10;break}return e.delegateYield(s(c),"t0",4);case 4:if("continue"!==e.t0){e.next=7;break}return e.abrupt("continue",7);case 7:c++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t,n){return nt.apply(this,arguments)}function nt(){return(nt=(0,l.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:P.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:P.error,error:e.t0});case 14:return e.abrupt("return",{type:P.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])})))).apply(this,arguments)}function rt(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function ot(e,t){var n="string"===typeof t?L(t).search:t.search;if(e[e.length-1].route.index&&rt(n||""))return e[e.length-1];var r=ne(e);return r[r.length-1]}function at(e){var t=e.formMethod,n=e.formAction,r=e.formEncType,o=e.text,a=e.formData,i=e.json;if(t&&n&&r)return null!=o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o}:null!=a?{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}:void 0}function it(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lt(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function st(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ct(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ut(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}var ft=e.createContext(null);var pt=e.createContext(null);var ht=e.createContext(null);var mt=e.createContext(null);var vt=e.createContext(null);var xt=e.createContext({outlet:null,matches:[],isDataRoute:!1});var gt=e.createContext(null);function yt(){return null!=e.useContext(vt)}function bt(){return yt()||k(!1),e.useContext(vt).location}function Nt(t,n,r,o){yt()||k(!1);var a,i=e.useContext(mt).navigator,l=e.useContext(xt).matches,s=l[l.length-1],c=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),d=(s&&s.route,bt());if(n){var f,p="string"===typeof n?L(n):n;"/"===u||(null==(f=p.pathname)?void 0:f.startsWith(u))||k(!1),a=p}else a=d;var h=a.pathname||"/",m=B(t,{pathname:"/"===u?h:h.slice(u.length)||"/"});var v=_t(m&&m.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:oe([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:oe([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),l,r,o);return n&&v?e.createElement(vt.Provider,{value:{location:dt({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:S.Pop}},v):v}function Et(){var t=function(){var t,n=e.useContext(gt),r=Tt(At.UseRouteError),o=Pt(At.UseRouteError);if(void 0!==n)return n;return null==(t=r.errors)?void 0:t[o]}(),n=ue(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var Ct=e.createElement(Et,null),It=function(t){(0,p.Z)(r,t);var n=(0,h.Z)(r);function r(e){var t;return(0,c.Z)(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,s.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return void 0!==this.state.error?e.createElement(xt.Provider,{value:this.props.routeContext},e.createElement(gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function St(t){var n=t.routeContext,r=t.match,o=t.children,a=e.useContext(ft);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(xt.Provider,{value:n},o)}function _t(t,n,r,o){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==t){var i;if(null==(i=r)||!i.errors)return null;t=r.matches}var l=t,s=null==(a=r)?void 0:a.errors;if(null!=s){var c=l.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));c>=0||k(!1),l=l.slice(0,Math.min(l.length,c+1))}var u=!1,d=-1;if(r&&o&&o.v7_partialHydration)for(var f=0;f<l.length;f++){var p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.loader&&p.route.id&&void 0===r.loaderData[p.route.id]&&(!r.errors||void 0===r.errors[p.route.id])){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}return l.reduceRight((function(t,o,a){var i,c,f=!1,p=null,h=null;r&&(i=s&&o.route.id?s[o.route.id]:void 0,p=o.route.errorElement||Ct,u&&(d<0&&0===a?(c="route-fallback",!1||Rt[c]||(Rt[c]=!0),f=!0,h=null):d===a&&(f=!0,h=o.route.hydrateFallbackElement||null)));var m=n.concat(l.slice(0,a+1)),v=function(){var n;return n=i?p:f?h:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:t,e.createElement(St,{match:o,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===a)?e.createElement(It,{location:r.location,revalidation:r.revalidation,component:p,error:i,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()}),null)}var At=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(At||{});function Tt(t){var n=e.useContext(pt);return n||k(!1),n}function Pt(t){var n=function(t){var n=e.useContext(xt);return n||k(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||k(!1),r.route.id}var Rt={};t.startTransition;function kt(t){var n=t.basename,r=void 0===n?"/":n,o=t.children,a=void 0===o?null:o,i=t.location,l=t.navigationType,s=void 0===l?S.Pop:l,c=t.navigator,u=t.static,d=void 0!==u&&u,f=t.future;yt()&&k(!1);var p=r.replace(/^\/*/,"/"),h=e.useMemo((function(){return{basename:p,navigator:c,static:d,future:dt({v7_relativeSplatPath:!1},f)}}),[p,f,c,d]);"string"===typeof i&&(i=L(i));var m=i,v=m.pathname,x=void 0===v?"/":v,g=m.search,y=void 0===g?"":g,b=m.hash,N=void 0===b?"":b,E=m.state,C=void 0===E?null:E,I=m.key,_=void 0===I?"default":I,A=e.useMemo((function(){var e=ee(x,p);return null==e?null:{location:{pathname:e,search:y,hash:N,state:C,key:_},navigationType:s}}),[p,x,y,N,C,_,s]);return null==A?null:e.createElement(mt.Provider,{value:h},e.createElement(vt.Provider,{children:a,value:A}))}var wt=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(wt||{}),Mt=new Promise((function(){}));e.Component;function Ot(t){var n={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(n,{element:e.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(n,{hydrateFallbackElement:e.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(n,{errorElement:e.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),n}function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lt(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=jt({},t,{errors:Dt(t.errors)})),t}function Dt(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var o=(0,u.Z)(r[n],2),a=o[0],i=o[1];if(i&&"RouteErrorResponse"===i.__type)t[a]=new ce(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){var l=window[i.__subType];if("function"===typeof l)try{var s=new l(i.message);s.stack="",t[a]=s}catch(d){}}if(null==t[a]){var c=new Error(i.message);c.stack="",t[a]=c}}else t[a]=i}return t}var Zt=e.createContext({isTransitioning:!1});var Ft=e.createContext(new Map);var Bt=t.startTransition,Ut=f.flushSync;function zt(e){Ut?Ut(e):e()}var Wt=(0,s.Z)((function e(){var t=this;(0,c.Z)(this,e),this.status="pending",this.promise=new Promise((function(e,n){t.resolve=function(n){"pending"===t.status&&(t.status="resolved",e(n))},t.reject=function(e){"pending"===t.status&&(t.status="rejected",n(e))}}))}));function Gt(t){var n=t.fallbackElement,r=t.router,o=t.future,a=e.useState(r.state),s=(0,u.Z)(a,2),c=s[0],d=s[1],f=e.useState(),p=(0,u.Z)(f,2),h=p[0],m=p[1],v=e.useState({isTransitioning:!1}),x=(0,u.Z)(v,2),g=x[0],y=x[1],b=e.useState(),N=(0,u.Z)(b,2),E=N[0],C=N[1],I=e.useState(),S=(0,u.Z)(I,2),_=S[0],A=S[1],T=e.useState(),P=(0,u.Z)(T,2),R=P[0],k=P[1],w=e.useRef(new Map),M=(o||{}).v7_startTransition,O=e.useCallback((function(e){M?function(e){Bt?Bt(e):e()}(e):e()}),[M]),j=e.useCallback((function(e,t){var n=t.deletedFetchers,o=t.unstable_flushSync,a=t.unstable_viewTransitionOpts;n.forEach((function(e){return w.current.delete(e)})),e.fetchers.forEach((function(e,t){void 0!==e.data&&w.current.set(t,e.data)}));var i=null==r.window||"function"!==typeof r.window.document.startViewTransition;if(a&&!i){if(o){zt((function(){_&&(E&&E.resolve(),_.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));var l=r.window.document.startViewTransition((function(){zt((function(){return d(e)}))}));return l.finished.finally((function(){zt((function(){C(void 0),A(void 0),m(void 0),y({isTransitioning:!1})}))})),void zt((function(){return A(l)}))}_?(E&&E.resolve(),_.skipTransition(),k({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(m(e),y({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else o?zt((function(){return d(e)})):O((function(){return d(e)}))}),[r.window,_,E,w,O]);e.useLayoutEffect((function(){return r.subscribe(j)}),[r,j]),e.useEffect((function(){g.isTransitioning&&!g.flushSync&&C(new Wt)}),[g]),e.useEffect((function(){if(E&&h&&r.window){var e=h,t=E.promise,n=r.window.document.startViewTransition((0,l.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return O((function(){return d(e)})),n.next=3,t;case 3:case"end":return n.stop()}}),n)}))));n.finished.finally((function(){C(void 0),A(void 0),m(void 0),y({isTransitioning:!1})})),A(n)}}),[O,h,E,r.window]),e.useEffect((function(){E&&h&&c.location.key===h.location.key&&E.resolve()}),[E,_,c.location,h]),e.useEffect((function(){!g.isTransitioning&&R&&(m(R.state),y({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),k(void 0))}),[g.isTransitioning,R]),e.useEffect((function(){}),[]);var L=e.useMemo((function(){return{createHref:r.createHref,encodeLocation:r.encodeLocation,go:function(e){return r.navigate(e)},push:function(e,t,n){return r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})},replace:function(e,t,n){return r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})}}}),[r]),D=r.basename||"/",Z=e.useMemo((function(){return{router:r,navigator:L,static:!1,basename:D}}),[r,L,D]);return e.createElement(e.Fragment,null,e.createElement(ft.Provider,{value:Z},e.createElement(pt.Provider,{value:c},e.createElement(Ft.Provider,{value:w.current},e.createElement(Zt.Provider,{value:g},e.createElement(kt,{basename:D,location:c.location,navigationType:c.historyAction,navigator:L,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},c.initialized||r.future.v7_partialHydration?e.createElement(Ht,{routes:r.routes,future:r.future,state:c}):n))))),null)}function Ht(e){var t=e.routes,n=e.future;return Nt(t,void 0,e.state,n)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Kt,Vt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kt||(Kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Vt||(Vt={}));var qt=n(7587),Xt=n(6902),Yt=n(1959),Qt=n(6088),$t=(0,n(9100).Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Jt=n(5094),en=n(966),tn=n(184),nn="".concat(null!=="."?".":"","/docs/documentation.json"),rn={tip:"Tip",info:"Info",warning:"Warning"},on={tip:"docs-note--tip",info:"docs-note--info",warning:"docs-note--warning"};function an(t,n){var r=function(e){for(var t,n=[],r=/(`[^`]+`|\*\*[^*]+\*\*|\*[^*]+\*|Figure\s*\[([^\]]+)\])/g,o=0;null!==(t=r.exec(e));){t.index>o&&n.push({kind:"text",value:e.slice(o,t.index)});var a=t[0];if(a.startsWith("`"))n.push({kind:"code",value:a.slice(1,-1)});else if(a.startsWith("**"))n.push({kind:"strong",value:a.slice(2,-2)});else if(a.startsWith("*"))n.push({kind:"em",value:a.slice(1,-1)});else if(a.startsWith("Figure")){var i=t[2];n.push({kind:"figureRef",value:a,figureId:i})}o=r.lastIndex}return o<e.length&&n.push({kind:"text",value:e.slice(o)}),n.filter((function(e){return e.value.length>0}))}(t);return 0===r.length?t:r.map((function(t,r){switch(t.kind){case"code":return(0,tn.jsx)("code",{className:"docs-inline-code",children:t.value},r);case"strong":return(0,tn.jsx)("strong",{className:"docs-strong",children:t.value},r);case"em":return(0,tn.jsx)("em",{className:"docs-emphasis",children:t.value},r);case"figureRef":var o=t.figureId&&n?n.get(t.figureId):void 0;return o?(0,tn.jsxs)("a",{href:"#figure-".concat(t.figureId),className:"docs-figure-ref",onClick:function(e){e.preventDefault();var n=document.getElementById("figure-".concat(t.figureId));null===n||void 0===n||n.scrollIntoView({behavior:"smooth",block:"center"})},children:["Figure ",o]},r):(0,tn.jsx)(e.Fragment,{children:t.value},r);default:return(0,tn.jsx)(e.Fragment,{children:t.value},r)}}))}function ln(e){if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:"))return e;var t=null!=="."?".":"",n=e.startsWith("/")?e:"/".concat(e);if(!t)return n;var r=t.endsWith("/")?"":"/";return"".concat(t).concat(r).concat(n.replace(/^\/+/,""))}function sn(e){switch(e){case"sm":return" docs-image--sm";case"md":return" docs-image--md";case"lg":return" docs-image--lg";case"full":return" docs-image--full";default:return""}}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e.flatMap((function(e){var r={id:e.id,title:e.title,level:n,ancestors:t},o=[].concat((0,A.Z)(t),[e.id]),a=Math.min(n+1,6),i=e.subsections?cn(e.subsections,o,a):[];return[r].concat((0,A.Z)(i))}))}function un(e){return e.flatMap((function(e){return[e.id].concat((0,A.Z)(e.subsections?un(e.subsections):[]))}))}var dn=function(){var t,n=(0,e.useState)({status:"loading"}),r=(0,u.Z)(n,2),o=r[0],a=r[1],s=(0,e.useState)(new Set),c=(0,u.Z)(s,2),d=c[0],f=c[1],p=(0,e.useState)(new Set),h=(0,u.Z)(p,2),m=h[0],v=h[1],x=(0,e.useState)(1.2),g=(0,u.Z)(x,2),y=g[0],b=g[1],N=(0,e.useState)(null),E=(0,u.Z)(N,2),C=E[0],I=E[1];(0,e.useEffect)((function(){var e=new AbortController;function t(){return(t=(0,l.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(nn,{signal:e.signal});case 3:if((n=t.sent).ok){t.next=6;break}throw new Error("Failed to load documentation (status ".concat(n.status,")"));case 6:return t.next=8,n.json();case 8:r=t.sent,a({status:"ready",docs:r}),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(0),"AbortError"!==t.t0.name){t.next=16;break}return t.abrupt("return");case 16:a({status:"error",message:t.t0 instanceof Error?t.t0.message:"Unable to load documentation. Please try again later."});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e.abort()}}),[]),(0,e.useEffect)((function(){"ready"===o.status&&(f(new Set(un(o.docs.sections))),v(new Set))}),[o]),(0,e.useEffect)((function(){"ready"===o.status&&o.docs.title&&(document.title="".concat(o.docs.title," | Documentation"))}),[o]);var S=(0,e.useMemo)((function(){return"ready"!==o.status?[]:cn(o.docs.sections)}),[o]),_=(0,e.useMemo)((function(){return"ready"!==o.status?new Map:function(e){var t=new Map,n=1;return e.forEach((function e(r){var o,a;null===(o=r.content)||void 0===o||o.forEach((function(e){"image"===e.type&&e.figureId&&t.set(e.figureId,n++)})),null===(a=r.subsections)||void 0===a||a.forEach(e)})),t}(o.docs.sections)}),[o]),A=(0,e.useCallback)((function(e){v((function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),T=(0,e.useCallback)((function(e){v((function(t){var n=new Set(t);return 2===e.level?n.add(e.id):e.ancestors.length>0&&n.add(e.ancestors[0]),n}))}),[]),P=(0,e.useCallback)((function(e){f((function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),R=(0,e.useCallback)((function(e,t,n){I({src:ln(e.src),alt:e.alt,caption:e.caption,sectionTitle:t,sectionContent:n})}),[]),k=(0,e.useCallback)((function(){I(null)}),[]);(0,e.useEffect)((function(){var e=function(e){"Escape"===e.key&&C&&k()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[C,k]);var w=(0,e.useCallback)((function(e,t,n,r,o){switch(e.type){case"paragraph":return(0,tn.jsx)("p",{className:"docs-paragraph",children:an(e.text,n)},t);case"list":var a="ordered"===e.style?"ol":"ul";return(0,tn.jsx)(a,{className:"docs-list",children:e.items.map((function(e,t){return(0,tn.jsx)("li",{children:an(e,n)},t)}))},t);case"note":return(0,tn.jsxs)("div",{className:"docs-note ".concat(on[e.variant]),children:[(0,tn.jsx)("span",{className:"docs-note__label",children:rn[e.variant]}),(0,tn.jsx)("span",{className:"docs-note__content",children:an(e.text,n)})]},t);case"table":return(0,tn.jsx)("div",{className:"docs-table-wrapper",children:(0,tn.jsxs)("table",{className:"docs-table",children:[(0,tn.jsx)("thead",{children:(0,tn.jsx)("tr",{children:e.headers.map((function(e,t){return(0,tn.jsx)("th",{children:an(e,n)},t)}))})}),(0,tn.jsx)("tbody",{children:e.rows.map((function(e,t){return(0,tn.jsx)("tr",{children:e.map((function(e,t){return(0,tn.jsx)("td",{children:an(e,n)},t)}))},t)}))})]})},t);case"image":var i=e.figureId?n.get(e.figureId):void 0;return(0,tn.jsxs)("figure",{id:e.figureId?"figure-".concat(e.figureId):void 0,className:"docs-image".concat(sn(e.width)),onClick:function(){return R(e,r,o)},style:{cursor:"pointer"},children:[(0,tn.jsx)("img",{src:ln(e.src),alt:e.alt,loading:"lazy"}),i||e.caption?(0,tn.jsxs)("figcaption",{className:"docs-image__caption",children:[i?(0,tn.jsxs)("span",{className:"docs-figure-number",children:["Figure ",i,"."]}):null,e.caption?(0,tn.jsx)("span",{children:an(e.caption,n)}):null]}):null]},t);case"code":var l=e.content;return(0,tn.jsxs)("figure",{className:"docs-code-block",children:[e.label?(0,tn.jsx)("figcaption",{className:"docs-code-block__label",children:e.label}):null,(0,tn.jsx)("pre",{className:"docs-code-block__pre",children:(0,tn.jsx)("code",{className:"docs-code-block__code".concat(e.language?" language-".concat(e.language):""),children:l})})]},t);default:return null}}),[R]),M=(0,e.useCallback)((function(e,t){e.preventDefault(),T(t),f((function(e){var n=new Set(e);return t.ancestors.forEach((function(e){return n.add(e)})),n.add(t.id),n}));var n="".concat("#/docs","?section=").concat(t.id);window.location.hash!==n&&(window.location.hash=n);var r,o=document.getElementById(t.id);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),null===(r=o.focus)||void 0===r||r.call(o))}),[T]),O=(0,e.useCallback)((function(e,t){var n,r,o,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=Math.min(i,6),s="h".concat(l);if(i>2)return(0,tn.jsxs)("article",{id:e.id,className:"docs-subsection",children:[(0,tn.jsx)(s,{className:"docs-subsection__heading",children:e.title}),e.summary?(0,tn.jsx)("p",{className:"docs-subsection__summary",children:an(e.summary,t)}):null,null===(o=e.content)||void 0===o?void 0:o.map((function(n,r){return w(n,"".concat(e.id,"-block-").concat(r),t,e.title,e.content)})),null!==(a=e.subsections)&&void 0!==a&&a.length?e.subsections.map((function(e){return O(e,t,i+1)})):null]},e.id);var c=d.has(e.id),u="".concat(e.id,"-content");return(0,tn.jsxs)("section",{id:e.id,className:"docs-section".concat(c?"":" docs-section--collapsed"),children:[(0,tn.jsxs)("header",{className:"docs-section__header",children:[(0,tn.jsx)(s,{className:"docs-section__heading",children:(0,tn.jsxs)("button",{type:"button",className:"docs-section__toggle",onClick:function(){return P(e.id)},"aria-expanded":c,"aria-controls":u,children:[(0,tn.jsx)("span",{className:"docs-section__chevron","aria-hidden":"true",children:"\u25be"}),(0,tn.jsx)("span",{children:e.title})]})}),e.summary?(0,tn.jsx)("p",{className:"docs-section__summary",children:an(e.summary,t)}):null]}),(0,tn.jsxs)("div",{className:"docs-section__body",id:u,hidden:!c,children:[null===(n=e.content)||void 0===n?void 0:n.map((function(n,r){return w(n,"".concat(e.id,"-block-").concat(r),t,e.title,e.content)})),null!==(r=e.subsections)&&void 0!==r&&r.length?e.subsections.map((function(e){return O(e,t,i+1)})):null]})]},e.id)}),[d,P,w]);if("loading"===o.status)return(0,tn.jsx)("main",{className:"docs-page docs-page--centered",children:(0,tn.jsxs)("div",{className:"docs-status",children:[(0,tn.jsx)("span",{className:"docs-status__spinner","aria-hidden":!0,children:"\u25cf"}),(0,tn.jsx)("span",{className:"docs-status__label",children:"Loading documentation\u2026"})]})});if("error"===o.status)return(0,tn.jsx)("main",{className:"docs-page docs-page--centered",children:(0,tn.jsx)("div",{className:"docs-status docs-status--error",children:(0,tn.jsx)("span",{className:"docs-status__label",children:o.message})})});var j=o.docs;return(0,tn.jsxs)(tn.Fragment,{children:[C&&(0,tn.jsxs)("div",{className:"docs-image-modal",onClick:k,role:"dialog","aria-modal":"true","aria-label":"Expanded image view",children:[(0,tn.jsx)("button",{className:"docs-image-modal__close",onClick:k,"aria-label":"Close expanded image (Press Escape)",title:"Close (Esc)",children:(0,tn.jsx)(Qt.Z,{size:20})}),(0,tn.jsxs)("div",{className:"docs-image-modal__content",onClick:function(e){return e.stopPropagation()},children:[(0,tn.jsxs)("div",{className:"docs-image-modal__image-container",children:[(0,tn.jsx)("img",{src:C.src,alt:C.alt,className:"docs-image-modal__img"}),C.caption&&(0,tn.jsx)("div",{className:"docs-image-modal__caption",children:an(C.caption,_)})]}),C.sectionContent&&C.sectionContent.length>0&&(0,tn.jsxs)("div",{className:"docs-image-modal__context",children:[C.sectionTitle&&(0,tn.jsx)("h3",{className:"docs-image-modal__context-title",children:C.sectionTitle}),(0,tn.jsx)("div",{className:"docs-image-modal__context-content",children:C.sectionContent.map((function(e,t){return"image"===e.type?null:w(e,"modal-".concat(t),_)}))})]})]})]}),(0,tn.jsxs)("div",{className:"docs-container",style:{"--docs-scale":y},children:[(0,tn.jsx)("header",{className:"docs-header",children:(0,tn.jsxs)("div",{className:"docs-header__content",children:[(0,tn.jsx)("h1",{className:"docs-header__title",children:j.title}),(0,tn.jsxs)("div",{className:"docs-header__controls",children:[(0,tn.jsxs)("div",{className:"docs-font-controls",children:[(0,tn.jsx)(Yt.z,{label:"",variant:"simpleHighlight",icon:(0,tn.jsx)($t,{size:12}),hint:"Decrease font size",onClick:function(){return b((function(e){return Math.max(.8,e-.1)}))},disabled:y<=.8}),(0,tn.jsx)(Yt.z,{label:"",variant:"simpleHighlight",icon:(0,tn.jsx)(Jt.Z,{size:12}),hint:"Reset font size",onClick:function(){return b(1)}}),(0,tn.jsx)(Yt.z,{label:"",variant:"simpleHighlight",icon:(0,tn.jsx)(en.Z,{size:12}),hint:"Increase font size",onClick:function(){return b((function(e){return Math.min(1.4,e+.1)}))},disabled:y>=1.4})]}),(0,tn.jsx)(Yt.z,{label:"",variant:"secondary",icon:(0,tn.jsx)(Qt.Z,{size:14}),hint:"Close documentation",onClick:function(){window.location.hash="#/"}}),(0,tn.jsx)(Xt.Z,{className:"docs-theme-toggle"})]})]})}),(0,tn.jsxs)("main",{className:"docs-page",children:[(0,tn.jsxs)("aside",{className:"docs-page__toc","aria-label":"Table of contents",children:[(0,tn.jsx)("div",{className:"docs-page__toc-header",children:(0,tn.jsxs)("dl",{className:"docs-meta",children:[j.version?(0,tn.jsxs)("div",{children:[(0,tn.jsx)("dt",{children:"Version"}),(0,tn.jsx)("dd",{children:j.version})]}):null,j.lastUpdated?(0,tn.jsxs)("div",{children:[(0,tn.jsx)("dt",{children:"Last updated"}),(0,tn.jsx)("dd",{children:j.lastUpdated})]}):null]})}),(0,tn.jsx)("nav",{className:"docs-toc-nav",children:(0,tn.jsx)("ol",{children:S.map((function(e){var t=2===e.level,n=t?e.id:e.ancestors[0];if(!(t||!!n&&m.has(n)))return null;if(t){var r=m.has(e.id),o=S.some((function(t){return t.ancestors[0]===e.id}));return(0,tn.jsx)("li",{"data-level":e.level,children:(0,tn.jsxs)("div",{className:"docs-toc-item",children:[o?(0,tn.jsx)("button",{type:"button",className:"docs-toc-toggle",onClick:function(){return A(e.id)},"aria-expanded":r,"aria-label":"".concat(r?"Collapse":"Expand"," ").concat(e.title),children:(0,tn.jsx)("span",{className:"docs-toc-toggle__chevron","aria-hidden":"true",children:"\u25be"})}):(0,tn.jsx)("span",{className:"docs-toc-toggle docs-toc-toggle--spacer","aria-hidden":"true",children:"\u25b8"}),(0,tn.jsx)("a",{href:"#/docs?section=".concat(e.id),onClick:function(t){return M(t,e)},className:"docs-toc-link",style:{paddingLeft:"".concat(12*(e.level-2),"px")},children:e.title})]})},e.id)}return(0,tn.jsx)("li",{"data-level":e.level,children:(0,tn.jsx)("a",{href:"#/docs?section=".concat(e.id),onClick:function(t){return M(t,e)},className:"docs-toc-link",style:{paddingLeft:"".concat(12*(e.level-2),"px")},children:e.title})},e.id)}))})})]}),(0,tn.jsxs)("div",{className:"docs-page__content",role:"main","aria-label":"Documentation content",children:[j.sections.map((function(e){return O(e,_)})),null!==(t=j.resources)&&void 0!==t&&t.length?(0,tn.jsxs)("section",{id:"resources",className:"docs-section docs-section--resources",children:[(0,tn.jsx)("header",{className:"docs-section__header",children:(0,tn.jsx)("h2",{children:"Resources"})}),(0,tn.jsx)("ul",{className:"docs-resources",children:j.resources.map((function(e){return(0,tn.jsxs)("li",{children:[(0,tn.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.label}),e.description?(0,tn.jsx)("p",{children:an(e.description,_)}):null]},e.url)}))})]}):null]})]})]})]})},fn=function(){return(0,tn.jsx)(qt.f6,{children:(0,tn.jsx)(dn,{})})},pn=["","/Exornata","/exornata","/XRNA-React","/xrna-react"],hn=function(e,t){return e?t&&"/"!==t?"".concat(e).concat(t):e:t||"/"},mn=function(e,t){return Ce({basename:null==t?void 0:t.basename,future:jt({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),D((function(e,t){var n=L(e.location.hash.substr(1)),r=n.pathname,o=void 0===r?"/":r,a=n.search,i=void 0===a?"":a,l=n.hash,s=void 0===l?"":l;return o.startsWith("/")||o.startsWith(".")||(o="/"+o),O("",{pathname:o,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var o=e.location.href,a=o.indexOf("#");r=-1===a?o:o.slice(0,a)}return r+"#"+("string"===typeof t?t:j(t))}),(function(e,t){w("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||Lt(),routes:e,mapRouteProperties:Ot,window:null==t?void 0:t.window}).initialize();var n}(pn.flatMap((function(e){return[{path:hn(e,"/"),element:(0,tn.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!0})},{path:hn(e,"/main"),element:(0,tn.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!1})},{path:hn(e,"/main/*"),element:(0,tn.jsx)(o.default.Component,{r2dtLegacyVersionFlag:!1})},{path:hn(e,"/docs"),element:(0,tn.jsx)(fn,{})}]}))),vn=r.createRoot(document.getElementById("root")),xn=function(){var e=window.location.pathname;return e.length>1&&e.endsWith("/")?e.slice(0,-1):e||"/"}(),gn=null!=="."?".":"",yn=gn.endsWith("/")?gn.slice(0,-1):gn,bn=new Set(pn.map((function(e){return hn(e,"/docs")})));if(yn){var Nn=yn.startsWith("http")?function(){try{return new URL(yn).pathname}catch(e){return""}}():yn,En=Nn.length>1&&Nn.endsWith("/")?Nn.slice(0,-1):Nn;En&&"/"!==En&&bn.add("".concat(En,"/docs"))}vn.render((0,tn.jsx)(e.StrictMode,{children:bn.has(xn)?(0,tn.jsx)(fn,{}):(0,tn.jsx)(Gt,{router:mn})})),a()}()}();
//# sourceMappingURL=main.de318431.js.map