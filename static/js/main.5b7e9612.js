/*! For license information please see main.5b7e9612.js.LICENSE.txt */
!function(){var e={197:function(e,n,t){var r=t(9).Symbol;e.exports=r},66:function(e,n,t){var r=t(197),o=t(587),a=t(581),i="[object Null]",l="[object Undefined]",s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?l:i:s&&s in Object(e)?o(e):a(e)}},821:function(e,n,t){var r=t(50),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},32:function(e,n,t){var r="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;e.exports=r},587:function(e,n,t){var r=t(197),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var n=a.call(e,l),t=e[l];try{e[l]=void 0;var r=!0}catch(s){}var o=i.call(e);return r&&(n?e[l]=t:delete e[l]),o}},581:function(e){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},9:function(e,n,t){var r=t(32),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},50:function(e){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},573:function(e,n,t){var r=t(92),o=t(72),a=t(582),i="Expected a function",l=Math.max,s=Math.min;e.exports=function(e,n,t){var u,c,d,f,p,h,v=0,m=!1,x=!1,g=!0;if("function"!=typeof e)throw new TypeError(i);function y(n){var t=u,r=c;return u=c=void 0,v=n,f=e.apply(r,t)}function b(e){var t=e-h;return void 0===h||t>=n||t<0||x&&e-v>=d}function N(){var e=o();if(b(e))return I(e);p=setTimeout(N,function(e){var t=n-(e-h);return x?s(t,d-(e-v)):t}(e))}function I(e){return p=void 0,g&&u?y(e):(u=c=void 0,f)}function C(){var e=o(),t=b(e);if(u=arguments,c=this,h=e,t){if(void 0===p)return function(e){return v=e,p=setTimeout(N,n),m?y(e):f}(h);if(x)return clearTimeout(p),p=setTimeout(N,n),y(h)}return void 0===p&&(p=setTimeout(N,n)),f}return n=a(n)||0,r(t)&&(m=!!t.leading,d=(x="maxWait"in t)?l(a(t.maxWait)||0,n):d,g="trailing"in t?!!t.trailing:g),C.cancel=function(){void 0!==p&&clearTimeout(p),v=0,u=h=c=p=void 0},C.flush=function(){return void 0===p?f:I(o())},C}},92:function(e){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,n,t){var r=t(66),o=t(141),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==a}},72:function(e,n,t){var r=t(9);e.exports=function(){return r.Date.now()}},38:function(e,n,t){var r=t(573),o=t(92),a="Expected a function";e.exports=function(e,n,t){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return o(t)&&(i="leading"in t?!!t.leading:i,l="trailing"in t?!!t.trailing:l),r(e,n,{leading:i,maxWait:n,trailing:l})}},582:function(e,n,t){var r=t(821),o=t(92),a=t(152),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=o(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var t=s.test(e);return t||u.test(e)?c(e.slice(2),t?2:8):l.test(e)?i:+e}},463:function(e,n,t){"use strict";var r=t(791),o=t(296);function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function s(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(l[e]=n,e=0;e<n.length;e++)i.add(n[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,n,t,r,o,a,i){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];m[n]=new v(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,n,t,r){var o=m.hasOwnProperty(n)?m[n]:null;(null!==o?0!==o.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,o,r)&&(t=null),r||null===o?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):o.mustUseProperty?e[o.propertyName]=null===t?3!==o.type&&"":t:(n=o.attributeName,r=o.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(o=o.type)||4===o&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(x,g);m[n]=new v(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(x,g);m[n]=new v(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(x,g);m[n]=new v(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,D=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var B=!1;function W(e,n){if(!e||B)return"";B=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){r=u}e.call(n.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var o=u.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||o[i]!==a[l]){var s="\n"+o[i].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=i&&0<=l);break}}}finally{B=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case I:return"Portal";case E:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case k:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(n=e.displayName||null)?n:U(e.type)||"Memo";case R:n=e._payload,e=e._init;try{return U(e(n))}catch(t){}}return null}function G(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(n);case 8:return n===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof n)return n.displayName||n.name||null;if("string"===typeof n)return n}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function V(e){e._valueTracker||(e._valueTracker=function(e){var n=K(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var o=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function q(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function X(e,n){var t=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function Y(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=H(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function $(e,n){null!=(n=n.checked)&&y(e,"checked",n,!1)}function Z(e,n){$(e,n);var t=H(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,H(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function J(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&Q(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var o=0;o<t.length;o++)n["$"+t[o]]=!0;for(t=0;t<e.length;t++)o=n.hasOwnProperty("$"+e[t].value),e[t].selected!==o&&(e[t].selected=o),o&&r&&(e[t].defaultSelected=!0)}else{for(t=""+H(t),n=null,o=0;o<e.length;o++){if(e[o].value===t)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==n||e[o].disabled||(n=e[o])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(a(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(a(92));if(ne(t)){if(1<t.length)throw Error(a(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:H(t)}}function ae(e,n){var t=H(n.value),r=H(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ie(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?le(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,n)}))}:ce);function fe(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function me(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),o=ve(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,o):e[t]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]}))}));var xe=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,n){if(n){if(xe[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(a(60));if("object"!==typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(a(62))}}function ye(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Se=null;function Ee(e){if(e=bo(e)){if("function"!==typeof Ie)throw Error(a(280));var n=e.stateNode;n&&(n=Io(n),Ie(e.stateNode,e.type,n))}}function we(e){Ce?Se?Se.push(e):Se=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,n=Se;if(Se=Ce=null,Ee(e),n)for(e=0;e<n.length;e++)Ee(n[e])}}function ke(e,n){return e(n)}function Pe(){}var Te=!1;function Me(e,n,t){if(Te)return e(n,t);Te=!0;try{return ke(e,n,t)}finally{Te=!1,(null!==Ce||null!==Se)&&(Pe(),Ae())}}function Re(e,n){var t=e.stateNode;if(null===t)return null;var r=Io(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(a(231,n,typeof t));return t}var _e=!1;if(c)try{var je={};Object.defineProperty(je,"passive",{get:function(){_e=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ce){_e=!1}function Oe(e,n,t,r,o,a,i,l,s){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}var Le=!1,De=null,Fe=!1,Be=null,We={onError:function(e){Le=!0,De=e}};function ze(e,n,t,r,o,a,i,l,s){Le=!1,De=null,Oe.apply(We,arguments)}function Ue(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function Ge(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=Ue(e)))throw Error(a(188));return n!==e?null:e}for(var t=e,r=n;;){var o=t.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){t=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===t)return He(o),e;if(i===r)return He(o),n;i=i.sibling}throw Error(a(188))}if(t.return!==r.return)t=o,r=i;else{for(var l=!1,s=o.child;s;){if(s===t){l=!0,t=o,r=i;break}if(s===r){l=!0,r=o,t=i;break}s=s.sibling}if(!l){for(s=i.child;s;){if(s===t){l=!0,t=i,r=o;break}if(s===r){l=!0,r=i,t=o;break}s=s.sibling}if(!l)throw Error(a(189))}}if(t.alternate!==r)throw Error(a(190))}if(3!==t.tag)throw Error(a(188));return t.stateNode.current===t?e:n}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=Ve(e);if(null!==n)return n;e=e.sibling}return null}var qe=o.unstable_scheduleCallback,Qe=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,$e=o.unstable_now,Ze=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,en=o.unstable_UserBlockingPriority,nn=o.unstable_NormalPriority,tn=o.unstable_LowPriority,rn=o.unstable_IdlePriority,on=null,an=null;var ln=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(sn(e)/un|0)|0},sn=Math.log,un=Math.LN2;var cn=64,dn=4194304;function fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&t;if(0!==i){var l=i&~o;0!==l?r=fn(l):0!==(a&=i)&&(r=fn(a))}else 0!==(i=t&~o)?r=fn(i):0!==a&&(r=fn(a));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&o)&&((o=r&-r)>=(a=n&-n)||16===o&&0!==(4194240&a)))return n;if(0!==(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)o=1<<(t=31-ln(n)),r|=e[t],n&=~o;return r}function hn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function vn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mn(){var e=cn;return 0===(4194240&(cn<<=1))&&(cn=64),e}function xn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function gn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-ln(n)]=t}function yn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-ln(t),o=1<<r;o&n|e[r]&n&&(e[r]|=n),t&=~o}}var bn=0;function Nn(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var In,Cn,Sn,En,wn,An=!1,kn=[],Pn=null,Tn=null,Mn=null,Rn=new Map,_n=new Map,jn=[],On="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ln(e,n){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Rn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(n.pointerId)}}function Dn(e,n,t,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==n&&(null!==(n=bo(n))&&Cn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==o&&-1===n.indexOf(o)&&n.push(o),e)}function Fn(e){var n=yo(e.target);if(null!==n){var t=Ue(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=Ge(t)))return e.blockedOn=n,void wn(e.priority,(function(){Sn(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Bn(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Yn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=bo(t))&&Cn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);be=r,t.target.dispatchEvent(r),be=null,n.shift()}return!0}function Wn(e,n,t){Bn(e)&&t.delete(n)}function zn(){An=!1,null!==Pn&&Bn(Pn)&&(Pn=null),null!==Tn&&Bn(Tn)&&(Tn=null),null!==Mn&&Bn(Mn)&&(Mn=null),Rn.forEach(Wn),_n.forEach(Wn)}function Un(e,n){e.blockedOn===n&&(e.blockedOn=null,An||(An=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zn)))}function Gn(e){function n(n){return Un(n,e)}if(0<kn.length){Un(kn[0],e);for(var t=1;t<kn.length;t++){var r=kn[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pn&&Un(Pn,e),null!==Tn&&Un(Tn,e),null!==Mn&&Un(Mn,e),Rn.forEach(n),_n.forEach(n),t=0;t<jn.length;t++)(r=jn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<jn.length&&null===(t=jn[0]).blockedOn;)Fn(t),null===t.blockedOn&&jn.shift()}var Hn=b.ReactCurrentBatchConfig,Kn=!0;function Vn(e,n,t,r){var o=bn,a=Hn.transition;Hn.transition=null;try{bn=1,Qn(e,n,t,r)}finally{bn=o,Hn.transition=a}}function qn(e,n,t,r){var o=bn,a=Hn.transition;Hn.transition=null;try{bn=4,Qn(e,n,t,r)}finally{bn=o,Hn.transition=a}}function Qn(e,n,t,r){if(Kn){var o=Yn(e,n,t,r);if(null===o)Hr(e,n,r,Xn,t),Ln(e,r);else if(function(e,n,t,r,o){switch(n){case"focusin":return Pn=Dn(Pn,e,n,t,r,o),!0;case"dragenter":return Tn=Dn(Tn,e,n,t,r,o),!0;case"mouseover":return Mn=Dn(Mn,e,n,t,r,o),!0;case"pointerover":var a=o.pointerId;return Rn.set(a,Dn(Rn.get(a)||null,e,n,t,r,o)),!0;case"gotpointercapture":return a=o.pointerId,_n.set(a,Dn(_n.get(a)||null,e,n,t,r,o)),!0}return!1}(o,e,n,t,r))r.stopPropagation();else if(Ln(e,r),4&n&&-1<On.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&In(a),null===(a=Yn(e,n,t,r))&&Hr(e,n,r,Xn,t),a===o)break;o=a}null!==o&&r.stopPropagation()}else Hr(e,n,r,null,t)}}var Xn=null;function Yn(e,n,t,r){if(Xn=null,null!==(e=yo(e=Ne(r))))if(null===(n=Ue(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=Ge(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Xn=e,null}function $n(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Zn=null,Jn=null,et=null;function nt(){if(et)return et;var e,n,t=Jn,r=t.length,o="value"in Zn?Zn.value:Zn.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===o[a-n];n++);return et=o.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function ot(){return!1}function at(e){function n(n,t,r,o,a){for(var i in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rt:ot,this.isPropagationStopped=ot,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var it,lt,st,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=at(ut),dt=D({},ut,{view:0,detail:0}),ft=at(dt),pt=D({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==st&&(st&&"mousemove"===e.type?(it=e.screenX-st.screenX,lt=e.screenY-st.screenY):lt=it=0,st=e),it)},movementY:function(e){return"movementY"in e?e.movementY:lt}}),ht=at(pt),vt=at(D({},pt,{dataTransfer:0})),mt=at(D({},dt,{relatedTarget:0})),xt=at(D({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),gt=D({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yt=at(gt),bt=at(D({},ut,{data:0})),Nt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},It={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function St(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=Ct[e])&&!!n[e]}function Et(){return St}var wt=D({},dt,{key:function(e){if(e.key){var n=Nt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?It[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),At=at(wt),kt=at(D({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pt=at(D({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et})),Tt=at(D({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mt=D({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rt=at(Mt),_t=[9,13,27,32],jt=c&&"CompositionEvent"in window,Ot=null;c&&"documentMode"in document&&(Ot=document.documentMode);var Lt=c&&"TextEvent"in window&&!Ot,Dt=c&&(!jt||Ot&&8<Ot&&11>=Ot),Ft=String.fromCharCode(32),Bt=!1;function Wt(e,n){switch(e){case"keyup":return-1!==_t.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ut=!1;var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Gt[e.type]:"textarea"===n}function Kt(e,n,t,r){we(r),0<(n=Vr(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Vt=null,qt=null;function Qt(e){Fr(e,0)}function Xt(e){if(q(No(e)))return e}function Yt(e,n){if("change"===e)return n}var $t=!1;if(c){var Zt;if(c){var Jt="oninput"in document;if(!Jt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jt="function"===typeof er.oninput}Zt=Jt}else Zt=!1;$t=Zt&&(!document.documentMode||9<document.documentMode)}function nr(){Vt&&(Vt.detachEvent("onpropertychange",tr),qt=Vt=null)}function tr(e){if("value"===e.propertyName&&Xt(qt)){var n=[];Kt(n,qt,e,Ne(e)),Me(Qt,n)}}function rr(e,n,t){"focusin"===e?(nr(),qt=t,(Vt=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xt(qt)}function ar(e,n){if("click"===e)return Xt(n)}function ir(e,n){if("input"===e||"change"===e)return Xt(n)}var lr="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n};function sr(e,n){if(lr(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var o=t[r];if(!d.call(n,o)||!lr(e[o],n[o]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,n){var t,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?dr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function fr(){for(var e=window,n=Q();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=Q((e=n.contentWindow).document)}return n}function pr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function hr(e){var n=fr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&dr(t.ownerDocument.documentElement,t)){if(null!==r&&pr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var o=t.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=cr(t,a);var i=cr(t,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((n=n.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(i.node,i.offset)):(n.setEnd(i.node,i.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,xr=null,gr=null,yr=!1;function br(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;yr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Vr(xr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=mr)))}function Nr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Ir={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionend:Nr("Transition","TransitionEnd")},Cr={},Sr={};function Er(e){if(Cr[e])return Cr[e];if(!Ir[e])return e;var n,t=Ir[e];for(n in t)if(t.hasOwnProperty(n)&&n in Sr)return Cr[e]=t[n];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var wr=Er("animationend"),Ar=Er("animationiteration"),kr=Er("animationstart"),Pr=Er("transitionend"),Tr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,n){Tr.set(e,n),s(n,[e])}for(var _r=0;_r<Mr.length;_r++){var jr=Mr[_r];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(wr,"onAnimationEnd"),Rr(Ar,"onAnimationIteration"),Rr(kr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Pr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Dr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,o,i,l,s,u){if(ze.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=De;Le=!1,De=null,Fe||(Fe=!0,Be=c)}}(r,n,void 0,e),e.currentTarget=null}function Fr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],o=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,u),a=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,u=l.currentTarget,l=l.listener,s!==a&&o.isPropagationStopped())break e;Dr(o,l,u),a=s}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,n){var t=n[mo];void 0===t&&(t=n[mo]=new Set);var r=e+"__bubble";t.has(r)||(Gr(n,e,2,!1),t.add(r))}function Wr(e,n,t){var r=0;n&&(r|=4),Gr(t,e,r,n)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[zr]){e[zr]=!0,i.forEach((function(n){"selectionchange"!==n&&(Lr.has(n)||Wr(n,!1,e),Wr(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[zr]||(n[zr]=!0,Wr("selectionchange",!1,n))}}function Gr(e,n,t,r){switch($n(n)){case 1:var o=Vn;break;case 4:o=qn;break;default:o=Qn}t=o.bind(null,n,t,e),o=void 0,!_e||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(o=!0),r?void 0!==o?e.addEventListener(n,t,{capture:!0,passive:o}):e.addEventListener(n,t,!0):void 0!==o?e.addEventListener(n,t,{passive:o}):e.addEventListener(n,t,!1)}function Hr(e,n,t,r,o){var a=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o||8===l.nodeType&&l.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var s=i.tag;if((3===s||4===s)&&((s=i.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;i=i.return}for(;null!==l;){if(null===(i=yo(l)))return;if(5===(s=i.tag)||6===s){r=a=i;continue e}l=l.parentNode}}r=r.return}Me((function(){var r=a,o=Ne(t),i=[];e:{var l=Tr.get(e);if(void 0!==l){var s=ct,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":s=At;break;case"focusin":u="focus",s=mt;break;case"focusout":u="blur",s=mt;break;case"beforeblur":case"afterblur":s=mt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pt;break;case wr:case Ar:case kr:s=xt;break;case Pr:s=Tt;break;case"scroll":s=ft;break;case"wheel":s=Rt;break;case"copy":case"cut":case"paste":s=yt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=kt}var c=0!==(4&n),d=!c&&"scroll"===e,f=c?null!==l?l+"Capture":null:l;c=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=Re(h,f))&&c.push(Kr(h,v,p)))),d)break;h=h.return}0<c.length&&(l=new s(l,u,null,t,o),i.push({event:l,listeners:c}))}}if(0===(7&n)){if(s="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||t===be||!(u=t.relatedTarget||t.fromElement)||!yo(u)&&!u[vo])&&(s||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,s?(s=r,null!==(u=(u=t.relatedTarget||t.toElement)?yo(u):null)&&(u!==(d=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(s=null,u=r),s!==u)){if(c=ht,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=kt,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==s?l:No(s),p=null==u?l:No(u),(l=new c(v,h+"leave",s,t,o)).target=d,l.relatedTarget=p,v=null,yo(o)===r&&((c=new c(f,h+"enter",u,t,o)).target=p,c.relatedTarget=d,v=c),d=v,s&&u)e:{for(f=u,h=0,p=c=s;p;p=qr(p))h++;for(p=0,v=f;v;v=qr(v))p++;for(;0<h-p;)c=qr(c),h--;for(;0<p-h;)f=qr(f),p--;for(;h--;){if(c===f||null!==f&&c===f.alternate)break e;c=qr(c),f=qr(f)}c=null}else c=null;null!==s&&Qr(i,l,s,c,!1),null!==u&&null!==d&&Qr(i,d,u,c,!0)}if("select"===(s=(l=r?No(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===s&&"file"===l.type)var m=Yt;else if(Ht(l))if($t)m=ir;else{m=or;var x=rr}else(s=l.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(m=ar);switch(m&&(m=m(e,r))?Kt(i,m,t,o):(x&&x(e,l,r),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&ee(l,"number",l.value)),x=r?No(r):window,e){case"focusin":(Ht(x)||"true"===x.contentEditable)&&(mr=x,xr=r,gr=null);break;case"focusout":gr=xr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,t,o);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(i,t,o)}var g;if(jt)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ut?Wt(e,t)&&(y="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(y="onCompositionStart");y&&(Dt&&"ko"!==t.locale&&(Ut||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ut&&(g=nt()):(Jn="value"in(Zn=o)?Zn.value:Zn.textContent,Ut=!0)),0<(x=Vr(r,y)).length&&(y=new bt(y,e,null,t,o),i.push({event:y,listeners:x}),g?y.data=g:null!==(g=zt(t))&&(y.data=g))),(g=Lt?function(e,n){switch(e){case"compositionend":return zt(n);case"keypress":return 32!==n.which?null:(Bt=!0,Ft);case"textInput":return(e=n.data)===Ft&&Bt?null:e;default:return null}}(e,t):function(e,n){if(Ut)return"compositionend"===e||!jt&&Wt(e,n)?(e=nt(),et=Jn=Zn=null,Ut=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=Vr(r,"onBeforeInput")).length&&(o=new bt("onBeforeInput","beforeinput",null,t,o),i.push({event:o,listeners:r}),o.data=g))}Fr(i,n)}))}function Kr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Vr(e,n){for(var t=n+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,t))&&r.unshift(Kr(e,a,o)),null!=(a=Re(e,n))&&r.push(Kr(e,a,o))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,n,t,r,o){for(var a=n._reactName,i=[];null!==t&&t!==r;){var l=t,s=l.alternate,u=l.stateNode;if(null!==s&&s===r)break;5===l.tag&&null!==u&&(l=u,o?null!=(s=Re(t,a))&&i.unshift(Kr(t,s,l)):o||null!=(s=Re(t,a))&&i.push(Kr(t,s,l))),t=t.return}0!==i.length&&e.push({event:n,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,n,t){if(n=$r(n),$r(e)!==n&&t)throw Error(a(425))}function Jr(){}var eo=null,no=null;function to(e,n){return"textarea"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(lo)}:ro;function lo(e){setTimeout((function(){throw e}))}function so(e,n){var t=n,r=0;do{var o=t.nextSibling;if(e.removeChild(t),o&&8===o.nodeType)if("/$"===(t=o.data)){if(0===r)return e.removeChild(o),void Gn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=o}while(t);Gn(n)}function uo(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function co(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,vo="__reactContainer$"+fo,mo="__reactEvents$"+fo,xo="__reactListeners$"+fo,go="__reactHandles$"+fo;function yo(e){var n=e[po];if(n)return n;for(var t=e.parentNode;t;){if(n=t[vo]||t[po]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=co(e);null!==e;){if(t=e[po])return t;e=co(e)}return n}t=(e=t).parentNode}return null}function bo(e){return!(e=e[po]||e[vo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function No(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Io(e){return e[ho]||null}var Co=[],So=-1;function Eo(e){return{current:e}}function wo(e){0>So||(e.current=Co[So],Co[So]=null,So--)}function Ao(e,n){So++,Co[So]=e.current,e.current=n}var ko={},Po=Eo(ko),To=Eo(!1),Mo=ko;function Ro(e,n){var t=e.type.contextTypes;if(!t)return ko;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in t)a[o]=n[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function _o(e){return null!==(e=e.childContextTypes)&&void 0!==e}function jo(){wo(To),wo(Po)}function Oo(e,n,t){if(Po.current!==ko)throw Error(a(168));Ao(Po,n),Ao(To,t)}function Lo(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var o in r=r.getChildContext())if(!(o in n))throw Error(a(108,G(e)||"Unknown",o));return D({},t,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ko,Mo=Po.current,Ao(Po,e),Ao(To,To.current),!0}function Fo(e,n,t){var r=e.stateNode;if(!r)throw Error(a(169));t?(e=Lo(e,n,Mo),r.__reactInternalMemoizedMergedChildContext=e,wo(To),wo(Po),Ao(Po,e)):wo(To),Ao(To,t)}var Bo=null,Wo=!1,zo=!1;function Uo(e){null===Bo?Bo=[e]:Bo.push(e)}function Go(){if(!zo&&null!==Bo){zo=!0;var e=0,n=bn;try{var t=Bo;for(bn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}Bo=null,Wo=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(e+1)),qe(Je,Go),o}finally{bn=n,zo=!1}}return null}var Ho=[],Ko=0,Vo=null,qo=0,Qo=[],Xo=0,Yo=null,$o=1,Zo="";function Jo(e,n){Ho[Ko++]=qo,Ho[Ko++]=Vo,Vo=e,qo=n}function ea(e,n,t){Qo[Xo++]=$o,Qo[Xo++]=Zo,Qo[Xo++]=Yo,Yo=e;var r=$o;e=Zo;var o=32-ln(r)-1;r&=~(1<<o),t+=1;var a=32-ln(n)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,$o=1<<32-ln(n)+o|t<<o|r,Zo=a+e}else $o=1<<a|t<<o|r,Zo=e}function na(e){null!==e.return&&(Jo(e,1),ea(e,1,0))}function ta(e){for(;e===Vo;)Vo=Ho[--Ko],Ho[Ko]=null,qo=Ho[--Ko],Ho[Ko]=null;for(;e===Yo;)Yo=Qo[--Xo],Qo[Xo]=null,Zo=Qo[--Xo],Qo[Xo]=null,$o=Qo[--Xo],Qo[Xo]=null}var ra=null,oa=null,aa=!1,ia=null;function la(e,n){var t=Ru(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function sa(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,ra=e,oa=uo(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,ra=e,oa=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Yo?{id:$o,overflow:Zo}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Ru(18,null,null,0)).stateNode=n,t.return=e,e.child=t,ra=e,oa=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(aa){var n=oa;if(n){var t=n;if(!sa(e,n)){if(ua(e))throw Error(a(418));n=uo(t.nextSibling);var r=ra;n&&sa(e,n)?la(r,t):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function fa(e){if(e!==ra)return!1;if(!aa)return da(e),aa=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!to(e.type,e.memoizedProps)),n&&(n=oa)){if(ua(e))throw pa(),Error(a(418));for(;n;)la(e,n),n=uo(n.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){oa=uo(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}oa=null}}else oa=ra?uo(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=uo(e.nextSibling)}function ha(){oa=ra=null,aa=!1}function va(e){null===ia?ia=[e]:ia.push(e)}var ma=b.ReactCurrentBatchConfig;function xa(e,n){if(e&&e.defaultProps){for(var t in n=D({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var ga=Eo(null),ya=null,ba=null,Na=null;function Ia(){Na=ba=ya=null}function Ca(e){var n=ga.current;wo(ga),e._currentValue=n}function Sa(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Ea(e,n){ya=e,Na=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(bl=!0),e.firstContext=null)}function wa(e){var n=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:n,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return n}var Aa=null;function ka(e){null===Aa?Aa=[e]:Aa.push(e)}function Pa(e,n,t,r){var o=n.interleaved;return null===o?(t.next=t,ka(n)):(t.next=o.next,o.next=t),n.interleaved=t,Ta(e,r)}function Ta(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Ma=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _a(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Oa(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ps)){var o=r.pending;return null===o?n.next=n:(n.next=o.next,o.next=n),r.pending=n,Ta(e,t)}return null===(o=r.interleaved)?(n.next=n,ka(r)):(n.next=o.next,o.next=n),r.interleaved=n,Ta(e,t)}function La(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!==(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,yn(e,t)}}function Da(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var o=null,a=null;if(null!==(t=t.firstBaseUpdate)){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===a?o=a=i:a=a.next=i,t=t.next}while(null!==t);null===a?o=a=n:a=a.next=n}else o=a=n;return t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Fa(e,n,t,r){var o=e.updateQueue;Ma=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?a=u:i.next=u,i=s;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(null!==a){var d=o.baseState;for(i=0,c=u=s=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,v=l;switch(f=n,p=t,v.tag){case 1:if("function"===typeof(h=v.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=v.payload)?h.call(p,d,f):h)||void 0===f)break e;d=D({},d,f);break e;case 2:Ma=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(u=c=p,s=d):c=c.next=p,i|=f;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(f=l).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===c&&(s=d),o.baseState=s,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(n=o.shared.interleaved)){o=n;do{i|=o.lane,o=o.next}while(o!==n)}else null===a&&(o.shared.lanes=0);Ds|=i,e.lanes=i,e.memoizedState=d}}function Ba(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],o=r.callback;if(null!==o){if(r.callback=null,r=t,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Wa=(new r.Component).refs;function za(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:D({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=nu(),o=tu(e),a=ja(r,o);a.payload=n,void 0!==t&&null!==t&&(a.callback=t),null!==(n=Oa(e,a,o))&&(ru(n,e,o,r),La(n,e,o))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=nu(),o=tu(e),a=ja(r,o);a.tag=1,a.payload=n,void 0!==t&&null!==t&&(a.callback=t),null!==(n=Oa(e,a,o))&&(ru(n,e,o,r),La(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=nu(),r=tu(e),o=ja(t,r);o.tag=2,void 0!==n&&null!==n&&(o.callback=n),null!==(n=Oa(e,o,r))&&(ru(n,e,r,t),La(n,e,r))}};function Ga(e,n,t,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!n.prototype||!n.prototype.isPureReactComponent||(!sr(t,r)||!sr(o,a))}function Ha(e,n,t){var r=!1,o=ko,a=n.contextType;return"object"===typeof a&&null!==a?a=wa(a):(o=_o(n)?Mo:Po.current,a=(r=null!==(r=n.contextTypes)&&void 0!==r)?Ro(e,o):ko),n=new n(t,a),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=Ua,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),n}function Ka(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Ua.enqueueReplaceState(n,n.state,null)}function Va(e,n,t,r){var o=e.stateNode;o.props=t,o.state=e.memoizedState,o.refs=Wa,Ra(e);var a=n.contextType;"object"===typeof a&&null!==a?o.context=wa(a):(a=_o(n)?Mo:Po.current,o.context=Ro(e,a)),o.state=e.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(za(e,n,a,t),o.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(n=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),n!==o.state&&Ua.enqueueReplaceState(o,o.state,null),Fa(e,t,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function qa(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(a(309));var r=t.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===i?n.ref:(n=function(e){var n=o.refs;n===Wa&&(n=o.refs={}),null===e?delete n[i]:n[i]=e},n._stringRef=i,n)}if("string"!==typeof e)throw Error(a(284));if(!t._owner)throw Error(a(290,e))}return e}function Qa(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function o(e,n){return(e=ju(e,n)).index=0,e.sibling=null,e}function i(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function l(n){return e&&null===n.alternate&&(n.flags|=2),n}function s(e,n,t,r){return null===n||6!==n.tag?((n=Fu(t,e.mode,r)).return=e,n):((n=o(n,t)).return=e,n)}function u(e,n,t,r){var a=t.type;return a===C?d(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Xa(a)===n.type)?((r=o(n,t.props)).ref=qa(e,n,t),r.return=e,r):((r=Ou(t.type,t.key,t.props,null,e.mode,r)).ref=qa(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Bu(t,e.mode,r)).return=e,n):((n=o(n,t.children||[])).return=e,n)}function d(e,n,t,r,a){return null===n||7!==n.tag?((n=Lu(t,e.mode,r,a)).return=e,n):((n=o(n,t)).return=e,n)}function f(e,n,t){if("string"===typeof n&&""!==n||"number"===typeof n)return(n=Fu(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return(t=Ou(n.type,n.key,n.props,null,e.mode,t)).ref=qa(e,null,n),t.return=e,t;case I:return(n=Bu(n,e.mode,t)).return=e,n;case R:return f(e,(0,n._init)(n._payload),t)}if(ne(n)||O(n))return(n=Lu(n,e.mode,t,null)).return=e,n;Qa(e,n)}return null}function p(e,n,t,r){var o=null!==n?n.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==o?null:s(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return t.key===o?u(e,n,t,r):null;case I:return t.key===o?c(e,n,t,r):null;case R:return p(e,n,(o=t._init)(t._payload),r)}if(ne(t)||O(t))return null!==o?null:d(e,n,t,r,null);Qa(e,t)}return null}function h(e,n,t,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(n,e=e.get(t)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return u(n,e=e.get(null===r.key?t:r.key)||null,r,o);case I:return c(n,e=e.get(null===r.key?t:r.key)||null,r,o);case R:return h(e,n,t,(0,r._init)(r._payload),o)}if(ne(r)||O(r))return d(n,e=e.get(t)||null,r,o,null);Qa(n,r)}return null}function v(o,a,l,s){for(var u=null,c=null,d=a,v=a=0,m=null;null!==d&&v<l.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var x=p(o,d,l[v],s);if(null===x){null===d&&(d=m);break}e&&d&&null===x.alternate&&n(o,d),a=i(x,a,v),null===c?u=x:c.sibling=x,c=x,d=m}if(v===l.length)return t(o,d),aa&&Jo(o,v),u;if(null===d){for(;v<l.length;v++)null!==(d=f(o,l[v],s))&&(a=i(d,a,v),null===c?u=d:c.sibling=d,c=d);return aa&&Jo(o,v),u}for(d=r(o,d);v<l.length;v++)null!==(m=h(d,o,v,l[v],s))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=i(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return n(o,e)})),aa&&Jo(o,v),u}function m(o,l,s,u){var c=O(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var d=c=null,v=l,m=l=0,x=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(x=v,v=null):x=v.sibling;var y=p(o,v,g.value,u);if(null===y){null===v&&(v=x);break}e&&v&&null===y.alternate&&n(o,v),l=i(y,l,m),null===d?c=y:d.sibling=y,d=y,v=x}if(g.done)return t(o,v),aa&&Jo(o,m),c;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=f(o,g.value,u))&&(l=i(g,l,m),null===d?c=g:d.sibling=g,d=g);return aa&&Jo(o,m),c}for(v=r(o,v);!g.done;m++,g=s.next())null!==(g=h(v,o,m,g.value,u))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),l=i(g,l,m),null===d?c=g:d.sibling=g,d=g);return e&&v.forEach((function(e){return n(o,e)})),aa&&Jo(o,m),c}return function e(r,a,i,s){if("object"===typeof i&&null!==i&&i.type===C&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case N:e:{for(var u=i.key,c=a;null!==c;){if(c.key===u){if((u=i.type)===C){if(7===c.tag){t(r,c.sibling),(a=o(c,i.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Xa(u)===c.type){t(r,c.sibling),(a=o(c,i.props)).ref=qa(r,c,i),a.return=r,r=a;break e}t(r,c);break}n(r,c),c=c.sibling}i.type===C?((a=Lu(i.props.children,r.mode,s,i.key)).return=r,r=a):((s=Ou(i.type,i.key,i.props,null,r.mode,s)).ref=qa(r,a,i),s.return=r,r=s)}return l(r);case I:e:{for(c=i.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){t(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}t(r,a);break}n(r,a),a=a.sibling}(a=Bu(i,r.mode,s)).return=r,r=a}return l(r);case R:return e(r,a,(c=i._init)(i._payload),s)}if(ne(i))return v(r,a,i,s);if(O(i))return m(r,a,i,s);Qa(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(t(r,a.sibling),(a=o(a,i)).return=r,r=a):(t(r,a),(a=Fu(i,r.mode,s)).return=r,r=a),l(r)):t(r,a)}}var $a=Ya(!0),Za=Ya(!1),Ja={},ei=Eo(Ja),ni=Eo(Ja),ti=Eo(Ja);function ri(e){if(e===Ja)throw Error(a(174));return e}function oi(e,n){switch(Ao(ti,n),Ao(ni,e),Ao(ei,Ja),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:se(null,"");break;default:n=se(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}wo(ei),Ao(ei,n)}function ai(){wo(ei),wo(ni),wo(ti)}function ii(e){ri(ti.current);var n=ri(ei.current),t=se(n,e.type);n!==t&&(Ao(ni,e),Ao(ei,t))}function li(e){ni.current===e&&(wo(ei),wo(ni))}var si=Eo(0);function ui(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ci=[];function di(){for(var e=0;e<ci.length;e++)ci[e]._workInProgressVersionPrimary=null;ci.length=0}var fi=b.ReactCurrentDispatcher,pi=b.ReactCurrentBatchConfig,hi=0,vi=null,mi=null,xi=null,gi=!1,yi=!1,bi=0,Ni=0;function Ii(){throw Error(a(321))}function Ci(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!lr(e[t],n[t]))return!1;return!0}function Si(e,n,t,r,o,i){if(hi=i,vi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,fi.current=null===e||null===e.memoizedState?ll:sl,e=t(r,o),yi){i=0;do{if(yi=!1,bi=0,25<=i)throw Error(a(301));i+=1,xi=mi=null,n.updateQueue=null,fi.current=ul,e=t(r,o)}while(yi)}if(fi.current=il,n=null!==mi&&null!==mi.next,hi=0,xi=mi=vi=null,gi=!1,n)throw Error(a(300));return e}function Ei(){var e=0!==bi;return bi=0,e}function wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?vi.memoizedState=xi=e:xi=xi.next=e,xi}function Ai(){if(null===mi){var e=vi.alternate;e=null!==e?e.memoizedState:null}else e=mi.next;var n=null===xi?vi.memoizedState:xi.next;if(null!==n)xi=n,mi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mi=e).memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},null===xi?vi.memoizedState=xi=e:xi=xi.next=e}return xi}function ki(e,n){return"function"===typeof n?n(e):n}function Pi(e){var n=Ai(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=mi,o=r.baseQueue,i=t.pending;if(null!==i){if(null!==o){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,t.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=l=null,u=null,c=i;do{var d=c.lane;if((hi&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(s=u=f,l=r):u=u.next=f,vi.lanes|=d,Ds|=d}c=c.next}while(null!==c&&c!==i);null===u?l=r:u.next=s,lr(r,n.memoizedState)||(bl=!0),n.memoizedState=r,n.baseState=l,n.baseQueue=u,t.lastRenderedState=r}if(null!==(e=t.interleaved)){o=e;do{i=o.lane,vi.lanes|=i,Ds|=i,o=o.next}while(o!==e)}else null===o&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Ti(e){var n=Ai(),t=n.queue;if(null===t)throw Error(a(311));t.lastRenderedReducer=e;var r=t.dispatch,o=t.pending,i=n.memoizedState;if(null!==o){t.pending=null;var l=o=o.next;do{i=e(i,l.action),l=l.next}while(l!==o);lr(i,n.memoizedState)||(bl=!0),n.memoizedState=i,null===n.baseQueue&&(n.baseState=i),t.lastRenderedState=i}return[i,r]}function Mi(){}function Ri(e,n){var t=vi,r=Ai(),o=n(),i=!lr(r.memoizedState,o);if(i&&(r.memoizedState=o,bl=!0),r=r.queue,Hi(Oi.bind(null,t,r,e),[e]),r.getSnapshot!==n||i||null!==xi&&1&xi.memoizedState.tag){if(t.flags|=2048,Bi(9,ji.bind(null,t,r,o,n),void 0,null),null===Ts)throw Error(a(349));0!==(30&hi)||_i(t,n,o)}return o}function _i(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=vi.updateQueue)?(n={lastEffect:null,stores:null},vi.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function ji(e,n,t,r){n.value=t,n.getSnapshot=r,Li(n)&&Di(e)}function Oi(e,n,t){return t((function(){Li(n)&&Di(e)}))}function Li(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!lr(e,t)}catch(r){return!0}}function Di(e){var n=Ta(e,1);null!==n&&ru(n,e,1,-1)}function Fi(e){var n=wi();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},n.queue=e,e=e.dispatch=tl.bind(null,vi,e),[n.memoizedState,e]}function Bi(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=vi.updateQueue)?(n={lastEffect:null,stores:null},vi.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Wi(){return Ai().memoizedState}function zi(e,n,t,r){var o=wi();vi.flags|=e,o.memoizedState=Bi(1|n,t,void 0,void 0===r?null:r)}function Ui(e,n,t,r){var o=Ai();r=void 0===r?null:r;var a=void 0;if(null!==mi){var i=mi.memoizedState;if(a=i.destroy,null!==r&&Ci(r,i.deps))return void(o.memoizedState=Bi(n,t,a,r))}vi.flags|=e,o.memoizedState=Bi(1|n,t,a,r)}function Gi(e,n){return zi(8390656,8,e,n)}function Hi(e,n){return Ui(2048,8,e,n)}function Ki(e,n){return Ui(4,2,e,n)}function Vi(e,n){return Ui(4,4,e,n)}function qi(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Qi(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Ui(4,4,qi.bind(null,n,e),t)}function Xi(){}function Yi(e,n){var t=Ai();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Ci(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function $i(e,n){var t=Ai();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Ci(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Zi(e,n,t){return 0===(21&hi)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=t):(lr(t,n)||(t=mn(),vi.lanes|=t,Ds|=t,e.baseState=!0),n)}function Ji(e,n){var t=bn;bn=0!==t&&4>t?t:4,e(!0);var r=pi.transition;pi.transition={};try{e(!1),n()}finally{bn=t,pi.transition=r}}function el(){return Ai().memoizedState}function nl(e,n,t){var r=tu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rl(e))ol(n,t);else if(null!==(t=Pa(e,n,t,r))){ru(t,e,r,nu()),al(t,n,r)}}function tl(e,n,t){var r=tu(e),o={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rl(e))ol(n,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=n.lastRenderedReducer))try{var i=n.lastRenderedState,l=a(i,t);if(o.hasEagerState=!0,o.eagerState=l,lr(l,i)){var s=n.interleaved;return null===s?(o.next=o,ka(n)):(o.next=s.next,s.next=o),void(n.interleaved=o)}}catch(u){}null!==(t=Pa(e,n,o,r))&&(ru(t,e,r,o=nu()),al(t,n,r))}}function rl(e){var n=e.alternate;return e===vi||null!==n&&n===vi}function ol(e,n){yi=gi=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function al(e,n,t){if(0!==(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,yn(e,t)}}var il={readContext:wa,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},ll={readContext:wa,useCallback:function(e,n){return wi().memoizedState=[e,void 0===n?null:n],e},useContext:wa,useEffect:Gi,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,zi(4194308,4,qi.bind(null,n,e),t)},useLayoutEffect:function(e,n){return zi(4194308,4,e,n)},useInsertionEffect:function(e,n){return zi(4,2,e,n)},useMemo:function(e,n){var t=wi();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=wi();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=nl.bind(null,vi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wi().memoizedState=e},useState:Fi,useDebugValue:Xi,useDeferredValue:function(e){return wi().memoizedState=e},useTransition:function(){var e=Fi(!1),n=e[0];return e=Ji.bind(null,e[1]),wi().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=vi,o=wi();if(aa){if(void 0===t)throw Error(a(407));t=t()}else{if(t=n(),null===Ts)throw Error(a(349));0!==(30&hi)||_i(r,n,t)}o.memoizedState=t;var i={value:t,getSnapshot:n};return o.queue=i,Gi(Oi.bind(null,r,i,e),[e]),r.flags|=2048,Bi(9,ji.bind(null,r,i,t,n),void 0,null),t},useId:function(){var e=wi(),n=Ts.identifierPrefix;if(aa){var t=Zo;n=":"+n+"R"+(t=($o&~(1<<32-ln($o)-1)).toString(32)+t),0<(t=bi++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=Ni++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},sl={readContext:wa,useCallback:Yi,useContext:wa,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:Ki,useLayoutEffect:Vi,useMemo:$i,useReducer:Pi,useRef:Wi,useState:function(){return Pi(ki)},useDebugValue:Xi,useDeferredValue:function(e){return Zi(Ai(),mi.memoizedState,e)},useTransition:function(){return[Pi(ki)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:Ri,useId:el,unstable_isNewReconciler:!1},ul={readContext:wa,useCallback:Yi,useContext:wa,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:Ki,useLayoutEffect:Vi,useMemo:$i,useReducer:Ti,useRef:Wi,useState:function(){return Ti(ki)},useDebugValue:Xi,useDeferredValue:function(e){var n=Ai();return null===mi?n.memoizedState=e:Zi(n,mi.memoizedState,e)},useTransition:function(){return[Ti(ki)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:Ri,useId:el,unstable_isNewReconciler:!1};function cl(e,n){try{var t="",r=n;do{t+=z(r),r=r.return}while(r);var o=t}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:n,stack:o,digest:null}}function dl(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function fl(e,n){try{console.error(n.value)}catch(t){setTimeout((function(){throw t}))}}var pl="function"===typeof WeakMap?WeakMap:Map;function hl(e,n,t){(t=ja(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Ks||(Ks=!0,Vs=r),fl(0,n)},t}function vl(e,n,t){(t=ja(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=n.value;t.payload=function(){return r(o)},t.callback=function(){fl(0,n)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(t.callback=function(){fl(0,n),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function ml(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new pl;var o=new Set;r.set(n,o)}else void 0===(o=r.get(n))&&(o=new Set,r.set(n,o));o.has(t)||(o.add(t),e=wu.bind(null,e,n,t),n.then(e,e))}function xl(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function gl(e,n,t,r,o){return 0===(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=ja(-1,1)).tag=2,Oa(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var yl=b.ReactCurrentOwner,bl=!1;function Nl(e,n,t,r){n.child=null===e?Za(n,null,t,r):$a(n,e.child,t,r)}function Il(e,n,t,r,o){t=t.render;var a=n.ref;return Ea(n,o),r=Si(e,n,t,r,a,o),t=Ei(),null===e||bl?(aa&&t&&na(n),n.flags|=1,Nl(e,n,r,o),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o,Kl(e,n,o))}function Cl(e,n,t,r,o){if(null===e){var a=t.type;return"function"!==typeof a||_u(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Ou(t.type,null,r,n,n.mode,o)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,Sl(e,n,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((t=null!==(t=t.compare)?t:sr)(i,r)&&e.ref===n.ref)return Kl(e,n,o)}return n.flags|=1,(e=ju(a,r)).ref=n.ref,e.return=n,n.child=e}function Sl(e,n,t,r,o){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===n.ref){if(bl=!1,n.pendingProps=r=a,0===(e.lanes&o))return n.lanes=e.lanes,Kl(e,n,o);0!==(131072&e.flags)&&(bl=!0)}}return Al(e,n,t,r,o)}function El(e,n,t){var r=n.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(js,_s),_s|=t;else{if(0===(1073741824&t))return e=null!==a?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ao(js,_s),_s|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:t,Ao(js,_s),_s|=r}else null!==a?(r=a.baseLanes|t,n.memoizedState=null):r=t,Ao(js,_s),_s|=r;return Nl(e,n,o,t),n.child}function wl(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Al(e,n,t,r,o){var a=_o(t)?Mo:Po.current;return a=Ro(n,a),Ea(n,o),t=Si(e,n,t,r,a,o),r=Ei(),null===e||bl?(aa&&r&&na(n),n.flags|=1,Nl(e,n,t,o),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o,Kl(e,n,o))}function kl(e,n,t,r,o){if(_o(t)){var a=!0;Do(n)}else a=!1;if(Ea(n,o),null===n.stateNode)Hl(e,n),Ha(n,t,r),Va(n,t,r,o),r=!0;else if(null===e){var i=n.stateNode,l=n.memoizedProps;i.props=l;var s=i.context,u=t.contextType;"object"===typeof u&&null!==u?u=wa(u):u=Ro(n,u=_o(t)?Mo:Po.current);var c=t.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||s!==u)&&Ka(n,i,r,u),Ma=!1;var f=n.memoizedState;i.state=f,Fa(n,r,i,o),s=n.memoizedState,l!==r||f!==s||To.current||Ma?("function"===typeof c&&(za(n,t,c,r),s=n.memoizedState),(l=Ma||Ga(n,t,l,r,f,s,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(n.flags|=4194308)):("function"===typeof i.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=s),i.props=r,i.state=s,i.context=u,r=l):("function"===typeof i.componentDidMount&&(n.flags|=4194308),r=!1)}else{i=n.stateNode,_a(e,n),l=n.memoizedProps,u=n.type===n.elementType?l:xa(n.type,l),i.props=u,d=n.pendingProps,f=i.context,"object"===typeof(s=t.contextType)&&null!==s?s=wa(s):s=Ro(n,s=_o(t)?Mo:Po.current);var p=t.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==d||f!==s)&&Ka(n,i,r,s),Ma=!1,f=n.memoizedState,i.state=f,Fa(n,r,i,o);var h=n.memoizedState;l!==d||f!==h||To.current||Ma?("function"===typeof p&&(za(n,t,p,r),h=n.memoizedState),(u=Ma||Ga(n,t,u,r,f,h,s)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,s)),"function"===typeof i.componentDidUpdate&&(n.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),i.props=r,i.state=h,i.context=s,r=u):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),r=!1)}return Pl(e,n,t,r,a,o)}function Pl(e,n,t,r,o,a){wl(e,n);var i=0!==(128&n.flags);if(!r&&!i)return o&&Fo(n,t,!1),Kl(e,n,a);r=n.stateNode,yl.current=n;var l=i&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&i?(n.child=$a(n,e.child,null,a),n.child=$a(n,null,l,a)):Nl(e,n,l,a),n.memoizedState=r.state,o&&Fo(n,t,!0),n.child}function Tl(e){var n=e.stateNode;n.pendingContext?Oo(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Oo(0,n.context,!1),oi(e,n.containerInfo)}function Ml(e,n,t,r,o){return ha(),va(o),n.flags|=256,Nl(e,n,t,r),n.child}var Rl,_l,jl,Ol,Ll={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fl(e,n,t){var r,o=n.pendingProps,i=si.current,l=!1,s=0!==(128&n.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ao(si,1&i),null===e)return ca(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(s=o.children,e=o.fallback,l?(o=n.mode,l=n.child,s={mode:"hidden",children:s},0===(1&o)&&null!==l?(l.childLanes=0,l.pendingProps=s):l=Du(s,o,0,null),e=Lu(e,o,t,null),l.return=n,e.return=n,l.sibling=e,n.child=l,n.child.memoizedState=Dl(t),n.memoizedState=Ll,e):Bl(n,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,n,t,r,o,i,l){if(t)return 256&n.flags?(n.flags&=-257,Wl(e,n,l,r=dl(Error(a(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(i=r.fallback,o=n.mode,r=Du({mode:"visible",children:r.children},o,0,null),(i=Lu(i,o,l,null)).flags|=2,r.return=n,i.return=n,r.sibling=i,n.child=r,0!==(1&n.mode)&&$a(n,e.child,null,l),n.child.memoizedState=Dl(l),n.memoizedState=Ll,i);if(0===(1&n.mode))return Wl(e,n,l,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,Wl(e,n,l,r=dl(i=Error(a(419)),r,void 0))}if(s=0!==(l&e.childLanes),bl||s){if(null!==(r=Ts)){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|l))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Ta(e,o),ru(r,e,o,-1))}return mu(),Wl(e,n,l,r=dl(Error(a(421))))}return"$?"===o.data?(n.flags|=128,n.child=e.child,n=ku.bind(null,e),o._reactRetry=n,null):(e=i.treeContext,oa=uo(o.nextSibling),ra=n,aa=!0,ia=null,null!==e&&(Qo[Xo++]=$o,Qo[Xo++]=Zo,Qo[Xo++]=Yo,$o=e.id,Zo=e.overflow,Yo=n),n=Bl(n,r.children),n.flags|=4096,n)}(e,n,s,o,r,i,t);if(l){l=o.fallback,s=n.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:o.children};return 0===(1&s)&&n.child!==i?((o=n.child).childLanes=0,o.pendingProps=u,n.deletions=null):(o=ju(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=ju(r,l):(l=Lu(l,s,t,null)).flags|=2,l.return=n,o.return=n,o.sibling=l,n.child=o,o=l,l=n.child,s=null===(s=e.child.memoizedState)?Dl(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},l.memoizedState=s,l.childLanes=e.childLanes&~t,n.memoizedState=Ll,o}return e=(l=e.child).sibling,o=ju(l,{mode:"visible",children:o.children}),0===(1&n.mode)&&(o.lanes=t),o.return=n,o.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=o,n.memoizedState=null,o}function Bl(e,n){return(n=Du({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function Wl(e,n,t,r){return null!==r&&va(r),$a(n,e.child,null,t),(e=Bl(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function zl(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Sa(e.return,n,t)}function Ul(e,n,t,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=o)}function Gl(e,n,t){var r=n.pendingProps,o=r.revealOrder,a=r.tail;if(Nl(e,n,r.children,t),0!==(2&(r=si.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,t,n);else if(19===e.tag)zl(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(si,r),0===(1&n.mode))n.memoizedState=null;else switch(o){case"forwards":for(t=n.child,o=null;null!==t;)null!==(e=t.alternate)&&null===ui(e)&&(o=t),t=t.sibling;null===(t=o)?(o=n.child,n.child=null):(o=t.sibling,t.sibling=null),Ul(n,!1,o,t,a);break;case"backwards":for(t=null,o=n.child,n.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ui(e)){n.child=o;break}e=o.sibling,o.sibling=t,t=o,o=e}Ul(n,!0,t,null,a);break;case"together":Ul(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hl(e,n){0===(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Kl(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Ds|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(a(153));if(null!==n.child){for(t=ju(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=ju(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function Vl(e,n){if(!aa)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ql(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var o=e.child;null!==o;)t|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function Ql(e,n,t){var r=n.pendingProps;switch(ta(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ql(n),null;case 1:case 17:return _o(n.type)&&jo(),ql(n),null;case 3:return r=n.stateNode,ai(),wo(To),wo(Po),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&n.flags)||(n.flags|=1024,null!==ia&&(lu(ia),ia=null))),_l(e,n),ql(n),null;case 5:li(n);var o=ri(ti.current);if(t=n.type,null!==e&&null!=n.stateNode)jl(e,n,t,r,o),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(a(166));return ql(n),null}if(e=ri(ei.current),fa(n)){r=n.stateNode,t=n.type;var i=n.memoizedProps;switch(r[po]=n,r[ho]=i,e=0!==(1&n.mode),t){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Or.length;o++)Br(Or[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":oe(r,i),Br("invalid",r)}for(var s in ge(t,i),o=null,i)if(i.hasOwnProperty(s)){var u=i[s];"children"===s?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,u,e),o=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,u,e),o=["children",""+u]):l.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Br("scroll",r)}switch(t){case"input":V(r),J(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=o,n.updateQueue=r,null!==r&&(n.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(t,{is:r.is}):(e=s.createElement(t),"select"===t&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,t),e[po]=n,e[ho]=r,Rl(e,n,!1,!1),n.stateNode=e;e:{switch(s=ye(t,r),t){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<Or.length;o++)Br(Or[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":Y(e,r),o=X(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(i in ge(t,o),u=o)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?me(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===i?"string"===typeof c?("textarea"!==t||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Br("scroll",e):null!=c&&y(e,i,c,s))}switch(t){case"input":V(e),J(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?te(e,!!r.multiple,i,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return ql(n),null;case 6:if(e&&null!=n.stateNode)Ol(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(a(166));if(t=ri(ti.current),ri(ei.current),fa(n)){if(r=n.stateNode,t=n.memoizedProps,r[po]=n,(i=r.nodeValue!==t)&&null!==(e=ra))switch(e.tag){case 3:Zr(r.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,t,0!==(1&e.mode))}i&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[po]=n,n.stateNode=r}return ql(n),null;case 13:if(wo(si),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&n.mode)&&0===(128&n.flags))pa(),ha(),n.flags|=98560,i=!1;else if(i=fa(n),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=n.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=n}else ha(),0===(128&n.flags)&&(n.memoizedState=null),n.flags|=4;ql(n),i=!1}else null!==ia&&(lu(ia),ia=null),i=!0;if(!i)return 65536&n.flags?n:null}return 0!==(128&n.flags)?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!==(1&n.mode)&&(null===e||0!==(1&si.current)?0===Os&&(Os=3):mu())),null!==n.updateQueue&&(n.flags|=4),ql(n),null);case 4:return ai(),_l(e,n),null===e&&Ur(n.stateNode.containerInfo),ql(n),null;case 10:return Ca(n.type._context),ql(n),null;case 19:if(wo(si),null===(i=n.memoizedState))return ql(n),null;if(r=0!==(128&n.flags),null===(s=i.rendering))if(r)Vl(i,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=n.child;null!==e;){if(null!==(s=ui(e))){for(n.flags|=128,Vl(i,!1),null!==(r=s.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(i=t).flags&=14680066,null===(s=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Ao(si,1&si.current|2),n.child}e=e.sibling}null!==i.tail&&$e()>Gs&&(n.flags|=128,r=!0,Vl(i,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=ui(s))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Vl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!aa)return ql(n),null}else 2*$e()-i.renderingStartTime>Gs&&1073741824!==t&&(n.flags|=128,r=!0,Vl(i,!1),n.lanes=4194304);i.isBackwards?(s.sibling=n.child,n.child=s):(null!==(t=i.last)?t.sibling=s:n.child=s,i.last=s)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=$e(),n.sibling=null,t=si.current,Ao(si,r?1&t|2:1&t),n):(ql(n),null);case 22:case 23:return fu(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!==(1&n.mode)?0!==(1073741824&_s)&&(ql(n),6&n.subtreeFlags&&(n.flags|=8192)):ql(n),null;case 24:case 25:return null}throw Error(a(156,n.tag))}function Xl(e,n){switch(ta(n),n.tag){case 1:return _o(n.type)&&jo(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return ai(),wo(To),wo(Po),di(),0!==(65536&(e=n.flags))&&0===(128&e)?(n.flags=-65537&e|128,n):null;case 5:return li(n),null;case 13:if(wo(si),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(a(340));ha()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return wo(si),null;case 4:return ai(),null;case 10:return Ca(n.type._context),null;case 22:case 23:return fu(),null;default:return null}}Rl=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},_l=function(){},jl=function(e,n,t,r){var o=e.memoizedProps;if(o!==r){e=n.stateNode,ri(ei.current);var a,i=null;switch(t){case"input":o=X(e,o),r=X(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ge(t,r),t=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var s=o[c];for(a in s)s.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(s=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(t||(t={}),t[a]=u[a])}else t||(i||(i=[]),i.push(c,t)),t=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",e),i||s===u||(i=[])):(i=i||[]).push(c,u))}t&&(i=i||[]).push("style",t);var c=i;(n.updateQueue=c)&&(n.flags|=4)}},Ol=function(e,n,t,r){t!==r&&(n.flags|=4)};var Yl=!1,$l=!1,Zl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function es(e,n){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Eu(e,n,r)}else t.current=null}function ns(e,n,t){try{t()}catch(r){Eu(e,n,r)}}var ts=!1;function rs(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&ns(n,t,a)}o=o.next}while(o!==r)}}function os(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function as(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"===typeof n?n(e):n.current=e}}function is(e){var n=e.alternate;null!==n&&(e.alternate=null,is(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[po],delete n[ho],delete n[mo],delete n[xo],delete n[go])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ls(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function us(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==n.onclick||(n.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(us(e,n,t),e=e.sibling;null!==e;)us(e,n,t),e=e.sibling}function cs(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,n,t),e=e.sibling;null!==e;)cs(e,n,t),e=e.sibling}var ds=null,fs=!1;function ps(e,n,t){for(t=t.child;null!==t;)hs(e,n,t),t=t.sibling}function hs(e,n,t){if(an&&"function"===typeof an.onCommitFiberUnmount)try{an.onCommitFiberUnmount(on,t)}catch(l){}switch(t.tag){case 5:$l||es(t,n);case 6:var r=ds,o=fs;ds=null,ps(e,n,t),fs=o,null!==(ds=r)&&(fs?(e=ds,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):ds.removeChild(t.stateNode));break;case 18:null!==ds&&(fs?(e=ds,t=t.stateNode,8===e.nodeType?so(e.parentNode,t):1===e.nodeType&&so(e,t),Gn(e)):so(ds,t.stateNode));break;case 4:r=ds,o=fs,ds=t.stateNode.containerInfo,fs=!0,ps(e,n,t),ds=r,fs=o;break;case 0:case 11:case 14:case 15:if(!$l&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&ns(t,n,i),o=o.next}while(o!==r)}ps(e,n,t);break;case 1:if(!$l&&(es(t,n),"function"===typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(l){Eu(t,n,l)}ps(e,n,t);break;case 21:ps(e,n,t);break;case 22:1&t.mode?($l=(r=$l)||null!==t.memoizedState,ps(e,n,t),$l=r):ps(e,n,t);break;default:ps(e,n,t)}}function vs(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Zl),n.forEach((function(n){var r=Pu.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function ms(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var o=t[r];try{var i=e,l=n,s=l;e:for(;null!==s;){switch(s.tag){case 5:ds=s.stateNode,fs=!1;break e;case 3:case 4:ds=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ds)throw Error(a(160));hs(i,l,o),ds=null,fs=!1;var u=o.alternate;null!==u&&(u.return=null),o.return=null}catch(c){Eu(o,n,c)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)xs(n,e),n=n.sibling}function xs(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(n,e),gs(e),4&r){try{rs(3,e,e.return),os(3,e)}catch(m){Eu(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Eu(e,e.return,m)}}break;case 1:ms(n,e),gs(e),512&r&&null!==t&&es(t,t.return);break;case 5:if(ms(n,e),gs(e),512&r&&null!==t&&es(t,t.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(m){Eu(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,l=null!==t?t.memoizedProps:i,s=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===s&&"radio"===i.type&&null!=i.name&&$(o,i),ye(s,l);var c=ye(s,i);for(l=0;l<u.length;l+=2){var d=u[l],f=u[l+1];"style"===d?me(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):y(o,d,f,c)}switch(s){case"input":Z(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?te(o,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?te(o,!!i.multiple,i.defaultValue,!0):te(o,!!i.multiple,i.multiple?[]:"",!1))}o[ho]=i}catch(m){Eu(e,e.return,m)}}break;case 6:if(ms(n,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(m){Eu(e,e.return,m)}}break;case 3:if(ms(n,e),gs(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{Gn(n.containerInfo)}catch(m){Eu(e,e.return,m)}break;case 4:default:ms(n,e),gs(e);break;case 13:ms(n,e),gs(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Us=$e())),4&r&&vs(e);break;case 22:if(d=null!==t&&null!==t.memoizedState,1&e.mode?($l=(c=$l)||d,ms(n,e),$l=c):ms(n,e),gs(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Jl=e,d=e.child;null!==d;){for(f=Jl=d;null!==Jl;){switch(h=(p=Jl).child,p.tag){case 0:case 11:case 14:case 15:rs(4,p,p.return);break;case 1:es(p,p.return);var v=p.stateNode;if("function"===typeof v.componentWillUnmount){r=p,t=p.return;try{n=r,v.props=n.memoizedProps,v.state=n.memoizedState,v.componentWillUnmount()}catch(m){Eu(r,t,m)}}break;case 5:es(p,p.return);break;case 22:if(null!==p.memoizedState){Is(f);continue}}null!==h?(h.return=p,Jl=h):Is(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,c?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(s=f.stateNode,l=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,s.style.display=ve("display",l))}catch(m){Eu(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Eu(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ms(n,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(ls(t)){var r=t;break e}t=t.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(fe(o,""),r.flags&=-33),cs(e,ss(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;us(e,ss(e),i);break;default:throw Error(a(161))}}catch(l){Eu(e,e.return,l)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function ys(e,n,t){Jl=e,bs(e,n,t)}function bs(e,n,t){for(var r=0!==(1&e.mode);null!==Jl;){var o=Jl,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Yl;if(!i){var l=o.alternate,s=null!==l&&null!==l.memoizedState||$l;l=Yl;var u=$l;if(Yl=i,($l=s)&&!u)for(Jl=o;null!==Jl;)s=(i=Jl).child,22===i.tag&&null!==i.memoizedState?Cs(o):null!==s?(s.return=i,Jl=s):Cs(o);for(;null!==a;)Jl=a,bs(a,n,t),a=a.sibling;Jl=o,Yl=l,$l=u}Ns(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Jl=a):Ns(e)}}function Ns(e){for(;null!==Jl;){var n=Jl;if(0!==(8772&n.flags)){var t=n.alternate;try{if(0!==(8772&n.flags))switch(n.tag){case 0:case 11:case 15:$l||os(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!$l)if(null===t)r.componentDidMount();else{var o=n.elementType===n.type?t.memoizedProps:xa(n.type,t.memoizedProps);r.componentDidUpdate(o,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;null!==i&&Ba(n,i,r);break;case 3:var l=n.updateQueue;if(null!==l){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Ba(n,l,t)}break;case 5:var s=n.stateNode;if(null===t&&4&n.flags){t=s;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Gn(f)}}}break;default:throw Error(a(163))}$l||512&n.flags&&as(n)}catch(p){Eu(n,n.return,p)}}if(n===e){Jl=null;break}if(null!==(t=n.sibling)){t.return=n.return,Jl=t;break}Jl=n.return}}function Is(e){for(;null!==Jl;){var n=Jl;if(n===e){Jl=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Jl=t;break}Jl=n.return}}function Cs(e){for(;null!==Jl;){var n=Jl;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{os(4,n)}catch(s){Eu(n,t,s)}break;case 1:var r=n.stateNode;if("function"===typeof r.componentDidMount){var o=n.return;try{r.componentDidMount()}catch(s){Eu(n,o,s)}}var a=n.return;try{as(n)}catch(s){Eu(n,a,s)}break;case 5:var i=n.return;try{as(n)}catch(s){Eu(n,i,s)}}}catch(s){Eu(n,n.return,s)}if(n===e){Jl=null;break}var l=n.sibling;if(null!==l){l.return=n.return,Jl=l;break}Jl=n.return}}var Ss,Es=Math.ceil,ws=b.ReactCurrentDispatcher,As=b.ReactCurrentOwner,ks=b.ReactCurrentBatchConfig,Ps=0,Ts=null,Ms=null,Rs=0,_s=0,js=Eo(0),Os=0,Ls=null,Ds=0,Fs=0,Bs=0,Ws=null,zs=null,Us=0,Gs=1/0,Hs=null,Ks=!1,Vs=null,qs=null,Qs=!1,Xs=null,Ys=0,$s=0,Zs=null,Js=-1,eu=0;function nu(){return 0!==(6&Ps)?$e():-1!==Js?Js:Js=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ps)&&0!==Rs?Rs&-Rs:null!==ma.transition?(0===eu&&(eu=mn()),eu):0!==(e=bn)?e:e=void 0===(e=window.event)?16:$n(e.type)}function ru(e,n,t,r){if(50<$s)throw $s=0,Zs=null,Error(a(185));gn(e,t,r),0!==(2&Ps)&&e===Ts||(e===Ts&&(0===(2&Ps)&&(Fs|=t),4===Os&&su(e,Rs)),ou(e,r),1===t&&0===Ps&&0===(1&n.mode)&&(Gs=$e()+500,Wo&&Go()))}function ou(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ln(a),l=1<<i,s=o[i];-1===s?0!==(l&t)&&0===(l&r)||(o[i]=hn(l,n)):s<=n&&(e.expiredLanes|=l),a&=~l}}(e,n);var r=pn(e,e===Ts?Rs:0);if(0===r)null!==t&&Qe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&Qe(t),1===n)0===e.tag?function(e){Wo=!0,Uo(e)}(uu.bind(null,e)):Uo(uu.bind(null,e)),io((function(){0===(6&Ps)&&Go()})),t=null;else{switch(Nn(r)){case 1:t=Je;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Tu(t,au.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function au(e,n){if(Js=-1,eu=0,0!==(6&Ps))throw Error(a(327));var t=e.callbackNode;if(Cu()&&e.callbackNode!==t)return null;var r=pn(e,e===Ts?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||n)n=xu(e,r);else{n=r;var o=Ps;Ps|=2;var i=vu();for(Ts===e&&Rs===n||(Hs=null,Gs=$e()+500,pu(e,n));;)try{yu();break}catch(s){hu(e,s)}Ia(),ws.current=i,Ps=o,null!==Ms?n=0:(Ts=null,Rs=0,n=Os)}if(0!==n){if(2===n&&(0!==(o=vn(e))&&(r=o,n=iu(e,o))),1===n)throw t=Ls,pu(e,0),su(e,r),ou(e,$e()),t;if(6===n)su(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var o=t[r],a=o.getSnapshot;o=o.value;try{if(!lr(a(),o))return!1}catch(l){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(o)&&(2===(n=xu(e,r))&&(0!==(i=vn(e))&&(r=i,n=iu(e,i))),1===n))throw t=Ls,pu(e,0),su(e,r),ou(e,$e()),t;switch(e.finishedWork=o,e.finishedLanes=r,n){case 0:case 1:throw Error(a(345));case 2:case 5:Iu(e,zs,Hs);break;case 3:if(su(e,r),(130023424&r)===r&&10<(n=Us+500-$e())){if(0!==pn(e,0))break;if(((o=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Iu.bind(null,e,zs,Hs),n);break}Iu(e,zs,Hs);break;case 4:if(su(e,r),(4194240&r)===r)break;for(n=e.eventTimes,o=-1;0<r;){var l=31-ln(r);i=1<<l,(l=n[l])>o&&(o=l),r&=~i}if(r=o,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ro(Iu.bind(null,e,zs,Hs),r);break}Iu(e,zs,Hs);break;default:throw Error(a(329))}}}return ou(e,$e()),e.callbackNode===t?au.bind(null,e):null}function iu(e,n){var t=Ws;return e.current.memoizedState.isDehydrated&&(pu(e,n).flags|=256),2!==(e=xu(e,n))&&(n=zs,zs=t,null!==n&&lu(n)),e}function lu(e){null===zs?zs=e:zs.push.apply(zs,e)}function su(e,n){for(n&=~Bs,n&=~Fs,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-ln(n),r=1<<t;e[t]=-1,n&=~r}}function uu(e){if(0!==(6&Ps))throw Error(a(327));Cu();var n=pn(e,0);if(0===(1&n))return ou(e,$e()),null;var t=xu(e,n);if(0!==e.tag&&2===t){var r=vn(e);0!==r&&(n=r,t=iu(e,r))}if(1===t)throw t=Ls,pu(e,0),su(e,n),ou(e,$e()),t;if(6===t)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Iu(e,zs,Hs),ou(e,$e()),null}function cu(e,n){var t=Ps;Ps|=1;try{return e(n)}finally{0===(Ps=t)&&(Gs=$e()+500,Wo&&Go())}}function du(e){null!==Xs&&0===Xs.tag&&0===(6&Ps)&&Cu();var n=Ps;Ps|=1;var t=ks.transition,r=bn;try{if(ks.transition=null,bn=1,e)return e()}finally{bn=r,ks.transition=t,0===(6&(Ps=n))&&Go()}}function fu(){_s=js.current,wo(js)}function pu(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,oo(t)),null!==Ms)for(t=Ms.return;null!==t;){var r=t;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&jo();break;case 3:ai(),wo(To),wo(Po),di();break;case 5:li(r);break;case 4:ai();break;case 13:case 19:wo(si);break;case 10:Ca(r.type._context);break;case 22:case 23:fu()}t=t.return}if(Ts=e,Ms=e=ju(e.current,null),Rs=_s=n,Os=0,Ls=null,Bs=Fs=Ds=0,zs=Ws=null,null!==Aa){for(n=0;n<Aa.length;n++)if(null!==(r=(t=Aa[n]).interleaved)){t.interleaved=null;var o=r.next,a=t.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}t.pending=r}Aa=null}return e}function hu(e,n){for(;;){var t=Ms;try{if(Ia(),fi.current=il,gi){for(var r=vi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}gi=!1}if(hi=0,xi=mi=vi=null,yi=!1,bi=0,As.current=null,null===t||null===t.return){Os=1,Ls=n,Ms=null;break}e:{var i=e,l=t.return,s=t,u=n;if(n=Rs,s.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=s,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=xl(l);if(null!==h){h.flags&=-257,gl(h,l,s,0,n),1&h.mode&&ml(i,c,n),u=c;var v=(n=h).updateQueue;if(null===v){var m=new Set;m.add(u),n.updateQueue=m}else v.add(u);break e}if(0===(1&n)){ml(i,c,n),mu();break e}u=Error(a(426))}else if(aa&&1&s.mode){var x=xl(l);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),gl(x,l,s,0,n),va(cl(u,s));break e}}i=u=cl(u,s),4!==Os&&(Os=2),null===Ws?Ws=[i]:Ws.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n,Da(i,hl(0,u,n));break e;case 1:s=u;var g=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===qs||!qs.has(y)))){i.flags|=65536,n&=-n,i.lanes|=n,Da(i,vl(i,s,n));break e}}i=i.return}while(null!==i)}Nu(t)}catch(b){n=b,Ms===t&&null!==t&&(Ms=t=t.return);continue}break}}function vu(){var e=ws.current;return ws.current=il,null===e?il:e}function mu(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ts||0===(268435455&Ds)&&0===(268435455&Fs)||su(Ts,Rs)}function xu(e,n){var t=Ps;Ps|=2;var r=vu();for(Ts===e&&Rs===n||(Hs=null,pu(e,n));;)try{gu();break}catch(o){hu(e,o)}if(Ia(),Ps=t,ws.current=r,null!==Ms)throw Error(a(261));return Ts=null,Rs=0,Os}function gu(){for(;null!==Ms;)bu(Ms)}function yu(){for(;null!==Ms&&!Xe();)bu(Ms)}function bu(e){var n=Ss(e.alternate,e,_s);e.memoizedProps=e.pendingProps,null===n?Nu(e):Ms=n,As.current=null}function Nu(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(32768&n.flags)){if(null!==(t=Ql(t,n,_s)))return void(Ms=t)}else{if(null!==(t=Xl(t,n)))return t.flags&=32767,void(Ms=t);if(null===e)return Os=6,void(Ms=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Ms=n);Ms=n=e}while(null!==n);0===Os&&(Os=5)}function Iu(e,n,t){var r=bn,o=ks.transition;try{ks.transition=null,bn=1,function(e,n,t,r){do{Cu()}while(null!==Xs);if(0!==(6&Ps))throw Error(a(327));t=e.finishedWork;var o=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var o=31-ln(t),a=1<<o;n[o]=0,r[o]=-1,e[o]=-1,t&=~a}}(e,i),e===Ts&&(Ms=Ts=null,Rs=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||Qs||(Qs=!0,Tu(nn,(function(){return Cu(),null}))),i=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||i){i=ks.transition,ks.transition=null;var l=bn;bn=1;var s=Ps;Ps|=4,As.current=null,function(e,n){if(eo=Kn,pr(e=fr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch(N){t=null;break e}var l=0,s=-1,u=-1,c=0,d=0,f=e,p=null;n:for(;;){for(var h;f!==t||0!==o&&3!==f.nodeType||(s=l+o),f!==i||0!==r&&3!==f.nodeType||(u=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break n;if(p===t&&++c===o&&(s=l),p===i&&++d===r&&(u=l),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}t=-1===s||-1===u?null:{start:s,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(no={focusedElem:e,selectionRange:t},Kn=!1,Jl=n;null!==Jl;)if(e=(n=Jl).child,0!==(1028&n.subtreeFlags)&&null!==e)e.return=n,Jl=e;else for(;null!==Jl;){n=Jl;try{var v=n.alternate;if(0!==(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,x=v.memoizedState,g=n.stateNode,y=g.getSnapshotBeforeUpdate(n.elementType===n.type?m:xa(n.type,m),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=n.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(N){Eu(n,n.return,N)}if(null!==(e=n.sibling)){e.return=n.return,Jl=e;break}Jl=n.return}v=ts,ts=!1}(e,t),xs(t,e),hr(no),Kn=!!eo,no=eo=null,e.current=t,ys(t,e,o),Ye(),Ps=s,bn=l,ks.transition=i}else e.current=t;if(Qs&&(Qs=!1,Xs=e,Ys=o),i=e.pendingLanes,0===i&&(qs=null),function(e){if(an&&"function"===typeof an.onCommitFiberRoot)try{an.onCommitFiberRoot(on,e,void 0,128===(128&e.current.flags))}catch(n){}}(t.stateNode),ou(e,$e()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)o=n[t],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ks)throw Ks=!1,e=Vs,Vs=null,e;0!==(1&Ys)&&0!==e.tag&&Cu(),i=e.pendingLanes,0!==(1&i)?e===Zs?$s++:($s=0,Zs=e):$s=0,Go()}(e,n,t,r)}finally{ks.transition=o,bn=r}return null}function Cu(){if(null!==Xs){var e=Nn(Ys),n=ks.transition,t=bn;try{if(ks.transition=null,bn=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,Ys=0,0!==(6&Ps))throw Error(a(331));var o=Ps;for(Ps|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var s=i.deletions;if(null!==s){for(var u=0;u<s.length;u++){var c=s[u];for(Jl=c;null!==Jl;){var d=Jl;switch(d.tag){case 0:case 11:case 15:rs(8,d,i)}var f=d.child;if(null!==f)f.return=d,Jl=f;else for(;null!==Jl;){var p=(d=Jl).sibling,h=d.return;if(is(d),d===c){Jl=null;break}if(null!==p){p.return=h,Jl=p;break}Jl=h}}}var v=i.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(null!==m)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var g=i.sibling;if(null!==g){g.return=i.return,Jl=g;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var b=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==b)b.return=l,Jl=b;else e:for(l=y;null!==Jl;){if(0!==(2048&(s=Jl).flags))try{switch(s.tag){case 0:case 11:case 15:os(9,s)}}catch(I){Eu(s,s.return,I)}if(s===l){Jl=null;break e}var N=s.sibling;if(null!==N){N.return=s.return,Jl=N;break e}Jl=s.return}}if(Ps=o,Go(),an&&"function"===typeof an.onPostCommitFiberRoot)try{an.onPostCommitFiberRoot(on,e)}catch(I){}r=!0}return r}finally{bn=t,ks.transition=n}}return!1}function Su(e,n,t){e=Oa(e,n=hl(0,n=cl(t,n),1),1),n=nu(),null!==e&&(gn(e,1,n),ou(e,n))}function Eu(e,n,t){if(3===e.tag)Su(e,e,t);else for(;null!==n;){if(3===n.tag){Su(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){n=Oa(n,e=vl(n,e=cl(t,e),1),1),e=nu(),null!==n&&(gn(n,1,e),ou(n,e));break}}n=n.return}}function wu(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=nu(),e.pingedLanes|=e.suspendedLanes&t,Ts===e&&(Rs&t)===t&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>$e()-Us?pu(e,0):Bs|=t),ou(e,n)}function Au(e,n){0===n&&(0===(1&e.mode)?n=1:(n=dn,0===(130023424&(dn<<=1))&&(dn=4194304)));var t=nu();null!==(e=Ta(e,n))&&(gn(e,n,t),ou(e,t))}function ku(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Au(e,t)}function Pu(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(t=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(n),Au(e,t)}function Tu(e,n){return qe(e,n)}function Mu(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,n,t,r){return new Mu(e,n,t,r)}function _u(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ju(e,n){var t=e.alternate;return null===t?((t=Ru(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Ou(e,n,t,r,o,i){var l=2;if(r=e,"function"===typeof e)_u(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case C:return Lu(t.children,o,i,n);case S:l=8,o|=8;break;case E:return(e=Ru(12,t,n,2|o)).elementType=E,e.lanes=i,e;case P:return(e=Ru(13,t,n,o)).elementType=P,e.lanes=i,e;case T:return(e=Ru(19,t,n,o)).elementType=T,e.lanes=i,e;case _:return Du(t,o,i,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:l=10;break e;case A:l=9;break e;case k:l=11;break e;case M:l=14;break e;case R:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(n=Ru(l,t,n,o)).elementType=e,n.type=r,n.lanes=i,n}function Lu(e,n,t,r){return(e=Ru(7,e,r,n)).lanes=t,e}function Du(e,n,t,r){return(e=Ru(22,e,r,n)).elementType=_,e.lanes=t,e.stateNode={isHidden:!1},e}function Fu(e,n,t){return(e=Ru(6,e,null,n)).lanes=t,e}function Bu(e,n,t){return(n=Ru(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Wu(e,n,t,r,o){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xn(0),this.expirationTimes=xn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xn(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function zu(e,n,t,r,o,a,i,l,s){return e=new Wu(e,n,t,l,s),1===n?(n=1,!0===a&&(n|=8)):n=0,a=Ru(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Uu(e){if(!e)return ko;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(_o(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(a(171))}if(1===e.tag){var t=e.type;if(_o(t))return Lo(e,t,n)}return n}function Gu(e,n,t,r,o,a,i,l,s){return(e=zu(t,r,!0,e,0,a,0,l,s)).context=Uu(null),t=e.current,(a=ja(r=nu(),o=tu(t))).callback=void 0!==n&&null!==n?n:null,Oa(t,a,o),e.current.lanes=o,gn(e,o,r),ou(e,r),e}function Hu(e,n,t,r){var o=n.current,a=nu(),i=tu(o);return t=Uu(t),null===n.context?n.context=t:n.pendingContext=t,(n=ja(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=Oa(o,n,i))&&(ru(e,o,i,a),La(e,o,i)),i}function Ku(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vu(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function qu(e,n){Vu(e,n),(e=e.alternate)&&Vu(e,n)}Ss=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||To.current)bl=!0;else{if(0===(e.lanes&t)&&0===(128&n.flags))return bl=!1,function(e,n,t){switch(n.tag){case 3:Tl(n),ha();break;case 5:ii(n);break;case 1:_o(n.type)&&Do(n);break;case 4:oi(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,o=n.memoizedProps.value;Ao(ga,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(Ao(si,1&si.current),n.flags|=128,null):0!==(t&n.child.childLanes)?Fl(e,n,t):(Ao(si,1&si.current),null!==(e=Kl(e,n,t))?e.sibling:null);Ao(si,1&si.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(128&e.flags)){if(r)return Gl(e,n,t);n.flags|=128}if(null!==(o=n.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(si,si.current),r)break;return null;case 22:case 23:return n.lanes=0,El(e,n,t)}return Kl(e,n,t)}(e,n,t);bl=0!==(131072&e.flags)}else bl=!1,aa&&0!==(1048576&n.flags)&&ea(n,qo,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Hl(e,n),e=n.pendingProps;var o=Ro(n,Po.current);Ea(n,t),o=Si(null,n,r,e,o,t);var i=Ei();return n.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,_o(r)?(i=!0,Do(n)):i=!1,n.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ra(n),o.updater=Ua,n.stateNode=o,o._reactInternals=n,Va(n,r,e,t),n=Pl(null,n,r,!0,i,t)):(n.tag=0,aa&&i&&na(n),Nl(null,n,o,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Hl(e,n),e=n.pendingProps,r=(o=r._init)(r._payload),n.type=r,o=n.tag=function(e){if("function"===typeof e)return _u(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===M)return 14}return 2}(r),e=xa(r,e),o){case 0:n=Al(null,n,r,e,t);break e;case 1:n=kl(null,n,r,e,t);break e;case 11:n=Il(null,n,r,e,t);break e;case 14:n=Cl(null,n,r,xa(r.type,e),t);break e}throw Error(a(306,r,""))}return n;case 0:return r=n.type,o=n.pendingProps,Al(e,n,r,o=n.elementType===r?o:xa(r,o),t);case 1:return r=n.type,o=n.pendingProps,kl(e,n,r,o=n.elementType===r?o:xa(r,o),t);case 3:e:{if(Tl(n),null===e)throw Error(a(387));r=n.pendingProps,o=(i=n.memoizedState).element,_a(e,n),Fa(n,r,null,t);var l=n.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=i,n.memoizedState=i,256&n.flags){n=Ml(e,n,r,t,o=cl(Error(a(423)),n));break e}if(r!==o){n=Ml(e,n,r,t,o=cl(Error(a(424)),n));break e}for(oa=uo(n.stateNode.containerInfo.firstChild),ra=n,aa=!0,ia=null,t=Za(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(ha(),r===o){n=Kl(e,n,t);break e}Nl(e,n,r,t)}n=n.child}return n;case 5:return ii(n),null===e&&ca(n),r=n.type,o=n.pendingProps,i=null!==e?e.memoizedProps:null,l=o.children,to(r,o)?l=null:null!==i&&to(r,i)&&(n.flags|=32),wl(e,n),Nl(e,n,l,t),n.child;case 6:return null===e&&ca(n),null;case 13:return Fl(e,n,t);case 4:return oi(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=$a(n,null,r,t):Nl(e,n,r,t),n.child;case 11:return r=n.type,o=n.pendingProps,Il(e,n,r,o=n.elementType===r?o:xa(r,o),t);case 7:return Nl(e,n,n.pendingProps,t),n.child;case 8:case 12:return Nl(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,o=n.pendingProps,i=n.memoizedProps,l=o.value,Ao(ga,r._currentValue),r._currentValue=l,null!==i)if(lr(i.value,l)){if(i.children===o.children&&!To.current){n=Kl(e,n,t);break e}}else for(null!==(i=n.child)&&(i.return=n);null!==i;){var s=i.dependencies;if(null!==s){l=i.child;for(var u=s.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=ja(-1,t&-t)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=t,null!==(u=i.alternate)&&(u.lanes|=t),Sa(i.return,t,n),s.lanes|=t;break}u=u.next}}else if(10===i.tag)l=i.type===n.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=t,null!==(s=l.alternate)&&(s.lanes|=t),Sa(l,t,n),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===n){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}Nl(e,n,o.children,t),n=n.child}return n;case 9:return o=n.type,r=n.pendingProps.children,Ea(n,t),r=r(o=wa(o)),n.flags|=1,Nl(e,n,r,t),n.child;case 14:return o=xa(r=n.type,n.pendingProps),Cl(e,n,r,o=xa(r.type,o),t);case 15:return Sl(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,o=n.pendingProps,o=n.elementType===r?o:xa(r,o),Hl(e,n),n.tag=1,_o(r)?(e=!0,Do(n)):e=!1,Ea(n,t),Ha(n,r,o),Va(n,r,o,t),Pl(null,n,r,!0,e,t);case 19:return Gl(e,n,t);case 22:return El(e,n,t)}throw Error(a(156,n.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,n,t,r,o){var a=t._reactRootContainer;if(a){var i=a;if("function"===typeof o){var l=o;o=function(){var e=Ku(i);l.call(e)}}Hu(n,i,e,o)}else i=function(e,n,t,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Ku(i);a.call(e)}}var i=Gu(n,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=i,e[vo]=i.current,Ur(8===e.nodeType?e.parentNode:e),du(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var l=r;r=function(){var e=Ku(s);l.call(e)}}var s=zu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=s,e[vo]=s.current,Ur(8===e.nodeType?e.parentNode:e),du((function(){Hu(n,s,t,r)})),s}(t,n,e,o,r);return Ku(i)}Yu.prototype.render=Xu.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(a(409));Hu(e,n,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;du((function(){Hu(null,e,null,null)})),n[vo]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var n=En();e={blockedOn:null,target:e,priority:n};for(var t=0;t<jn.length&&0!==n&&n<jn[t].priority;t++);jn.splice(t,0,e),0===t&&Fn(e)}},In=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=fn(n.pendingLanes);0!==t&&(yn(n,1|t),ou(n,$e()),0===(6&Ps)&&(Gs=$e()+500,Go()))}break;case 13:du((function(){var n=Ta(e,1);if(null!==n){var t=nu();ru(n,e,1,t)}})),qu(e,1)}},Cn=function(e){if(13===e.tag){var n=Ta(e,134217728);if(null!==n)ru(n,e,134217728,nu());qu(e,134217728)}},Sn=function(e){if(13===e.tag){var n=tu(e),t=Ta(e,n);if(null!==t)ru(t,e,n,nu());qu(e,n)}},En=function(){return bn},wn=function(e,n){var t=bn;try{return bn=e,n()}finally{bn=t}},Ie=function(e,n,t){switch(n){case"input":if(Z(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var o=Io(r);if(!o)throw Error(a(90));q(r),Z(r,o)}}}break;case"textarea":ae(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},ke=cu,Pe=du;var nc={usingClientEntryPoint:!1,Events:[bo,No,Io,we,Ae,cu]},tc={findFiberByHostInstance:yo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{on=oc.inject(rc),an=oc}catch(ce){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(n))throw Error(a(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!$u(e))throw Error(a(299));var t=!1,r="",o=Qu;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),n=zu(e,1,!1,null,0,t,0,r,o),e[vo]=n.current,Ur(8===e.nodeType?e.parentNode:e),new Xu(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(n))?null:e.stateNode},n.flushSync=function(e){return du(e)},n.hydrate=function(e,n,t){if(!Zu(n))throw Error(a(200));return ec(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!$u(e))throw Error(a(405));var r=null!=t&&t.hydratedSources||null,o=!1,i="",l=Qu;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(o=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),n=Gu(n,null,e,1,null!=t?t:null,o,0,i,l),e[vo]=n.current,Ur(e),r)for(e=0;e<r.length;e++)o=(o=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,o]:n.mutableSourceEagerHydrationData.push(t,o);return new Yu(n)},n.render=function(e,n,t){if(!Zu(n))throw Error(a(200));return ec(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(a(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[vo]=null}))})),!0)},n.unstable_batchedUpdates=cu,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Zu(t))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,n,t,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,n,t){"use strict";var r=t(164);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},164:function(e,n,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(463)},374:function(e,n,t){"use strict";var r=t(791),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,a={},u=null,c=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)i.call(n,r)&&!s.hasOwnProperty(r)&&(a[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===a[r]&&(a[r]=n[r]);return{$$typeof:o,type:e,key:u,ref:c,props:a,_owner:l.current}}n.Fragment=a,n.jsx=u,n.jsxs=u},117:function(e,n){"use strict";var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function x(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||h}function g(){}function y(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||h}x.prototype.isReactComponent={},x.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=x.prototype;var b=y.prototype=new g;b.constructor=y,v(b,x.prototype),b.isPureReactComponent=!0;var N=Array.isArray,I=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,n,r){var o,a={},i=null,l=null;if(null!=n)for(o in void 0!==n.ref&&(l=n.ref),void 0!==n.key&&(i=""+n.key),n)I.call(n,o)&&!S.hasOwnProperty(o)&&(a[o]=n[o]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===a[o]&&(a[o]=s[o]);return{$$typeof:t,type:e,key:i,ref:l,props:a,_owner:C.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var A=/\/+/g;function k(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function P(e,n,o,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case t:case r:s=!0}}if(s)return i=i(s=e),e=""===a?"."+k(s,0):a,N(i)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),P(i,n,o,"",(function(e){return e}))):null!=i&&(w(i)&&(i=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),n.push(i)),1;if(s=0,a=""===a?".":a+":",N(e))for(var u=0;u<e.length;u++){var c=a+k(l=e[u],u);s+=P(l,n,o,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(l=e.next()).done;)s+=P(l=l.value,n,o,c=a+k(l,u++),i);else if("object"===l)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return s}function T(e,n,t){if(null==e)return e;var r=[],o=0;return P(e,r,"","",(function(e){return n.call(t,e,o++)})),r}function M(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},_={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:_,ReactCurrentOwner:C};n.Children={map:T,forEach:function(e,n,t){T(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return T(e,(function(){n++})),n},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=x,n.Fragment=o,n.Profiler=i,n.PureComponent=y,n.StrictMode=a,n.Suspense=c,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,n.cloneElement=function(e,n,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=v({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,l=C.current),void 0!==n.key&&(a=""+n.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in n)I.call(n,u)&&!S.hasOwnProperty(u)&&(o[u]=void 0===n[u]&&void 0!==s?s[u]:n[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];o.children=s}return{$$typeof:t,type:e.type,key:a,ref:i,props:o,_owner:l}},n.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},n.createElement=E,n.createFactory=function(e){var n=E.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=w,n.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:M}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=_.transition;_.transition={};try{e()}finally{_.transition=n}},n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},n.useCallback=function(e,n){return R.current.useCallback(e,n)},n.useContext=function(e){return R.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return R.current.useDeferredValue(e)},n.useEffect=function(e,n){return R.current.useEffect(e,n)},n.useId=function(){return R.current.useId()},n.useImperativeHandle=function(e,n,t){return R.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return R.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return R.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return R.current.useMemo(e,n)},n.useReducer=function(e,n,t){return R.current.useReducer(e,n,t)},n.useRef=function(e){return R.current.useRef(e)},n.useState=function(e){return R.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return R.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return R.current.useTransition()},n.version="18.2.0"},791:function(e,n,t){"use strict";e.exports=t(117)},184:function(e,n,t){"use strict";e.exports=t(374)},813:function(e,n){"use strict";function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,o=e[r];if(!(0<a(o,n)))break e;e[r]=n,e[t]=o,t=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>a(s,t))u<o&&0>a(c,s)?(e[r]=c,e[u]=t,r=u):(e[r]=s,e[l]=t,r=l);else{if(!(u<o&&0>a(c,t)))break e;e[r]=c,e[u]=t,r=u}}}return n}function a(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;n.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();n.unstable_now=function(){return l.now()-s}}var u=[],c=[],d=1,f=null,p=3,h=!1,v=!1,m=!1,x="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var n=r(c);null!==n;){if(null===n.callback)o(c);else{if(!(n.startTime<=e))break;o(c),n.sortIndex=n.expirationTime,t(u,n)}n=r(c)}}function N(e){if(m=!1,b(e),!v)if(null!==r(u))v=!0,_(I);else{var n=r(c);null!==n&&j(N,n.startTime-e)}}function I(e,t){v=!1,m&&(m=!1,g(w),w=-1),h=!0;var a=p;try{for(b(t),f=r(u);null!==f&&(!(f.expirationTime>t)||e&&!P());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var l=i(f.expirationTime<=t);t=n.unstable_now(),"function"===typeof l?f.callback=l:f===r(u)&&o(u),b(t)}else o(u);f=r(u)}if(null!==f)var s=!0;else{var d=r(c);null!==d&&j(N,d.startTime-t),s=!1}return s}finally{f=null,p=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,E=null,w=-1,A=5,k=-1;function P(){return!(n.unstable_now()-k<A)}function T(){if(null!==E){var e=n.unstable_now();k=e;var t=!0;try{t=E(!0,e)}finally{t?C():(S=!1,E=null)}}else S=!1}if("function"===typeof y)C=function(){y(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,R=M.port2;M.port1.onmessage=T,C=function(){R.postMessage(null)}}else C=function(){x(T,0)};function _(e){E=e,S||(S=!0,C())}function j(e,t){w=x((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){v||h||(v=!0,_(I))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(e){switch(p){case 1:case 2:case 3:var n=3;break;default:n=p}var t=p;p=n;try{return e()}finally{p=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return n()}finally{p=t}},n.unstable_scheduleCallback=function(e,o,a){var i=n.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,t(c,e),null===r(u)&&e===r(c)&&(m?(g(w),w=-1):m=!0,j(N,a-i))):(e.sortIndex=l,t(u,e),v||h||(v=!0,_(I))),e},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(e){var n=p;return function(){var t=p;p=n;try{return e.apply(this,arguments)}finally{p=t}}}},296:function(e,n,t){"use strict";e.exports=t(813)}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);t.r(a);var i={};e=e||[null,n({}),n([]),n(n)];for(var l=2&o&&r;"object"==typeof l&&!~e.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return r[e]}}));return i.default=function(){return r},t.d(a,i),a}}(),t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,r){return t.f[r](e,n),n}),[]))},t.u=function(e){return"static/js/"+e+".014ccd8a.chunk.js"},t.miniCssF=function(e){},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={},n="xrna-in-typescript:";t.l=function(r,o,a,i){if(e[r])e[r].push(o);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==n+a){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,t.nc&&l.setAttribute("nonce",t.nc),l.setAttribute("data-webpack",n+a),l.src=r),e[r]=[o];var f=function(n,t){l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(t)})),n)return n(t)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/XRNA-React/",function(){var e={179:0};t.f.j=function(n,r){var o=t.o(e,n)?e[n]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(t,r){o=e[n]=[t,r]}));r.push(o[2]=a);var i=t.p+t.u(n),l=new Error;t.l(i,(function(r){if(t.o(e,n)&&(0!==(o=e[n])&&(e[n]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+n+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}}),"chunk-"+n,n)}};var n=function(n,r){var o,a,i=r[0],l=r[1],s=r[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(s)s(t)}for(n&&n(r);u<i.length;u++)a=i[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkxrna_in_typescript=self.webpackChunkxrna_in_typescript||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}(),function(){"use strict";var e=t(791),n=t.t(e,2),r=t(250);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return e};var e={},n=Object.prototype,t=n.hasOwnProperty,r=Object.defineProperty||function(e,n,t){e[n]=t.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{c({},"")}catch(T){c=function(e,n,t){return e[n]=t}}function d(e,n,t,o){var a=n&&n.prototype instanceof h?n:h,i=Object.create(a.prototype),l=new A(o||[]);return r(i,"_invoke",{value:C(e,t,l)}),i}function f(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(T){return{type:"throw",arg:T}}}e.wrap=d;var p={};function h(){}function v(){}function m(){}var x={};c(x,l,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(k([])));y&&y!==n&&t.call(y,l)&&(x=y);var b=m.prototype=h.prototype=Object.create(x);function N(e){["next","throw","return"].forEach((function(n){c(e,n,(function(e){return this._invoke(n,e)}))}))}function I(e,n){function a(r,i,l,s){var u=f(e[r],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==o(d)&&t.call(d,"__await")?n.resolve(d.__await).then((function(e){a("next",e,l,s)}),(function(e){a("throw",e,l,s)})):n.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return a("throw",e,l,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,t){function r(){return new n((function(n,r){a(e,t,n,r)}))}return i=i?i.then(r,r):r()}})}function C(e,n,t){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return P()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var l=S(i,t);if(l){if(l===p)continue;return l}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var s=f(e,n,t);if("normal"===s.type){if(r=t.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(r="completed",t.method="throw",t.arg=s.arg)}}}function S(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,S(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),p;var o=f(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function E(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function w(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===v||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},N(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(n,t,r,o,a){void 0===a&&(a=Promise);var i=new I(d(n,t,r,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(b),c(b,u,"Generator"),c(b,l,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=t.call(a,"catchLoc"),s=t.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=n,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),p},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),w(t),p}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;w(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:k(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,n,t,r,o,a,i){try{var l=e[a](i),s=l.value}catch(u){return void t(u)}l.done?n(s):Promise.resolve(s).then(r,o)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function l(e){i(a,r,o,l,s,"next",e)}function s(e){i(a,r,o,l,s,"throw",e)}l(void 0)}))}}function s(e){var n=function(e,n){if("object"!==o(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===o(n)?n:String(n)}function u(e,n,t){return(n=s(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,n){if(e){if("string"===typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}function v(e){return function(e){if(Array.isArray(e))return f(e)}(e)||p(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=h(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw a}}}}function x(e){if(Array.isArray(e))return e}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,n){return x(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(c){u=!0,o=c}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||h(e,n)||g()}var b=function(e){return e.INPUT_OUTPUT="Input/Output",e.VIEWPORT="Viewport",e.EDIT="Edit",e.FORMAT="Format",e.ANNOTATE="Annotate",e.SETTINGS="Settings",e.ABOUT="Quickstart",e}({}),N=Object.values(b),I=(b.INPUT_OUTPUT,1e-7);function C(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if((e-n)*t<=0)throw"Infinite loop error";for(var r=[],o=n;o<e;o+=t)r.push(o);return r}function S(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return e<-n?-1:e<n?0:1}function E(e,n){return 0===function(e,n){return S(e-n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:I)}(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:I)}var w=function(e){return e.THROW_ERROR="Throw error",e.DELETE_AND_ADD="Delete and add",e.DELETE="Delete",e.ADD="Add",e.DO_NOTHING="Do nothing",e}({});function A(e,n,t){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w.THROW_ERROR,a=0,i=e.length-1,l=!0;a<=i;){var s=a+i>>1,u=n(e[s]);if(0===u){a=s,l=!1;break}u>0?i=s-1:a=s+1}var c=t,d=r;if(l)switch(o){case w.THROW_ERROR:throw"The query was not found within the input sorted array.";case w.DELETE_AND_ADD:break;case w.DELETE:d=[];break;case w.ADD:c=0;break;case w.DO_NOTHING:d=[],c=0;break;default:throw"Unhandled switch case."}e.splice.apply(e,[a,c].concat(v(d)))}function k(e){return.01745329251*e}function P(e,n){return e-n}function T(e,n){return n-e}function M(e){return Number.parseInt(e)}function R(e){for(var n in e)return!1;return!0}function _(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=L(n,e),a=F(G(o),r/V(o)),i=O(e,a),l=L(e,a),s=O(n,a),u=L(n,a);return"M ".concat(i.x," ").concat(i.y," A 1 1 0 0 ").concat(t?1:0," ").concat(l.x," ").concat(l.y," L ").concat(u.x," ").concat(u.y," A 1 1 0 0 ").concat(t?1:0," ").concat(s.x," ").concat(s.y," z")}function j(e){e.sort(P);var n=e.length>>1;return e.length%2==0?.5*(e[n-1]+e[n]):e[n]}function O(e,n){return{x:e.x+n.x,y:e.y+n.y}}function L(e,n){return{x:e.x-n.x,y:e.y-n.y}}function D(e){return{x:-e.x,y:-e.y}}function F(e,n){return{x:e.x*n,y:e.y*n}}function B(e,n){return F(e,1/n)}function W(e){return B(e,V(e))}function z(e){var n=e.x;return{x:e.y,y:-n}}function U(e){var n=e.x;return{x:-e.y,y:n}}var G=U;function H(e,n,t){var r=1-t;return{x:r*e.x+t*n.x,y:r*e.y+t*n.y}}function K(e){var n=e.x,t=e.y;return n*n+t*t}function V(e){return Math.sqrt(K(e))}function q(e,n){return K(L(e,n))}function Q(e,n){return V(L(e,n))}function X(e,n){return e.x*n.x+e.y*n.y}function Y(e,n){return e.x*n.y-e.y*n.x}function $(e){var n=e.x,t=e.y;return Math.atan2(t,n)}function Z(e){return{x:Math.cos(e),y:Math.sin(e)}}function J(e){return F(Z(e.angle),e.radius)}function ee(e){return{radius:V(e),angle:$(e)}}function ne(e,n){return F(n,X(e,n)/K(n))}function te(e,n){var t=ne(e,n);return{projection:t,rejection:L(e,t)}}function re(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I*I,r=L(n.v1,n.v0);if(K(r)>=t)return Q(e,n.v0);var o=X(L(e,n.v0),r);return o<0?o=0:o>1&&(o=1),q(e,H(n.v0,n.v1,o))}var oe=t(164),ae=t.t(oe,2),ie=t(573),le=t.n(ie),se=t(38),ue=t.n(se),ce=function(e,n){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},ce(e,n)};function de(e,n){function t(){this.constructor=e}ce(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}var fe=function(){return fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},fe.apply(this,arguments)};function pe(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}var he=function(e,n,t,r){switch(n){case"debounce":return le()(e,t,r);case"throttle":return ue()(e,t,r);default:return e}},ve=function(e){return"function"===typeof e},me=function(){return"undefined"===typeof window},xe=function(e){return e instanceof Element||e instanceof HTMLDocument},ge=function(e,n,t,r){return function(o){var a=o.width,i=o.height;n((function(n){return n.width===a&&n.height===i||n.width===a&&!r||n.height===i&&!t?n:(null===e||void 0===e||e(a,i),{width:a,height:i})}))}};!function(n){function t(t){var r=n.call(this,t)||this;r.cancelHandler=function(){r.resizeHandler&&r.resizeHandler.cancel&&(r.resizeHandler.cancel(),r.resizeHandler=null)},r.attachObserver=function(){var e=r.props,n=e.targetRef,t=e.observerOptions;if(!me()){n&&n.current&&(r.targetRef.current=n.current);var o=r.getElement();o&&(r.observableElement&&r.observableElement===o||(r.observableElement=o,r.resizeObserver.observe(o,t)))}},r.getElement=function(){var e=r.props,n=e.querySelector,t=e.targetDomEl;if(me())return null;if(n)return document.querySelector(n);if(t&&xe(t))return t;if(r.targetRef&&xe(r.targetRef.current))return r.targetRef.current;var o=(0,oe.findDOMNode)(r);if(!o)return null;switch(r.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},r.createResizeHandler=function(e){var n=r.props,t=n.handleWidth,o=void 0===t||t,a=n.handleHeight,i=void 0===a||a,l=n.onResize;if(o||i){var s=ge(l,r.setState.bind(r),o,i);e.forEach((function(e){var n=e&&e.contentRect||{},t=n.width,o=n.height;!r.skipOnMount&&!me()&&s({width:t,height:o}),r.skipOnMount=!1}))}},r.getRenderType=function(){var n=r.props,t=n.render,o=n.children;return ve(t)?"renderProp":ve(o)?"childFunction":(0,e.isValidElement)(o)?"child":Array.isArray(o)?"childArray":"parent"};var o=t.skipOnMount,a=t.refreshMode,i=t.refreshRate,l=void 0===i?1e3:i,s=t.refreshOptions;return r.state={width:void 0,height:void 0},r.skipOnMount=o,r.targetRef=(0,e.createRef)(),r.observableElement=null,me()||(r.resizeHandler=he(r.createResizeHandler,a,l,s),r.resizeObserver=new window.ResizeObserver(r.resizeHandler)),r}de(t,n),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){me()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var n=this.props,t=n.render,r=n.children,o=n.nodeType,a=void 0===o?"div":o,i=this.state,l={width:i.width,height:i.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return null===t||void 0===t?void 0:t(l);case"childFunction":return null===r||void 0===r?void 0:r(l);case"child":var s=r;if(s.type&&"string"===typeof s.type){var u=pe(l,["targetRef"]);return(0,e.cloneElement)(s,u)}return(0,e.cloneElement)(s,l);case"childArray":return r.map((function(n){return!!n&&(0,e.cloneElement)(n,l)}));default:return e.createElement(a,null)}}}(e.PureComponent);var ye,be=me()?e.useEffect:e.useLayoutEffect;var Ne=function(e){return e.RGB="RGB",e.RGBA="RGBA",e.ARGB="ARGB",e.BGR="BGR",e.BGRA="BGRA",e.ABGR="ABGR",e}({}),Ie=Object.values(Ne),Ce=(u(ye={},Ne.RGB,{red:2,green:1,blue:0}),u(ye,Ne.RGBA,{red:3,green:2,blue:1,alpha:0}),u(ye,Ne.ARGB,{red:2,green:1,blue:0,alpha:3}),u(ye,Ne.BGR,{red:0,green:1,blue:2}),u(ye,Ne.BGRA,{red:1,green:2,blue:3,alpha:0}),u(ye,Ne.ABGR,{red:0,green:1,blue:2,alpha:3}),ye),Se=255,Ee=Ne.RGB,we={red:0,green:0,blue:0,alpha:Se},Ae={red:192,green:192,blue:192,alpha:Se};function ke(e){var n="".concat(e.red,", ").concat(e.green,", ").concat(e.blue);return null==e.alpha||Number.isNaN(e.alpha)||255===e.alpha?"rgb(".concat(n,")"):"rgba(".concat(n,", ").concat(e.alpha/255,")")}function Pe(e,n){return Te(Number.parseInt(e,16),n)}function Te(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ne.RGB,t={0:255&e,1:e>>>8&255,2:e>>>16&255,3:e>>>24&255},r=Ce[n],o={red:t[r.red],green:t[r.green],blue:t[r.blue]};return void 0!==r.alpha&&(o=d(d({},o),{},{alpha:t[r.alpha]})),o}function Me(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ne.RGB,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,n){var t=Ce[n],r=void 0===t.alpha||void 0===e.alpha?0:e.alpha<<8*t.alpha;return e.red<<8*t.red|e.green<<8*t.green|e.blue<<8*t.blue|r}(e,n).toString(16).toUpperCase();return t?"0".repeat(2*n.length-r.length)+r:r}var Re=function(e){return e.THROW_ERROR="throw error",e.RETURN_BLACK="return black",e.RETURN_TRANSPARENT="return transparent",e}({});function _e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ne.RGB,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Re.RETURN_BLACK,r=/^rgb\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})\)$/.exec(e);if(null!==r)return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3])};if(null!==(r=/^rgba\((\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)(\d{1,3})(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseInt(r[1]),green:Number.parseInt(r[2]),blue:Number.parseInt(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^rgb\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3])};if(null!==(r=/^rgba\(([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)(?:\s*,\s*|\s+)([\d\.]+)\)$/.exec(e)))return{red:Number.parseFloat(r[1]),green:Number.parseFloat(r[2]),blue:Number.parseFloat(r[3]),alpha:255*Number.parseFloat(r[4])};if(null!==(r=/^\d+$/.exec(e)))return Te(Number.parseInt(r[0]),n);if(null!==(r=/^#([abcdefABCDEF\d]+)$/.exec(e)))return Pe(r[1],n);if("undefined"===e)switch(t){case Re.RETURN_BLACK:return we;case Re.RETURN_TRANSPARENT:return{red:0,green:0,blue:0,alpha:0};case Re.THROW_ERROR:throw'Unsupported color literal "'.concat(e,'"');default:throw"Unhandled switch case"}switch(e){case"none":return{red:0,blue:0,green:0,alpha:0};case"black":return{red:0,green:0,blue:0};case"silver":case"silver":return{red:192,green:192,blue:192};case"gray":return{red:128,green:128,blue:128};case"white":case"white":return{red:255,green:255,blue:255};case"maroon":case"maroon":return{red:128,green:0,blue:0};case"red":case"red":return{red:255,green:0,blue:0};case"purple":case"pruple":return{red:128,green:0,blue:128};case"fuchsia":case"magenta":return{red:255,green:0,blue:255};case"green":return{red:0,green:128,blue:0};case"lime":case"lime":return{red:0,green:255,blue:0};case"olive":case"olive":return{red:128,green:128,blue:0};case"yellow":case"yellow":return{red:255,green:255,blue:0};case"navy":case"navy":return{red:0,green:0,blue:128};case"blue":return{red:0,green:0,blue:255};case"teal":case"teal":return{red:0,green:128,blue:128};case"aqua":case"cyan":return{red:0,green:255,blue:255};case"aliceblue":return{red:240,green:248,blue:255};case"antiquewhite":return{red:250,green:235,blue:215};case"aquamarine":return{red:127,green:255,blue:212};case"azure":return{red:240,green:255,blue:255};case"beige":return{red:245,green:245,blue:220};case"bisque":return{red:255,green:228,blue:196};case"blanchedalmond":return{red:255,green:235,blue:205};case"blueviolet":return{red:138,green:43,blue:226};case"brown":return{red:165,green:42,blue:42};case"burlywood":return{red:222,green:184,blue:135};case"cadetblue":return{red:95,green:158,blue:160};case"chartreuse":return{red:127,green:255,blue:0};case"chocolate":return{red:210,green:105,blue:30};case"coral":return{red:255,green:127,blue:80};case"cornflowerblue":return{red:100,green:149,blue:237};case"cornsilk":return{red:255,green:248,blue:220};case"crimson":return{red:220,green:20,blue:60};case"darkblue":return{red:0,green:0,blue:139};case"darkcyan":return{red:0,green:139,blue:139};case"darkgoldenrod":return{red:184,green:134,blue:11};case"darkgreen":return{red:0,green:100,blue:0};case"darkkhaki":return{red:189,green:183,blue:107};case"darkmagenta":return{red:139,green:0,blue:139};case"darkolivegreen":return{red:85,green:107,blue:47};case"darkorange":return{red:255,green:140,blue:0};case"darkorchid":return{red:139,green:0,blue:0};case"darksalmon":return{red:233,green:150,blue:122};case"darkseagreen":return{red:143,green:188,blue:143};case"darkslateblue":return{red:72,green:61,blue:139};case"darkslategray":return{red:47,green:79,blue:79};case"darkturqoise":return{red:0,green:206,blue:209};case"darkviolet":return{red:148,green:0,blue:211};case"deeppink":return{red:255,green:20,blue:147};case"deepskyblue":return{red:0,green:191,blue:255};case"dimgray":return{red:105,green:105,blue:105};case"dodgerblue":return{red:30,green:144,blue:255};case"firebrick":return{red:178,green:34,blue:34};case"floralwhite":return{red:255,green:250,blue:240};case"forestgreen":return{red:34,green:139,blue:34};case"gainsboro":return{red:220,green:220,blue:220};case"ghostwhite":return{red:248,green:248,blue:255};case"gold":return{red:255,green:215,blue:0};case"goldenrod":return{red:218,green:165,blue:32};case"greenyellow":return{red:173,green:255,blue:47};case"honeydew":return{red:240,green:255,blue:240};case"hotpink":return{red:255,green:105,blue:180};case"indianred":return{red:205,green:92,blue:92};case"indigo":return{red:75,green:0,blue:130};case"ivory":return{red:255,green:255,blue:240};case"khaki":return{red:240,green:230,blue:140};case"lavender":return{red:230,green:230,blue:250};case"lavenderblush":return{red:255,green:240,blue:245};case"lawngreen":return{red:124,green:252,blue:0};case"lemonchiffon":return{red:255,green:250,blue:205};case"lightblue":return{red:173,green:216,blue:230};case"lightcoral":return{red:240,green:128,blue:128};case"lightcyan":return{red:224,green:255,blue:255};case"lightgoldenrodyellow":return{red:250,green:250,blue:210};case"lightgray":case"lightgrey":return{red:211,green:211,blue:211};case"lightgreen":return{red:148,green:238,blue:144};case"lightpink":return{red:255,green:182,blue:193};case"lightsalmon":return{red:255,green:160,blue:122};case"lightseagreen":return{red:32,green:178,blue:170};case"lightskyblue":return{red:135,green:206,blue:250};case"lightslategray":case"lightslategrey":return{red:119,green:136,blue:153};case"lightsleetblue":return{red:176,green:196,blue:222};case"lightyellow":return{red:255,green:255,blue:224};case"limegreen":return{red:50,green:205,blue:50};case"linen":return{red:250,green:240,blue:230};case"mediumaquamarine":return{red:102,green:205,blue:170};case"mediumblue":return{red:0,green:0,blue:205};case"mediumorchid":return{red:186,green:85,blue:211};case"mediumpruple":return{red:147,green:112,blue:219};case"mediumseagreen":return{red:60,green:179,blue:113};case"mediumslateblue":return{red:123,green:104,blue:238};case"mediumspringgreen":return{red:0,green:250,blue:154};case"mediumturquiose":return{red:72,green:209,blue:204};case"mediumvioletred":return{red:199,green:21,blue:133};case"midnightblue":return{red:25,green:25,blue:112};case"mintcream":return{red:245,green:255,blue:250};case"mistyrose":return{red:255,green:228,blue:225};case"moccasin":return{red:255,green:228,blue:181};case"navajowhite":return{red:255,green:222,blue:173};case"oldlace":return{red:253,green:245,blue:230};case"olivedrab":return{red:107,green:142,blue:35};case"orange":return{red:255,green:165,blue:0};case"orangered":return{red:255,green:69,blue:0};case"orchid":return{red:218,green:112,blue:214};case"palegoldenrod":return{red:238,green:232,blue:170};case"palegreen":return{red:152,green:251,blue:152};case"paleturquoise":return{red:175,green:238,blue:238};case"palevioletred":return{red:219,green:112,blue:147};case"papayawhip":return{red:255,green:239,blue:213};case"peachpuff":return{red:255,green:218,blue:185};case"peru":return{red:205,green:133,blue:63};case"pink":return{red:255,green:192,blue:203};case"plum":return{red:221,green:160,blue:221};case"powderblue":return{red:176,green:224,blue:230};case"rosybrown":return{red:188,green:143,blue:143};case"royalblue":return{red:65,green:105,blue:225};case"saddlebrown":return{red:139,green:69,blue:19};case"salmon":return{red:250,green:128,blue:114};case"sandybrown":return{red:244,green:264,blue:96};case"seagreen":return{red:46,green:139,blue:87};case"seashell":return{red:255,green:245,blue:238};case"sienna":return{red:160,green:82,blue:45};case"skyblue":return{red:135,green:206,blue:235};case"slateblue":return{red:106,green:80,blue:205};case"slategray":case"slategrey":return{red:112,green:128,blue:144};case"snow":return{red:255,green:250,blue:250};case"springgreen":return{red:0,green:255,blue:127};case"steelblue":return{red:70,green:130,blue:180};case"tan":return{red:210,green:180,blue:140};case"thistle":return{red:216,green:191,blue:216};case"tomato":return{red:255,green:99,blue:71};case"turquoise":return{red:64,green:224,blue:208};case"violet":return{red:238,green:130,blue:238};case"wheat":return{red:245,green:222,blue:179};case"yellowgreen":return{red:154,green:205,blue:50};default:throw"Unsupported color literal: ".concat(e)}}function je(e,n){return e.red===n.red&&e.green===n.green&&e.blue===n.blue&&e.alpha===n.alpha}function Oe(e,n){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Oe(e,n)}function Le(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Oe(e,n)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}function Fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Be(e,n){if(n&&("object"===o(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function We(e){var n=Fe();return function(){var t,r=De(e);if(n){var o=De(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Be(this,t)}}function ze(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ue(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function Ge(e,n,t){return n&&Ue(e.prototype,n),t&&Ue(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var He=function(){function e(n,t,r){ze(this,e),this.family=void 0,this.style=void 0,this.weight=void 0,this.family=n,this.style=t,this.weight=r}return Ge(e,null,[{key:"fromFontId",value:function(n){switch(n){case 0:default:return new e("Helvetica","normal","normal");case 1:return new e("Helvetica","italic","normal");case 2:return new e("Helvetica","normal","bold");case 3:return new e("Helvetica","italic","bold");case 4:case 12:return new e("TimesRoman","normal","normal");case 5:return new e("TimesRoman","italic","normal");case 6:return new e("TimesRoman","normal","bold");case 7:return new e("TimesRoman","italic","bold");case 8:return new e("Courier","normal","normal");case 9:return new e("Courier","italic","normal");case 10:return new e("Courier","normal","bold");case 11:return new e("Courier","italic","bold");case 13:return new e("Dialog","normal","normal");case 14:return new e("Dialog","italic","normal");case 15:return new e("Dialog","normal","bold");case 16:return new e("Dialog","italic","bold");case 17:return new e("DialogInput","normal","normal");case 18:return new e("DialogInput","italic","normal");case 19:return new e("DialogInput","normal","bold");case 20:return new e("DialogInput","italic","bold")}}},{key:"toFontId",value:function(e){switch("".concat(e.family,"_").concat(e.style,"_").concat(e.weight)){default:case"Helvetica_normal_normal":return 0;case"Helvetica_italic_normal":return 1;case"Helvetica_normal_bold":return 2;case"Helvetica_italic_bold":return 3;case"TimesRoman_normal_normal":return 4;case"TimesRoman_italic_normal":return 5;case"TimesRoman_normal_bold":return 6;case"TimesRoman_italic_bold":return 7;case"Courier_normal_normal":return 8;case"Courier_italic_normal":return 9;case"Courier_normal_bold":return 10;case"Courier_italic_bold":return 11;case"TimesRoman_normal_normal":return 12;case"Dialog_normal_normal":return 13;case"Dialog_italic_normal":return 14;case"Dialog_normal_bold":return 15;case"Dialog_italic_bold":return 16;case"DialogInput_normal_normal":return 17;case"DialogInput_italic_normal":return 18;case"DialogInput_normal_bold":return 19;case"DialogInput_italic_bold":return 20}}},{key:"areEqual",value:function(e,n){return e.family===n.family&&e.weight===n.weight&&e.style===n.style}}]),e}();function Ke(e){var n=e.match(/^([\d.]+)/);if(null===n)throw"Unrecognized font-size format ".concat(e);return Number.parseFloat(n[1])}He.DEFAULT_FONT_ID=0,He.DEFAULT=He.fromFontId(He.DEFAULT_FONT_ID);var Ve=function(e){Le(t,e);var n=We(t);function t(e,r,o){var a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_SIZE;return ze(this,t),(a=n.call(this,e,r,o)).size=void 0,a.size=i,a}return Ge(t,null,[{key:"fromPartialFont",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_SIZE;return new t(e.family,e.style,e.weight,n)}},{key:"fromFontId",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_SIZE;return t.fromPartialFont(He.fromFontId(e),n)}},{key:"areEqual",value:function(e,n){return e.family===n.family&&e.style===n.style&&e.weight===n.weight&&e.size===n.size}}]),t}(He);Ve.DEFAULT_SIZE=8,Ve.DEFAULT=Ve.fromPartialFont(He.DEFAULT,Ve.DEFAULT_SIZE);var qe=Ve,Qe=.2,Xe=2,Ye=(ke({red:54,green:64,blue:79}),1.1),$e=(Math.log(Ye),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe;return e.toFixed(n)}),Ze=function(e){return/^-?(0x)?\d+$/.test(e)?Number.parseInt(e):void 0},Je=function(e){var n=Number.parseFloat(e);return Number.isNaN(n)?void 0:n},en=function(e){return e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e}({});function nn(e,n){var t=y(e,6),r=t[0],o=t[1],a=t[2],i=t[3],l=t[4],s=t[5],u=y(n,6),c=u[0],d=u[1],f=u[2],p=u[3],h=u[4],v=u[5];return[r*c+a*d,o*c+i*d,r*f+a*p,o*f+i*p,r*h+a*v+l,o*h+i*v+s]}var tn={minimum:1,maximum:1,parser:function(e){var n=e[0],t=Math.cos(n),r=Math.sin(n);return[t,r,-r,t,0,0]}},rn={matrix:{minimum:6,maximum:6,parser:function(e){return e}},translate:{minimum:2,maximum:2,parser:function(e){return[1,0,0,1,e[0],e[1]]}},translatex:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,e[0],0]}},translatey:{minimum:1,maximum:1,parser:function(e){return[1,0,0,1,0,e[0]]}},scale:{minimum:1,maximum:2,parser:function(e){var n=e[0],t=n;return e.length>1&&(t=e[1]),[n,0,0,t,0,0]}},scalex:{minimum:1,maximum:1,parser:function(e){return[e[0],0,0,1,0,0]}},scaley:{minimum:1,maximum:1,parser:function(e){return[1,0,0,e[0],0,0]}},rotate:tn,rotatez:tn,skew:{minimum:1,maximum:2,parser:function(e){var n=e[0],t=0;return e.length>1&&(t=Math.tan(e[1])),[1,t,Math.tan(n),1,0,0]}},skewx:{minimum:1,maximum:1,parser:function(e){return[1,0,Math.tan(e[0]),1,0,0]}},skewy:{maximum:1,minimum:1,parser:function(e){return[1,Math.tan(e[0]),0,1,0,0]}}};function on(e){var n=(e=e.toLowerCase()).match(/^\s*([a-z]+)\s*\(([\d.,\s-e]+)\)\s*$/);if(null==n)throw"Unrecognized input-text format";var t=n[1];if(!(t in rn))throw"Unrecognized transform type.";var r=rn[t],o=r.minimum,a=r.maximum,i=r.parser,l=n[2],s=(l=(l=(l=l.trim()).replaceAll(/\s*,\s*/g,",")).replaceAll(/\s+/g,",")).split(",").map(Number.parseFloat),u=s.length;if(u<o)throw"The number of input numbers (".concat(u,") is less than the minimum required (").concat(o,")");if(u>a)throw"The number of input numbers (".concat(u,") is greater than the maximum required (").concat(a,")");return i(s)}var an=1e-8,ln={line:5,center:10},sn={loose:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos(k(160))},normal:{minimumDistanceRatio:.8,dotProductThreshold:Math.cos(k(170))},strict:{minimumDistanceRatio:.895,dotProductThreshold:Math.cos(k(175))}},un="Too few nucleotides exist within the RNA complex (the number is less than the required number).";function cn(e,n,t){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=["undefined"].concat(v(rt.canonicalTypes)),l={},s=function(){var e,s,p,h=y(f[c],2),x=h[0],g=h[1],b=Number.parseInt(x),N=n[b],I=t[b],C=null!==(e=r[b])&&void 0!==e?e:{};l[b]={};for(var S=l[b],E=[],w=0,A=Object.entries(g.rnaMoleculeProps);w<A.length;w++){var k,P=y(A[w],2),T=P[0],M=P[1];S[T]={};for(var R=S[T],_=null!==(k=C[T])&&void 0!==k?k:{},j=0,B=Object.entries(M.nucleotideProps);j<B.length;j++){var z,U=y(B[j],2),G=U[0],H=U[1],K=Number.parseInt(G),Y=null!==(z=_[K])&&void 0!==z?z:{x:0,y:0},$={x:H.x-.5*Y.x,y:H.y+Y.y};R[K]=$,E.push({indices:{rnaMoleculeName:T,nucleotideIndex:K,arrayIndex:E.length},singularNucleotideProps:H,adjustedPosition:$})}}var Z=o[b],J=a[b];function ee(e,n){var t=e.vectorNearNucleotide,r=e.vectorNearLabelContent,o=e.labelContent,a=e.labelContentDimensions,i=E[n],l=i.singularNucleotideProps,s=i.adjustedPosition;l.labelLineProps={points:[L(t,s),L(r,s)]},o.x+=.5*a.width-s.x,o.y+=.5*-a.height-s.y,l.labelContentProps=o}if(Z.length>0){var ne,te=function(e,n,t,r){if(void 0!==t&&void 0!==r){var o=q(e.labelContent,e.vectorNearLabelContent)/q(e.vectorNearLabelContent,e.vectorNearNucleotide);if(o<t||o>r)return}n.sort((function(e,n){return e.distance-n.distance})),ee(e,n[0].indices.arrayIndex)},oe=new Array,ae={},ie=m(J);try{for(ie.s();!(ne=ie.n()).done;){for(var le=ne.value,se=le.labelContent,ue=le.rectangle,ce=se.x,de=se.y,fe=ue.width,pe=ue.height,he=[{x:ce,y:de},{x:ce+fe,y:de},{x:ce+fe,y:de-pe},{x:ce,y:de-pe}],ve=[{v0:he[0],v1:he[1]},{v0:he[1],v1:he[2]},{v0:he[2],v1:he[3]},{v0:he[3],v1:he[0]}],me={distanceSquared:Number.POSITIVE_INFINITY,vectorNearNucleotide:Z[0].v0,vectorNearLabelContent:Z[0].v1,labelLineIndex:NaN},xe=0;xe<Z.length;xe++)for(var ge=Z[xe],ye=ge.v0,be=ge.v1,Ne=0,Ie=[{vector:ye,otherVector:be},{vector:be,otherVector:ye}];Ne<Ie.length;Ne++){var Ce,Se=Ie[Ne],Ee=Se.vector,we=Se.otherVector,Ae=m(ve);try{for(Ae.s();!(Ce=Ae.n()).done;){var ke=re(Ee,Ce.value);ke<me.distanceSquared&&(me={distanceSquared:ke,vectorNearNucleotide:we,vectorNearLabelContent:Ee,labelLineIndex:xe})}}catch(Zt){Ae.e(Zt)}finally{Ae.f()}}var Pe=me,Te=Pe.labelLineIndex,Me=Pe.vectorNearNucleotide,Re=Pe.vectorNearLabelContent,_e=Pe.distanceSquared;Te in ae||(ae[Te]=[]),ae[Te].push({vectorNearNucleotide:Me,vectorNearLabelContent:Re,labelContent:se,distanceSquared:_e,labelContentDimensions:ue})}}catch(Zt){ie.e(Zt)}finally{ie.f()}for(var je=0,Oe=Object.entries(ae);je<Oe.length;je++){var Le=y(Oe[je],2),De=Le[0],Fe=Le[1],Be=Number.parseInt(De);Fe.sort((function(e,n){return e.distanceSquared-n.distanceSquared})),oe.push(d(d({},Fe[0]),{},{labelLineIndex:Be}))}for(var We={},ze=new Array,Ue=0,Ge=oe;Ue<Ge.length;Ue++){var He=Ge[Ue],Ke=He.labelLineIndex,Ve=He.labelContent,qe=(He.distanceSquared,He.vectorNearNucleotide),Qe=He.vectorNearLabelContent,Xe=(He.labelContentDimensions,nt(Zn(qe,7).sliced,qe)),Ye=new Array,$e=(Z[Ke],W(L(Qe,qe))),Ze=void 0;/^-?\d+$/.test(Ve.content)&&(Ze=Number.parseInt(Ve.content));for(var Je=0,en=Xe;Je<en.length;Je++){var nn=en[Je],tn=nn.indices,rn=nn.dv,on=nn.distance;X($e,rn=W(rn))>=sn.loose.dotProductThreshold||Ye.push({indices:tn,distance:on})}if(1===Ye.length){var cn=Ye[0].indices;if(void 0!==Ze){var dn=Ze-cn.nucleotideIndex;dn in We||(We[dn]={multiplicity:0,candidates:[]});var fn=We[dn];fn.multiplicity++,fn.candidates.push({pairedLabelDatum:He,arrayIndex:cn.arrayIndex,labelContentAsNumber:Ze,unfilteredNucleotideData:Xe})}}else ze.push({unfilteredNucleotideData:Xe,pairedLabelDatum:He,labelContentAsNumber:Ze})}var pn=Object.entries(We);if(0===pn.length){var hn,vn=m(ze);try{for(vn.s();!(hn=vn.n()).done;){var mn=hn.value,xn=mn.unfilteredNucleotideData;te(mn.pairedLabelDatum,xn)}}catch(Zt){vn.e(Zt)}finally{vn.f()}}else{var gn,yn=pn.map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndexDelta:Number.parseInt(t),multiplicityData:r}})).sort((function(e,n){return n.multiplicityData.multiplicity-e.multiplicityData.multiplicity})),bn=0,Nn=m(yn);try{for(Nn.s();!(gn=Nn.n()).done;){var In=gn.value,Cn=(In.nucleotideIndexDelta,In.multiplicityData);bn+=Cn.multiplicity}}catch(Zt){Nn.e(Zt)}finally{Nn.f()}var Sn,En=yn[0],wn=Number.POSITIVE_INFINITY,An=Number.NEGATIVE_INFINITY,kn=m(En.multiplicityData.candidates);try{for(kn.s();!(Sn=kn.n()).done;){var Pn=Sn.value.pairedLabelDatum,Tn=q(Pn.labelContent,Pn.vectorNearLabelContent)/q(Pn.vectorNearLabelContent,Pn.vectorNearNucleotide);Tn<wn&&(wn=Tn),Tn>An&&(An=Tn)}}catch(Zt){kn.e(Zt)}finally{kn.f()}yn=yn.filter((function(e){e.nucleotideIndexDelta;var n=e.multiplicityData,t=n.multiplicity>1&&n.multiplicity/bn>.05;if(t){var r,o=m(n.candidates);try{for(o.s();!(r=o.n()).done;){var a=r.value;ee(a.pairedLabelDatum,a.arrayIndex)}}catch(Zt){o.e(Zt)}finally{o.f()}}else{var i,l=m(n.candidates);try{for(l.s();!(i=l.n()).done;){var s=i.value,u=s.pairedLabelDatum,c=(s.arrayIndex,s.labelContentAsNumber),d=s.unfilteredNucleotideData;ze.push({unfilteredNucleotideData:d,pairedLabelDatum:u,labelContentAsNumber:c})}}catch(Zt){l.e(Zt)}finally{l.f()}}return t}));var Mn,Rn=m(ze);try{for(Rn.s();!(Mn=Rn.n()).done;){var _n=Mn.value,jn=_n.unfilteredNucleotideData,On=_n.pairedLabelDatum,Ln=_n.labelContentAsNumber;if(void 0===Ln)te(On,jn,wn,An);else{var Dn,Fn=m(yn);try{e:for(Fn.s();!(Dn=Fn.n()).done;){var Bn,Wn=Dn.value.nucleotideIndexDelta,zn=m(jn);try{for(zn.s();!(Bn=zn.n()).done;){var Un=Bn.value.indices,Gn=Un.nucleotideIndex,Hn=Un.arrayIndex;if(Wn===Ln-Gn){!0,ee(On,Hn);break e}}}catch(Zt){zn.e(Zt)}finally{zn.f()}}}catch(Zt){Fn.e(Zt)}finally{Fn.f()}}}}catch(Zt){Rn.e(Zt)}finally{Rn.f()}}}var Kn,Vn=!1,qn=$n(),Qn={},Xn=m(i);try{for(Xn.s();!(Kn=Xn.n()).done;){var Yn=Kn.value;Qn[Yn]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY}}}catch(Zt){Xn.e(Zt)}finally{Xn.f()}function $n(){var e,n={},t=m(i);try{for(t.s();!(e=t.n()).done;){n[e.value]={lineData:[],centerData:[]}}}catch(Zt){t.e(Zt)}finally{t.f()}return{zeroCandidateBasePairs:n,tooManyCandidateBasePairs:{lineDataWithIndices:[],centerDataWithIndices:[]}}}function Zn(e,n){var t=E.map((function(n){var t=n.indices,r=n.adjustedPosition;return{indices:t,adjustedPosition:r,squaredDistance:q(e,r)}}));if(t.length<n)throw un;return t.sort((function(e,n){return e.squaredDistance-n.squaredDistance})),{all:t,sliced:t.slice(0,n)}}function Jn(e,n,t){ro(g,e.rnaMoleculeName,e.nucleotideIndex,n.rnaMoleculeName,n.nucleotideIndex,to.THROW_ERROR,{basePairType:t});var r=Q(E[e.arrayIndex].singularNucleotideProps,E[n.arrayIndex].singularNucleotideProps),o=Qn[null!==t&&void 0!==t?t:"undefined"];r<o.minimum&&(o.minimum=r),r>o.maximum&&(o.maximum=r),delete E[e.arrayIndex],delete E[n.arrayIndex]}function nt(e,n){return e.map((function(e){var t=e.indices,r=e.adjustedPosition,o=e.squaredDistance;return{indices:t,dv:L(r,n),distance:Math.sqrt(o),adjustedPosition:r}}))}function tt(e,n,t){for(var r=n.dotProductThreshold,o=n.minimumDistanceRatio,a=1/o,i=W(L(e.v1,e.v0)),l=D(i),s=Zn(e.v0,t),u=nt(s.sliced,e.v0).filter((function(e){var n=e.dv;return X(n,i)/V(n)<r})),c=Zn(e.v1,t),d=nt(c.sliced,e.v1).filter((function(e){var n=e.dv;return X(n,l)/V(n)<r})),f=u.length,p=d.length,h=new Array,v=e.basePairType,m=0;m<f;m++)for(var x=u[m],y=x.indices,b=x.distance,N=g.rnaMoleculeProps[y.rnaMoleculeName].nucleotideProps[y.nucleotideIndex].symbol,I=0;I<p;I++){var C=d[I],S=C.indices,E=C.distance,w=g.rnaMoleculeProps[S.rnaMoleculeName].nucleotideProps[S.nucleotideIndex].symbol;if(!(y.rnaMoleculeName===S.rnaMoleculeName&&Math.abs(y.nucleotideIndex-S.nucleotideIndex)<=1)){var A=et(N,w);if(void 0===v||v===A){var k=b/E;k<o||k>a||h.push({indices0:y,indices1:S,totalDistance:b+E,distanceRatio:k,type:A})}}}switch(h.length){case 0:qn.zeroCandidateBasePairs[null!==v&&void 0!==v?v:"undefined"].lineData.push({line:e,allClosestNucleotides:{0:[],1:[]}});break;case 1:var P=h[0];Jn(P.indices0,P.indices1,P.type);break;default:qn.tooManyCandidateBasePairs.lineDataWithIndices.push({line:e,arrayIndices:h.map((function(e){var n=e.indices0,t=e.indices1;return{0:n.arrayIndex,1:t.arrayIndex}})),allClosestNucleotides:{0:s.all,1:c.all}})}1!==h.length&&Vn&&console.error("Base-pair creation failed: ".concat(h.length," (line; ").concat(e.basePairType,"; (").concat(e.v0.x,", ").concat(e.v0.y,")-(").concat(e.v1.x,", ").concat(e.v1.y,"))"),h)}function ot(e,n,t){for(var r=n.dotProductThreshold,o=n.minimumDistanceRatio,a=1/o,i=Zn(e,t),l=i.all,s=nt(i.sliced,e),u=new Array,c=s.length,d=e.basePairType,f=0;f<c;f++)for(var p=s[f],h=p.indices,v=p.distance,m=g.rnaMoleculeProps[h.rnaMoleculeName].nucleotideProps[h.nucleotideIndex].symbol,x=f+1;x<c;x++){var y=s[x],b=y.indices,N=y.distance,I=g.rnaMoleculeProps[b.rnaMoleculeName].nucleotideProps[b.nucleotideIndex].symbol;if(!(h.rnaMoleculeName===b.rnaMoleculeName&&Math.abs(h.nucleotideIndex-b.nucleotideIndex)<=1)){var C=et(m,I);if(void 0===d||d===C){var S=X(p.dv,y.dv)/(v*N);if(!(S>=r)){var E=v/N;E<o||E>a||u.push({indices0:h,indices1:b,dotProduct:S,totalDistance:v+N,distanceRatio:E,type:C})}}}}switch(u.length){case 0:qn.zeroCandidateBasePairs[null!==d&&void 0!==d?d:"undefined"].centerData.push({center:e,allClosestNucleotides:[]});break;case 1:var w=u[0];Jn(w.indices0,w.indices1,w.type);break;default:qn.tooManyCandidateBasePairs.centerDataWithIndices.push({center:e,arrayIndices:u.map((function(e){var n=e.indices0,t=e.indices1;return{0:n.arrayIndex,1:t.arrayIndex}})),allClosestNucleotides:l})}1!==u.length&&Vn&&console.error("Base-pair creation failed: ".concat(u.length," (center; ").concat(e.basePairType,"; ").concat(e.x,", ").concat(e.y,")"),u)}var at,it=(u(s={},rt.Type.WOBBLE,0),u(s,rt.Type.CANONICAL,1),u(s,rt.Type.CIS_WATSON_CRICK_WATSON_CRICK,2),u(s,rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK,3),u(s,rt.Type.MISMATCH,4),u(s,"undefined",5),s),lt=Object.entries(it).sort((function(e,n){return e[1]-n[1]})).map((function(e){var n=y(e,2),t=n[0];n[1];return t})),st=(u(p={undefined:{lines:[],centers:[]}},rt.Type.CANONICAL,{lines:[],centers:[]}),u(p,rt.Type.MISMATCH,{lines:[],centers:[]}),u(p,rt.Type.WOBBLE,{lines:[],centers:[]}),u(p,rt.Type.CIS_WATSON_CRICK_WATSON_CRICK,{lines:[],centers:[]}),u(p,rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK,{lines:[],centers:[]}),p),ut=m(I);try{for(ut.s();!(at=ut.n()).done;){var ct,dt=at.value;st[null!==(ct=dt.basePairType)&&void 0!==ct?ct:"undefined"].centers.push(dt)}}catch(Zt){ut.e(Zt)}finally{ut.f()}var ft,pt=m(N);try{for(pt.s();!(ft=pt.n()).done;){var ht,vt=ft.value,mt=st[null!==(ht=vt.basePairType)&&void 0!==ht?ht:"undefined"];an>=q(vt.v0,vt.v1)?mt.centers.push(vt.v0):mt.lines.push(vt)}}catch(Zt){pt.e(Zt)}finally{pt.f()}var xt,gt=m(lt);try{for(gt.s();!(xt=gt.n()).done;){var yt,bt=st[xt.value],Nt=bt.centers,It=m(bt.lines);try{for(It.s();!(yt=It.n()).done;){tt(yt.value,sn.normal,3)}}catch(Zt){It.e(Zt)}finally{It.f()}var Ct,St=m(Nt);try{for(St.s();!(Ct=St.n()).done;){ot(Ct.value,sn.normal,6)}}catch(Zt){St.e(Zt)}finally{St.f()}}}catch(Zt){gt.e(Zt)}finally{gt.f()}var Et=structuredClone(qn);qn=$n();var wt,At=new Array,kt=new Array,Pt=Et.zeroCandidateBasePairs,Tt=Et.tooManyCandidateBasePairs,Mt=m(Tt.lineDataWithIndices);try{for(Mt.s();!(wt=Mt.n()).done;){var Rt=wt.value;switch(Rt.arrayIndices=Rt.arrayIndices.filter((function(e){return e[0]in E&&e[1]in E})),Rt.arrayIndices.length){case 0:var _t;Pt[null!==(_t=Rt.line.basePairType)&&void 0!==_t?_t:"undefined"].lineData.push(Rt);break;case 1:var jt=Rt.arrayIndices[0];Jn(E[jt[0]].indices,E[jt[1]].indices,Rt.line.basePairType);break;default:At.push(Rt)}}}catch(Zt){Mt.e(Zt)}finally{Mt.f()}var Ot,Lt=m(Tt.centerDataWithIndices);try{for(Lt.s();!(Ot=Lt.n()).done;){var Dt=Ot.value;switch(Dt.arrayIndices=Dt.arrayIndices.filter((function(e){return e[0]in E&&e[1]in E})),Dt.arrayIndices.length){case 0:var Ft;Pt[null!==(Ft=Dt.center.basePairType)&&void 0!==Ft?Ft:"undefined"].centerData.push(Dt);break;case 1:var Bt=Dt.arrayIndices[0];Jn(E[Bt[0]].indices,E[Bt[1]].indices,Dt.center.basePairType);break;default:kt.push(Dt)}}}catch(Zt){Lt.e(Zt)}finally{Lt.f()}var Wt,zt=m(lt);try{for(zt.s();!(Wt=zt.n()).done;){var Ut,Gt=Pt[Wt.value],Ht=Gt.centerData,Kt=m(Gt.lineData);try{for(Kt.s();!(Ut=Kt.n()).done;){tt(Ut.value.line,sn.loose,ln.line)}}catch(Zt){Kt.e(Zt)}finally{Kt.f()}var Vt,qt=m(Ht);try{for(qt.s();!(Vt=qt.n()).done;){ot(Vt.value.center,sn.loose,ln.center)}}catch(Zt){qt.e(Zt)}finally{qt.f()}}}catch(Zt){zt.e(Zt)}finally{zt.f()}At.push.apply(At,v(qn.tooManyCandidateBasePairs.lineDataWithIndices)),kt.push.apply(kt,v(qn.tooManyCandidateBasePairs.centerDataWithIndices));var Qt=[].concat(v(At.map((function(e){var n=e.line,t=e.arrayIndices;return{center:d(d({},F(O(n.v0,n.v1),.5)),{},{basePairType:n.basePairType}),arrayIndices:t}}))),kt);Qt.sort((function(e,n){return e.arrayIndices.length-n.arrayIndices.length}));var Xt,Yt=m(Qt);try{var $t=function(){var e,n=Xt.value,t=n.center,r=n.arrayIndices,o=Qn[null!==(e=t.basePairType)&&void 0!==e?e:"undefined"];if(0===(r=r.filter((function(e){if(!(e[0]in E))return!1;if(!(e[1]in E))return!1;var n=E[e[0]],t=E[e[1]],r=Q(n.singularNucleotideProps,t.singularNucleotideProps);return!(r<.95*o.minimum)&&!(r>1.05*o.maximum)}))).length)return console.error("Base pairing failed."),"continue";for(var a=r.map((function(e){var n=E[e[0]],r=E[e[1]];return{distanceSquared:q(F(O(n.singularNucleotideProps,r.singularNucleotideProps),.5),t),indices0:n.indices,indices1:r.indices}})),i=a[0],l=1;l<a.length;l++){var s=a[l];s.distanceSquared<i.distanceSquared&&(i=s)}Jn(i.indices0,i.indices1,t.basePairType)};for(Yt.s();!(Xt=Yt.n()).done;)$t()}catch(Zt){Yt.e(Zt)}finally{Yt.f()}},c=0,f=Object.entries(e);c<f.length;c++)s();for(var p=0,h=Object.values(e);p<h.length;p++)for(var x=h[p],g=0,b=Object.values(x.rnaMoleculeProps);g<b.length;g++)for(var N=b[g],I=0,C=Object.values(N.nucleotideProps);I<C.length;I++){var S=C[I];if(S.y*=-1,void 0!==S.labelContentProps&&(S.labelContentProps.y*=-1),void 0!==S.labelLineProps){var E,w=m(S.labelLineProps.points);try{for(w.s();!(E=w.n()).done;){E.value.y*=-1}}catch(A){w.e(A)}finally{w.f()}}}}var dn=function(e){return e.SCENE="scene",e.RNA_COMPLEX="rna_complex",e.RNA_MOLECULE="rna_molecule",e.NUCLEOTIDE="nucleotide",e.LABEL_LINE="label_line",e.LABEL_CONTENT="label_content",e.BASE_PAIR="base_pair",e.PATH="path",e.CENTERLINE="centerline",e}({}),fn=Object.values(dn);var pn=function(e){return e.LETTERS="Letters",e.LABELS_LINES="Labels_Lines",e.LABELS_TEXT="Labels_Text",e.BASE_PAIR_LINES="Nucleotide_Lines",e.BASE_PAIR_CIRCLES="Nucleotide_Circles",e}(pn||{}),hn=(Object.values(pn),function(e){return e.XRNA_JS="xrna.js",e.XRNA_GT="xrna_gt",e.UNFORMATTED="unformatted",e}(hn||{})),vn="data-xrna_type",mn="data-xrna_rna_complex_name",xn="data-xrna_rna_molecule_name",gn="data-xrna_rna_molecule_first_nucleotide_index",yn="data-xrna_formatted_nucleotide_index",bn="data-xrna_base_pair_rna_molecule_name_0",Nn="data-xrna_base_pair_rna_molecule_name_1",In="data-xrna_base_pair_formatted_nucleotide_index",Cn="data-xrna_base_pair_formatted_nucleotide_index_0",Sn="data-xrna_base_pair_formatted_nucleotide_index_1",En="data-xrna_base_pair_type",wn="data-xrna_scene_name",An="data-xrna_relative_coordinates_flag",kn=!0,Pn="data-xrna_invert_y_axis_flag",Tn=!1,Mn="rectangle_width",Rn="rectangle_height",_n=/matrix\(1\s+0\s+0\s+1\s+(-?[\d.]+)\s+(-?[\d.]+)\)/,jn={defaults:{}};function On(e,n,t){var r,o=e.getAttribute(vn);if(null!==o&&(r=o,!fn.includes(r)))throw'Unrecognized SvgXrnaDataType "'.concat(o,'"');var a,i=d({},jn.root),l=m(e.classList);try{for(l.s();!(a=l.n()).done;){var s=a.value;s in jn.defaults&&(i=d(d({},i),jn.defaults[s]))}}catch(wr){l.e(wr)}finally{l.f()}if(e.tagName in jn){var u,c=jn[e.tagName],f=m(e.classList);try{for(f.s();!(u=f.n()).done;){var p=u.value;if(p in c){var h=c[p];i=d(d({},i),h)}}}catch(wr){f.e(wr)}finally{f.f()}}switch(t){case hn.XRNA_JS:if(null===o)e.tagName;else{var v,x=null!==(v=n.invertYAxisFlag)&&void 0!==v?v:Tn;switch(o){case dn.SCENE:var g=e.getAttribute(wn);if(null===g)throw'Required SVG-element property "'.concat(wn,'" is missing.');n.complexDocumentName=g;var b=e.getAttribute(An);if(null==b)throw'Required SVG-element property "'.concat(An,'" is missing.');n.relativeCoordinatesFlag="true"===b;var N=e.getAttribute(Pn);if(null==N)throw'Required SVG-element property "'.concat(Pn,'" is missing.');n.invertYAxisFlag="true"===N;break;case dn.RNA_COMPLEX:var I=e.getAttribute(mn);if(null===I)throw'Required SVG-element property "'.concat(mn,'" is missing.');n.singularRnaComplexProps={name:I,rnaMoleculeProps:{},basePairs:{}};var C=n.rnaComplexProps.length;n.rnaComplexPropsByName[I]=n.singularRnaComplexProps;var S=[];n.labelLinesPerRnaComplex=S,n.labelLines[C]=S;var E=[];n.labelContentsPerRnaComplex=E,n.labelContents[C]=E,n.rnaComplexProps.push(n.singularRnaComplexProps),n.temporaryBasePairsPerRnaComplex=[];break;case dn.BASE_PAIR:var w=e.getAttribute(mn);if(null===w)throw'Required SVG-element property "'.concat(mn,'" is missing.');var A=e.getAttribute(bn);if(null===A)throw'Required SVG-element property "'.concat(bn,'" is missing.');var k=e.getAttribute(Cn);if(null===k)throw'Required SVG-element property "'.concat(Cn,'" is missing.');var P=e.getAttribute(Nn);if(null===P)throw'Required SVG-element property "'.concat(Nn,'" is missing.');var T=e.getAttribute(Sn);if(null===T)throw'Required SVG-element property "'.concat(Sn,'" is missing.');var M=e.getAttribute(En);if(null===M)throw'Required SVG-element property "'.concat(En,'" is missing.');if(!nt(M))throw'Unrecognized BasePair.Type "'.concat(M,'"');var R={rnaMoleculeName0:A,formattedNucleotideIndex0:Number.parseInt(k),rnaMoleculeName1:P,formattedNucleotideIndex1:Number.parseInt(T),basePairType:M},_=e.getAttribute("stroke");null!==_&&"none"!==_&&(R.color=_e(_));var j=e.getAttribute("fill");null!==j&&"none"!==j&&(R.color=_e(j));var O=e.getAttribute("stroke-width");null!==O&&(R.strokeWidth=Number.parseFloat(O)),w in n.temporaryBasePairsPerRnaComplexName||(n.temporaryBasePairsPerRnaComplexName[w]=[]),n.temporaryBasePairsPerRnaComplexName[w].push(R);break;case dn.RNA_MOLECULE:var L=e.getAttribute(gn);if(null===L)throw'Required SVG-element property "'.concat(gn,'" is missing.');n.singularRnaMoleculeProps={firstNucleotideIndex:Number.parseInt(L),nucleotideProps:{}};var D=e.getAttribute(xn);if(null===D)throw'Required SVG-element property "'.concat(xn,'" is missing.');if(void 0===n.singularRnaComplexProps)throw"cache.singularRnaComplexProps should not be undefined at this point. The input SVG file is broken.";n.singularRnaComplexProps.rnaMoleculeProps[D]=n.singularRnaMoleculeProps;break;case dn.NUCLEOTIDE:var F=e.getAttribute(mn);if(null===F)throw'Required SVG-element property "'.concat(mn,'" is missing.');if(!(F in n.rnaComplexPropsByName)){var B={name:F,rnaMoleculeProps:{},basePairs:{}};n.rnaComplexPropsByName[F]=B,n.rnaComplexProps.push(B)}var W=n.rnaComplexPropsByName[F],z=e.getAttribute(xn);if(null===z)throw'Required SVG-element property "'.concat(xn,'" is missing.');var U=e.getAttribute(gn);if(null===U)throw'Required SVG-element property "'.concat(gn,'" is missing.');var G=Number.parseInt(U);if(!(z in W.rnaMoleculeProps)){var H={firstNucleotideIndex:G,nucleotideProps:{}};W.rnaMoleculeProps[z]=H}var K=W.rnaMoleculeProps[z],V=e.getAttribute("transform");if(null===V)throw'Required SVG-element property "transform" is missing.';var q=on(V),Q=e.getAttribute(yn);if(null===Q)throw'Required SVG-element property "'.concat(yn,'" is missing.');var X=Number.parseInt(Q),Y=e.textContent;if(null===Y)throw'Required SVG-element property "textContent" is missing.';if(!Xn.isSymbol(Y))throw'"'.concat(Y,'" is not a valid nucleotide symbol.');var $=q[4],Z=q[5];x&&(Z*=-1);var J={x:$,y:Z,symbol:Y};K.nucleotideProps[X-G]=J;var ee=structuredClone(qe.DEFAULT);J.font=ee;var ne=e.getAttribute("font-style");null!==ne?ee.style=ne:void 0!==i.style&&(ee.style=i.style);var te=e.getAttribute("font-weight");null!==te?ee.weight=te:void 0!==i.weight&&(ee.weight=i.weight);var re=e.getAttribute("font-family");null!==re?ee.family=re:void 0!==i.family&&(ee.family=i.family);var oe=e.getAttribute("font-size");null!==oe?ee.size=oe:void 0!==i.size&&(ee.size=i.size);var ae=e.getAttribute("stroke-width");null!==ae?J.strokeWidth=Number.parseFloat(ae):void 0!==i.strokeWidth&&(J.strokeWidth=i.strokeWidth);var ie=e.getAttribute("fill");null!==ie?J.color=_e(ie):void 0!==i.fill&&(J.color=i.fill);break;case dn.LABEL_LINE:var le=Array.from(e.children).filter((function(e){return"polyline"===e.tagName}));if(1!==le.length)throw"Label-line SVG groups must have exactly one polyline child element.";var se=le[0].getAttribute("points");if(null===se)throw'Required SVG-element property "points" is missing.';var ue=new Array;ue=se.split(/\s+/).map((function(e){var n=e.match(/(-?[\d.]+),\s*(-?[\d.]+)/);if(null===n)throw'Required SVG element property "points" does not match the expected format';var t=Number.parseFloat(n[1]),r=Number.parseFloat(n[2]);return x&&(r*=-1),{x:t,y:r}}));var ce=e.getAttribute("stroke"),de=we;null!==ce?de=_e(ce):void 0!==i.stroke&&(de=i.stroke);var fe=Qe,pe=e.getAttribute("stroke-width");null!==pe?fe=Number.parseFloat(pe):void 0!==i.strokeWidth&&(fe=i.strokeWidth);var he={points:ue,color:de,strokeWidth:fe},ve=e.getAttribute(mn);if(null===ve)throw'Required SVG-element property "'.concat(mn,'" is missing.');var me=e.getAttribute(xn);if(null===me)throw'Required SVG-element property "'.concat(xn,'" is missing.');var xe=e.getAttribute(In);if(null===xe)throw'Required SVG-element property "'.concat(In,'" is missing.');var ge=Number.parseInt(xe);ve in n.temporaryLabelData||(n.temporaryLabelData[ve]={});var ye=n.temporaryLabelData[ve];me in ye||(ye[me]={});var be=ye[me];ge in be||(be[ge]={}),be[ge].labelLineProps=he;break;case dn.LABEL_CONTENT:var Ne=e.textContent;if(null===Ne)throw'Required SVG-element property "textContent" is missing.';var Ie=e.getAttribute("transform");if(null===Ie)throw'Required SVG-element property "transform" is missing.';var Ce=on(Ie),Se=structuredClone(qe.DEFAULT),Ee=e.getAttribute("font-size");null!==Ee?Se.size=Ee:void 0!==i.size&&(Se.size=i.size);var Ae=e.getAttribute("font-style");null!==Ae?Se.style=Ae:void 0!==i.style&&(Se.style=i.style);var ke=e.getAttribute("font-weight");null!==ke?Se.weight=ke:void 0!==i.weight&&(Se.weight=i.weight);var Pe=e.getAttribute("font-family");null!==Pe?Se.family=Pe:void 0!==i.family&&(Se.family=i.family);var Te=Ce[4],Me=Ce[5];x&&(Me*=-1);var Re={content:Ne,x:Te,y:Me,font:Se},je=e.getAttribute("fill");null!==je?Re.color=_e(je):void 0!==i.fill&&(Re.color=i.fill);var Oe=e.getAttribute("stroke-width");null!==Oe?Re.strokeWidth=Number.parseFloat(Oe):void 0!==i.strokeWidth&&(Re.strokeWidth=i.strokeWidth);var Le=e.getAttribute(mn);if(null===Le)throw'Required SVG-element property "'.concat(mn,'" is missing.');var De=e.getAttribute(xn);if(null===De)throw'Required SVG-element property "'.concat(xn,'" is missing.');var Fe=e.getAttribute(In);if(null===Fe)throw'Required SVG-element property "'.concat(In,'" is missing.');var Be=Number.parseInt(Fe);Le in n.temporaryLabelData||(n.temporaryLabelData[Le]={});var We=n.temporaryLabelData[Le];De in We||(We[De]={});var ze=We[De];Be in ze||(ze[Be]={}),ze[Be].labelContentProps=Re;break;case dn.PATH:case dn.CENTERLINE:break;default:throw'Unrecognized SvgXrnaDataType "'.concat(o,'"')}}break;case hn.XRNA_GT:switch(e.tagName){case"g":var Ue=e.getAttribute("id");if(n.mostRecentGroupId=null!==Ue&&void 0!==Ue?Ue:void 0,Ue===pn.LETTERS){n.rnaMoleculeCount++;var Ge="RNA molecule #".concat(n.rnaMoleculeCount);n.currentRnaMoleculeName=Ge,n.singularRnaComplexProps.rnaMoleculeProps[Ge]={nucleotideProps:{},firstNucleotideIndex:0};var He=n.graphicalAdjustmentsPerRnaComplex;He[Ge]={},n.graphicalAdjustmentsPerRnaMolecule=He[Ge]}break;case"text":switch(n.mostRecentGroupId){case pn.LETTERS:for(var Ve={id:e.getAttribute("id"),transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(Mn),rectangleHeight:e.getAttribute(Rn)},Xe=0,Ye=Object.entries(Ve);Xe<Ye.length;Xe++){var $e=y(Ye[Xe],2),Ze=$e[0];if(null===$e[1])throw'Required SVG attribute "'.concat(Ze,'" is missing.')}var Je=Ve.id,en=Number.NaN;if(/^-?\d+$/.test(Je))en=Number.parseInt(Je);else{var nn=Je.match(/^(\w+)_(\w+):(\d+)$/);if(null===nn)throw'Unrecognized nucleotide-index format "'.concat(Je,'"');n.currentRnaMoleculeName=nn[2],en=Number.parseInt(nn[3])}var tn=Ve.textContent.trim();if(!Xn.isSymbol(tn))throw'Unrecognized nucleotide symbol "'.concat(tn,'"');var rn=Ve.transform,an=rn.match(_n);if(null===an)throw'Unrecognized transform format "'.concat(rn,'"');var ln={symbol:tn,x:Number.parseFloat(an[1]),y:Number.parseFloat(an[2])},sn={fill:e.getAttribute("fill"),fontFamily:e.getAttribute("font-family"),fontWeight:e.getAttribute("font-weight"),fontStyle:e.getAttribute("font-style"),fontSize:e.getAttribute("font-size")};null!==sn.fill&&(ln.color=_e(sn.fill));var un=structuredClone(qe.DEFAULT);ln.font=un,null!==sn.fontFamily&&(un.family=sn.fontFamily),null!==sn.fontWeight&&(un.weight=sn.fontWeight),null!==sn.fontStyle&&(un.style=sn.fontStyle),null!==sn.fontSize&&(un.size=Ke(sn.fontSize));var cn=Jn({width:Number.parseFloat(Ve.rectangleWidth),height:Number.parseFloat(Ve.rectangleHeight)}),kn=n.currentRnaMoleculeName;if(void 0===kn)throw"cache.currentRnaMoleculeName should not be undefined at this point.";if(!(kn in n.singularRnaComplexProps.rnaMoleculeProps)){var Ln={firstNucleotideIndex:0,nucleotideProps:{}};n.singularRnaMoleculeProps=Ln,n.singularRnaComplexProps.rnaMoleculeProps[kn]=Ln;var Dn={};n.graphicalAdjustmentsPerRnaMolecule=Dn,n.graphicalAdjustmentsPerRnaComplex[kn]=Dn}n.singularRnaMoleculeProps.nucleotideProps[en]=ln,n.graphicalAdjustmentsPerRnaMolecule[en]=cn;break;case pn.LABELS_TEXT:for(var Fn={transform:e.getAttribute("transform"),textContent:e.textContent,rectangleWidth:e.getAttribute(Mn),rectangleHeight:e.getAttribute(Rn)},Bn=0,Wn=Object.entries(Fn);Bn<Wn.length;Bn++){var zn=y(Wn[Bn],2),Un=zn[0];if(null===zn[1])throw'Required SVG attribute "'.concat(Un,'" is missing.')}Fn.textContent=Fn.textContent.trim();var Gn=Fn.transform,Hn=Gn.match(_n);if(null===Hn)throw"Unrecognized transform format ".concat(Gn);var Kn={fontFamily:e.getAttribute("font-family"),fontStyle:e.getAttribute("font-style"),fontWeight:e.getAttribute("font-weight"),fontSize:e.getAttribute("font-size"),color:e.getAttribute("fill")},Vn=structuredClone(qe.DEFAULT);null!==Kn.fontFamily&&(Vn.family=Kn.fontFamily),null!==Kn.fontStyle&&(Vn.style=Kn.fontStyle),null!==Kn.fontWeight&&(Vn.weight=Kn.fontWeight),null!==Kn.fontSize&&(Vn.size=Ke(Kn.fontSize));var qn=structuredClone(we);null!==Kn.color&&(qn=_e(Kn.color));var Qn=Number.parseFloat(Hn[1]),Yn=Number.parseFloat(Hn[2]),$n=Number.parseFloat(Fn.rectangleWidth),Zn=Number.parseFloat(Fn.rectangleHeight);n.labelContentsPerRnaComplex.push({labelContent:{content:Fn.textContent,x:Qn,y:Yn,font:Vn,color:qn},rectangle:{width:$n,height:Zn}})}break;case"line":for(var et={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")},tt=0,ot=Object.entries(et);tt<ot.length;tt++){var at=y(ot[tt],2),it=at[0];if(null===at[1])throw"Required SVG property ".concat(it," is missing.")}var lt={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},st=we;null!==lt.color&&(st=_e(lt.color));var ut=Qe;null!==lt.strokeWidth&&(ut=Number.parseFloat(lt.strokeWidth));var ct={x:Number.parseFloat(et.x1),y:Number.parseFloat(et.y1)},dt={x:Number.parseFloat(et.x2),y:Number.parseFloat(et.y2)};switch(n.mostRecentGroupId){case pn.BASE_PAIR_LINES:n.basePairLinesPerRnaComplex.push({v0:ct,v1:dt,basePairType:rt.Type.CANONICAL,color:st,strokeWidth:ut});break;case pn.LABELS_LINES:n.labelLinesPerRnaComplex.push({v0:ct,v1:dt,color:st,strokeWidth:ut})}break;case"circle":if(n.mostRecentGroupId===pn.BASE_PAIR_CIRCLES){for(var ft={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")},pt=0,ht=Object.entries(ft);pt<ht.length;pt++){var vt=y(ht[pt],2),mt=vt[0];if(null===vt[1])throw'Required SVG attribute "'.concat(mt,'" is missing.')}var xt={fill:e.getAttribute("fill")};null!==xt.fill&&(xt.fill=xt.fill.trim());var gt=null===xt.fill?rt.Type.MISMATCH:rt.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(ft.cx),y:Number.parseFloat(ft.cy),basePairType:gt})}}break;case hn.UNFORMATTED:switch(e.tagName){case"circle":for(var yt,bt,Nt={cx:e.getAttribute("cx"),cy:e.getAttribute("cy")},It=0,Ct=Object.entries(Nt);It<Ct.length;It++){var St=y(Ct[It],2),Et=St[0];if(null===St[1])throw'Required SVG attribute "'.concat(Et,'" is missing.')}var wt={fill:e.getAttribute("fill")},At=void 0;null!==wt.fill&&(wt.fill=wt.fill.trim(),At=_e(wt.fill));var kt=null===wt.fill?rt.Type.MISMATCH:rt.Type.WOBBLE;n.basePairCentersPerRnaComplex.push({x:Number.parseFloat(Nt.cx),y:Number.parseFloat(Nt.cy),basePairType:kt,color:null!==(yt=null!==(bt=At)&&void 0!==bt?bt:i.fill)&&void 0!==yt?yt:i.stroke});break;case"text":for(var Pt,Tt,Mt,Rt,_t,jt,Ot,Lt={textContent:e.textContent},Dt=Lt.textContent.trim(),Ft=0,Bt=Object.entries(Lt);Ft<Bt.length;Ft++){var Wt=y(Bt[Ft],2),zt=Wt[0];if(null===Wt[1])throw'Required SVG attribute "'.concat(zt,'" is missing.')}var Ut={transform:e.getAttribute("transform"),x:e.getAttribute("x"),y:e.getAttribute("y"),fontFamily:null!==(Pt=e.getAttribute("font-family"))&&void 0!==Pt?Pt:i.family,fontStyle:null!==(Tt=e.getAttribute("font-style"))&&void 0!==Tt?Tt:i.style,fontWeight:null!==(Mt=e.getAttribute("font-weight"))&&void 0!==Mt?Mt:i.weight,fontSize:null!==(Rt=e.getAttribute("font-size"))&&void 0!==Rt?Rt:i.size,color:null!==(_t=null!==(jt=e.getAttribute("fill"))&&void 0!==jt?jt:i.fill)&&void 0!==_t?_t:i.stroke,strokeWidth:null!==(Ot=e.getAttribute("stroke-width"))&&void 0!==Ot?Ot:i.strokeWidth},Gt=structuredClone(qe.DEFAULT);Ut.fontFamily&&(Gt.family=Ut.fontFamily),Ut.fontStyle&&(Gt.style=Ut.fontStyle),Ut.fontWeight&&(Gt.weight=Ut.fontWeight),Ut.fontSize&&("number"==typeof Ut.fontSize?Gt.size=Ut.fontSize:Gt.size=Ke(Ut.fontSize));var Ht=structuredClone(we);Ut.color&&(Ht="object"==typeof Ut.color?Ut.color:_e(Ut.color));var Kt=0,Vt=0;if(null!==Ut.transform){var qt=Ut.transform.match(_n);null!==qt&&(Kt=Number.parseFloat(qt[1]),Vt=Number.parseFloat(qt[2]))}null!==Ut.x&&(Kt=Number.parseFloat(Ut.x)),null!==Ut.y&&(Vt=Number.parseFloat(Ut.y));var Qt=Qe;if(Ut.strokeWidth&&(Qt="number"==typeof Ut.strokeWidth?Ut.strokeWidth:Number.parseFloat(Ut.strokeWidth)),Xn.isSymbol(Dt)){var Xt={x:Kt,y:Vt,symbol:Dt,color:Ht,strokeWidth:Qt,font:Gt};n.singularRnaMoleculeProps.nucleotideProps[n.nucleotideCount]=Xt,n.nucleotideCount++}else{var Yt=e.getAttribute(Mn);if(null===Yt)throw'Required SVG property "'.concat(Mn,'" is missing.');var $t=e.getAttribute(Rn);if(null===$t)throw'Required SVG property "'.concat(Rn,'" is missing.');n.labelContentsPerRnaComplex.push({labelContent:{x:Kt,y:Vt,content:Dt,font:Gt,color:Ht,strokeWidth:Qt},rectangle:{width:Number.parseFloat(Yt),height:Number.parseFloat($t)}})}break;case"line":for(var Zt={x1:e.getAttribute("x1"),y1:e.getAttribute("y1"),x2:e.getAttribute("x2"),y2:e.getAttribute("y2")},Jt=0,er=Object.entries(Zt);Jt<er.length;Jt++){var nr=y(er[Jt],2),tr=nr[0];if(null===nr[1])throw"Required SVG property ".concat(tr," is missing.")}var rr={color:e.getAttribute("stroke"),strokeWidth:e.getAttribute("stroke-width")},or=we;null!==rr.color&&(or=_e(rr.color));var ar=Qe;null!==rr.strokeWidth&&(ar=Number.parseFloat(rr.strokeWidth));var ir={x:Number.parseFloat(Zt.x1),y:Number.parseFloat(Zt.y1)},lr={x:Number.parseFloat(Zt.x2),y:Number.parseFloat(Zt.y2)};n.basePairLinesPerRnaComplex.push({v0:ir,v1:lr,basePairType:rt.Type.CANONICAL,color:or,strokeWidth:ar}),n.labelLinesPerRnaComplex.push({v0:ir,v1:lr,color:or,strokeWidth:ar})}break;default:throw"Unhandled switch case."}var sr=Array.from(e.children);n.parentSvgXrnaDataType=null!==o&&void 0!==o?o:void 0;for(var ur=0,cr=sr;ur<cr.length;ur++){On(cr[ur],n,t)}if(o===dn.RNA_COMPLEX){var dr,fr=n.singularRnaComplexProps,pr=m(n.temporaryBasePairsPerRnaComplex);try{for(pr.s();!(dr=pr.n()).done;){var hr=dr.value,vr=hr.rnaMoleculeName0,mr=hr.formattedNucleotideIndex0,xr=hr.rnaMoleculeName1,gr=hr.formattedNucleotideIndex1,yr=hr.basePairType,br=hr.color,Nr=hr.strokeWidth;if(!(vr in fr.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(vr,'"');var Ir=fr.rnaMoleculeProps[vr],Cr=mr-Ir.firstNucleotideIndex;if(!(Cr in Ir.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(mr);if(!(xr in fr.rnaMoleculeProps))throw'Missing RNA molecule with the name "'.concat(xr,'"');var Sr=fr.rnaMoleculeProps[xr],Er=gr-Sr.firstNucleotideIndex;if(!(Er in Sr.nucleotideProps))throw"Missing nucleotide with the formatted index #".concat(gr);ro(fr,vr,Cr,xr,Er,to.DO_NOTHING,{basePairType:yr,strokeWidth:Nr,color:br})}}catch(wr){pr.e(wr)}finally{pr.f()}}}function Ln(e){var n={},t=e.split(";");t=t.filter((function(e){return!e.match(/^\s*$/)}));var r,o=m(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=v(a.matchAll(/:/g)).map((function(e){return e.index}));if(1!==i.length)throw"Multiple colons found within style string.";var l=i[0],s=a.substring(0,l).trim(),u=a.substring(l+1).trim();switch(s){case"fill":n.fill=_e(u);break;case"stroke":n.stroke=_e(u);break;case"stroke-width":n.strokeWidth=Number.parseFloat(u);break;case"font-size":n.size=u;break;case"font-weight":n.weight=u;break;case"font-family":n.family=u}}}catch(c){o.e(c)}finally{o.f()}return n}var Dn,Fn,Bn,Wn,zn,Un,Gn=t(184);!function(n){function t(n){var t,r=n.content,o=n.x,a=n.y,i=n.fullKeys,l=n.id,s=(i.rnaComplexIndex,i.rnaMoleculeName),c=i.nucleotideIndex,f=(0,e.createRef)(),p=(0,e.useContext)(zr.Label.Content.OnMouseDownHelper),h=(0,e.useContext)(zr.Label.ClassName),v=(0,e.useContext)(zr.App.SetMouseOverText),m=(0,e.useContext)(zr.RnaMolecule.FirstNucleotideIndex),x=(0,e.useContext)(zr.RnaComplex.Name),g=(0,e.useContext)(zr.Nucleotide.Symbol),b=y((0,e.useState)({width:0,height:0}),2),N=b[0],I=b[1],C=y((0,e.useState)({x:0,y:0}),2),S=C[0],E=C[1],w=(0,e.useMemo)((function(){var e;return null!==(e=n.color)&&void 0!==e?e:we}),[n.color]),A=(0,e.useMemo)((function(){var e;return null!==(e=n.strokeWidth)&&void 0!==e?e:Qe}),[n.strokeWidth]),k=(0,e.useMemo)((function(){var e;return null!==(e=n.font)&&void 0!==e?e:structuredClone(qe.DEFAULT)}),[n.font]);return(0,e.useEffect)((function(){var e=f.current.getBBox();I({width:e.width,height:e.height})}),[r,k.size]),(0,e.useEffect)((function(){E({x:-.5*N.width,y:-.25*N.height})}),[N]),(0,Gn.jsx)("text",d(d({},(u(t={},vn,dn.LABEL_CONTENT),u(t,mn,x),u(t,xn,s),u(t,In,c+m),t)),{},{id:l,ref:f,transform:"translate(".concat(o,", ").concat(a,") translate(").concat(S.x,", ").concat(S.y,") scale(1 -1)"),className:h+" noselect",fontSize:k.size,fontFamily:k.family,fontWeight:k.weight,fontStyle:k.style,strokeWidth:A,fill:ke(w),onMouseDown:function(e){p(e,i),e.preventDefault()},onMouseOver:function(e){v("nucleotide: ".concat(m+c,"\n")+"symbol:     ".concat(g,"\n")+"molecule:   ".concat(s,"\n")+"complex:    ".concat(x,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){v("")},children:r}))}n.Component=t;n.MemoizedComponent=(0,e.memo)(t)}(Dn||(Dn={})),function(n){function t(n){var t,r=n.fullKeys,o=n.points,a=n.id,i=(0,e.useContext)(zr.Label.Line.Body.OnMouseDownHelper),l=(0,e.useContext)(zr.Label.Line.Endpoint.OnMouseDownHelper),s=(0,e.useContext)(zr.Label.ClassName),c=(0,e.useContext)(zr.App.SetMouseOverText),f=(0,e.useContext)(zr.RnaMolecule.FirstNucleotideIndex),p=(0,e.useContext)(zr.RnaComplex.Name),h=(0,e.useContext)(zr.Nucleotide.Symbol),v=r.nucleotideIndex,m=r.rnaMoleculeName,x=(r.rnaComplexIndex,y((0,e.useState)({pathDAttribute:"",polylinePointsAttribute:""}),2)),g=x[0],b=x[1];function N(){for(var e=o[0],n=e,t=new Array,r=1;r<o.length;r++)n=o[r],t.push(_(e,n)),e=n;b({pathDAttribute:t.join(" "),polylinePointsAttribute:o.map((function(e){var n=e.x,t=e.y;return"".concat(n,",").concat(t)})).join(" ")})}(0,e.useEffect)(N,[o]);var I=(0,e.useMemo)((function(){var e;return null!==(e=n.color)&&void 0!==e?e:we}),[n.color]),C=(0,e.useMemo)((function(){var e;return null!==(e=n.strokeWidth)&&void 0!==e?e:Qe}),[n.strokeWidth]);return(0,Gn.jsxs)("g",d(d({},(u(t={},vn,dn.LABEL_LINE),u(t,mn,p),u(t,xn,m),u(t,In,v+f),t)),{},{children:[(0,Gn.jsx)("polyline",{points:g.polylinePointsAttribute,pointerEvents:"none",stroke:ke(I),strokeWidth:C,fill:"none"}),o.map((function(e,n){return(0,Gn.jsx)("circle",{id:a,className:s,pointerEvents:"all",strokeWidth:Qe,fill:"none",cx:e.x,cy:e.y,r:1,onMouseDown:function(e){l(e,r,n,N)},onMouseOver:function(e){c("nucleotide: ".concat(f+v,"\n")+"symbol:     ".concat(h,"\n")+"molecule:   ".concat(m,"\n")+"complex:    ".concat(p,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){c("")}},n)})),(0,Gn.jsx)("path",{className:s,pointerEvents:"all",strokeWidth:Qe,fill:"none",d:g.pathDAttribute,onMouseDown:function(e){i(e,r,N),e.preventDefault()},onMouseOver:function(e){c("nucleotide: ".concat(f+v,"\n")+"symbol:     ".concat(h,"\n")+"molecule:   ".concat(m,"\n")+"complex:    ".concat(p,"\n")+"tip:        Ctrl+click to delete")},onMouseLeave:function(){c("")}})]}))}n.Component=t;n.MemoizedComponent=(0,e.memo)(t)}(Fn||(Fn={}));var Hn=function(e){return e.COPY_FILE_NAME="copy_file_name",e.COPY_FILE_EXTENSION="copy_file_extension",e.RESET_VIEWPORT_AFTER_FILE_UPLOAD="reset_viewport_after_file_upload",e.USE_DEGREES="use_degrees",e.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING="reposition_nucleotides_when_formatting",e.AUTOMATICALLY_REPOSITION_ANNOTATIONS="automatically_reposition_annotations",e.CANONICAL_BASE_PAIR_DISTANCE="canonical_base_pair_distance",e.WOBBLE_BASE_PAIR_DISTANCE="wobble_base_pair_distance",e.MISMATCH_BASE_PAIR_DISTANCE="mismatch_base_pair_distance",e.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS="distance_between_contiguous_base_pairs",e.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE="replace_nucleotides_with_contour_line",e.CONTOUR_LINE_WIDTH="contour_line_width",e.PATH_MODE="path_mode",e.PATH_LINE_WIDTH="path_line_width",e.DARK_MODE="dark_mode",e.DISABLE_NAVIGATE_AWAY_PROMPT="disable_navigate_away_prompt",e.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED="treat_non_canonical_base_pairs_as_unpaired",e.BASE_PAIR_RADIUS="base_pair_radius",e.GRID_ENABLED="grid_enabled",e.GRID_HORIZONTAL_LINES="grid_horizontal_lines",e.GRID_VERTICAL_LINES="grid_vertical_lines",e.GRID_LEFT_RIGHT_DIAGONAL="grid_left_right_diagonal",e.GRID_RIGHT_LEFT_DIAGONAL="grid_right_left_diagonal",e.GRID_CONCENTRIC_CIRCLES="grid_concentric_circles",e.GRID_DOTTED="grid_dotted",e.GRID_SPACING="grid_spacing",e.GRID_COLOR="grid_color",e.CANVAS_COLOR="canvas_color",e}({}),Kn=Object.values(Hn),Vn=(u(Bn={},Hn.COPY_FILE_NAME,"Copy input-file names to output-file names"),u(Bn,Hn.COPY_FILE_EXTENSION,"Copy input-file extensions to downloadable output files"),u(Bn,Hn.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset viewport after file upload"),u(Bn,Hn.USE_DEGREES,"Use degrees"),u(Bn,Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when editing"),u(Bn,Hn.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),u(Bn,Hn.CANONICAL_BASE_PAIR_DISTANCE,"Canonical base-pair distance"),u(Bn,Hn.WOBBLE_BASE_PAIR_DISTANCE,"Wobble base-pair distance"),u(Bn,Hn.MISMATCH_BASE_PAIR_DISTANCE,"Mismatch base-pair distance"),u(Bn,Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"Distance between contiguous base pairs"),u(Bn,Hn.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Replace nucleotides with contour line"),u(Bn,Hn.CONTOUR_LINE_WIDTH,"Contour-line width"),u(Bn,Hn.PATH_MODE,"Path mode (show lines, hide nucleotide text)"),u(Bn,Hn.PATH_LINE_WIDTH,"Path-line width"),u(Bn,Hn.DARK_MODE,"Dark mode"),u(Bn,Hn.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the navigate-away prompt"),u(Bn,Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Treat non-canonical base pairs as unpaired (when editing and formatting)"),u(Bn,Hn.BASE_PAIR_RADIUS,"Radius of base-pair circles"),u(Bn,Hn.GRID_ENABLED,"Enable canvas grid"),u(Bn,Hn.GRID_HORIZONTAL_LINES,"Show horizontal grid lines"),u(Bn,Hn.GRID_VERTICAL_LINES,"Show vertical grid lines"),u(Bn,Hn.GRID_LEFT_RIGHT_DIAGONAL,"Show left-to-right diagonal lines"),u(Bn,Hn.GRID_RIGHT_LEFT_DIAGONAL,"Show right-to-left diagonal lines"),u(Bn,Hn.GRID_CONCENTRIC_CIRCLES,"Show concentric circles"),u(Bn,Hn.GRID_DOTTED,"Show dotted grid pattern"),u(Bn,Hn.GRID_SPACING,"Grid line spacing"),u(Bn,Hn.GRID_COLOR,"Grid color"),u(Bn,Hn.CANVAS_COLOR,"Canvas background color"),Bn),qn=(u(Wn={},Hn.COPY_FILE_NAME,"Copy the name from uploaded input files to downloadable output files"),u(Wn,Hn.COPY_FILE_EXTENSION,"Copy the extension from uploaded input files to downloadable output files (when supported)"),u(Wn,Hn.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"Reset the viewport translation and scale after parsing an input file"),u(Wn,Hn.USE_DEGREES,"Use degrees (instead of radians) when editing angles"),u(Wn,Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"Reposition annotations when their parent nucleotides are repositioned"),u(Wn,Hn.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"Reposition nucleotides when formatting"),u(Wn,Hn.CANONICAL_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "canonical." (i.e. Watson-Crick). Applied when formatting base pairs'),u(Wn,Hn.WOBBLE_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "wobble." Applied when formatting base pairs'),u(Wn,Hn.MISMATCH_BASE_PAIR_DISTANCE,'The default distance between base pairs which are "mismatch." Applied when formatting base pairs'),u(Wn,Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"The default distance between base pairs which are contiguous. Applied when formatting base pairs"),u(Wn,Hn.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"Display only a countour line per RNA molecule, instead of individual nucleotides"),u(Wn,Hn.CONTOUR_LINE_WIDTH,"Width of the contour line (applied when replacing nucleotides with a contour line)"),u(Wn,Hn.PATH_MODE,"Display lines tracing the centers of nucleotides while hiding the nucleotide text. This provides an abstracted view ideal for visualizing larger structures efficiently while keeping base pairs, labels, and other features visible."),u(Wn,Hn.PATH_LINE_WIDTH,"Width of the path line (applied when path mode is enabled)"),u(Wn,Hn.DARK_MODE,"Change background colors and scene colors to darken the scene"),u(Wn,Hn.DISABLE_NAVIGATE_AWAY_PROMPT,"Disable the prompt asking you to save your work, when you navigate away from this page"),u(Wn,Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"Disable editing and formatting of non-canonical base pairs."),u(Wn,Hn.BASE_PAIR_RADIUS,"Radius of base-pair circles (also affects dimensions of non-canonical base pairs)"),u(Wn,Hn.GRID_ENABLED,"Enable or disable the canvas grid system. When enabled, you can choose which grid types to display."),u(Wn,Hn.GRID_HORIZONTAL_LINES,"Display horizontal parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),u(Wn,Hn.GRID_VERTICAL_LINES,"Display vertical parallel lines across the canvas. These lines move with the viewport pan but maintain their spacing."),u(Wn,Hn.GRID_LEFT_RIGHT_DIAGONAL,"Display diagonal lines from top-left to bottom-right. These lines move with the viewport pan but maintain their spacing."),u(Wn,Hn.GRID_RIGHT_LEFT_DIAGONAL,"Display diagonal lines from top-right to bottom-left. These lines move with the viewport pan but maintain their spacing."),u(Wn,Hn.GRID_CONCENTRIC_CIRCLES,"Display concentric circles centered on the canvas. The radius between circles is controlled by the grid spacing setting."),u(Wn,Hn.GRID_DOTTED,"Display a dotted grid pattern across the canvas. The spacing between dots is controlled by the grid spacing setting."),u(Wn,Hn.GRID_SPACING,"Control the distance between parallel grid lines or the radius increment for concentric circles. Higher values create more spaced out grids."),u(Wn,Hn.GRID_COLOR,"Customize the color of all grid elements. Leave empty to use automatic theme-based colors."),u(Wn,Hn.CANVAS_COLOR,"Customize the canvas background color. Leave empty to use automatic theme-based colors."),Wn),Qn=(u(zn={},Hn.COPY_FILE_NAME,"boolean"),u(zn,Hn.COPY_FILE_EXTENSION,"boolean"),u(zn,Hn.RESET_VIEWPORT_AFTER_FILE_UPLOAD,"boolean"),u(zn,Hn.USE_DEGREES,"boolean"),u(zn,Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS,"boolean"),u(zn,Hn.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,"boolean"),u(zn,Hn.CANONICAL_BASE_PAIR_DISTANCE,"number"),u(zn,Hn.WOBBLE_BASE_PAIR_DISTANCE,"number"),u(zn,Hn.MISMATCH_BASE_PAIR_DISTANCE,"number"),u(zn,Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,"number"),u(zn,Hn.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,"boolean"),u(zn,Hn.CONTOUR_LINE_WIDTH,"number"),u(zn,Hn.PATH_MODE,"boolean"),u(zn,Hn.PATH_LINE_WIDTH,"number"),u(zn,Hn.DARK_MODE,"boolean"),u(zn,Hn.DISABLE_NAVIGATE_AWAY_PROMPT,"boolean"),u(zn,Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,"boolean"),u(zn,Hn.BASE_PAIR_RADIUS,"number"),u(zn,Hn.GRID_ENABLED,"boolean"),u(zn,Hn.GRID_HORIZONTAL_LINES,"boolean"),u(zn,Hn.GRID_VERTICAL_LINES,"boolean"),u(zn,Hn.GRID_LEFT_RIGHT_DIAGONAL,"boolean"),u(zn,Hn.GRID_RIGHT_LEFT_DIAGONAL,"boolean"),u(zn,Hn.GRID_CONCENTRIC_CIRCLES,"boolean"),u(zn,Hn.GRID_DOTTED,"boolean"),u(zn,Hn.GRID_SPACING,"number"),u(zn,Hn.GRID_COLOR,"string"),u(zn,Hn.CANVAS_COLOR,"string"),zn);var Xn,Yn,$n=(u(Un={},Hn.COPY_FILE_NAME,!0),u(Un,Hn.COPY_FILE_EXTENSION,!0),u(Un,Hn.RESET_VIEWPORT_AFTER_FILE_UPLOAD,!0),u(Un,Hn.USE_DEGREES,!0),u(Un,Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS,!0),u(Un,Hn.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING,!0),u(Un,Hn.CANONICAL_BASE_PAIR_DISTANCE,NaN),u(Un,Hn.WOBBLE_BASE_PAIR_DISTANCE,NaN),u(Un,Hn.MISMATCH_BASE_PAIR_DISTANCE,NaN),u(Un,Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,NaN),u(Un,Hn.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE,!1),u(Un,Hn.CONTOUR_LINE_WIDTH,Qe),u(Un,Hn.PATH_MODE,!1),u(Un,Hn.PATH_LINE_WIDTH,Qe),u(Un,Hn.DARK_MODE,!1),u(Un,Hn.DISABLE_NAVIGATE_AWAY_PROMPT,!1),u(Un,Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED,!0),u(Un,Hn.BASE_PAIR_RADIUS,Number.NaN),u(Un,Hn.GRID_ENABLED,!1),u(Un,Hn.GRID_HORIZONTAL_LINES,!0),u(Un,Hn.GRID_VERTICAL_LINES,!0),u(Un,Hn.GRID_LEFT_RIGHT_DIAGONAL,!1),u(Un,Hn.GRID_RIGHT_LEFT_DIAGONAL,!1),u(Un,Hn.GRID_CONCENTRIC_CIRCLES,!1),u(Un,Hn.GRID_DOTTED,!1),u(Un,Hn.GRID_SPACING,50),u(Un,Hn.GRID_COLOR,""),u(Un,Hn.CANVAS_COLOR,""),Un);function Zn(e,n,t){return"".concat(e).concat(ki).concat(n).concat(ki).concat(t).concat(ki,"LabelContent")}function Jn(e){return{x:-.5*e.width,y:-.3*e.height}}function et(e,n){if((e=e.toUpperCase())>(n=n.toUpperCase())){var t=e;e=n,n=t}var r=Yn.typeRecord,o=void 0;if(e in r&&(o=r[e][n]),void 0===o)throw"Unsupported base-pair type between ".concat(e," and ").concat(n);return o}function nt(e){return Yn.types.includes(e)}!function(n){var t=function(e){return e.FIVE_PRIME="5'",e.THREE_PRIME="3'",e.FIVE="5",e.THREE="3",e.A="A",e.C="C",e.G="G",e.U="U",e.N="N",e.a="a",e.c="c",e.g="g",e.n="n",e}({});n.Symbol=t;var r=n.symbols=Object.values(t);function o(n){var t,r=n.x,o=n.y,a=n.symbol,i=n.labelContentProps,l=n.labelLineProps,s=n.nucleotideIndex,c=(0,e.useContext)(zr.RnaComplex.Index),f=(0,e.useContext)(zr.RnaComplex.Name),p=(0,e.useContext)(zr.RnaMolecule.Name),h={nucleotideIndex:s,rnaMoleculeName:p,rnaComplexIndex:c},v=(0,e.useContext)(zr.RnaMolecule.FirstNucleotideIndex),m=(0,e.useContext)(zr.App.SetMouseOverText),x=(0,e.useContext)(zr.Nucleotide.OnMouseDownHelper),g=(0,e.useContext)(zr.Nucleotide.LabelsOnlyFlag),b=(0,e.useContext)(zr.App.Settings)[Hn.PATH_MODE],N=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),I=(0,e.useContext)(zr.App.SingularRnaComplexFlag),C=(0,e.useContext)(zr.RnaComplex.SingularRnaMoleculeFlag),S=!1;if(c in N){var E=N[c];if(p in E)E[p].has(s)&&(S=!0)}var w=y((0,e.useState)({width:0,height:0}),2),A=w[0],k=w[1],P=(0,e.createRef)(),T=(0,e.useMemo)((function(){var e;return null!==(e=n.font)&&void 0!==e?e:structuredClone(qe.DEFAULT)}),[n.font]),M=(0,e.useMemo)((function(){var e;return null!==(e=n.color)&&void 0!==e?e:we}),[n.color]),R=(0,e.useMemo)((function(){var e;return null!==(e=n.strokeWidth)&&void 0!==e?e:Qe}),[n.strokeWidth]),_=(0,e.useMemo)((function(){return Jn(A)}),[A]);return(0,e.useEffect)((function(){k(P.current.getBBox())}),[a,T]),(0,Gn.jsxs)("g",{transform:"translate(".concat(r,", ").concat(o,")"),children:[(0,Gn.jsx)("text",d(d({},(t={},u(t,vn,dn.NUCLEOTIDE),u(t,mn,f),u(t,xn,p),u(t,gn,v),u(t,yn,s+v),t)),{},{ref:P,className:"".concat(Si," noselect"),transform:"translate(".concat(_.x,", ").concat(_.y,") scale(1, -1)"),fontStyle:T.style,fontWeight:T.weight,fontFamily:T.family,fontSize:T.size,strokeWidth:R,fill:ke(M),fillOpacity:b?0:1,pointerEvents:g?"none":"all",onMouseDown:function(e){x(e,h)},onMouseOver:function(e){var n=v+s,t=[];I||t.push("Complex:    ".concat(f)),C||t.push("Molecule:   ".concat(p)),t.push("Nucleotide: ".concat(n),"Symbol:     ".concat(a),"status:     ".concat(S?"LOCKED (cannot move)":"unlocked (can move)")),m(t.join("\n"))},onMouseLeave:function(){m("")},children:a})),(0,Gn.jsxs)(zr.Nucleotide.Symbol.Provider,{value:a,children:[l&&(0,Gn.jsx)(Fn.Component,d(d({},l),{},{id:Zn(c,p,s),fullKeys:h})),i&&(0,Gn.jsx)(Dn.Component,d(d({},i),{},{id:Zn(c,p,s),fullKeys:h}))]})]})}n.isSymbol=function(e){return r.includes(e)};n.MemoizedComponent=(0,e.memo)(o)}(Xn||(Xn={})),function(n){var t,r,o,a,i,l,s,c,f,p,h,v,m=function(e){return e.CANONICAL="canonical",e.WOBBLE="wobble",e.MISMATCH="mismatch",e.CIS_WATSON_CRICK_WATSON_CRICK="cis_watson_crick_watson_crick",e.TRANS_WATSON_CRICK_WATSON_CRICK="trans_watson_crick_watson_crick",e.CIS_WATSON_CRICK_HOOGSTEEN="cis_watson_crick_hoogsteen",e.CIS_HOOGSTEEN_WATSON_CRICK="cis_hoogsteen_watson_crick",e.TRANS_WATSON_CRICK_HOOGSTEEN="trans_watson_crick_hoogsteen",e.TRANS_HOOGSTEEN_WATSON_CRICK="trans_hoogsteen_watson_crick",e.CIS_WATSON_CRICK_SUGAR_EDGE="cis_watson_crick_sugar_edge",e.CIS_SUGAR_EDGE_WATSON_CRICK="cis_sugar_edge_watson_crick",e.TRANS_WATSON_CRICK_SUGAR_EDGE="trans_watson_crick_sugar_edge",e.TRANS_SUGAR_EDGE_WATSON_CRICK="trans_sugar_edge_watson_crick",e.CIS_HOOGSTEEN_HOOGSTEEN="cis_hoogsteen_hoogsteen",e.TRANS_HOOGSTEEN_HOOGSTEEN="trans_hoogsteen_hoogsteen",e.CIS_HOOGSTEEN_SUGAR_EDGE="cis_hoogsteen_sugar_edge",e.CIS_SUGAR_EDGE_HOOGSTEEN="cis_sugar_edge_hoogsteen",e.TRANS_HOOGSTEEN_SUGAR_EDGE="trans_hoogsteen_sugar_edge",e.TRANS_SUGAR_EDGE_HOOGSTEEN="trans_sugar_edge_hoogsteen",e.CIS_SUGAR_EDGE_SUGAR_EDGE="cis_sugar_edge_sugar_edge",e.TRANS_SUGAR_EDGE_SUGAR_EDGE="trans_sugar_edge_sugar_edge",e}({});n.Type=m;n.types=Object.values(m);var x=n.DirectedType=(u(t={},m.CIS_WATSON_CRICK_HOOGSTEEN,m.CIS_WATSON_CRICK_HOOGSTEEN),u(t,m.CIS_HOOGSTEEN_WATSON_CRICK,m.CIS_HOOGSTEEN_WATSON_CRICK),u(t,m.TRANS_WATSON_CRICK_HOOGSTEEN,m.TRANS_WATSON_CRICK_HOOGSTEEN),u(t,m.TRANS_HOOGSTEEN_WATSON_CRICK,m.TRANS_HOOGSTEEN_WATSON_CRICK),u(t,m.CIS_WATSON_CRICK_SUGAR_EDGE,m.CIS_WATSON_CRICK_SUGAR_EDGE),u(t,m.CIS_SUGAR_EDGE_WATSON_CRICK,m.CIS_SUGAR_EDGE_WATSON_CRICK),u(t,m.TRANS_WATSON_CRICK_SUGAR_EDGE,m.TRANS_WATSON_CRICK_SUGAR_EDGE),u(t,m.TRANS_SUGAR_EDGE_WATSON_CRICK,m.TRANS_SUGAR_EDGE_WATSON_CRICK),u(t,m.CIS_HOOGSTEEN_SUGAR_EDGE,m.CIS_HOOGSTEEN_SUGAR_EDGE),u(t,m.CIS_SUGAR_EDGE_HOOGSTEEN,m.CIS_SUGAR_EDGE_HOOGSTEEN),u(t,m.TRANS_HOOGSTEEN_SUGAR_EDGE,m.TRANS_HOOGSTEEN_SUGAR_EDGE),u(t,m.TRANS_SUGAR_EDGE_HOOGSTEEN,m.TRANS_SUGAR_EDGE_HOOGSTEEN),t),g=n.directedTypes=Object.values(x),y=n.RedundantLeontisWesthofType=(u(r={},m.CIS_SUGAR_EDGE_WATSON_CRICK,m.CIS_SUGAR_EDGE_WATSON_CRICK),u(r,m.CIS_HOOGSTEEN_WATSON_CRICK,m.CIS_HOOGSTEEN_WATSON_CRICK),u(r,m.CIS_SUGAR_EDGE_HOOGSTEEN,m.CIS_SUGAR_EDGE_HOOGSTEEN),u(r,m.TRANS_SUGAR_EDGE_WATSON_CRICK,m.TRANS_SUGAR_EDGE_WATSON_CRICK),u(r,m.TRANS_HOOGSTEEN_WATSON_CRICK,m.TRANS_HOOGSTEEN_WATSON_CRICK),u(r,m.TRANS_SUGAR_EDGE_HOOGSTEEN,m.TRANS_SUGAR_EDGE_HOOGSTEEN),r),b=n.redundantLeontisWesthofTypes=Object.values(y);n.isRedundantLeontisWesthofType=function(e){return b.includes(e)};n.reverseDirectedTypeMap=(u(o={},m.CIS_WATSON_CRICK_HOOGSTEEN,m.CIS_HOOGSTEEN_WATSON_CRICK),u(o,m.CIS_HOOGSTEEN_WATSON_CRICK,m.CIS_WATSON_CRICK_HOOGSTEEN),u(o,m.TRANS_WATSON_CRICK_HOOGSTEEN,m.TRANS_HOOGSTEEN_WATSON_CRICK),u(o,m.TRANS_HOOGSTEEN_WATSON_CRICK,m.TRANS_WATSON_CRICK_HOOGSTEEN),u(o,m.CIS_WATSON_CRICK_SUGAR_EDGE,m.CIS_SUGAR_EDGE_WATSON_CRICK),u(o,m.CIS_SUGAR_EDGE_WATSON_CRICK,m.CIS_WATSON_CRICK_SUGAR_EDGE),u(o,m.TRANS_WATSON_CRICK_SUGAR_EDGE,m.TRANS_SUGAR_EDGE_WATSON_CRICK),u(o,m.TRANS_SUGAR_EDGE_WATSON_CRICK,m.TRANS_WATSON_CRICK_SUGAR_EDGE),u(o,m.CIS_HOOGSTEEN_SUGAR_EDGE,m.CIS_SUGAR_EDGE_HOOGSTEEN),u(o,m.CIS_SUGAR_EDGE_HOOGSTEEN,m.CIS_HOOGSTEEN_SUGAR_EDGE),u(o,m.TRANS_HOOGSTEEN_SUGAR_EDGE,m.TRANS_SUGAR_EDGE_HOOGSTEEN),u(o,m.TRANS_SUGAR_EDGE_HOOGSTEEN,m.TRANS_HOOGSTEEN_SUGAR_EDGE),o),n.shortenedTypeNameMap=(u(a={},m.CANONICAL,"Can."),u(a,m.WOBBLE,"Wob."),u(a,m.MISMATCH,"Mis."),u(a,m.CIS_WATSON_CRICK_WATSON_CRICK,"cWW"),u(a,m.TRANS_WATSON_CRICK_WATSON_CRICK,"tWW"),u(a,m.CIS_WATSON_CRICK_HOOGSTEEN,"cWH"),u(a,m.CIS_HOOGSTEEN_WATSON_CRICK,"cHW"),u(a,m.TRANS_WATSON_CRICK_HOOGSTEEN,"tWH"),u(a,m.TRANS_HOOGSTEEN_WATSON_CRICK,"tHW"),u(a,m.CIS_WATSON_CRICK_SUGAR_EDGE,"cWS"),u(a,m.CIS_SUGAR_EDGE_WATSON_CRICK,"cSW"),u(a,m.TRANS_WATSON_CRICK_SUGAR_EDGE,"tWS"),u(a,m.TRANS_SUGAR_EDGE_WATSON_CRICK,"tSW"),u(a,m.CIS_HOOGSTEEN_HOOGSTEEN,"cHH"),u(a,m.TRANS_HOOGSTEEN_HOOGSTEEN,"tHH"),u(a,m.CIS_HOOGSTEEN_SUGAR_EDGE,"cHS"),u(a,m.CIS_SUGAR_EDGE_HOOGSTEEN,"cSH"),u(a,m.TRANS_HOOGSTEEN_SUGAR_EDGE,"tHS"),u(a,m.TRANS_SUGAR_EDGE_HOOGSTEEN,"tSH"),u(a,m.CIS_SUGAR_EDGE_SUGAR_EDGE,"cSS"),u(a,m.TRANS_SUGAR_EDGE_SUGAR_EDGE,"tSS"),a);var N=n.fullTypeNameMap=(u(i={},m.CANONICAL,"canonical"),u(i,m.WOBBLE,"wobble"),u(i,m.MISMATCH,"mismatch"),u(i,m.CIS_WATSON_CRICK_WATSON_CRICK,"cis Watson\u2013Crick/Watson\u2013Crick"),u(i,m.TRANS_WATSON_CRICK_WATSON_CRICK,"trans Watson\u2013Crick/Watson\u2013Crick"),u(i,m.CIS_WATSON_CRICK_HOOGSTEEN,"cis Watson\u2013Crick/Hoogsteen"),u(i,m.CIS_HOOGSTEEN_WATSON_CRICK,"cis Hoogsteen/Watson\u2013Crick"),u(i,m.TRANS_WATSON_CRICK_HOOGSTEEN,"trans Watson\u2013Crick/Hoogsteen"),u(i,m.TRANS_HOOGSTEEN_WATSON_CRICK,"trans Hoogsteen/Watson\u2013Crick"),u(i,m.CIS_WATSON_CRICK_SUGAR_EDGE,"cis Watson\u2013Crick/Sugar edge"),u(i,m.CIS_SUGAR_EDGE_WATSON_CRICK,"cis Sugar edge/Watson\u2013Crick"),u(i,m.TRANS_WATSON_CRICK_SUGAR_EDGE,"trans Watson\u2013Crick/Sugar edge"),u(i,m.TRANS_SUGAR_EDGE_WATSON_CRICK,"trans Sugar edge/Watson\u2013Crick"),u(i,m.CIS_HOOGSTEEN_HOOGSTEEN,"cis Hoogsteen/Hoogsteen"),u(i,m.TRANS_HOOGSTEEN_HOOGSTEEN,"trans Hoogsteen/Hoogsteen"),u(i,m.CIS_HOOGSTEEN_SUGAR_EDGE,"cis Hoogsteen/Sugar edge"),u(i,m.CIS_SUGAR_EDGE_HOOGSTEEN,"cis Sugar edge/Hoogsteen"),u(i,m.TRANS_HOOGSTEEN_SUGAR_EDGE,"trans Hoogsteen/Sugar edge"),u(i,m.TRANS_SUGAR_EDGE_HOOGSTEEN,"trans Sugar edge/Hoogsteen"),u(i,m.CIS_SUGAR_EDGE_SUGAR_EDGE,"cis Sugar edge/Sugar edge"),u(i,m.TRANS_SUGAR_EDGE_SUGAR_EDGE,"trans Sugar edge/Sugar edge"),i);n.isDirectedType=function(e){return g.includes(e)};var I=n.CanonicalType=(u(l={},m.CANONICAL,m.CANONICAL),u(l,m.WOBBLE,m.WOBBLE),u(l,m.MISMATCH,m.MISMATCH),u(l,m.CIS_WATSON_CRICK_WATSON_CRICK,m.CIS_WATSON_CRICK_WATSON_CRICK),u(l,m.TRANS_WATSON_CRICK_WATSON_CRICK,m.TRANS_WATSON_CRICK_WATSON_CRICK),l),C=n.canonicalTypes=Object.values(I);function S(e){return C.includes(e)}function E(e,n){return!n||Yn.isCanonicalType(e)}n.isCanonicalType=S,n.isEnabledBasePair=E,n.isNucleotideBasePaired=function(e,n,t,r,o,a){if(!(r in t))return!1;var i=t[r];return o in i&&i[o].filter((function(t){var r;return E(null!==(r=t.basePairType)&&void 0!==r?r:et(e,n.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),a)})).length>0};n.typeRecord=(u(p={},Xn.Symbol.A,(u(s={},Xn.Symbol.A,m.MISMATCH),u(s,Xn.Symbol.C,m.MISMATCH),u(s,Xn.Symbol.G,m.MISMATCH),u(s,Xn.Symbol.U,m.CANONICAL),s)),u(p,Xn.Symbol.C,(u(c={},Xn.Symbol.C,m.MISMATCH),u(c,Xn.Symbol.G,m.CANONICAL),u(c,Xn.Symbol.U,m.MISMATCH),c)),u(p,Xn.Symbol.G,(u(f={},Xn.Symbol.G,m.MISMATCH),u(f,Xn.Symbol.U,m.WOBBLE),f)),u(p,Xn.Symbol.U,u({},Xn.Symbol.U,m.MISMATCH)),p);var w=.5*Math.sqrt(3),A=.5*(3+Math.sqrt(3));function k(e){return function(n){var t=n.position0,r=n.position1;return e(d(d({},n),{},{position0:r,position1:t}))}}var P=.5;function T(e,n,t){var r=t/Q(e,n),o=1-r;return{interpolatedPosition0:H(e,n,r),interpolatedPosition1:H(e,n,o)}}function M(e){var n=e.position0,t=e.position1,r=e.stroke,o=e.strokeWidth,a=e.svgPropertiesForXrna,i=e.onMouseOver,l=e.onMouseLeave,s=e.onMouseDown,u=e.className,c=e.basePairRadius,f=T(n,t,e.averageNucleotideBoundingRectHeight*P),p=f.interpolatedPosition0,h=f.interpolatedPosition1;return(0,Gn.jsxs)("g",{children:[(0,Gn.jsx)("path",{d:_(p,h,!0,c),fill:"none",strokeWidth:o,onMouseOver:i,onMouseLeave:l,onMouseDown:s,className:u,pointerEvents:"all"}),(0,Gn.jsx)("line",d(d({},a),{},{x1:p.x,y1:p.y,x2:h.x,y2:h.y,stroke:r,strokeWidth:o,pointerEvents:"none"}))]})}function R(e){var n=e.position0,t=e.position1,r=e.stroke,o=e.fill,a=e.strokeWidth,i=e.svgPropertiesForXrna,l=e.onMouseOver,s=e.onMouseLeave,u=e.onMouseDown,c=e.className,f=e.basePairRadius,p={x:.5*(n.x+t.x),y:.5*(n.y+t.y)};return(0,Gn.jsxs)("g",{children:[(0,Gn.jsx)("circle",d(d({},i),{},{r:f,cx:p.x,cy:p.y,stroke:r,fill:o,strokeWidth:a,pointerEvents:"none"})),(0,Gn.jsx)("circle",{r:f,cx:p.x,cy:p.y,fill:"none",stroke:"red",strokeWidth:a,className:c,pointerEvents:"all",onMouseOver:l,onMouseLeave:s,onMouseDown:u})]})}function j(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.onMouseOver,s=e.onMouseLeave,u=e.onMouseDown,c=e.className,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=W(L(t,n)),y=F(g,f),b=F(g,1.5*f),N=G(y),I=L(x,b),C=O(x,b),S=L(I,y),E=O(I,y),w=L(C,y),A=O(C,y),k=[L(w,N),O(w,N),O(A,N),L(A,N)],M=new Array;if(X(L(S,h),L(x,S))>0){var R={key:0,pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:S.x,y2:S.y};M.push((0,Gn.jsx)("line",d({},R)))}var j={key:1,pointerEvents:"none",stroke:o,fill:a,strokeWidth:i,cx:I.x,cy:I.y,r:f},D={key:2,pointerEvents:"none",stroke:m,strokeWidth:i,x1:E.x,y1:E.y,x2:w.x,y2:w.y},B={key:3,d:"M ".concat(k[0].x," ").concat(k[0].y," L ").concat(k[1].x," ").concat(k[1].y," L ").concat(k[2].x," ").concat(k[2].y," L ").concat(k[3].x," ").concat(k[3].y," Z"),stroke:o,fill:a,pointerEvents:"none",strokeWidth:i};if(M.push((0,Gn.jsx)("circle",d({},j)),(0,Gn.jsx)("line",d({},D)),(0,Gn.jsx)("path",d({},B))),X(L(A,v),L(x,A))>0){var z={key:4,pointerEvents:"none",stroke:m,strokeWidth:i,x1:A.x,y1:A.y,x2:v.x,y2:v.y};M.push((0,Gn.jsx)("line",d({},z)))}return(0,Gn.jsxs)("g",d(d({},r),{},{children:[M,(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:l,onMouseLeave:s,onMouseDown:u,className:c,pointerEvents:"all"})]}))}var D=k(j);function B(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.className,s=e.onMouseOver,u=e.onMouseLeave,c=e.onMouseDown,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=W(L(t,n)),y=F(g,A*f),b=F(g,f),N=F(G(g),f),I=O(L(x,y),b),C=L(I,b),S=O(I,b),E=O(I,F(g,2*f)),w=O(x,y),k=O(E,N),M=L(E,N),R=new Array;X(L(C,h),L(x,C))>0&&R.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:C.x,y2:C.y},0));var j={key:1,pointerEvents:"none",stroke:o,fill:a,strokeWidth:i,cx:I.x,cy:I.y,r:f},D={key:3,d:"M ".concat(k.x," ").concat(k.y," L ").concat(M.x," ").concat(M.y," L ").concat(w.x," ").concat(w.y," Z"),stroke:o,fill:a,strokeWidth:i,pointerEvents:"none"};return R.push((0,Gn.jsx)("circle",d({},j)),(0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:S.x,y1:S.y,x2:E.x,y2:E.y},2),(0,Gn.jsx)("path",d({},D))),X(L(w,v),L(x,w))>0&&R.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:w.x,y1:w.y,x2:v.x,y2:v.y},4)),(0,Gn.jsxs)("g",d(d({},r),{},{children:[R,(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:s,onMouseLeave:u,onMouseDown:c,className:l,pointerEvents:"all"})]}))}var z=k(B);function U(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.className,s=e.onMouseOver,u=e.onMouseLeave,c=e.onMouseDown,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=W(L(t,n)),y=F(g,f),b=F(G(g),f),N=L(x,y),I=O(x,y),C=[L(N,b),O(N,b),O(I,b),L(I,b)],S=new Array;X(L(N,h),L(x,N))>0&&S.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:N.x,y2:N.y},0));var E={key:1,d:"M ".concat(C[0].x," ").concat(C[0].y," L ").concat(C[1].x," ").concat(C[1].y," L ").concat(C[2].x," ").concat(C[2].y," L ").concat(C[3].x," ").concat(C[3].y," Z"),stroke:o,fill:a,strokeWidth:i,pointerEvents:"none"};return S.push((0,Gn.jsx)("path",d({},E))),X(L(I,v),L(x,I))>0&&S.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:v.x,y1:v.y,x2:I.x,y2:I.y},2)),(0,Gn.jsxs)("g",d(d({},r),{},{children:[S,(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:s,onMouseLeave:u,onMouseDown:c,className:l,pointerEvents:"all"})]}))}function K(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.className,s=e.onMouseOver,u=e.onMouseLeave,c=e.onMouseDown,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=W(L(t,n)),y=F(g,A*f),b=F(g,f),N=F(G(g),f),I=O(L(x,y),b),C=L(I,b),S=O(I,b),E=O(I,F(g,2*f)),w=O(x,y),k=[L(C,N),O(C,N),O(S,N),L(S,N)],M=O(E,N),R=L(E,N),j=new Array;X(L(C,h),L(x,C))>0&&j.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:C.x,y2:C.y},0));var D={key:1,d:"M ".concat(k[0].x," ").concat(k[0].y," L ").concat(k[1].x," ").concat(k[1].y," L ").concat(k[2].x," ").concat(k[2].y," L ").concat(k[3].x," ").concat(k[3].y," Z"),stroke:o,strokeWidth:i,fill:a,pointerEvents:"none"},B={key:3,d:"M ".concat(M.x," ").concat(M.y," L ").concat(R.x," ").concat(R.y," L ").concat(w.x," ").concat(w.y," Z"),stroke:o,strokeWidth:i,fill:a,pointerEvents:"none"};return j.push((0,Gn.jsx)("path",d({},D)),(0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:S.x,y1:S.y,x2:E.x,y2:E.y},2),(0,Gn.jsx)("path",d({},B))),X(L(w,v),L(x,w))>0&&j.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:w.x,y1:w.y,x2:v.x,y2:v.y},4)),(0,Gn.jsxs)("g",d(d({},r),{},{children:[j,(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:s,onMouseLeave:u,onMouseDown:c,className:l,pointerEvents:"all"})]}))}var V=k(K);function q(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.className,s=e.onMouseOver,u=e.onMouseLeave,c=e.onMouseDown,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=W(L(t,n)),y=F(g,w*f),b=F(G(g),f),N=L(x,y),I=O(x,y),C=O(N,b),S=L(N,b),E=new Array;X(L(N,h),L(x,N))>0&&E.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:N.x,y2:N.y},0));var A={key:1,d:"M ".concat(C.x," ").concat(C.y," L ").concat(S.x," ").concat(S.y," L ").concat(I.x," ").concat(I.y," Z"),stroke:o,strokeWidth:i,fill:a,pointerEvents:"none"};return E.push((0,Gn.jsx)("path",d({},A))),X(L(N,h),L(x,N))>0&&E.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:v.x,y1:v.y,x2:I.x,y2:I.y},2)),(0,Gn.jsxs)("g",d(d({},r),{},{children:[E,(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:s,onMouseLeave:u,onMouseDown:c,className:l,pointerEvents:"all"})]}))}var Y=(u(h={},Yn.Type.CANONICAL,M),u(h,Yn.Type.MISMATCH,R),u(h,Yn.Type.WOBBLE,R),u(h,Yn.Type.CIS_WATSON_CRICK_WATSON_CRICK,M),u(h,Yn.Type.TRANS_WATSON_CRICK_WATSON_CRICK,(function(e){var n=e.position0,t=e.position1,r=e.svgPropertiesForXrna,o=e.stroke,a=e.fill,i=e.strokeWidth,l=e.onMouseOver,s=e.onMouseDown,u=e.onMouseLeave,c=e.className,f=e.basePairRadius,p=T(n,t,e.averageNucleotideBoundingRectHeight*P),h=p.interpolatedPosition0,v=p.interpolatedPosition1,m=["none",void 0].includes(o)?a:o,x=F(O(n,t),.5),g=F(W(L(t,n)),f),y=L(x,g),b=O(x,g),N=new Array;return X(L(y,h),L(x,y))>0&&N.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:h.x,y1:h.y,x2:y.x,y2:y.y},0)),N.push((0,Gn.jsx)("circle",{pointerEvents:"none",stroke:o,fill:a,strokeWidth:i,cx:x.x,cy:x.y,r:f},1)),X(L(b,v),L(x,b))>0&&N.push((0,Gn.jsx)("line",{pointerEvents:"none",stroke:m,strokeWidth:i,x1:v.x,y1:v.y,x2:b.x,y2:b.y},2)),(0,Gn.jsxs)("g",d(d({},r),{},{children:[(0,Gn.jsx)("path",{d:_(h,v,!0,f),fill:"none",strokeWidth:i,onMouseOver:l,onMouseLeave:u,onMouseDown:s,className:c,pointerEvents:"all"}),N]}))})),u(h,Yn.Type.CIS_WATSON_CRICK_HOOGSTEEN,j),u(h,Yn.Type.CIS_HOOGSTEEN_WATSON_CRICK,D),u(h,Yn.Type.TRANS_HOOGSTEEN_WATSON_CRICK,D),u(h,Yn.Type.TRANS_WATSON_CRICK_HOOGSTEEN,j),u(h,Yn.Type.CIS_WATSON_CRICK_SUGAR_EDGE,B),u(h,Yn.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,B),u(h,Yn.Type.CIS_SUGAR_EDGE_WATSON_CRICK,z),u(h,Yn.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,z),u(h,Yn.Type.CIS_HOOGSTEEN_HOOGSTEEN,U),u(h,Yn.Type.TRANS_HOOGSTEEN_HOOGSTEEN,U),u(h,Yn.Type.CIS_HOOGSTEEN_SUGAR_EDGE,K),u(h,Yn.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,K),u(h,Yn.Type.CIS_SUGAR_EDGE_HOOGSTEEN,V),u(h,Yn.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,V),u(h,Yn.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,q),u(h,Yn.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,q),h);function $(e){return{stroke:e,fill:"none"}}function Z(e){return{stroke:"none",fill:e}}var J=(u(v={},Yn.Type.CANONICAL,(function(e){return{stroke:e}})),u(v,Yn.Type.WOBBLE,Z),u(v,Yn.Type.MISMATCH,$),u(v,Yn.Type.CIS_WATSON_CRICK_WATSON_CRICK,$),u(v,Yn.Type.TRANS_WATSON_CRICK_WATSON_CRICK,$),u(v,Yn.Type.CIS_WATSON_CRICK_HOOGSTEEN,Z),u(v,Yn.Type.TRANS_WATSON_CRICK_HOOGSTEEN,$),u(v,Yn.Type.CIS_HOOGSTEEN_WATSON_CRICK,Z),u(v,Yn.Type.TRANS_HOOGSTEEN_WATSON_CRICK,$),u(v,Yn.Type.CIS_WATSON_CRICK_SUGAR_EDGE,Z),u(v,Yn.Type.TRANS_WATSON_CRICK_SUGAR_EDGE,$),u(v,Yn.Type.CIS_SUGAR_EDGE_WATSON_CRICK,Z),u(v,Yn.Type.TRANS_SUGAR_EDGE_WATSON_CRICK,$),u(v,Yn.Type.CIS_HOOGSTEEN_HOOGSTEEN,Z),u(v,Yn.Type.TRANS_HOOGSTEEN_HOOGSTEEN,$),u(v,Yn.Type.CIS_HOOGSTEEN_SUGAR_EDGE,Z),u(v,Yn.Type.TRANS_HOOGSTEEN_SUGAR_EDGE,$),u(v,Yn.Type.CIS_SUGAR_EDGE_HOOGSTEEN,Z),u(v,Yn.Type.TRANS_SUGAR_EDGE_HOOGSTEEN,$),u(v,Yn.Type.CIS_SUGAR_EDGE_SUGAR_EDGE,Z),u(v,Yn.Type.TRANS_SUGAR_EDGE_SUGAR_EDGE,$),v);function ee(n){var t,r,o,a=n.position0,i=n.position1,l=n.mappedBasePair,s=n.rnaComplexIndex,c=n.rnaComplexName,f=n.rnaMoleculeName0,p=n.formattedNucleotideIndex0,h=n.rnaMoleculeName1,v=n.formattedNucleotideIndex1,m=(0,e.useContext)(zr.BasePair.AverageStrokeWidth),x=(0,e.useContext)(zr.App.SetMouseOverText),g=(0,e.useContext)(zr.BasePair.ClassName),y=(0,e.useContext)(zr.App.RnaComplexProps),b=(0,e.useContext)(zr.BasePair.OnMouseDownHelper),I=(0,e.useContext)(zr.App.SingularRnaComplexFlag),C=(0,e.useContext)(zr.RnaComplex.SingularRnaMoleculeFlag),E=(0,e.useContext)(zr.BasePair.Radius);Number.isNaN(E)&&(E=1);var w=(0,e.useContext)(zr.Nucleotide.AverageBoundingRectHeight);if(Number.isNaN(w)&&(w=.1),void 0===l)return null;var A=l.basePairType,k=y[s],P=k.rnaMoleculeProps[f],T=k.rnaMoleculeProps[h],M=p-P.firstNucleotideIndex,R=v-T.firstNucleotideIndex,_=(P.nucleotideProps[M],T.nucleotideProps[R],ke(null!==(t=l.color)&&void 0!==t?t:S(A)?we:Ae)),j=null!==(r=l.strokeWidth)&&void 0!==r?r:m;if(void 0!==l.points){var O=l.points.map((function(e){var n=e.x,t=e.y;return"".concat(n,",").concat(t)})).join(" ");return(0,Gn.jsx)("polyline",{stroke:_,strokeWidth:j,pointerEvents:"none",points:O,fill:"none"})}var L=(u(o={},vn,dn.BASE_PAIR),u(o,mn,c),u(o,bn,f),u(o,Nn,h),u(o,Cn,p),u(o,Sn,v),u(o,En,A),o),D=f,F=h,B=M,W=R,z=A;if(Yn.isRedundantLeontisWesthofType(z)){z=Yn.reverseDirectedTypeMap[z];var U=D;D=F,F=U;var G=B;B=W,W=G}var H=k.rnaMoleculeProps[D],K=k.rnaMoleculeProps[F],V=["Base Pair:"];return I||V.push("  Complex: ".concat(k.name)),C||V.push("  Mol(s): ".concat(Array.from(new Set([D,F])).join(" - "))),V.push("  Nucs:  ".concat(H.firstNucleotideIndex+B).concat(H.nucleotideProps[B].symbol," - ").concat(K.firstNucleotideIndex+W).concat(K.nucleotideProps[W].symbol),"  Type: ".concat(N[z])),(0,e.createElement)(Y[A],d({position0:a,position1:i,basePairType:A,strokeWidth:j,svgPropertiesForXrna:L,onMouseOver:function(){x(V.join("\n"))},onMouseLeave:function(){x("")},onMouseDown:function(e){b(e,{rnaComplexIndex:s,rnaMoleculeName:f,nucleotideIndex:M},{rnaComplexIndex:s,rnaMoleculeName:h,nucleotideIndex:R})},className:g,basePairRadius:E,averageNucleotideBoundingRectHeight:w},J[A](_)))}n.Component=ee;n.MemoizedComponent=(0,e.memo)(ee)}(Yn||(Yn={}));var tt,rt=Yn;!function(n){var t=function(e){return e.VALUE="value",e.UNDEFINED="undefined",e.ERROR="error",e}({});function r(n){var r=n.disabledFlag,o=y((0,e.useState)(n.valueToString(n.value)),2),a=o[0],i=o[1],l=y((0,e.useState)(!0),2),s=l[0],u=l[1],c=y((0,e.useState)(!0),2),f=c[0],p=c[1],h=y((0,e.useState)(void 0),2),v=h[0],m=h[1];return(0,e.useEffect)((function(){f?i(n.valueToString(n.value)):(p(!0),u(!0))}),[n.value]),(0,Gn.jsx)("input",{style:d({border:"1px solid ".concat(s?"black":"red")},n.style),type:n.htmlInputType,value:a,onChange:function(e){p(!1);var r=e.target.value;i(r);var o,a=n.stringToValue(r);switch(void 0===(o=a)?t.UNDEFINED:null!==o&&"object"===typeof o&&"errorMessage"in o?t.ERROR:t.VALUE){case t.VALUE:n.setValue(a),m(void 0),u(!0);break;case t.UNDEFINED:u(!1),m(void 0);break;case t.ERROR:u(!1),m(a.errorMessage)}},step:n.step,min:n.min,max:n.max,title:v,disabled:r})}n.StringToValueReturnType=t,n.Component=r,n.Number=function(e){var n,t,o;return(0,Gn.jsx)(r,d({style:e.style,valueToString:null!==(n=e.valueToString)&&void 0!==n?n:$e,stringToValue:null!==(t=e.stringToValue)&&void 0!==t?t:function(n){var t=Je(n);if(void 0!==t){if(void 0!==e.min&&t<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&t>e.max)return{errorMessage:"Input value is greater than the maximum."}}return t},htmlInputType:null!==(o=e.htmlInputType)&&void 0!==o?o:"number"},e))},n.Integer=function(e){var n,t,o;return(0,Gn.jsx)(r,d({style:e.style,valueToString:null!==(n=e.valueToString)&&void 0!==n?n:function(e){return e.toString()},stringToValue:null!==(t=e.stringToValue)&&void 0!==t?t:function(n){var t=Ze(n);if(void 0!==t){if(void 0!==e.min&&t<e.min)return{errorMessage:"Input value is less than the minimum."};if(void 0!==e.max&&t>e.max)return{errorMessage:"Input value is greater than the maximum."}}return t},htmlInputType:null!==(o=e.htmlInputType)&&void 0!==o?o:"number"},e))},n.Angle=function(n){var t,o,a,i=(0,e.useMemo)((function(){var e;return(null!==(e=n.step)&&void 0!==e?e:n.useDegreesFlag)?1:k(1)}),[n.step]);return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)(r,d({style:n.style,valueToString:null!==(t=n.valueToString)&&void 0!==t?t:function(e){var t=n.useDegreesFlag?57.2957795131*e:e;return $e(t)},stringToValue:null!==(o=n.stringToValue)&&void 0!==o?o:function(e){var t=Je(e);if(void 0!==t)return void 0!==n.min&&t<n.min?{errorMessage:"Input value is less than the minimum."}:void 0!==n.max&&t>n.max?{errorMessage:"Input value is greater than the maximum."}:n.useDegreesFlag?k(t):t},htmlInputType:null!==(a=n.htmlInputType)&&void 0!==a?a:"number",step:i},n)),n.useDegreesFlag?"\xb0":"radians"]})}}(tt||(tt={}));var ot,at,it=tt;(ot||(ot={})).Component=function(n){var t=n.initialCollapsedFlag,r=n.title,o=n.children,a=n.buttonStyle,i=n.divStyle,l=(0,e.useContext)(zr.Collapsible.Width),s=null!==l&&void 0!==l?l:"100%",u=y((0,e.useState)(null===t||void 0===t||t),2),c=u[0],f=u[1];return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("button",{className:"collapsible",style:d({width:s},a),onClick:function(){f(!c)},children:[(0,Gn.jsx)("span",{style:{display:"inline-block",textAlign:"left",width:"50%",whiteSpace:"nowrap"},children:r}),(0,Gn.jsx)("span",{style:{display:"inline-block",textAlign:"right",width:"50%"},children:c?"+":"-"})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsx)("div",{style:d({display:c?"none":"block",paddingLeft:"10px"},i),children:(0,Gn.jsx)(zr.Collapsible.Width.Provider,{value:"100%",children:o})})]})},function(n){var t,r=12,o=!1,a=function(e){return e.TABLE_BASED="Table-based",e.TEXT_BASED="Text-based",e}({});n.EditorType=a;var i=Object.values(a);n.isEditorType=function(e){return i.includes(e)};var l,s=n.TextBasedEditor=(0,e.forwardRef)((function(n,t){var o=n.rnaComplexProps,a=n.setBasePairs,i=n.approveBasePairs,l=n.initialBasePairs,s=n.defaultRnaComplexIndex,u=n.defaultRnaMoleculeName0,c=n.defaultRnaMoleculeName1,d=y((0,e.useState)(""),2),f=d[0],p=d[1],h=y((0,e.useState)(0),2),v=h[0],m=h[1];function x(e){m(Math.min(e,5))}var g=(0,e.useMemo)((function(){return Object.values(o).map((function(e){return e.name}))}),[o]);return(0,e.useEffect)((function(){if(void 0!==l){var e=l.map((function(e){var n=e.rnaComplexIndex,t=e.rnaMoleculeName0,r=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1,l=e.length,s=e.type,u=[null!==a&&void 0!==a?a:"#",null!==i&&void 0!==i?i:"#",null!==l&&void 0!==l?l:"#"];if(void 0===n){var c=void 0===t,d=void 0===r;c&&!d?u.push('"'+r+'"'):!c&&d?u.push('"'+t+'"'):c||d||u.push('"'+t+'"','"'+r+'"')}else u.push('"'+(null!==t&&void 0!==t?t:"")+'"','"'+(null!==r&&void 0!==r?r:"")+'"','"'+o[n].name+'"'),void 0!==s&&u.push('"'.concat(s,'"'));return u.join(" ")})).join("\n");p(e),x(l.length+1)}else p("")}),[l]),(0,e.useImperativeHandle)(t,(function(){return{updateAll:function(){var e=f.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));try{var n=e.map((function(e,n){var t=e.match(/^(-?\d+)\s+(-?\d+)\s+(\d+)(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?(?:\s+("[^"]*"))?$/);if(null===t)throw"line #".concat(n+1," had an unrecognized format.");var r=t.slice(1).filter((function(e){return void 0!==e&&e.length>0}));if(r.length<3)throw"Too few arguments were found in line #".concat(n+1);var a=r[0],i=Number.parseInt(a),l="The provided nucleotide index #1 in line #".concat(n+1," is not an integer.");if(!/^-?\d+$/.test(a))throw l;if(Number.isNaN(i))throw l;var d=r[1],f=Number.parseInt(d),p="The provided nucleotide index #2 in line #".concat(n+1," is not an integer.");if(!/^-?\d+$/.test(d))throw p;if(Number.isNaN(f))throw p;var h=r[2],v="The provided helix length in line #".concat(n+1," is not a non-negative integer.");if(!/^\d+$/.test(h))throw v;var m,x=Number.parseInt(h);if(Number.isNaN(x))throw v;function y(e){var n=/^"(.*)"$/.exec(e);return null!==n&&(e=n[1]),e}if(r.length<6){if(void 0===s)throw"No name was provided for the RNA complex in line #".concat(n+1,".");m=s}else{var b=y(r[5]);if(-1===(m=g.findIndex((function(e){return b===e}))))throw"The provided RNA complex name in line #".concat(n+1," does not match any existing RNA complex's name.")}var N,I,C=o[m];if(r.length<4){if(void 0===u)throw"No name was provided for RNA-molecule #1 in line #".concat(n+1,".");N=u}else N=y(r[3]);if(!(N in C.rnaMoleculeProps))throw"The name provided for RNA molecule #1 in line #".concat(n+1," does not match any existing RNA molecule's name.");if(r.length<5){if(void 0===c)throw"No name was provided for RNA-molecule #2 in line #".concat(n+1,".");I=c}else I=y(r[4]);if(!(I in C.rnaMoleculeProps))throw"The name provided for RNA molecule #2 in line #".concat(n+1," does not match any existing RNA molecule's name.");for(var S=C.rnaMoleculeProps[N],E=C.rnaMoleculeProps[I],w=0;w<x;w++){var A=i+w,k=f-w;if(!(A in S.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(A,".");if(!(k in E.nucleotideProps))throw"The provided helix data includes a non-existent nucleotide at nucleotide index #".concat(k,".")}var P=void 0,T=r[6];if(void 0!==T&&(T=y(T).toLocaleLowerCase(),void 0===(P=rt.types.find((function(e){return e.toLocaleLowerCase()===T})))))throw'The provided base-pair type "'.concat(P,'" in line #').concat(n+1," was not recognized.");return{rnaComplexIndex:m,rnaMoleculeName0:N,rnaMoleculeName1:I,nucleotideIndex0:i,nucleotideIndex1:f,length:x,type:P}}));i(n),a(n)}catch(t){if("string"===typeof t)return void alert(t);throw t}}}})),(0,Gn.jsx)("textarea",{style:{width:"99%",height:"".concat(r*v,"px"),fontSize:"".concat(r,"px")},value:f,onInput:function(e){var n,t;x((null!==(n=null===(t=e.target.value.match(/\n/g))||void 0===t?void 0:t.length)&&void 0!==n?n:-1)+2)},onChange:function(e){var n=e.target.value;p(n)}})})),c=n.TableBasedEditor=(0,e.forwardRef)((function(n,t){var r=n.rnaComplexProps,o=n.setBasePairs,a=n.approveBasePairs,i=n.initialBasePairs,l=n.defaultRnaComplexIndex,s=n.defaultRnaMoleculeName0,u=n.defaultRnaMoleculeName1,c=n.setBasePairKeysToEdit,p=n.populateBasePairKeysToEdit,h=n.repositionWithCalculatedDistances,x=n.setRepositionWithCalculatedDistances;(0,e.useImperativeHandle)(t,(function(){return{updateAll:function(){E(b,new Set)}}}));var g=y((0,e.useState)([]),2),b=g[0],N=g[1],I=y((0,e.useState)([]),2),C=I[0],S=I[1];function E(e,n){try{a(e);var t=o(e,n);N(t)}catch(r){if("string"===typeof r)return void alert(r);throw r}}var k=(0,e.useContext)(zr.App.PushToUndoStack),P=(0,e.useMemo)((function(){return Object.entries(r).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{rnaComplexIndex:Number.parseInt(t),singularRnaComplexProps:r}}))}),[r]);return(0,e.useEffect)((function(){var e,n=new Array,t=new Array,r=m(null!==i&&void 0!==i?i:[]);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=d({rnaComplexIndex:l,rnaMoleculeName0:s,rnaMoleculeName1:u},o);void 0===a.rnaComplexIndex||void 0===a.rnaMoleculeName0||void 0===a.rnaMoleculeName1||void 0===a.nucleotideIndex0||void 0===a.nucleotideIndex1||void 0===a.length?t.push(a):n.push(a)}}catch(c){r.e(c)}finally{r.f()}N(n),0===t.length&&t.push({}),S(t)}),[i]),(0,Gn.jsx)("div",{className:"visible-scrollbar",style:{overflow:"scroll",overflowX:"hidden",background:"inherit",position:"sticky"},children:(0,Gn.jsxs)("table",{style:{border:"inherit",borderCollapse:"collapse",borderSpacing:0,width:"auto",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:[(0,Gn.jsx)("thead",{style:{border:"1px solid black",position:"sticky",top:-1,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:(0,Gn.jsxs)("tr",{style:{border:"inherit",position:"sticky",top:0,background:"inherit"},children:[(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA complex"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #1"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #1"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"RNA molecule #2"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Nucleotide #2"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Length"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Type"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Edit"}),(0,Gn.jsx)("th",{style:{border:"inherit",position:"sticky",top:0,boxShadow:"0 2px 2px -1px rgba(0, 0, 0, 0.4)",background:"inherit"},children:"Add / Delete"})]})}),(0,Gn.jsxs)("tbody",{style:{border:"inherit"},children:[b.map((function(e,n){var t=e.rnaComplexIndex,o=e.rnaMoleculeName0,a=e.rnaMoleculeName1,i=e.nucleotideIndex0,l=e.nucleotideIndex1,s=e.length,u=e.type,d=r[t];return(0,Gn.jsxs)("tr",{style:{textAlign:"center"},children:[(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:d.name}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:o}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:i}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:a}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:l}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:s}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:null!==u&&void 0!==u?u:"auto"}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,Gn.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){k();var t=C[0];void 0===t.rnaComplexIndex&&void 0===t.rnaMoleculeName0&&void 0===t.rnaMoleculeName1&&void 0===t.nucleotideIndex0&&void 0===t.nucleotideIndex1&&void 0===t.length&&void 0===t.type?S([e]):S([].concat(v(C),[e])),N([].concat(v(b.slice(0,n)),v(b.slice(n+1))));var r={};p(e,r,"delete"),c(r)},children:"Edit"})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",textAlign:"center"},children:(0,Gn.jsx)("button",{style:{width:"100%",height:"100%"},onClick:function(){k();for(var e=new Set,t=0;t<b.length;t++)e.add(t);E([].concat(v(b.slice(0,n)),v(b.slice(n+1))),e)},children:"Delete"})})]},n)})),(0,Gn.jsxs)("tr",{style:{border:"1px solid black",background:"black",height:10},children:[(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{}),(0,Gn.jsx)("td",{})]}),C.map((function(e,n){function t(){for(var n=new Set,t=0;t<b.length-1;t++)n.add(t);var r=v(b),o=structuredClone(e);A(r,(function(e){var n=e.rnaComplexIndex,t=e.rnaMoleculeName0,r=e.rnaMoleculeName1,a=e.nucleotideIndex0,i=e.nucleotideIndex1;return n-o.rnaComplexIndex||t.localeCompare(o.rnaMoleculeName0)||r.localeCompare(o.rnaMoleculeName1)||a-o.nucleotideIndex0||i-o.nucleotideIndex1}),0,[o],w.ADD),E(r,n)}var o=0===n?function(){k(),t(),e.rnaComplexIndex=void 0,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,e.length=void 0,e.type=void 0,S(v(C))}:function(){k(),t(),S([].concat(v(C.slice(0,n)),v(C.slice(n+1))))};return(0,Gn.jsx)(f,d(d({},e),{},{setRnaComplexIndex:function(n){e.rnaComplexIndex=n,e.rnaMoleculeName0=void 0,e.rnaMoleculeName1=void 0,e.nucleotideIndex0=void 0,e.nucleotideIndex1=void 0,S(v(C))},setRnaMoleculeName0:function(n){e.rnaMoleculeName0=n,e.nucleotideIndex0=void 0,S(v(C))},setRnaMoleculeName1:function(n){e.rnaMoleculeName1=n,e.nucleotideIndex1=void 0,S(v(C))},setNucleotideIndex0:function(n){e.nucleotideIndex0=n,S(v(C))},setNucleotideIndex1:function(n){e.nucleotideIndex1=n,S(v(C))},setLength:function(n){e.length=n,S(v(C))},setType:function(n){e.type=n,S(v(C))},rnaComplexProps:r,flattenedRnaComplexProps:P,addButtonOnClick:o,repositionWithCalculatedDistances:h,setRepositionWithCalculatedDistances:x}),n)}))]})]})})}));u(t={},a.TEXT_BASED,s),u(t,a.TABLE_BASED,c);function f(n){var t=n.rnaComplexIndex,o=n.rnaMoleculeName0,a=n.rnaMoleculeName1,i=n.nucleotideIndex0,l=n.nucleotideIndex1,s=n.length,u=n.type,c=n.flattenedRnaComplexProps,d=n.rnaComplexProps,f=n.setRnaComplexIndex,p=n.setRnaMoleculeName0,h=n.setRnaMoleculeName1,m=n.setNucleotideIndex0,x=n.setNucleotideIndex1,g=n.setLength,y=n.setType,b=n.addButtonOnClick,N=(0,e.useMemo)((function(){var e=void 0,n=new Array;return void 0!==t&&(e=d[t],n=Object.keys(e.rnaMoleculeProps)),{singularRnaComplexProps:e,rnaMoleculeNames:n}}),[t]),I=N.singularRnaComplexProps,C=N.rnaMoleculeNames,S=(0,e.useMemo)((function(){return void 0===o?void 0:I.rnaMoleculeProps[o]}),[o]),E=(0,e.useMemo)((function(){return void 0===a?void 0:I.rnaMoleculeProps[a]}),[a]);return(0,Gn.jsxs)("tr",{style:{border:"inherit",maxHeight:r},children:[(0,Gn.jsx)("td",{style:{border:"1px solid black"},children:(0,Gn.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==t&&void 0!==t?t:-1,onChange:function(e){var n=Number.parseInt(e.target.value);f(n)},children:[(0,Gn.jsx)("option",{style:{display:"none"},children:"Select an RNA complex"}),c.map((function(e){var n=e.rnaComplexIndex,t=e.singularRnaComplexProps;return(0,Gn.jsx)("option",{value:n,children:t.name},n)}))]})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===C.length,value:o,onChange:function(e){var n=e.target.value;p(n)},children:[(0,Gn.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),C.map((function(e){return(0,Gn.jsx)("option",{value:e,children:e},e)}))]})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsx)(it.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===S,value:null!==i&&void 0!==i?i:NaN,setValue:m,stringToValue:function(e){var n=Ze(e);return void 0===n||n in S.nucleotideProps?n:{errorMessage:"Nucleotide #".concat(n," does not exist in RNA molecule #1")}}})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsxs)("select",{style:{width:"100%",height:"100%"},disabled:0===C.length,value:a,onChange:function(e){var n=e.target.value;h(n)},children:[(0,Gn.jsx)("option",{style:{display:"none"},children:"Select an RNA molecule"}),C.map((function(e){return(0,Gn.jsx)("option",{value:e,children:e},e)}))]})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsx)(it.Integer,{style:{verticalAlign:"middle",width:"100%",height:"100%"},disabledFlag:void 0===E,value:null!==l&&void 0!==l?l:NaN,setValue:x,stringToValue:function(e){var n=Ze(e);return void 0===n||n in E.nucleotideProps?n:{errorMessage:"Nucleotide #".concat(n," does not exist in RNA molecule #2")}}})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsx)(it.Integer,{style:{width:"100%",height:"100%"},value:null!==s&&void 0!==s?s:NaN,setValue:g,stringToValue:function(e){var n=Ze(e);return void 0!==n&&n<0?{errorMessage:"Length must be non-negative"}:n}})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r},children:(0,Gn.jsxs)("select",{style:{width:"100%",height:"100%"},value:null!==u&&void 0!==u?u:-1,onChange:function(e){var n=e.target.value;y("auto"===n?void 0:n)},children:[(0,Gn.jsx)("option",{style:{display:"none"},children:"Select a base-pair type"}),["auto"].concat(v(rt.types)).map((function(e){return(0,Gn.jsx)("option",{value:e,children:e},e)}))]})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r,textAlign:"center"},children:(0,Gn.jsx)("span",{style:{width:"100%",height:"100%",textAlign:"center"},children:"N/A"})}),(0,Gn.jsx)("td",{style:{border:"1px solid black",maxHeight:r,padding:"4px"},children:(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,Gn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"10px",whiteSpace:"nowrap"},children:[(0,Gn.jsx)("input",{type:"checkbox",checked:n.repositionWithCalculatedDistances||!1,onChange:function(e){var t;return null===(t=n.setRepositionWithCalculatedDistances)||void 0===t?void 0:t.call(n,e.target.checked)},style:{margin:0,transform:"scale(0.8)"}}),(0,Gn.jsx)("span",{children:"Reposition"})]}),(0,Gn.jsx)("button",{disabled:!(void 0!==t&&void 0!==o&&void 0!==a&&void 0!==i&&void 0!==l&&void 0!==s&&s>=0),style:{width:"100%",height:"20px",fontSize:"10px"},onClick:b,children:"Add"})]})})]})}n.Component=function(n){var t=n.rnaComplexProps,r=(n.approveBasePairs,n.initialBasePairs),i=(n.defaultRnaComplexIndex,n.defaultRnaMoleculeName0,n.defaultRnaMoleculeName1,(0,e.useContext)(zr.Nucleotide.SetKeysToRerender)),l=(0,e.useContext)(zr.BasePair.SetKeysToEdit),s=(0,e.useContext)(zr.App.Settings),u=(0,e.useContext)(zr.BasePair.AverageDistances),c=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),d=(0,e.useContext)(zr.App.PushToUndoStack),f=y((0,e.useState)(a.TABLE_BASED),2),p=(f[0],f[1],y((0,e.useState)(!1),2)),h=p[0],x=(p[1],y((0,e.useState)(o),2)),g=x[0],b=x[1],N=y((0,e.useState)(o),2),I=N[0],C=N[1],E=y((0,e.useState)(1),2),w=E[0],A=E[1],k=y((0,e.useState)(1),2),T=k[0],M=k[1],R=y((0,e.useState)(1),2),_=R[0],B=R[1],z=y((0,e.useState)(1),2),U=z[0],H=z[1],K=y((0,e.useState)(!1),2),q=K[0],Q=K[1],Y=y((0,e.useState)([]),2),$=Y[0],Z=Y[1],J=y((0,e.useState)(r),2),ee=(J[0],J[1]),ne=(0,e.useRef)();ne.current=$;var te=(0,e.useRef)();te.current=h;var re=(0,e.useRef)();re.current=g;var oe=(0,e.useRef)();oe.current=I;var ae=(0,e.useRef)();ae.current=w;var ie=(0,e.useRef)();ie.current=_;var le=(0,e.useRef)();le.current=T;var se=(0,e.useRef)();se.current=U;var ue=(0,e.useRef)();ue.current=c;var ce=(0,e.useMemo)((function(){return function(e,n,r){var o=ue.current,a=new Array,i=e.rnaComplexIndex,l=e.rnaMoleculeName0,s=e.rnaMoleculeName1,u=e.nucleotideIndex0,c=e.nucleotideIndex1,d=e.length,f=e.type,p=e.types,h=te.current;i in n||(n[i]={add:[],delete:[]});var x=n[i],g=x[r],b=x.delete,N=t[i],I=N.rnaMoleculeProps[l],C=N.rnaMoleculeProps[s];u-=I.firstNucleotideIndex,c-=C.firstNucleotideIndex;for(var S=(i in o?o[i]:{}),E=(l in S?S[l]:new Set),w=(s in S?S[s]:new Set),A=[],k=[],P=function(){var e=u+T,n=c-T,t=E.has(e)||w.has(n);if(!t&&l in N.basePairs){var o=N.basePairs[l];if(e in o){var i,d=m(o[e]);try{for(d.s();!(i=d.n()).done;){var x=i.value;if(x.rnaMoleculeName in S){var I=S[x.rnaMoleculeName];t||(t=I.has(u))}}}catch(G){d.e(G)}finally{d.f()}}}if(!t&&s in N.basePairs){var C=N.basePairs[s];if(n in C){var P,M=m(C[n]);try{for(M.s();!(P=M.n()).done;){var R=P.value;if(R.rnaMoleculeName in S){var _=S[R.rnaMoleculeName];t||(t=_.has(c))}}}catch(G){M.e(G)}finally{M.f()}}}if(t)return a.push(T),A.push(T),"continue";var j=y([{rnaMoleculeName:l,nucleotideIndex:e},{rnaMoleculeName:s,nucleotideIndex:n}].sort(oo),2),O={keys0:j[0],keys1:j[1]};if("add"===r)try{var L=ro(N,l,e,s,n,h?to.DELETE_PREVIOUS_MAPPING:to.DO_NOTHING,{basePairType:null!==f&&void 0!==f?f:void 0===p?void 0:p[T]});b.push.apply(b,[O].concat(v(L)))}catch(H){if("string"===typeof H)return a.push(T),k.push(T),"continue";throw H}else if("delete"===r){var D=N.basePairs[l],F=N.basePairs[s];if(e in D){var B=D[e],W=B.findIndex((function(e){return e.rnaMoleculeName===s&&e.nucleotideIndex===n}));-1!==W&&(1===B.length?delete D[e]:D[e]=[].concat(v(B.slice(0,W)),v(B.slice(W+1))))}if(n in F){var z=F[n],U=z.findIndex((function(n){return n.rnaMoleculeName===l&&n.nucleotideIndex===e}));-1!==U&&(1===z.length?delete F[n]:F[n]=[].concat(v(z.slice(0,U)),v(z.slice(U+1))))}}g.push(O)},T=0;T<d;T++)P();var M=[];return A.length>0&&M.push(["The following base pairs were not ".concat({add:"added",delete:"deleted"}[r]," due to the involvement of frozen nucleotide(s):")].concat(v(A.map((function(e){return"Base pair #".concat(e+1)})))).join("\n")),k.length>0&&M.push(["The following base pairs were not added due to conflicting, preexisting base pair(s). Activate the relevant setting if you want to override them:"].concat(v(k.map((function(e){return"#".concat(e+1)})))).join("\n")),a}}),[]),de=(0,e.useMemo)((function(){return function(e){var n,r=m(e);try{var o=function(){var e=n.value,r=t[e.rnaComplexIndex],o=r.rnaMoleculeProps[e.rnaMoleculeName0],a=r.rnaMoleculeProps[e.rnaMoleculeName1],i=r.basePairs[e.rnaMoleculeName0];e.types=[];for(var l=function(){var n,t=e.nucleotideIndex0-o.firstNucleotideIndex+s,r=e.nucleotideIndex1-a.firstNucleotideIndex-s,l=i[t].find((function(n){var t=n.rnaMoleculeName,o=n.nucleotideIndex;return t===e.rnaMoleculeName1&&o===r}));e.types.push(null!==(n=l.basePairType)&&void 0!==n?n:et(o.nucleotideProps[t].symbol,a.nucleotideProps[r].symbol))},s=0;s<e.length;s++)l()};for(r.s();!(n=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}Z(e)}}),[]),fe=(0,e.useMemo)((function(){return function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,o=arguments.length>2?arguments[2]:void 0,a=re.current,u=oe.current,c=ne.current,d=ae.current,f=ie.current,p=le.current,h=se.current,v={},x=new Array,g=m(c);try{for(g.s();!(n=g.n()).done;){var y,b=n.value,N=ce(b,v,"delete"),I=Number.NaN,C=m(N);try{for(C.s();!(y=C.n()).done;){var E=y.value,w=b.rnaComplexIndex,A=b.rnaMoleculeName0,k=b.rnaMoleculeName1,T=b.nucleotideIndex0,M=b.nucleotideIndex1,R=b.type;if(E===I+1){var _=x[x.length-1];_.type===R?_.length++:x.push({rnaComplexIndex:w,rnaMoleculeName0:A,rnaMoleculeName1:k,nucleotideIndex0:T+E,nucleotideIndex1:M-E,length:1,type:R})}else x.push({rnaComplexIndex:w,rnaMoleculeName0:A,rnaMoleculeName1:k,nucleotideIndex0:T+E,nucleotideIndex1:M-E,length:1,type:R});I=E}}catch(Je){C.e(Je)}finally{C.f()}}}catch(Je){g.e(Je)}finally{g.f()}var j,B=new Set,z=m(e);try{for(z.s();!(j=z.n()).done;){var U,H=j.value,K=ce(H,v,"add"),Q=H.rnaComplexIndex,Y=H.rnaMoleculeName0,$=H.rnaMoleculeName1,Z=H.nucleotideIndex0,J=H.nucleotideIndex1,ee=H.length,te=H.type,ue=-1,fe=m(K);try{for(fe.s();!(U=fe.n()).done;){var he=U.value;if(0!==he){var ve=he-ue-1;x.push({rnaComplexIndex:Q,rnaMoleculeName0:Y,rnaMoleculeName1:$,nucleotideIndex0:Z+he-ve,nucleotideIndex1:J-he+ve,length:ve,type:te}),ue=he}B.add(he)}}catch(Je){fe.e(Je)}finally{fe.f()}ue!==ee-1&&x.push({rnaComplexIndex:Q,rnaMoleculeName0:Y,rnaMoleculeName1:$,nucleotideIndex0:Z+ue+1,nucleotideIndex1:J-(ue+1),length:ee-ue-1,type:te})}}catch(Je){z.e(Je)}finally{z.f()}if(null!==o&&void 0!==o?o:a||u){for(var me={},xe=x.map((function(e,n){var o=t[e.rnaComplexIndex],a=o.rnaMoleculeProps[e.rnaMoleculeName0],i=o.rnaMoleculeProps[e.rnaMoleculeName1],l=e.nucleotideIndex0-a.firstNucleotideIndex,s=e.nucleotideIndex1-i.firstNucleotideIndex,u=new Array,c=e.rnaComplexIndex,d=e.rnaMoleculeName0,f=e.rnaMoleculeName1;c in me||(me[c]={});var p=me[c];d in p||(p[d]=[]);var h=p[d];f in p||(p[f]=[]);for(var v=p[f],m=function(){var t=l+x,c=s-x;h.push(t),v.push(c);var p=a.nucleotideProps[t],m=i.nucleotideProps[c],g=e.type;if(void 0===g&&d in o.basePairs){var y=o.basePairs[d];if(t in y){var b=y[t].find((function(e){return e.rnaMoleculeName===f&&e.nucleotideIndex===c}));void 0!==b&&(g=b.basePairType)}}void 0===g&&(g=et(p.symbol,m.symbol));var N=!r.has(n),I=pe.current;if(I){var C=t+a.firstNucleotideIndex,S=c+i.firstNucleotideIndex,E=(void 0===I.start||C>=I.start)&&(void 0===I.end||C<=I.end),w=(void 0===I.start||S>=I.start)&&(void 0===I.end||S<=I.end);N=E||w}u.push({0:p,1:m,basePairType:g,allowRepositioningFlag:N})},x=0;x<e.length;x++)m();return u})),ge=0;ge<xe.length;ge++){var ye=xe[ge];if(0!==ye.length){for(var be=ye[0],Ne=be[0],Ie=be[1],Ce=F(O(Ne,Ie),.5),Se=W(L(Ie,Ne)),Ee=G(Se),we=0,Ae=0;Ae<ye.length;Ae++)for(var ke=ye[Ae],Pe=0,Te=[ke[0],ke[1]];Pe<Te.length;Pe++){we+=S(X(L(Te[Pe],Ce),Ee))}we<0&&(Ee=D(Ee));for(var Me=0;Me<ye.length;Me++){var Re=ye[Me],_e=Re[0],je=Re[1],Oe=Re.basePairType,Le=F(O(_e,je),.5),De=L(je,_e),Fe=W(De),Be=0;if(Re.allowRepositioningFlag&&a)if(q){var We=s[Hn.CANONICAL_BASE_PAIR_DISTANCE],ze=s[Hn.MISMATCH_BASE_PAIR_DISTANCE],Ue=s[Hn.WOBBLE_BASE_PAIR_DISTANCE];switch(Oe){case rt.Type.CIS_WATSON_CRICK_WATSON_CRICK:case rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case rt.Type.CANONICAL:Be=Number.isNaN(We)?d:We;break;case rt.Type.MISMATCH:Be=Number.isNaN(ze)?p:ze;break;case rt.Type.WOBBLE:Be=Number.isNaN(Ue)?f:Ue;break;default:Be=Number.isNaN(ze)?p:ze}}else switch(Oe){case rt.Type.CIS_WATSON_CRICK_WATSON_CRICK:case rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case rt.Type.CANONICAL:Be=d;break;case rt.Type.MISMATCH:Be=p;break;case rt.Type.WOBBLE:Be=f;break;default:Be=p}else Be=V(De);if(Be*=.5,Re.allowRepositioningFlag&&u)Le=O(Ce,F(Ee,Me*(q?Number.isNaN(s[Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS])?h:s[Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS]:h))),Fe=Se;var Ge=L(Le,De=F(Fe,Be)),He=O(Le,De);_e.x=Ge.x,_e.y=Ge.y,je.x=He.x,je.y=He.y}}}for(var Ke=0,Ve=Object.values(me);Ke<Ve.length;Ke++)for(var qe=Ve[Ke],Qe=0,Xe=Object.values(qe);Qe<Xe.length;Qe++){Xe[Qe].sort(P)}i(me)}for(var Ye=0,$e=Object.values(v);Ye<$e.length;Ye++){var Ze=$e[Ye];Ze.add.sort(ao),Ze.delete.sort(ao)}return l(v),de(x),x}}),[]),pe=(0,e.useRef)(null);return(0,e.useEffect)((function(){function e(e){pe.current=e.detail||{},d(),fe(v($),new Set)}return window.addEventListener("triggerReformatRange",e),function(){return window.removeEventListener("triggerReformatRange",e)}}),[$]),(0,e.useEffect)((function(){var e,n={},t=m(rt.types);try{for(t.s();!(e=t.n()).done;){for(var r=e.value,o=[],i=0,l=Object.values(u);i<l.length;i++){var c=l[i].distances;o.push(c[r])}n[r]=j(o)}}catch(_){t.e(_)}finally{t.f()}var d=[n[rt.Type.CANONICAL],n[rt.Type.CIS_WATSON_CRICK_WATSON_CRICK],n[rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK]].filter((function(e){return!Number.isNaN(e)}));function f(e){return 1*e.reduce((function(e,n){return e+n}))/e.length}for(var p=0===d.length?1:f(d),h=rt.types.filter((function(e){return e!==rt.Type.CANONICAL&&e!==rt.Type.CIS_WATSON_CRICK_WATSON_CRICK&&e!==rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK&&e!==rt.Type.WOBBLE})).map((function(e){return n[e]})).filter((function(e){return!Number.isNaN(e)})),v=0===h.length?1:f(h),x=n[rt.Type.WOBBLE],g=0,y=0,N=0,I=Object.values(u);N<I.length;N++){var S=I[N].helixDistance;Number.isNaN(S)||(g+=S,y++)}var E=g/y,w=(a.TABLE_BASED,s[Hn.REPOSITION_NUCLEOTIDES_WHEN_FORMATTING]),k=s[Hn.CANONICAL_BASE_PAIR_DISTANCE],P=s[Hn.MISMATCH_BASE_PAIR_DISTANCE],T=s[Hn.WOBBLE_BASE_PAIR_DISTANCE],R=s[Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS];b(w),C(w),A(Number.isNaN(k)?Number.isNaN(p)?1:p:k),M(Number.isNaN(P)?Number.isNaN(v)?1:v:P),B(Number.isNaN(T)?Number.isNaN(x)?1:x:T),H(Number.isNaN(R)?Number.isNaN(E)?1:E:R)}),[u]),(0,e.useEffect)((function(){ee(r),de(void 0===r?[]:r.filter((function(e){return void 0!==e.rnaComplexIndex&&void 0!==e.rnaMoleculeName0&&void 0!==e.rnaMoleculeName1&&void 0!==e.nucleotideIndex0&&void 0!==e.nucleotideIndex1&&void 0!==e.length})))}),[r]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)(ot.Component,{title:"Base-pairs editor",initialCollapsedFlag:!1,children:[(0,Gn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px",padding:"6px 8px",borderRadius:"4px",backgroundColor:q?"#e8f5e8":"transparent",border:q?"1px solid #4caf50":"1px solid transparent",transition:"all 0.2s ease"},children:[(0,Gn.jsx)("input",{type:"checkbox",checked:q,onChange:function(e){return Q(e.target.checked)},style:{margin:0}}),(0,Gn.jsx)("span",{style:{fontSize:"12px",fontWeight:q?"600":"400",color:q?"#2e7d32":"inherit"},children:"Reposition nucleotides with calculated distances"}),q&&(0,Gn.jsx)("span",{style:{fontSize:"10px",color:"#666",fontStyle:"italic",marginLeft:"4px"},children:"(Using auto-calculated values from uploaded structure)"})]}),(0,Gn.jsx)("br",{})]}),(0,Gn.jsx)("div",{style:{display:"none"},children:(0,Gn.jsx)("button",{id:"__hidden_reformat_button__",onClick:function(){d(),fe(v($),new Set)},children:"Re-format all"})})]})},(l||(l=n.EditorTypeSelector||(n.EditorTypeSelector={}))).Component=function(e){var n=e.editorType,t=e.onChange;return(0,Gn.jsx)("select",{value:n,onChange:function(e){t(e.target.value)},children:i.map((function(e,n){return(0,Gn.jsx)("option",{value:e,children:e},n)}))})},n.TableRow=f}(at||(at={}));var lt,st,ut,ct,dt,ft="#7491C8",pt="#A47764",ht={colors:{primary:ft,primaryHover:"#6683BA",primaryActive:"#5A78AF",background:"#EFE8E0",backgroundSecondary:"#EAE2DA",surface:"#F4EEE7",surfaceHover:"#EDE5DD",border:"#D9CFC8",borderLight:"#E7DFD7",borderDark:"#C9BFB7",text:"#2C2320",textSecondary:"#5B4E48",textMuted:"#8E847E",textInverse:"#FFFFFF",success:"#899F6A",warning:"#D1A56C",error:"#C96B5A",info:ft,accent:pt,accentHover:"#8F6657",shadow:"rgba(61, 35, 19, 0.06)",overlay:"rgba(40, 26, 18, 0.40)",highlight:"#F2E9E2",successLight:"#EDF2E6",warningLight:"#FFF1DB",errorLight:"#F6E6E4",infoLight:"#E8EFF9",textStrong:"#1E1512",textWeak:"#A09088",surfaceStrong:"#E5DBD3",surfaceWeak:"#FAF7F2"},spacing:{xs:"4px",sm:"8px",md:"12px",lg:"16px",xl:"20px",xxl:"24px",xxxl:"32px"},typography:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:{xs:"12px",sm:"13px",md:"15px",lg:"17px",xl:"19px",xxl:"22px"},fontWeight:{light:"300",normal:"400",medium:"500",semibold:"600",bold:"700"},lineHeight:{tight:"1.3",normal:"1.6",relaxed:"1.8"}},borderRadius:{none:"0",sm:"4px",md:"8px",lg:"10px",xl:"14px",full:"9999px"},shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.05), 0 1px 1px rgba(0,0,0,0.03)",md:"0 3px 8px rgba(16,24,20,0.08)",lg:"0 8px 20px rgba(16,24,20,0.10)",xl:"0 16px 32px rgba(16,24,20,0.12)",inner:"inset 0 2px 4px rgba(0,0,0,0.04)"},buttonSizes:{sm:{height:"30px",padding:"0 10px",fontSize:"13px",iconSize:"16px",borderRadius:"6px"},md:{height:"38px",padding:"0 14px",fontSize:"15px",iconSize:"18px",borderRadius:"8px"},lg:{height:"46px",padding:"0 18px",fontSize:"17px",iconSize:"20px",borderRadius:"10px"}},transitions:{default:"all 0.18s ease-out",fast:"all 0.12s ease-out",slow:"all 0.28s ease-out"},colorPalleteCircleFills:["#E8C26A","#A9E890","#E890C0"]},vt={colors:{primary:"#C89B85",primaryHover:"#BE8F79",primaryActive:"#B4836D",background:"#25211F",backgroundSecondary:"#292421",surface:"#2E2826",surfaceHover:"#352E2B",border:"#3A332F",borderLight:"#473F3B",borderDark:"#2E2724",text:"#F3EEEA",textSecondary:"#D9CFC8",textMuted:"#B7AAA4",textInverse:"#0F0E0D",success:"#94B17E",warning:"#D2A274",error:"#C77C6F",info:"#A1BDE6",accent:pt,accentHover:"#B78976",shadow:"rgba(0, 0, 0, 0.45)",overlay:"rgba(14, 10, 8, 0.68)",highlight:"#302A27",successLight:"#1E261C",warningLight:"#272016",errorLight:"#261A18",infoLight:"#182231",textStrong:"#FAF7F4",textWeak:"#B9ADA7",surfaceStrong:"#292421",surfaceWeak:"#352E2B"},spacing:ht.spacing,typography:ht.typography,borderRadius:ht.borderRadius,shadows:{none:"none",sm:"0 1px 2px rgba(0,0,0,0.22)",md:"0 4px 10px rgba(0,0,0,0.32)",lg:"0 10px 24px rgba(0,0,0,0.38)",xl:"0 18px 40px rgba(0,0,0,0.44)",inner:"inset 0 2px 4px rgba(0,0,0,0.28)"},buttonSizes:ht.buttonSizes,transitions:ht.transitions,colorPalleteCircleFills:["#4E7DA6","#7A9E3E","#C84E4E"]},mt=(0,e.createContext)(void 0),xt=function(n){var t=n.children,r=n.settingsRecord,o=n.updateSettings,a=y((0,e.useState)(!1),2),i=a[0],l=a[1],s=e.useRef(i);s.current=i;var c=e.useRef(o);c.current=o,(0,e.useEffect)((function(){if(r&&void 0!==r[Hn.DARK_MODE])l(!!r[Hn.DARK_MODE]);else if("undefined"!==typeof window&&window.matchMedia){var e=window.matchMedia("(prefers-color-scheme: dark)");l(e.matches)}}),[r]),(0,e.useEffect)((function(){var e;if((!r||void 0===r[Hn.DARK_MODE])&&"undefined"!==typeof window&&window.matchMedia){var n=window.matchMedia("(prefers-color-scheme: dark)"),t=function(e){return l(e.matches)};return null===(e=n.addEventListener)||void 0===e||e.call(n,"change",t),function(){var e;return null===(e=n.removeEventListener)||void 0===e?void 0:e.call(n,"change",t)}}}),[r]);var d=(0,e.useCallback)((function(e){var n=c.current;l(e),n&&n(u({},Hn.DARK_MODE,e))}),[]),f=(0,e.useCallback)((function(){return d(!s.current)}),[]),p=i?vt:ht;(0,e.useEffect)((function(){var e=document.documentElement,n=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(n).reduce((function(r,o){var a=t.length?t+"-":"";return"object"===typeof n[o]&&null!==n[o]?Object.assign(r,e(n[o],a+o)):r[a+o]=n[o],r}),{})},t={color:p.colors,spacing:p.spacing,"font-size":p.typography.fontSize,"font-weight":p.typography.fontWeight,"line-height":p.typography.lineHeight,"border-radius":p.borderRadius,shadow:p.shadows,transition:p.transitions};Object.entries(t).forEach((function(t){var r=y(t,2),o=r[0],a=r[1],i=n(a);Object.entries(i).forEach((function(n){var t=y(n,2),r=t[0],a=t[1];e.style.setProperty("--".concat(o,"-").concat(r),a)}))})),e.style.setProperty("--font-family",p.typography.fontFamily),e.setAttribute("data-theme",i?"dark":"light")}),[p,i]);var h=(0,e.useMemo)((function(){return{theme:p,isDarkMode:i,toggleTheme:f,setTheme:d}}),[p,i,f,d]);return(0,Gn.jsx)(mt.Provider,{value:h,children:t})},gt=function(){var n=(0,e.useContext)(mt);if(void 0===n)throw new Error("useTheme must be used within a ThemeProvider");return n};function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yt.apply(this,arguments)}function bt(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}!function(n){n.populateRegions=function(e,n,t){var r=Number.NaN,o=Number.NaN;n.sort(P);for(var a=0;a<n.length;a++){var i=n[a];e.has(i)?(Number.isNaN(r)||t.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o}),r=Number.NaN):(Number.isNaN(r)&&(r=i),o=i)}Number.isNaN(r)||t.push({minimumNucleotideIndexInclusive:r,maximumNucleotideIndexInclusive:o})};var t=function(e){return e.CREATE="create",e.DELETE="delete",e}({});n.Component=function(n){var r=n.regions,o=n.rnaComplexProps,a=n.setNucleotideKeysToRerender,i=(0,e.useContext)(zr.BasePair.AverageDistances),l=(0,e.useContext)(zr.Label.Content.DefaultStyles),s=(0,e.useContext)(zr.App.PushToUndoStack),u=gt().theme,c=y((0,e.useState)(!0),2),f=c[0],p=c[1],h=y((0,e.useState)(!0),2),x=h[0],g=h[1],b=y((0,e.useState)(!1),2),N=b[0],I=b[1],C=y((0,e.useState)(10),2),E=C[0],w=C[1],A=y((0,e.useState)(de().startingNucleotideIndicesPerRegion),2),k=A[0],T=A[1],M=y((0,e.useState)(de().startingNucleotideOverridingIndicesForLabelsPerRegion),2),R=M[0],_=M[1],j=y((0,e.useState)(!0),2),O=j[0],D=j[1],B=y((0,e.useState)(!1),2),G=(B[0],B[1],y((0,e.useState)(void 0),2)),H=G[0],K=G[1],q=y((0,e.useState)(-1),2),Q=q[0],X=q[1],J=y((0,e.useState)(-1),2),ee=J[0],ne=J[1],te=y((0,e.useState)(-1),2),re=te[0],oe=te[1],ae=y((0,e.useState)(void 0),2),ie=ae[0],le=ae[1];function se(e,n,t,r){R[e][n][t]=r,_(structuredClone(R))}function ue(e,n){var t=e[n],r=n-1,o=r in e,a=n+1,i=a in e;return o&&i?Z(.5*($(L(t,e[r]))+$(L(e[a],t)))):o?W(L(t,e[r])):i?W(L(e[a],t)):{x:1,y:0}}function ce(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,i={};for(var s in r){var u=Number.parseInt(s);u in i||(i[u]={});var c=i[u],p=ve.averageDistances[u],h=ve.rightOrthogonalizationFlagRecord[u],v=k[u],m=R[u],g=r[u],y=o[u].rnaMoleculeProps;for(var b in g){b in c||(c[b]=[]);for(var I=c[b],C=p[b],S=h[b],w=v[b],A=m[b],T=g[b],M=y[b],_=M.nucleotideProps,j=0;j<T.length;j++)for(var O=T[j],L=(O.minimumNucleotideIndexInclusive,O.maximumNucleotideIndexInclusive),D=w[j],B=A[j]-D,W=void 0!==H?Math.min(H,L):L,G=D;G<=W;G+=n)if(G in _){var K=_[G];if(x||f)switch(I.push(G),e){case t.CREATE:var V=(S?z:U)(ue(_,G));if(f&&(void 0===K.labelLineProps||N)&&(K.labelLineProps={points:[F(V,C.labelPoint0Distance),F(V,C.labelPoint1Distance)]}),x&&(void 0===K.labelContentProps||N)){var q,Q=$(V),X=.125*Math.cos(2*Q),Y=null!==(q=l[u][b])&&void 0!==q?q:{color:structuredClone(we),font:structuredClone(qe.DEFAULT)};K.labelContentProps=d(d({},F(V,C.labelContentDistance*(1+X))),{},{content:"".concat(G+M.firstNucleotideIndex+B),font:structuredClone(Y.font),color:structuredClone(Y.color),strokeWidth:Qe})}break;case t.DELETE:f&&delete K.labelLineProps,x&&delete K.labelContentProps;break;default:throw"Unhandled switch case."}}}}for(var Z=0,J=Object.values(i);Z<J.length;Z++)for(var ee=J[Z],ne=0,te=Object.values(ee);ne<te.length;ne++){te[ne].sort(P)}a(i)}function de(){var e={},n={};for(var t in r){var o=Number.parseInt(t),a=r[o];e[o]={};var i=e[o];n[o]={};var l=n[o];for(var s in a){var u=a[s];i[s]=[];var c=i[s];l[s]=[];for(var d=l[s],f=0;f<u.length;f++){var p=u[f];c.push(p.minimumNucleotideIndexInclusive),d.push(p.minimumNucleotideIndexInclusive)}}}return{startingNucleotideIndicesPerRegion:e,startingNucleotideOverridingIndicesForLabelsPerRegion:n}}var fe=(0,e.useMemo)((function(){if(-1!==Q&&-1!==ee&&-1!==re)return o[Q].rnaMoleculeProps[ee].firstNucleotideIndex}),[Q,ee,re]),pe=(0,e.useMemo)((function(){var e,n;if(-1!==Q&&-1!==ee&&-1!==re)return null===(e=k[Q])||void 0===e||null===(n=e[ee])||void 0===n?void 0:n[re]}),[Q,ee,re,k]),he=(0,e.useMemo)((function(){var e,n;if(-1!==Q&&-1!==ee&&-1!==re)return null===(e=R[Q])||void 0===e||null===(n=e[ee])||void 0===n?void 0:n[re]}),[Q,ee,re,R]),ve=(0,e.useMemo)((function(){var e={},n={};for(var t in o){var r=Number.parseInt(t);e[r]={};var a,l=e[r],s=i[r],u=zr.BasePair.DEFAULT_DISTANCES.canonical,c=m(rt.types);try{for(c.s();!(a=c.n()).done;){var d=a.value,f=s.distances[d];if(f!==Number.POSITIVE_INFINITY&&!Number.isNaN(f)){u=f;break}}}catch(L){c.e(L)}finally{c.f()}n[r]={};var p=n[r],h=o[r].rnaMoleculeProps;for(var x in h){l[x]={labelPoint0Distance:.25*u,labelPoint1Distance:.75*u,labelContentDistance:u};var g=l[x],y=0,b=h[x].nucleotideProps,N=0,I=0,C={labelPoint0:0,labelPoint1:0,labelContent:0};for(var E in b){var w=Number.parseInt(E),A=b[w],k=ue(b,w);if(void 0!==A.labelLineProps){N++;var P=A.labelLineProps.points;if(P.length>0){var T=P.map(V),M=Math.min.apply(Math,v(T)),R=P[0];if(C.labelPoint0+=M,y-=S(Y(k,R)),P.length>1){var _=Math.max.apply(Math,v(T)),j=P[1];C.labelPoint1+=_,y-=S(Y(k,j))}}}void 0!==A.labelContentProps&&(I++,C.labelContent+=V(A.labelContentProps),y-=S(Y(k,A.labelContentProps)))}if(0!==I&&(g.labelContentDistance=C.labelContent/I),N){var O=1/N;g.labelPoint0Distance=C.labelPoint0*O,g.labelPoint1Distance=C.labelPoint1*O}p[x]=y>0}}return{averageDistances:e,rightOrthogonalizationFlagRecord:n}}),[]);(0,e.useEffect)((function(){var e=de(),n=e.startingNucleotideIndicesPerRegion,t=e.startingNucleotideOverridingIndicesForLabelsPerRegion;T(n),_(t)}),[r]),(0,e.useEffect)((function(){var e=Object.entries(r);if(1===e.length){var n=y(e[0],2),t=n[0],o=n[1],a=Number.parseInt(t);X(a);var i=Object.keys(o);if(1===i.length){var l=i[0];ne(l);var s=o[l];1===s.length&&(oe(0),le(s[0]))}}else X(-1),ne(-1),oe(-1),le(void 0)}),[r]);var me=function(e){var n=e.label,t=e.checked,r=e.onChange;return(0,Gn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 0",cursor:"pointer",userSelect:"none"},children:[(0,Gn.jsx)("input",{type:"checkbox",checked:t,onChange:r,style:{width:"16px",height:"16px",cursor:"pointer",accentColor:u.colors.primary}}),(0,Gn.jsx)("span",{style:{fontSize:u.typography.fontSize.sm,color:u.colors.text,lineHeight:"1.4"},children:n})]})},xe=function(n){var t=n.title,r=n.children,o=n.defaultCollapsed,a=void 0!==o&&o,i=y((0,e.useState)(a),2),l=i[0],s=i[1];return(0,Gn.jsxs)("div",{style:{background:u.colors.surface,border:"1px solid ".concat(u.colors.border),borderRadius:"8px",overflow:"hidden",marginBottom:"16px"},children:[(0,Gn.jsxs)("div",{onClick:function(){return s(!l)},style:{padding:"16px 20px",background:u.colors.background,borderBottom:l?"none":"1px solid ".concat(u.colors.border),cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",userSelect:"none"},children:[(0,Gn.jsx)("h3",{style:{margin:0,fontSize:u.typography.fontSize.sm,fontWeight:"600",color:u.colors.text},children:t}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.lg,color:u.colors.textSecondary,transform:l?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),!l&&(0,Gn.jsx)("div",{style:{padding:"20px"},children:r})]})};return(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"16px",background:u.colors.background,minHeight:"100%"},children:[(0,Gn.jsx)(xe,{title:"Region Information",children:(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Selected Region"}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.sm,color:u.colors.text,padding:"8px 12px",background:u.colors.surface,border:"1px solid ".concat(u.colors.border),borderRadius:"4px"},children:void 0!==ie&&void 0!==fe?"Range: ".concat(ie.minimumNucleotideIndexInclusive+fe," - ").concat(ie.maximumNucleotideIndexInclusive+fe):"No region selected"})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Current Settings"}),(0,Gn.jsxs)("div",{style:{fontSize:u.typography.fontSize.sm,color:u.colors.text,padding:"8px 12px",background:u.colors.surface,border:"1px solid ".concat(u.colors.border),borderRadius:"4px"},children:["Increment: ",E," |",f?" Lines":"",x?" Text":""]})]})]})}),(0,Gn.jsxs)(xe,{title:"Labeling Controls",children:[(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("label",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Start Index"}),(0,Gn.jsx)(it.Integer,{value:void 0!==pe&&void 0!==fe?pe+fe:1,setValue:function(e){if(-1!==Q&&-1!==ee&&-1!==re){var n=e-(null!==fe&&void 0!==fe?fe:0);t=ee,r=re,o=n,k[Q][t][r]=o,T(structuredClone(k)),O&&se(Q,ee,re,n)}var t,r,o},min:void 0!==ie&&void 0!==fe?ie.minimumNucleotideIndexInclusive+fe:1,max:void 0!==ie&&void 0!==fe?ie.maximumNucleotideIndexInclusive+fe:Number.MAX_SAFE_INTEGER}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,color:u.colors.textMuted,marginTop:"6px"},children:"Where to start labeling"})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("label",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Override Start (Optional)"}),(0,Gn.jsx)(it.Integer,{value:void 0!==he&&void 0!==fe?he+fe:1,setValue:function(e){if(-1!==Q&&-1!==ee&&-1!==re){var n=o[Q].rnaMoleculeProps[ee];se(Q,ee,re,e-n.firstNucleotideIndex)}},min:1}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,color:u.colors.textMuted,marginTop:"6px"},children:"Custom label numbering offset"})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("label",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"Increment"}),(0,Gn.jsx)(it.Integer,{value:E,setValue:w,min:1}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,color:u.colors.textMuted,marginTop:"6px"},children:"Label every Nth nucleotide"})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("label",{style:{fontSize:u.typography.fontSize.xs,fontWeight:"600",color:u.colors.textSecondary,marginBottom:"8px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},children:"End Index (Optional)"}),(0,Gn.jsx)(it.Integer,{value:null!==H&&void 0!==H?H:0,setValue:function(e){return K(0===e?void 0:e)},min:void 0!==pe&&void 0!==fe?pe+fe+1:1,max:void 0!==ie&&void 0!==fe?ie.maximumNucleotideIndexInclusive+fe:Number.MAX_SAFE_INTEGER,valueToString:function(e){return 0===e?"":e.toString()},stringToValue:function(e){if(""===e||"0"===e)return 0;var n=Ze(e);if(void 0!==n){if(void 0!==pe&&void 0!==fe&&n<=pe+fe)return{errorMessage:"End index must be greater than start index"};if(void 0!==ie&&void 0!==fe&&n>ie.maximumNucleotideIndexInclusive+fe)return{errorMessage:"End index cannot exceed sequence length"}}return n}}),(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.xs,color:u.colors.textMuted,marginTop:"6px"},children:void 0!==pe&&void 0!==fe&&void 0!==ie?"Leave empty to label entire region (min: ".concat(pe+fe+1,", max: ").concat(ie.maximumNucleotideIndexInclusive+fe,")"):"Leave empty to label entire region"})]})]}),(0,Gn.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"20px",borderTop:"1px solid ".concat(u.colors.border)},children:[(0,Gn.jsx)("button",{onClick:function(e){s(),ce(t.CREATE)},style:{flex:1,padding:"12px 16px",background:u.colors.primary,color:"white",border:"none",fontSize:u.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"background-color 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=u.colors.primaryHover||u.colors.primary},onMouseOut:function(e){e.currentTarget.style.background=u.colors.primary},children:"Create Annotations"}),(0,Gn.jsx)("button",{onClick:function(e){s(),ce(t.DELETE,1)},style:{flex:1,padding:"12px 16px",background:"transparent",color:u.colors.textSecondary,border:"1px solid ".concat(u.colors.border),fontSize:u.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=u.colors.surface,e.currentTarget.style.borderColor=u.colors.textSecondary},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor=u.colors.border},children:"Delete Selected"})]})]}),(0,Gn.jsxs)(xe,{title:"Advanced Selections",defaultCollapsed:!0,children:[(0,Gn.jsx)("div",{style:{fontSize:u.typography.fontSize.sm,color:u.colors.textMuted,marginBottom:"16px",lineHeight:"1.5"},children:"Configure which regions to label and sync settings."}),(0,Gn.jsx)(me,{label:"Auto-sync Start with Override",checked:O,onChange:function(){return D(!O)}}),(0,Gn.jsx)("div",{style:{marginTop:"20px"},children:(0,Gn.jsx)(st.Component,{regions:r,rnaComplexProps:o,startingNucleotideIndicesPerRegion:k,updateStartingNucleotideIndexHelper:function(e,n,t,r){k[e][n][t]=r,T(structuredClone(k))},startingNucleotideOverridingIndicesForLabelsPerRegion:R,updateStartingNucleotideOverridingIndexForLabelPerRegionHelper:function(e,n,t,r){R[e][n][t]=r,_(structuredClone(R))},copyStartingIndexToOverridingLabelIndexFlag:O})})]}),(0,Gn.jsx)(xe,{title:"Labeling Options",defaultCollapsed:!0,children:(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,Gn.jsx)(me,{label:"Include Label Lines",checked:f,onChange:function(){return p(!f)}}),(0,Gn.jsx)(me,{label:"Include Label Text",checked:x,onChange:function(){return g(!x)}}),(0,Gn.jsx)(me,{label:"Recreate Existing Labels",checked:N,onChange:function(){return I(!N)}})]})}),(0,Gn.jsx)("div",{style:{marginTop:"8px"},children:(0,Gn.jsx)("button",{onClick:function(e){s();var n={};for(var t in o){var r=Number.parseInt(t);r in n||(n[r]={});var i=n[r],l=o[r].rnaMoleculeProps;for(var u in l){u in i||(i[u]=[]);var c=i[u],d=l[u].nucleotideProps;for(var f in d){var p=Number.parseInt(f),h=d[p];void 0===h.labelLineProps&&void 0===h.labelContentProps||(c.push(p),void 0!==h.labelLineProps&&delete h.labelLineProps,void 0!==h.labelContentProps&&delete h.labelContentProps)}}}for(var v=0,m=Object.values(n);v<m.length;v++)for(var x=m[v],g=0,y=Object.values(x);g<y.length;g++){y[g].sort(P)}a(n)},style:{width:"100%",padding:"12px 16px",background:"transparent",color:u.colors.error||"#dc3545",border:"1px solid ".concat(u.colors.error||"#dc3545"),fontSize:u.typography.fontSize.sm,fontWeight:"500",cursor:"pointer",borderRadius:"6px",transition:"all 0.2s ease"},onMouseOver:function(e){e.currentTarget.style.background=u.colors.error||"#dc3545",e.currentTarget.style.color="white"},onMouseOut:function(e){e.currentTarget.style.background="transparent",e.currentTarget.style.color=u.colors.error||"#dc3545"},children:"Clear All Annotations"})})]})}}(lt||(lt={})),(st||(st={})).Component=function(n){var t=n.regions,r=n.rnaComplexProps,o=n.startingNucleotideIndicesPerRegion,a=(n.updateStartingNucleotideIndexHelper,n.startingNucleotideOverridingIndicesForLabelsPerRegion),i=(n.updateStartingNucleotideOverridingIndexForLabelPerRegionHelper,n.copyStartingIndexToOverridingLabelIndexFlag,gt().theme),l=y((0,e.useState)(-1),2),s=l[0],u=l[1],c=y((0,e.useState)(-1),2),d=c[0],f=c[1],p=y((0,e.useState)(-1),2),h=p[0],v=p[1],m=y((0,e.useState)(void 0),2),x=m[0],g=m[1],b=y((0,e.useState)(void 0),2),N=b[0],I=b[1],C=y((0,e.useState)(void 0),2),S=(C[0],C[1]),E=y((0,e.useState)(void 0),2),w=E[0],A=E[1],k=y((0,e.useState)(void 0),2),P=k[0],T=k[1],M=y((0,e.useState)(void 0),2),R=M[0],_=M[1],j=y((0,e.useState)(void 0),2),O=j[0],L=j[1],D=y((0,e.useState)(void 0),2),F=D[0],B=D[1],W=y((0,e.useState)(void 0),2),z=(W[0],W[1]);function U(e,n){if(u(e),-1!==e){var r=t[e];g(r);var i=o[e];A(i);var l=a[e];L(l);var s=Object.entries(n);if(1===s.length){var c=y(s[0],2);G(c[0],c[1],n,i,l)}}else f(-1),v(-1)}function G(e,n,t,r,o){if(f(e),-1!==e){var a=t[e];I(a);var i=r[e];T(i);var l=o[e];B(l);var s=Object.entries(n);if(1===s.length){var u=y(s[0],2),c=u[0];u[1],H(Number.parseInt(c),a,i,l)}}else v(-1)}function H(e,n,t,r){v(e),-1!==e&&(S(n[e]),void 0!==t&&_(t[e]),void 0!==r&&z(r[e]))}(0,e.useMemo)((function(){if(-1!==s&&-1!==d&&-1!==h&&void 0!==R)return r[s].rnaMoleculeProps[d].firstNucleotideIndex}),[s,d,h,R]),(0,e.useEffect)((function(){var e=Object.entries(t);if(1===e.length){var n=y(e[0],2),r=n[0],o=n[1];U(Number.parseInt(r),o)}else u(-1),f(-1),v(-1)}),[t,o,a]);var K={width:"100%",padding:"8px 10px",background:i.colors.surface,border:"1px solid ".concat(i.colors.border),fontSize:i.typography.fontSize.sm,color:i.colors.text,cursor:"pointer",outline:"none"},V={fontSize:i.typography.fontSize.xs,fontWeight:"600",color:i.colors.textSecondary,marginBottom:"6px",display:"block",textTransform:"uppercase",letterSpacing:"1px"},q={marginBottom:"20px"};return(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Gn.jsxs)("div",{style:q,children:[(0,Gn.jsx)("label",{style:V,children:"RNA Complex"}),(0,Gn.jsxs)("select",{value:s,onChange:function(e){var n=e.target.value,r=Number.parseInt(n);U(r,t[r])},style:K,children:[(0,Gn.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA complex"}),Object.keys(t).map((function(e){var n=Number.parseInt(e),t=r[n].name;return(0,Gn.jsx)("option",{value:n,children:t},n)}))]})]}),-1!==s&&void 0!==x&&void 0!==w&&void 0!==O&&(0,Gn.jsxs)("div",{style:q,children:[(0,Gn.jsx)("label",{style:V,children:"RNA Molecule"}),(0,Gn.jsxs)("select",{value:d,onChange:function(e){var n=e.target.value;G(n,x[n],x,w,O)},style:K,children:[(0,Gn.jsx)("option",{style:{display:"none"},value:-1,children:"Select an RNA molecule"}),Object.keys(t[s]).map((function(e){return(0,Gn.jsx)("option",{value:e,children:e},e)}))]})]}),-1!==d&&void 0!==N&&void 0!==P&&void 0!==F&&(0,Gn.jsxs)("div",{style:q,children:[(0,Gn.jsxs)("label",{style:V,children:["Region (",N.length," total)"]}),(0,Gn.jsxs)("select",{value:h,onChange:function(e){H(Number.parseInt(e.target.value),N,P,F)},style:K,children:[(0,Gn.jsx)("option",{style:{display:"none"},value:-1,children:"Select a region"}),N.map((function(e,n){return(0,Gn.jsxs)("option",{value:n,children:["Region ",n+1]},n)}))]})]})]})},function(n){function t(n){var t=n.initialCenter,r=n.positions,o=n.onUpdatePositions,a=n.useDegreesFlag,i=n.normal,l=n.initialAngle,s=n.initialScale,u=n.disabledFlag,c=n.relativePositions,d=n.applyCenterToRelativePositionsFlag,f=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),p=(0,e.useContext)(zr.App.PushToUndoStack),h=(0,e.useMemo)((function(){return null!==l&&void 0!==l?l:0}),[l]),v=(0,e.useMemo)((function(){return null!==s&&void 0!==s?s:1}),[s]),m=(0,e.useMemo)((function(){return 1/v}),[v]),x=(0,e.useMemo)((function(){return r.map((function(e){return ee(L(e,t))}))}),[t,r]),g=(0,e.useMemo)((function(){return(null!==c&&void 0!==c?c:[]).map(ee)}),[c,f]),b=(0,e.useMemo)((function(){return null!==u&&void 0!==u&&u}),[u]),N=y((0,e.useState)(h),2),I=N[0],C=N[1],S=y((0,e.useState)(v),2),E=S[0],w=S[1],A=y((0,e.useState)(t.x),2),k=A[0],P=A[1],T=y((0,e.useState)(t.y),2),M=T[0],R=T[1],_=y((0,e.useState)(!1),2),j=_[0],D=_[1],F=y((0,e.useState)(!1),2),B=F[0],W=F[1];function z(e,n,t,a,l){B||(p(),W(!0));var s=t-h,u=a*m,f={x:e,y:n},v=[{cartesian:r,polar:x,cartesianCenter:f}];void 0!==c&&v.push({cartesian:c,polar:g,cartesianCenter:d?f:{x:0,y:0}});for(var y=0,b=v;y<b.length;y++){for(var N=b[y],I=N.cartesian,C=N.polar,S=N.cartesianCenter,E=0;E<I.length;E++){var w=I[E],A=structuredClone(C[E]);A.angle+=s,A.radius*=u;var k=O(J(A),S);w.x=k.x,w.y=k.y}if(l)for(var P=Math.cos(s),T=Math.sin(s),M={x:i.x*P-i.y*T,y:i.x*T+i.y*P},R=0;R<I.length;R++){var _=I[R],j=te(L(_,S),M),D=O(L(j.projection,j.rejection),S);_.x=D.x,_.y=D.y}}o(!1)}return(0,e.useRef)().current=E,(0,e.useEffect)((function(){C(h)}),[h]),(0,e.useEffect)((function(){w(v)}),[v]),(0,e.useEffect)((function(){P(t.x),R(t.y)}),[t]),(0,e.useEffect)((function(){D(!1),C(h),w(v),P(t.x),R(t.y)}),[f]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("label",{children:["x:\xa0",(0,Gn.jsx)(it.Number,{value:k,setValue:function(e){P(e),z(e,M,I,E,j)},disabledFlag:b})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["y:\xa0",(0,Gn.jsx)(it.Number,{value:M,setValue:function(e){R(e),z(k,e,I,E,j)},disabledFlag:b})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["\u03b8:\xa0",(0,Gn.jsx)(it.Angle,{value:I,setValue:function(e){C(e),z(k,M,e,E,j)},useDegreesFlag:a,disabledFlag:b})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["scale:\xa0",(0,Gn.jsx)(it.Number,{value:E,setValue:function(e){z(k,M,I,e,j),w(e)},disabledFlag:b})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsx)("button",{onClick:function(){var e=!j;D(e),z(k,M,I,E,e)},disabled:b,children:"Flip"})]})}n.Component=t,n.Simplified=function(n){var r=n.boundingVector0,o=n.boundingVector1,a=n.positions,i=n.onUpdatePositions,l=n.useDegreesFlag,s=n.orthogonalizeHelper,u=n.initialAngle,c=n.initialScale,d=n.disabledFlag,f=n.relativePositions,p=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),h=(0,e.useMemo)((function(){return(null!==s&&void 0!==s?s:U)(L(o,r))}),[s,r,o,p]),v=(0,e.useMemo)((function(){return F(O(r,o),.5)}),[r,o,p]);return(0,Gn.jsx)(t,{initialCenter:v,positions:a,onUpdatePositions:i,useDegreesFlag:l,normal:h,initialAngle:null!==u&&void 0!==u?u:$(h),initialScale:null!==c&&void 0!==c?c:Q(r,o),disabledFlag:d,relativePositions:f})}}(ut||(ut={})),(dt=ct||(ct={})).Component=function(n){var t=(0,e.useContext)(zr.App.Settings),r=t[Hn.USE_DEGREES],o=t[Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS],a=(0,e.useMemo)((function(){var e=void 0,t=n.onUpdatePositions;if(o){e=[];var r,a=new Array,i=m(n.positions);try{for(i.s();!(r=i.n()).done;){var l=r.value;if("symbol"in l&&"string"===typeof l.symbol&&Xn.isSymbol(l.symbol)){var s,u=l,c=u.labelLineProps,d=u.labelContentProps;void 0!==d&&e.push(d),void 0!==c&&(a.push(c),(s=e).push.apply(s,v(c.points)))}}}catch(f){i.e(f)}finally{i.f()}t=function(e){for(var t=0,r=a;t<r.length;t++){var o=r[t];o.points=v(o.points)}n.onUpdatePositions(e)}}return{relativePositions:e,onUpdatePositions:t}}),[o,n.positions,n.onUpdatePositions]),i=a.relativePositions,l=a.onUpdatePositions;return(0,Gn.jsx)(Gn.Fragment,{children:(0,Gn.jsx)(ot.Component,{title:"Positions",children:(0,Gn.jsx)(ut.Component,d(d({},n),{},{useDegreesFlag:r,relativePositions:i,onUpdatePositions:l}))})})},dt.Simplified=function(n){var t=(0,e.useContext)(zr.App.Settings),r=t[Hn.USE_DEGREES],o=t[Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS],a=(0,e.useMemo)((function(){var e=void 0,t=n.onUpdatePositions;if(o){e=[];var r,a=new Array,i=m(n.positions);try{for(i.s();!(r=i.n()).done;){var l=r.value;if("symbol"in l&&"string"===typeof l.symbol&&Xn.isSymbol(l.symbol)){var s,u=l,c=u.labelLineProps,d=u.labelContentProps;void 0!==d&&e.push(d),void 0!==c&&(a.push(c),(s=e).push.apply(s,v(c.points)))}}}catch(f){i.e(f)}finally{i.f()}t=function(e){for(var t=0,r=a;t<r.length;t++){var o=r[t];o.points=v(o.points)}n.onUpdatePositions(e)}}return{relativePositions:e,onUpdatePositions:t}}),[o,n.positions,n.onUpdatePositions]),i=a.relativePositions,l=a.onUpdatePositions;return(0,Gn.jsx)(Gn.Fragment,{children:(0,Gn.jsx)(ot.Component,{title:"Positions",children:(0,Gn.jsx)(ut.Simplified,d(d({},n),{},{useDegreesFlag:r,relativePositions:i,onUpdatePositions:l}))})})};var Nt=function(e){return/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(e)},It=255,Ct=100,St=function(e){var n=e.r,t=e.g,r=e.b,o=e.a,a=Math.max(n,t,r),i=a-Math.min(n,t,r),l=i?a===n?(t-r)/i:a===t?2+(r-n)/i:4+(n-t)/i:0;return{h:60*(l<0?l+6:l),s:a?i/a*Ct:0,v:a/It*Ct,a:o}},Et=function(e){var n=wt(e);return"hsla("+n.h+", "+n.s+"%, "+n.l+"%, "+n.a+")"},wt=function(e){var n=e.h,t=e.s,r=e.v,o=e.a,a=(200-t)*r/Ct;return{h:n,s:a>0&&a<200?t*r/Ct/(a<=Ct?a:200-a)*Ct:0,l:a/2,a:o}},At=(Math.PI,function(e){var n,t=e.r,r=e.g,o=e.b;return"#"+(n=(t<<16|r<<8|o).toString(16),new Array(7-n.length).join("0")+n)}),kt=function(e){var n=e.r,t=e.g,r=e.b,o=e.a,a="number"===typeof o&&(255*o|256).toString(16).slice(1);return""+At({r:n,g:t,b:r,a:o})+(a||"")},Pt=function(e){return St(Tt(e))},Tt=function(e){var n=e.replace("#","");/^#?/.test(e)&&3===n.length&&(e="#"+n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2));var t=new RegExp("[A-Za-z0-9]{2}","g"),r=y(e.match(t).map((function(e){return parseInt(e,16)})),4),o=r[0],a=r[1],i=r[2],l=void 0===i?0:i,s=r[3];return{r:o,g:a,b:l,a:(null!=s?s:255)/It}},Mt=function(e){var n=e.h,t=e.s,r=e.v,o=e.a,a=n/60,i=t/Ct,l=r/Ct,s=Math.floor(a)%6,u=a-Math.floor(a),c=It*l*(1-i),d=It*l*(1-i*u),f=It*l*(1-i*(1-u));l*=It;var p={};switch(s){case 0:p.r=l,p.g=f,p.b=c;break;case 1:p.r=d,p.g=l,p.b=c;break;case 2:p.r=c,p.g=l,p.b=f;break;case 3:p.r=c,p.g=d,p.b=l;break;case 4:p.r=f,p.g=c,p.b=l;break;case 5:p.r=l,p.g=c,p.b=d}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),yt({},p,{a:o})},Rt=function(e){return At(Mt(e))};function _t(n){var t=(0,e.useRef)(n);return(0,e.useEffect)((function(){t.current=n})),(0,e.useCallback)((function(e,n){return t.current&&t.current(e,n)}),[])}var jt=function(e){return"touches"in e},Ot=function(e){!jt(e)&&e.preventDefault&&e.preventDefault()},Lt=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=1),e>t?t:e<n?n:e},Dt=function(e,n){var t=e.getBoundingClientRect(),r=jt(n)?n.touches[0]:n;return{left:Lt((r.pageX-(t.left+window.pageXOffset))/t.width),top:Lt((r.pageY-(t.top+window.pageYOffset))/t.height),width:t.width,height:t.height,x:r.pageX-(t.left+window.pageXOffset),y:r.pageY-(t.top+window.pageYOffset)}},Ft=["prefixCls","className","onMove","onDown"],Bt=e.forwardRef((function(n,t){var r=n.prefixCls,o=void 0===r?"w-color-interactive":r,a=n.className,i=n.onMove,l=n.onDown,s=bt(n,Ft),u=(0,e.useRef)(null),c=(0,e.useRef)(!1),d=y((0,e.useState)(!1),2),f=d[0],p=d[1],h=_t(i),v=_t(l),m=(0,e.useCallback)((function(e){Ot(e),(jt(e)?e.touches.length>0:e.buttons>0)&&u.current?h&&h(Dt(u.current,e),e):p(!1)}),[h]),x=(0,e.useCallback)((function(){return p(!1)}),[]),g=(0,e.useCallback)((function(e){var n=e?window.addEventListener:window.removeEventListener;n(c.current?"touchmove":"mousemove",m),n(c.current?"touchend":"mouseup",x)}),[]);(0,e.useEffect)((function(){return g(f),function(){f&&g(!1)}}),[f,g]);var b=(0,e.useCallback)((function(e){Ot(e.nativeEvent),function(e){return!(c.current&&!jt(e))&&(c.current=jt(e),!0)}(e.nativeEvent)&&(v&&v(Dt(u.current,e.nativeEvent),e.nativeEvent),p(!0))}),[v]);return(0,Gn.jsx)("div",yt({},s,{className:[o,a||""].filter(Boolean).join(" "),style:yt({},s.style,{touchAction:"none"}),ref:u,tabIndex:0,onMouseDown:b,onTouchStart:b}))}));Bt.displayName="Interactive";var Wt=Bt,zt=function(e){var n=e.className,t=e.color,r=e.left,o=e.top,a=e.style,i=e.prefixCls,l=yt({},a,{position:"absolute",top:o,left:r}),s=i+"-pointer "+(n||"");return(0,Gn.jsx)("div",{className:s,style:l,children:(0,Gn.jsx)("div",{className:i+"-fill",style:{width:10,height:10,transform:"translate(-5px, -5px)",boxShadow:"rgb(255 255 255) 0px 0px 0px 1.5px, rgb(0 0 0 / 30%) 0px 0px 1px 1px inset, rgb(0 0 0 / 40%) 0px 0px 1px 2px",borderRadius:"50%",backgroundColor:"#fff"},children:(0,Gn.jsx)("div",{style:{inset:0,borderRadius:"50%",position:"absolute",backgroundColor:t}})})})},Ut=2*Math.PI,Gt=function(e,n){return(e%n+n)%n},Ht=function(e,n){return Math.sqrt(e*e+n*n)};function Kt(e){var n=e.width,t=void 0===n?0:n,r=t/2;return{width:t,radius:r,cx:r,cy:r}}function Vt(e){var n=e.width;return(void 0===n?0:n)/2}function qt(e,n,t){var r=e.angle||0,o=e.direction;return t&&"clockwise"===o?n=r+n:"clockwise"===o?n=360-r+n:t&&"anticlockwise"===o?n=r+180-n:"anticlockwise"===o&&(n=r-n),Gt(n,360)}var Qt=["prefixCls","radius","pointer","className","style","width","height","oval","direction","angle","color","onChange"],Xt=e.forwardRef((function(e,n){var t=e.prefixCls,r=void 0===t?"w-color-wheel":t,o=(e.radius,e.pointer),a=e.className,i=e.style,l=e.width,s=void 0===l?200:l,u=e.height,c=void 0===u?200:u,d=e.oval,f=e.direction,p=void 0===f?"anticlockwise":f,h=e.angle,v=void 0===h?180:h,m=e.color,x=e.onChange,g=bt(e,Qt),y="string"===typeof m&&Nt(m)?Pt(m):m||{},b=m?Rt(y):"",N=function(e,n){var t=Kt(e),r=t.cx,o=t.cy,a=Vt(e),i=(180+qt(e,n.h,!0))*(Ut/360),l=n.s/100*a,s="clockwise"===e.direction?-1:1;return{x:r+l*Math.cos(i)*s,y:o+l*Math.sin(i)*s}}({width:s},y),I={top:"0",left:"0",color:b},C=function(e,n){var t=function(e,n,t){var r=Kt(e),o=r.cx,a=r.cy,i=Vt(e);n=o-n,t=a-t;var l=qt(e,Math.atan2(-t,-n)*(360/Ut)),s=Math.min(Ht(n,t),i);return{h:Math.round(l),s:Math.round(100/i*s)}}({width:s},s-e.x,c-e.y),r={h:t.h,s:t.s,v:y.v,a:y.a};x&&x(function(e){var n,t,r,o,a,i,l,s,u,c,d;return"string"===typeof e&&Nt(e)?(i=Pt(e),l=e):"string"!==typeof e&&(i=e),i&&(r={h:(d=i).h,s:d.s,v:d.v},a=wt(i),o=Mt(i),s=kt(o),l=Rt(i),t={h:(c=a).h,s:c.s,l:c.l},n={r:(u=o).r,g:u.g,b:u.b}),{rgb:n,hsl:t,hsv:r,rgba:o,hsla:a,hsva:i,hex:l,hexa:s}}(r))},S={zIndex:1,transform:"translate("+N.x+"px, "+N.y+"px) "+("x"===d||"X"===d?"scaleY(2)":"y"===d||"Y"===d?"scaleX(2)":"")},E=o&&"function"===typeof o?o(yt({prefixCls:r,style:S},I)):(0,Gn.jsx)(zt,yt({prefixCls:r,style:S},I));return(0,Gn.jsxs)(Wt,yt({className:[r,a||""].filter(Boolean).join(" ")},g,{style:yt({position:"relative",width:s,transform:"x"===d||"X"===d?"scaleY(0.5)":"y"===d||"Y"===d?"scaleX(0.5)":"",height:c},i),ref:n,onMove:C,onDown:C,children:[E,(0,Gn.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"anticlockwise"===p?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)",transform:"rotateZ("+(v+90)+"deg)",inset:0}}),(0,Gn.jsx)("div",{style:{position:"absolute",borderRadius:"50%",background:"radial-gradient(circle closest-side, #fff, transparent)",inset:0}}),(0,Gn.jsx)("div",{style:{backgroundColor:"#000",borderRadius:"50%",position:"absolute",inset:0,opacity:"number"===typeof y.v?1-y.v/100:0}})]}))}));Xt.displayName="Wheel";var Yt=Xt,$t=["className","prefixCls","left","top","style","fillProps"],Zt=function(e){var n=e.className,t=e.prefixCls,r=e.left,o=e.top,a=e.style,i=e.fillProps,l=bt(e,$t),s=yt({},a,{position:"absolute",left:r,top:o}),u=yt({width:18,height:18,boxShadow:"var(--alpha-pointer-box-shadow)",borderRadius:"50%",backgroundColor:"var(--alpha-pointer-background-color)"},null==i?void 0:i.style,{transform:r?"translate(-9px, -1px)":"translate(-1px, -9px)"});return(0,Gn.jsx)("div",yt({className:t+"-pointer "+(n||""),style:s},l,{children:(0,Gn.jsx)("div",yt({className:t+"-fill"},i,{style:u}))}))},Jt=["prefixCls","className","hsva","background","bgProps","innerProps","pointerProps","radius","width","height","direction","style","onChange","pointer"],er=e.forwardRef((function(e,n){var t=e.prefixCls,r=void 0===t?"w-color-alpha":t,o=e.className,a=e.hsva,i=e.background,l=e.bgProps,s=void 0===l?{}:l,u=e.innerProps,c=void 0===u?{}:u,d=e.pointerProps,f=void 0===d?{}:d,p=e.radius,h=void 0===p?0:p,v=e.width,m=e.height,x=void 0===m?16:m,g=e.direction,y=void 0===g?"horizontal":g,b=e.style,N=e.onChange,I=e.pointer,C=bt(e,Jt),S=function(e){N&&N(yt({},a,{a:"horizontal"===y?e.left:e.top}),e)},E=Et(Object.assign({},a,{a:1})),w="linear-gradient(to "+("horizontal"===y?"right":"bottom")+", rgba(244, 67, 54, 0) 0%, "+E+" 100%)",A={};"horizontal"===y?A.left=100*a.a+"%":A.top=100*a.a+"%";var k=yt({"--alpha-background-color":"#fff","--alpha-pointer-background-color":"rgb(248, 248, 248)","--alpha-pointer-box-shadow":"rgb(0 0 0 / 37%) 0px 1px 4px 0px",borderRadius:h,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==) left center",backgroundColor:"var(--alpha-background-color)"},b,{position:"relative"},{width:v,height:x}),P=I&&"function"===typeof I?I(yt({prefixCls:r},f,A)):(0,Gn.jsx)(Zt,yt({},f,{prefixCls:r},A));return(0,Gn.jsxs)("div",yt({},C,{className:[r,r+"-"+y,o||""].filter(Boolean).join(" "),style:k,ref:n,children:[(0,Gn.jsx)("div",yt({},s,{style:yt({inset:0,position:"absolute",background:i||w,borderRadius:h},s.style)})),(0,Gn.jsx)(Wt,yt({},c,{style:yt({},c.style,{inset:0,zIndex:1,position:"absolute"}),onMove:S,onDown:S,children:P}))]}))}));er.displayName="Alpha";var nr=er,tr=["prefixCls","className","onChange","direction","hsva"],rr=e.forwardRef((function(e,n){var t=e.prefixCls,r=void 0===t?"w-color-saturation":t,o=e.className,a=e.onChange,i=e.direction,l=void 0===i?"horizontal":i,s=e.hsva,u=bt(e,tr),c=Et(yt({},s,{a:1,v:100}));return(0,Gn.jsx)(nr,yt({ref:n},u,{className:r+" "+(o||""),hsva:{h:s.h,s:s.s,v:s.v,a:1-s.v/100},direction:l,background:"linear-gradient(to "+("horizontal"===l?"right":"bottom")+", "+c+", rgb(0, 0, 0))",onChange:function(e,n){a&&a({v:"horizontal"===l?100-100*n.left:100-100*n.top})}}))}));rr.displayName="ShadeSlider";var or,ar,ir,lr,sr,ur,cr=rr;!function(n){var t=function(e){return e.RGBA="RGBA",e.Hexadecimal="Hexadecimal",e.ColorWheel="Color wheel",e}({}),r=Object.values(t);n.Component=function(n){var o,a=n.setColorHelper,i=n.color,l=n.children,s=y((0,e.useState)(t.ColorWheel),2),c=s[0],f=s[1],p=y((0,e.useState)(0),2),h=p[0],v=p[1],m=y((0,e.useState)(0),2),x=m[0],g=m[1],b=y((0,e.useState)(0),2),N=b[0],I=b[1],C=y((0,e.useState)(0),2),S=C[0],E=C[1],w=y((0,e.useState)(Ee),2),A=w[0],k=w[1],P=y((0,e.useState)(""),2),T=P[0],M=P[1],R=y((0,e.useState)({h:0,s:0,v:100,a:0}),2),_=R[0],j=R[1],O=y((0,e.useState)(!1),2),L=O[0],D=O[1];function F(e,n,t,r,o){M(Me({red:e,green:n,blue:t,alpha:r},o,!0))}function B(e,n,t,r){j(St({r:e,g:n,b:t,a:r}))}function W(e){L||z(),a(e),D(!0)}var z=(0,e.useContext)(zr.App.PushToUndoStack);(0,e.useEffect)((function(){var e,n=null!==i&&void 0!==i?i:we;v(n.red),g(n.green),I(n.blue);var t=null!==(e=n.alpha)&&void 0!==e?e:Se;E(t),F(n.red,n.green,n.blue,t,A),B(n.red,n.green,n.blue,t)}),[i]);var U=(u(o={},t.RGBA,(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("label",{children:["Red:\xa0",(0,Gn.jsx)("input",{type:"number",min:0,max:255,step:1,value:h,onChange:function(e){var n=Number.parseInt(e.target.value);v(n),W({red:n,green:x,blue:N,alpha:S}),F(n,x,N,S,A),B(n,x,N,S)}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Green:\xa0",(0,Gn.jsx)("input",{type:"number",min:0,max:255,step:1,value:x,onChange:function(e){var n=Number.parseInt(e.target.value);g(n),W({red:h,green:n,blue:N,alpha:S}),F(h,n,N,S,A),B(h,n,N,S)}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Blue:\xa0",(0,Gn.jsx)("input",{type:"number",min:0,max:255,step:1,value:N,onChange:function(e){var n=Number.parseInt(e.target.value);I(n),W({red:h,green:x,blue:n,alpha:S}),F(h,x,n,S,A),B(h,x,n,S)}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Alpha:\xa0",(0,Gn.jsx)("input",{type:"number",min:0,max:255,step:1,value:S,onChange:function(e){var n=Number.parseInt(e.target.value);E(n),W({red:h,green:x,blue:N,alpha:n}),F(h,x,N,n,A),B(h,x,N,n)}})]})]})),u(o,t.Hexadecimal,(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("label",{children:["Encoding:\xa0",(0,Gn.jsx)("select",{value:A,onChange:function(e){var n,t,r=e.target.value;k(r);var o=Pe(T,r);v(o.red),g(o.green),I(o.blue),E(null!==(n=o.alpha)&&void 0!==n?n:Se),W(o),B(o.red,o.green,o.blue,null!==(t=o.alpha)&&void 0!==t?t:Se)},children:Ie.map((function(e){return(0,Gn.jsx)("option",{children:e},e)}))})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Hexadecimal:\xa0",(0,Gn.jsx)("input",{type:"text",value:T,onChange:function(e){var n,t,r=e.target.value;M(r);var o=Pe(r,A);v(o.red),g(o.green),I(o.blue),E(null!==(n=o.alpha)&&void 0!==n?n:Se),W(o),B(o.red,o.green,o.blue,null!==(t=o.alpha)&&void 0!==t?t:Se)}})]})]})),u(o,t.ColorWheel,(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)(cr,{hsva:_,onChange:function(e){var n=d(d({},_),{},{v:e.v});j(n);var t=Mt(n),r={red:t.r,green:t.g,blue:t.b,alpha:S};W(r),v(r.red),g(r.green),I(r.blue),E(r.alpha),F(r.red,r.green,r.blue,r.alpha,A)},width:"100%"}),(0,Gn.jsx)("br",{}),(0,Gn.jsx)(Yt,{color:_,onChange:function(e){j(d(d({},_),e.hsva));var n={red:e.rgba.r,green:e.rgba.g,blue:e.rgba.b,alpha:S};W(n),v(n.red),g(n.green),I(n.blue),E(n.alpha),F(n.red,n.green,n.blue,n.alpha,A)}})]})),o);return(0,Gn.jsx)(Gn.Fragment,{children:(0,Gn.jsxs)(ot.Component,{title:"Color",children:[l,"Edit mode:\xa0",(0,Gn.jsx)("select",{value:c,onChange:function(e){var n=e.target.value;f(n)},children:r.map((function(e){return(0,Gn.jsx)("option",{children:e},e)}))}),r.map((function(e){return(0,Gn.jsx)("div",{style:{display:c===e?"block":"none"},children:U[e]},e)}))]})})}}(or||(or={})),function(n){var t=n.commonFamilies=[{value:"serif",label:"Serif"},{value:"sans-serif",label:"Sans-serif"},{value:"monospace",label:"Monospace"},{value:"cursive",label:"Cursive"},{value:"fantasy",label:"Fantasy"},{value:"system-ui",label:"System"},{value:"Arial, sans-serif",label:"Arial"},{value:"Helvetica, Arial, sans-serif",label:"Helvetica"},{value:'"Times New Roman", Times, serif',label:"Times New Roman"},{value:"Georgia, serif",label:"Georgia"},{value:"Verdana, Geneva, sans-serif",label:"Verdana"},{value:"Tahoma, Geneva, sans-serif",label:"Tahoma"},{value:'"Courier New", Courier, monospace',label:"Courier New"},{value:'Consolas, "Courier New", monospace',label:"Consolas"}];n.Component=function(n){var r=n.family,o=n.style,a=n.weight,i=n.size,l=n.setFont,s=y((0,e.useState)(!1),2),u=s[0],c=s[1];function d(e){u||f(),l(e),c(!0)}var f=(0,e.useContext)(zr.App.PushToUndoStack);return(0,Gn.jsxs)(ot.Component,{title:"Font",children:[(0,Gn.jsxs)("label",{children:["Family:\xa0",(0,Gn.jsx)("br",{}),"\xa0\xa0Common Families:\xa0",(0,Gn.jsxs)("select",{value:t.some((function(e){return e.value===r}))?r:"",onChange:function(e){d({family:e.target.value,style:o,weight:a,size:i})},children:[(0,Gn.jsx)("option",{value:"",disabled:!0,hidden:!1,children:"Pick One"}),t.map((function(e){var n=e.value,t=e.label;return(0,Gn.jsx)("option",{value:n,children:t},n)}))]}),(0,Gn.jsx)("br",{})]}),"\xa0\xa0Custom:\xa0",(0,Gn.jsx)("input",{type:"text",value:r,onChange:function(e){d({family:e.target.value,style:o,weight:a,size:i})}}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Style:\xa0",(0,Gn.jsx)("input",{type:"text",value:o,onChange:function(e){var n=e.target.value;d({family:r,style:n,weight:a,size:i})}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Weight:\xa0",(0,Gn.jsx)("input",{type:"text",value:a,onChange:function(e){var n=e.target.value;d({family:r,style:o,weight:n,size:i})}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Size:\xa0",(0,Gn.jsx)("input",{type:"text",value:i,onChange:function(e){var n=e.target.value;d({family:r,style:o,weight:a,size:n})}})]})]})}}(ar||(ar={})),(ir||(ir={})).Component=function(n){var t,r,o,a=n.pathStyle,i=n.setPathStyle,l=(0,e.useContext)(zr.App.PushToUndoStack),s=null!==(t=a.pathColor)&&void 0!==t?t:we,u=null!==(r=a.pathLineWidth)&&void 0!==r?r:Qe,c=null!==(o=a.pathCurvature)&&void 0!==o?o:0,f=y((0,e.useState)({h:0,s:0,v:100,a:1}),2),p=f[0],h=f[1],v=y((0,e.useState)(!1),2),m=v[0],x=v[1];(0,e.useEffect)((function(){var e,n={r:s.red,g:s.green,b:s.blue,a:null!==(e=s.alpha)&&void 0!==e?e:1};h(St(n)),x(!1)}),[a.pathColor]);var g=function(e){m||(l(),x(!0)),i(d(d({},a),{},{pathColor:e}))};return(0,Gn.jsx)(ot.Component,{title:"Path",initialCollapsedFlag:!1,children:(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:"Path Color"}),(0,Gn.jsx)(cr,{hsva:p,onChange:function(e){var n=d(d({},p),{},{v:e.v});h(n);var t=Mt(n),r={red:t.r,green:t.g,blue:t.b,alpha:s.alpha};g(r)},style:{width:"100%",marginBottom:"8px"}}),(0,Gn.jsx)(Yt,{color:p,onChange:function(e){h(d(d({},p),e.hsva));var n={red:e.rgba.r,green:e.rgba.g,blue:e.rgba.b,alpha:s.alpha};g(n)}})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:["Line Width: ",u.toFixed(1)]}),(0,Gn.jsx)("input",{type:"range",min:.5,max:10,step:.5,value:u,onChange:function(e){var n=parseFloat(e.target.value);i(d(d({},a),{},{pathLineWidth:n}))},onMouseDown:function(){return l()},style:{width:"100%",height:"6px",borderRadius:"3px",outline:"none",cursor:"pointer"}}),(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#666",marginTop:"4px"},children:[(0,Gn.jsx)("span",{children:"Thin (0.5)"}),(0,Gn.jsx)("span",{children:"Thick (10)"})]})]}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:["Curvature: ",0===c?"Straight":c<.3?"Slight":c<.7?"Moderate":"High"]}),(0,Gn.jsx)("input",{type:"range",min:0,max:1,step:.05,value:c,onChange:function(e){var n=parseFloat(e.target.value);i(d(d({},a),{},{pathCurvature:n}))},onMouseDown:function(){return l()},style:{width:"100%",height:"6px",borderRadius:"3px",outline:"none",cursor:"pointer"}}),(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#666",marginTop:"4px"},children:[(0,Gn.jsx)("span",{children:"Straight"}),(0,Gn.jsx)("span",{children:"Curvy"})]})]})]})})},(sr=lr||(lr={})).Component=function(n){var t=n.positions,r=n.onUpdatePositions,o=t,a=y((0,e.useState)(we),2),i=a[0],l=a[1],s=y((0,e.useState)(qe.DEFAULT),2),u=s[0],c=s[1],f=y((0,e.useState)({pathColor:we,pathLineWidth:Qe,pathCurvature:0}),2),p=f[0],h=f[1],v=y((0,e.useState)(!1),2),x=v[0],g=v[1],b=(0,e.useContext)(zr.App.PushToUndoStack);return(0,e.useEffect)((function(){var e,n,t,r,a;if(0!==o.length){for(var i=!0,s=o[0],u=null!==(e=s.color)&&void 0!==e?e:we,d=1;d<o.length;d++){var f;if(!je(u,null!==(f=o[d].color)&&void 0!==f?f:we)){i=!1;break}}for(var p=!0,v=null!==(n=s.font)&&void 0!==n?n:qe.DEFAULT,m=1;m<o.length;m++){var x;if(!qe.areEqual(v,null!==(x=o[m].font)&&void 0!==x?x:qe.DEFAULT)){p=!1;break}}for(var g=!0,y=null!==(t=s.pathColor)&&void 0!==t?t:we,b=1;b<o.length;b++){var N;if(!je(y,null!==(N=o[b].pathColor)&&void 0!==N?N:we)){g=!1;break}}for(var I=!0,C=null!==(r=s.pathLineWidth)&&void 0!==r?r:Qe,S=1;S<o.length;S++){var E;if(C!==(null!==(E=o[S].pathLineWidth)&&void 0!==E?E:Qe)){I=!1;break}}for(var w=!0,A=null!==(a=s.pathCurvature)&&void 0!==a?a:0,k=1;k<o.length;k++){var P;if(A!==(null!==(P=o[k].pathCurvature)&&void 0!==P?P:0)){w=!1;break}}l(i?u:we),c(p?v:qe.DEFAULT),h({pathColor:g?y:we,pathLineWidth:I?C:Qe,pathCurvature:w?A:0})}}),[t]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)(ct.Component,d(d({},n),{},{onUpdatePositions:function(e){!x&&e&&b(),r(!1),g(!0)}})),(0,Gn.jsx)(or.Component,{color:i,setColorHelper:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;)n.value.color=e}catch(a){t.e(a)}finally{t.f()}l(e),r(!1)}}),(0,Gn.jsx)(ar.Component,d(d({},u),{},{setFont:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;)n.value.font=e}catch(a){t.e(a)}finally{t.f()}c(e),r(!1)}})),(0,Gn.jsx)(ir.Component,{pathStyle:p,setPathStyle:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;){var a=n.value;void 0!==e.pathColor&&(a.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(a.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(a.pathCurvature=e.pathCurvature)}}catch(i){t.e(i)}finally{t.f()}h(e),r(!1)}})]})},sr.Simplified=function(n){var t=n.positions,r=n.onUpdatePositions,o=t,a=y((0,e.useState)(we),2),i=a[0],l=a[1],s=y((0,e.useState)(qe.DEFAULT),2),u=s[0],c=s[1],f=y((0,e.useState)({pathColor:we,pathLineWidth:Qe,pathCurvature:0}),2),p=f[0],h=f[1],v=y((0,e.useState)(!1),2),x=v[0],g=v[1],b=(0,e.useContext)(zr.App.PushToUndoStack);return(0,e.useEffect)((function(){var e,n,t,r,a;if(0!==o.length){for(var i=!0,s=o[0],u=null!==(e=s.color)&&void 0!==e?e:we,d=1;d<o.length;d++){var f;if(!je(u,null!==(f=o[d].color)&&void 0!==f?f:we)){i=!1;break}}for(var p=!0,v=null!==(n=s.font)&&void 0!==n?n:qe.DEFAULT,m=1;m<o.length;m++){var x;if(!qe.areEqual(v,null!==(x=o[m].font)&&void 0!==x?x:qe.DEFAULT)){p=!1;break}}for(var g=!0,y=null!==(t=s.pathColor)&&void 0!==t?t:we,b=1;b<o.length;b++){var N;if(!je(y,null!==(N=o[b].pathColor)&&void 0!==N?N:we)){g=!1;break}}for(var I=!0,C=null!==(r=s.pathLineWidth)&&void 0!==r?r:Qe,S=1;S<o.length;S++){var E;if(C!==(null!==(E=o[S].pathLineWidth)&&void 0!==E?E:Qe)){I=!1;break}}for(var w=!0,A=null!==(a=s.pathCurvature)&&void 0!==a?a:0,k=1;k<o.length;k++){var P;if(A!==(null!==(P=o[k].pathCurvature)&&void 0!==P?P:0)){w=!1;break}}l(i?u:we),c(p?v:qe.DEFAULT),h({pathColor:g?y:we,pathLineWidth:I?C:Qe,pathCurvature:w?A:0})}}),[t]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)(ct.Simplified,d(d({},n),{},{onUpdatePositions:function(e){!x&&e&&b(),r(!1),g(!0)}})),(0,Gn.jsx)(or.Component,{color:i,setColorHelper:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;)n.value.color=e}catch(a){t.e(a)}finally{t.f()}l(e),r(!1)}}),(0,Gn.jsx)(ar.Component,d(d({},u),{},{setFont:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;)n.value.font=e}catch(a){t.e(a)}finally{t.f()}c(e),r(!1)}})),(0,Gn.jsx)(ir.Component,{pathStyle:p,setPathStyle:function(e){var n,t=m(o);try{for(t.s();!(n=t.n()).done;){var a=n.value;void 0!==e.pathColor&&(a.pathColor=e.pathColor),void 0!==e.pathLineWidth&&(a.pathLineWidth=e.pathLineWidth),void 0!==e.pathCurvature&&(a.pathCurvature=e.pathCurvature)}}catch(i){t.e(i)}finally{t.f()}h(e),r(!1)}})]})},(ur||(ur={})).Component=function(n){var t=n.setNucleotideKeysToRerender,r=n.setBasePairKeysToRerender,o=n.rnaComplexProps,a=(0,e.useContext)(zr.App.ComplexDocumentName),i=(0,e.useContext)(zr.App.SetComplexDocumentName),l=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),s=y((0,e.useState)(a),2),u=s[0],c=s[1],d=(0,e.useMemo)((function(){var e=new Array,n=Object.entries(o).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{rnaComplexIndex:Number.parseInt(t),singularRnaComplexProps:r}}));n.reverse();var a,i={0:{x:-1,y:0},1:{x:1,y:0}},s={},u={},c=m(n);try{for(c.s();!(a=c.n()).done;){var d=a.value,f=d.rnaComplexIndex,p=d.singularRnaComplexProps,h=Object.entries(p.rnaMoleculeProps);h.reverse();var v=p.basePairs;s[f]={};var x=s[f];u[f]=[];for(var g=u[f],b=(f in l?l[f]:{}),N=0,I=h;N<I.length;N++){var C=y(I[N],2),S=C[0],E=C[1],w=v[S];x[S]=[];var A,k=x[S],P=Object.entries(E.nucleotideProps).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),singularNucleotideProps:r}})),T=S in b?b[S]:new Set,M=m(P);try{for(M.s();!(A=M.n()).done;){var R=A.value,_=R.nucleotideIndex,j=R.singularNucleotideProps;if(T.has(_)||(k.push(_),e.push(j)),_ in w){g.push({rnaMoleculeName:S,nucleotideIndex:_});var O=w[_].reduce(lo);i={0:j,1:p.rnaMoleculeProps[O.rnaMoleculeName].nucleotideProps[O.nucleotideIndex]}}}}catch(L){M.e(L)}finally{M.f()}}}}catch(L){c.e(L)}finally{c.f()}return(0,Gn.jsx)(lr.Simplified,{boundingVector0:i[0],boundingVector1:i[1],positions:e,onUpdatePositions:function(){t(structuredClone(s)),r(structuredClone(u))}})}),[o]);return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("label",{children:["Name:\xa0",(0,Gn.jsx)("input",{type:"text",value:u,onChange:function(e){var n=e.target.value;c(n),i(n)}})]}),(0,Gn.jsx)("br",{}),d]})};var dr={errorMessage:"Cannot interact with a base-paired nucleotide using this constraint."},fr={errorMessage:"Cannot interact with a non-base-paired nucleotide using this constraint."},pr={errorMessage:"Cannot apply this constraint to a nucleotide with multiple base pairs. Try right-clicking on a base pair instead."},hr=function(){function e(n,t,r,o,a,i,l){ze(this,e),this.indicesOfAffectedNucleotides={},this.rnaComplexProps=void 0,this.fullKeys0=void 0,this.fullKeys1=void 0,this.setNucleotideKeysToRerender=void 0,this.setBasePairKeysToRerender=void 0,this.setDebugVisualElements=void 0,this.indicesOfFrozenNucleotides=void 0,this.rnaComplexProps=n,this.fullKeys0=i,this.fullKeys1=l,this.setNucleotideKeysToRerender=t,this.setBasePairKeysToRerender=r,this.setDebugVisualElements=o,this.indicesOfFrozenNucleotides=a}return Ge(e,[{key:"constrainRelevantHelices",value:function(e){var n=this;return e.filter((function(e){for(var t=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=Math.abs(i[0]-a[0])+1,s=Math.sign(i[0]-a[0]),u=Math.sign(i[1]-a[1]),c=a[0],d=a[1],f=0;f<l;f++){if(t in n.indicesOfAffectedNucleotides){var p=n.indicesOfAffectedNucleotides[t];if(r in p&&p[r].has(c))return!0;if(o in p&&p[o].has(d))return!0}c+=s,d+=u}return!1}))}},{key:"addFullIndices",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];for(var r=0,o=n;r<o.length;r++){var a=o[r],i=a.rnaComplexIndex,l=a.rnaMoleculeName,s=a.nucleotideIndex;i in this.indicesOfAffectedNucleotides||(this.indicesOfAffectedNucleotides[i]={});var u=this.indicesOfAffectedNucleotides[i];l in u||(u[l]=new Set),u[l].add(s)}}},{key:"addFullIndicesPerHelices",value:function(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=arguments[o];for(var a=0,i=r;a<i.length;a++)for(var l=i[a],s=l.rnaComplexIndex,u=l.rnaMoleculeName0,c=l.rnaMoleculeName1,d=l.nucleotideIndex0,f=l.nucleotideIndex1,p=l.length,h=0;h<p;h++)this.addFullIndices({rnaComplexIndex:s,rnaMoleculeName:u,nucleotideIndex:d+h-e},{rnaComplexIndex:s,rnaMoleculeName:c,nucleotideIndex:f-h-n})}},{key:"addFullIndicesPerNucleotideKeysToRerender",value:function(e){for(var n=0,t=Object.entries(e);n<t.length;n++)for(var r=y(t[n],2),o=r[0],a=r[1],i=Number.parseInt(o),l=0,s=Object.entries(a);l<s.length;l++){var u,c=y(s[l],2),d=c[0],f=m(c[1]);try{for(f.s();!(u=f.n()).done;){var p=u.value;this.addFullIndices({rnaComplexIndex:i,rnaMoleculeName:d,nucleotideIndex:p})}}catch(h){f.e(h)}finally{f.f()}}}}]),e}();function vr(e,n,t){var r=n.map((function(n){return L(n,e)})),o=n.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var a=0;a<o;a++){var i=r[a],l=n[a];l.x=e.x+i.x,l.y=e.y+i.y}t()}}}var mr,xr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,u,c){var d,f=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(d=n.call(this,e,r,o,a,l,u,c)).editMenuProps=void 0,d.initialBasePairs=void 0,d.dragListener=void 0,d.helices=void 0;var p={},h={};d.editMenuProps={rnaComplexProps:d.rnaComplexProps,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var x=[],g=Kr(e,f),b=[];d.helices=b,g.forEach((function(e){var n=e.rnaComplexIndex;e.helixDataPerRnaMolecules.forEach((function(e){var t=e.rnaMoleculeName0;b.push.apply(b,v(e.helixData.map((function(e){var r=e.start,o=e.stop,a=e.rnaMoleculeName1;return{rnaComplexIndex:n,rnaMoleculeName0:t,rnaMoleculeName1:a,start:r,stop:o}}))))}))})),g.forEach((function(n){var t=n.rnaComplexIndex,r=e[t];n.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0,o=r.rnaMoleculeProps[n];x.push.apply(x,v(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:t,rnaMoleculeName0:n,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),d.initialBasePairs=x;for(var N=new Array,I=0,C=Object.entries(e);I<C.length;I++){var S=y(C[I],2),E=S[0],w=S[1].rnaMoleculeProps,A=Number.parseInt(E),k=A in l?l[A]:{};p[A]={};var T=p[A];h[A]=[];for(var M=h[A],R=e[A],_=R.basePairs,j=0,O=Object.entries(w);j<O.length;j++){var L=y(O[j],2),D=L[0],F=L[1].nucleotideProps,B=D in k?k[D]:new Set;T[D]=[];for(var W=T[D],z=R.rnaMoleculeProps[D],U=(D in _?_[D]:{}),G=0,H=Object.keys(F);G<H.length;G++){var K=H[G],V=Number.parseInt(K);if(d.addFullIndices({rnaComplexIndex:A,rnaMoleculeName:D,nucleotideIndex:V}),!B.has(V)){W.push(V);var q=z.nucleotideProps[V];N.push(q)}if(V in U){var Q,X={rnaMoleculeName:D,nucleotideIndex:V},Y=m(U[V]);try{for(Y.s();!(Q=Y.n()).done;){var $=Q.value;M.push(lo(X,$))}}catch(ue){Y.e(ue)}finally{Y.f()}}}}}for(var Z=u.rnaComplexIndex,J=u.rnaMoleculeName,ee=u.nucleotideIndex,ne=e[Z].rnaMoleculeProps[J].nucleotideProps[ee],te=0,re=Object.values(p);te<re.length;te++)for(var oe=re[te],ae=0,ie=Object.values(oe);ae<ie.length;ae++){ie[ae].sort(P)}for(var le=0,se=Object.values(h);le<se.length;le++){se[le].sort(oo)}return d.dragListener=vr({x:ne.x,y:ne.y},N,(function(){r(structuredClone(p)),o(structuredClone(h))})),d}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n;switch(e){case b.EDIT:n=(0,Gn.jsx)(ur.Component,d({},this.editMenuProps));break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case b.ANNOTATE:var t={};for(var r in this.rnaComplexProps){var o=Number.parseInt(r),a={};o in this.indicesOfFrozenNucleotides&&(a=this.indicesOfFrozenNucleotides[o]),t[o]={};var i=t[o],l=this.rnaComplexProps[o];for(var s in l.rnaMoleculeProps){i[s]=[];var u=l.rnaMoleculeProps[s],c=i[s],f=new Set;s in a&&(f=a[s]);var p=new Array;for(var h in u.nucleotideProps){var v=Number.parseInt(h);p.push(v)}lt.populateRegions(f,p,c)}}n=(0,Gn.jsx)(lt.Component,{regions:t,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," entire scene:"]}),(0,Gn.jsx)("br",{}),n]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){return e}}]),t}(hr);(mr||(mr={})).Component=function(n){var t=n.rnaComplexIndex,r=n.rerender,o=n.singularRnaComplexProps,a=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),i=t in a?a[t]:{},l=y((0,e.useState)(o.name),2),s=l[0],u=l[1],c=(0,e.useMemo)((function(){var e=o.basePairs,n={0:{x:-1,y:0},1:{x:1,y:0}},t=new Array,a=Object.entries(o.rnaMoleculeProps);a.reverse();for(var l=0,s=a;l<s.length;l++){var u=y(s[l],2),c=u[0],d=u[1],f=e[c],p=Object.entries(d.nucleotideProps).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),singularNucleotideProps:r}}));p.sort((function(e,n){return n.nucleotideIndex-e.nucleotideIndex}));var h,v=c in i?i[c]:new Set,x=m(p);try{for(x.s();!(h=x.n()).done;){var g=h.value,b=g.nucleotideIndex,N=g.singularNucleotideProps;if(v.has(b)||t.push(N),b in f){var I=f[b].reduce(lo);n={0:N,1:o.rnaMoleculeProps[I.rnaMoleculeName].nucleotideProps[I.nucleotideIndex]}}}}catch(C){x.e(C)}finally{x.f()}}return(0,Gn.jsx)(lr.Simplified,{boundingVector0:n[0],boundingVector1:n[1],positions:t,onUpdatePositions:r})}),[i,o]);return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("label",{children:"Name:\xa0"}),(0,Gn.jsx)("input",{type:"text",value:s,onChange:function(e){var n=e.target.value;u(n),o.name=n}}),(0,Gn.jsx)("br",{}),c]})};var gr,yr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f,p=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(f=n.call(this,e,r,o,a,l,c,d)).dragListener=void 0,f.editMenuProps=void 0,f.initialBasePairs=void 0,f.helices=void 0;for(var h=f.fullKeys0,x=h.rnaComplexIndex,g=h.rnaMoleculeName,y=h.nucleotideIndex,b=u({},x,{}),N=b[x],I=u({},x,[]),C=I[x],S=new Array,E=f.rnaComplexProps[x],w=E.basePairs,A=(x in l?l[x]:{}),k=0,P=Object.keys(E.rnaMoleculeProps);k<P.length;k++){var T=P[k];N[T]=[];var R,_=N[T],j=E.rnaMoleculeProps[T],O=w[T],L=Object.keys(j.nucleotideProps).map(M),D=T in A?A[T]:new Set,F=m(L);try{for(F.s();!(R=F.n()).done;){var B=R.value;if(f.addFullIndices({rnaComplexIndex:x,rnaMoleculeName:T,nucleotideIndex:B}),!D.has(B)){var W=j.nucleotideProps[B];S.push(W),_.push(B)}B in O&&C.push({rnaMoleculeName:T,nucleotideIndex:B})}}catch(V){F.e(V)}finally{F.f()}}C.sort(oo);var z=E.rnaMoleculeProps[g].nucleotideProps[y];function U(){r(structuredClone(b)),o(structuredClone(I))}f.dragListener=vr(structuredClone(z),S,U),f.editMenuProps={rnaComplexIndex:x,rerender:U,singularRnaComplexProps:E};var G=[],H=Vr(x,E,p),K=[];return f.helices=K,H.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0;K.push.apply(K,v(e.helixData.map((function(e){var t=e.rnaMoleculeName1,r=e.start,o=e.stop;return{rnaComplexIndex:x,rnaMoleculeName0:n,rnaMoleculeName1:t,start:r,stop:o}}))))})),H.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0,t=E.rnaMoleculeProps[n];G.push.apply(G,v(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=E.rnaMoleculeProps[r];return{rnaComplexIndex:x,rnaMoleculeName0:n,rnaMoleculeName1:r,nucleotideIndex0:e.start[0]+t.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+o.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))})),f.initialBasePairs=G,f}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0.rnaComplexIndex,r=this.rnaComplexProps[t],o=(0,Gn.jsxs)("b",{children:[e,' RNA complex "',r.name,'":']});switch(e){case b.EDIT:o=(0,Gn.jsxs)("b",{children:[e," RNA complex:"]}),n=(0,Gn.jsx)(mr.Component,d({},this.editMenuProps));break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var n=0;n<e.length;n++){var r=e[n];if(t!==r.rnaComplexIndex)throw"This constraint expects base pairs to be placed within the clicked-on RNA complex. The base pair(s) on line ".concat(n+1," do not.")}}});break;case b.ANNOTATE:var a=u({},t,{}),i=a[t];for(var l in this.rnaComplexProps){var s=Number.parseInt(l),c=this.rnaComplexProps[s],f=s in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[s]:{};for(var p in c.rnaMoleculeProps){i[p]=[];var h=i[p],v=c.rnaMoleculeProps[p],m=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(var g in v.nucleotideProps){var y=Number.parseInt(g);y<m&&(m=y),y>x&&(x=y)}var N=p in f?f[p]:new Set;lt.populateRegions(N,C(x+1,m),h)}}n=(0,Gn.jsx)(lt.Component,{regions:a,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,Gn.jsxs)(Gn.Fragment,{children:[o,(0,Gn.jsx)("br",{}),n]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var n=this;return e.filter((function(e){return e.rnaComplexIndex===n.fullKeys0.rnaComplexIndex}))}}]),t}(hr);function br(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y(e.direction,n.direction);return Y(L(n.anchor,e.anchor),n.direction)/t}function Nr(e,n,t){var r,o,a={anchor:F(O(n,t),.5),direction:G(L(n,t))},i={anchor:F(O(e,t),.5),direction:G(L(e,t))},l=(r=a,o=br(a,i),O(r.anchor,F(r.direction,o)));return{center:l,radius:Q(l,e)}}function Ir(e,n,t){var r=L(n,t),o=L(e,t);if(0===S(Y(r,o))){var a,i=0,l=[r,o,L(n,e)].map(K).reduce((function(e,n,t){return n>=e?(i=t,n):e})),s=.5*Math.sqrt(l);switch(i){case 0:a=[n,t];break;case 1:a=[e,t];break;case 2:a=[e,n];break;default:throw"This state should be impossible."}return{center:F(O(a[0],a[1]),.5),radius:s}}return Nr(e,n,t)}(gr||(gr={})).Component=function(n){var t=n.initialRadius,r=n.minimumRadius,o=n.updatePositionsHelper,a=n.cycleGraphNucleotides,i=n.branchNucleotides,l=n.rerender,s=n.getRadius,u=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),c=(0,e.useContext)(zr.App.Settings)[Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS],f=(0,e.useContext)(zr.App.PushToUndoStack),p=y((0,e.useState)(t),2),h=p[0],v=p[1],x=y((0,e.useState)(structuredClone(we)),2),g=x[0],b=x[1],N=y((0,e.useState)(structuredClone(qe.DEFAULT)),2),I=N[0],C=N[1],S=y((0,e.useState)(!1),2),E=S[0],w=S[1];function A(e,n){E||f(),o(e,n),w(!0)}return(0,e.useEffect)((function(){v(s())}),[u]),(0,e.useEffect)((function(){for(var e,n=0===a.length?we:null!==(e=a[0].color)&&void 0!==e?e:we,t=0;t<a.length;t++){var r;if(!je(n,null!==(r=a[t].color)&&void 0!==r?r:we))break}}),[a]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("button",{onClick:function(){A(h,c)},children:"Normalize"}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Radius:\xa0",(0,Gn.jsx)(it.Number,{value:h,setValue:function(e){v(e),A(e,c)},min:r})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsx)(or.Component,{color:g,setColorHelper:function(e){b(e);var n,t=m(a);try{for(t.s();!(n=t.n()).done;)n.value.color=e}catch(s){t.e(s)}finally{t.f()}var r,o=m(i);try{for(o.s();!(r=o.n()).done;)r.value.color=e}catch(s){o.e(s)}finally{o.f()}l()}}),(0,Gn.jsx)(ar.Component,d(d({},I),{},{setFont:function(e){C(e);var n,t=m(a);try{for(t.s();!(n=t.n()).done;)n.value.font=e}catch(s){t.e(s)}finally{t.f()}var r,o=m(i);try{for(o.s();!(r=o.n()).done;)r.value.font=e}catch(s){o.e(s)}finally{o.f()}l()}}))]})};var Cr,Sr=.01,Er={errorMessage:"The clicked-on nucleotide is not part of an RNA cycle."},wr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,f){var p,h=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(p=n.call(this,e,r,o,a,l,c,f)).rnaCycleBoundsText=void 0,p.editMenuProps=void 0,p.cycleIndices=void 0,p.initialDrag=void 0,p.boundingVector0=void 0,p.boundingVector1=void 0,p.updatePositionsHelper=void 0,p.minimumRadius=void 0,p.initialBasePairs=void 0,p.helices=void 0;var x=e[c.rnaComplexIndex];p.initialDrag=structuredClone(x.rnaMoleculeProps[c.rnaMoleculeName].nucleotideProps[c.nucleotideIndex]);var g=x.basePairs;if(c.rnaMoleculeName in g&&c.nucleotideIndex in g[c.rnaMoleculeName]&&g[c.rnaMoleculeName][c.nucleotideIndex].some((function(e){var n;return rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(x.rnaMoleculeProps[c.rnaMoleculeName].nucleotideProps[c.nucleotideIndex].symbol,x.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),h)})))throw dr;function b(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex,r=[{rnaMoleculeName:n,nucleotideIndex:t-1},{rnaMoleculeName:n,nucleotideIndex:t+1}].filter((function(e){var n=e.rnaMoleculeName;return e.nucleotideIndex in x.rnaMoleculeProps[n].nucleotideProps})),o=g[n];if(t in o){var a=o[t].filter((function(e){var r;return rt.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:et(x.rnaMoleculeProps[n].nucleotideProps[t].symbol,x.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),h)}));r.push.apply(r,v(a))}return r}function N(e,n){var t=[e],r={};function o(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;n in r||(r[n]=new Set),r[n].add(t)}o(c),o(e);for(var a={};t.length>0;){var i=t.shift(),l=i,s=l.rnaMoleculeName,u=l.nucleotideIndex;if(s===n.rnaMoleculeName&&u===n.nucleotideIndex){for(var d=[];i.rnaMoleculeName in a&&i.nucleotideIndex in a[i.rnaMoleculeName];)d.push(i),i=a[i.rnaMoleculeName][i.nucleotideIndex];return d.push(i),d.reverse()}var f,p=m(b(i));try{for(p.s();!(f=p.n()).done;){var h=f.value;h.rnaMoleculeName in r&&r[h.rnaMoleculeName].has(h.nucleotideIndex)||(o(h),h.rnaMoleculeName in a||(a[h.rnaMoleculeName]={}),a[h.rnaMoleculeName][h.nucleotideIndex]=i,t.push(h))}}catch(v){p.e(v)}finally{p.f()}}}for(var I=b(c),C=void 0,w=0;w<I.length;w++)for(var A=w+1;A<I.length;A++){var k=N(I[w],I[A]);void 0!==k&&((void 0===C||C.length>k.length)&&(C=k))}if(void 0===C)throw Er;var T=[].concat(v(C),[c]);p.cycleIndices=T;var M,R=T.map((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return x.rnaMoleculeProps[n].nucleotideProps[t]})),_=m(T);try{for(_.s();!(M=_.n()).done;){var j=M.value,B=j.rnaMoleculeName,z=j.nucleotideIndex;p.addFullIndices({rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName:B,nucleotideIndex:z})}}catch(Qt){_.e(Qt)}finally{_.f()}var G=0,H=T.reduce((function(e,n,t){return oo(e,n)<0?e:(G=t,n)})),q=g[H.rnaMoleculeName][H.nucleotideIndex].filter((function(e){var n;return rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(x.rnaMoleculeProps[H.rnaMoleculeName].nucleotideProps[H.nucleotideIndex].symbol,x.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),h)})).filter((function(e){return T.some((function(n){return e.rnaMoleculeName===n.rnaMoleculeName&&e.nucleotideIndex===n.nucleotideIndex}))})).reduce((function(e,n){return oo(e,n)>0?e:n})),ne=T.findIndex((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return n===q.rnaMoleculeName&&t===q.nucleotideIndex}));if(-1===ne)throw"Cannot find the minimum graph node.";var te=(G+1)%T.length===ne?-1:1,re=R[G],oe=R[ne];p.boundingVector0=re,p.boundingVector1=oe;var ae=.5*Q(re,oe)+Sr;if(E(ae,0,.02))throw{errorMessage:"Cannot determine repositioning data for this cycle, because its anchoring vector positions are exactly equal."};var ie,le=F(O(re,oe),.5),se=U(L(oe,re)),ue=re.x,ce=re.y,de=oe.x,fe=oe.y,pe=ue*ue,he=ce*ce,ve=de-ue;if(E(ve,0)){var me=1/(fe-ce),xe=(ue-de)*me,ge=(de*de-pe+fe*fe-he)*me*.5,ye=1+xe*xe,be=1/(2*ye),Ne=4*ye,Ie=2*(xe*(-ce+ge)-ue),Ce=-Ie,Se=Ie*Ie,Ee=pe+he+ge*(ge-2*ce),we=1/se.x;ie=function(e){var n=Ee-e*e,t=(Ce+Math.sqrt(Se-Ne*n))*be,r=Math.abs((t-le.x)*we);return O(le,F(se,r))}}else{var Ae=1/ve,ke=(ce-fe)*Ae,Pe=(de*de-pe+fe*fe-he)*Ae*.5,Te=1+ke*ke,Me=1/(2*Te),Re=4*Te,_e=2*(ke*(-ue+Pe)-ce),je=-_e,Oe=_e*_e,Le=pe+he+Pe*(Pe-2*ue),De=1/se.y;ie=function(e){var n=Le-e*e,t=(je+Math.sqrt(Oe-Re*n))*Me,r=Math.abs((t-le.y)*De);return O(le,F(se,r))}}var Fe=R.map((function(e){return Ir(re,oe,e).radius})),Be=Math.max(ae,Fe.reduce((function(e,n){return e+n}),0)/Fe.length);var We,Ue=ie(Be),Ge=u({},c.rnaComplexIndex,{}),He=Ge[c.rnaComplexIndex],Ke=u({},c.rnaComplexIndex,[]),Ve=Ke[c.rnaComplexIndex],qe=m(T);try{for(qe.s();!(We=qe.n()).done;){var Qe=We.value,Xe=Qe.rnaMoleculeName,Ye=Qe.nucleotideIndex;if(Xe in He||(He[Xe]=[]),He[Xe].push(Ye),Xe in g){var $e=g[Xe];if(Ye in $e){var Ze,Je=m($e[Ye]);try{for(Je.s();!(Ze=Je.n()).done;){var en=Ze.value;Ve.push(lo(Qe,en))}}catch(Qt){Je.e(Qt)}finally{Je.f()}}}}}catch(Qt){qe.e(Qt)}finally{qe.f()}for(var nn=new Array,tn=0;tn<T.length;tn++)if(tn!==G&&tn!==ne){var rn=T[tn],on=(tn+1)%T.length,an=T[on],ln=R[tn],sn=R[on],un=F(O(ln,sn),.5),cn=U(L(sn,ln));X(cn,L(un,Ue))<0&&(cn=D(cn));var dn=$(cn);if(rn.rnaMoleculeName!==an.rnaMoleculeName||1!==Math.abs(rn.nucleotideIndex-an.nucleotideIndex)){var fn=.5*Q(ln,sn),pn=rn.rnaMoleculeName,hn=an.rnaMoleculeName,vn=rn.nucleotideIndex,mn=an.nucleotideIndex,xn=x.rnaMoleculeProps[pn],gn=x.rnaMoleculeProps[hn],yn=xn.nucleotideProps,bn=gn.nucleotideProps,Nn=g[pn],In=g[hn];pn in He||(He[pn]=[]);var Cn=He[pn];hn in He||(He[hn]=[]);for(var Sn=He[hn],En=new Array,wn=vn-T[(tn-1+T.length)%T.length].nucleotideIndex,An=mn-T[(tn+2)%T.length].nucleotideIndex,kn=0,Pn=[{rnaMoleculeName:pn,nucleotideIndex:vn+wn,otherRnaMoleculeName:hn,otherInitialNucleotideIndex:mn,nucleotideProps:yn,nucleotideKeysToRerenderPerRnaMolecule:Cn,basePairsPerRnaMolecule:Nn,nucleotideIndexIncrement:wn,otherNucleotideIndexIncrement:An},{rnaMoleculeName:hn,nucleotideIndex:mn+An,otherRnaMoleculeName:pn,otherInitialNucleotideIndex:vn,nucleotideProps:bn,nucleotideKeysToRerenderPerRnaMolecule:Sn,basePairsPerRnaMolecule:In,nucleotideIndexIncrement:An,otherNucleotideIndexIncrement:wn}];kn<Pn.length;kn++){var Tn=Pn[kn],Mn=Tn.rnaMoleculeName,Rn=Tn.nucleotideIndex,_n=Tn.otherRnaMoleculeName,jn=Tn.otherInitialNucleotideIndex,On=Tn.nucleotideProps,Ln=Tn.nucleotideKeysToRerenderPerRnaMolecule,Dn=Tn.basePairsPerRnaMolecule,Fn=Tn.nucleotideIndexIncrement;for(Tn.otherNucleotideIndexIncrement;Rn&&(Mn!==_n||Rn!==jn)&&Rn in On;){p.addFullIndices({rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName:Mn,nucleotideIndex:Rn});var Bn=On[Rn],Wn=ee(L(Bn,un));Wn.angle-=dn;var zn=void 0,Un=new Array;if(void 0!==Bn.labelContentProps&&(zn=$(Bn.labelContentProps),Un.push({position:Bn.labelContentProps,magnitude:V(Bn.labelContentProps)})),void 0!==Bn.labelLineProps){var Hn=Bn.labelLineProps.points;zn=$(Hn[0]),Un.push.apply(Un,v(Hn.map((function(e){return{position:e,magnitude:V(e)}}))))}if(void 0!==zn&&(zn-=dn),En.push({singularNucleotideProps:Bn,polarWithAngleSubtracted:Wn,annotationData:void 0===zn?void 0:{subtractedAnnotationAngle:zn,positionsWithMagnitudes:Un}}),Ln.push(Rn),Rn in Dn){var Kn,Vn={rnaMoleculeName:Mn,nucleotideIndex:Rn},qn=m(Dn[Rn]);try{for(qn.s();!(Kn=qn.n()).done;){var Qn=Kn.value;Ve.push(lo(Vn,Qn))}}catch(Qt){qn.e(Qt)}finally{qn.f()}}Rn+=Fn}}nn.push({arrayIndex:tn,positionsToEdit:En,originalBasePairDistanceOverTwo:fn})}}for(var Xn=0,Yn=Object.values(He);Xn<Yn.length;Xn++){Yn[Xn].sort(P)}function $n(){r(structuredClone(Ge)),o(structuredClone(Ke))}Ve.sort(oo);for(var Zn=new Array,Jn=0,nt=Object.entries(l);Jn<nt.length;Jn++)for(var tt=y(nt[Jn],2),ot=tt[0],at=tt[1],it=(Number.parseInt(ot),0),lt=Object.entries(at);it<lt.length;it++)for(var st=y(lt[it],2),ut=st[0],ct=st[1],dt=x.rnaMoleculeProps[ut],ft=0,pt=Array.from(ct);ft<pt.length;ft++){var ht=pt[ft],vt=dt.nucleotideProps[ht];Zn.push(vt)}p.updatePositionsHelper=function(e,n){for(var t,r,o=ie(e),a=L(re,o),i=L(oe,o),l=(t=a,r=i,Math.acos(X(t,r)/Math.sqrt(K(t)*K(r)))),s=$(a),u=(2*Math.PI-l)/(R.length-1)*S(Y(i,a)),c=s,f=G,p=new Array,h=0;h<R.length-2;h++){c+=u,f=(f+te+R.length)%R.length;var x=O(o,J({radius:e,angle:c})),g=R[f];p.push({angle:c,singularNucleotideProps:g}),Zn.includes(g)||(g.x=x.x,g.y=x.y)}if(n){var y,b=m(p);try{for(b.s();!(y=b.n()).done;){var N=y.value,I=N.angle,C=N.singularNucleotideProps;if(!Zn.includes(C)){var E=Z(I),w=[];void 0!==C.labelContentProps&&w.push(C.labelContentProps),void 0!==C.labelLineProps&&(C.labelLineProps.points=v(C.labelLineProps.points),w.push.apply(w,v(C.labelLineProps.points)));for(var A=0,k=w;A<k.length;A++){var P=k[A],T=F(E,V(P));P.x=T.x,P.y=T.y}}}}catch(Qt){b.e(Qt)}finally{b.f()}}for(var M=function(){var t=j[_],r=t.arrayIndex,a=t.positionsToEdit,i=t.originalBasePairDistanceOverTwo,l=R[r],s=R[(r+1)%R.length],u=F(O(l,s),.5),c=$(L(u,o)),f=i/e,p=O(J({angle:c,radius:e*Math.sqrt(1-f*f)}),o),h=F(W(L(l,u)),i),x=O(p,h),g=L(p,h);if(Zn.includes(l)||(l.x=x.x,l.y=x.y),Zn.includes(s)||(s.x=g.x,s.y=g.y),u=F(O(x,g),.5),0===a.length)return"continue";var y,b=a.map((function(e){var n=e.singularNucleotideProps,t=d({},e.polarWithAngleSubtracted);return t.angle+=c,{singularNucleotideProps:n,dv:J(t)}})),N=X(L(u,o),b[0].dv)<0,I=N?L:O,C=m(b);try{for(C.s();!(y=C.n()).done;){var S=y.value,E=S.singularNucleotideProps,w=I(u,S.dv);Zn.includes(E)||(E.x=w.x,E.y=w.y)}}catch(Qt){C.e(Qt)}finally{C.f()}if(n){var A,k=m(a);try{for(k.s();!(A=k.n()).done;){var P=A.value,T=P.singularNucleotideProps,M=P.annotationData;if(void 0!==M){var D=N?c-M.subtractedAnnotationAngle:c+M.subtractedAnnotationAngle;void 0!==T.labelLineProps&&(T.labelLineProps.points=v(T.labelLineProps.points));var B,z=Z(D),U=m(M.positionsWithMagnitudes);try{for(U.s();!(B=U.n()).done;){var G=B.value,H=G.position,K=F(z,G.magnitude);Zn.includes(H)||(H.x=K.x,H.y=K.y)}}catch(Qt){U.e(Qt)}finally{U.f()}}}}catch(Qt){k.e(Qt)}finally{k.f()}}},_=0,j=nn;_<j.length;_++)M();$n()};var mt=T[G],xt=mt.rnaMoleculeName,gt=x.rnaMoleculeProps[xt],yt=T[ne],bt=yt.rnaMoleculeName,Nt=x.rnaMoleculeProps[bt];p.rnaCycleBoundsText=(0,Gn.jsxs)(Gn.Fragment,{children:["Anchored by:",(0,Gn.jsx)("br",{}),"Nucleotide #",mt.nucleotideIndex+gt.firstNucleotideIndex,(0,Gn.jsx)("br",{}),'In RNA molecule "',xt,'"',(0,Gn.jsx)("br",{}),"And",(0,Gn.jsx)("br",{}),"Nucleotide #",yt.nucleotideIndex+Nt.firstNucleotideIndex,(0,Gn.jsx)("br",{}),'In RNA molecule "',bt,'"',(0,Gn.jsx)("br",{}),'In RNA complex "',x.name,'"']});for(var It=new Array,Ct=0,St=nn;Ct<St.length;Ct++){var Et,wt=m(St[Ct].positionsToEdit);try{for(wt.s();!(Et=wt.n()).done;){var At=Et.value.singularNucleotideProps;It.push(At)}}catch(Qt){wt.e(Qt)}finally{wt.f()}}ae=nn.reduce((function(e,n){var t=n.originalBasePairDistanceOverTwo;return Math.max(e,t+Sr)}),ae),p.minimumRadius=ae,p.editMenuProps={initialRadius:Be,minimumRadius:ae,updatePositionsHelper:p.updatePositionsHelper,cycleGraphNucleotides:R.filter((function(e){return!Zn.includes(e)})),branchNucleotides:It.filter((function(e){return!Zn.includes(e)})),rerender:$n,getRadius:function(){return Math.max(Ir(R[0],re,oe).radius,ae)}};var kt=Vr(c.rnaComplexIndex,x,h),Pt=p.indicesOfAffectedNucleotides[c.rnaComplexIndex],Tt=[];p.helices=[];var Mt,Rt=m(kt.helixDataPerRnaMolecules);try{for(Rt.s();!(Mt=Rt.n()).done;){var _t,jt=Mt.value,Ot=jt.rnaMoleculeName0,Lt=m(jt.helixData);try{for(Lt.s();!(_t=Lt.n()).done;){var Dt=_t.value,Ft=Dt.rnaMoleculeName1,Bt=Dt.start,Wt=Dt.stop,zt={rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName0:Ot,rnaMoleculeName1:Ft,nucleotideIndex0:Bt[0]+x.rnaMoleculeProps[Ot].firstNucleotideIndex,nucleotideIndex1:Math.max(Bt[1],Wt[1])+x.rnaMoleculeProps[Ft].firstNucleotideIndex,length:Math.abs(Bt[0]-Wt[0])+1},Ut=!0;e:for(var Gt=0;Gt<zt.length;Gt++){var Ht=zt.nucleotideIndex0+Gt,Kt=zt.nucleotideIndex1-Gt;if(!(Ot in Pt)){Ut=!1;break}if(!(Ft in Pt)){Ut=!1;break}var Vt=Pt[Ot],qt=Pt[Ft];if(!Vt.has(Ht)||!qt.has(Kt)){Ut=!1;break e}}Ut&&(Tt.push(zt),p.helices.push({rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName0:Ot,rnaMoleculeName1:Ft,start:Bt,stop:Wt}))}}catch(Qt){Lt.e(Qt)}finally{Lt.f()}}}catch(Qt){Rt.e(Qt)}finally{Rt.f()}return p.initialBasePairs=Tt,p}return Ge(t,[{key:"drag",value:function(){var e=this.initialDrag,n=this.updatePositionsHelper,t=this.boundingVector0,r=this.boundingVector1,o=this.minimumRadius;return{initiateDrag:function(){return e},continueDrag:function(e,a){n(Math.max(Ir(t,r,e).radius,o),a)}}}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0,r=t.rnaComplexIndex;t.rnaMoleculeName;switch(e){case b.EDIT:n=(0,Gn.jsx)(gr.Component,d({},this.editMenuProps));break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(){}});break;case b.ANNOTATE:var o,a=u({},r,{}),i=a[r],l={rnaMoleculeName:void 0},s=r in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[r]:{},c=m(this.cycleIndices);try{for(c.s();!(o=c.n()).done;){var f=o.value,p=f.rnaMoleculeName,h=f.nucleotideIndex;p in i||(i[p]=[]);var v=p in s?s[p]:new Set,x=i[p];if(!v.has(h))if(p===l.rnaMoleculeName&&x.length>0){var g=x[x.length-1];h===g.minimumNucleotideIndexInclusive-1?g.minimumNucleotideIndexInclusive=h:h===g.maximumNucleotideIndexInclusive+1?g.maximumNucleotideIndexInclusive=h:x.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}else x.push({minimumNucleotideIndexInclusive:h,maximumNucleotideIndexInclusive:h})}}catch(y){c.e(y)}finally{c.f()}n=(0,Gn.jsx)(lt.Component,{regions:a,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," RNA cycle:"]}),(0,Gn.jsx)("br",{}),this.rnaCycleBoundsText,(0,Gn.jsx)("br",{}),n]})}},{key:"getHelices",value:function(){return this.helices}}]),t}(hr),Ar=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f,p,h,v=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(h=n.call(this,e,r,o,a,l,c,d)).dragListener=void 0,h.partialHeader=void 0,h.editMenuProps=void 0,h.initialBasePairs=void 0,h.helix=void 0;var m=h.fullKeys0,x=m.rnaComplexIndex,g=m.rnaMoleculeName,y=m.nucleotideIndex,b=g,N=h.rnaComplexProps[x],I=N.basePairs,C=N.rnaMoleculeProps[b],S=C.nucleotideProps[y];if(!rt.isNucleotideBasePaired(S.symbol,N,I,g,y,v))throw fr;var E,w=I[b][y];if(1===w.length)E=w[0];else{var A;if(void 0===d)throw pr;if(E=w.find((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return d.rnaMoleculeName===n&&d.nucleotideIndex===t})),!rt.isEnabledBasePair(null!==(A=E.basePairType)&&void 0!==A?A:et(S.symbol,N.rnaMoleculeProps[E.rnaMoleculeName].nucleotideProps[E.nucleotideIndex].symbol),v))throw fr}var k=E.rnaMoleculeName,T=N.rnaMoleculeProps[k],M=T.nucleotideProps[E.nucleotideIndex],R=new Array,_=(u(f={},b,[]),u(f,k,[]),f),j=_[b],D=_[k],B=u({},x,_),W=u({},x,[]),z=W[x];z.push(lo({rnaMoleculeName:b,nucleotideIndex:y},{rnaMoleculeName:k,nucleotideIndex:E.nucleotideIndex}));var G=Yr(N,b,y,k,E.nucleotideIndex,R,v,z,(function(e){_[e.rnaMoleculeName].push(e.nucleotideIndex)})),H=G.start,K=G.stop;if(b===k){var V=function(e,n){return Math.abs(e[0]-e[1])-Math.abs(n[0]-n[1])}(H,K);0===V?(Xr(N,b,H,R,j,v),H[0]!==K[0]&&Xr(N,b,K,R,j,v)):Xr(N,b,V<0?H:K,R,j,v)}function q(){r(structuredClone(B)),o(structuredClone(W))}j.sort(P),D.sort(P),z.sort(oo);var Q=new Array;if(x in l){var X=l[x];if(b in X)for(var Y=X[b],$=0,Z=Array.from(Y);$<Z.length;$++){var J=Z[$];Q.push(C.nucleotideProps[J])}if(k in X)for(var ee=X[k],ne=0,te=Array.from(ee);ne<te.length;ne++){var re=te[ne];Q.push(T.nucleotideProps[re])}}R=R.filter((function(e){return!Q.includes(e)})),h.dragListener=vr({x:S.x,y:S.y},R,q);var oe,ae,ie,le="Nucleotides [".concat(H[0]+C.firstNucleotideIndex,", ").concat(K[0]+C.firstNucleotideIndex,"]"),se="Nucleotides [".concat(H[1]+T.firstNucleotideIndex,", ").concat(K[1]+T.firstNucleotideIndex,"]");if(oe=b===k?(0,Gn.jsxs)(Gn.Fragment,{children:[le,(0,Gn.jsx)("br",{}),"Contiguously bound to",(0,Gn.jsx)("br",{}),se,(0,Gn.jsx)("br",{}),'In RNA molecule "',b,'"']}):(0,Gn.jsxs)(Gn.Fragment,{children:[le,(0,Gn.jsx)("br",{}),'In RNA molecule "',b,'"',(0,Gn.jsx)("br",{}),se,(0,Gn.jsx)("br",{}),'In RNA molecule "',k,'"']}),b===k){var ue,ce=Math.min(H[0],H[1],K[0],K[1]);switch(ce){case H[0]:ue=H[1];break;case H[1]:ue=H[0];break;case K[0]:ue=K[1];break;case K[1]:ue=K[0];break;default:throw"This condition should be impossible."}ae=C.nucleotideProps[ce],ie=C.nucleotideProps[ue]}else ae=S,ie=M;F(O(ae,ie),.5),U(L(ie,ae));h.partialHeader=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("br",{}),oe,(0,Gn.jsx)("br",{}),'In RNA complex "',N.name,'"',(0,Gn.jsx)("br",{})]});for(var de=R.length>0&&null!==(p=R[0].color)&&void 0!==p?p:we,fe=1;fe<R.length;fe++){var pe;if(!je(de,null!==(pe=R[fe].color)&&void 0!==pe?pe:we)){!1;break}}h.editMenuProps={positions:R,onUpdatePositions:q,boundingVector0:ae,boundingVector1:ie};var he={rnaComplexIndex:x,rnaMoleculeName0:b,rnaMoleculeName1:k,nucleotideIndex0:Math.min(H[0],K[0])+C.firstNucleotideIndex,nucleotideIndex1:Math.max(H[1],K[1])+T.firstNucleotideIndex,length:K[0]-H[0]+1};return h.initialBasePairs=[he],h.addFullIndicesPerNucleotideKeysToRerender(B),h.helix={rnaComplexIndex:x,rnaMoleculeName0:b,rnaMoleculeName1:k,start:H,stop:K},h}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0,r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," helix:"]}),this.partialHeader]});switch(e){case b.EDIT:n=(0,Gn.jsx)(Gn.Fragment,{children:(0,Gn.jsx)(lr.Simplified,d({},this.editMenuProps))});break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:r,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o});break;case b.ANNOTATE:var i,l=this.initialBasePairs[0],s=l.rnaMoleculeName0,c=l.rnaMoleculeName1,f=l.nucleotideIndex0,p=l.nucleotideIndex1,h=l.length,v=this.rnaComplexProps[r],m=v.rnaMoleculeProps[s],x=v.rnaMoleculeProps[c],g=f-m.firstNucleotideIndex,y=p-x.firstNucleotideIndex,N={minimumNucleotideIndexInclusive:g,maximumNucleotideIndexInclusive:g+h-1},I={minimumNucleotideIndexInclusive:y-h+1,maximumNucleotideIndexInclusive:y},S=r in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[r]:{},E=s in S?S[s]:new Set,w=c in S?S[c]:new Set,A=[],k=[];lt.populateRegions(E,C(N.maximumNucleotideIndexInclusive+1,N.minimumNucleotideIndexInclusive),A),lt.populateRegions(w,C(I.maximumNucleotideIndexInclusive+1,I.minimumNucleotideIndexInclusive),k),i=u({},r,s===c?u({},s,A):{regionsPerRnaMoleculeName0:A,regionsPerRnaMoleculeName1:k}),n=(0,Gn.jsx)(lt.Component,{regions:i,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unrecognized Tab"}return(0,Gn.jsxs)(Gn.Fragment,{children:[a,n]})}},{key:"getHelices",value:function(){return[this.helix]}}]),t}(hr);(Cr||(Cr={})).Component=function(n){var t=n.initialName,r=n.rnaComplexIndex,o=n.rnaMoleculeName,a=n.rnaComplexProps,i=n.setNucleotideKeysToRerender,l=n.setBasePairKeysToRerender,s=a[r],c=s.basePairs,f=(0,e.useContext)(zr.App.UpdateRnaMoleculeNameHelper),p=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),h=r in p?p[r]:{},v=o in h?h[o]:new Set,x=y((0,e.useState)(t),2),g=x[0],b=x[1];(0,e.useEffect)((function(){b(t)}),[t]);var N=(0,e.useMemo)((function(){var e=s.rnaMoleculeProps[t],n=c[t],o=e.nucleotideProps,a=Object.keys(o).map(M),d=new Array,f=u({},r,u({},t,[])),p=f[r][t],h=u({},r,[]),x=h[r],g=void 0;a.sort(T);var y,b=!1,N=m(a);try{for(N.s();!(y=N.n()).done;){var I=y.value;p.unshift(I);var C=o[I];if(v.has(I)||d.unshift(C),I in n){x.unshift({rnaMoleculeName:t,nucleotideIndex:I});var S,E=n[I],w=m(E);try{for(w.s();!(S=w.n()).done;)S.value.rnaMoleculeName!==t&&(b=!0)}catch(R){w.e(R)}finally{w.f()}var A=E.reduce((function(e,n){return Math.max(e,n.nucleotideIndex)}),Number.NEGATIVE_INFINITY);g={0:C,1:o[A]}}}}catch(R){N.e(R)}finally{N.f()}if(void 0===g){var k=Object.values(o)[0];g={0:O(k,{x:-1,y:0}),1:O(k,{x:1,y:0})}}function P(){i(structuredClone(f)),l(structuredClone(h))}return b?{errorMessage:"Cannot re-position nucleotides of this RNA molecule, because it is base-paired to another RNA molecule.",orientationEditorProps:{boundingVector0:{x:0,y:0},boundingVector1:{x:1,y:0},positions:d,onUpdatePositions:P,disabledFlag:!0}}:{orientationEditorProps:{positions:d,onUpdatePositions:P,boundingVector0:g[0],boundingVector1:g[1]},errorMessage:void 0}}),[t]),I=N.orientationEditorProps,C=N.errorMessage;return(0,Gn.jsxs)(Gn.Fragment,{children:["Name:\xa0",(0,Gn.jsx)(it.Component,{value:g,setValue:function(e){b(e)},valueToString:function(e){return e},stringToValue:function(e){return e in s.rnaMoleculeProps?(alert("This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."),{errorMessage:"This RNA-molecule name already represents a different molecule in this RNA complex. Change the name of the other RNA molecule first."}):(f(r,g,e),e)},htmlInputType:"text"}),(0,Gn.jsx)("br",{}),C&&(0,Gn.jsxs)(Gn.Fragment,{children:[C,(0,Gn.jsx)("br",{})]}),(0,Gn.jsx)(lr.Simplified,d({},I))]})};var kr,Pr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f,p=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(f=n.call(this,e,r,o,a,l,c,d)).dragListener=void 0,f.dragError=void 0,f.editMenuProps=void 0,f.initialBasePairs=void 0,f.helices=void 0;var h=f.fullKeys0,v=h.rnaComplexIndex,x=h.rnaMoleculeName,g=h.nucleotideIndex,y=f.rnaComplexProps[v],b=y.rnaMoleculeProps[x],N=b.nucleotideProps[g],I=new Array,C=y.basePairs[x],S=u({},v,u({},x,[])),E=S[v][x],w=u({},v,[]),A=w[v],k=Object.keys(b.nucleotideProps).map(M);k.sort(P);var T,R=v in l?l[v]:{},_=x in R?R[x]:new Set,j=m(k);try{for(j.s();!(T=j.n()).done;){var O=T.value;if(f.addFullIndices({rnaComplexIndex:v,rnaMoleculeName:x,nucleotideIndex:O}),_.has(O)||(I.push(b.nucleotideProps[O]),E.push(O)),O in C){var L,D=C[O],F={rnaMoleculeName:x,nucleotideIndex:O},B=m(D);try{for(B.s();!(L=B.n()).done;){var W=L.value;A.push(lo(F,W))}}catch(U){B.e(U)}finally{B.f()}}}}catch(U){j.e(U)}finally{j.f()}A.sort(oo),f.dragListener=vr(structuredClone(N),I,(function(){r(structuredClone(S)),o(structuredClone(w))})),f.editMenuProps={initialName:x,rnaComplexProps:e,rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName:x,setNucleotideKeysToRerender:r,setBasePairKeysToRerender:o};var z=qr(y,x,p);return f.helices=z.helixData.map((function(e){var n=e.rnaMoleculeName1,t=e.start,r=e.stop;return{rnaComplexIndex:v,rnaMoleculeName0:x,rnaMoleculeName1:n,start:t,stop:r}})),f.initialBasePairs=z.helixData.map((function(e){return{rnaComplexIndex:v,rnaMoleculeName0:x,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+b.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+b.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}})),f}return Ge(t,[{key:"drag",value:function(){if(void 0!==this.dragError)throw this.dragError;return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0,r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=(0,Gn.jsxs)("b",{children:[e,' RNA molecule "',o,'":',(0,Gn.jsx)("br",{})]});switch(e){case b.EDIT:a=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," RNA molecule:"]}),(0,Gn.jsx)("br",{})]}),n=(0,Gn.jsx)(Cr.Component,d({},this.editMenuProps));break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){for(var n=0;n<e.length;n++){var t=e[n],a="This constraint expects base pairs to involve the clicked-on RNA molecule. The base pair on line #".concat(n+1," does not.");if(r!==t.rnaComplexIndex||o!==t.rnaMoleculeName0&&o!==t.rnaMoleculeName1)throw a}}});break;case b.ANNOTATE:var i=this.rnaComplexProps[r].rnaMoleculeProps[o],l=Math.max.apply(Math,v(Object.keys(i.nucleotideProps).map(M))),s=r in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[r]:{},c=o in s?s[o]:new Set,f=[];lt.populateRegions(c,C(l+1,0),f),n=(0,Gn.jsx)(lt.Component,{regions:u({},r,u({},o,f)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,Gn.jsxs)(Gn.Fragment,{children:[a,n]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var n=this;return e.filter((function(e){var t=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1;return t===n.fullKeys0.rnaComplexIndex&&[r,o].includes(n.fullKeys0.rnaMoleculeName)}))}}]),t}(hr);!function(n){var t=function(e){return e.CLOCKWISE="clockwise",e.COUNTERCLOCKWISE="counterclockwise",e.STRAIGHT="straight",e}({});n.Orientation=t,n.Component=function(n){var r=n.updateSingleStrandPositions,o=n.updateSingleStrandColors,a=n.updateSingleStrandFonts,i=n.initialColor,l=n.initialFont,s=n.getDisplacementAlongNormal,u=n.getOrientation,c=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),f=(0,e.useContext)(zr.App.Settings)[Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS],p=(0,e.useContext)(zr.App.PushToUndoStack),h=y((0,e.useState)(u()),2),v=h[0],m=h[1],x=y((0,e.useState)(s()),2),g=x[0],b=x[1],N=y((0,e.useState)(i),2),I=N[0],C=N[1],S=y((0,e.useState)(l),2),E=S[0],w=S[1],A=y((0,e.useState)(!1),2),k=A[0],P=A[1],T=y((0,e.useState)(!1),2),M=T[0],R=T[1];(0,e.useEffect)((function(){b(s()),m(u())}),[c]);var _="orientation";function j(e){M||p(),m(e),R(!0),r(e,g,f)}return(0,e.useEffect)((function(){C(i)}),[i]),(0,e.useEffect)((function(){w(l)}),[l]),(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("b",{children:"Orientation:"}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Clockwise:\xa0",(0,Gn.jsx)("input",{type:"radio",value:"clockwise",name:_,onChange:function(){j(t.CLOCKWISE)},checked:v===t.CLOCKWISE})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Straight:\xa0",(0,Gn.jsx)("input",{type:"radio",value:"straight",name:_,onChange:function(){j(t.STRAIGHT)},checked:v===t.STRAIGHT})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Counterclockwise:\xa0",(0,Gn.jsx)("input",{type:"radio",value:"counterclockwise",name:_,onChange:function(){j(t.COUNTERCLOCKWISE)},checked:v===t.COUNTERCLOCKWISE})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{style:{display:v===t.CLOCKWISE||v===t.COUNTERCLOCKWISE?"block":"none"},children:["Displacement along normal:\xa0",(0,Gn.jsx)(it.Number,{value:g,setValue:function(e){!function(e){k||p(),b(e),P(!0)}(e),r(v,e,f)}})]}),(0,Gn.jsx)(or.Component,{color:I,setColorHelper:function(e){o(e),C(e)}}),(0,Gn.jsx)(ar.Component,d(d({},E),{},{setFont:function(e){w(e),a(e)}}))]})}}(kr||(kr={}));var Tr=2*Math.PI;function Mr(e,n,t,r,o){var a,i=e.angleTraversal/(t-n),l=e.beginningAngle+i,s=new Array,u=m(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;s.push({angle:l,singularNucleotideProps:c});var d=O(e.boundingCircle.center,J({angle:l,radius:e.boundingCircle.radius}));c.x=d.x,c.y=d.y,l+=i}}catch(S){u.e(S)}finally{u.f()}if(o){var f,p=m(s);try{for(p.s();!(f=p.n()).done;){var h=f.value,x=h.singularNucleotideProps,g=Z(h.angle),y=[];void 0!==x.labelContentProps&&y.push(x.labelContentProps),void 0!==x.labelLineProps&&(x.labelLineProps.points=v(x.labelLineProps.points),y.push.apply(y,v(x.labelLineProps.points)));for(var b=0,N=y;b<N.length;b++){var I=N[b],C=F(g,V(I));I.x=C.x,I.y=C.y}}}catch(S){p.e(S)}finally{p.f()}}}function Rr(e,n,t,r){var o=L(n,e),a=L(t,e),i=$(o),l=($(a)-i+Tr)%Tr;return r(l)&&(l=function(e){return e<0?e+Tr:e-Tr}(l)),{beginningAngle:i,angleTraversal:l}}var _r,jr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,f){var p,h,v=s.truncateRnaSingleStrandFlag,x=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(h=n.call(this,e,r,o,a,l,c,f)).dragListener=void 0,h.partialMenuHeader=void 0,h.getDisplacementAlongNormal=void 0,h.getOrientation=void 0,h.updateSingleStrandPositions=void 0,h.updateSingleStrandColors=void 0,h.updateSingleStrandFonts=void 0,h.formattedLowerBoundingNucleotideIndex=void 0,h.formattedUpperBoundingNucleotideIndex=void 0,h.lowerBoundingNucleotideIndex=void 0,h.upperBoundingNucleotideIndex=void 0;var g=h.fullKeys0,y=g.rnaComplexIndex,b=g.rnaMoleculeName,N=g.nucleotideIndex,I=new Set;if(y in l){var C=l[y];b in C&&(I=C[b])}var E=h.rnaComplexProps[y],w=null!==(p=E.basePairs[b])&&void 0!==p?p:{};if(N in w)throw dr;var A,k=E.rnaMoleculeProps[b],P=new Array,T=[],M=u({},y,u({},b,T)),R=[],_=u({},y,R),j=N;h.addFullIndices({rnaComplexIndex:y,rnaMoleculeName:b,nucleotideIndex:N});for(var D={x:0,y:0},U=function(){var e=j-1;if(j=e,!(e in k.nucleotideProps))return D=structuredClone(k.nucleotideProps[e+1]),A=!1,"break";var n=k.nucleotideProps[e];if(e in w&&w[e].some((function(n){var t,r=n.rnaMoleculeName,o=n.nucleotideIndex,a=null!==(t=n.basePairType)&&void 0!==t?t:et(k.nucleotideProps[e].symbol,E.rnaMoleculeProps[r].nucleotideProps[o].symbol);return rt.isEnabledBasePair(a,x)}))||v&&I.has(N)!==I.has(e))return D=n,A=!0,"break";T.unshift(e),h.addFullIndices({rnaComplexIndex:y,rnaMoleculeName:b,nucleotideIndex:e}),P.unshift(n)};;){if("break"===U())break}var G=P.length;T.push(N),P.push(k.nucleotideProps[N]);for(var H,K=N,V={x:0,y:0},q=function(){var e=K+1;if(K=e,!(e in k.nucleotideProps))return V=structuredClone(k.nucleotideProps[e-1]),H=!1,"break";var n=k.nucleotideProps[e];if(e in w&&w[e].some((function(n){var t,r=n.rnaMoleculeName,o=n.nucleotideIndex,a=null!==(t=n.basePairType)&&void 0!==t?t:et(k.nucleotideProps[e].symbol,E.rnaMoleculeProps[r].nucleotideProps[o].symbol);return rt.isEnabledBasePair(a,x)}))||v&&I.has(N)!==I.has(e))return V=n,H=!0,"break";T.push(e),h.addFullIndices({rnaComplexIndex:y,rnaMoleculeName:b,nucleotideIndex:e}),P.push(n)};;){if("break"===q())break}for(var $=j;$<=K;$++)if($ in w){var Z,J=m(w[$]);try{for(J.s();!(Z=J.n()).done;){var ee=Z.value;R.push(lo({rnaMoleculeName:b,nucleotideIndex:$},ee))}}catch(se){J.e(se)}finally{J.f()}}function ne(){r(structuredClone(M)),o(structuredClone(_))}R.sort(oo);var te=P[G],re={x:te.x,y:te.y};if(I.has(N))h.dragListener={initiateDrag:function(){return{x:0,y:0}},continueDrag:function(){}},K=N-1,j=N+1;else if(A!==H){var oe;A?oe=D:(P.reverse(),G=P.length-G-1,oe=V),h.dragListener=function(e,n,t,r,o){var a=1/(t+1),i=n.length;return{initiateDrag:function(){return e},continueDrag:function(e){for(var t=F(L(e,r),a),l=r,s=0;s<i;s++){var u=n[s];u.x=l.x,u.y=l.y,l=O(l,t),u.x=l.x,u.y=l.y}o()}}}(re,P,G,oe,ne)}else h.dragListener=A?{initiateDrag:function(){return re},continueDrag:function(e,n){var t=function(e,n,t,r){var o=Ir(e,n,t);return d(d({},Rr(o.center,n,t,r)),{},{boundingCircle:o})}(e,D,V,(function(){return function(e,n,t){return S(Y(L(e,n),L(t,n)))<0}(e,D,V)}));Mr(t,j,K,P,n),ne()}}:vr(re,P,ne);h.partialMenuHeader=(0,Gn.jsxs)(Gn.Fragment,{children:[P.length," nucleotides in the range (",j+k.firstNucleotideIndex,", ",K+k.firstNucleotideIndex,")",(0,Gn.jsx)("br",{}),'In RNA molecule "',b,'"',(0,Gn.jsx)("br",{}),'In RNA complex "',E.name,'"',(0,Gn.jsx)("br",{})]});var ae=L(V,D),ie=F(O(V,D),.5),le=W(z(ae));return h.getDisplacementAlongNormal=function(){for(var e={x:0,y:0},n=0,t=P;n<t.length;n++){e=O(e,Ir(t[n],D,V).center)}return X(L(B(e,P.length),ie),le)},h.getOrientation=function(){switch(S(Y(L(P[0],ie),ae))){case 0:return kr.Orientation.STRAIGHT;case-1:return kr.Orientation.CLOCKWISE;case 1:return kr.Orientation.COUNTERCLOCKWISE}},h.lowerBoundingNucleotideIndex=j,h.upperBoundingNucleotideIndex=K,h.updateSingleStrandPositions=function(e,n,t){function r(e){var r=O(ie,F(le,n)),o=Q(r,D);Mr(d(d({},Rr(r,D,V,(function(n){return n<0!==e}))),{},{boundingCircle:{center:r,radius:o}}),j,K,P,t),ne()}switch(e){case kr.Orientation.CLOCKWISE:r(!0);break;case kr.Orientation.COUNTERCLOCKWISE:r(!1);break;case kr.Orientation.STRAIGHT:for(var o=B(L(V,D),P.length+1),a=O(D,o),i=j+1;i<K;i++){var l=k.nucleotideProps[i];l.x=a.x,l.y=a.y,a=O(a,o)}ne();break;default:throw"Unrecognized orientation value."}},h.updateSingleStrandColors=function(e){for(var n=j+1;n<K;n++){k.nucleotideProps[n].color=e}ne()},h.updateSingleStrandFonts=function(e){for(var n=j+1;n<K;n++){k.nucleotideProps[n].font=e}ne()},h.formattedLowerBoundingNucleotideIndex=j+k.firstNucleotideIndex,h.formattedUpperBoundingNucleotideIndex=K+k.firstNucleotideIndex,h}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n=this.fullKeys0,t=n.rnaComplexIndex,r=n.rnaMoleculeName,o=n.nucleotideIndex,a=this.formattedLowerBoundingNucleotideIndex,i=this.formattedUpperBoundingNucleotideIndex,l=this.rnaComplexProps[t].rnaMoleculeProps[r],s=o+l.firstNucleotideIndex,c=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," single-stranded region:"]}),(0,Gn.jsx)("br",{}),this.partialMenuHeader]});switch(e){case b.EDIT:for(var d,f,p=!0,h=!0,v=l.nucleotideProps[this.lowerBoundingNucleotideIndex+1],m=null!==(d=v.color)&&void 0!==d?d:we,x=null!==(f=v.font)&&void 0!==f?f:qe.DEFAULT,g=this.lowerBoundingNucleotideIndex+1;g<this.upperBoundingNucleotideIndex;g++){var y,N,I=l.nucleotideProps[g];je(null!==(y=I.color)&&void 0!==y?y:we,m)||(p=!1),qe.areEqual(null!==(N=I.font)&&void 0!==N?N:qe.DEFAULT,x)||(h=!1)}return(0,Gn.jsxs)(Gn.Fragment,{children:[c,(0,Gn.jsx)(kr.Component,{initialColor:p?m:we,initialFont:h?x:qe.DEFAULT,updateSingleStrandPositions:this.updateSingleStrandPositions,updateSingleStrandColors:this.updateSingleStrandColors,updateSingleStrandFonts:this.updateSingleStrandFonts,getDisplacementAlongNormal:this.getDisplacementAlongNormal,getOrientation:this.getOrientation})]});case b.FORMAT:return(0,Gn.jsxs)(Gn.Fragment,{children:[c,(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:t,rnaMoleculeName0:r,nucleotideIndex0:s}],approveBasePairs:function(e){for(var n=0;n<e.length;n++){var o=e[n],l="This constraint expects base pairs to include the clicked-on single-stranded nucleotide region. The helix on line ".concat(n+1," does not.");if(t!==o.rnaComplexIndex)throw l;var s=r===o.rnaMoleculeName0,u=r===o.rnaMoleculeName1;if(s&&u){if((i-1<o.nucleotideIndex0||a+1>=o.nucleotideIndex0+o.length)&&(i-1<=o.nucleotideIndex1-o.length||a+1>o.nucleotideIndex1))throw l}else if(s){if(i-1<o.nucleotideIndex0||a+1>=o.nucleotideIndex0+o.length)throw l}else{if(!u)throw l;if(i-1<=o.nucleotideIndex1-o.length||a+1>o.nucleotideIndex1)throw l}}},defaultRnaComplexIndex:t,defaultRnaMoleculeName0:r,defaultRnaMoleculeName1:r})]});case b.ANNOTATE:return(0,Gn.jsxs)(Gn.Fragment,{children:[c,(0,Gn.jsx)(lt.Component,{regions:u({},t,u({},r,[{minimumNucleotideIndexInclusive:a-l.firstNucleotideIndex+1,maximumNucleotideIndexInclusive:i-l.firstNucleotideIndex-1}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw{errorMessage:"Unhandled switch case."}}}},{key:"getHelices",value:function(){return[]}}]),t}(hr),Or=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f,p,h,x=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(h=n.call(this,e,r,o,a,l,c,d)).dragListener=void 0,h.partialHeader=void 0,h.editMenuProps=void 0,h.initialBasePairs=void 0,h.rnaMoleculeName0=void 0,h.rnaMoleculeName1=void 0,h.helices=void 0;var g=e[c.rnaComplexIndex],y=g.basePairs,b=y[c.rnaMoleculeName];if(!(c.nucleotideIndex in b))throw fr;var N,I=b[c.nucleotideIndex].filter((function(e){var n;return rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(g.rnaMoleculeProps[c.rnaMoleculeName].nucleotideProps[c.nucleotideIndex].symbol,g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),x)}));if(0===I.length)throw fr;if(I.length>1){if(void 0===d)throw pr;N=I.find((function(e){return e.rnaMoleculeName===d.rnaMoleculeName&&e.nucleotideIndex===d.nucleotideIndex}))}else N=I[0];h.rnaMoleculeName0=c.rnaMoleculeName,h.rnaMoleculeName1=N.rnaMoleculeName;for(var C=(u(f={},h.rnaMoleculeName0,new Set),u(f,h.rnaMoleculeName1,new Set),f),S=[c,N],E=[],w=function(){var e;if(S.length>0)e=S.shift();else if(e=E.shift(),!C[e.rnaMoleculeName].has(e.nucleotideIndex-1)&&!C[e.rnaMoleculeName].has(e.nucleotideIndex+1))return"continue";var n=e,t=n.rnaMoleculeName,r=n.nucleotideIndex;if(C[t].has(r))return"continue";C[t].add(r);for(var o=function(){var e=i[a];if(!(e.nucleotideIndex in g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps))return"continue";var n=[];if(e.nucleotideIndex in g.basePairs[e.rnaMoleculeName]&&(n=g.basePairs[e.rnaMoleculeName][e.nucleotideIndex]).filter((function(n){var t;return rt.isEnabledBasePair(null!==(t=n.basePairType)&&void 0!==t?t:et(g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol,g.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),x)})).length>0){var t=n.filter((function(e){return e.rnaMoleculeName===h.rnaMoleculeName0||e.rnaMoleculeName===h.rnaMoleculeName1})),r=function(e){return C[e.rnaMoleculeName].has(e.nucleotideIndex-1)||C[e.rnaMoleculeName].has(e.nucleotideIndex+1)};S.push.apply(S,v(t.filter(r))),E.push.apply(E,v(t.filter((function(e){return!r(e)}))))}else S.push(e)},a=0,i=[{rnaMoleculeName:t,nucleotideIndex:r-1},{rnaMoleculeName:t,nucleotideIndex:r+1}];a<i.length;a++)o();r in y[t]&&E.push.apply(E,v(y[t][r].filter((function(e){var n;return(e.rnaMoleculeName===h.rnaMoleculeName0||e.rnaMoleculeName===h.rnaMoleculeName1)&&rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(g.rnaMoleculeProps[t].nucleotideProps[r].symbol,g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),x)}))))};S.length>0||E.length>0;)w();for(var A=new Array,k=u({},c.rnaComplexIndex,(u(p={},h.rnaMoleculeName0,[]),u(p,h.rnaMoleculeName1,[]),p)),T=k[c.rnaComplexIndex],M=T[h.rnaMoleculeName0],R=T[h.rnaMoleculeName1],_=u({},c.rnaComplexIndex,[]),j=_[c.rnaComplexIndex],O=[],D={},F={},B=function(){var e,n,t=z[W],r=Array.from(C[t]);function o(e){var n=r[e];return n in g.basePairs[t]&&g.basePairs[t][n].some((function(e){var r;return rt.isEnabledBasePair(null!==(r=e.basePairType)&&void 0!==r?r:et(g.rnaMoleculeProps[t].nucleotideProps[n].symbol,g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),x)}))}for(r.sort(P);!o(0);)r.shift();for(;!o(r.length-1);)r.pop();for(var a=0;a<r.length-1;){if(o(a))a++;else r[a]!==r[a+1]-1?(r.splice(a,1),a--):a++}for(var i=r.length-1;i>0;){if(o(i))i--;else r[i]!==r[i-1]+1?(r.splice(i,1),i++):i--}(e=O).push.apply(e,v(r.filter((function(e){if(!(c.rnaComplexIndex in l))return!0;var n=l[c.rnaComplexIndex];return!(t in n)||!n[t].has(e)})).map((function(e){return g.rnaMoleculeProps[t].nucleotideProps[e]})))),(n=T[t]).push.apply(n,r);for(var s=y[t],u=0,d=r;u<d.length;u++){var f=d[u];if(f in s){var p,h=m(s[f]);try{for(h.s();!(p=h.n()).done;){var b=p.value;j.push(lo({rnaMoleculeName:t,nucleotideIndex:f},b))}}catch(S){h.e(S)}finally{h.f()}}}F[t]=r;var N=Math.min.apply(Math,r),I=Math.max.apply(Math,r);D[t]=[N,I]},W=0,z=[h.rnaMoleculeName0,h.rnaMoleculeName1];W<z.length;W++)B();var G=lo({rnaMoleculeName:h.rnaMoleculeName0,nucleotideIndex:D[h.rnaMoleculeName0][0]},{rnaMoleculeName:h.rnaMoleculeName1,nucleotideIndex:D[h.rnaMoleculeName1][0]}),H=g.rnaMoleculeProps[G.rnaMoleculeName].nucleotideProps[G.nucleotideIndex],K=y[G.rnaMoleculeName][G.nucleotideIndex].filter((function(e){var n;return(e.rnaMoleculeName===h.rnaMoleculeName0||e.rnaMoleculeName===h.rnaMoleculeName1)&&F[e.rnaMoleculeName].includes(e.nucleotideIndex)&&rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(g.rnaMoleculeProps[G.rnaMoleculeName].nucleotideProps[G.nucleotideIndex].symbol,g.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),x)})),V=K.sort(oo)[K.length-1],q=g.rnaMoleculeProps[V.rnaMoleculeName].nucleotideProps[V.nucleotideIndex],Q=U(L(q,H));function X(){r(structuredClone(k)),o(structuredClone(_))}h.editMenuProps={boundingVector0:H,boundingVector1:q,positions:O,onUpdatePositions:X,initialAngle:$(Q)},M.sort(P),R.sort(P),j.sort(oo),O=O.filter((function(e){return!A.includes(e)})),h.dragListener=vr(structuredClone(e[c.rnaComplexIndex].rnaMoleculeProps[c.rnaMoleculeName].nucleotideProps[c.nucleotideIndex]),O,X);var Y=g.rnaMoleculeProps[h.rnaMoleculeName0],Z=g.rnaMoleculeProps[h.rnaMoleculeName1],J=qr(g,h.rnaMoleculeName0,x),ee=h.rnaMoleculeName0,ne=h.rnaMoleculeName1,te=J.helixData.filter((function(e){return e.rnaMoleculeName1===h.rnaMoleculeName1&&F[h.rnaMoleculeName0].includes(e.start[0])&&F[h.rnaMoleculeName1].includes(e.start[1])&&F[h.rnaMoleculeName0].includes(e.stop[0])&&F[h.rnaMoleculeName1].includes(e.stop[1])}));function re(e){var n=g.basePairs[ee];if(!(e in n))throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";var t=n[e].filter((function(n){var t;return rt.isEnabledBasePair(null!==(t=n.basePairType)&&void 0!==t?t:et(g.rnaMoleculeProps[ee].nucleotideProps[e].symbol,g.rnaMoleculeProps[n.rnaMoleculeName].nucleotideProps[n.nucleotideIndex].symbol),x)&&n.rnaMoleculeName===ne&&F[ne].includes(n.nucleotideIndex)}));if(0===t.length)throw"An unpaired nucleotide was passed to getNucleotideIndexOfBasePairedNucleotide";return t[0].nucleotideIndex}h.initialBasePairs=te.map((function(e){return{rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName0:ee,rnaMoleculeName1:ne,nucleotideIndex0:e.start[0]+Y.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+Z.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));var oe,ae=D[h.rnaMoleculeName0][0],ie=F[h.rnaMoleculeName0].find((function(e,n){return e!==F[h.rnaMoleculeName0][n+1]-1})),le="Nucleotides [".concat(ae+Y.firstNucleotideIndex,", ").concat(ie+Y.firstNucleotideIndex,"]"),se="Nucleotides [".concat(re(ae)+Z.firstNucleotideIndex,", ").concat(re(ie)+Z.firstNucleotideIndex,"]");return oe=h.rnaMoleculeName0===h.rnaMoleculeName1?(0,Gn.jsxs)(Gn.Fragment,{children:[le,(0,Gn.jsx)("br",{}),"Bound to",(0,Gn.jsx)("br",{}),se,(0,Gn.jsx)("br",{}),'In RNA molecule "',h.rnaMoleculeName0,'"']}):(0,Gn.jsxs)(Gn.Fragment,{children:[le,(0,Gn.jsx)("br",{}),'In RNA molecule "',h.rnaMoleculeName0,'"',(0,Gn.jsx)("br",{}),se,(0,Gn.jsx)("br",{}),'In RNA molecule "',h.rnaMoleculeName1,'"']}),h.partialHeader=(0,Gn.jsxs)(Gn.Fragment,{children:[oe,(0,Gn.jsx)("br",{}),'In RNA complex "',g.name,'"',(0,Gn.jsx)("br",{})]}),h.addFullIndicesPerNucleotideKeysToRerender(k),h.helices=te.map((function(e){var n=e.rnaMoleculeName1,t=e.start,r=e.stop;return{rnaComplexIndex:c.rnaComplexIndex,rnaMoleculeName0:J.rnaMoleculeName0,rnaMoleculeName1:n,start:t,stop:r}})),h}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n=this.fullKeys0,t=n.rnaComplexIndex,r=n.rnaMoleculeName,o=this.rnaMoleculeName0,a=this.rnaMoleculeName1,i=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," stacked helices:"]}),(0,Gn.jsx)("br",{}),this.partialHeader]});switch(e){case b.EDIT:return(0,Gn.jsxs)(Gn.Fragment,{children:[i,(0,Gn.jsx)(lr.Simplified,d({},this.editMenuProps))]});case b.FORMAT:return(0,Gn.jsxs)(Gn.Fragment,{children:[i,(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){var n,t=m(e);try{for(t.s();!(n=t.n()).done;){var r=n.value;if((o!==r.rnaMoleculeName0||a!==r.rnaMoleculeName1)&&(a!==r.rnaMoleculeName0||o!==r.rnaMoleculeName1)){throw o===a?'This constraint exclusively expects base-pairs between RNA molecule "'.concat(o,'" and RNA molecule "').concat(a,'".'):'This constraint exclusivley expects base-pairs within RNA molecule "'.concat(o,'"')}}}catch(i){t.e(i)}finally{t.f()}},defaultRnaComplexIndex:t,defaultRnaMoleculeName0:r,defaultRnaMoleculeName1:r})]});case b.ANNOTATE:var l,s,c=u({},t,(u(l={},o,[]),u(l,a,[]),l)),f=c[t],p=f[o],h=f[a],v=this.rnaComplexProps[t],x=v.rnaMoleculeProps[o],g=v.rnaMoleculeProps[a],y=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,E=t in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[t]:{},w=o in E?E[o]:new Set,A=a in E?E[a]:new Set,k=m(this.initialBasePairs);try{for(k.s();!(s=k.n()).done;){var P=s.value,T=P.nucleotideIndex0,M=P.nucleotideIndex1,R=P.length,_=T-x.firstNucleotideIndex,j=_+R-1;_<y&&(y=_),j>N&&(N=j);var O=M-g.firstNucleotideIndex,L=O-R+1;L<I&&(I=L),O>S&&(S=O)}}catch(D){k.e(D)}finally{k.f()}return o===a?(N=Math.max(N,S),y=Math.min(y,I),lt.populateRegions(w,C(N+1,y),p)):(lt.populateRegions(w,C(N+1,y),p),lt.populateRegions(A,C(S+1,I),h)),(0,Gn.jsxs)(Gn.Fragment,{children:[i,(0,Gn.jsx)(lt.Component,{regions:c,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})]});default:throw"Unhandled switch case"}}},{key:"getHelices",value:function(){return this.helices}}]),t}(hr),Lr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f,p=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(f=n.call(this,e,r,o,a,l,c,d)).dragListener=void 0,f.partialMenuHeader=void 0,f.editMenuProps=void 0,f.initialBasePairs=void 0,f.minimumNucleotideIndex=void 0,f.maximumNucleotideIndex=void 0,f.helices=void 0;var h=c.rnaComplexIndex,v=c.rnaMoleculeName,x=c.nucleotideIndex,g=v,y=x,b=f.rnaComplexProps[h],N=b.rnaMoleculeProps[g],I=N.nucleotideProps[x],C=b.basePairs;if(!rt.isNucleotideBasePaired(I.symbol,b,C,g,y,p))throw fr;var S,E=C[g],w=E[x];if(1===w.length)S=w[0];else{if(void 0===d)throw pr;S=w.find((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return d.rnaMoleculeName===n&&d.nucleotideIndex===t}))}var A=S.rnaMoleculeName;if(g!==A)throw{errorMessage:"Cannot interact with a base pair between two distinct rna molecules using this constraint."};var k=S.nucleotideIndex,T=new Array,M=u({},h,u({},g,[])),R=M[h][g],_=[],j=u({},h,_),O=[];var D=Yr(b,g,y,A,k,T,p,_,(function(e){O.push(e.nucleotideIndex)})),F=D.stop,B=D.start;O.sort(P),f.minimumNucleotideIndex=Math.min(B[0],B[1],F[0],F[1]),f.maximumNucleotideIndex=Math.max(B[0],B[1],F[0],F[1]);for(var W=f.minimumNucleotideIndex;W<=f.maximumNucleotideIndex;W++)if(T.push(N.nucleotideProps[W]),R.push(W),W in E){var z,G={rnaMoleculeName:v,nucleotideIndex:W},H=m(E[W]);try{for(H.s();!(z=H.n()).done;){var K=z.value;_.push(lo(G,K))}}catch(le){H.e(le)}finally{H.f()}}function V(){r(structuredClone(M)),o(structuredClone(j))}R.sort(P),_.sort(oo);var q=new Array;if(h in l){var Q=l[h];if(g in Q)for(var X=Q[v],Y=0,Z=Array.from(X);Y<Z.length;Y++){var J=Z[Y];q.push(N.nucleotideProps[J])}}T=T.filter((function(e){return!q.includes(e)})),f.dragListener=vr(structuredClone(I),T,V);var ee=O[0],ne=O[O.length-1],te=N.nucleotideProps[ee],re=N.nucleotideProps[ne];f.partialMenuHeader=(0,Gn.jsxs)(Gn.Fragment,{children:["Nucleotides bound by",(0,Gn.jsx)("br",{}),"#",ee+N.firstNucleotideIndex," (",te.symbol,")",(0,Gn.jsx)("br",{}),"and",(0,Gn.jsx)("br",{}),"#",ne+N.firstNucleotideIndex," (",re.symbol,")",(0,Gn.jsx)("br",{}),'In RNA molecule "',v,'"',(0,Gn.jsx)("br",{}),'In RNA complex "',b.name,'"',(0,Gn.jsx)("br",{})]});var oe=U(L(re,te));f.editMenuProps={boundingVector0:te,boundingVector1:re,positions:T,onUpdatePositions:V,initialAngle:$(oe)};var ae=Qr(b,v,f.minimumNucleotideIndex,f.maximumNucleotideIndex,p);f.helices=ae.helixData.map((function(e){var n=e.start,t=e.stop;return{rnaComplexIndex:h,rnaMoleculeName0:v,rnaMoleculeName1:v,start:n,stop:t}}));var ie=ae.helixData.map((function(e){return{rnaComplexIndex:h,rnaMoleculeName0:v,rnaMoleculeName1:v,nucleotideIndex0:e.start[0]+N.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+N.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}));return f.addFullIndicesPerNucleotideKeysToRerender(M),f.initialBasePairs=ie,f}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0,r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=this.rnaComplexProps[r].rnaMoleculeProps[o],i=this.minimumNucleotideIndex+a.firstNucleotideIndex,l=this.maximumNucleotideIndex+a.firstNucleotideIndex;switch(e){case b.EDIT:n=(0,Gn.jsx)(lr.Simplified,d({},this.editMenuProps));break;case b.FORMAT:n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,approveBasePairs:function(e){for(var n=0;n<e.length;n++){var t="This constraint expects base-pairs to exist strictly within the clicked-on subdomain.",a=e[n];if(a.rnaComplexIndex!==r)throw t;if(a.rnaMoleculeName0!==o||a.rnaMoleculeName1!==o)throw t;for(var s=0,u=[a.nucleotideIndex0,a.nucleotideIndex0+a.length-1,a.nucleotideIndex1,a.nucleotideIndex1-a.length+1];s<u.length;s++){var c=u[s];if(c<i||c>l)throw t}}},initialBasePairs:this.initialBasePairs,defaultRnaComplexIndex:r,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o});break;case b.ANNOTATE:var s=r in this.indicesOfFrozenNucleotides?this.indicesOfFrozenNucleotides[r]:{},c=o in s?s[o]:new Set,f=[];lt.populateRegions(c,C(this.maximumNucleotideIndex+1,this.minimumNucleotideIndex),f),n=(0,Gn.jsx)(lt.Component,{regions:u({},r,u({},o,f)),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case"}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," RNA subdomain:"]}),(0,Gn.jsx)("br",{}),this.partialMenuHeader,n]})}},{key:"getHelices",value:function(){return this.helices}}]),t}(hr);(_r||(_r={})).Component=function(n){var t=n.initialColor,r=n.initialFont,o=n.onUpdatePositions,a=n.boundingNucleotides,i=n.allNucleotides,l=(0,e.useContext)(zr.App.InteractionConstraintOptions).affectHairpinNucleotidesFlag,s=y((0,e.useState)(null!==t&&void 0!==t?t:we),2),u=(s[0],s[1]),c=y((0,e.useState)(null!==r&&void 0!==r?r:qe.DEFAULT),2),d=c[0],f=c[1];return(0,e.useMemo)((function(){return l?i:a}),[l]),(0,e.useEffect)((function(){u(t)}),[t]),(0,e.useEffect)((function(){f(d)}),[r]),(0,Gn.jsxs)(Gn.Fragment,{children:["Base-pair type: ",n.basePairType.toLocaleLowerCase(),(0,Gn.jsx)("br",{}),(0,Gn.jsx)(lr.Simplified,{positions:i,onUpdatePositions:o,boundingVector0:a[0],boundingVector1:a[1]})]})};var Dr,Fr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,f){var p,h,v,x,g,b,N=s.affectHairpinNucleotidesFlag,I=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(b=n.call(this,e,r,o,a,l,c,f)).dragListener=void 0,b.editMenuProps=void 0,b.partialHeader=void 0,b.initialBasePairs=void 0,b.basePairedKeys=void 0,b.nucleotideIndices=void 0,b.frozenFlag0=!1,b.frozenFlag1=!1,b.hairpinLoopFlag=!1,b.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=void 0,b.helices=void 0;var C=b.fullKeys0,S=C.rnaComplexIndex,E=C.rnaMoleculeName,w=C.nucleotideIndex,A={},k=u({},S,[]),P=b.rnaComplexProps[S],T=P.basePairs;if(!rt.isNucleotideBasePaired(P.rnaMoleculeProps[E].nucleotideProps[w].symbol,P,T,E,w,I))throw fr;var M,R={rnaMoleculeName:E,nucleotideIndex:w},_=T[E][w];if(1===_.length)M=_[0];else{var j;if(void 0===f)throw pr;if(M=_.find((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return f.rnaMoleculeName===n&&f.nucleotideIndex===t})),!rt.isEnabledBasePair(null!==(j=M.basePairType)&&void 0!==j?j:et(P.rnaMoleculeProps[E].nucleotideProps[w].symbol,P.rnaMoleculeProps[M.rnaMoleculeName].nucleotideProps[M.nucleotideIndex].symbol),I))throw fr}for(var O=P.rnaMoleculeProps[E],L=O.nucleotideProps[w],D=P.rnaMoleculeProps[M.rnaMoleculeName],F=D.nucleotideProps[M.nucleotideIndex],B=T[M.rnaMoleculeName][M.nucleotideIndex],W=k[S],z=0,G=[{keys0:R,basePairsPerNucleotide:_},{keys0:M,basePairsPerNucleotide:B}];z<G.length;z++){var H,K=G[z],V=K.keys0,q=m(K.basePairsPerNucleotide);try{for(q.s();!(H=q.n()).done;){var Q=lo(V,H.value);W.push(Q)}}catch(ke){q.e(ke)}finally{q.f()}}W.sort(oo);var X=y([R,M].sort(oo),2),Y=X[0],$=X[1],Z={x:L.x,y:L.y},J=w,ee=M.nucleotideIndex,ne=E,te=M.rnaMoleculeName;if(b.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=new Set,S in l){var re=l[S];if(ne in re&&(b.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0=re[ne],b.frozenFlag0=b.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(J)),te in re){var oe=re[te];b.frozenFlag1=oe.has(ee)}}var ae=[];b.frozenFlag0||ae.push(L),b.frozenFlag1||ae.push(F),b.nucleotideIndices={rnaMoleculeName0:ne,nucleotideIndex0:J,rnaMoleculeName1:te,nucleotideIndex1:ee};var ie=T[ne];if(ne===te){var le,se=[];A[S]=u({},E,se),se.push(Y.nucleotideIndex),b.hairpinLoopFlag=!0;for(var ue=[],ce=Y.nucleotideIndex+1;ce<$.nucleotideIndex;ce++){if(ce in ie){b.hairpinLoopFlag=!1;break}ue.push({index:ce,props:O.nucleotideProps[ce]})}if((le=b).hairpinLoopFlag&&(le.hairpinLoopFlag=N),b.hairpinLoopFlag){var de,fe=m(ue);try{for(fe.s();!(de=fe.n()).done;){var pe=de.value,he=pe.index,ve=pe.props;b.addFullIndices({rnaComplexIndex:S,rnaMoleculeName:E,nucleotideIndex:he}),b.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0.has(he)||(se.push(he),ae.push(ve))}}catch(ke){fe.e(ke)}finally{fe.f()}}se.push($.nucleotideIndex)}function me(){r(structuredClone(A)),o(structuredClone(k))}var xe,ge,ye,be,Ne=[L,F];(b.dragListener=vr(Z,N?ae:[L,F],me),b.partialHeader=(0,Gn.jsxs)(Gn.Fragment,{children:["Nucleotide #",w+D.firstNucleotideIndex," (",L.symbol,")",(0,Gn.jsx)("br",{}),'In RNA molecule "',E,'"',(0,Gn.jsx)("br",{}),"Base-paired to:",(0,Gn.jsx)("br",{}),"Nucleotide #",M.nucleotideIndex+D.firstNucleotideIndex," (",F.symbol,")",(0,Gn.jsx)("br",{}),'In RNA molecule "',M.rnaMoleculeName,'"',(0,Gn.jsx)("br",{}),'In RNA complex "',P.name,'"',(0,Gn.jsx)("br",{})]}),ne===te)?(J<ee?(ye=J,be=ee):(ye=ee,be=J),xe=O.nucleotideProps[ye],ge=O.nucleotideProps[be]):(xe=L,ge=F);var Ie=null!==(p=M.basePairType)&&void 0!==p?p:et(L.symbol,F.symbol),Ce=null!==(h=L.color)&&void 0!==h?h:we,Se=null!==(v=F.color)&&void 0!==v?v:we,Ee=null!==(x=L.font)&&void 0!==x?x:qe.DEFAULT,Ae=null!==(g=F.font)&&void 0!==g?g:qe.DEFAULT;return b.editMenuProps={boundingVector0:xe,boundingVector1:ge,positions:ae,onUpdatePositions:me,orthogonalizeHelper:U,basePairType:Ie,initialColor:je(Ce,Se)?Ce:we,initialFont:qe.areEqual(Ee,Ae)?Ee:qe.DEFAULT,boundingNucleotides:Ne,allNucleotides:ae},b.initialBasePairs=[{rnaComplexIndex:S,rnaMoleculeName0:ne,rnaMoleculeName1:te,nucleotideIndex0:J+P.rnaMoleculeProps[ne].firstNucleotideIndex,nucleotideIndex1:ee+P.rnaMoleculeProps[te].firstNucleotideIndex,length:1,type:Ie}],b.basePairedKeys={rnaMoleculeName:te,nucleotideIndex:ee},b.addFullIndices(c,d({rnaComplexIndex:S},M)),b.helices=[{rnaComplexIndex:S,rnaMoleculeName0:ne,rnaMoleculeName1:te,start:{0:J,1:ee},stop:{0:J,1:ee}}],b}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n=this.fullKeys0,t=n.rnaComplexIndex,r=n.rnaMoleculeName,o=(this.fullKeys0,this.basePairedKeys,this.nucleotideIndices),a=(0,Gn.jsx)(Gn.Fragment,{});switch(e){case b.EDIT:a=(0,Gn.jsx)(_r.Component,d({},this.editMenuProps));break;case b.FORMAT:a=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){if(e.length>1)throw"This constraint expects at most one base pair.";if(1===e.length&&e[0].length>1)throw"This constraint expects at most one base pair."},defaultRnaComplexIndex:t,defaultRnaMoleculeName0:r,defaultRnaMoleculeName1:r});break;case b.ANNOTATE:var i,l={minimumNucleotideIndexInclusive:o.nucleotideIndex0,maximumNucleotideIndexInclusive:o.nucleotideIndex0},s={minimumNucleotideIndexInclusive:o.nucleotideIndex1,maximumNucleotideIndexInclusive:o.nucleotideIndex1};if(o.rnaMoleculeName0===o.rnaMoleculeName1){var c=[],f=Math.min(o.nucleotideIndex0,o.nucleotideIndex1),p=Math.max(o.nucleotideIndex0,o.nucleotideIndex1);this.hairpinLoopFlag?lt.populateRegions(this.indicesOfFrozenNucleotidesPerRnaComplexPerRnaMolecule0,C(p+1,f),c):(this.frozenFlag0||c.push(l),this.frozenFlag1||c.push(s)),i=u({},t,u({},o.rnaMoleculeName0,c))}else{var h={};this.frozenFlag0||(h[o.rnaMoleculeName0]=[l]),this.frozenFlag1||(h[o.rnaMoleculeName1]=[s]),i=u({},t,h)}a=(0,Gn.jsx)(lt.Component,{regions:i,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender})}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," single base pair:"]}),(0,Gn.jsx)("br",{}),this.partialHeader,a]})}},{key:"getHelices",value:function(){return this.helices}}]),t}(hr),Br=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,u,c){var d,f,p=s.treatNoncanonicalBasePairsAsUnpairedFlag;ze(this,t),(f=n.call(this,e,r,o,a,l,u,c)).dragListener=void 0,f.editMenuProps=void 0,f.color=void 0,f.initialBasePairs=void 0,f.approveBasePair=void 0,f.fullKeysOfNucleotidesWithColor=void 0,f.helices=void 0;var h=f.fullKeys0,x=h.rnaComplexIndex,g=h.rnaMoleculeName,y=h.nucleotideIndex,b=new Array,N={},I={},C=f.rnaComplexProps[x].rnaMoleculeProps[g].nucleotideProps[y],S=null!==(d=C.color)&&void 0!==d?d:we;f.color=S,f.fullKeysOfNucleotidesWithColor=[];var E,w=m(Object.keys(f.rnaComplexProps).map(M));try{for(w.s();!(E=w.n()).done;){var A=E.value,k=f.rnaComplexProps[A];N[A]={};var P=N[A];I[A]=[];for(var T=I[A],R=k.basePairs,_=Object.keys(k.rnaMoleculeProps),j=0,O=_;j<O.length;j++){var L=O[j],D=k.rnaMoleculeProps[L];P[L]=[];var F,B=P[L],W=R[L],z=m(Object.keys(D.nucleotideProps).map(M));try{for(z.s();!(F=z.n()).done;){var U,G=F.value,H=D.nucleotideProps[G],K=null!==(U=H.color)&&void 0!==U?U:we;if(je(S,K)){var V=!1;if(A in l){var q=l[A];if(L in q)q[L].has(G)&&(V=!0)}f.fullKeysOfNucleotidesWithColor.push({rnaComplexIndex:A,rnaMoleculeName:L,nucleotideIndex:G}),B.push(G),V||(b.push(H),G in W&&T.push({rnaMoleculeName:L,nucleotideIndex:G}))}}}catch(ee){z.e(ee)}finally{z.f()}}}}catch(ee){w.e(ee)}finally{w.f()}function Q(){r(structuredClone(N)),o(structuredClone(I))}f.dragListener=vr(structuredClone(C),b,Q),f.editMenuProps={initialCenter:C,normal:{x:1,y:0},positions:b,onUpdatePositions:Q};var X=[],Y=Kr(e,p),$=new Array;function Z(n){for(var t=e[n.rnaComplexIndex],r=t.rnaMoleculeProps[n.rnaMoleculeName0],o=t.rnaMoleculeProps[n.rnaMoleculeName1],a=n.nucleotideIndex0-r.firstNucleotideIndex,i=n.nucleotideIndex1-o.firstNucleotideIndex,l=0;l<n.length;l++){var s,u,c=r.nucleotideProps[a+l],d=o.nucleotideProps[i-l];if(!je(S,null!==(s=c.color)&&void 0!==s?s:we))return!1;if(!je(S,null!==(u=d.color)&&void 0!==u?u:we))return!1}return!0}Y.forEach((function(n){var t=n.rnaComplexIndex,r=e[t];n.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0;r.rnaMoleculeProps[n];$.push.apply($,v(e.helixData.map((function(e){var r=e.rnaMoleculeName1,o=e.start,a=e.stop;return{rnaComplexIndex:t,rnaMoleculeName0:n,rnaMoleculeName1:r,start:o,stop:a}}))))}))})),Y.forEach((function(n){var t=n.rnaComplexIndex,r=e[t];n.helixDataPerRnaMolecules.forEach((function(e){var n=e.rnaMoleculeName0,o=r.rnaMoleculeProps[n];X.push.apply(X,v(e.helixData.map((function(e){var a=e.rnaMoleculeName1,i=r.rnaMoleculeProps[a];return{rnaComplexIndex:t,rnaMoleculeName0:n,rnaMoleculeName1:e.rnaMoleculeName1,nucleotideIndex0:e.start[0]+o.firstNucleotideIndex,nucleotideIndex1:Math.max(e.start[1],e.stop[1])+i.firstNucleotideIndex,length:Math.abs(e.start[0]-e.stop[0])+1}}))))}))})),f.approveBasePair=Z;var J=X.filter(Z);return f.initialBasePairs=J,f.addFullIndicesPerNucleotideKeysToRerender(N),f.helices=$.filter((function(n){for(var t=n.rnaComplexIndex,r=n.rnaMoleculeName0,o=n.rnaMoleculeName1,a=n.start,i=n.stop,l=e[t],s=l.rnaMoleculeProps[r],u=l.rnaMoleculeProps[o],c=Math.abs(i[0]-a[0])+1,d=0;d<c;d++){var f,p,h=s.nucleotideProps[a[0]+d],v=u.nucleotideProps[a[1]+d];return je(S,null!==(f=h.color)&&void 0!==f?f:we)&&je(S,null!==(p=v.color)&&void 0!==p?p:we)}return!1})),f}return Ge(t,[{key:"drag",value:function(){return this.dragListener}},{key:"createRightClickMenu",value:function(e){var n,t,r=this.color;this.approveBasePair;switch(e){case b.EDIT:t=(0,Gn.jsx)(lr.Component,d({},this.editMenuProps));break;case b.FORMAT:t=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:this.initialBasePairs,approveBasePairs:function(e){}});break;case b.ANNOTATE:var o,a={},i=m(this.fullKeysOfNucleotidesWithColor);try{for(i.s();!(o=i.n()).done;){var l=o.value,s=l.rnaComplexIndex,u=l.rnaMoleculeName,c=l.nucleotideIndex;s in a||(a[s]={});var f=a[s];u in f||(f[u]=[]);var p=f[u];if(p.length>0){var h=p[p.length-1];c===h.maximumNucleotideIndexInclusive+1?h.maximumNucleotideIndexInclusive=c:c===h.minimumNucleotideIndexInclusive-1?h.minimumNucleotideIndexInclusive=c:p.push({minimumNucleotideIndexInclusive:c,maximumNucleotideIndexInclusive:c})}else p.push({minimumNucleotideIndexInclusive:c,maximumNucleotideIndexInclusive:c})}}catch(v){i.e(v)}finally{i.f()}t=(0,Gn.jsx)(lt.Component,{regions:a,rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw"Unhandled switch case."}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," all nucleotides of the same color:"]}),(0,Gn.jsx)("br",{}),"(red = ",r.red,", green = ",r.green,", blue = ",r.blue,", alpha = ",null!==(n=r.alpha)&&void 0!==n?n:Se,"):",(0,Gn.jsx)("br",{}),t]})}},{key:"getHelices",value:function(){return this.helices}},{key:"constrainRelevantHelices",value:function(e){var n=this;return e.filter((function(e){for(var t=e.rnaComplexIndex,r=e.rnaMoleculeName0,o=e.rnaMoleculeName1,a=e.start,i=e.stop,l=n.rnaComplexProps[t],s=l.rnaMoleculeProps[r],u=l.rnaMoleculeProps[o],c=Math.abs(i[0]-a[0])+1,d=Math.sign(i[0]-a[0]),f=Math.sign(i[1]-a[1]),p=a[0],h=a[1],v=0;v<c;v++){var m,x,g=s.nucleotideProps[p],y=u.nucleotideProps[h],b=null!==(m=g.color)&&void 0!==m?m:we,N=null!==(x=y.color)&&void 0!==x?x:we;if(je(n.color,b)||je(n.color,N))return!0;p+=d,h+=f}return!1}))}}]),t}(hr);(Dr||(Dr={})).Component=function(n){var t,r,o=n.rnaComplexProps,a=n.fullKeys,i=n.triggerRerender,l=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),s=(0,e.useMemo)((function(){var e=a.rnaComplexIndex,n=a.rnaMoleculeName,t=a.nucleotideIndex,r=o[e],i=r.rnaMoleculeProps[n],l=i.nucleotideProps[t];return d(d({},a),{},{singularRnaComplexProps:r,singularRnaMoleculeProps:i,singularNucleotideProps:l})}),[a]),u=(s.rnaComplexIndex,s.rnaMoleculeName,s.nucleotideIndex),c=(s.singularRnaComplexProps,s.singularRnaMoleculeProps),f=s.singularNucleotideProps;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(a);var p=y((0,e.useState)(f.symbol),2),h=p[0],v=p[1],m=y((0,e.useState)(f.x),2),x=m[0],g=m[1],b=y((0,e.useState)(f.y),2),N=b[0],I=b[1],C=y((0,e.useState)(null!==(t=f.color)&&void 0!==t?t:we),2),S=C[0],E=C[1],w=y((0,e.useState)(null!==(r=f.font)&&void 0!==r?r:qe.DEFAULT),2),A=w[0],k=w[1],P=y((0,e.useState)(!1),2),T=P[0],M=P[1],R=y((0,e.useState)(!1),2),_=R[0],j=R[1],O=(0,e.useContext)(zr.App.PushToUndoStack),L=(0,e.useMemo)((function(){return u-1 in c.nucleotideProps?c.nucleotideProps[u-1]:void 0}),[u]),D=(0,e.useMemo)((function(){return u+1 in c.nucleotideProps?c.nucleotideProps[u+1]:void 0}),[u]),F=(0,e.useMemo)((function(){return void 0===L?(0,Gn.jsx)(Gn.Fragment,{}):(0,Gn.jsxs)(Gn.Fragment,{children:["Distance to previous nucleotide: ",Q({x:x,y:N},L).toFixed(Xe)]})}),[L,x,N]),B=(0,e.useMemo)((function(){return void 0===D?(0,Gn.jsx)(Gn.Fragment,{}):(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("br",{}),"Distance to next nucleotide: ",Q({x:x,y:N},D).toFixed(Xe)]})}),[D,x,N]);return(0,e.useEffect)((function(){v(f.symbol),g(f.x),I(f.y)}),[a,l]),(0,e.useEffect)((function(){var e;E(null!==(e=f.color)&&void 0!==e?e:we)}),[f.color]),(0,e.useEffect)((function(){var e;k(null!==(e=f.font)&&void 0!==e?e:qe.DEFAULT)}),[f.font]),(0,Gn.jsxs)(Gn.Fragment,{children:[F,B,(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["Symbol:\xa0",(0,Gn.jsx)("select",{value:h,onChange:function(e){var n=e.target.value;!function(e){T||O(),v(e),M(!0)}(n),f.symbol=n,i()},children:Xn.symbols.map((function(e){return(0,Gn.jsx)("option",{value:e,children:e},e)}))})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["x:\xa0",(0,Gn.jsx)(it.Number,{value:x,setValue:function(e){f.x=e,function(e){_||O(),g(e),j(!0)}(e),i()}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["y:\xa0",(0,Gn.jsx)(it.Number,{value:N,setValue:function(e){f.y=e,function(e){_||O(),I(e),j(!0)}(e),i()}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsx)(or.Component,{color:S,setColorHelper:function(e){f.color=e,E(e),i()}}),(0,Gn.jsx)(ar.Component,d(d({},A),{},{setFont:function(e){f.font=e,k(e),i()}}))]})};var Wr,zr,Ur,Gr=function(e){Le(t,e);var n=We(t);function t(e,r,o,a,i,l,s,c,d){var f;ze(this,t),(f=n.call(this,e,r,o,a,l,c,d)).singularNucleotideProps=void 0,f.error=void 0,f.rerender=void 0;var p,h=f.fullKeys0,v=h.rnaComplexIndex,x=h.rnaMoleculeName,g=h.nucleotideIndex,y=f.rnaComplexProps[v],b=y.basePairs;if(f.singularNucleotideProps=y.rnaMoleculeProps[x].nucleotideProps[g],f.addFullIndices(c),x in b&&g in(p=b[x])){p[g];f.error=dr,f.rerender=function(){r(u({},v,u({},x,[g])));var e,n={rnaMoleculeName:x,nucleotideIndex:g},t=u({},v,[]),a=t[v],i=m(p[g]);try{for(i.s();!(e=i.n()).done;){var l=e.value;a.push(lo(n,l))}}catch(s){i.e(s)}finally{i.f()}o(t)}}else f.rerender=function(){r(u({},v,u({},x,[g])))};if(v in l){var N=l[v];if(x in N)N[x].has(g)&&(f.error={errorMessage:"Cannot interact with this frozen nucleotide."})}return f}return Ge(t,[{key:"drag",value:function(){if(void 0!==this.error&&this.error!==dr)throw this.error;var e=this.singularNucleotideProps,n=this.rerender;return{initiateDrag:function(){return{x:e.x,y:e.y}},continueDrag:function(t){e.x=t.x,e.y=t.y,n()}}}},{key:"createRightClickMenu",value:function(e){var n,t=this.fullKeys0,r=t.rnaComplexIndex,o=t.rnaMoleculeName,a=t.nucleotideIndex,i=this.rnaComplexProps[r],l=i.rnaMoleculeProps[o],s=this.rerender,c=(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("b",{children:[e," nucleotide #",l.firstNucleotideIndex+a]}),(0,Gn.jsx)("br",{}),'In RNA molecule "',o,'"',(0,Gn.jsx)("br",{}),'In RNA complex "',i.name,'"',(0,Gn.jsx)("br",{})]});if(void 0!==this.error&&this.error!==dr)throw this.error;switch(e){case b.EDIT:n=(0,Gn.jsx)(Dr.Component,{rnaComplexProps:this.rnaComplexProps,fullKeys:this.fullKeys0,triggerRerender:s});break;case b.FORMAT:if(void 0!==this.error)throw this.error;var d=a+l.firstNucleotideIndex;n=(0,Gn.jsx)(at.Component,{rnaComplexProps:this.rnaComplexProps,initialBasePairs:[{rnaComplexIndex:r,rnaMoleculeName0:o,nucleotideIndex0:d,length:1}],approveBasePairs:function(e){switch(e.length){case 0:break;case 1:var n=e[0];if(n.length>1)throw"This constraint expects at most one base pair.";if(n.rnaComplexIndex!==r||![n.rnaMoleculeName0,n.rnaMoleculeName1].includes(o)||![n.nucleotideIndex0,n.nucleotideIndex1].includes(d))throw"This constraint expects a base pair involving the clicked-on nucleotide.";break;default:throw"This constraint expects at most one base pair."}},defaultRnaComplexIndex:r,defaultRnaMoleculeName0:o,defaultRnaMoleculeName1:o});break;case b.ANNOTATE:n=(0,Gn.jsx)(lt.Component,{regions:u({},r,u({},o,[{minimumNucleotideIndexInclusive:a,maximumNucleotideIndexInclusive:a}])),rnaComplexProps:this.rnaComplexProps,setNucleotideKeysToRerender:this.setNucleotideKeysToRerender});break;default:throw{errorMessage:"Not yet implemented."}}return(0,Gn.jsxs)(Gn.Fragment,{children:[c,n]})}},{key:"getHelices",value:function(){return[]}}]),t}(hr);function Hr(e,n){for(var t=e.basePairs,r=[],o=0,a=Object.keys(t);o<a.length;o++)for(var i=a[o],l=t[i],s=0,u=Object.keys(l);s<u.length;s++){var c,d=u[s],f=Number.parseInt(d),p={rnaMoleculeName:i,nucleotideIndex:f},h=m(l[f]);try{for(h.s();!(c=h.n()).done;){var v,x=c.value;rt.isEnabledBasePair(null!==(v=x.basePairType)&&void 0!==v?v:et(e.rnaMoleculeProps[i].nucleotideProps[f].symbol,e.rnaMoleculeProps[x.rnaMoleculeName].nucleotideProps[x.nucleotideIndex].symbol),n)&&(io(p,x)&&r.push({keys0:p,keys1:x,mappedBasePair:x}))}}catch(g){h.e(g)}finally{h.f()}}return r.sort((function(e,n){return oo(e.keys0,n.keys0)||oo(e.keys1,n.keys1)})),r}function Kr(e,n){var t,r=[],o=m(Object.keys(e).map((function(e){return Number.parseInt(e)})).sort(P));try{for(o.s();!(t=o.n()).done;){var a=t.value,i=Hr(e[a],n);r.push(Vr(a,e[a],n,i))}}catch(l){o.e(l)}finally{o.f()}return r}function Vr(e,n,t){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr(n,t),a=[],i=m(Object.keys(n.rnaMoleculeProps).sort());try{for(i.s();!(r=i.n()).done;){var l=qr(n,r.value,t,o);a.push(l)}}catch(s){i.e(s)}finally{i.f()}return{rnaComplexIndex:e,helixDataPerRnaMolecules:a}}function qr(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr(e,t),o=e.rnaMoleculeProps[n],a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var l in o.nucleotideProps){var s=Number.parseInt(l);s<a&&(a=s),s>i&&(i=s)}return Qr(e,n,a,i,t,r)}function Qr(e,n,t,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hr(e,o),i=[],l={};function s(e,n,t,r){n in e||(e[n]={});var o=e[n];t in o||(o[t]=r)}a=a.filter((function(e){var o=e.keys0,a=e.keys1;return o.rnaMoleculeName===n&&o.nucleotideIndex>=t&&o.nucleotideIndex<=r||a.rnaMoleculeName===n&&a.nucleotideIndex>=t&&a.nucleotideIndex<=r}));var u,c=m(a);try{for(c.s();!(u=c.n()).done;){var d=u.value,f=d.keys0,p=d.keys1;d.mappedBasePair;f.rnaMoleculeName in l||(l[f.rnaMoleculeName]={});var h=l[f.rnaMoleculeName];p.rnaMoleculeName in h||(h[p.rnaMoleculeName]={});var v=h[p.rnaMoleculeName],x=!1;if(f.nucleotideIndex-1 in v){var g=v[f.nucleotideIndex-1];if(p.nucleotideIndex+1 in g){var y=g[p.nucleotideIndex+1];Math.abs(y.stop[0]+1-y.start[0])===Math.abs(y.stop[1]-1-y.start[1])&&(y.stop[0]++,y.stop[1]--,s(v,f.nucleotideIndex,p.nucleotideIndex,y),x=!0)}}if(!x){var b={start:{0:f.nucleotideIndex,1:p.nucleotideIndex},stop:{0:f.nucleotideIndex,1:p.nucleotideIndex},rnaMoleculeName1:f.rnaMoleculeName===n?p.rnaMoleculeName:f.rnaMoleculeName};i.push(b),s(v,f.nucleotideIndex,p.nucleotideIndex,b)}}}catch(N){c.e(N)}finally{c.f()}return{rnaMoleculeName0:n,helixData:i}}function Xr(e,n,t,r,o,a){var i,l,s=e.basePairs[n],u=e.rnaMoleculeProps[n],c=[];t[0]<=t[1]?(i=t[0],l=t[1]):(i=t[1],l=t[0]);for(var d=!0,f=function(n){if(n in s&&s[n].some((function(t){var r;return rt.isEnabledBasePair(null!==(r=t.basePairType)&&void 0!==r?r:et(u.nucleotideProps[n].symbol,e.rnaMoleculeProps[t.rnaMoleculeName].nucleotideProps[t.nucleotideIndex].symbol),a)})))return d=!1,"break";c.push(n)},p=i+1;p<l;p++){if("break"===f(p))break}d&&(o.push.apply(o,c),r.push.apply(r,v(c.map((function(e){return u.nucleotideProps[e]})))))}function Yr(e,n,t,r,o,a,i,l){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(){},u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Hr(e,i);return function(e,n,t,r,o,a){var i,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},s=qr(e,n,a,arguments.length>7&&void 0!==arguments[7]?arguments[7]:Hr(e,a)).helixData,u=y([{rnaMoleculeName:n,nucleotideIndex:t},{rnaMoleculeName:r,nucleotideIndex:o}].sort(oo),2),c=u[0],d=u[1],f=m(s);try{for(f.s();!(i=f.n()).done;){var p=i.value,h=p.start,v=p.stop,x=Math.min(h[0],v[0]),g=Math.max(h[0],v[0]),b=Math.min(h[1],v[1]),N=Math.max(h[1],v[1]);if(r===p.rnaMoleculeName1&&c.nucleotideIndex>=x&&c.nucleotideIndex<=g&&d.nucleotideIndex>=b&&d.nucleotideIndex<=N){e.rnaMoleculeProps[r];for(var I=x;I<=g;I++)l({rnaMoleculeName:c.rnaMoleculeName,nucleotideIndex:I});for(var C=b;C<=N;C++)l({rnaMoleculeName:d.rnaMoleculeName,nucleotideIndex:C});return p}}}catch(S){f.e(S)}finally{f.f()}throw"Could not find the relevant helix!"}(e,n,t,r,o,i,(function(n){s(n);var t=n.rnaMoleculeName,r=n.nucleotideIndex,o=e.rnaMoleculeProps[t];if(a.push(o.nucleotideProps[r]),void 0!==l){var i,u=m(e.basePairs[t][r]);try{for(u.s();!(i=u.n()).done;){var c=i.value;l.push(lo(n,c))}}catch(d){u.e(d)}finally{u.f()}}}),u)}function $r(e,n){return e.rnaComplexIndex-n.rnaComplexIndex||e.rnaMoleculeName.localeCompare(n.rnaMoleculeName)||e.nucleotideIndex-n.nucleotideIndex}function Zr(e,n,t){function r(){var r;e.sort($r);for(var o=e[0],a=e[e.length-1],i=!0,l=!0,s=!1,c=void 0,d=1;d<e.length;d++){var f=e[d],p=f.rnaComplexIndex,h=f.rnaMoleculeName;p!==o.rnaComplexIndex&&(i=!1),h!==o.rnaMoleculeName&&(l=!1,void 0===c?(c=h,s=!0):h!==c&&(s=!1))}i||(l=!1);var v=!0,x=!0,g=e.map((function(e){var r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex,i=n[r],l=i.basePairs;if(o in l){var s=l[o];if(a in s)if(s[a].some((function(e){var n;return rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(i.rnaMoleculeProps[o].nucleotideProps[a].symbol,i.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),t)})))return x=!1,s[a]}v=!1}));function y(){if(!l)return!1;var e=g[0];if(void 0===e||!e.some((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return n===a.rnaMoleculeName&&t===a.nucleotideIndex})))return!1;for(var t=n[o.rnaComplexIndex].basePairs[o.rnaMoleculeName],r=o.nucleotideIndex+1;r<a.nucleotideIndex;r++){var i=t[r];if(void 0!==i&&i.some((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return n!==o.rnaMoleculeName||t<o.nucleotideIndex||t>a.nucleotideIndex})))return!1}return!0}function b(n){if(!n||!l&&!s)return!1;var t=[],r=e[0],o=1,a=void 0!==g[0],i=void 0;if(!a)return!1;for(t.push(r);o<e.length;o++){var u=e[o],c=u.rnaMoleculeName,d=u.nucleotideIndex;if(c!==r.rnaMoleculeName||d!==r.nucleotideIndex+1){i=o;break}var f=void 0!==g[o];f&&t.push(u),a=f,r=u}if(!a)return!1;var p=g[o];if(void 0===p)return!1;p.some((function(e){var n=e.rnaMoleculeName,t=e.nucleotideIndex;return n===r.rnaMoleculeName&&t===r.nucleotideIndex}))||t.reverse();for(var h=function(){var n=e[o],a=n.rnaMoleculeName,l=n.nucleotideIndex;if(o!==i&&(a!==r.rnaMoleculeName||l!==r.nucleotideIndex+1))return{v:!1};var s=g[o];if(void 0!==s){var u=t.pop();if(void 0===u)return{v:!1};if(!s.some((function(e){return u.rnaMoleculeName,e.rnaMoleculeName,u.nucleotideIndex===e.nucleotideIndex})))return{v:!1}}r=n};o<e.length;o++){var v=h();if("object"===typeof v)return v.v}return void 0!==g[g.length-1]}var N=function(){if(!i)return!1;var r,a={},l=m(e);try{for(l.s();!(r=l.n()).done;){var s=r.value,c=s.rnaMoleculeName,d=s.nucleotideIndex;c in a||(a[c]=new Set),a[c].add(d)}}catch(b){l.e(b)}finally{l.f()}for(var f=n[o.rnaComplexIndex],p=f.rnaMoleculeProps,h=f.basePairs,v=u({},o.rnaMoleculeName,new Set([o.nucleotideIndex])),x=new Array(o),g=0,y=function(){g++;var e=x.shift(),n=e.rnaMoleculeName,r=e.nucleotideIndex,o=p[n].nucleotideProps,i=h[n],l=new Array;if(r-1 in o&&l.push({rnaMoleculeName:n,nucleotideIndex:r-1}),r+1 in o&&l.push({rnaMoleculeName:n,nucleotideIndex:r+1}),r in i){var s,u=m(i[r].filter((function(e){var o;return rt.isEnabledBasePair(null!==(o=e.basePairType)&&void 0!==o?o:et(f.rnaMoleculeProps[n].nucleotideProps[r].symbol,f.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),t)})));try{for(u.s();!(s=u.n()).done;){var c=s.value;l.push(c)}}catch(b){u.e(b)}finally{u.f()}}for(var d=0,y=l;d<y.length;d++){var N=y[d],I=N.rnaMoleculeName,C=N.nucleotideIndex;if(I in a&&a[I].has(C)&&(!(I in v)||!v[I].has(C)))I in v||(v[I]=new Set),v[I].add(C),x.push(N)}};x.length>0;)y();return g===e.length}();if(x){if(N)return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_SINGLE_STRAND}}else if(v){if(N&&(l||s))return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_HELIX};if(y())return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_STACKED_HELIX}}else{if(y())return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_SUB_DOMAIN};if(b(N))return{fullKeys:e.find((function(e,n){return void 0!==g[n]})),interactionConstraint:Wr.Enum.RNA_STACKED_HELIX};if(N)return{fullKeys:e.find((function(e,n){return void 0===g[n]})),interactionConstraint:Wr.Enum.RNA_CYCLE}}if(l)return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_MOLECULE};if(i)return{fullKeys:o,interactionConstraint:Wr.Enum.RNA_COMPLEX};for(var I=null!==(r=n[o.rnaComplexIndex].rnaMoleculeProps[o.rnaMoleculeName].nucleotideProps[o.nucleotideIndex].color)&&void 0!==r?r:we,C=!0,S=1;S<e.length;S++){var E,w=e[S],A=w.rnaComplexIndex,k=w.rnaMoleculeName,P=w.nucleotideIndex;if(!je(I,null!==(E=n[A].rnaMoleculeProps[k].nucleotideProps[P].color)&&void 0!==E?E:we)){C=!1;break}}return C?{fullKeys:o,interactionConstraint:Wr.Enum.SINGLE_COLOR}:{fullKeys:o,interactionConstraint:Wr.Enum.ENTIRE_SCENE}}switch(e.length){case 0:return;case 1:var o=e[0],a=o.rnaComplexIndex,i=o.rnaMoleculeName,l=o.nucleotideIndex,s=n[a],c=s.basePairs,d=Wr.Enum.SINGLE_NUCLEOTIDE;if(i in c){var f=c[i];l in f&&f[l].some((function(e){var n;return rt.isEnabledBasePair(null!==(n=e.basePairType)&&void 0!==n?n:et(s.rnaMoleculeProps[i].nucleotideProps[l].symbol,s.rnaMoleculeProps[e.rnaMoleculeName].nucleotideProps[e.nucleotideIndex].symbol),t)}))&&(d=Wr.Enum.SINGLE_BASE_PAIR)}return{fullKeys:o,interactionConstraint:d};case 2:var p,h=e[0],v=e[1],x=n[h.rnaComplexIndex],g=x.basePairs;return h.rnaComplexIndex===v.rnaComplexIndex&&h.rnaMoleculeName in g&&h.nucleotideIndex in(p=g[h.rnaMoleculeName])&&p[h.nucleotideIndex].some((function(e){var n=e.rnaMoleculeName,r=e.nucleotideIndex,o=e.basePairType;return v.rnaMoleculeName===n&&v.nucleotideIndex===r&&rt.isEnabledBasePair(null!==o&&void 0!==o?o:et(x.rnaMoleculeProps[h.rnaMoleculeName].nucleotideProps[h.nucleotideIndex].symbol,x.rnaMoleculeProps[n].nucleotideProps[r].symbol),t)}))?{fullKeys:h,interactionConstraint:Wr.Enum.SINGLE_BASE_PAIR}:r();default:return r()}}!function(n){var t,r,o,a,i=n.supportedTabs=(u(t={},b.EDIT,b.EDIT),u(t,b.FORMAT,b.FORMAT),u(t,b.ANNOTATE,b.ANNOTATE),t);n.isSupportedTab=function(e){return e in i};var l=function(e){return e.SINGLE_NUCLEOTIDE="Single nucleotide",e.SINGLE_BASE_PAIR="Single basepair",e.RNA_SINGLE_STRAND="RNA single strand",e.RNA_HELIX="RNA helix",e.RNA_SUB_DOMAIN="RNA sub-domain",e.RNA_STACKED_HELIX="RNA stacked helix",e.RNA_CYCLE="RNA cycle",e.RNA_MOLECULE="RNA molecule",e.RNA_COMPLEX="RNA complex",e.SINGLE_COLOR="Single color",e.ENTIRE_SCENE="Entire scene",e}({});n.Enum=l;var s=n.all=Object.values(l);n.isEnum=function(e){return s.includes(e)};n.record=(u(r={},l.SINGLE_NUCLEOTIDE,Gr),u(r,l.SINGLE_BASE_PAIR,Fr),u(r,l.RNA_SINGLE_STRAND,jr),u(r,l.RNA_HELIX,Ar),u(r,l.RNA_SUB_DOMAIN,Lr),u(r,l.RNA_STACKED_HELIX,Or),u(r,l.RNA_CYCLE,wr),u(r,l.RNA_MOLECULE,Pr),u(r,l.RNA_COMPLEX,yr),u(r,l.SINGLE_COLOR,Br),u(r,l.ENTIRE_SCENE,xr),r),n.descriptionRecord=(u(o={},l.SINGLE_NUCLEOTIDE,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a single nucleotide.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=150&end=168",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.SINGLE_BASE_PAIR,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a single base pair between two nucleotides.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=167&end=178",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_SINGLE_STRAND,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a contiguous series of single (non-basepaired) nucleotides.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=176&end=204",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_HELIX,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a contiguous series of base-paired nucleotides.",(0,Gn.jsx)("br",{}),'"Helix" is defined as two series of nucleotides which are mutually base-paired without gaps.',(0,Gn.jsx)("br",{}),"This involves at most two RNA molecules.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=202&end=214",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_SUB_DOMAIN,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a contiguous series of nucleotides constrainted by a helix.",(0,Gn.jsx)("br",{}),"This constraint involves only one RNA molecule.",(0,Gn.jsx)("br",{}),"This includes all nucleotides with nucleotide indices:",(0,Gn.jsxs)("ul",{style:{margin:0},children:[(0,Gn.jsx)("li",{children:"Greater than or equal to the least nucleotide index in the helix"}),(0,Gn.jsx)("li",{children:"Less than or equal to the greatest nucleotide index in the helix"})]}),(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=212&end=243",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_STACKED_HELIX,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a contiguous series of helices between RNA molecules.",(0,Gn.jsx)("br",{}),"These helices may be separated by single (non-basepaired) nucleotides, but their mutually-basepaired status must resume outside the single-stranded regions.",(0,Gn.jsx)("br",{}),"This constraint involves at most two RNA molecules.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=243&end=269",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_CYCLE,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a cycle of nucleotides.",(0,Gn.jsx)("br",{}),"An RNA cycle is calculated as follows:",(0,Gn.jsxs)("ul",{style:{margin:0},children:[(0,Gn.jsx)("li",{children:"Treat the nucleotides as nodes in a graph"}),(0,Gn.jsx)("li",{children:"Treat the following as edges in the graph:"}),(0,Gn.jsxs)("ul",{style:{margin:0},children:[(0,Gn.jsx)("li",{children:"Base pairs between nucleotides"}),(0,Gn.jsx)("li",{children:"Neighboring nucleotides within a given RNA molecule (with nucleotide indices i, j such that abs(i - j) = 1)"})]}),(0,Gn.jsx)("li",{children:"Calculate the smallest cycle within the graph involving the clicked-on nucleotide"})]}),(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=269&end=298",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_MOLECULE,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a single RNA molecule.",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=311&end=325",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.RNA_COMPLEX,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with a single RNA complex (which may contain more than one RNA molecule).",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=324&end=340",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.SINGLE_COLOR,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels with the same color",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=340&end=358",allowFullScreen:!0,width:960,height:540})})]})),u(o,l.ENTIRE_SCENE,(0,Gn.jsxs)(Gn.Fragment,{children:["This constraint allows the user to interact with all nucleotides or labels within the scene (i.e. viewport)",(0,Gn.jsx)(ot.Component,{title:"Demo",children:(0,Gn.jsx)("iframe",{src:"https://youtube.com/embed/WDOMlZ5QaK4?start=354",allowFullScreen:!0,width:960,height:540})})]})),o);n.DEFAULT_OPTIONS={affectHairpinNucleotidesFlag:!0,truncateRnaSingleStrandFlag:!0,treatNoncanonicalBasePairsAsUnpairedFlag:$n[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]},n.optionsMenuRecord=(u(a={},l.SINGLE_BASE_PAIR,(function(n){var t=(0,e.useContext)(zr.App.InteractionConstraintOptions),r=(0,e.useContext)(zr.App.UpdateInteractionConstraintOptions),o=t.affectHairpinNucleotidesFlag;return(0,Gn.jsx)(Gn.Fragment,{children:(0,Gn.jsxs)("label",{children:["Affect hairpin-loop nucleotides:\xa0",(0,Gn.jsx)("input",{type:"checkbox",checked:o,onChange:function(){r({affectHairpinNucleotidesFlag:!o})}})]})})})),u(a,l.RNA_SINGLE_STRAND,(function(n){var t=(0,e.useContext)(zr.App.InteractionConstraintOptions),r=(0,e.useContext)(zr.App.UpdateInteractionConstraintOptions),o=t.truncateRnaSingleStrandFlag;return(0,Gn.jsxs)("label",{children:["Truncate Single Strand At Frozen Nucleotides:\xa0",(0,Gn.jsx)("input",{type:"checkbox",checked:o,onChange:function(){r({truncateRnaSingleStrandFlag:!o})}})]})})),a)}(Wr||(Wr={})),function(n){var t,r,o,a,i,l,s,u,c,f,p,h;function v(e){var n=e.children,r=e.settingsRecord,o=e.setSettingsRecord,a=e.basePairOnMouseDownHelper,i=e.labelClassName,l=e.basePairClassName,u=e.pushToUndoStack,p=e.basePairRadius,h=e.indicesOfFrozenNucleotides,v=e.labelContentDefaultStyles,m=e.basePairAverageDistances,x=e.updateBasePairAverageDistances,g=e.updateLabelContentDefaultStyles,y=e.interactionConstraintOptions,b=e.updateInteractionConstraintOptions,N=e.setNucleotideKeysToRerender,I=e.setBasePairKeysToRerender,C=e.updateRnaMoleculeNameHelper,S=e.setBasePairKeysToEdit,E=e.singularRnaComplexFlag,w=e.averageNucleotideBoundingRectHeight;return(0,Gn.jsx)(xt,{settingsRecord:r,updateSettings:function(e){var n=d(d({},r),e);o(n)},children:(0,Gn.jsx)(c.OnMouseDownHelper.Provider,{value:a,children:(0,Gn.jsx)(t.PushToUndoStack.Provider,{value:u,children:(0,Gn.jsx)(t.IndicesOfFrozenNucleotides.Provider,{value:h,children:(0,Gn.jsx)(f.ClassName.Provider,{value:i,children:(0,Gn.jsx)(c.ClassName.Provider,{value:l,children:(0,Gn.jsx)(c.Radius.Provider,{value:p,children:(0,Gn.jsx)(c.AverageDistances.Provider,{value:m,children:(0,Gn.jsx)(c.UpdateAverageDistances.Provider,{value:x,children:(0,Gn.jsx)(f.Content.DefaultStyles.Provider,{value:v,children:(0,Gn.jsx)(f.Content.UpdateDefaultStyle.Provider,{value:g,children:(0,Gn.jsx)(t.InteractionConstraintOptions.Provider,{value:y,children:(0,Gn.jsx)(t.UpdateInteractionConstraintOptions.Provider,{value:b,children:(0,Gn.jsx)(s.SetKeysToRerender.Provider,{value:N,children:(0,Gn.jsx)(c.SetKeysToRerender.Provider,{value:I,children:(0,Gn.jsx)(t.Settings.Provider,{value:r,children:(0,Gn.jsx)(t.UpdateRnaMoleculeNameHelper.Provider,{value:C,children:(0,Gn.jsx)(c.SetKeysToEdit.Provider,{value:S,children:(0,Gn.jsx)(t.SingularRnaComplexFlag.Provider,{value:E,children:(0,Gn.jsx)(s.AverageBoundingRectHeight.Provider,{value:w,children:n})})})})})})})})})})})})})})})})})})})})}(r=t||(t=n.App||(n.App={}))).SetMouseOverText=(0,e.createContext)((function(e){})),r.Settings=(0,e.createContext)($n),r.ComplexDocumentName=(0,e.createContext)(""),r.SetComplexDocumentName=(0,e.createContext)((function(e){})),r.UpdateRnaMoleculeNameHelper=(0,e.createContext)((function(e,n,t){})),r.InteractionConstraintOptions=(0,e.createContext)(Wr.DEFAULT_OPTIONS),r.UpdateInteractionConstraintOptions=(0,e.createContext)((function(e){})),r.IndicesOfFrozenNucleotides=(0,e.createContext)({}),r.PushToUndoStack=(0,e.createContext)((function(){})),r.RnaComplexProps=(0,e.createContext)(void 0),r.SingularRnaComplexFlag=(0,e.createContext)(void 0),(a=o||(o=n.RnaComplex||(n.RnaComplex={}))).Name=(0,e.createContext)(""),a.Index=(0,e.createContext)(NaN),a.BasePairs=(0,e.createContext)({}),a.SingularRnaMoleculeFlag=(0,e.createContext)(void 0),(l=i||(i=n.RnaMolecule||(n.RnaMolecule={}))).Name=(0,e.createContext)(""),l.FirstNucleotideIndex=(0,e.createContext)(NaN),(u=s||(s=n.Nucleotide||(n.Nucleotide={}))).OnMouseDownHelper=(0,e.createContext)((function(e,n){})),u.OnMouseOverHelper=(0,e.createContext)((function(e,n){})),u.Index=(0,e.createContext)(NaN),u.SetKeysToRerender=(0,e.createContext)((function(e){})),u.LabelsOnlyFlag=(0,e.createContext)(!1),u.Symbol=(0,e.createContext)(""),u.AverageBoundingRectHeight=(0,e.createContext)(0),function(n){n.ClassName=(0,e.createContext)(void 0);var t,r=n.DEFAULT_RADIUS=1,o=n.DEFAULT_DISTANCES={},a=m(Yn.types);try{for(a.s();!(t=a.n()).done;){o[t.value]=12*r}}catch(i){a.e(i)}finally{a.f()}n.Radius=(0,e.createContext)(r),n.DataToEditPerRnaComplex=(0,e.createContext)({add:[],delete:[]}),n.SetKeysToEdit=(0,e.createContext)((function(e){})),n.SetKeysToRerender=(0,e.createContext)((function(e){})),n.UpdateAverageDistances=(0,e.createContext)((function(e,n){})),n.AverageDistances=(0,e.createContext)({}),n.AverageStrokeWidth=(0,e.createContext)(Qe),n.OnMouseDownHelper=(0,e.createContext)((function(e,n,t){}))}(c||(c=n.BasePair||(n.BasePair={}))),function(n){var t,r,o;n.ClassName=(0,e.createContext)(void 0);(r=t||(t=n.Content||(n.Content={}))).OnMouseDownHelper=(0,e.createContext)((function(e,n){})),r.DefaultStyles=(0,e.createContext)({}),r.UpdateDefaultStyle=(0,e.createContext)((function(e,n,t){})),function(n){var t,r;(t||(t=n.Body||(n.Body={}))).OnMouseDownHelper=(0,e.createContext)((function(e,n,t){})),(r||(r=n.Endpoint||(n.Endpoint={}))).OnMouseDownHelper=(0,e.createContext)((function(e,n,t,r){}))}(o||(o=n.Line||(n.Line={})))}(f||(f=n.Label||(n.Label={}))),(p||(p=n.OrientationEditor||(n.OrientationEditor={}))).ResetDataTrigger=(0,e.createContext)(!1),function(n){n.Width=(0,e.createContext)(void 0)}(h||(h=n.Collapsible||(n.Collapsible={}))),n.Component=v;n.MemoizedComponent=e.memo(v)}(zr||(zr={})),(Ur||(Ur={})).Component=function(n){var t,r=n.firstNucleotideIndex,o=n.nucleotideProps,a=(n.nucleotideKeysToRerender,(0,e.useContext)(zr.RnaMolecule.Name)),i=(0,e.useContext)(zr.RnaComplex.Index),l=(0,e.useContext)(zr.Label.Content.UpdateDefaultStyle),s=(0,e.useContext)(zr.App.Settings),c=s[Hn.REPLACE_NUCLEOTIDES_WITH_CONTOUR_LINE],f=s[Hn.CONTOUR_LINE_WIDTH],p=s[Hn.PATH_MODE],h=s[Hn.PATH_LINE_WIDTH],v=(0,e.useContext)(zr.App.IndicesOfFrozenNucleotides),x=(0,e.useMemo)((function(){var e=Object.entries(o).map((function(e){var n=y(e,2),t=n[0],r=n[1],o=Number.parseInt(t),a=r;return a.key=o,a.nucleotideIndex=o,a}));return e.sort((function(e,n){return e.nucleotideIndex-n.nucleotideIndex})),e}),[o]),g=(0,e.useMemo)((function(){if(!(i in v))return[];var e=v[i];if(!(a in e))return[];var n,t=e[a],r=[],o=[],l=m(x);try{for(l.s();!(n=l.n()).done;){var s=n.value;t.has(s.nucleotideIndex)?o.push({nucleotideIndex:s.nucleotideIndex,x:s.x,y:s.y,font:s.font}):o.length>0&&(r.push(o),o=[])}}catch(u){l.e(u)}finally{l.f()}return o.length>0&&r.push(o),r.map((function(e){var n,t,r=null!==(n=null===(t=e[0].font)||void 0===t?void 0:t.size)&&void 0!==n?n:qe.DEFAULT_SIZE,o="string"===typeof r?Ke(r):r,a=Math.max(o/12,.5);if(1===e.length){var i=e[0],l=o/2*1.3;return{type:"circle",x:i.x,y:i.y,radius:l,strokeWidth:a,indices:[i.nucleotideIndex]}}var s,c=o/2*1.3,d=[],f=m(e);try{for(f.s();!(s=f.n()).done;)for(var p=s.value,h=0;h<8;h++){var v=h/8*2*Math.PI;d.push({x:p.x+c*Math.cos(v),y:p.y+c*Math.sin(v)})}}catch(u){f.e(u)}finally{f.f()}var x=function(e){if(e.length<3)return e;for(var n=e[0],t=1;t<e.length;t++)(e[t].y<n.y||e[t].y===n.y&&e[t].x<n.x)&&(n=e[t]);for(var r=e.slice().sort((function(e,t){var r=Math.atan2(e.y-n.y,e.x-n.x),o=Math.atan2(t.y-n.y,t.x-n.x);return r!==o?r-o:Math.hypot(e.x-n.x,e.y-n.y)-Math.hypot(t.x-n.x,t.y-n.y)})),o=[r[0],r[1]],a=2;a<r.length;a++){for(;o.length>1;){var i=o[o.length-2],l=o[o.length-1],s=r[a];if((l.x-i.x)*(s.y-i.y)-(l.y-i.y)*(s.x-i.x)>0)break;o.pop()}o.push(r[a])}return o}(d);if(x.length<3){var g=e[0];return{type:"circle",x:g.x,y:g.y,radius:c,strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}for(var y="M ".concat(x[0].x," ").concat(x[0].y),b=1;b<x.length;b++)y+=" L ".concat(x[b].x," ").concat(x[b].y);return{type:"path",path:y+=" Z",strokeWidth:a,indices:e.map((function(e){return e.nucleotideIndex}))}}))}),[x,v,i,a]);return(0,e.useEffect)((function(){for(var e=new Array,n=new Array,t=0,r=0,s=0,u=Object.values(o);s<u.length;s++){var c=u[s].labelContentProps;if(void 0!==c){var f=c.font,p=c.color;if(void 0!==f){r++,"string"===typeof f.size?t+=Ke(f.size):t+=f.size;var h,v=!1,x=m(n);try{for(x.s();!(h=x.n()).done;){var g=h.value;if(He.areEqual(f,g.font)){g.count++,v=!0;break}}}catch(R){x.e(R)}finally{x.f()}v||n.push({font:f,count:1})}if(void 0!==p){var y,b=!1,N=m(e);try{for(N.s();!(y=N.n()).done;){var I=y.value;if(je(p,I.color)){I.count++,b=!0;break}}}catch(R){N.e(R)}finally{N.f()}b||e.push({color:p,count:1})}}}for(var C={font:structuredClone(qe.DEFAULT),count:0},S=0,E=n;S<E.length;S++){var w=E[S];w.count>C.count&&(C=w)}for(var A={color:structuredClone(we),count:0},k=0,P=e;k<P.length;k++){var T=P[k];T.count<A.count&&(A=T)}var M=0===r?qe.DEFAULT_SIZE:t/r;l(i,a,{color:A.color,font:d(d({},C.font),{},{size:M})})}),[i,a,o]),(0,Gn.jsxs)("g",d(d({},(u(t={},vn,dn.RNA_MOLECULE),u(t,xn,a),u(t,gn,r),t)),{},{children:[c&&(0,Gn.jsx)("polyline",{points:x.map((function(e){var n=e.x,t=e.y;return"".concat(n,",").concat(t)})).join(" "),pointerEvents:"none",stroke:"var(--color-text)",strokeWidth:f,fill:"none"}),p&&!c&&function(){var e,n=function(e,n){if(e.length<2)return"";if(2===e.length||0===n)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var t=1-n,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,u=t,c=(l.x-a.x)*(1-u)/2,d=(l.y-a.y)*(1-u)/2,f=(s.x-i.x)*(1-u)/2,p=(s.y-i.y)*(1-u)/2,h=i.x+c/3,v=i.y+d/3,m=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(v,", ").concat(m," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r},t=[],r=null,o=m(x);try{for(o.s();!(e=o.n()).done;){var a,i,l=e.value,s=l.pathColor?"rgb(".concat(l.pathColor.red,", ").concat(l.pathColor.green,", ").concat(l.pathColor.blue,")"):"var(--color-text)",u=null!==(a=l.pathLineWidth)&&void 0!==a?a:h,c=null!==(i=l.pathCurvature)&&void 0!==i?i:0;r&&r.color===s&&r.width===u&&r.curvature===c?r.points.push({x:l.x,y:l.y}):(r&&r.points.length>0&&(r.points.push({x:l.x,y:l.y}),t.push(r)),r={points:[{x:l.x,y:l.y}],color:s,width:u,curvature:c})}}catch(d){o.e(d)}finally{o.f()}return r&&r.points.length>0&&t.push(r),(0,Gn.jsx)(Gn.Fragment,{children:t.map((function(e,t){return(0,Gn.jsx)("path",{d:n(e.points,e.curvature),pointerEvents:"none",stroke:e.color,strokeWidth:e.width,fill:"none",strokeLinecap:"round",strokeLinejoin:"round","data-xrna_type":"path"},"path-segment-".concat(t))}))})}(),!c&&x.length>0&&function(){var e=function(e,n){if(e.length<2)return"";if(2===e.length||0===n)return"M ".concat(e[0].x," ").concat(e[0].y," L ").concat(e.map((function(e){return"".concat(e.x," ").concat(e.y)})).join(" L "));for(var t=1-n,r="M ".concat(e[0].x," ").concat(e[0].y),o=0;o<e.length-1;o++){var a=e[0===o?o:o-1],i=e[o],l=e[o+1],s=e[o+2]||l,u=t,c=(l.x-a.x)*(1-u)/2,d=(l.y-a.y)*(1-u)/2,f=(s.x-i.x)*(1-u)/2,p=(s.y-i.y)*(1-u)/2,h=i.x+c/3,v=i.y+d/3,m=l.x-f/3,x=l.y-p/3;r+=" C ".concat(h," ").concat(v,", ").concat(m," ").concat(x,", ").concat(l.x," ").concat(l.y)}return r}(x.map((function(e){return{x:e.x,y:e.y}})),.5);return(0,Gn.jsx)("path",{d:e,pointerEvents:"none",stroke:"rgb(0, 0, 0)",strokeWidth:.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",visibility:"hidden","data-xrna_type":"centerline"})}(),!c&&(0,Gn.jsx)(zr.RnaMolecule.FirstNucleotideIndex.Provider,{value:r,children:x.map((function(n){return(0,e.createElement)(Xn.MemoizedComponent,n)}))}),!c&&g.map((function(e,n){return"circle"===e.type?(0,Gn.jsx)("circle",{cx:e.x,cy:e.y,r:e.radius,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(n)):(0,Gn.jsx)("path",{d:e.path,fill:"none",stroke:"#e56565",strokeWidth:e.strokeWidth,pointerEvents:"none"},"frozen-outline-".concat(n))}))]}))};var Jr,eo,no=u({},rt.Type.WOBBLE,1.15),to=function(e){return e[e.DO_NOTHING=0]="DO_NOTHING",e[e.THROW_ERROR=1]="THROW_ERROR",e[e.DELETE_PREVIOUS_MAPPING=2]="DELETE_PREVIOUS_MAPPING",e}({});function ro(e,n,t,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:to.DO_NOTHING,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=e.basePairs;if(n in l&&t in l[n]){var s=l[n][t].find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}));return void 0!==s&&(s.basePairType=i.basePairType,l[r][o].find((function(e){return e.rnaMoleculeName===n&&e.nucleotideIndex===t})).basePairType=i.basePairType),[{keys0:{rnaMoleculeName:n,nucleotideIndex:t},keys1:{rnaMoleculeName:r,nucleotideIndex:o}}]}var u=new Array,c=[],f={rnaMoleculeName:n,nucleotideIndex:t,basePairedRnaMoleculeName:r,basePairedNucleotideIndex:o,basePairType:i.basePairType},p={rnaMoleculeName:r,nucleotideIndex:o,basePairedRnaMoleculeName:n,basePairedNucleotideIndex:t,basePairType:i.basePairType};delete(i=structuredClone(i)).basePairType,void 0!==f.basePairType&&rt.isDirectedType(f.basePairType)&&(p.basePairType=rt.reverseDirectedTypeMap[f.basePairType]);for(var h=0,v=[f,p];h<v.length;h++){var x=v[h],g=x.rnaMoleculeName,b=x.nucleotideIndex,N=x.basePairedRnaMoleculeName,I=x.basePairedNucleotideIndex,C=x.basePairType;g in l||(l[g]={});var S=l[g];if(b in S){var E,w=m(S[b]);try{for(w.s();!(E=w.n()).done;){var A=E.value;switch(a){case to.DO_NOTHING:break;case to.DELETE_PREVIOUS_MAPPING:var k=y([{rnaMoleculeName:g,nucleotideIndex:b},A].sort(oo),2),P=k[0],T=k[1];u.push({keys0:P,keys1:T}),delete l[A.rnaMoleculeName][A.nucleotideIndex];break;case to.THROW_ERROR:throw"Duplicate base-pair keys were found within this RNA complex. This is not allowed."}}}catch(D){w.e(D)}finally{w.f()}}c.push({basePairsPerRnaMolecule:S,nucleotideIndex:b,mappedBasePairInformation:d(d({rnaMoleculeName:N,nucleotideIndex:I},i),{},{basePairType:C})})}for(var M=0,R=c;M<R.length;M++){var _=R[M],j=_.basePairsPerRnaMolecule,O=_.nucleotideIndex,L=_.mappedBasePairInformation;O in j||(j[O]=[]),j[O].push(L)}return u}function oo(e,n){return e.rnaMoleculeName.localeCompare(n.rnaMoleculeName)||e.nucleotideIndex-n.nucleotideIndex}function ao(e,n){return oo(e.keys0,n.keys0)||oo(e.keys1,n.keys1)}function io(e,n){return oo(e,n)<=0}function lo(e,n){return io(e,n)?e:n}!function(n){function t(e){var n=e.keys0,t=e.keys1;return"#".concat(n.nucleotideIndex," in ").concat(n.rnaMoleculeName," basepaired to #").concat(t.nucleotideIndex," in ").concat(t.rnaMoleculeName)}n.Component=function(n){var r,o=n.name,a=n.rnaMoleculeProps,i=n.basePairs,l=n.nucleotideKeysToRerenderPerRnaComplex,s=n.basePairKeysToRerenderPerRnaComplex,c=n.basePairUpdateTrigger,f=(0,e.useContext)(zr.RnaComplex.Index),p=(0,e.useContext)(zr.BasePair.DataToEditPerRnaComplex),h=(0,e.useContext)(zr.BasePair.AverageDistances),x=(0,e.useContext)(zr.BasePair.UpdateAverageDistances),g=Object.entries(a),b=(0,e.useMemo)((function(){var e=new Array;return Object.entries(i).forEach((function(n){var r=y(n,2),i=r[0],l=r[1],s=a[i];Object.entries(l).forEach((function(n){var r,l=y(n,2),u=l[0],c=l[1],d=Number.parseInt(u),p={rnaMoleculeName:i,nucleotideIndex:d},h=m(c);try{for(h.s();!(r=h.n()).done;){var v=r.value;if(io(p,v)){var x=s.nucleotideProps[d],g=a[v.rnaMoleculeName],b=g.nucleotideProps[v.nucleotideIndex];void 0===v.basePairType&&(v.basePairType=et(x.symbol,b.symbol)),e.push({key:t({keys0:p,keys1:v}),mappedBasePair:v,position0:x,position1:b,rnaComplexIndex:f,rnaComplexName:o,rnaMoleculeName0:i,nucleotideIndex0:d,formattedNucleotideIndex0:d+s.firstNucleotideIndex,rnaMoleculeName1:v.rnaMoleculeName,nucleotideIndex1:v.nucleotideIndex,formattedNucleotideIndex1:v.nucleotideIndex+g.firstNucleotideIndex,updateTrigger:0})}}}catch(N){h.e(N)}finally{h.f()}}))})),e.sort((function(e,n){return ao({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},{keys0:{rnaMoleculeName:n.rnaMoleculeName0,nucleotideIndex:n.nucleotideIndex0},keys1:{rnaMoleculeName:n.rnaMoleculeName1,nucleotideIndex:n.nucleotideIndex1}})})),e}),[i,c]),N=(0,e.useMemo)((function(){for(var e=0,n=0,t=0,r=Object.keys(i);t<r.length;t++)for(var o=r[t],a=i[o],l=0,s=Object.keys(a);l<s.length;l++){var u,c=s[l],d=m(a[Number.parseInt(c)]);try{for(d.s();!(u=d.n()).done;){var f=u.value.strokeWidth;void 0!==f&&(e++,n+=f)}}catch(p){d.e(p)}finally{d.f()}}return 0===e?Qe:n/e}),[i]),I=(0,e.useMemo)((function(){var e=v(b);if(void 0!==p){var n,r=m(p.delete);try{var l=function(){var t=n.value;t.keys0,t.keys1;A(e,(function(e){return ao({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},t)}),1,[],w.DO_NOTHING)};for(r.s();!(n=r.n()).done;)l()}catch(T){r.e(T)}finally{r.f()}var u,c=m(p.add);try{var h=function(){var n=u.value,r=n.keys0,l=n.keys1,s=r.rnaMoleculeName,c=r.nucleotideIndex,d=i[s][c].find((function(e){return e.rnaMoleculeName===l.rnaMoleculeName&&e.nucleotideIndex===l.nucleotideIndex}));if(io(r,l)){var p=a[s],h=p.nucleotideProps[c],v=a[l.rnaMoleculeName],m=v.nucleotideProps[l.nucleotideIndex];void 0===d.basePairType&&(d.basePairType=et(h.symbol,m.symbol));var x={mappedBasePair:d,position0:h,position1:m,rnaComplexIndex:f,rnaComplexName:o,rnaMoleculeName0:s,nucleotideIndex0:c,formattedNucleotideIndex0:c+p.firstNucleotideIndex,rnaMoleculeName1:l.rnaMoleculeName,nucleotideIndex1:l.nucleotideIndex,formattedNucleotideIndex1:l.nucleotideIndex+v.firstNucleotideIndex,key:t(n)};A(e,(function(e){return ao({keys0:{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},keys1:{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}},n)}),0,[x],w.ADD)}};for(c.s();!(u=c.n()).done;)h()}catch(T){c.e(T)}finally{c.f()}}var x,g=[],y={},N=m(s);try{for(N.s();!(x=N.n()).done;){var I=x.value,C=I.rnaMoleculeName,S=I.nucleotideIndex;C in y&&y[C].has(S)||(g.push(I),C in y||(y[C]=new Set),y[C].add(S))}}catch(T){N.e(T)}finally{N.f()}for(var E=function(){var n=P[k],t=function(e,n){if(0===e.length)return null;for(var t=0,r=e.length-1;;){var o=t+r>>1,a=e[o],i=n(a);if(0===i)return{arrayEntry:a,arrayIndex:o};if(i>0?r=o-1:t=o+1,t>r)break}return null}(e,(function(e){return oo({rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},n)}));if(null!==t){t.arrayIndex;for(var r=t.arrayIndex;r>=0;r--){var o=e[r];if(o.rnaMoleculeName0!==t.arrayEntry.rnaMoleculeName0||o.nucleotideIndex0!==t.arrayEntry.nucleotideIndex0)break;e[r]=d(d({},o),{},{updateTrigger:Math.random()})}for(var a=t.arrayIndex;a<e.length;a++){var i=e[a];if(i.rnaMoleculeName0!==t.arrayEntry.rnaMoleculeName0||i.nucleotideIndex0!==t.arrayEntry.nucleotideIndex0)break;e[a]=d(d({},i),{},{updateTrigger:Math.random()})}}},k=0,P=g;k<P.length;k++)E();return v(e)}),[b,p,s]),C=(0,e.useMemo)((function(){return 1===g.length}),[g]);return(0,e.useEffect)((function(){var e,n={},t=m(rt.types);try{for(t.s();!(e=t.n()).done;){n[e.value]={count:0,distanceSum:0,distances:[]}}}catch(ue){t.e(ue)}finally{t.f()}for(var r=0,o=0,l=0,s=Object.entries(i);l<s.length;l++)for(var u=y(s[l],2),c=u[0],d=u[1],p=0,h=Object.entries(d);p<h.length;p++){var v,g=y(h[p],2),b=g[0],N=m(g[1]);try{for(N.s();!(v=N.n()).done;){var I,C=v.value,S=Number.parseInt(b),E=a[c].nucleotideProps[S],w=a[C.rnaMoleculeName].nucleotideProps[C.nucleotideIndex],A=Q(E,w);o+=A,r++;var k=n[null!==(I=C.basePairType)&&void 0!==I?I:et(E.symbol,w.symbol)];k.count++,k.distanceSum+=A,k.distances.push(A)}}catch(ue){N.e(ue)}finally{N.f()}}for(var P=0,T=0,M={0:{nucleotideIndex:NaN,rnaMoleculeName:""},1:{nucleotideIndex:NaN,rnaMoleculeName:""},center:{x:NaN,y:NaN}},R=0,_=Object.entries(i);R<_.length;R++){var L,D=y(_[R],2),B=D[0],W=D[1],z=Object.entries(W).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),basePairsPerNucleotide:r}})),U=a[B],G=m(z);try{for(G.s();!(L=G.n()).done;)for(var H=L.value,K=H.nucleotideIndex,V=H.basePairsPerNucleotide,q=0;q<V.length;q++){var X=V[q],Y={0:{nucleotideIndex:K,rnaMoleculeName:B},1:X,center:F(O(U.nucleotideProps[K],a[X.rnaMoleculeName].nucleotideProps[X.nucleotideIndex]),.5)},$=Y[0].rnaMoleculeName===M[0].rnaMoleculeName&&Y[1].rnaMoleculeName===M[1].rnaMoleculeName&&Math.abs(Y[0].nucleotideIndex-M[0].nucleotideIndex)<=1&&Math.abs(Y[1].nucleotideIndex-M[1].nucleotideIndex)<=1;$&&(P+=Q(Y.center,M.center),T++),($||q==V.length-1)&&(M=Y)}}catch(ue){G.e(ue)}finally{G.f()}}var Z,J=o/(12*r),ee={},ne=m(rt.types);try{for(ne.s();!(Z=ne.n()).done;){var te=Z.value,re=n[te];ee[te]=j(re.distances)}}catch(ue){ne.e(ue)}finally{ne.f()}var oe=ee[rt.Type.CANONICAL];if(!Number.isNaN(oe)){var ae,ie=m(rt.types);try{for(ie.s();!(ae=ie.n()).done;){var le=ae.value;if(Number.isNaN(ee[le])){var se=oe;le in no&&(se*=no[le]),ee[le]=se}}}catch(ue){ie.e(ue)}finally{ie.f()}}x(f,{radius:J,distances:ee,helixDistance:P/T})}),[f,i]),f in h?h[f].radius:zr.BasePair.DEFAULT_RADIUS,(0,Gn.jsx)("g",d(d({},(u(r={},vn,dn.RNA_COMPLEX),u(r,mn,o),r)),{},{children:(0,Gn.jsx)(zr.RnaComplex.Name.Provider,{value:o,children:(0,Gn.jsx)(zr.RnaComplex.SingularRnaMoleculeFlag.Provider,{value:C,children:(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("g",{children:(0,Gn.jsx)(zr.BasePair.AverageStrokeWidth.Provider,{value:N,children:I.map((function(e){return(0,Gn.jsx)(rt.MemoizedComponent,d({},e))}))})}),g.map((function(e){var n,t=y(e,2),r=t[0],o=t[1];return(0,Gn.jsx)(zr.RnaMolecule.Name.Provider,{value:r,children:(0,Gn.jsx)(Ur.Component,d(d({},o),{},{nucleotideKeysToRerender:null!==(n=l[r])&&void 0!==n?n:[]}),r)},r)}))]})})})}))}}(Jr||(Jr={}));var so=function(e){return e.XML="xml",e.JSON="json",e.SVG="svg",e.XRNA="xrna",e.CSV="csv",e.TR="tr",e.BPSEQ="bpseq",e.STR="str",e}({}),uo=(u(eo={},so.XRNA,"the native input-file format of XRNA (an extension of .xml)"),u(eo,so.XML,"a data-file format native to the internet. Highly similar to .xrna"),u(eo,so.JSON,"a general-purpose data-file format native to the internet. Logically equivalent to .xrna"),u(eo,so.CSV,"a comma-separated-values file. Logically equivalent to .xrna. Intended for use with RiboVision"),u(eo,so.BPSEQ,"a simplified, linear representation of the nucleotide sequence of the scene."),u(eo,so.TR,"an XML-like format for R2DT. Contains nucleotides with 2D coordinates."),u(eo,so.SVG,"an image-file format. Can be converted to other image-file formats (e.g. .jpg) using external tools"),u(eo,so.STR,"an image-file format containing nucleotide sequences and base pairs"),Object.values(so),so);var co,fo,po=1.2;var ho={x:{max:576,min:36},y:{max:756,min:36}},vo={x:.5*(ho.x.min+ho.x.max),y:.5*(ho.y.min+ho.y.max)},mo=(u(co={},uo.JSON,uo.JSON),u(co,uo.SVG,uo.SVG),u(co,uo.XRNA,uo.XRNA),u(co,uo.CSV,uo.CSV),u(co,uo.TR,uo.TR),u(co,uo.BPSEQ,uo.BPSEQ),co),xo=Object.values(mo),go=(u(fo={},mo.xrna,(function(e,n){var t=document.implementation.createDocument(null,null,null),r=t.createElement("ComplexDocument");r.setAttribute("Name",n),t.appendChild(r);var o=t.createElement("SceneNodeGeom");return o.setAttribute("CenterX","0"),o.setAttribute("CenterY","0"),o.setAttribute("Scale","1"),r.appendChild(o),Object.values(e).forEach((function(e){var n=t.createElement("Complex");n.setAttribute("Name",e.name),r.appendChild(n);var o=e.basePairs;Object.entries(e.rnaMoleculeProps).forEach((function(e){var r=y(e,2),a=r[0],i=r[1],l=i.firstNucleotideIndex,s=t.createElement("RNAMolecule");s.setAttribute("Name",a),n.appendChild(s);var u=t.createElement("NucListData");u.setAttribute("StartNucID","".concat(l)),u.setAttribute("DataType","NucChar.NucID.XPos.YPos");var c=Object.entries(i.nucleotideProps).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),singularNucleotideProps:r}}));u.innerHTML=c.map((function(e){var n=e.nucleotideIndex,t=e.singularNucleotideProps;return[t.symbol,"".concat(n+l),t.x.toFixed(Xe),t.y.toFixed(Xe)].join(" ")})).join("\n"),s.appendChild(u);var d=t.createElement("Nuc");d.setAttribute("RefIDs","".concat(l,"-").concat(l+c.length-1)),d.setAttribute("Color","0"),d.setAttribute("FontID","0"),d.setAttribute("FontSize","8"),s.appendChild(d),c.forEach((function(e){var n,r,o=e.nucleotideIndex,a=e.singularNucleotideProps,i=l+o,u=null!==(n=a.font)&&void 0!==n?n:qe.DEFAULT;if((d=t.createElement("Nuc")).setAttribute("RefID","".concat(i)),d.setAttribute("Color",Me(null!==(r=a.color)&&void 0!==r?r:we)),d.setAttribute("FontID",He.toFontId(u).toString()),d.setAttribute("FontSize",u.size.toString()),s.appendChild(d),void 0!==a.labelLineProps||void 0!==a.labelContentProps){(d=t.createElement("Nuc")).setAttribute("RefID","".concat(i)),s.appendChild(d);var c=t.createElement("LabelList"),f=[];if(void 0!==a.labelLineProps){var p,h,v=a.labelLineProps,m=v.points,x=m[0],g=m[m.length-1];f.push(["l",x.x.toFixed(Xe),x.y.toFixed(Xe),g.x.toFixed(Xe),g.y.toFixed(Xe),(null!==(p=v.strokeWidth)&&void 0!==p?p:Qe).toFixed(Xe),Me(null!==(h=v.color)&&void 0!==h?h:we),"0.0","0","0","0","0"].join(" "))}if(void 0!==a.labelContentProps){var y,b,N=a.labelContentProps,I=null!==(y=N.font)&&void 0!==y?y:qe.DEFAULT;f.push(["s",N.x.toFixed(Xe),N.y.toFixed(Xe),"0.0",I.size,He.toFontId(I),Me(null!==(b=N.color)&&void 0!==b?b:we),'"'.concat(N.content,'"')].join(" "))}c.innerHTML=f.join("\n"),d.appendChild(c)}}));var f=o[a];Object.entries(f).forEach((function(e){var n,r=y(e,2),o=r[0],i=r[1],u=Number.parseInt(o),c={nucleotideIndex:u,rnaMoleculeName:a},d=m(i);try{for(d.s();!(n=d.n()).done;){var f=n.value;if(oo(c,f)<=0){var p=t.createElement("BasePairs");p.setAttribute("nucID",(u+l).toString()),p.setAttribute("length","1"),p.setAttribute("bpNucID",(f.nucleotideIndex+l).toString()),p.setAttribute("bpName",f.rnaMoleculeName),s.appendChild(p)}}}catch(h){d.e(h)}finally{d.f()}}))}))})),(new XMLSerializer).serializeToString(t.documentElement)})),u(fo,mo.json,(function(e){var n=[],t=[],r={},o={},a={},i={},l="";function s(e){var t,r=n.findIndex((function(n){return n["font-family"]===e.family&&n["font-size"]==="".concat(e.size)&&n["font-weight"]===e.weight&&n["font-style"]===e.style}));-1===r?(l="font#".concat(n.length),n.push((u(t={name:l},"font-family",e.family),u(t,"font-size","".concat(e.size)),u(t,"font-weight",e.weight),u(t,"font-style",e.style),t))):l="font#".concat(r)}var c="";function f(e){var n,r=ke(e.stroke),o=t.findIndex((function(n){return n["stroke-width"]==="".concat(e.strokeWidth)&&n.stroke===r}));-1===o?(c="stroke#".concat(t.length),t.push((u(n={name:c},"stroke-width","".concat(e.strokeWidth)),u(n,"stroke",r),n))):c="stroke#".concat(o)}var p=Object.values(e);return p.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var n,t,i=y(e,2),u=i[0],d=i[1],p=Number.parseInt(u);s(null!==(n=d.font)&&void 0!==n?n:qe.DEFAULT),a[p]=["text-"+ke(null!==(t=d.color)&&void 0!==t?t:we),l];var h,v,m=d.labelContentProps;void 0!==m&&(s(null!==(h=m.font)&&void 0!==h?h:qe.DEFAULT),r[p]=["text-"+ke(null!==(v=m.color)&&void 0!==v?v:we),l]);var x,g,b=d.labelLineProps;void 0!==b&&(f({stroke:null!==(x=b.color)&&void 0!==x?x:we,strokeWidth:null!==(g=b.strokeWidth)&&void 0!==g?g:Qe}),o[p]=[c])}))}))})),JSON.stringify({classes:n.concat(t),rnaComplexes:p.map((function(e){var n=Object.entries(e.rnaMoleculeProps),t=e.basePairs,l=new Array;return{name:e.name,rnaMolecules:n.map((function(n){for(var s=y(n,2),u=s[0],p=s[1],h=new Array,v=t[u],x=0,g=Object.entries(v);x<g.length;x++){var b,N=y(g[x],2),I=N[0],C=N[1],S=Number.parseInt(I),E=m(C);try{for(E.s();!(b=E.n()).done;){var w,A,k,P=b.value;if(io({rnaMoleculeName:u,nucleotideIndex:S},P)){var T=null!==(w=P.basePairType)&&void 0!==w?w:et(p.nucleotideProps[S].symbol,e.rnaMoleculeProps[P.rnaMoleculeName].nucleotideProps[P.nucleotideIndex].symbol);f({strokeWidth:null!==(A=P.strokeWidth)&&void 0!==A?A:Qe,stroke:null!==(k=P.color)&&void 0!==k?k:we}),i[S]=[c];var M={basePairType:T,classes:i[S],residueIndex1:p.firstNucleotideIndex+S,residueIndex2:p.firstNucleotideIndex+P.nucleotideIndex,points:P.points},R=u,_=P.rnaMoleculeName;if(rt.isRedundantLeontisWesthofType(M.basePairType)){M.basePairType=rt.reverseDirectedTypeMap[M.basePairType];var j=R;R=_,_=j;var O=M.residueIndex1;M.residueIndex1=M.residueIndex2,M.residueIndex2=O}R===_?h.push(M):l.push(d(d({},M),{},{rnaMoleculeName1:R,rnaMoleculeName2:_}))}}}catch(F){E.e(F)}finally{E.f()}}var L=new Array,D=Object.entries(p.nucleotideProps).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),singularNucleotideProps:r}}));return D.forEach((function(e){var n=e.nucleotideIndex,t=e.singularNucleotideProps,a=t.labelContentProps,i=t.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:n+p.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[n],label:a.content,x:a.x,y:-a.y}),void 0!==i&&(l.labelLine={classes:o[n],points:i.points.map((function(e){return{x:e.x,y:-e.y}}))}),L.push(l)}})),{name:u,basePairs:h,labels:L,sequence:D.map((function(e){var n=e.nucleotideIndex,t=e.singularNucleotideProps;return{classes:a[n],residueIndex:n+p.firstNucleotideIndex,residueName:t.symbol,x:t.x,y:-t.y}}))}})),basePairs:l}}))})})),u(fo,mo.csv,(function(e,n){var t=[["resNum","unModResName","X","Y","resColor","FontSize","LineX1","LineY1","LineX2","LineY2","LineThickness","LineColor","LabelX","LabelY","LabelSymbol","LabelFontSize","LabelColor","rnaComplexName"].join(",")];function r(e){void 0===e&&(e=qe.DEFAULT);var n=0;if("number"===typeof e.size)n=e.size;else{var t=/^-?[\d.]+/.exec(e.size);if(null===t)throw"Unrecognized font-size format: ".concat(e.size);n=Number.parseFloat(t[0])}return n=Math.abs(y)*n}function o(e){return void 0===e&&(e=we),Me(e).toLocaleLowerCase()}for(var a={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},i=0,l=Object.values(e);i<l.length;i++)for(var s=l[i],u=0,c=Object.values(s.rnaMoleculeProps);u<c.length;u++)for(var d=c[u],f=0,p=Object.values(d.nucleotideProps);f<p.length;f++){var h=p[f],m=h.x,x=h.y;m<a.x.min&&(a.x.min=m),m>a.x.max&&(a.x.max=m),x<a.y.min&&(a.y.min=x),x>a.y.max&&(a.y.max=x)}var g=Math.min((ho.x.max-ho.x.min)/(a.x.max-a.x.min),(ho.y.max-ho.y.min)/(a.y.max-a.y.min)),y=-g,b=.5*(a.x.min+a.x.max),N=.5*(a.y.min+a.y.max);for(var I in e){var C=Number.parseInt(I),S=e[C];for(var E in S.rnaMoleculeProps){var w=S.rnaMoleculeProps[E];for(var A in w.nucleotideProps){var k=Number.parseInt(A),P=k+w.firstNucleotideIndex,T=w.nucleotideProps[k],M=T.labelLineProps,R=Array(6).fill(""),_=g*(T.x-b)+vo.x,j=y*(T.y-N)+vo.y,O=Math.round(r(T.font)*po);if(void 0!==M){var L,D=M.points[0],F=M.points[1];R=[$e(_+g*D.x),$e(j+y*D.y)].concat(v(void 0===F?["",""]:[$e(_+g*F.x),$e(j+y*F.y)]),[$e(null!==(L=M.strokeWidth)&&void 0!==L?L:Qe),o(M.color)])}var B=T.labelContentProps,W=Array(5).fill("");if(void 0!==B){var z=document.getElementById(Zn(C,E,k));if(null===z)throw"Unfound LabelContent SVG element.";var U=z.getBoundingClientRect(),G=Math.round(r(B.font));W=[$e(_+g*(B.x-.5*U.width)),$e(j+y*B.y+.5*O),B.content,"".concat(G),o(B.color)]}t.push(["".concat(E,":").concat(P),T.symbol,$e(_,3),$e(j,3),o(T.color),"".concat(O)].concat(v(R),v(W),[S.name]).join(","))}}}return t.join("\n")})),u(fo,mo.bpseq,(function(e,n){var t=new Array;for(var r in e){var o=e[Number.parseInt(r)],a=o.basePairs;for(var i in t.push('# RNA complex "'.concat(o.name,'"')),o.rnaMoleculeProps){t.push('# RNA molecule "'.concat(i,'"'));var l=o.rnaMoleculeProps[i],s=a[i];for(var u in l.nucleotideProps){var c=Number.parseInt(u),d=l.nucleotideProps[c];if(c in s){var f,p=m(s[c]);try{for(p.s();!(f=p.n()).done;){var h=f.value,v=h.rnaMoleculeName,x=o.rnaMoleculeProps[v],g="".concat(c+l.firstNucleotideIndex," ").concat(d.symbol," ").concat(h.nucleotideIndex+x.firstNucleotideIndex);i!==v&&(g+=' # RNA molecule "'.concat(v,'"')),t.push(g)}}catch(y){p.e(y)}finally{p.f()}}else t.push("".concat(c+l.firstNucleotideIndex," ").concat(d.symbol," 0"))}}}return t.join("\n")})),u(fo,mo.tr,(function(e,n){for(var t={x:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},y:{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},r=0,o=Object.values(e);r<o.length;r++)for(var a=o[r],i=0,l=Object.values(a.rnaMoleculeProps);i<l.length;i++)for(var s=l[i],u=0,c=Object.values(s.nucleotideProps);u<c.length;u++){var d=c[u],f=d.x,p=d.y;f<t.x.min&&(t.x.min=f),f>t.x.max&&(t.x.max=f),p<t.y.min&&(t.y.min=p),p>t.y.max&&(t.y.max=p)}var h=.5*(t.x.min+t.x.max),v=.5*(t.y.min+t.y.max),m=Math.min((ho.x.max-ho.x.min)/(t.x.max-t.x.min),(ho.y.max-ho.y.min)/(t.y.max-t.y.min)),x=-m,g=new Array;for(var y in e){var b=e[Number.parseInt(y)];g.push('\x3c!-- <rnaComplex name="'.concat(b.name.replace('"','\\"'),'"> --\x3e'));var N=b.rnaMoleculeProps;for(var I in N){g.push('<structure name="'.concat(I.replace('"','\\"'),'">'));var C=N[I],S=C.nucleotideProps;for(var E in S){var w=Number.parseInt(E),A=w+C.firstNucleotideIndex,k=S[w],P=m*(k.x-h)+vo.x,T=x*(k.y-v)+vo.y;g.push('<point x="'.concat($e(P,3),'" y="').concat($e(T,3),'" b="').concat(k.symbol,'" numbering-label="').concat(A,'" />'))}g.push("</structure>")}g.push("\x3c!-- </rnaComplex> --\x3e")}return g.join("\n")})),u(fo,mo.svg,(function(e,n){var t,r=document.querySelector("#".concat(Ci)).getBBox(),o=document.getElementById(yi).cloneNode(!0),a=o.querySelector("#".concat(Ii));a&&a.remove();var i=o.querySelector("#".concat(Ni));i&&i.remove(),o.setAttribute("fill","none"),o.setAttribute("filter","none"),o.setAttribute("stroke","none"),o.style.removeProperty("top"),o.style.removeProperty("left"),o.style.removeProperty("position");var l=o.querySelector("#".concat(Ci)),s=r.width+40,c=r.height+40;o.setAttribute("viewBox","".concat(r.x-20," ").concat(r.y-20," ").concat(s," ").concat(c)),o.setAttribute("width",s.toString()),o.setAttribute("height",c.toString()),l.setAttribute("transform","scale(1, -1) translate(0, ".concat(-(2*r.y+r.height),")"));for(var d="Miscellaneous",f=(u(t={},dn.NUCLEOTIDE,"Nucleotides"),u(t,dn.BASE_PAIR,"BasePairs"),u(t,dn.LABEL_LINE,"LabelLines"),u(t,dn.LABEL_CONTENT,"LabelContents"),u(t,dn.PATH,"Paths"),u(t,dn.CENTERLINE,"Centerline"),t),p=["Nucleotides","BasePairs","LabelLines","LabelContents","Paths","Centerline",d],h={},v=0,x=p;v<x.length;v++){var g=x[v],b=document.createElement("g");b.setAttribute("id",g),h[g]=b}function N(e,n){var t=n.getAttribute("transform"),r=[1,0,0,1,0,0];if(null!==t){var o,a=m(t.replaceAll(/\)\s*(?!$)/g,")|").split("|"));try{for(a.s();!(o=a.n()).done;){r=nn(r,on(o.value))}}catch(c){a.e(c)}finally{a.f()}}e=nn(e,r);var i,l=n.getAttribute(vn);if("g"!==n.tagName||[dn.BASE_PAIR,dn.LABEL_LINE].includes(null!==l&&void 0!==l?l:""))i=null!==l&&l in f?h[f[l]]:h[d],n.setAttribute("transform",function(e){var n=y(e,6),t=n[0],r=n[1],o=n[2],a=n[3],i=n[4],l=n[5];return"matrix(".concat(t,", ").concat(r,", ").concat(o,", ").concat(a,", ").concat(i,", ").concat(l,")")}(e)),i.appendChild(n);else for(var s=0,u=Array.from(n.children);s<u.length;s++){N(e,u[s])}}for(var I=0,C=Array.from(l.children);I<C.length;I++){var S=C[I];N([1,0,0,1,0,0],S),S.remove()}for(var E=0,w=p;E<w.length;E++){var A=h[w[E]];A&&A.children.length>0&&l.appendChild(A)}var k,P=m(l.querySelectorAll("animate"));try{for(P.s();!(k=P.n()).done;){k.value.remove()}}catch(T){P.e(T)}finally{P.f()}return o.innerHTML=l.outerHTML,o.outerHTML})),fo),yo=d(d({},go),{},u({},mo.json,(function(e){var n=[],t=[],r={},o={},a={},i={},l="";function s(e){var t,r=n.findIndex((function(n){return n["font-family"]===e.family&&n["font-size"]==="".concat(e.size)&&n["font-weight"]===e.weight&&n["font-style"]===e.style}));-1===r?(l="font#".concat(n.length),n.push((u(t={name:l},"font-family",e.family),u(t,"font-size","".concat(e.size)),u(t,"font-weight",e.weight),u(t,"font-style",e.style),t))):l="font#".concat(r)}var c="";function f(e){var n,r=ke(e.stroke),o=t.findIndex((function(n){return n["stroke-width"]==="".concat(e.strokeWidth)&&n.stroke===r}));-1===o?(c="stroke#".concat(t.length),t.push((u(n={name:c},"stroke-width","".concat(e.strokeWidth)),u(n,"stroke",r),n))):c="stroke#".concat(o)}var p=Object.values(e);return p.forEach((function(e){Object.values(e.rnaMoleculeProps).forEach((function(e){Object.entries(e.nucleotideProps).forEach((function(e){var n,t,i=y(e,2),u=i[0],d=i[1],p=Number.parseInt(u);s(null!==(n=d.font)&&void 0!==n?n:qe.DEFAULT),a[p]=["text-"+ke(null!==(t=d.color)&&void 0!==t?t:we),l];var h,v,m=d.labelContentProps;void 0!==m&&(s(null!==(h=m.font)&&void 0!==h?h:qe.DEFAULT),r[p]=["text-"+ke(null!==(v=m.color)&&void 0!==v?v:we),l]);var x,g,b=d.labelLineProps;void 0!==b&&(f({stroke:null!==(x=b.color)&&void 0!==x?x:we,strokeWidth:null!==(g=b.strokeWidth)&&void 0!==g?g:Qe}),o[p]=[c])}))}))})),JSON.stringify({classes:n.concat(t),rnaComplexes:p.map((function(e){var n=Object.entries(e.rnaMoleculeProps),t=e.basePairs,l=new Array;return{name:e.name,rnaMolecules:n.map((function(n){for(var s=y(n,2),u=s[0],p=s[1],h=new Array,v=t[u],x=0,g=Object.entries(v);x<g.length;x++){var b,N=y(g[x],2),I=N[0],C=m(N[1]);try{for(C.s();!(b=C.n()).done;){var S,E,w,A=b.value,k=Number.parseInt(I);if(io({rnaMoleculeName:u,nucleotideIndex:k},A)){var P=null!==(S=A.basePairType)&&void 0!==S?S:et(p.nucleotideProps[k].symbol,e.rnaMoleculeProps[A.rnaMoleculeName].nucleotideProps[A.nucleotideIndex].symbol);f({strokeWidth:null!==(E=A.strokeWidth)&&void 0!==E?E:Qe,stroke:null!==(w=A.color)&&void 0!==w?w:we}),i[k]=[c];var T={basePairType:P,classes:i[k],residueIndex1:p.firstNucleotideIndex+k,residueIndex2:p.firstNucleotideIndex+A.nucleotideIndex,points:A.points},M=u,R=A.rnaMoleculeName;if(rt.isRedundantLeontisWesthofType(T.basePairType)){T.basePairType=rt.reverseDirectedTypeMap[T.basePairType];var _=M;M=R,R=_;var j=T.residueIndex1;T.residueIndex1=T.residueIndex2,T.residueIndex2=j}M===R?h.push(T):l.push(d(d({},T),{},{rnaMoleculeName1:M,rnaMoleculeName2:R}))}}}catch(F){C.e(F)}finally{C.f()}}var L=new Array,D=Object.entries(p.nucleotideProps).map((function(e){var n=y(e,2),t=n[0],r=n[1];return{nucleotideIndex:Number.parseInt(t),singularNucleotideProps:r}}));return D.forEach((function(e){var n=e.nucleotideIndex,t=e.singularNucleotideProps,a=t.labelContentProps,i=t.labelLineProps;if(void 0!==a||void 0!==i){var l={residueIndex:n+p.firstNucleotideIndex};void 0!==a&&(l.labelContent={classes:r[n],label:a.content,x:a.x+t.x,y:-(a.y+t.y)}),void 0!==i&&(l.labelLine={classes:o[n],points:i.points.map((function(e){var n=O(e,t);return n.y=-n.y,n}))}),L.push(l)}})),{name:u,basePairs:h,labels:L,sequence:D.map((function(e){var n=e.nucleotideIndex,t=e.singularNucleotideProps;return{classes:a[n],residueIndex:n+p.firstNucleotideIndex,residueName:t.symbol,x:t.x,y:-t.y}}))}})),basePairs:l}}))})}))),bo=function(e){function n(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{singularRnaComplexProps:null,singularRnaMoleculeProps:null,rnaMoleculeName:null,partialBasePairs:new Array},a={tagName:e.tagName};switch(e.tagName){case"ComplexDocument":t.complexDocumentName=e.getAttribute("Name");break;case"Complex":o.singularRnaComplexProps={name:e.getAttribute("Name"),rnaMoleculeProps:{},basePairs:{}},t.rnaComplexProps.push(o.singularRnaComplexProps);break;case"RNAMolecule":var i=e.getAttribute("Name");o.singularRnaMoleculeProps={firstNucleotideIndex:0,nucleotideProps:[]},o.rnaMoleculeName=i,o.singularRnaComplexProps.rnaMoleculeProps[i]=o.singularRnaMoleculeProps;break;case"NucListData":var l=o.singularRnaComplexProps,s=o.singularRnaMoleculeProps,u=e.getAttribute("StartNucID");if(null!=u){var c=Number.parseInt(u);if(Number.isNaN(c))throw new Error("This <NucListData>.StartNucID is a non-integer: ".concat(u));s.firstNucleotideIndex=c}var f={};e.getAttribute("DataType").split(".").forEach((function(e,n){f[n]=e}));var p,h=0,v={},x=o.rnaMoleculeName,g=m(e.textContent.split("\n"));try{var b=function(){var e=p.value;if(/^\s*$/.test(e))return"continue";var n=Xn.Symbol.A,t=NaN,r=NaN,o=NaN,a=NaN;e.split(/\s+/).forEach((function(e,i){switch(f[i]){case"NucChar":if(!Xn.symbols.some((function(n){return e===n})))throw new Error("This input NucChar is not a <Nucleotide.Symbol>: ".concat(e));n=e;break;case"NucID":if(t=Number.parseInt(e)-s.firstNucleotideIndex,Number.isNaN(t))throw new Error("This input <NucListData>.NucID is a non-integer: ".concat(e));h=t;break;case"XPos":if(r=Number.parseFloat(e),Number.isNaN(r))throw new Error("This input <NucListData>.XPos is not a number: ".concat(e));break;case"YPos":if(o=Number.parseFloat(e),Number.isNaN(o))throw new Error("This input <NucListData>.YPos is not a number: ".concat(e));break;case"FormatType":break;case"BPID":if(a=Number.parseInt(e),Number.isNaN(a))throw new Error("This input <NucListData>.BPID is a non-integer: ".concat(e));v[t]=a-s.firstNucleotideIndex}})),Number.isNaN(t)&&(t=h),h++;var i={symbol:n,x:r,y:o};if(t in s.nucleotideProps)throw new Error("This input <NucListData>.NucID is a duplicate: ".concat(t));s.nucleotideProps[t]=i};for(g.s();!(p=g.n()).done;)b()}catch(J){g.e(J)}finally{g.f()}for(var N=0,I=Object.entries(v);N<I.length;N++){var C=y(I[N],2),S=C[0],E=C[1],w=Number.parseInt(S);if(!(E in s.nucleotideProps))throw new Error("This <NucListData>.BPID is outside the set of expected nucleotide indices. Found ".concat(E+s.firstNucleotideIndex));ro(l,x,w,x,E,to.DO_NOTHING)}break;case"BasePairs":var A=o.singularRnaMoleculeProps,k=e.getAttribute("nucID"),P=Number.parseInt(k);if(Number.isNaN(P))throw new Error("This <BasePairs>.nucID is a non-integer: ".concat(k));P-=A.firstNucleotideIndex;var T=e.getAttribute("bpNucID"),M=Number.parseInt(T);if(Number.isNaN(M))throw new Error("This <BasePairs>.bpNucID is a non-integer: ".concat(T));var R=e.getAttribute("length"),_=Number.parseInt(R);if(Number.isNaN(_))throw new Error("This <BasePairs>.length is a non-integer: ".concat(R));var j=o.rnaMoleculeName,O=e.getAttribute("bpName"),L=null!==O&&void 0!==O?O:j;o.partialBasePairs.push({rnaMoleculeName:j,nucleotideIndex:P,basePairRnaMoleculeName:L,unnormalizedBasePairNucleotideIndex:M,length:_});break;case"Nuc":var D=e.getAttribute("Color"),F=null;null!==D&&(F=Pe(D,Ne.RGB));var B=e.getAttribute("FontID"),W=null;if(null!==B){var z=Number.parseInt(B);if(Number.isNaN(z))throw new Error("This <Nuc>.FontID attribute is non-integer: ".concat(B));W=He.fromFontId(z)}var U=e.getAttribute("FontSize"),G=null;if(null!==U&&(G=Number.parseFloat(U),Number.isNaN(G)))throw new Error("This <Nuc>.FontSize attribute is non-numeric: ".concat(U));var H=[],K=o.singularRnaMoleculeProps.firstNucleotideIndex,V=e.getAttribute("RefID");if(null!==V){var q=Number.parseInt(V)-K;if(Number.isNaN(q))throw new Error("This <Nuc>.RefID is a non-integer: ".concat(V));H.push(q),a.referencedNucleotideIndex=q}var Q=e.getAttribute("RefIDs");if(null!==Q){var X=Q.replace(/\s+/,"");if(!/^(-?\d+(--?\d+)?(,-?\d+(--?\d+)?)*)$/.test(X))throw new Error("This <Nuc>.RefIDs attribute did not match the expected format: ".concat(Q));X.split(",").forEach((function(e){var n=e.match(/^(-?\d+)(?:-(-?\d+))?$/),t=Number.parseInt(n[1]);if(Number.isNaN(t))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(n[1]));if(t-=K,void 0===n[2])H.push(Number.parseInt(n[1])-K);else{var r=Number.parseInt(n[2]);if(Number.isNaN(r))throw new Error("This referenced-nucleotide index is non-numeric: ".concat(r));if(t>(r-=K)){var o=t;t=r,r=o}for(var a=t;a<=r;a++)H.push(a)}}))}var Y=o.singularRnaMoleculeProps;H.forEach((function(e){var n;if(!(e in Y.nucleotideProps))throw new Error("The referenced nucleotide index indexes a non-existent Nucleotide: ".concat(e));n=Y.nucleotideProps[e],null!==F&&(n.color=F),null!==G&&(void 0===n.font&&(n.font=structuredClone(qe.DEFAULT)),n.font.size=G),null!==W&&void 0===n.font&&(n.font=d(d({},qe.DEFAULT),W))}));break;case"LabelList":if("Nuc"===r.tagName){if(null===r.referencedNucleotideIndex)throw new Error("This <Nuc> had no attribute <RefID>");var $=o.singularRnaMoleculeProps.nucleotideProps[r.referencedNucleotideIndex];e.textContent.split("\n").forEach((function(e){var n=e.trim().split(/\s+/);switch(n[0]){case"l":if(n.length<7)throw new Error("This <LabelList> label-line line has too few entries.");var t=n[1],r=n[2],o=n[3],a=n[4],i=n[5],l=Number.parseFloat(t),s=Number.parseFloat(r),u=Number.parseFloat(o),c=Number.parseFloat(a),d=Number.parseFloat(i);if(Number.isNaN(l))throw new Error("This <LabelList> label-line line has a non-numeric x0 value: ".concat(t));if(Number.isNaN(s))throw new Error("This <LabelList> label-line line has a non-numeric y0 value: ".concat(r));if(Number.isNaN(u))throw new Error("This <LabelList> label-line line has a non-numeric x1 value: ".concat(o));if(Number.isNaN(c))throw new Error("This <LabelList> label-line line has a non-numeric y1 value: ".concat(a));if(Number.isNaN(d))throw new Error("This <LabelList> label-line line has a non-numeric strokeWidth value: ".concat(i));$.labelLineProps={points:[{x:l,y:s},{x:u,y:c}],color:Pe(n[6],Ne.RGB),strokeWidth:d};break;case"s":if(n.length<8)throw new Error("This <LabelList> label-content line has too few entries.");var f=n[1],p=n[2],h=n[4],v=n[5],m=n[6],x=n[7],g=Number.parseFloat(f),y=Number.parseFloat(p),b=Number.parseFloat(h),N=Number.parseInt(v),I=Pe(m,Ne.RGB),C=x.match(/^"(.*)"$/);if(Number.isNaN(g))throw new Error("This <LabelList> label-content line has a non-numeric x value: ".concat(f));if(Number.isNaN(y))throw new Error("This <LabelList> label-content line has a non-numeric y value: ".concat(p));if(Number.isNaN(b))throw new Error("This <LabelList> label-content line has a non-numeric fontSize value: ".concat(h));if(Number.isNaN(N))throw new Error("This <LabelList> label-content line has a non-numeric fontId value: ".concat(v));if(null===C)throw new Error("This <LabelList> label-content line has a content value with an unrecognized format: ".concat(x));$.labelContentProps={x:g,y:y,content:C[1],color:I,strokeWidth:Qe,font:qe.fromFontId(N,b)}}}))}}if(Array.from(e.children).forEach((function(e){n(e,t,a,o)})),"Complex"===e.tagName){var Z=o.singularRnaComplexProps;o.partialBasePairs.forEach((function(e){for(var n=e.basePairRnaMoleculeName,t=Z.rnaMoleculeProps[n],r=e.unnormalizedBasePairNucleotideIndex-t.firstNucleotideIndex,o=0;o<e.length;o++)ro(Z,e.rnaMoleculeName,e.nucleotideIndex+o,n,r-o,to.DO_NOTHING)}))}}e.startsWith("<!DOCTYPE")||(e+="<!DOCTYPE ComplexDocument [\n<!ELEMENT ComplexDocument (SceneNodeGeom?, ComplexDocument*, Label*, LabelList*, Complex*, WithComplex*)>\n<!ATTLIST ComplexDocument Name CDATA #REQUIRED Author CDATA #IMPLIED ExpandUponWrite CDATA #IMPLIED PSScale CDATA #IMPLIED LandscapeMode CDATA #IMPLIED> \n<!ELEMENT Complex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST Complex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT WithComplex (SceneNodeGeom?, Label*, LabelList*, RnaMolecule*, ProteinMolecule*)>\n<!ATTLIST WithComplex Name CDATA #REQUIRED Author CDATA #IMPLIED> \n<!ELEMENT RnaMolecule (SceneNodeGeom?, Label*, LabelList*, Nuc*, NucSegment*, (NucListData | Nuc)*, RNAFile*, BasePairs*, BasePair*, Parent?, AlignmentFile?)>\n<!ATTLIST RnaMolecule Name CDATA #REQUIRED Author CDATA #IMPLIED>\n\x3c!-- parent is like for e.coli being the numbering --\x3e \n<!ELEMENT Parent (RnaMolecule)>\n<!ELEMENT AlignmentFile (#PCDATA)> \n<!ELEMENT BasePairs EMPTY>\n<!ATTLIST BasePairs nucID CDATA #REQUIRED bpNucID CDATA #REQUIRED length CDATA #REQUIRED bpName CDATA #IMPLIED>\n\x3c!-- BasePair can be used after above BasePairs is implemented and refers to base pairs already set, even across strands. --\x3e\n<!ELEMENT BasePair EMPTY>\n<!ATTLIST BasePair RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED Type (Canonical | Wobble | MisMatch | Weak | Phosphate | Unknown) 'Unknown' Line5PDeltaX CDATA #IMPLIED Line5PDeltaY CDATA #IMPLIED Line3PDeltaX CDATA #IMPLIED Line3PDeltaY CDATA #IMPLIED LabelDeltaX CDATA #IMPLIED LabelDeltaY CDATA #IMPLIED Label5PSide CDATA #IMPLIED> \n<!ELEMENT NucListData (#PCDATA)>\n<!ATTLIST NucListData StartNucID CDATA #IMPLIED DataType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'> \n<!ELEMENT Label (StringLabel | CircleLabel | Trianglelabel | LineLabel | ParallelogramLabel)>\n<!ATTLIST Label XPos CDATA #REQUIRED YPos CDATA #REQUIRED Color CDATA #IMPLIED>\n<!ELEMENT StringLabel EMPTY> \n<!ATTLIST StringLabel FontName CDATA #IMPLIED FontType CDATA #IMPLIED FontSize CDATA #REQUIRED Angle CDATA #IMPLIED  Text CDATA #REQUIRED>\n<!ELEMENT CircleLabel EMPTY> \n<!ATTLIST CircleLabel Arc0 CDATA #IMPLIED Arc1 CDATA #IMPLIED Radius CDATA #IMPLIED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT TriangleLabel EMPTY>\n<!ATTLIST TriangleLabel TopPtX CDATA #REQUIRED TopPtY CDATA #REQUIRED LeftPtX CDATA #REQUIRED LeftPtY CDATA #REQUIRED RightPtX CDATA #REQUIRED RightPtY CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED>\n<!ELEMENT LineLabel EMPTY> \n<!ATTLIST LineLabel X1 CDATA #REQUIRED Y1 CDATA #REQUIRED LineWidth CDATA #IMPLIED> \n<!ELEMENT ParallelogramLabel EMPTY>\n<!ATTLIST ParallelogramLabel Angle1 CDATA #REQUIRED Side1 CDATA #REQUIRED Angle2 CDATA #REQUIRED Side2 CDATA #REQUIRED LineWidth CDATA #IMPLIED IsOpen CDATA #IMPLIED> \n<!ELEMENT LabelList (#PCDATA)>\n<!ELEMENT NucSegment (NucChars)> \n<!ATTLIST NucSegment StartNucID CDATA #IMPLIED> \n<!ELEMENT NucChars (#PCDATA)>\n<!ELEMENT NucSymbol (#PCDATA)> \n<!ELEMENT Nuc (Label*, LabelList?, NucSymbol?)>\n<!ATTLIST Nuc NucID CDATA #IMPLIED NucChar CDATA #IMPLIED XPos CDATA #IMPLIED YPos CDATA #IMPLIED Color CDATA #IMPLIED FontID CDATA #IMPLIED FontSize CDATA #IMPLIED FormatType CDATA #IMPLIED BPParent CDATA #IMPLIED BPNucID CDATA #IMPLIED RefID CDATA #IMPLIED RefIDs CDATA #IMPLIED IsHidden CDATA #IMPLIED GroupName CDATA #IMPLIED IsSchematic CDATA #IMPLIED SchematicColor CDATA #IMPLIED SchematicLineWidth CDATA #IMPLIED SchematicBPLineWidth CDATA #IMPLIED SchematicBPGap CDATA #IMPLIED SchematicFPGap CDATA #IMPLIED SchematicTPGap CDATA #IMPLIED IsNucPath CDATA #IMPLIED NucPathColor CDATA #IMPLIED NucPathLineWidth CDATA #IMPLIED>\n<!ELEMENT RNAFile EMPTY>\n<!ATTLIST RNAFile FileName CDATA #REQUIRED FileType (NucChar | NucID.NucChar | NucID.NucChar.XPos.YPos | NucID.NucChar.XPos.YPos.FormatType.BPID) 'NucID.NucChar.XPos.YPos.FormatType.BPID'>\n<!ELEMENT SceneNodeGeom EMPTY>\n<!ATTLIST SceneNodeGeom CenterX CDATA #IMPLIED CenterY CDATA #IMPLIED Scale CDATA #IMPLIED>\n]>\n"+e);var t={rnaComplexProps:new Array,complexDocumentName:""};return Array.from((new DOMParser).parseFromString(e,"text/xml").children).forEach((function(e){n(e,t,{tagName:""})})),t};function No(e,n){if(!Array.isArray(e))throw"Variable ".concat(n," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(n,' should include "x" and "y" properties.');var t=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(t)||Number.isNaN(r))throw"x and y properties of each element in ".concat(n," should be numbers.");return{x:t,y:r}}))}function Io(e,n,t,r,o,a,i){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var l;if([null,void 0].includes(e.basePairType))l=void 0;else{if("string"!==typeof e.basePairType||!nt(e.basePairType))throw"Unrecognized base-pair type.";l=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=_e(e.stroke)}var s=structuredClone(r),u=e.classes;if(void 0!==u){if(!Array.isArray(u))throw'Base-pair "classes" variable should be an array.';u.forEach((function(e){var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":o=Number.parseFloat(e[1]);break;case"stroke":case"color":s=_e(e[1])}}))}))}var c=void 0;if("points"in e&&(c=No(e.points,"basePair.points")),void 0===a){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var d=e.rnaMoleculeName1;if("string"!==typeof d)throw"rnaMoleculeName1 should be a string.";a=d}if(void 0===i){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var f=e.rnaMoleculeName2;if("string"!==typeof f)throw"rnaMoleculeName2 should be a string.";i=f}for(var p=t.rnaMoleculeProps[a],h=t.rnaMoleculeProps[i],v=0,m=[a,i];v<m.length;v++){var x=m[v];if(!(x in t.rnaMoleculeProps))throw'RNA molecule "'.concat(x,'" does not exist in the RNA complex.')}ro(t,a,Number.parseInt(e.residueIndex1)-p.firstNucleotideIndex,i,Number.parseInt(e.residueIndex2)-h.firstNucleotideIndex,to.DO_NOTHING,{color:s,strokeWidth:o,basePairType:l,points:c})}function Co(e,n){if(!Array.isArray(e))throw"Variable ".concat(n," should be an array.");return e.map((function(e){if(!("x"in e)||!("y"in e))throw"Each element in ".concat(n,' should include "x" and "y" properties.');var t=Number.parseFloat(e.x),r=Number.parseFloat(e.y);if(Number.isNaN(t)||Number.isNaN(r))throw"x and y properties of each element in ".concat(n," should be numbers.");return{x:t,y:r}}))}function So(e,n,t,r,o,a,i){if(!("basePairType"in e)||!("residueIndex1"in e)||!("residueIndex2"in e))throw'Input basePairs elements of input Json should have "basePairType", "residueIndex1" and "residueIndex2" variables.';var l;if([null,void 0].includes(e.basePairType))l=void 0;else{if("string"!==typeof e.basePairType||!nt(e.basePairType))throw"Unrecognized base-pair type.";l=e.basePairType}if("stroke"in e){if("string"!==typeof e.stroke)throw'Base-pair "stroke" variable should be a string.';r=_e(e.stroke)}var s=structuredClone(r),u=e.classes;if(void 0!==u){if(!Array.isArray(u))throw'Base-pair "classes" variable should be an array.';u.forEach((function(e){var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":o=Number.parseFloat(e[1]);break;case"stroke":case"color":s=_e(e[1])}}))}))}var c=void 0;if("points"in e&&(c=Co(e.points,"basePair.points")),void 0===a){if(!("rnaMoleculeName1"in e))throw"No rnaMoleculeName1 was provided.";var d=e.rnaMoleculeName1;if("string"!==typeof d)throw"rnaMoleculeName1 should be a string.";a=d}if(void 0===i){if(!("rnaMoleculeName2"in e))throw"No rnaMoleculeName2 was provided.";var f=e.rnaMoleculeName2;if("string"!==typeof f)throw"rnaMoleculeName2 should be a string.";i=f}for(var p=t.rnaMoleculeProps[a],h=t.rnaMoleculeProps[i],v=0,m=[a,i];v<m.length;v++){var x=m[v];if(!(x in t.rnaMoleculeProps))throw'RNA molecule "'.concat(x,'" does not exist in the RNA complex.')}ro(t,a,Number.parseInt(e.residueIndex1)-p.firstNucleotideIndex,i,Number.parseInt(e.residueIndex2)-h.firstNucleotideIndex,to.DO_NOTHING,{color:s,strokeWidth:o,basePairType:l,points:c})}var Eo,wo,Ao;var ko=(u(Eo={},uo.XRNA,uo.XRNA),u(Eo,uo.XML,uo.XML),u(Eo,uo.JSON,uo.JSON),u(Eo,uo.STR,uo.STR),u(Eo,uo.SVG,uo.SVG),Eo),Po=Object.values(ko),To=(u(wo={},ko.xrna,bo),u(wo,ko.xml,bo),u(wo,ko.json,(function(e){return function(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var n=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,t){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var r={name:"",rnaMoleculeProps:{},basePairs:{}};if(r.name=e.name,r.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var t={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},o={font:structuredClone(qe.DEFAULT),color:structuredClone(we)},a=e.classesForSequence;if(void 0!==a){if(!Array.isArray(a))throw'RNA-molecule "classesForSequence" variable should be an array;';a.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(o.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":o.font.family=e[1];break;case"font-size":o.font.size=e[1];break;case"font-weight":o.font.weight=e[1];break;case"font-style":o.font.style=e[1];break;case"color":o.color=_e(e[1])}}))}))}var i=e.name;r.rnaMoleculeProps[i]=t,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var n=Number.parseInt(e.residueIndex);n<t.firstNucleotideIndex&&(t.firstNucleotideIndex=n)})),e.sequence.forEach((function(e){var r=Number.parseInt(e.residueIndex)-t.firstNucleotideIndex;if(!Xn.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var a={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};a.font=structuredClone(o.font),a.color=structuredClone(o.color),t.nucleotideProps[r]=a;var i=e.classes;if(void 0!==i){if(!Array.isArray(i))throw'Nucleotide "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":a.font.family=e[1];break;case"font-size":a.font.size=e[1];break;case"font-weight":a.font.weight=e[1];break;case"font-style":a.font.style=e[1];break;case"color":a.color=_e(e[1])}}))}))}}));var l={font:structuredClone(qe.DEFAULT),color:structuredClone(we),stroke:structuredClone(we),strokeWidth:Qe},s=e.classesForLabels;if(void 0!==s){if(!Array.isArray(s))throw'RNA-molecule "classsesForLabels" variable should be an array.';s.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(l.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":l.font.family=e[1];break;case"font-size":l.font.size=e[1];break;case"font-weight":l.font.weight=e[1];break;case"font-style":l.font.style=e[1];break;case"stroke":l.stroke=_e(e[1]);break;case"color":l.color=_e(e[1]);break;case"stroke-width":l.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=t.nucleotideProps[Number.parseInt(e.residueIndex)-t.firstNucleotideIndex];if("labelContent"in e){var o=structuredClone(l.font),a=structuredClone(l.color),i=e.labelContent.classes;if(void 0!==i){if(!Array.isArray(i))throw'LabelContent "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":o.family=e[1];break;case"font-size":o.size=e[1];break;case"font-weight":o.weight=e[1];break;case"font-style":o.style=e[1];break;case"color":case"stroke":a=_e(e[1])}}))}))}r.labelContentProps={x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y),content:e.labelContent.label,font:o,color:a,strokeWidth:Qe}}if("labelLine"in e){var s=e.labelLine,u=structuredClone(l.stroke),c=l.strokeWidth,d=s.classes;if(void 0!==d){if(!Array.isArray(d))throw'Label-line "classes" variable should be an array.';d.forEach((function(e){var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke":case"color":u=_e(e[1]);break;case"stroke-width":c=Number.parseFloat(e[1])}}))}))}var f=[];if("points"in s)f=Co(s.points,'label-line "points"');else{if(!("x1"in s&&"y1"in s&&"x2"in s&&"y2"in s))throw'Input label-line elements should have a "points" variable.';var p=Number.parseFloat(s.x1);if(Number.isNaN(p))throw'"x1" variable should be a number.';var h=Number.parseFloat(s.y1);if(Number.isNaN(h))throw'"y1" variable should be a number.';var v=Number.parseFloat(s.x2);if(Number.isNaN(v))throw'"x2" variable should be a number.';var m=Number.parseFloat(s.y2);if(Number.isNaN(m))throw'"y2" variable should be a number.';f.push({x:p,y:h},{x:v,y:m})}r.labelLineProps={points:f,color:u,strokeWidth:c}}}));var u={strokeWidth:Qe,stroke:void 0},c=e.classesForBasePairs;if(void 0!==c){if(!Array.isArray(c))throw'RNA-molecule "classesForBasePairs" variable should be an array.';c.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":u.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":u.stroke=_e(e[1])}}))}))}if("basePairs"in e){var d=e.basePairs;if(!Array.isArray(d))throw"The basePairs property of each input RNA molecule should be an array.";for(var f=0,p=e.basePairs;f<p.length;f++)So(p[f],null!==n&&void 0!==n?n:[],r,u.stroke,u.strokeWidth,i,i)}return t})),"basePairs"in e){var o=e.basePairs;if(!Array.isArray(o))throw"The basePairs property of each input RNA complex should be an array.";var a,i=m(e.basePairs);try{var l=function(){var t,o=a.value,i={strokeWidth:Qe,stroke:void 0},l=e.classesForBasePairs;if(void 0!==l){if(!Array.isArray(l))throw'RNA-molecule "classesForBasePairs" variable should be an array.';l.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":i.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":i.stroke=_e(e[1])}}))}))}So(o,null!==(t=e.classesForBasePairs)&&void 0!==t?t:[],r,i.stroke,i.strokeWidth)};for(i.s();!(a=i.n()).done;)l()}catch(s){i.e(s)}finally{i.f()}}return r})),complexDocumentName:"Unknown"}}(JSON.parse(e))})),u(wo,ko.str,(function(e){var n=/basefont[^\}]*\{[^\}]+\}[^\}\d]*(\d+)[^\}]*\}/.exec(e);null!==n&&Number.parseInt(n[1]);var t,r=e.matchAll(/(text|line)\s*\{/g),o=new Array,a=new Array,i="RNA molecule",l=u({},0,[]),s=u({},0,[]),c=new Array,d=m(r);try{for(d.s();!(t=d.n()).done;){var f=t.value,p=1,h=f.index;if(void 0===h)throw"index should never be undefined.";for(var v=h+f[0].length,x=v-1;p>0;){var g=x+1,y=e.indexOf("{",g),b=e.indexOf("}",g);if(-1===y){if(-1===b)throw"This STR file is improper; it contains an unclosed bracket.";x=b,p--}else-1===b?(x=y,p++):b<y?(x=b,p--):(x=y,p++)}var N=e.substring(v,x);switch(f[1]){case"text":var I=N.match(/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s*\}.*(A|C|G|U)\s+0\s*$/);null!==I&&o.push({x:Number.parseFloat(I[1]),y:Number.parseFloat(I[2]),symbol:I[3]});break;case"line":var C=N.match(/\{\s*(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s*\}/);if(null===C)throw"lineRegexMatch should never be null.";a.push({v0:{x:Number.parseFloat(C[1]),y:Number.parseFloat(C[2])},v1:{x:Number.parseFloat(C[3]),y:Number.parseFloat(C[4])}})}}}catch(E){d.e(E)}finally{d.f()}var S=[{name:"RNA complex",rnaMoleculeProps:u({},i,{firstNucleotideIndex:1,nucleotideProps:o}),basePairs:{}}];return cn(S,u({},0,a),u({},0,c),u({},0,u({},i,[])),l,s),{complexDocumentName:"Scene",rnaComplexProps:S}})),u(wo,ko.svg,(function(e){var n,t=e.match(/<!\[CDATA\[([\s\S]*)\]\]>/m);if(jn={defaults:{}},t){var r=t[1].split("\n");r=r.filter((function(e){return!e.match(/^\s*$/)}));var o,a=m(r);try{for(a.s();!(o=a.n()).done;){var i=o.value.match(/^\s*([\w-.]+)\s*\{(.*)\}\s*$/);if(i){var l=i[1],s=v(l.matchAll(/\./g)).map((function(e){return e.index})),u=void 0,c=void 0;switch(s.length){case 0:u=l,c="";break;case 1:var d=s[0];u=l.substring(0,d),c=l.substring(d+1);break;default:continue}var f=Ln(i[2]);if(""===u)jn.defaults[c]=f;else{u in jn||(jn[u]={});var p=jn[u];if(""===c)p.default=f;else p[c]=f}}}}catch(_e){a.e(_e)}finally{a.f()}}var h=[],x={rnaComplexProps:h,graphicalAdjustments:{},basePairLinesPerRnaComplex:[],basePairCentersPerRnaComplex:[],rnaMoleculeCount:0,nucleotideCount:0,labelLines:{},labelContents:{},transform:[1,0,0,1,0,0],rnaComplexPropsByName:{},temporaryBasePairsPerRnaComplexName:{},temporaryLabelData:{}},g=hn.UNFORMATTED;if(/data-xrna_type/.test(e))g=hn.XRNA_JS;else if(/id\s*=\s*"Letters"/.test(e)){g=hn.XRNA_GT;var b={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}},N=h.length;h.push(b),x.singularRnaComplexProps=b;var I=[];x.labelLinesPerRnaComplex=I,x.labelLines[N]=I;var C=[];x.labelContentsPerRnaComplex=C,x.labelContents[N]=C,x.graphicalAdjustments[N]={},x.graphicalAdjustmentsPerRnaComplex=x.graphicalAdjustments[0]}else{g=hn.UNFORMATTED;var S={name:"RNA complex",rnaMoleculeProps:{},basePairs:{}};h.push(S),x.singularRnaComplexProps=S;x.graphicalAdjustments[0]={},x.labelLines[0]=[],x.labelContents[0]=[],x.graphicalAdjustmentsPerRnaComplex=x.graphicalAdjustments[0];var E={firstNucleotideIndex:1,nucleotideProps:{}},w="RNA molecule";x.currentRnaMoleculeName=w,S.rnaMoleculeProps[w]=E,x.singularRnaMoleculeProps=E,x.graphicalAdjustmentsPerRnaComplex[w]={},x.graphicalAdjustmentsPerRnaMolecule=x.graphicalAdjustmentsPerRnaComplex[w],x.labelLinesPerRnaComplex=[],x.labelContentsPerRnaComplex=[]}if([hn.UNFORMATTED,hn.XRNA_GT].includes(g)){var A=document.getElementById(bi);A.innerHTML=e;for(var k=0,P=Array.from(A.querySelectorAll("text"));k<P.length;k++){var T=P[k],M=T.getBBox();T.setAttribute(Mn,"".concat(M.width)),T.setAttribute(Rn,"".concat(M.height))}e=A.innerHTML,A.innerHTML=""}var R=(new DOMParser).parseFromString(e,"image/svg+xml"),_=Array.from(R.children),j=R.querySelector("svg");if(!j)throw"No svg element was found within the input file.";var O=Ln(j.style.cssText);jn.root=O;for(var L=0,D=_;L<D.length;L++){On(D[L],x,g)}function F(){for(var e=0,n=Object.values(h);e<n.length;e++)for(var t=n[e].rnaMoleculeProps,r=0,o=Object.entries(t);r<o.length;r++){var a=y(o[r],2),i=a[0],l=a[1];0===Object.values(l.nucleotideProps).length&&delete t[i]}}switch(g){case hn.XRNA_JS:for(var B,W=null!==(B=x.relativeCoordinatesFlag)&&void 0!==B?B:kn,z=0,U=Object.keys(x.temporaryBasePairsPerRnaComplexName);z<U.length;z++){var G=U[z];if(!(G in x.temporaryBasePairsPerRnaComplexName))throw'A base pair within the input file referenced RNA complex "'.concat(G,'," which was not present within the input file.');var H,K=x.rnaComplexPropsByName[G],V=m(x.temporaryBasePairsPerRnaComplexName[G]);try{for(V.s();!(H=V.n()).done;){var q=H.value,Q=q.rnaMoleculeName0,X=q.rnaMoleculeName1,Y=q.formattedNucleotideIndex0,$=q.formattedNucleotideIndex1,Z=q.basePairType,J=q.strokeWidth,ee=q.color;if(!(Q in K.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(Q,'," which was not present within the RNA complex.');var ne=K.rnaMoleculeProps[Q];if(!(X in K.rnaMoleculeProps))throw'A base pair within the input file referenced RNA molecule "'.concat(X,'," which was not present within the RNA complex.');var te=K.rnaMoleculeProps[X];ro(K,Q,Y-ne.firstNucleotideIndex,X,$-te.firstNucleotideIndex,to.DO_NOTHING,{basePairType:Z,strokeWidth:J,color:ee})}}catch(_e){V.e(_e)}finally{V.f()}}for(var re=0,oe=Object.keys(x.temporaryLabelData);re<oe.length;re++){var ae=oe[re],ie=x.temporaryLabelData[ae];if(!(ae in x.rnaComplexPropsByName))throw'RNA-complex name "'.concat(ae,'" was referenced by a label, but was not present in the input file.');for(var le=x.rnaComplexPropsByName[ae],se=0,ue=Object.keys(ie);se<ue.length;se++){var ce=ue[se],de=ie[ce];if(!(ce in le.rnaMoleculeProps))throw'RNA-molecule name "'.concat(ce,'" was referenced by a label, but was not present in the input file.');for(var fe=le.rnaMoleculeProps[ce],pe=0,he=Object.keys(de);pe<he.length;pe++){var ve=he[pe],me=Number.parseInt(ve),xe=de[me],ge=xe.labelLineProps,ye=xe.labelContentProps,be=me-fe.firstNucleotideIndex,Ne=fe.nucleotideProps[be];if(void 0!==ge){if(!W){var Ie,Ce=m(ge.points);try{for(Ce.s();!(Ie=Ce.n()).done;){var Se=Ie.value;Se.x-=Ne.x,Se.y-=Ne.y}}catch(_e){Ce.e(_e)}finally{Ce.f()}}Ne.labelLineProps=ge}void 0!==ye&&(Ne.labelContentProps=ye,ye.x-=Ne.x,ye.y-=Ne.y)}}}break;case hn.XRNA_GT:F();for(var Ee=0,we=Object.entries(x.labelContents);Ee<we.length;Ee++){var Ae,ke=y(we[Ee],2),Pe=(ke[0],m(ke[1]));try{for(Pe.s();!(Ae=Pe.n()).done;){var Te=Ae.value,Me=Te.labelContent,Re=Te.rectangle;Me.x-=.125*Re.width,Me.y+=.25*Re.height}}catch(_e){Pe.e(_e)}finally{Pe.f()}}cn(h,{0:x.basePairLinesPerRnaComplex},{0:x.basePairCentersPerRnaComplex},x.graphicalAdjustments,x.labelLines,x.labelContents);break;case hn.UNFORMATTED:F(),cn(h,{0:x.basePairLinesPerRnaComplex},{0:x.basePairCentersPerRnaComplex},x.graphicalAdjustments,x.labelLines,x.labelContents);break;default:throw"Unhandled switch case."}return{complexDocumentName:null!==(n=x.complexDocumentName)&&void 0!==n?n:"Scene",rnaComplexProps:h}})),wo),Mo=d(d({},To),{},u({},ko.json,(function(e){return function(e){if(!("classes"in e)||!("rnaComplexes"in e))throw'Input Json should have "classes" and "rnaComplexes" variables.';if(!Array.isArray(e.classes))throw'JSON "classes" variable should be an array.';var n=e.classes;return{rnaComplexProps:e.rnaComplexes.map((function(e,t){if(!("name"in e)||!("rnaMolecules"in e))throw'Input rnaComplex elements of input Json should have "name" and "rnaMolecules" variables.';var r={name:"",rnaMoleculeProps:{},basePairs:{}};if(r.name=e.name,r.rnaMoleculeProps={},e.rnaMolecules.forEach((function(e){if(!("name"in e)||!("labels"in e)||!("sequence"in e))throw'Input rnaMolecule elements of input Json should have "name", "sequence", "labels" variables.';var t={firstNucleotideIndex:Number.MAX_VALUE,nucleotideProps:[]},o={font:structuredClone(qe.DEFAULT),color:structuredClone(we)},a=e.classesForSequence;if(void 0!==a){if(!Array.isArray(a))throw'RNA-molecule "classesForSequence" variable should be an array;';a.forEach((function(e){if("string"!==typeof e)throw'"classForSequence" variable should be a string.';e.startsWith("text-")&&(o.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":o.font.family=e[1];break;case"font-size":o.font.size=e[1];break;case"font-weight":o.font.weight=e[1];break;case"font-style":o.font.style=e[1];break;case"color":o.color=_e(e[1])}}))}))}var i=e.name;r.rnaMoleculeProps[i]=t,e.sequence.forEach((function(e){if(!("residueIndex"in e)||!("x"in e)||!("y"in e)||!("residueName"in e))throw'Input sequence elements of input Json should have "residueIndex", "residueName", "x" and "y" variables.';var n=Number.parseInt(e.residueIndex);n<t.firstNucleotideIndex&&(t.firstNucleotideIndex=n)})),e.sequence.forEach((function(e){var r=Number.parseInt(e.residueIndex)-t.firstNucleotideIndex;if(!Xn.isSymbol(e.residueName))throw'Input sequence residueName "'.concat(e.residueName,'" is not valid.');var a={symbol:e.residueName,x:Number.parseFloat(e.x),y:Number.parseFloat(e.y)};a.font=structuredClone(o.font),a.color=structuredClone(o.color),t.nucleotideProps[r]=a;var i=e.classes;if(void 0!==i){if(!Array.isArray(i))throw'Nucleotide "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":a.font.family=e[1];break;case"font-size":a.font.size=e[1];break;case"font-weight":a.font.weight=e[1];break;case"font-style":a.font.style=e[1];break;case"color":a.color=_e(e[1])}}))}))}}));var l={font:structuredClone(qe.DEFAULT),color:structuredClone(we),stroke:structuredClone(we),strokeWidth:Qe},s=e.classesForLabels;if(void 0!==s){if(!Array.isArray(s))throw'RNA-molecule "classsesForLabels" variable should be an array.';s.forEach((function(e){if("string"!==typeof e)throw'"classForLabel" variable should be a string';e.startsWith("text-")&&(l.color=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":l.font.family=e[1];break;case"font-size":l.font.size=e[1];break;case"font-weight":l.font.weight=e[1];break;case"font-style":l.font.style=e[1];break;case"stroke":l.stroke=_e(e[1]);break;case"color":l.color=_e(e[1]);break;case"stroke-width":l.strokeWidth=Number.parseFloat(e[1])}}))}))}e.labels.forEach((function(e){if(!("residueIndex"in e))throw'Input label elements of input Json should have a "residueIndex" variable.';var r=t.nucleotideProps[Number.parseInt(e.residueIndex)-t.firstNucleotideIndex];if("labelContent"in e){var o=structuredClone(l.font),a=structuredClone(l.color),i=e.labelContent.classes;if(void 0!==i){if(!Array.isArray(i))throw'LabelContent "classes" variable should be an array.';i.forEach((function(e){e.startsWith("text-")&&(a=_e(e.substring("text-".length)));var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"font-family":o.family=e[1];break;case"font-size":o.size=e[1];break;case"font-weight":o.weight=e[1];break;case"font-style":o.style=e[1];break;case"color":case"stroke":a=_e(e[1])}}))}))}r.labelContentProps=d(d({},L({x:Number.parseFloat(e.labelContent.x),y:Number.parseFloat(e.labelContent.y)},r)),{},{content:e.labelContent.label,font:o,color:a,strokeWidth:Qe})}if("labelLine"in e){var s=e.labelLine,u=structuredClone(l.stroke),c=l.strokeWidth,f=s.classes;if(void 0!==f){if(!Array.isArray(f))throw'Label-line "classes" variable should be an array.';f.forEach((function(e){var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke":case"color":u=_e(e[1]);break;case"stroke-width":c=Number.parseFloat(e[1])}}))}))}var p=[];if("points"in s)p=No(s.points,'label-line "points"');else{if(!("x1"in s&&"y1"in s&&"x2"in s&&"y2"in s))throw'Input label-line elements should have a "points" variable.';var h=Number.parseFloat(s.x1);if(Number.isNaN(h))throw'"x1" variable should be a number.';var v=Number.parseFloat(s.y1);if(Number.isNaN(v))throw'"y1" variable should be a number.';var m=Number.parseFloat(s.x2);if(Number.isNaN(m))throw'"x2" variable should be a number.';var x=Number.parseFloat(s.y2);if(Number.isNaN(x))throw'"y2" variable should be a number.';p.push({x:h,y:v},{x:m,y:x})}r.labelLineProps={points:p.map((function(e){return L(e,r)})),color:u,strokeWidth:c}}}));var u={strokeWidth:Qe,stroke:void 0},c=e.classesForBasePairs;if(void 0!==c){if(!Array.isArray(c))throw'RNA-molecule "classesForBasePairs" variable should be an array.';c.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":u.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":u.stroke=_e(e[1])}}))}))}if("basePairs"in e){var f=e.basePairs;if(!Array.isArray(f))throw"The basePairs property of each input RNA molecule should be an array.";for(var p=0,h=e.basePairs;p<h.length;p++)Io(h[p],null!==n&&void 0!==n?n:[],r,u.stroke,u.strokeWidth,i,i)}return t})),"basePairs"in e){var o=e.basePairs;if(!Array.isArray(o))throw"The basePairs property of each input RNA complex should be an array.";var a,i=m(e.basePairs);try{var l=function(){var t,o=a.value,i={strokeWidth:Qe,stroke:void 0},l=e.classesForBasePairs;if(void 0!==l){if(!Array.isArray(l))throw'RNA-molecule "classesForBasePairs" variable should be an array.';l.forEach((function(e){if("string"!==typeof e)throw'"classForBasePair" should be a string.';var t=n.find((function(n){return n.name===e}));void 0!==t&&Object.entries(t).forEach((function(e){switch(e[0]){case"stroke-width":i.strokeWidth=Number.parseFloat(e[1]);break;case"stroke":case"color":i.stroke=_e(e[1])}}))}))}Io(o,null!==(t=e.classesForBasePairs)&&void 0!==t?t:[],r,i.stroke,i.strokeWidth)};for(i.s();!(a=i.n()).done;)l()}catch(s){i.e(s)}finally{i.f()}}return r})),complexDocumentName:"Unknown"}}(JSON.parse(e))}))),Ro=(u(Ao={},ko.xrna,!1),u(Ao,ko.xml,!1),u(Ao,ko.json,!0),u(Ao,ko.str,!1),u(Ao,ko.svg,!1),Ao);function _o(e){if(0===e.length)return 0;var n=v(e).sort((function(e,n){return e-n})),t=Math.floor(n.length/2);return n.length%2===0?(n[t-1]+n[t])/2:n[t]}function jo(e,n){if(e>n){var t=e;e=n,n=t}var r=Yn.typeRecord,o=void 0;return e in r&&(o=r[e][n]),void 0===o?Yn.Type.MISMATCH:o}var Oo,Lo=t.p+"static/media/loading.b29632a55bfb1d07d50fd6492383786b.svg";function Do(e,n,t,r,o,a,i,l){var s=e.rnaMoleculeProps[n],u=e.rnaMoleculeProps[t];if(s&&u)for(var c=l[Hn.CANONICAL_BASE_PAIR_DISTANCE],d=l[Hn.WOBBLE_BASE_PAIR_DISTANCE],f=l[Hn.MISMATCH_BASE_PAIR_DISTANCE],p=l[Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],h=0;h<a;h++){var v=r+h,m=o-h;if(!(v in s.nucleotideProps)||!(m in u.nucleotideProps))break;var x=s.nucleotideProps[v],g=u.nucleotideProps[m],y=i;if(x.symbol&&g.symbol)try{y=et(x.symbol,g.symbol)}catch(D){y=Yn.Type.MISMATCH}var b=c;if(y===Yn.Type.WOBBLE?b=d:y===Yn.Type.MISMATCH&&(b=f),0===h){var N={x:(x.x+g.x)/2,y:(x.y+g.y)/2},I=L(g,x);if(V(I)>0){var C=W(I),S=b/2;x.x=N.x-C.x*S,x.y=N.y-C.y*S,g.x=N.x+C.x*S,g.y=N.y+C.y*S}}else{var E=r+h-1,w=o-h+1;if(E in s.nucleotideProps&&w in u.nucleotideProps){var A=s.nucleotideProps[E],k=u.nucleotideProps[w],P={x:(A.x+k.x)/2,y:(A.y+k.y)/2},T=L({x:(x.x+g.x)/2,y:(x.y+g.y)/2},P);if(V(T)>0){var M=O(P,F(W(T),p)),R=L(g,x);if(V(R)>0){var _=W(R),j=b/2;x.x=M.x-_.x*j,x.y=M.y-_.y*j,g.x=M.x+_.x*j,g.y=M.y+_.y*j}}}}}}function Fo(e,n){if(null==e)return{};var t,r,o=bt(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}!function(n){var t,r;!function(n){function t(n){var t=n.singularNucleotideProps.labelContentProps,r=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),o=y((0,e.useState)(t.x),2),a=o[0],i=o[1],l=y((0,e.useState)(t.y),2),s=l[0],u=l[1],c=y((0,e.useState)(t.content),2),d=c[0],f=c[1];return(0,e.useEffect)((function(){i(t.x),u(t.y),f(t.content)}),[r]),(0,Gn.jsxs)(ot.Component,{title:"Content",children:[(0,Gn.jsxs)("label",{children:["x:\xa0",(0,Gn.jsx)(it.Number,{value:a,setValue:function(e){i(e),n.rerender(e,s,d)}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["y:\xa0",(0,Gn.jsx)(it.Number,{value:s,setValue:function(e){u(e),n.rerender(a,e,d)}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["content:\xa0",(0,Gn.jsx)("input",{type:"text",value:d,onChange:function(e){var t=e.target.value;f(t),n.rerender(a,s,t)}})]})]})}function r(n){var t=n.singularNucleotideProps.labelLineProps.points,r=(0,e.useContext)(zr.OrientationEditor.ResetDataTrigger),o=y((0,e.useState)(0),2),a=o[0],i=o[1],l=y((0,e.useState)(0),2),s=l[0],u=l[1],c=y((0,e.useState)(0),2),f=c[0],p=c[1],h=y((0,e.useState)(void 0),2),v=h[0],m=h[1];function x(){var e=t[0];m({initialCenter:{x:0,y:0},positions:t,onUpdatePositions:function(){n.rerender(g.x,g.y,a),u(g.x),p(g.y)},normal:G(e),initialAngle:$(e),initialScale:V(e)})}var g=(0,e.useMemo)((function(){return t[a]}),[a,t]);return(0,e.useEffect)((function(){u(g.x),p(g.y)}),[g]),(0,e.useEffect)((function(){u(g.x),p(g.y),x()}),[r]),(0,Gn.jsxs)(ot.Component,{title:"Line Positions",children:[(0,Gn.jsxs)(ot.Component,{title:"Single position",children:[(0,Gn.jsxs)("label",{children:["Edit position #\xa0",(0,Gn.jsx)(it.Integer,{value:a+1,setValue:function(e){var n=e-1,r=t[n];i(n),u(r.x),p(r.y)},min:1,max:t.length})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["x:\xa0",(0,Gn.jsx)(it.Number,{value:s,setValue:function(e){u(e),g.x=e,n.rerender(e,f,a),x()}})]}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)("label",{children:["y:\xa0",(0,Gn.jsx)(it.Number,{value:f,setValue:function(e){p(e),g.y=e,n.rerender(s,e,a),x()}})]})]}),v&&(0,Gn.jsx)(ct.Component,d({},v))]})}n.Component=function(e){var n=e.singularNucleotideWithLabelContentProps,o=e.singularNucleotideWithLabelLineProps,a=e.rerender;return(0,Gn.jsxs)(Gn.Fragment,{children:[void 0!==n&&(0,Gn.jsx)(t,{singularNucleotideProps:n,rerender:function(e){function n(n,t,r){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e,t,r){n.labelContentProps=d(d({},n.labelContentProps),{},{x:e,y:t,content:r}),a()}))}),void 0!==o&&(0,Gn.jsx)(r,{singularNucleotideProps:o,rerender:function(e){function n(n,t,r){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e,n,t){var r=o.labelLineProps.points,i=r[t];i.x=e,i.y=n,o.labelLineProps=d(d({},o.labelLineProps),{},{points:v(r)}),a()}))})]})}}(t||(t={})),(r||(r={})).Component=function(n){var t=n.rerender,r=n.labelContentProps,o=n.labelLineProps,a=(0,e.useContext)(zr.App.Settings)[Hn.USE_DEGREES],i=(0,e.useMemo)((function(){var e=new Array;e.push.apply(e,v(r));var n,t=m(o);try{for(t.s();!(n=t.n()).done;){var a=n.value.points;e.push.apply(e,v(a))}}catch(i){t.e(i)}finally{t.f()}return{initialCenter:{x:0,y:0},positions:[],normal:{x:1,y:0},relativePositions:e}}),[r,o]),l=i.initialCenter,s=i.positions,u=i.normal,c=i.relativePositions;return(0,Gn.jsx)(ot.Component,{title:"Positions",children:(0,Gn.jsx)(ut.Component,{initialCenter:l,positions:s,onUpdatePositions:function(){var e=c[0];r[0].x=e.x,r[0].y=e.y,t()},normal:u,relativePositions:c,useDegreesFlag:a,applyCenterToRelativePositionsFlag:!0})})},n.Component=function(n){var o=n.rnaComplexProps,a=n.indicesOfAffectedNucleotides,i=n.setNucleotideKeysToRerender,l=(0,e.useMemo)((function(){for(var e,n,i=new Array,l=new Array,s={},u=0,c=Object.entries(a);u<c.length;u++){var f=y(c[u],2),p=f[0],h=f[1],x=Number.parseInt(p),g=o[x].rnaMoleculeProps;x in s||(s[x]={});for(var b=s[x],N=0,I=Object.entries(h);N<I.length;N++){var C=y(I[N],2),S=C[0],E=C[1],w=g[S].nucleotideProps;S in b||(b[S]=[]);var k,T=b[S],M=m(E.values());try{for(M.s();!(k=M.n()).done;){var R=k.value,_=w[R],j=_.labelContentProps,O=_.labelLineProps,L=!1;void 0!==j&&(i.push(_),L=!0),void 0!==O&&(l.push(_),L=!0),L&&T.push(R)}}catch(ne){M.e(ne)}finally{M.f()}T.sort(P)}}var D=void 0;if(i.length>0){var F;D=null!==(F=i[0].labelContentProps.font)&&void 0!==F?F:qe.DEFAULT;for(var B=1;B<i.length;B++){var W=i[B].labelContentProps.font;if(!qe.areEqual(D,null!==W&&void 0!==W?W:qe.DEFAULT)){D=void 0;break}}}var z=void 0;if(i.length>0){var U;z=null!==(U=i[0].labelContentProps.color)&&void 0!==U?U:we;for(var G=1;G<i.length;G++){var H=i[G].labelContentProps.color;if(!je(z,null!==H&&void 0!==H?H:we)){z=void 0;break}}if(void 0!==z)for(var K=1;K<l.length;K++){var V=l[K].labelLineProps.color;if(!je(z,null!==V&&void 0!==V?V:we)){z=void 0;break}}}else{var q;z=null!==(q=l[0].labelLineProps.color)&&void 0!==q?q:we;for(var Q=1;Q<l.length;Q++){var X=l[Q].labelLineProps.color;if(!je(z,null!==X&&void 0!==X?X:we)){z=void 0;break}}}var Y,$=i.length,Z=l.length;switch(Math.max($,Z)){case 0:Y=(0,Gn.jsx)(Gn.Fragment,{});break;case 1:Y=(0,Gn.jsx)(t.Component,{rerender:A,singularNucleotideWithLabelContentProps:i[0],singularNucleotideWithLabelLineProps:l[0]});break;default:var J=i.map((function(e){return e.labelContentProps})),ee=l.map((function(e){return e.labelLineProps.points}));Y=(0,Gn.jsx)(r.Component,{rerender:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){for(var e=0;e<i.length;e++){var n=i[e],t=J[e];n.labelContentProps=d(d({},n.labelContentProps),{},{x:t.x,y:t.y})}for(var r=0;r<l.length;r++){var o=l[r];ee[r];o.labelLineProps=d(d({},o.labelLineProps),{},{points:v(ee[r])})}A()})),labelContentProps:i.map((function(e){return e.labelContentProps})),labelLineProps:l.map((function(e){return e.labelLineProps}))})}return{nucleotidePropsWithLabelContentProps:i,nucleotidePropsWithLabelLineProps:l,nucleotideKeysToRerender:s,initialColor:null!==(e=z)&&void 0!==e?e:structuredClone(we),initialFont:null!==(n=D)&&void 0!==n?n:structuredClone(qe.DEFAULT),positionsEditor:Y}}),[a]),s=l.nucleotidePropsWithLabelContentProps,u=l.nucleotidePropsWithLabelLineProps,c=l.nucleotideKeysToRerender,f=l.initialColor,p=l.initialFont,h=l.positionsEditor,x=y((0,e.useState)(!0),2),g=x[0],b=x[1],N=y((0,e.useState)(!0),2),I=N[0],C=N[1],S=y((0,e.useState)(p),2),E=S[0],w=S[1];function A(){i(structuredClone(c))}return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("b",{children:"Edit label(s) per constraint:"}),(0,Gn.jsx)("br",{}),(0,Gn.jsxs)(or.Component,{color:f,setColorHelper:function(e){if(g){var n,t=m(s);try{for(t.s();!(n=t.n()).done;){var r=n.value;r.labelContentProps=d(d({},r.labelContentProps),{},{color:e})}}catch(l){t.e(l)}finally{t.f()}}if(I){var o,a=m(u);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.labelLineProps=d(d({},i.labelLineProps),{},{color:e})}}catch(l){a.e(l)}finally{a.f()}}A()},children:[(0,Gn.jsx)("b",{children:"Recolor:"}),(0,Gn.jsxs)("ul",{style:{margin:0},children:[(0,Gn.jsx)("li",{children:(0,Gn.jsxs)("label",{children:["Text\xa0",(0,Gn.jsx)("input",{type:"checkbox",checked:g,onChange:function(){b(!g)}})]})}),(0,Gn.jsx)("li",{children:(0,Gn.jsxs)("label",{children:["Lines\xa0",(0,Gn.jsx)("input",{type:"checkbox",checked:I,onChange:function(){C(!I)}})]})})]})]}),(0,Gn.jsx)(ar.Component,d(d({},E),{},{setFont:function(e){var n,t=m(s);try{for(t.s();!(n=t.n()).done;){var r=n.value;r.labelContentProps=d(d({},r.labelContentProps),{},{font:e})}}catch(o){t.e(o)}finally{t.f()}w(structuredClone(e)),A()}})),h]})}}(Oo||(Oo={}));var Bo=function(e){var n=function(e){return e.replace(/^([A-Z])|[\s-_]+(\w)/g,(function(e,n,t){return t?t.toUpperCase():n.toLowerCase()}))}(e);return n.charAt(0).toUpperCase()+n.slice(1)},Wo=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((function(e,n,t){return Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n})).join(" ").trim()},zo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Uo=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Go=(0,e.forwardRef)((function(n,t){var r=n.color,o=void 0===r?"currentColor":r,a=n.size,i=void 0===a?24:a,l=n.strokeWidth,s=void 0===l?2:l,u=n.absoluteStrokeWidth,c=n.className,f=void 0===c?"":c,p=n.children,h=n.iconNode,m=Fo(n,Uo);return(0,e.createElement)("svg",d(d(d({ref:t},zo),{},{width:i,height:i,stroke:o,strokeWidth:u?24*Number(s)/Number(i):s,className:Wo("lucide",f)},!p&&!function(e){for(var n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0}(m)&&{"aria-hidden":"true"}),m),[].concat(v(h.map((function(n){var t=y(n,2),r=t[0],o=t[1];return(0,e.createElement)(r,o)}))),v(Array.isArray(p)?p:[p])))})),Ho=["className"],Ko=function(n,t){var r=(0,e.forwardRef)((function(r,o){var a,i=r.className,l=Fo(r,Ho);return(0,e.createElement)(Go,d({ref:o,iconNode:t,className:Wo("lucide-".concat((a=Bo(n),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(n),i)},l))}));return r.displayName=Bo(n),r},Vo=Ko("pencil-ruler",[["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),qo=function(e){var n=e.width,t=void 0===n?gi:n,r=e.children,o=gt().theme;return(0,Gn.jsxs)("div",{style:{width:"number"===typeof t?"".concat(t,"px"):t,height:"100%",display:"flex",flexDirection:"column",background:o.colors.background,borderRight:"2px solid ".concat(o.colors.border),boxShadow:o.shadows.xl,position:"relative",overflow:"hidden",transition:o.transitions.default,zIndex:1e3},children:[(0,Gn.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.primary,", ").concat(o.colors.accent,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,Gn.jsx)("div",{style:{padding:"7px 10px 7px 20px",borderBottom:"1px solid ".concat(o.colors.borderLight),background:o.colors.surface,flexShrink:0},children:(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Gn.jsx)(Vo,{size:24}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("h1",{style:{fontSize:o.typography.fontSize.xl,fontWeight:"700",color:o.colors.text,margin:"0 0 2px 0"},children:"Exornata"}),(0,Gn.jsx)("p",{style:{fontSize:o.typography.fontSize.md,fontWeight:"500",color:o.colors.textSecondary,margin:0},children:"Visualize, Edit, Share"})]})]})}),(0,Gn.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"6px",overflow:"auto",background:o.colors.backgroundSecondary},children:r}),(0,Gn.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(o.colors.borderLight,", ").concat(o.colors.border,")"),position:"absolute",bottom:0,left:0,right:0,zIndex:10}})]})},Qo=function(e){var n=e.title,t=e.children,r=e.borderRadius,o=void 0===r?12:r,a=gt().theme;return(0,Gn.jsxs)("div",{style:{background:a.colors.surface,border:"1px solid ".concat(a.colors.border),borderRadius:o,margin:"0 0 10px 0",boxShadow:a.shadows.sm,transition:a.transitions.default,overflow:"hidden"},children:[(0,Gn.jsx)("div",{style:{padding:"8px 16px",background:a.colors.surfaceHover,fontSize:a.typography.fontSize.sm,fontWeight:"700",letterSpacing:"0.5px",color:a.colors.text,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(a.colors.border),textTransform:"uppercase"},children:(0,Gn.jsx)("span",{style:{fontSize:a.typography.fontSize.xs,fontWeight:"700",color:a.colors.textSecondary},children:n})}),(0,Gn.jsx)("div",{style:{padding:"16px",minHeight:"48px",background:a.colors.surface},children:t})]})},Xo=function(e){var n=e.hint,t=e.position,r=e.theme,o=document.body;return(0,oe.createPortal)((0,Gn.jsx)("div",{style:{position:"fixed",left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),transform:"translate(-30%, -20%)",padding:"6px 10px",borderRadius:"6px",background:r.colors.surface,color:r.colors.text,fontSize:r.typography.fontSize.md,fontWeight:600,whiteSpace:"nowrap",zIndex:1e3,boxShadow:r.shadows.md,animation:"fadeIn 0.2s ease-out",pointerEvents:"none"},children:n}),o)},Yo=e.forwardRef((function(n,t){var r=n.onClick,o=n.icon,a=n.label,i=n.description,l=n.hint,s=n.disabled,u=void 0!==s&&s,c=n.variant,f=void 0===c?"secondary":c,p=gt().theme,h=y(e.useState(!1),2),v=h[0],m=h[1],x=y(e.useState(!1),2),g=x[0],b=x[1],N=e.useRef(null),I=y(e.useState({top:0,left:0}),2),C=I[0],S=I[1],E=function(){switch(f){case"primary":return{background:u?p.colors.surfaceHover:g?p.colors.primaryActive:v?p.colors.primaryHover:p.colors.primary,color:p.colors.textInverse,border:"1px solid ".concat(p.colors.primary)};case"accent":return{background:u?p.colors.surfaceHover:g?p.colors.accent:v?p.colors.accentHover:"transparent",color:u?p.colors.textMuted:v?p.colors.accent:p.colors.textSecondary,border:"1px solid ".concat(v?p.colors.accent:p.colors.border)};case"danger":return{background:u?p.colors.surfaceHover:g?p.colors.error:v?p.colors.error+"20":"transparent",color:u?p.colors.textMuted:v?p.colors.error:p.colors.text,border:"1px solid ".concat(v?p.colors.error:p.colors.border)};case"simpleHighlight":return{background:"transparent",color:u?p.colors.textMuted:p.colors.text,border:"2px solid ".concat(p.colors.primary)};default:return{background:u||g||v?p.colors.surfaceHover:"transparent",color:u?p.colors.textMuted:p.colors.text,border:"1px solid ".concat(p.colors.border)}}}();return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsxs)("button",{ref:t||N,onClick:r,disabled:u,onMouseEnter:function(){if(N.current&&l&&!u){var e=N.current.getBoundingClientRect();S({top:e.top+e.height+10,left:e.right+10})}m(!0)},onMouseLeave:function(){return m(!1)},onMouseDown:function(){return b(!0)},onMouseUp:function(){return b(!1)},style:d(d({position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"6px",height:p.buttonSizes.md.height,padding:p.buttonSizes.md.padding,borderRadius:p.buttonSizes.md.borderRadius,fontSize:p.buttonSizes.md.fontSize,fontWeight:"600",cursor:u?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:u?.4:1,flex:1,minWidth:"0"},E),{},{boxShadow:u?"none":g||v?p.shadows.sm:"none",transform:u?"none":g?"scale(0.95)":v?"translateY(-1px)":"translateY(0)"}),children:[(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:p.buttonSizes.md.iconSize,opacity:u?.5:1},children:o&&o}),(0,Gn.jsxs)("div",{style:{textAlign:"center",opacity:v?1:.9},children:[(0,Gn.jsx)("div",{style:{fontSize:p.typography.fontSize.sm,fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",maxWidth:"120px",opacity:v?1:.9},children:a}),i&&(0,Gn.jsx)("div",{style:{fontSize:p.typography.fontSize.xs,color:u?p.colors.textMuted:"primary"===f?p.colors.textInverse+"80":p.colors.textMuted,lineHeight:"1.2",maxWidth:"120px",opacity:v?1:.9},children:i})]})]}),v&&l&&!u&&(0,Gn.jsx)(Xo,{hint:l,position:C,theme:p})]})})),$o={Primitives:[Wr.Enum.SINGLE_NUCLEOTIDE,Wr.Enum.SINGLE_BASE_PAIR],Fragments:[Wr.Enum.RNA_SINGLE_STRAND,Wr.Enum.RNA_HELIX,Wr.Enum.RNA_STACKED_HELIX,Wr.Enum.RNA_CYCLE],Units:[Wr.Enum.RNA_SUB_DOMAIN,Wr.Enum.RNA_MOLECULE,Wr.Enum.RNA_COMPLEX],Scope:[Wr.Enum.SINGLE_COLOR,Wr.Enum.ENTIRE_SCENE]},Zo=function(n){var t=n.constraint,r=n.isActive,o=n.onClick,a=n.disabled,i=void 0!==a&&a,l=gt().theme,s=y(e.useState(!1),2);s[0],s[1];return(0,Gn.jsx)(Yo,{label:function(e){var n;return(u(n={},Wr.Enum.SINGLE_NUCLEOTIDE,"Nucleotide"),u(n,Wr.Enum.SINGLE_BASE_PAIR,"Base Pair"),u(n,Wr.Enum.RNA_SINGLE_STRAND,"Strand"),u(n,Wr.Enum.RNA_HELIX,"Helix"),u(n,Wr.Enum.RNA_STACKED_HELIX,"Stacked"),u(n,Wr.Enum.RNA_SUB_DOMAIN,"Domain"),u(n,Wr.Enum.RNA_CYCLE,"Cycle"),u(n,Wr.Enum.RNA_MOLECULE,"Molecule"),u(n,Wr.Enum.RNA_COMPLEX,"Complex"),u(n,Wr.Enum.SINGLE_COLOR,"Color"),u(n,Wr.Enum.ENTIRE_SCENE,"Scene"),n)[e]||e}(t),onClick:o,disabled:i,variant:r?"simpleHighlight":"secondary",icon:function(e){var n,t=l.colors.primary;return(u(n={},Wr.Enum.SINGLE_NUCLEOTIDE,(0,Gn.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:t,stroke:"none",strokeWidth:"1"}),(0,Gn.jsx)("text",{x:"12",y:"12",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:l.colors.textInverse,textAnchor:"middle",dominantBaseline:"central",children:"N"})]})),u(n,Wr.Enum.SINGLE_BASE_PAIR,(0,Gn.jsxs)("svg",{width:"48",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("circle",{cx:"0",cy:"12",r:"9",fill:t,stroke:"none",strokeWidth:"1"}),(0,Gn.jsx)("text",{x:"0",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:l.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"C"}),(0,Gn.jsx)("line",{x1:"9.5",y1:"12",x2:"20",y2:"12",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("circle",{cx:"25",cy:"12",r:"9",fill:t,stroke:"none",strokeWidth:"1"}),(0,Gn.jsx)("text",{x:"25",y:"13",fontFamily:"Arial, sans-serif",fontSize:"12",fontWeight:"bold",fill:l.colors.textInverse,textAnchor:"middle",dominantBaseline:"middle",children:"G"})]})),u(n,Wr.Enum.RNA_SINGLE_STRAND,(0,Gn.jsxs)("svg",{width:"28",height:"24",viewBox:"0 0 64 48",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("circle",{cx:"10",cy:"28",r:"9",fill:t,stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("path",{d:"M 18 26 Q 26 18 32 20",stroke:l.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,Gn.jsx)("circle",{cx:"32",cy:"20",r:"9",fill:t,stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("path",{d:"M 40 22 Q 46 26 54 28",stroke:l.colors.borderDark,strokeWidth:"1.5",fill:"none"}),(0,Gn.jsx)("circle",{cx:"54",cy:"28",r:"9",fill:t,stroke:l.colors.borderDark,strokeWidth:"1"})]})),u(n,Wr.Enum.RNA_HELIX,(0,Gn.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("path",{d:"M 6 4 Q 4 8 6 12 Q 8 16 6 20",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 18 4 Q 20 8 18 12 Q 16 16 18 20",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"6",y1:"7",x2:"18",y2:"7",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("line",{x1:"6",y1:"17",x2:"18",y2:"17",stroke:l.colors.borderDark,strokeWidth:"1.5"})]})),u(n,Wr.Enum.RNA_STACKED_HELIX,(0,Gn.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("path",{d:"M 6 3 Q 4 5 6 7",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 18 3 Q 20 5 18 7",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"6",y1:"5",x2:"18",y2:"5",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("path",{d:"M 6 10 Q 4 12 6 14",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 18 10 Q 20 12 18 14",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("path",{d:"M 6 17 Q 4 19 6 21",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 18 17 Q 20 19 18 21",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"6",y1:"19",x2:"18",y2:"19",stroke:l.colors.borderDark,strokeWidth:"1.5"})]})),u(n,Wr.Enum.RNA_SUB_DOMAIN,(0,Gn.jsxs)("svg",{width:"32",height:"24",viewBox:"0 0 28 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("path",{d:"M 12 22 L 12 8",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 16 22 L 16 8",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"12",y1:"20",x2:"16",y2:"20",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("line",{x1:"12",y1:"17",x2:"16",y2:"17",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("line",{x1:"12",y1:"14",x2:"16",y2:"14",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("line",{x1:"12",y1:"11",x2:"16",y2:"11",stroke:l.colors.borderDark,strokeWidth:"1.5"}),(0,Gn.jsx)("path",{d:"M 12 8 A 2 2 0 0 1 16 8",stroke:t,strokeWidth:"2.5",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 12 15 L 6 15 L 6 12",stroke:t,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 12 13 L 8 13 L 8 12",stroke:t,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"6",y1:"14",x2:"8",y2:"14",stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("line",{x1:"6",y1:"13",x2:"8",y2:"13",stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("path",{d:"M 6 12 A 1 1 0 0 0 8 12",stroke:t,strokeWidth:"2",fill:"none"}),(0,Gn.jsx)("path",{d:"M 16 15 L 22 15 L 22 12",stroke:t,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("path",{d:"M 16 13 L 20 13 L 20 12",stroke:t,strokeWidth:"2",fill:"none",strokeLinecap:"round"}),(0,Gn.jsx)("line",{x1:"20",y1:"14",x2:"22",y2:"14",stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("line",{x1:"20",y1:"13",x2:"22",y2:"13",stroke:l.colors.borderDark,strokeWidth:"1"}),(0,Gn.jsx)("path",{d:"M 20 12 A 1 1 0 0 1 22 12",stroke:t,strokeWidth:"2",fill:"none"})]})),u(n,Wr.Enum.RNA_CYCLE,(0,Gn.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,Gn.jsx)("circle",{cx:"12",cy:"12",r:"6",stroke:t,strokeWidth:"2",fill:"none"}),(0,Gn.jsx)("circle",{cx:"12",cy:"12",r:"7",stroke:l.colors.borderDark,strokeWidth:"0.5",fill:"none"}),(0,Gn.jsx)("circle",{cx:"12",cy:"12",r:"5",stroke:l.colors.borderDark,strokeWidth:"0.5",fill:"none"})]})),u(n,Wr.Enum.SINGLE_COLOR,(0,Gn.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Gn.jsxs)("g",{transform:"translate(12 12) scale(1.3) translate(-12 -12)",children:[(0,Gn.jsx)("path",{d:"M 12 4 Q 6 4 4 8 Q 2 12 4 16 Q 6 20 12 20 Q 14 20 16 19 L 18 16 Q 20 14 18 12 Q 16 10 14 11 Q 12 12 12 10 Q 12 6 12 4 Z",fill:t,stroke:"none",strokeWidth:"1.5"}),(0,Gn.jsx)("circle",{cx:"8",cy:"9.5",r:"2",fill:l.colorPalleteCircleFills[0],stroke:"none",strokeWidth:"0.8"}),(0,Gn.jsx)("circle",{cx:"10",cy:"14",r:"2",fill:l.colorPalleteCircleFills[1],stroke:"none",strokeWidth:"0.8"}),(0,Gn.jsx)("circle",{cx:"14.5",cy:"15",r:"2",fill:l.colorPalleteCircleFills[2],stroke:"none",strokeWidth:"0.8"})]})})),u(n,Wr.Enum.RNA_MOLECULE,(0,Gn.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Gn.jsx)("path",{d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:t,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})),u(n,Wr.Enum.RNA_COMPLEX,(0,Gn.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Gn.jsxs)("g",{transform:"translate(0, 2.5) scale(0.8)",children:[(0,Gn.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:t,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Gn.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:l.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})),u(n,Wr.Enum.ENTIRE_SCENE,(0,Gn.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,Gn.jsx)("rect",{x:"1",y:"1",width:"22",height:"22",stroke:l.colors.text,strokeWidth:"1",fill:"none",rx:"1"}),(0,Gn.jsx)("path",{transform:"scale(0.5)",d:"M 4 20 \r Q 3 16 5 12 \r Q 7 8 12 6 \r Q 17 8 19 12 \r Q 21 16 20 20 \r Q 18 18 16 16 \r Q 14 14 12 14 \r Q 10 14 8 16 \r Q 6 18 4 20 Z",stroke:"none",fill:t,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Gn.jsxs)("g",{transform:"translate(16, 7) scale(0.5) translate(0, 3.5) rotate(45)",children:[(0,Gn.jsx)("path",{d:"M 4 12 \r Q 3 8 5 4 \r Q 7 0 12 -2 \r Q 17 0 19 4 \r Q 21 8 20 12 \r Q 18 10 16 8 \r Q 14 6 12 6 \r Q 10 6 8 8 \r Q 6 10 4 12 Z",stroke:"none",fill:t,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Gn.jsx)("path",{d:"M 4 12\r Q 6 10 8 8\r Q 10 6 12 6\r Q 14 6 16 8\r Q 18 10 20 12\r Q 21 16 19 20\r Q 17 24 12 26\r Q 7 24 5 20\r Q 3 16 4 12 Z",stroke:"none",fill:l.colors.accent,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]})),n)[e]||(0,Gn.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,Gn.jsx)("circle",{cx:"6",cy:"6",r:"2",stroke:"currentColor",strokeWidth:"1.2",fill:"none"})})}(t)})},Jo=function(n){var t,r=n.constraint,o=n.onConstraintChange,a=gt().theme,i=y(e.useState("Primitives"),2),l=i[0],s=i[1];return(0,Gn.jsx)(Qo,{title:"Constraints modes",borderRadius:8,children:(0,Gn.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("div",{style:{display:"flex",gap:"4px",marginBottom:"4px",borderBottom:"1px solid ".concat(a.colors.border)},children:Object.keys($o).map((function(e){return(0,Gn.jsx)("button",{onClick:function(){return s(e)},style:{height:a.buttonSizes.md.height,padding:a.buttonSizes.md.padding,border:"none",background:l===e?a.colors.primary:"transparent",color:l===e?a.colors.textInverse:a.colors.text,borderRadius:"".concat(a.borderRadius.md," ").concat(a.borderRadius.md," 0 0"),fontSize:a.buttonSizes.sm.fontSize,fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"1px"},children:e},e)}))}),(0,Gn.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",minHeight:"30px",alignItems:"flex-start",alignContent:"flex-start"},children:null===(t=$o[l])||void 0===t?void 0:t.map((function(e){return(0,Gn.jsx)(Zo,{constraint:e,isActive:r===e,onClick:function(){return null===o||void 0===o?void 0:o(e)},disabled:!o},e)}))})]})})})},ea=Ko("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),na=Ko("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]),ta=Ko("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ra=Ko("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),oa=function(e){var n=e.onUndo,t=e.onRedo,r=e.canUndo,o=e.canRedo,a=(e.onResetViewport,e.undoStack,e.redoStack,e.onJumpToHistory,e.onResetToLastCheckpoint),i=(e.mode,e.constraint,e.onFreezeSelected,e.onUnfreezeSelected,e.onUnfreezeAll),l=e.hasFrozenNucleotides,s=void 0!==l&&l,u=(e.hasSelectedNucleotides,gt().theme);return(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",gap:"6px"},children:[(0,Gn.jsx)(Yo,{onClick:n,disabled:!r,icon:(0,Gn.jsx)(ea,{size:14}),label:"Undo",hint:"Undo last action",variant:"secondary"}),(0,Gn.jsx)(Yo,{onClick:t,disabled:!o,icon:(0,Gn.jsx)(na,{size:14}),label:"Redo",hint:"Redo last action",variant:"secondary"}),(0,Gn.jsx)(Yo,{onClick:a,disabled:!a,icon:(0,Gn.jsx)(ta,{size:14}),label:"Restore",hint:"Restore to last checkpoint",variant:"danger"}),(0,Gn.jsx)(Yo,{onClick:i,disabled:!i||!s,icon:(0,Gn.jsx)(ra,{size:14}),label:"Unlock",hint:"Unlock all nucleotides (allows movement)",variant:"danger"})]}),(0,Gn.jsxs)("div",{style:{fontSize:"12px",color:u.colors.textSecondary,marginTop:"8px",lineHeight:"1.4"},children:[(0,Gn.jsx)("strong",{children:"Tip:"})," Use Middle-click to toggle (lock/unlock) nucleotides in place while moving others."]})]})},aa=Ko("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),ia=Ko("cable",[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]]),la=Ko("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),sa=Ko("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ua=function(n){var t=n.tab,r=n.isActive,o=n.onClick,a=n.disabled,i=void 0!==a&&a,l=gt().theme,s=y(e.useState(!1),2),u=s[0],c=s[1];return(0,Gn.jsxs)("button",{onClick:o,disabled:i,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"6px",height:l.buttonSizes.sm.height,padding:l.buttonSizes.sm.padding,border:"none",borderRadius:l.buttonSizes.sm.borderRadius,fontSize:l.buttonSizes.sm.fontSize,fontWeight:"600",cursor:i?"not-allowed":"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",opacity:i?.4:1,flex:1,background:i?l.colors.surfaceHover:r?l.colors.primary:u?l.colors.surfaceHover:"transparent",color:i?l.colors.textMuted:r?l.colors.textInverse:u?l.colors.primary:l.colors.textSecondary,boxShadow:r?l.shadows.md:"none",transform:r?"scale(1.02)":"scale(1)"},children:[function(e){switch(e){case b.EDIT:return(0,Gn.jsx)(aa,{size:12});case b.FORMAT:return(0,Gn.jsx)(ia,{size:12});case b.ANNOTATE:return(0,Gn.jsx)(la,{size:12});default:return(0,Gn.jsx)(sa,{size:12})}}(t),(0,Gn.jsx)("span",{style:{fontSize:l.typography.fontSize.sm,fontWeight:"600",textAlign:"center"},children:function(e){switch(e){case b.EDIT:return"Edit";case b.FORMAT:return"Format";case b.ANNOTATE:return"Annotate";default:return e}}(t)})]})},ca=function(e){var n=e.mode,t=e.onModeChange,r=e.onUndo,o=e.onRedo,a=e.canUndo,i=e.canRedo,l=e.onResetViewport,s=e.undoStack,u=e.redoStack,c=e.onJumpToHistory,d=e.onResetToLastCheckpoint,f=e.constraint,p=e.onFormatModeClick,h=e.onFreezeSelected,v=e.onUnfreezeSelected,m=e.onUnfreezeAll,x=e.hasFrozenNucleotides,g=e.hasSelectedNucleotides,y=gt().theme;return(0,Gn.jsx)(Qo,{title:"drawing tools",borderRadius:8,children:(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,Gn.jsx)("div",{children:(0,Gn.jsx)("div",{style:{display:"flex",gap:"6px",background:y.colors.surfaceHover,padding:"4px",borderRadius:y.borderRadius.lg},children:N.filter((function(e){return[b.EDIT,b.FORMAT,b.ANNOTATE].includes(e)})).map((function(e){return(0,Gn.jsx)(ua,{tab:e,isActive:n===e,onClick:function(){e===b.FORMAT&&p?p():t&&t(e)}},e)}))})}),(0,Gn.jsx)(oa,{onUndo:r,onRedo:o,canUndo:a,canRedo:i,onResetViewport:l,undoStack:s,redoStack:u,onJumpToHistory:c,onResetToLastCheckpoint:d,mode:n,constraint:f,onFreezeSelected:h,onUnfreezeSelected:v,onUnfreezeAll:m,hasFrozenNucleotides:x,hasSelectedNucleotides:g})]})})},da=Ko("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),fa=Ko("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),pa=Ko("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ha=Ko("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),va=function(e){e.onToggleBasePairEditor,e.onTogglePropertiesDrawer;var n=e.onToggleSettingsDrawer,t=e.onToggleAboutDrawer,r=e.onOpenDocs,o=e.onLoadExample;return(0,Gn.jsx)(Qo,{title:"Utilities",borderRadius:8,children:(0,Gn.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:(o||t||n||r)&&(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"8px 12px"},children:[o&&(0,Gn.jsx)(Yo,{onClick:o,icon:(0,Gn.jsx)(da,{size:12}),label:"Load Example",hint:"Load sample structure",variant:"secondary"}),t&&(0,Gn.jsx)(Yo,{onClick:t,icon:(0,Gn.jsx)(fa,{size:12}),label:"Quickstart",hint:"Quickstart guide",variant:"secondary"}),n&&(0,Gn.jsx)(Yo,{onClick:n,icon:(0,Gn.jsx)(pa,{size:12}),label:"Settings",hint:"Edit settings",variant:"secondary"}),r&&(0,Gn.jsx)(Yo,{onClick:r,icon:(0,Gn.jsx)(ha,{size:12}),label:"User Guide",hint:"Open documentation",variant:"primary"})]})})})},ma=function(e){var n=e.constraint,t=e.onConstraintChange,r=e.mode,o=e.onModeChange,a=e.onUndo,i=e.onRedo,l=e.canUndo,s=e.canRedo,u=e.onResetViewport,c=e.onToggleBasePairEditor,d=e.onTogglePropertiesDrawer,f=e.onToggleSettingsDrawer,p=e.onToggleAboutDrawer,h=e.onOpenDocs,v=e.onLoadExample,m=e.undoStack,x=e.redoStack,g=e.onJumpToHistory,y=e.onResetToLastCheckpoint,N=e.onFreezeSelected,I=e.onUnfreezeSelected,C=e.onUnfreezeAll,S=e.hasFrozenNucleotides,E=e.hasSelectedNucleotides;return(0,Gn.jsxs)(qo,{children:[(0,Gn.jsx)(Jo,{constraint:n,onConstraintChange:t}),(0,Gn.jsx)(ca,{mode:r||b.EDIT,onModeChange:o,onUndo:a,onRedo:i,canUndo:l,canRedo:s,onResetViewport:u,undoStack:m,redoStack:x,onJumpToHistory:g,onResetToLastCheckpoint:y,constraint:n,onFreezeSelected:N,onUnfreezeSelected:I,onUnfreezeAll:C,hasFrozenNucleotides:S,hasSelectedNucleotides:E}),(0,Gn.jsx)(va,{onToggleBasePairEditor:c,onTogglePropertiesDrawer:d,onToggleSettingsDrawer:f,onToggleAboutDrawer:p,onOpenDocs:h,onLoadExample:v})]})},xa=Ko("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ga=Ko("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),ya=Ko("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),ba=function(n){var t=n.open,r=n.onClose,o=n.settings,a=n.setSettings,i=n.getDistanceDefaults,l=gt(),s=l.theme,c=(l.isDarkMode,(0,e.useRef)(null)),f=(0,e.useRef)(null);return(0,Gn.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"600px",background:s.colors.background,boxShadow:s.shadows.xl,transform:t?"translateX(0)":"translateX(100%)",transition:s.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"2px solid ".concat(s.colors.border)},children:[(0,Gn.jsxs)("div",{style:{padding:"24px 28px 20px 28px",borderBottom:"1px solid ".concat(s.colors.borderLight),display:"flex",alignItems:"center",justifyContent:"space-between",background:s.colors.surface,flexShrink:0,position:"relative"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,Gn.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, ".concat(s.colors.primary,"20, ").concat(s.colors.accent,"20)"),borderRadius:s.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",color:s.colors.primary,border:"1px solid ".concat(s.colors.primary,"30")},children:(0,Gn.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,Gn.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73v.18a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Gn.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("h2",{style:{fontSize:s.typography.fontSize.xxl,fontWeight:"700",color:s.colors.text,margin:"0 0 4px 0",letterSpacing:"-0.02em"},children:"Settings"}),(0,Gn.jsx)("p",{style:{fontSize:s.typography.fontSize.md,color:s.colors.textWeak||s.colors.textSecondary,margin:0,lineHeight:"1.4"},children:"Configure your application preferences and behavior"})]})]}),(0,Gn.jsx)("button",{onClick:r,style:{border:"1px solid ".concat(s.colors.border),background:s.colors.surface,cursor:"pointer",fontSize:s.typography.fontSize.md,color:s.colors.textSecondary,padding:"10px",borderRadius:s.borderRadius.lg,width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:s.transitions.default,boxShadow:s.shadows.sm},onMouseEnter:function(e){e.currentTarget.style.background=s.colors.surfaceHover,e.currentTarget.style.borderColor=s.colors.borderDark,e.currentTarget.style.color=s.colors.text,e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:function(e){e.currentTarget.style.background=s.colors.surface,e.currentTarget.style.borderColor=s.colors.border,e.currentTarget.style.color=s.colors.textSecondary,e.currentTarget.style.transform="scale(1)"},children:(0,Gn.jsx)(xa,{size:18})})]}),(0,Gn.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"28px 28px 48px 28px",background:s.colors.backgroundSecondary},children:[(0,Gn.jsx)(Qo,{title:"Import/Export",borderRadius:12,children:(0,Gn.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,Gn.jsxs)("button",{onClick:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.click()},style:d(d({},Na(s)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,Gn.jsx)(ga,{size:16}),"Upload JSON"]}),(0,Gn.jsxs)("button",{onClick:function(){var e=f.current,n={};if(i)try{n=i()||{}}catch(u){}for(var t=d({},n),r=0,a=Object.keys(o);r<a.length;r++){var l=a[r],s=o[l];t[l]="number"===typeof s&&Number.isNaN(s)?1:s}e.href="data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t))),e.click()},style:d(d({},Ia(s)),{},{display:"flex",alignItems:"center",gap:"10px",padding:"12px 18px",fontSize:"14px",fontWeight:"600"}),children:[(0,Gn.jsx)(ya,{size:16}),"Download JSON"]}),(0,Gn.jsx)("input",{ref:c,type:"file",accept:".json",style:{display:"none"},onChange:function(e){var n=e.target.files;if(n&&0!==n.length){var t=new FileReader;t.addEventListener("load",(function(e){try{for(var n=JSON.parse(e.target.result),t=Object.keys(n),r=0,i=t;r<i.length;r++){var l=i[r],s=n[l];if(h=l,!Kn.includes(h)||typeof s!==Qn[l])throw new Error("Unrecognized settings schema")}for(var u={},c=0,f=t;c<f.length;c++){var p=f[c];u[p]=n[p]}a(d(d({},o),u))}catch(v){}var h})),t.readAsText(n[0])}}}),(0,Gn.jsx)("a",{ref:f,style:{display:"none"},download:"xrna_settings.json"})]})}),(0,Gn.jsx)("div",{style:{height:"24px"}}),(0,Gn.jsx)(Qo,{title:"Preferences",borderRadius:12,children:(0,Gn.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",rowGap:"20px",columnGap:"24px",alignItems:"center"},children:Kn.filter((function(e){return!e.startsWith("grid_")})).map((function(n,t){var r=(0,Gn.jsx)(Gn.Fragment,{});switch(Qn[n]){case"boolean":r=(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Gn.jsx)("input",{type:"checkbox",checked:o[n],onChange:function(){return a(d(d({},o),{},u({},n,!o[n])))},style:{width:"20px",height:"20px",accentColor:s.colors.primary,cursor:"pointer"}})});break;case"number":r=(0,Gn.jsx)("div",{style:{minWidth:"140px"},children:(0,Gn.jsx)(it.Number,{value:o[n],setValue:function(e){return a(d(d({},o),{},u({},n,e)))}})});break;case"string":r=(0,Gn.jsx)("div",{style:{minWidth:"140px"},children:(0,Gn.jsx)("input",{type:"text",value:o[n],onChange:function(e){return a(d(d({},o),{},u({},n,e.target.value)))},placeholder:"Enter value...",style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid ".concat(s.colors.border),background:s.colors.surface,color:s.colors.text,fontSize:"14px"}})});break;default:r=(0,Gn.jsx)(Gn.Fragment,{})}return(0,Gn.jsxs)(e.Fragment,{children:[(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,Gn.jsx)("label",{title:qn[n],style:{color:s.colors.textStrong||s.colors.text,fontSize:"15px",fontWeight:"600",lineHeight:"1.4",cursor:"pointer"},children:Vn[n]}),(0,Gn.jsx)("div",{style:{fontSize:"13px",color:s.colors.textWeak||s.colors.textSecondary,lineHeight:"1.4",maxWidth:"400px"},children:qn[n]})]}),(0,Gn.jsx)("div",{children:r})]},t)}))})})]})]})};function Na(e){return{padding:"10px 16px",borderRadius:"10px",border:"1px solid ".concat(e.colors.border),background:e.colors.surface,color:e.colors.textStrong||e.colors.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",transition:e.transitions.default,display:"flex",alignItems:"center",gap:"6px",boxShadow:e.shadows.sm}}function Ia(e){return d(d({},Na(e)),{},{background:e.colors.primary,color:e.colors.textInverse,border:"1px solid ".concat(e.colors.primary),fontWeight:"600",boxShadow:e.shadows.md})}var Ca=function(e){var n=e.open,t=e.onClose,r=e.renderTabInstructions,o=gt().theme;return(0,Gn.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"720px",background:o.colors.backgroundSecondary,transform:n?"translateX(0)":"translateX(100%)",transition:o.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(o.colors.border)},children:[(0,Gn.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(o.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:o.colors.surfaceHover,flexShrink:0,position:"relative"},children:[(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,Gn.jsx)("span",{style:{fontSize:o.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:o.colors.text},children:"Quickstart"})}),(0,Gn.jsx)("button",{onClick:t,style:{border:"1px solid ".concat(o.colors.border),background:o.colors.surface,cursor:"pointer",fontSize:o.typography.fontSize.md,color:o.colors.text,padding:"6px 8px",borderRadius:o.borderRadius.md,width:"28px",height:"28px"},children:(0,Gn.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,Gn.jsx)("path",{d:"M9 3L3 9M3 3l6 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,Gn.jsxs)("div",{style:{flex:1,overflow:"auto",padding:16},children:[(0,Gn.jsx)(Qo,{title:"Quickstart",borderRadius:8,children:(0,Gn.jsx)("div",{style:{fontSize:o.typography.fontSize.md,color:o.colors.text},children:r(b.ABOUT)})}),(0,Gn.jsx)("div",{style:{height:12}})]})]})},Sa=Ko("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Ea=Ko("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function wa(e){if(!e)return{};if(e===rt.Type.CANONICAL||e===rt.Type.WOBBLE||e===rt.Type.MISMATCH)return{};var n=String(e).split("_");if(0===n.length)return{};var t=n[0];if("cis"!==t&&"trans"!==t)return{};var r=t,o=1;function a(){var e=n[o],t=n[o+1];return"watson"===e&&"crick"===t?(o+=2,"watson_crick"):"sugar"===e&&"edge"===t?(o+=2,"sugar_edge"):"hoogsteen"===e?(o+=1,"hoogsteen"):void 0}var i=a(),l=a();return i&&l?{orientation:r,edgeA:i,edgeB:l}:{orientation:r}}function Aa(e,n,t){if(e&&n&&t)return"".concat(e,"_").concat(n,"_").concat(t)}function ka(e){if(!e)return"auto";switch(e){case rt.Type.CANONICAL:return"canonical";case rt.Type.WOBBLE:return"wobble";case rt.Type.MISMATCH:return"mismatch";default:return"custom"}}function Pa(e){return"custom"===e?"LW schema":e}function Ta(e){var n=e.title,t=e.onClick,r=e.kind,o=e.theme,a={width:28,height:28,borderRadius:6,border:"1px solid ".concat(o.colors.border),background:o.colors.background,color:o.colors.text,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"},i={edit:la,delete:Sa,save:Ea,cancel:xa}[r];return(0,Gn.jsx)("button",{title:n,onClick:t,style:a,children:(0,Gn.jsx)(i,{size:16})})}var Ma=e.memo(Ta);var Ra=function(n){var t,r,o,i,s,c,f,p,h,x,g=n.open,b=n.onClose,N=n.rnaComplexProps,I=n.globalHelices,C=n.errorMessage,S=n.constrainRelevantHelices,E=n.handleNewBasePair,w=n.removeBasePair,A=n.reformatSelectedHelices,k=gt().theme,P=y((0,e.useState)(360),2),T=P[0],M=P[1],R=y((0,e.useState)(!1),2),_=R[0],j=R[1],O=y((0,e.useState)("Base Pairs"),2),L=O[0],D=O[1],F=y((0,e.useState)("Constrained"),2),B=F[0],W=F[1],z=(0,e.useRef)(null),U=(0,e.useRef)(0),G=(0,e.useRef)(360),H=(0,e.useRef)(I);H.current=I;var K=(0,e.useRef)(null),V=y((0,e.useState)(!1),2),q=V[0],Q=V[1],X=y((0,e.useState)(!1),2),Y=X[0],$=X[1],Z=(0,e.useRef)(Y);Z.current=Y;var J=y((0,e.useState)(!0),2),ee=J[0],ne=J[1],te=y((0,e.useState)(!0),2),re=te[0],oe=te[1],ae=y((0,e.useState)((function(){var e=ee?Number.parseInt(Object.keys(N)[0]):void 0,n=void 0,t=void 0;if(void 0!==e&&N[e]){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(n=r[0],t=r[0])}return{typeBase:"auto",rnaComplexIndex:e,rnaMoleculeName0:n,rnaMoleculeName1:t,length:1}})),2),ie=ae[0],le=ae[1],se=y((0,e.useState)(null),2),ue=se[0],ce=se[1],de=y((0,e.useState)({}),2),fe=de[0],pe=de[1],he=y((0,e.useState)(!1),2),ve=(he[0],he[1]),me=(0,e.useRef)(N);me.current=N;var xe=(0,e.useRef)(_);xe.current=_;var ge=(0,e.useContext)(zr.BasePair.SetKeysToEdit),ye=((0,e.useRef)(ge),(0,e.useContext)(zr.App.PushToUndoStack));(0,e.useRef)(ye).current=ye;var be=(0,e.useContext)(zr.App.Settings),Ne=(0,e.useContext)(zr.BasePair.AverageDistances);(0,e.useRef)(Ne).current=Ne,(0,e.useRef)(be).current=be,(0,e.useEffect)((function(){function e(e){if(xe.current){var n=U.current-e.clientY,t=Math.min(Math.max(G.current+n,220),window.innerHeight-80);M(t)}}function n(){xe.current&&j(!1)}return window.addEventListener("mousemove",e),window.addEventListener("mouseup",n),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n)}}),[]);var Ie=(0,e.useMemo)((function(){return"Constrained"===B?S(I):I}),[B,S,I]),Ce=(0,e.useRef)(Ie);Ce.current=Ie;var Se=(0,e.useMemo)((function(){var e,n=[],t=[],r=m(Ie);try{var o=function(){for(var r=e.value,o=r.rnaComplexIndex,a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,l=r.start,s=r.stop,u=N[o],c=u.rnaMoleculeProps[a],d=u.rnaMoleculeProps[i],f=Math.abs(l[0]-s[0])+1,p=Math.sign(s[0]-l[0]),h=Math.sign(s[1]-l[1]),v=l[0],m=l[1],x=void 0,g=0;g<f;g++){var y=u.basePairs[a],b=null===y||void 0===y?void 0:y[v],I=null===b||void 0===b?void 0:b.find((function(e){return e.rnaMoleculeName===i&&e.nucleotideIndex===m})),C=I.basePairType;void 0===x?x=C:x!==C&&(x=null),n.push({rnaComplexIndex:o,rnaComplexName:u.name,rnaMoleculeName0:a,nucleotideIndex0:v,formattedNucleotideIndex0:c.firstNucleotideIndex+v,rnaMoleculeName1:i,nucleotideIndex1:m,formattedNucleotideIndex1:d.firstNucleotideIndex+m,type:I.basePairType}),v+=p,m+=h}t.push({rnaComplexIndex:o,rnaComplexName:u.name,rnaMoleculeName0:a,nucleotideIndex0Start:l[0],nucleotideIndex0End:s[0],formattedNucleotideIndex0Start:l[0]+c.firstNucleotideIndex,formattedNucleotideIndex0End:s[0]+c.firstNucleotideIndex,rnaMoleculeName1:i,nucleotideIndex1Start:l[1],nucleotideIndex1End:s[1],formattedNucleotideIndex1Start:l[1]+d.firstNucleotideIndex,formattedNucleotideIndex1End:s[1]+d.firstNucleotideIndex,type:null===x?void 0:x,length:f,isGrouped:!0})};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}return{selectedBasePairs:n,selectedHelices:t}}),[N,Ie]),Ee=Se.selectedBasePairs,we=Se.selectedHelices,Ae=(0,e.useMemo)((function(){return"Base Pairs"===L?Ee:we}),[L,we]),ke=(0,e.useCallback)((function(e){if(null==e)return"";var n=/[",\n]/.test(e),t=e.replace(/"/g,'""');return n?'"'.concat(t,'"'):t}),[]),Pe=(0,e.useCallback)((function(e){for(var n=[],t="",r=!1,o=0;o<e.length;o++){var a=e[o];r?'"'===a?o+1<e.length&&'"'===e[o+1]?(t+='"',o++):r=!1:t+=a:","===a?(n.push(t),t=""):'"'===a?r=!0:t+=a}return n.push(t),n}),[]),Te=(0,e.useCallback)((function(e){return!0===e.isGrouped}),[]),Me=(0,e.useCallback)((function(){var e,n=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"].join(","),t=[],r=m(Ae);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(Te(o))for(var a=o.nucleotideIndex1End>o.nucleotideIndex1Start?1:-1,i=o.formattedNucleotideIndex1End>o.formattedNucleotideIndex1Start?1:-1,l=0;l<o.length;l++)t.push({rnaComplexIndex:o.rnaComplexIndex,rnaComplexName:o.rnaComplexName,rnaMoleculeName0:o.rnaMoleculeName0,nucleotideIndex0:o.nucleotideIndex0Start+l,formattedNucleotideIndex0:o.formattedNucleotideIndex0Start+l,rnaMoleculeName1:o.rnaMoleculeName1,nucleotideIndex1:o.nucleotideIndex1Start+l*a,formattedNucleotideIndex1:o.formattedNucleotideIndex1Start+l*i,type:o.type});else t.push(o)}}catch(p){r.e(p)}finally{r.f()}var s=t.map((function(e){var n=ka(e.type),t=wa(e.type),r=t.orientation,o=t.edgeA,a=t.edgeB;return[ke(e.rnaComplexName),ke(e.rnaMoleculeName0),String(e.formattedNucleotideIndex0),ke(e.rnaMoleculeName1),String(e.formattedNucleotideIndex1),ke(n),ke(null!==r&&void 0!==r?r:""),ke(null!==o&&void 0!==o?o:""),ke(null!==a&&void 0!==a?a:"")].join(",")})),u=[n].concat(v(s)).join("\n"),c=new Blob([u],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),f=document.createElement("a");f.href=d,f.download="base_pairs.csv",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(d)}),[Te,ke,Ae]),Re=(0,e.useCallback)((function(e){var n=me.current,t=e.replace(/\r\n?/g,"\n").split("\n").filter((function(e){return e.trim().length>0}));if(0===t.length)throw"CSV is empty.";var r=Pe(t[0]).map((function(e){return e.trim()})),o=["rnaComplexName","rnaMoleculeName0","formattedNucleotideIndex0","rnaMoleculeName1","formattedNucleotideIndex1","typeBase","orientation","edgeA","edgeB"];if(r.length!==o.length||!o.every((function(e,n){return r[n]===e})))throw"CSV header is invalid. Expected: ".concat(o.join(","));for(var a=[],i=new Set(["auto","canonical","wobble","mismatch","custom"]),l=new Set(["cis","trans"]),s=new Set(["watson_crick","hoogsteen","sugar_edge"]),u=function(){var e=t[c];if(0===e.trim().length)return"continue";var r=Pe(e).map((function(e){return e.trim()}));if(r.length!==o.length)throw"Line #".concat(c+1," has ").concat(r.length," column(s); expected ").concat(o.length,".");var u=y(r,9),d=u[0],f=u[1],p=u[2],h=u[3],v=u[4],m=u[5],x=u[6],g=u[7],b=u[8],N=Object.entries(n).find((function(e){return y(e,2)[1].name===d}));if(!N)throw"Line #".concat(c+1,": Unknown RNA complex name '").concat(d,"'.");var I=parseInt(N[0]),C=n[I];if(!(f in C.rnaMoleculeProps))throw"Line #".concat(c+1,": Unknown RNA molecule #1 '").concat(f,"'.");if(!(h in C.rnaMoleculeProps))throw"Line #".concat(c+1,": Unknown RNA molecule #2 '").concat(h,"'.");var S=C.rnaMoleculeProps[f],E=C.rnaMoleculeProps[h];if(!/^[-+]?\d+$/.test(p))throw"Line #".concat(c+1,": formattedNucleotideIndex0 is not an integer.");if(!/^[-+]?\d+$/.test(v))throw"Line #".concat(c+1,": formattedNucleotideIndex1 is not an integer.");var w=parseInt(p),A=parseInt(v),k=w-S.firstNucleotideIndex,P=A-E.firstNucleotideIndex;if(!(k in S.nucleotideProps))throw"Line #".concat(c+1,": Nucleotide #1 index '").concat(w,"' does not exist in '").concat(f,"'.");if(!(P in E.nucleotideProps))throw"Line #".concat(c+1,": Nucleotide #2 index '").concat(A,"' does not exist in '").concat(h,"'.");var T,M=m.toLowerCase();if(!i.has(M))throw"Line #".concat(c+1,": Invalid typeBase '").concat(m,"'.");if("auto"===M)T=void 0;else if("canonical"===M)T=rt.Type.CANONICAL;else if("wobble"===M)T=rt.Type.WOBBLE;else if("mismatch"===M)T=rt.Type.MISMATCH;else if("custom"===M){var R=x,_=g,j=b;if(!l.has(R))throw"Line #".concat(c+1,": orientation must be 'cis' or 'trans' for custom types.");if(!s.has(_)||!s.has(j))throw"Line #".concat(c+1,": edgeA/edgeB must be one of watson_crick, hoogsteen, sugar_edge.");if(!(T=Aa(R,_,j)))throw"Line #".concat(c+1,": invalid custom type configuration.")}a.push({rnaComplexIndex:I,mol0:f,idx0:k,mol1:h,idx1:P,type:T})},c=1;c<t.length;c++)u();for(var d={},f=0,p=Object.entries(n);f<p.length;f++){var h=y(p[f],2),x=h[0],g=h[1],b=parseInt(x);d[b]=[];for(var N=0,I=Object.entries(g.basePairs);N<I.length;N++)for(var C=y(I[N],2),S=C[0],E=C[1],w=0,A=Object.entries(E);w<A.length;w++){var k,P=y(A[w],2),T=P[0],M=P[1],R=parseInt(T),_=m(M);try{for(_.s();!(k=_.n()).done;){var j=k.value,O={rnaMoleculeName:S,nucleotideIndex:R},L=y([O,{rnaMoleculeName:j.rnaMoleculeName,nucleotideIndex:j.nucleotideIndex}].sort(oo),2),D=L[0],F=L[1];D.rnaMoleculeName===O.rnaMoleculeName&&D.nucleotideIndex===O.nucleotideIndex&&d[b].push({keys0:D,keys1:F})}}catch(ie){_.e(ie)}finally{_.f()}}}for(var B={},W=0,z=a;W<z.length;W++){var U=z[W];U.rnaComplexIndex in B||(B[U.rnaComplexIndex]=[]);var G=y([{rnaMoleculeName:U.mol0,nucleotideIndex:U.idx0},{rnaMoleculeName:U.mol1,nucleotideIndex:U.idx1}].sort(oo),2),H=G[0],K=G[1];B[U.rnaComplexIndex].push({keys0:H,keys1:K})}ye();for(var V=0,q=Object.entries(n);V<q.length;V++){var Q=y(q[V],2),X=Q[0],Y=Q[1];parseInt(X);Y.basePairs={}}for(var $=0,Z=a;$<Z.length;$++){var J=Z[$];ro(n[J.rnaComplexIndex],J.mol0,J.idx0,J.mol1,J.idx1,to.DO_NOTHING,{basePairType:J.type})}var ee,ne={},te=m(new Set([].concat(v(Object.keys(n).map((function(e){return parseInt(e)}))),v(a.map((function(e){return e.rnaComplexIndex}))))));try{for(te.s();!(ee=te.n()).done;){var re,oe,ae=ee.value;ne[ae]={add:null!==(re=B[ae])&&void 0!==re?re:[],delete:null!==(oe=d[ae])&&void 0!==oe?oe:[]}}}catch(ie){te.e(ie)}finally{te.f()}ge(ne)}),[Pe,ge,ye]),_e=(0,e.useCallback)((function(){var e;return null===(e=K.current)||void 0===e?void 0:e.click()}),[]),je=(0,e.useCallback)(function(){var e=l(a().mark((function e(n){var t,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=n.target.files)||void 0===t?void 0:t[0],n.currentTarget.value="",r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.text();case 6:o=e.sent;try{Re(o)}catch(a){alert("string"===typeof a?a:a.message)}case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[Re]),Oe=(0,e.useCallback)((function(e,n,t){var r,o=me.current[e];if(!o)return"UNK";var a=o.rnaMoleculeProps[n];if(!a)return"UNK";var i=t-a.firstNucleotideIndex;if(!(i in a.nucleotideProps))return"UNK";var l=null===(r=a.nucleotideProps[i])||void 0===r?void 0:r.symbol;return l?l.toUpperCase():"UNK"}),[]),Le=(0,e.useCallback)((function(e){var n=me.current,t=(H.current,n[e.rnaComplexIndex]);if(t){ye();var r=t.basePairs[e.rnaMoleculeName0];if(r&&e.nucleotideIndex0 in r){var o=r[e.nucleotideIndex0],a=o.findIndex((function(n){return n.rnaMoleculeName===e.rnaMoleculeName1&&n.nucleotideIndex===e.nucleotideIndex1}));-1!==a&&(1===o.length?delete r[e.nucleotideIndex0]:o.splice(a,1))}var i=t.basePairs[e.rnaMoleculeName1];if(i&&e.nucleotideIndex1 in i){var l=i[e.nucleotideIndex1],s=l.findIndex((function(n){return n.rnaMoleculeName===e.rnaMoleculeName0&&n.nucleotideIndex===e.nucleotideIndex0}));-1!==s&&(1===l.length?delete i[e.nucleotideIndex1]:l.splice(s,1))}var c=y([{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}].sort(oo),2),d=c[0],f=c[1];ge(u({},e.rnaComplexIndex,{add:[],delete:[{keys0:d,keys1:f}]})),w(e.rnaComplexIndex,e.rnaMoleculeName0,e.rnaMoleculeName1,e.nucleotideIndex0,e.nucleotideIndex1)}}),[ye,ge,w]),De=(0,e.useCallback)((function(){var e,n=me.current,t=Z.current,r=ie;if(null!=r.rnaComplexIndex){var o=n[r.rnaComplexIndex];if(o){var a=r.rnaMoleculeName0,i=r.rnaMoleculeName1,l=o.rnaMoleculeProps[a],s=o.rnaMoleculeProps[i];if(l&&s&&null!=r.formattedNucleotideIndex0&&null!=r.formattedNucleotideIndex1){var c=r.formattedNucleotideIndex0-l.firstNucleotideIndex,d=r.formattedNucleotideIndex1-s.firstNucleotideIndex;if(c in l.nucleotideProps&&d in s.nucleotideProps){var f=null!==(e=r.length)&&void 0!==e?e:1,p="custom"===r.typeBase?Aa(r.orientation,r.edgeA,r.edgeB):"canonical"===r.typeBase?rt.Type.CANONICAL:"wobble"===r.typeBase?rt.Type.WOBBLE:"mismatch"===r.typeBase?rt.Type.MISMATCH:void 0;ye(),t&&Do(o,a,i,c,d,f,p,be);for(var h=[],v=0;v<f;v++){var m=c+v,x=d-v;if(!(m in l.nucleotideProps)||!(x in s.nucleotideProps))break;ro(o,a,m,i,x,to.DELETE_PREVIOUS_MAPPING,{basePairType:p});var g=y([{rnaMoleculeName:a,nucleotideIndex:m},{rnaMoleculeName:i,nucleotideIndex:x}].sort(oo),2),b=g[0],N=g[1];h.push({keys0:b,keys1:N})}ge(u({},r.rnaComplexIndex,{add:h,delete:[]})),Q(!1),le({typeBase:"auto"}),E({rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName0,nucleotideIndex:c},{rnaComplexIndex:r.rnaComplexIndex,rnaMoleculeName:r.rnaMoleculeName1,nucleotideIndex:d})}}}}}),[ie,ge,ye,E]),Fe=(0,e.useCallback)((function(e){var n=me.current;ce("".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1));var t=n[e.rnaComplexIndex],r=t.rnaMoleculeProps[e.rnaMoleculeName0],o=t.rnaMoleculeProps[e.rnaMoleculeName1],a=wa(e.type);pe({rnaComplexIndex:e.rnaComplexIndex,rnaMoleculeName0:e.rnaMoleculeName0,formattedNucleotideIndex0:e.nucleotideIndex0+r.firstNucleotideIndex,rnaMoleculeName1:e.rnaMoleculeName1,formattedNucleotideIndex1:e.nucleotideIndex1+o.firstNucleotideIndex,typeBase:ka(e.type),orientation:a.orientation,edgeA:a.edgeA,edgeB:a.edgeB})}),[]),Be=(0,e.useCallback)((function(e){var n=fe;if(null!=n.rnaComplexIndex&&n.rnaMoleculeName0&&n.rnaMoleculeName1&&null!=n.formattedNucleotideIndex0&&null!=n.formattedNucleotideIndex1){var t=n.rnaMoleculeName0,r=n.rnaMoleculeName1,o=N[n.rnaComplexIndex],a=o.rnaMoleculeProps[t],i=o.rnaMoleculeProps[r],l=n.formattedNucleotideIndex0-a.firstNucleotideIndex,s=n.formattedNucleotideIndex1-i.firstNucleotideIndex;if(l in a.nucleotideProps&&s in i.nucleotideProps){ye();var c=N[e.rnaComplexIndex],d=c.basePairs[e.rnaMoleculeName0];if(d&&e.nucleotideIndex0 in d){var f=d[e.nucleotideIndex0],p=f.findIndex((function(n){return n.rnaMoleculeName===e.rnaMoleculeName1&&n.nucleotideIndex===e.nucleotideIndex1}));-1!==p&&(1===f.length?delete d[e.nucleotideIndex0]:f.splice(p,1))}var h=c.basePairs[e.rnaMoleculeName1];if(h&&e.nucleotideIndex1 in h){var v=h[e.nucleotideIndex1],m=v.findIndex((function(n){return n.rnaMoleculeName===e.rnaMoleculeName0&&n.nucleotideIndex===e.nucleotideIndex0}));-1!==m&&(1===v.length?delete h[e.nucleotideIndex1]:v.splice(m,1))}var x=void 0;"custom"===n.typeBase?x=Aa(n.orientation,n.edgeA,n.edgeB):"canonical"===n.typeBase?x=rt.Type.CANONICAL:"wobble"===n.typeBase?x=rt.Type.WOBBLE:"mismatch"===n.typeBase&&(x=rt.Type.MISMATCH),ro(c,t,l,r,s,to.DELETE_PREVIOUS_MAPPING,{basePairType:x});var g=[{rnaMoleculeName:e.rnaMoleculeName0,nucleotideIndex:e.nucleotideIndex0},{rnaMoleculeName:e.rnaMoleculeName1,nucleotideIndex:e.nucleotideIndex1}].sort(oo),y=g[0],b=g[1],I=[{rnaMoleculeName:t,nucleotideIndex:l},{rnaMoleculeName:r,nucleotideIndex:s}].sort(oo),C=I[0],S=I[1];ge(u({},e.rnaComplexIndex,{add:[{keys0:C,keys1:S}],delete:[{keys0:y,keys1:b}]})),ce(null)}}}),[fe]),We=(0,e.useCallback)((function(e){var n=wa(e.type).orientation;if(n)return n;var t=ka(e.type);return"canonical"===t||"wobble"===t||"mismatch"===t?"cis":"auto"===t?"auto":"cis"}),[]),ze=(0,e.useCallback)((function(e){var n=wa(e.type).edgeA;if(n)return n;var t=ka(e.type);return"auto"===t?"auto":"canonical"===t||"wobble"===t?"watson_crick":"unknown"}),[]),Ue=(0,e.useCallback)((function(e){var n=wa(e.type).edgeB;if(n)return n;var t=ka(e.type);return"auto"===t?"auto":"canonical"===t?"watson_crick":"wobble"===t?"hoogsteen":"unknown"}),[]),Ge=(0,e.useCallback)((function(e){return{position:"sticky",top:0,zIndex:1,textAlign:"center",fontSize:13,textTransform:"uppercase",letterSpacing:.3,padding:"10px 12px",minWidth:e,maxWidth:e,whiteSpace:"nowrap",background:k.colors.surfaceHover,borderBottom:"1px solid ".concat(k.colors.border),borderInline:"1px solid ".concat(k.colors.border),color:k.colors.text}}),[k]),He=(0,e.useCallback)((function(e){return{padding:"8px 12px",minWidth:e,maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:12,textAlign:"center",color:k.colors.text}}),[k]),Ke=(0,e.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{width:130,padding:"6px 8px",border:"1px solid ".concat(k.colors.border),borderRadius:6,fontSize:12,background:k.colors.background,color:k.colors.text,opacity:e?1:.6}}),[k]),Ve=(0,e.useCallback)((function(){return{width:100,padding:"6px 8px",border:"1px solid ".concat(k.colors.border),borderRadius:6,fontSize:12,color:k.colors.text,background:k.colors.background}}),[k]),qe=((0,e.useCallback)((function(){return{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(k.colors.border),background:k.colors.background,fontSize:12,fontWeight:600,color:k.colors.text,cursor:"pointer"}}),[k]),(0,e.useCallback)((function(){return{width:"100%",padding:"4px 6px",border:"1px solid ".concat(k.colors.border),borderRadius:6,fontSize:12,color:k.colors.text,background:k.colors.background}}),[k])),Qe=((0,e.useCallback)((function(){return{padding:"4px 8px",borderRadius:6,border:"1px solid ".concat(k.colors.border),background:k.colors.background,fontSize:11,fontWeight:600,color:k.colors.text,cursor:"pointer"}}),[k]),(0,e.useMemo)((function(){return be[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}),[be]));(0,e.useRef)(Qe).current=Qe;var Xe=(0,e.useCallback)((function(){return A(Ce.current)}),[]);return(0,e.useEffect)((function(){var e=1===Object.keys(N).length;ne(e),oe(e&&1===Object.keys(Object.values(N)[0].rnaMoleculeProps).length)}),[N]),(0,Gn.jsxs)("div",{ref:z,style:{position:"fixed",left:429,right:0,bottom:0,height:g?T:0,transform:g?"translateY(0)":"translateY(100%)",transition:"transform 0.3s ease, height 0.3s ease",background:k.colors.surface,borderTop:"1px solid ".concat(k.colors.border),zIndex:2100,display:"flex",flexDirection:"column"},children:[(0,Gn.jsx)("div",{onMouseDown:function(e){j(!0),U.current=e.clientY,G.current=T},style:{height:10,cursor:"ns-resize",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Gn.jsx)("div",{style:{width:48,height:4,borderRadius:2,background:k.colors.border}})}),(0,Gn.jsxs)("div",{style:{padding:"10px 16px",borderBottom:"1px solid ".concat(k.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between",background:k.colors.surface},children:[(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",gap:10},children:(0,Gn.jsxs)("div",{style:{display:"flex",gap:6,background:k.colors.surfaceHover,padding:"4px",borderRadius:8},children:[["Base Pairs","Helices"].map((function(e){return(0,Gn.jsx)("button",{onClick:function(){return D(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:L===e?k.colors.background:"transparent",color:k.colors.text,boxShadow:L===e?k.shadows.sm:"none",cursor:"pointer"},children:e},e)})),"\xa0|\xa0",["Constrained","Global"].map((function(e){return(0,Gn.jsx)("button",{onClick:function(){return W(e)},style:{padding:"6px 10px",borderRadius:6,border:"none",fontSize:12,fontWeight:600,background:B===e?k.colors.background:"transparent",color:k.colors.text,boxShadow:B===e?k.shadows.sm:"none",cursor:"pointer"},children:e},e)}))]})}),(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Gn.jsx)("input",{ref:K,type:"file",accept:".csv,text/csv",style:{display:"none"},onChange:je}),(0,Gn.jsxs)("button",{onClick:Me,title:"Export table to CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(k.colors.border),background:k.colors.background,color:k.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,Gn.jsx)(ya,{size:14})," Export"]}),(0,Gn.jsxs)("button",{onClick:_e,title:"Import table from CSV",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(k.colors.border),background:k.colors.background,color:k.colors.text,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},children:[(0,Gn.jsx)(ga,{size:14})," Import"]}),(0,Gn.jsx)("button",{onClick:Xe,title:"Re-format all base pairs",style:{padding:"8px 12px",borderRadius:8,border:"1px solid ".concat(k.colors.primary),background:k.colors.primary,color:k.colors.textInverse,fontSize:12,fontWeight:700,letterSpacing:.3,cursor:"pointer"},children:"Re-format all"}),(0,Gn.jsx)("button",{onClick:b,style:{border:"none",background:"transparent",fontSize:16,color:k.colors.textSecondary,cursor:"pointer"},children:"\u2715"})]})]}),(0,Gn.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 12px",gap:8},children:[q&&(0,Gn.jsxs)("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",borderTop:"1px dashed ".concat(k.colors.border),borderBottom:"1px dashed ".concat(k.colors.border)},children:[!ee&&(0,Gn.jsxs)("select",{value:null!==(t=ie.rnaComplexIndex)&&void 0!==t?t:"",onChange:function(e){var n=""===e.target.value?void 0:parseInt(e.target.value),t=void 0!==n&&1===Object.keys(N[n].rnaMoleculeProps).length;oe(t);var r={rnaComplexIndex:n};if(void 0!==n){var o=Object.keys(N[n].rnaMoleculeProps);o.length>0&&(r.rnaMoleculeName0=o[0],r.rnaMoleculeName1=o[0])}le((function(e){return d(d({},e),{},{newAddForm:r})}))},style:d(d({},Ke()),{},{marginRight:8}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"Complex Name"}),Object.entries(N).map((function(e){var n=y(e,2),t=n[0],r=n[1];return(0,Gn.jsx)("option",{value:t,children:r.name},t)}))]}),!re&&(0,Gn.jsxs)("select",{value:null!==(r=ie.rnaMoleculeName0)&&void 0!==r?r:"",onChange:function(e){return le((function(n){return d(d({},n),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},style:d(d({},Ke()),{},{marginRight:8,opacity:null==ie.rnaComplexIndex?.6:1,cursor:null==ie.rnaComplexIndex?"not-allowed":"text",background:null==ie.rnaComplexIndex?k.colors.surfaceHover:k.colors.background,color:null==ie.rnaComplexIndex?k.colors.textSecondary:k.colors.text}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"Mol Name #1"}),(void 0==ie.rnaComplexIndex?[]:Object.entries(N[ie.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var n=y(e,2),t=n[0];n[1];return(0,Gn.jsx)("option",{value:t,children:t},t)})),"disabled = ",null==ie.rnaComplexIndex]}),(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=ie.rnaComplexIndex,n=ie.formattedNucleotideIndex0,t="UNK";if(null!=e&&null!=n){var r=ie.rnaMoleculeName0;if(r){var o=Oe(e,r,n);t="UNK"===o?"UNK":o[0].toUpperCase()}}return(0,Gn.jsx)("span",{title:t,style:{fontWeight:700},children:t})}(),(0,Gn.jsx)("input",{type:"number",placeholder:"nt #1",value:null!==(o=ie.formattedNucleotideIndex0)&&void 0!==o?o:"",onChange:function(e){return le((function(n){return d(d({},n),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},disabled:null==ie.rnaMoleculeName0,style:d(d({},qe()),{},{opacity:null==ie.rnaMoleculeName0?.6:1,cursor:null==ie.rnaMoleculeName0?"not-allowed":"text",background:null==ie.rnaMoleculeName0?k.colors.surfaceHover:k.colors.background,color:null==ie.rnaMoleculeName0?k.colors.textSecondary:k.colors.text})})]}),!re&&(0,Gn.jsxs)("select",{value:null!==(i=ie.rnaMoleculeName1)&&void 0!==i?i:"",onChange:function(e){return le((function(n){return d(d({},n),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},style:d(d({},Ke()),{},{marginRight:8,opacity:null==ie.rnaComplexIndex?.6:1,cursor:null==ie.rnaComplexIndex?"not-allowed":"text",background:null==ie.rnaComplexIndex?k.colors.surfaceHover:k.colors.background,color:null==ie.rnaComplexIndex?k.colors.textSecondary:k.colors.text}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"Mol Name #2"}),(void 0==ie.rnaComplexIndex?[]:Object.entries(N[ie.rnaComplexIndex].rnaMoleculeProps)).map((function(e){var n=y(e,2),t=n[0];n[1];return(0,Gn.jsx)("option",{value:t,children:t},t)})),"disabled = ",null==ie.rnaComplexIndex]}),(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,width:180,marginRight:8},children:[function(){var e=ie.rnaComplexIndex,n=ie.formattedNucleotideIndex1,t="UNK";if(null!=e&&null!=n){var r=ie.rnaMoleculeName1;if(r){var o=Oe(e,r,n);t="UNK"===o?"UNK":o[0].toUpperCase()}}return(0,Gn.jsx)("span",{title:t,style:{fontWeight:700},children:t})}(),(0,Gn.jsx)("input",{type:"number",placeholder:"nt #2",value:null!==(s=ie.formattedNucleotideIndex1)&&void 0!==s?s:"",onChange:function(e){return le((function(n){return d(d({},n),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:d(d({},qe()),{},{opacity:null==ie.rnaMoleculeName1?.6:1,cursor:null==ie.rnaMoleculeName1?"not-allowed":"text",background:null==ie.rnaMoleculeName1?k.colors.surfaceHover:k.colors.background,color:null==ie.rnaMoleculeName1?k.colors.textSecondary:k.colors.text}),disabled:null==ie.rnaMoleculeName1})]}),(0,Gn.jsxs)("select",{value:ie.typeBase,onChange:function(e){return le((function(n){return d(d({},n),{},{typeBase:e.target.value})}))},style:d(d({},Ke(!0)),{},{marginRight:8}),children:[(0,Gn.jsx)("option",{value:"auto",children:"auto"}),(0,Gn.jsx)("option",{value:"canonical",children:"canonical"}),(0,Gn.jsx)("option",{value:"wobble",children:"wobble"}),(0,Gn.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,Gn.jsx)("option",{value:"custom",children:Pa("custom")})]}),(0,Gn.jsxs)("select",{value:null!==(c=ie.orientation)&&void 0!==c?c:"",disabled:"custom"!==ie.typeBase,onChange:function(e){return le((function(n){return d(d({},n),{},{orientation:e.target.value})}))},style:d(d({},Ke("custom"===ie.typeBase)),{},{marginRight:8}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"orientation (auto)"}),(0,Gn.jsx)("option",{value:"cis",children:"cis"}),(0,Gn.jsx)("option",{value:"trans",children:"trans"})]}),(0,Gn.jsxs)("select",{value:null!==(f=ie.edgeA)&&void 0!==f?f:"",disabled:"custom"!==ie.typeBase,onChange:function(e){return le((function(n){return d(d({},n),{},{edgeA:e.target.value})}))},style:d(d({},Ke("custom"===ie.typeBase)),{},{marginRight:8}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"edge A (auto)"}),(0,Gn.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,Gn.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,Gn.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,Gn.jsxs)("select",{value:null!==(p=ie.edgeB)&&void 0!==p?p:"",disabled:"custom"!==ie.typeBase,onChange:function(e){return le((function(n){return d(d({},n),{},{edgeB:e.target.value})}))},style:d(d({},Ke("custom"===ie.typeBase)),{},{marginRight:8}),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"edge B (auto)"}),(0,Gn.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,Gn.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,Gn.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}),(0,Gn.jsx)("input",{type:"number",min:"1",max:"100",placeholder:"Length",value:null!==(h=ie.length)&&void 0!==h?h:"",onChange:function(e){return le((function(n){return d(d({},n),{},{length:""===e.target.value?void 0:Math.max(1,parseInt(e.target.value)||1)})}))},style:d(d({},Ve()),{},{width:80,marginRight:8}),title:"Number of consecutive base pairs to create"}),(0,Gn.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",marginRight:"8px",padding:"4px 8px",borderRadius:"4px",backgroundColor:Y?k.colors.primary+"20":"transparent",border:Y?"1px solid ".concat(k.colors.primary):"1px solid transparent",transition:"all 0.2s ease",cursor:"pointer"},children:[(0,Gn.jsx)("input",{type:"checkbox",checked:Y,onChange:function(e){return $(e.target.checked)},style:{margin:0,transform:"scale(0.9)"}}),(0,Gn.jsx)("span",{style:{fontSize:"11px",fontWeight:Y?"600":"400",color:Y?k.colors.primary:k.colors.text,whiteSpace:"nowrap"},children:"Reposition"})]}),(0,Gn.jsx)("button",{onClick:De,style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(k.colors.border),background:k.colors.background,fontSize:12,fontWeight:700,color:k.colors.text},disabled:null==ie.rnaComplexIndex||void 0===ie.rnaMoleculeName0||void 0===ie.rnaMoleculeName1||null==ie.formattedNucleotideIndex0||null==ie.formattedNucleotideIndex1||(null!==(x=ie.length)&&void 0!==x?x:1)<1,children:"Add"})]}),(0,Gn.jsx)("button",{onClick:function(){if(!q){var e=ee?Number.parseInt(Object.keys(N)[0]):void 0,n=void 0,t=void 0;if(void 0!==e){var r=Object.keys(N[e].rnaMoleculeProps);r.length>0&&(n=r[0],t=r[0])}le({rnaComplexIndex:e,rnaMoleculeName0:n,rnaMoleculeName1:t,formattedNucleotideIndex0:void 0,formattedNucleotideIndex1:void 0,length:1,typeBase:"auto"})}Q(!q)},style:{padding:"6px 10px",borderRadius:8,border:"1px solid ".concat(k.colors.border),background:k.colors.background,fontSize:12,fontWeight:600,color:k.colors.text,marginLeft:"auto"},children:q?"Cancel":"Add Base Pair"})]}),(0,Gn.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Gn.jsx)("thead",{children:(0,Gn.jsxs)("tr",{children:[!ee&&(0,Gn.jsx)("th",{style:Ge(120),children:"Complex"}),!re&&(0,Gn.jsx)("th",{style:Ge(80),children:"Mol#1"}),(0,Gn.jsx)("th",{style:Ge(80),children:"Nt (index) a"}),!re&&(0,Gn.jsx)("th",{style:Ge(80),children:"Mol#2"}),(0,Gn.jsx)("th",{style:Ge(80),children:"Nt (index) b"}),"Helices"===L&&(0,Gn.jsx)("th",{style:Ge(60),children:"Length"}),(0,Gn.jsx)("th",{style:Ge(120),children:"Type"}),(0,Gn.jsx)("th",{style:Ge(100),children:"Orientation"}),(0,Gn.jsx)("th",{style:Ge(130),children:"Edge A"}),(0,Gn.jsx)("th",{style:Ge(130),children:"Edge B"}),(0,Gn.jsx)("th",{style:Ge(90),children:"Action"})]})}),(0,Gn.jsxs)("tbody",{children:[Ae.map((function(e,n){var t,r,o,a,i,l,s,u=Te(e),c=u?"".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0Start,"-").concat(e.nucleotideIndex0End,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1Start,"-").concat(e.nucleotideIndex1End):"".concat(e.rnaComplexIndex,":").concat(e.rnaMoleculeName0,":").concat(e.nucleotideIndex0,":").concat(e.rnaMoleculeName1,":").concat(e.nucleotideIndex1),f=!u&&ue===c,p=f&&null!==(t=fe.typeBase)&&void 0!==t?t:ka(e.type),h=wa(e.type),v=f?null!==(r=null!==(o=fe.orientation)&&void 0!==o?o:h.orientation)&&void 0!==r?r:"auto"===p?void 0:"cis":void 0,m=f&&null!==(a=fe.edgeA)&&void 0!==a?a:void 0,x=f&&null!==(i=fe.edgeB)&&void 0!==i?i:void 0;return(0,Gn.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(k.colors.border),background:n%2===0?k.colors.background:k.colors.surface},children:[!ee&&(0,Gn.jsx)("td",{style:He(120),children:e.rnaComplexName}),!re&&(0,Gn.jsx)("td",{style:He(60),children:(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:f?(0,Gn.jsx)("select",{value:null!==(l=fe.rnaMoleculeName0)&&void 0!==l?l:e.rnaMoleculeName0,onChange:function(e){return pe((function(n){return d(d({},n),{},{rnaMoleculeName0:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var n=y(e,2),t=n[0];n[1];return(0,Gn.jsx)("option",{value:t,children:t},t)}))}):(0,Gn.jsx)("span",{children:e.rnaMoleculeName0})})}),(0,Gn.jsx)("td",{style:He(60),children:(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var n,t;if(u){var r=Oe(e.rnaComplexIndex,e.rnaMoleculeName0,e.formattedNucleotideIndex0Start),o="UNK"===r?"UNK":r[0].toUpperCase();return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,Gn.jsx)("span",{children:e.formattedNucleotideIndex0Start})]})}var a=Oe(e.rnaComplexIndex,e.rnaMoleculeName0,f&&null!==(n=fe.formattedNucleotideIndex0)&&void 0!==n?n:e.formattedNucleotideIndex0),i="UNK"===a?"UNK":a[0].toUpperCase();return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("span",{title:"".concat(e.rnaMoleculeName0," (").concat(a,")"),style:{fontWeight:700},children:i}),f?(0,Gn.jsx)("input",{type:"number",value:null!==(t=fe.formattedNucleotideIndex0)&&void 0!==t?t:e.formattedNucleotideIndex0,onChange:function(e){return pe((function(n){return d(d({},n),{},{formattedNucleotideIndex0:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:qe()}):(0,Gn.jsx)("span",{children:e.formattedNucleotideIndex0})]})}()})}),!re&&(0,Gn.jsx)("td",{style:He(60),children:(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:f?(0,Gn.jsx)("select",{value:null!==(s=fe.rnaMoleculeName1)&&void 0!==s?s:e.rnaMoleculeName1,onChange:function(e){return pe((function(n){return d(d({},n),{},{rnaMoleculeName1:""===e.target.value?void 0:e.target.value})}))},children:Object.entries(N[e.rnaComplexIndex].rnaMoleculeProps).map((function(e){var n=y(e,2),t=n[0];n[1];return(0,Gn.jsx)("option",{value:t,children:t},t)}))}):(0,Gn.jsx)("span",{children:e.rnaMoleculeName1})})}),(0,Gn.jsx)("td",{style:He(60),children:(0,Gn.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:function(){var n,t;if(u){var r=Oe(e.rnaComplexIndex,e.rnaMoleculeName1,e.formattedNucleotideIndex1Start),o="UNK"===r?"UNK":r[0].toUpperCase();return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(r,")"),style:{fontWeight:700},children:o}),(0,Gn.jsx)("span",{children:e.formattedNucleotideIndex1Start})]})}var a=Oe(e.rnaComplexIndex,e.rnaMoleculeName1,f&&null!==(n=fe.formattedNucleotideIndex1)&&void 0!==n?n:e.formattedNucleotideIndex1),i="UNK"===a?"UNK":a[0].toUpperCase();return(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("span",{title:"".concat(e.rnaMoleculeName1," (").concat(a,")"),style:{fontWeight:700},children:i}),f?(0,Gn.jsx)("input",{type:"number",value:null!==(t=fe.formattedNucleotideIndex1)&&void 0!==t?t:e.formattedNucleotideIndex1,onChange:function(e){return pe((function(n){return d(d({},n),{},{formattedNucleotideIndex1:""===e.target.value?void 0:parseInt(e.target.value)})}))},style:qe()}):(0,Gn.jsx)("span",{children:e.formattedNucleotideIndex1})]})}()})}),"Helices"===L&&(0,Gn.jsx)("td",{style:He(60),children:(0,Gn.jsx)("span",{style:{fontSize:12,color:k.colors.text},children:u?e.length:1})}),(0,Gn.jsx)("td",{style:He(120),children:f?(0,Gn.jsxs)("select",{value:p,onChange:function(n){var t=n.target.value;if("custom"===t){var r,o,a,i,l,s,u=wa(e.type),c=ka(e.type),f=null!==(r=null!==(o=fe.orientation)&&void 0!==o?o:u.orientation)&&void 0!==r?r:"cis",p=null!==(a=null!==(i=fe.edgeA)&&void 0!==i?i:u.edgeA)&&void 0!==a?a:"watson_crick",h=null!==(l=null!==(s=fe.edgeB)&&void 0!==s?s:u.edgeB)&&void 0!==l?l:"wobble"===c?"hoogsteen":"watson_crick";pe((function(e){return d(d({},e),{},{typeBase:t,orientation:f,edgeA:p,edgeB:h})}))}else pe((function(e){return d(d({},e),{},{typeBase:t})}))},style:Ke(!0),children:[(0,Gn.jsx)("option",{value:"auto",children:"auto"}),(0,Gn.jsx)("option",{value:"canonical",children:"canonical"}),(0,Gn.jsx)("option",{value:"wobble",children:"wobble"}),(0,Gn.jsx)("option",{value:"mismatch",children:"mismatch"}),(0,Gn.jsx)("option",{value:"custom",children:Pa("custom")})]}):(0,Gn.jsx)("span",{style:{fontSize:12,color:k.colors.text},children:Pa(ka(e.type))})}),(0,Gn.jsx)("td",{style:He(100),children:f&&"custom"===p?(0,Gn.jsxs)("select",{value:null!==v&&void 0!==v?v:"",onChange:function(e){return pe((function(n){return d(d({},n),{},{orientation:e.target.value||void 0})}))},style:Ke(!0),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,Gn.jsx)("option",{value:"cis",children:"cis"}),(0,Gn.jsx)("option",{value:"trans",children:"trans"})]}):(0,Gn.jsx)("span",{style:{fontSize:12,color:k.colors.text},children:We(e)})}),(0,Gn.jsx)("td",{style:He(130),children:f&&"custom"===p?(0,Gn.jsxs)("select",{value:null!==m&&void 0!==m?m:"",onChange:function(e){return pe((function(n){return d(d({},n),{},{edgeA:e.target.value||void 0})}))},style:Ke(!0),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,Gn.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,Gn.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,Gn.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,Gn.jsx)("span",{style:{fontSize:12,color:k.colors.text},children:ze(e)})}),(0,Gn.jsx)("td",{style:He(130),children:f&&"custom"===p?(0,Gn.jsxs)("select",{value:null!==x&&void 0!==x?x:"",onChange:function(e){return pe((function(n){return d(d({},n),{},{edgeB:e.target.value||void 0})}))},style:Ke(!0),children:[(0,Gn.jsx)("option",{value:"",hidden:!0,children:"\u2014"}),(0,Gn.jsx)("option",{value:"watson_crick",children:"watson_crick"}),(0,Gn.jsx)("option",{value:"hoogsteen",children:"hoogsteen"}),(0,Gn.jsx)("option",{value:"sugar_edge",children:"sugar_edge"})]}):(0,Gn.jsx)("span",{style:{fontSize:12,color:k.colors.text},children:Ue(e)})}),(0,Gn.jsx)("td",{style:d(d({},He(70)),{},{textAlign:"center"}),children:u?(0,Gn.jsx)("span",{style:{fontSize:11,color:k.colors.textSecondary},children:"\u2014"}):f?(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,Gn.jsx)(Ma,{title:"Save",onClick:function(){Be(e),ve((function(e){return!e}))},kind:"save",theme:k}),(0,Gn.jsx)(Ma,{title:"Cancel",onClick:function(){return ce(null)},kind:"cancel",theme:k})]}):(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[(0,Gn.jsx)(Ma,{title:"Edit",onClick:function(){return Fe(e)},kind:"edit",theme:k}),(0,Gn.jsx)(Ma,{title:"Delete",onClick:function(){Le(e),ve((function(e){return!e}))},kind:"delete",theme:k})]})})]},"".concat(c,":").concat(n))})),C&&(0,Gn.jsx)("tr",{children:(0,Gn.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:k.colors.error},children:C})}),!C&&0===Ae.length&&(0,Gn.jsx)("tr",{children:(0,Gn.jsx)("td",{colSpan:10,style:{padding:16,textAlign:"center",color:k.colors.textSecondary},children:'No base pairs found. Use the "Add Base Pair" button above to create new ones.'})})]})]})]})]})},_a=e.memo(Ra),ja=function(n){var t=n.rnaComplexProps,r=y((0,e.useState)(!1),2),o=r[0],a=r[1],i=y((0,e.useState)(""),2),l=i[0],s=i[1],c=y((0,e.useState)([]),2),d=c[0],f=c[1],p=y((0,e.useState)(-1),2),h=p[0],x=p[1],g=(0,e.useRef)(null),b=(0,e.useRef)(null),N=(0,e.useContext)(zr.BasePair.SetKeysToEdit),I=(0,e.useContext)(zr.Nucleotide.SetKeysToRerender),C=(0,e.useContext)(zr.App.PushToUndoStack),S=gt().theme,E=(0,e.useMemo)((function(){return["add","delete","edit","reformat","color"]}),[]),w=(0,e.useMemo)((function(){var e=l.trim(),n=/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(?/.exec(e);if(!n)return null;switch(n[1].toLowerCase()){case"add":return{signature:"add(nt1_index:int, nt2_index:int, complex:str?, bp_type:str=auto, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index: required integer (formatted index)","nt2_index: required integer (formatted index)","complex: optional string; required in multi-complex scenes","bp_type: 'auto'|'canonical'|'wobble'|'mismatch' (ignored if subtype provided)","subtype: optional custom directed type like cWW/tHS","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++ (default 1)","safe: boolean (default True); True=error on duplicates, False=warn and add"]};case"delete":return{signature:"delete(nt1_index:int, nt2_index:int, complex:str?, length:int=\xb1n, safe:bool=True)",lines:["nt1_index, nt2_index: required integers","complex: optional string; required in multi-complex scenes","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: boolean (default True); True=error if not found, False=warn and skip"]};case"edit":return{signature:"edit(nt1_index:int, nt2_index:int, complex:str?, bp_type:str, subtype:str?, length:int=\xb1n, safe:bool=True)",lines:["Requires bp_type or subtype","length: positive \u2192 nt1++, nt2--; negative \u2192 nt1--, nt2++","safe: True=error if not found, False=warn and create"]};case"reformat":return{signature:"reformat(start:int?, end:int?)",lines:["If both omitted: full reformat","If provided: repositions nucleotides only within [start, end]"]};case"color":return{signature:"color(target:int|string, color_value:string)",lines:["target: 'start-end' for a range, or single index; multiple segments separated by ';'","color_value: CSS color name or hex (e.g., 'red', '#FF0000')"]};default:return null}}),[l]);function A(e,n){f((function(t){return[].concat(v(t),[{ts:new Date,level:e,text:n}])}))}function k(e){if(e)for(var n=0,r=Object.entries(t);n<r.length;n++){var o=y(r[n],2),a=o[0];if(o[1].name.toLowerCase()===e.toLowerCase())return parseInt(a)}else{var i=Object.keys(t);if(1===i.length)return parseInt(i[0])}}function P(e,n){var r=t[e];if(r)for(var o=0,a=Object.entries(r.rnaMoleculeProps);o<a.length;o++){var i=y(a[o],2),l=i[0],s=i[1];if(n-s.firstNucleotideIndex in s.nucleotideProps)return l}}function T(e,n,t,r,o){var a,i=null===(a=e.basePairs[n])||void 0===a?void 0:a[t];return!!i&&!!i.find((function(e){return e.rnaMoleculeName===r&&e.nucleotideIndex===o}))}function M(e){return e.replace(/^['"]|['"]$/g,"")}function R(){var e=l;if(e.trim()){A("command","> ".concat(e)),x(-1);try{var n=function(e){var n=e.trim(),t=/^([a-zA-Z_][a-zA-Z0-9_]*)\((.*)\)$/.exec(n);if(!t)return{error:"Syntax error: commands must be in form name(arg1, ..., key=value, ...)"};var r,o=t[1],a=t[2].trim(),i=[],l={},s=m(a.length?a.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})):[]);try{for(s.s();!(r=s.n()).done;){var u=r.value,c=u.indexOf("=");if(-1===c)i.push(u);else{var d=u.slice(0,c).trim(),f=u.slice(c+1).trim();if(!d)return{error:"Syntax error: empty parameter name"};l[d]=M(f)}}}catch(C){s.e(C)}finally{s.f()}var p=o.toLowerCase();if("reformat"===p){var h=void 0!==l.start?parseInt(l.start):void 0,v=void 0!==l.end?parseInt(l.end):void 0;return void 0!==l.start&&Number.isNaN(h)||void 0!==l.end&&Number.isNaN(v)?{error:"Type error: reformat parameters start/end must be integers"}:{kind:"reformat",start:h,end:v}}if("color"===p)return 2!==i.length?{error:"Syntax error: color(target, color_value)"}:{kind:"color",target:M(i[0]),color:M(i[1])};if("add"!==p&&"delete"!==p&&"edit"!==p)return{error:"Unknown command: ".concat(o)};if(i.length<2)return{error:"Syntax error: first two positional arguments must be nt1_index, nt2_index"};if(i.length>2)return{error:"Syntax error: too many positional arguments"};var x=parseInt(i[0]),g=parseInt(i[1]);if(Number.isNaN(x)||Number.isNaN(g))return{error:"Type error: nt1_index and nt2_index must be integers"};var y=l.complex,b=l.bp_type,N=l.subtype,I=void 0!==l.length?parseInt(l.length):1;return Number.isNaN(I)||0===I?{error:"Type error: length must be a non-zero integer"}:{kind:p,nt1:x,nt2:g,complexName:y,bpType:b,subtype:N,length:I,safe:void 0===l.safe||"true"===l.safe.toLowerCase()||"false"!==l.safe.toLowerCase()&&function(){throw new Error("Type error: safe must be true or false")}()}}(e);n.error?A("error",n.error):function(e){if("reformat"===e.kind){if(void 0===e.start&&void 0===e.end)window.dispatchEvent(new CustomEvent("triggerReformatAll")),A("success","Reformat triggered");else{var n=e.start,r=e.end;window.dispatchEvent(new CustomEvent("triggerReformatRange",{detail:{start:n,end:r}})),A("success","Reformat range ".concat(null!==n&&void 0!==n?n:"-\u221e","..").concat(null!==r&&void 0!==r?r:"+\u221e"," triggered"))}return}if("color"===e.kind){var o=k(void 0);if(void 0===o)return void A("error","Ambiguous complex: specify a single complex in scene to use color()");var a=t[o],i=e,l=i.target,s=i.color;try{var c=function(e){var n=e.trim().replace(/^['"]|['"]$/g,"");if(/^#?[0-9a-fA-F]{3,4}$/.test(n)||/^#?[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$/.test(n)){return _e(n.startsWith("#")?n:"#".concat(n),void 0,Re.THROW_ERROR)}return _e(n.toLowerCase(),void 0,Re.THROW_ERROR)}(s),d=function(e){var n=e.split(";").map((function(e){return e.trim()})).filter(Boolean);if(0===n.length)throw new Error("color(): target is empty");var t,r=[],o=m(n);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(/^\d+$/.test(a)){var i=parseInt(a);r.push({start:i,end:i})}else{var l=/^(\d+)\s*-\s*(\d+)$/.exec(a);if(!l)throw new Error("color(): invalid target segment '".concat(a,"'"));var s=parseInt(l[1]),u=parseInt(l[2]),c=Math.min(s,u),d=Math.max(s,u);r.push({start:c,end:d})}}}catch(f){o.e(f)}finally{o.f()}return r}(l);C();for(var f=0,p=0,h=Object.entries(a.rnaMoleculeProps);p<h.length;p++)for(var v=y(h[p],2),x=(v[0],v[1]),g=0,b=Object.entries(x.nucleotideProps);g<b.length;g++){var S=y(b[g],2),E=S[0],w=S[1];if(j(parseInt(E)+x.firstNucleotideIndex,d)){var M;w.color=c;var R=null!==(M=w.labelContentProps)&&void 0!==M?M:{};R.color=c,w.labelContentProps=R,f++}}var _={};if(f>0){for(var O=0,L=Object.entries(a.rnaMoleculeProps);O<L.length;O++){for(var D=y(L[O],2),F=D[0],B=D[1],W=[],z=0,U=Object.entries(B.nucleotideProps);z<U.length;z++){var G=y(U[z],1)[0],H=parseInt(G);j(H+B.firstNucleotideIndex,d)&&W.push(H)}W.length&&(_[F]=W)}I(u({},o,_))}A("success","Applied color to ".concat(f," nucleotide(s)"))}catch(Ge){var K;A("error",null!==(K=null===Ge||void 0===Ge?void 0:Ge.message)&&void 0!==K?K:String(Ge))}return}var V=e,q=k(V.complexName);if(void 0===q){var Q;if(Object.keys(t).length>1&&!V.complexName)A("error","Ambiguous complex: specify complex=[name]");else A("error","Unknown complex: ".concat(null!==(Q=V.complexName)&&void 0!==Q?Q:"(unspecified)"));return}for(var X=t[q],Y=V.length>0?1:-1,$=-Y,Z=Math.abs(V.length),J=[],ee=0;ee<Z;ee++){var ne=V.nt1+ee*Y,te=V.nt2+ee*$,re=P(q,ne),oe=P(q,te);if(re&&oe){var ae=X.rnaMoleculeProps[re],ie=X.rnaMoleculeProps[oe],le=ne-ae.firstNucleotideIndex,se=te-ie.firstNucleotideIndex;le in ae.nucleotideProps&&se in ie.nucleotideProps?J.push({idx1:ne,idx2:te,mol0:re,mol1:oe,i0:le,i1:se}):J.push({error:"Out of bounds: (".concat(ne,", ").concat(te,")")})}else J.push({error:"Out of bounds: (".concat(ne,", ").concat(te,")")})}var ue=J.find((function(e){return"error"in e}));if(ue)return void A("error",ue.error);var ce=void 0;if("delete"!==V.kind&&"custom_error"===(ce=function(e,n){if(n){var t=function(e){if(!/^[ct][WHS]{2}$/.test(e))return null;var n={W:"watson_crick",H:"hoogsteen",S:"sugar_edge"};return{orientation:"c"===e[0]?"cis":"trans",edgeA:n[e[1]],edgeB:n[e[2]]}}(n);if(!t)return"custom_error";var r=t.orientation,o=t.edgeA,a=t.edgeB;return"".concat(r,"_").concat(o,"_").concat(a)}switch((e||"auto").toLowerCase()){case"auto":return;case"canonical":return Yn.Type.CANONICAL;case"wobble":return Yn.Type.WOBBLE;case"mismatch":return Yn.Type.MISMATCH;default:return"custom_error"}}(V.bpType,V.subtype)))return void A("error","Invalid type: provide bp_type=[auto|canonical|wobble|mismatch] or subtype like cWW/tHS");if("add"===V.kind){if(V.safe){var de,fe=m(J);try{for(fe.s();!(de=fe.n()).done;){var pe=de.value;if(T(X,pe.mol0,pe.i0,pe.mol1,pe.i1))return void A("error","Base pair already exists at (".concat(pe.idx1,", ").concat(pe.idx2,")"))}}catch(He){fe.e(He)}finally{fe.f()}}C();var he,ve=[],me=m(J);try{for(me.s();!(he=me.n()).done;){var xe=he.value;T(X,xe.mol0,xe.i0,xe.mol1,xe.i1)&&!V.safe&&A("warning","Duplicate at (".concat(xe.idx1,", ").concat(xe.idx2,") \u2014 adding anyway")),ro(X,xe.mol0,xe.i0,xe.mol1,xe.i1,to.DO_NOTHING,{basePairType:ce});var ge=y([{rnaMoleculeName:xe.mol0,nucleotideIndex:xe.i0},{rnaMoleculeName:xe.mol1,nucleotideIndex:xe.i1}].sort(oo),2),ye=ge[0],be=ge[1];ve.push({keys0:ye,keys1:be})}}catch(He){me.e(He)}finally{me.f()}return N(u({},q,{add:ve,delete:[]})),void A("success","Added ".concat(J.length," base pair(s)"))}if("delete"===V.kind){if(V.safe){var Ne,Ie=m(J);try{for(Ie.s();!(Ne=Ie.n()).done;){var Ce=Ne.value;if(!T(X,Ce.mol0,Ce.i0,Ce.mol1,Ce.i1))return void A("error","No base pair at (".concat(Ce.idx1,", ").concat(Ce.idx2,")"))}}catch(He){Ie.e(He)}finally{Ie.f()}}C();var Se,Ee=[],we=m(J);try{var Ae=function(){var e=Se.value;if(!T(X,e.mol0,e.i0,e.mol1,e.i1))return A("warning","No base pair at (".concat(e.idx1,", ").concat(e.idx2,") \u2014 skipping")),"continue";var n=X.basePairs[e.mol0];if(n&&e.i0 in n){var t=n[e.i0],r=t.findIndex((function(n){return n.rnaMoleculeName===e.mol1&&n.nucleotideIndex===e.i1}));-1!==r&&(1===t.length?delete n[e.i0]:t.splice(r,1))}var o=X.basePairs[e.mol1];if(o&&e.i1 in o){var a=o[e.i1],i=a.findIndex((function(n){return n.rnaMoleculeName===e.mol0&&n.nucleotideIndex===e.i0}));-1!==i&&(1===a.length?delete o[e.i1]:a.splice(i,1))}var l=y([{rnaMoleculeName:e.mol0,nucleotideIndex:e.i0},{rnaMoleculeName:e.mol1,nucleotideIndex:e.i1}].sort(oo),2),s=l[0],u=l[1];Ee.push({keys0:s,keys1:u})};for(we.s();!(Se=we.n()).done;)Ae()}catch(He){we.e(He)}finally{we.f()}return Ee.length&&N(u({},q,{add:[],delete:Ee})),void A("success","Deleted ".concat(Ee.length," base pair(s)"))}if("edit"===V.kind){if(void 0===ce)return void A("error","edit requires bp_type or subtype");var ke=ce;if(V.safe){var Pe,Te=m(J);try{for(Te.s();!(Pe=Te.n()).done;){var Me=Pe.value;if(!T(X,Me.mol0,Me.i0,Me.mol1,Me.i1))return void A("error","No base pair at (".concat(Me.idx1,", ").concat(Me.idx2,")"))}}catch(He){Te.e(He)}finally{Te.f()}}C();var je,Oe=[],Le=[],De=m(J);try{for(De.s();!(je=De.n()).done;){var Fe=je.value,Be=T(X,Fe.mol0,Fe.i0,Fe.mol1,Fe.i1);Be||V.safe||A("warning","No base pair at (".concat(Fe.idx1,", ").concat(Fe.idx2,") \u2014 creating new")),ro(X,Fe.mol0,Fe.i0,Fe.mol1,Fe.i1,Be?to.DELETE_PREVIOUS_MAPPING:to.DO_NOTHING,{basePairType:ke});var We=y([{rnaMoleculeName:Fe.mol0,nucleotideIndex:Fe.i0},{rnaMoleculeName:Fe.mol1,nucleotideIndex:Fe.i1}].sort(oo),2),ze=We[0],Ue=We[1];Oe.push({keys0:ze,keys1:Ue}),Be&&Le.push({keys0:ze,keys1:Ue})}}catch(He){De.e(He)}finally{De.f()}N(u({},q,{add:Oe,delete:Le})),A("success","Edited ".concat(J.length," base pair(s)"))}}(n)}catch(o){var r;A("error",null!==(r=null===o||void 0===o?void 0:o.message)&&void 0!==r?r:String(o))}finally{s("")}}}(0,e.useEffect)((function(){function e(e){"Backquote"===e.code&&(e.preventDefault(),a((function(e){return!e})))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,e.useEffect)((function(){o&&setTimeout((function(){var e;return null===(e=g.current)||void 0===e?void 0:e.focus()}),0)}),[o]),(0,e.useEffect)((function(){var e;null===(e=b.current)||void 0===e||e.scrollTo({top:b.current.scrollHeight})}),[d.length]);var _=(0,e.useMemo)((function(){var e=l.trim(),n=/^([a-zA-Z_]*)$/.exec(e),t=n?n[1]:"";return E.filter((function(e){return e.startsWith(t)})).slice(0,4)}),[l,E]);function j(e,n){var t,r=m(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(e>=o.start&&e<=o.end)return!0}}catch(a){r.e(a)}finally{r.f()}return!1}return o?(0,Gn.jsxs)("div",{style:{position:"fixed",left:0,right:0,bottom:0,height:260,background:S.colors.surface,color:S.colors.text,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',borderTop:"1px solid ".concat(S.colors.border),boxShadow:S.shadows.lg,zIndex:2500,display:"flex",flexDirection:"column"},onClick:function(){var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},children:[(0,Gn.jsxs)("div",{style:{padding:"6px 10px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid ".concat(S.colors.border)},children:[(0,Gn.jsx)("div",{style:{fontWeight:700,fontSize:S.typography.fontSize.sm,color:S.colors.primary},children:"XRNA Terminal"}),(0,Gn.jsx)("div",{style:{fontSize:S.typography.fontSize.xs,color:S.colors.textSecondary},children:"Press ~ to hide"})]}),(0,Gn.jsx)("div",{ref:b,style:{flex:1,overflowY:"auto",padding:"8px 10px"},children:d.map((function(e,n){return(0,Gn.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"baseline",whiteSpace:"pre-wrap"},children:[(0,Gn.jsxs)("span",{style:{color:S.colors.textSecondary,fontSize:S.typography.fontSize.xs},children:["[",O(e.ts),"]"]}),(0,Gn.jsx)("span",{style:{color:L(e.level)},children:e.text})]},n)}))}),(0,Gn.jsxs)("div",{style:{padding:"8px 10px",borderTop:"1px solid ".concat(S.colors.border)},children:[(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Gn.jsx)("span",{style:{color:S.colors.primary},children:">"}),(0,Gn.jsx)("input",{ref:g,value:l,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)return e.preventDefault(),void R();if("ArrowUp"===e.key){var n;e.preventDefault();var t=d.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),r=h<0?t.length-1:Math.max(0,h-1);return x(r),void s(null!==(n=t[r])&&void 0!==n?n:l)}if("ArrowDown"===e.key){var o;e.preventDefault();var a=d.filter((function(e){return"command"===e.level})).map((function(e){return e.text.slice(2)})),i=h<0?-1:Math.min(a.length-1,h+1);return x(i),void s(-1===i?"":null!==(o=a[i])&&void 0!==o?o:"")}if("Tab"!==e.key);else{e.preventDefault();var u=l.trim(),c=/^([a-zA-Z_]*)$/.exec(u);if(c){var f=c[1],p=E.find((function(e){return e.startsWith(f)}));p&&s(p+"()")}}},style:{flex:1,background:"transparent",border:"none",outline:"none",color:S.colors.text,fontFamily:"inherit",fontSize:S.typography.fontSize.md},placeholder:"add(1, 150, length=3)"})]}),(_.length>0||w)&&(0,Gn.jsxs)("div",{style:{marginTop:6},children:[_.length>0&&(0,Gn.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:w?6:0},children:_.map((function(e){return(0,Gn.jsx)("span",{style:{background:S.colors.surfaceHover,border:"1px solid ".concat(S.colors.border),borderRadius:S.borderRadius.md,padding:"2px 6px",fontSize:S.typography.fontSize.xs,color:S.colors.textSecondary},children:e},e)}))}),w&&(0,Gn.jsxs)("div",{style:{background:S.colors.backgroundSecondary,border:"1px solid ".concat(S.colors.border),borderRadius:S.borderRadius.md,padding:"6px 8px"},children:[(0,Gn.jsx)("div",{style:{fontSize:S.typography.fontSize.xs,color:S.colors.text,marginBottom:4},children:w.signature}),(0,Gn.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",rowGap:2},children:w.lines.map((function(e,n){return(0,Gn.jsxs)("div",{style:{fontSize:S.typography.fontSize.xs,color:S.colors.textSecondary},children:["- ",e]},n)}))})]})]})]})]}):(0,Gn.jsx)("div",{style:{display:"none"}});function O(e){var n=function(e){return e.toString().padStart(2,"0")};return"".concat(n(e.getHours()),":").concat(n(e.getMinutes()),":").concat(n(e.getSeconds()))}function L(e){switch(e){case"command":return S.colors.primary;case"error":return S.colors.error;case"warning":return S.colors.warning;case"success":return S.colors.success;default:return S.colors.text}}},Oa=e.memo(ja),La=function(e){var n=e.open,t=e.onClose,r=e.children,o=gt().theme;return(0,Gn.jsxs)("div",{style:{position:"fixed",top:56,right:0,height:"100%",width:"480px",background:o.colors.backgroundSecondary,transform:n?"translateX(0)":"translateX(100%)",transition:o.transitions.default,zIndex:2e3,display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(o.colors.border)},children:[(0,Gn.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid ".concat(o.colors.border),display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Gn.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:o.colors.primary}}),(0,Gn.jsx)("span",{style:{fontSize:o.typography.fontSize.sm,fontWeight:700,letterSpacing:"0.5px",textTransform:"uppercase",color:o.colors.text},children:"Properties Panel"})]}),(0,Gn.jsx)("button",{onClick:t,style:{border:"none",background:o.colors.surfaceHover,cursor:"pointer",fontSize:o.typography.fontSize.md,color:o.colors.text,padding:"6px 8px",borderRadius:o.borderRadius.md,width:"28px",height:"28px"},children:"\u2715"})]}),(0,Gn.jsx)("div",{style:{flex:1,overflow:"auto"},children:r})]})},Da=e.memo(La);function Fa(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nucleotide",r=e.rnaComplexIndex,o=e.rnaMoleculeName,a=e.nucleotideIndex;try{var i,l,s,u=n[r];if(!u)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var c=null===(i=u.rnaMoleculeProps)||void 0===i?void 0:i[o];if(!c)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var d=null===(l=c.nucleotideProps)||void 0===l?void 0:l[a];if(!d){var f=c.firstNucleotideIndex;if(void 0!==f&&!Number.isNaN(f)){var p,h=a-f;(d=null===(p=c.nucleotideProps)||void 0===p?void 0:p[h])&&(e.nucleotideIndex=h)}}if(!d){var m=c.firstNucleotideIndex;if(void 0!==m&&!Number.isNaN(m)){var x,g=a+m;d=null===(x=c.nucleotideProps)||void 0===x?void 0:x[g]}}if(!d)return{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a};var y,b,N,I,C={type:t,nucleotideSymbol:d.symbol,nucleotideIndex:a,rnaComplexIndex:r,rnaMoleculeName:o,complexName:u.name||"Complex ".concat(r),moleculeName:o,position:{x:d.x||0,y:d.y||0}};if(d.color)C.color=(null===(y=(b=d.color).asHex)||void 0===y?void 0:y.call(b))||(null===(N=(I=d.color).toString)||void 0===N?void 0:N.call(I))||"Unknown";var S=null===(s=u.basePairs)||void 0===s?void 0:s[o];if(S){var E=S[a];if(E){var w,A,k=E.partnerMolecule||o,P=null===(w=u.rnaMoleculeProps)||void 0===w?void 0:w[k],T=null===P||void 0===P||null===(A=P.nucleotideProps)||void 0===A?void 0:A[E.partnerIndex];C.basePairType=E.type||"Watson-Crick",C.basePairPartner={nucleotideIndex:E.partnerIndex,nucleotideSymbol:null===T||void 0===T?void 0:T.symbol,rnaMoleculeName:k}}}C.structureInfo=function(e,n,t,r){try{var o,a=(null===(o=t.basePairs)||void 0===o?void 0:o[r])||{},i=n.nucleotideProps||{},l=a[e];if(l){for(var s=l.partnerIndex,u=e,c=e,d=s,f=s;u>1;){var p=a[u-1];if(!p||p.partnerIndex!==d+1)break;u--,d++}for(var h=Math.max.apply(Math,v(Object.keys(i).map(Number)));c<h;){var m=a[c+1];if(!m||m.partnerIndex!==f-1)break;c++,f--}var x=c-u+1;if(x>=2){for(var g=0,y=u;y<=c;y++){var b=i[y];!b||"G"!==b.symbol&&"C"!==b.symbol||g++}var N=Math.round(g/x*100);return{type:x>=4?"helix":"stacked_helix",name:"Helix (".concat(u,"-").concat(c,")"),range:{start:u,end:c},helixInfo:{length:x,gcContent:N}}}}for(var I=e,C=e;I>1&&!a[I-1];)I--;for(var S=Math.max.apply(Math,v(Object.keys(i).map(Number)));C<S&&!a[C+1];)C++;if(C>I){var E=C-I+1,w=a[I-1]||a[C+1],A="single_strand",k="Single Strand (".concat(I,"-").concat(C,")");return w&&(E<=3?(A="bulge",k="Bulge (".concat(I,"-").concat(C,")")):E<=10?(A="loop",k="Loop (".concat(I,"-").concat(C,")")):(A="junction",k="Junction (".concat(I,"-").concat(C,")"))),{type:A,name:k,range:{start:I,end:C}}}return{type:"unknown",name:"Unknown Structure"}}catch(P){return console.warn("Error detecting structure info:",P),{type:"unknown",name:"Unknown Structure"}}}(a,c,u,o),"label"===t&&d.labelContentProps&&(C.labelContent=d.labelContentProps.text||d.labelContentProps.content);var M,R={};if(d.labelLineProps)R.hasLabelLine=!0,R.labelLinePoints=(null===(M=d.labelLineProps.points)||void 0===M?void 0:M.length)||0;return d.labelContentProps&&(R.hasLabelContent=!0,d.labelContentProps.font&&(R.labelFont=d.labelContentProps.font)),Object.keys(R).length>0&&(C.additionalInfo=R),C}catch(_){return console.warn("Error extracting element info:",_),{type:"unknown",rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a}}}for(var Ba,Wa,za=Ko("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),Ua=Ko("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Ga=function(e){var n=gt(),t=n.theme,r=n.isDarkMode,o=n.toggleTheme;return(0,Gn.jsx)("button",{onClick:o,className:"minimal-theme-toggle ".concat(e.className||""),style:{background:"transparent",border:"none",color:t.colors.textSecondary,fontSize:t.typography.fontSize.md,cursor:"pointer",padding:t.spacing.sm,borderRadius:t.borderRadius.md,transition:t.transitions.default,outline:"none"},onMouseEnter:function(e){e.currentTarget.style.color=t.colors.text,e.currentTarget.style.background=t.colors.surfaceHover},onMouseLeave:function(e){e.currentTarget.style.color=t.colors.textSecondary,e.currentTarget.style.background="transparent"},onFocus:function(e){e.currentTarget.style.boxShadow="0 0 0 2px ".concat(t.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.boxShadow="none"},title:r?"Switch to Light Mode":"Switch to Dark Mode",children:r?(0,Gn.jsx)(za,{size:18}):(0,Gn.jsx)(Ua,{size:18})})},Ha=Ga,Ka=Ko("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Va=Ko("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),qa=Ko("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Qa=Ko("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Xa=function(n){var t=n.value,r=n.options,o=n.onChange,a=n.theme,i=y((0,e.useState)(!1),2),l=i[0],s=i[1],u=y((0,e.useState)(null),2),c=u[0],d=u[1],f=(0,e.useRef)(null),p=r.find((function(e){return e.value===t}));return(0,e.useEffect)((function(){var e=function(e){f.current&&!f.current.contains(e.target)&&(s(!1),d(null))};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[]),(0,e.useEffect)((function(){l||d(null)}),[l]),(0,Gn.jsxs)("div",{ref:f,style:{position:"relative",minWidth:80},children:[(0,Gn.jsxs)("button",{onClick:function(){return s(!l)},style:{height:a.buttonSizes.md.height,padding:a.buttonSizes.md.padding,border:"1px solid ".concat(a.colors.border),borderRadius:a.buttonSizes.md.borderRadius,fontSize:a.buttonSizes.md.fontSize,background:a.colors.background,color:a.colors.text,cursor:"pointer",outline:"none",transition:a.transitions.default,fontFamily:a.typography.fontFamily,fontWeight:a.typography.fontWeight.normal,display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"100%"},onFocus:function(e){e.currentTarget.style.borderColor=a.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(a.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=a.colors.border,e.currentTarget.style.boxShadow="none"},children:[(0,Gn.jsx)("span",{children:(null===p||void 0===p?void 0:p.label)||"Select"}),(0,Gn.jsx)(Ka,{size:16,style:{transition:a.transitions.default,transform:l?"rotate(180deg)":"rotate(0deg)"}})]}),l&&(0,Gn.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:a.colors.surface,border:"1px solid ".concat(a.colors.border),borderRadius:a.borderRadius.md,boxShadow:a.shadows.lg,zIndex:1e3,maxHeight:240,overflowY:"auto",marginTop:4},children:r.map((function(e){return(0,Gn.jsx)("div",{onClick:function(){o(e.value),s(!1),d(null)},style:{padding:"8px 12px",cursor:"pointer",fontSize:a.typography.fontSize.sm,fontFamily:a.typography.fontFamily,borderBottom:"1px solid ".concat(a.colors.borderLight),transition:a.transitions.fast,background:e.value===t?a.colors.primary:"transparent",color:e.value===t?a.colors.textInverse:a.colors.text},onMouseEnter:function(n){if(e.value!==t&&(n.currentTarget.style.background=a.colors.surfaceHover),e.tooltip){var r=n.currentTarget.getBoundingClientRect();d({text:e.tooltip,x:Math.max(r.left+r.width/2,100),y:r.top-8})}},onMouseLeave:function(n){e.value!==t&&(n.currentTarget.style.background="transparent"),d(null)},children:e.label},e.value)}))}),c&&(0,Gn.jsxs)("div",{style:{position:"fixed",left:c.x,top:c.y,transform:"translateX(-50%) translateY(-100%)",background:a.colors.surface,color:a.colors.text,padding:"8px 12px",borderRadius:a.borderRadius.md,border:"1px solid ".concat(a.colors.border),boxShadow:a.shadows.lg,fontSize:a.typography.fontSize.sm,fontFamily:a.typography.fontFamily,whiteSpace:"nowrap",zIndex:1001,pointerEvents:"none"},children:[c.text,(0,Gn.jsx)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid ".concat(a.colors.surface),filter:"drop-shadow(0 1px 1px ".concat(a.colors.border,")")}})]})]})},Ya=(u(Ba={},mo.json,"Structured format, maximum support for all features"),u(Ba,mo.bpseq,"Base Pair Sequence - No support for non-canonical base pairs"),u(Ba,mo.svg,"Scalable Vector Graphics - Suitable for publications"),u(Ba,mo.csv,"Comma Separated Values - No support for non-canonical base pairs"),u(Ba,mo.tr,"Traveler Format - No support for non-canonical base pairs"),u(Ba,mo.xrna,"XRNA native format - No support for non-canonical base pairs"),Ba),$a=xo.map((function(e){return{value:e,label:e.toUpperCase(),tooltip:Ya[e]||"Export as ".concat(e.toUpperCase()," format")}})),Za=56,Ja=function(e){var n=e.onOpenFile,t=e.onSave,r=e.onExportWithFormat,o=e.fileName,a=void 0===o?"":o,i=e.onFileNameChange,l=e.exportFormat,s=e.exportFormats,u=void 0===s?$a:s,c=e.onExportFormatChange,d=e.downloadButtonReference,f=e.fileNameInputReference,p=e.saveButtonsDisabledFlag,h=e.onDownload,v=gt().theme;return(0,Gn.jsxs)("div",{style:{position:"absolute",top:0,left:gi,right:0,height:Za,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",background:v.colors.surface,borderBottom:"1px solid ".concat(v.colors.border),zIndex:1200,transition:v.transitions.default},children:[(0,Gn.jsx)("div",{style:{height:"4px",background:"linear-gradient(90deg, ".concat(v.colors.accent,", ").concat(v.colors.primary,")"),position:"absolute",top:0,left:0,right:0,zIndex:10}}),(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,Gn.jsx)(Yo,{label:"Open",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.click()},variant:"secondary",icon:(0,Gn.jsx)(Va,{size:12})}),(0,Gn.jsx)("input",{ref:function(e){null!==e&&(f.current=e)},style:{display:"none"},type:"file",accept:Po.map((function(e){return".".concat(e)})).join(","),onChange:n,onClick:function(e){e.currentTarget.value=""}}),(0,Gn.jsx)("input",{type:"text",placeholder:"Filename",value:a,onChange:function(e){return null===i||void 0===i?void 0:i(e.target.value)},style:{height:v.buttonSizes.md.height,padding:v.buttonSizes.md.padding,border:"1px solid ".concat(v.colors.border),borderRadius:v.buttonSizes.md.borderRadius,fontSize:v.buttonSizes.md.fontSize,background:v.colors.background,color:v.colors.text,minWidth:180,transition:v.transitions.default},onFocus:function(e){e.currentTarget.style.borderColor=v.colors.primary,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(v.colors.primary,"25")},onBlur:function(e){e.currentTarget.style.borderColor=v.colors.border,e.currentTarget.style.boxShadow="none"}}),(0,Gn.jsx)(Xa,{value:null!==l&&void 0!==l?l:"",options:u,onChange:function(e){return null===c||void 0===c?void 0:c(e)},theme:v}),t&&(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)(Yo,{label:"Save",onClick:t,disabled:p||!l,variant:"secondary",icon:(0,Gn.jsx)(qa,{size:12}),ref:d}),(0,Gn.jsx)(Yo,{label:"Export",variant:"primary",icon:(0,Gn.jsx)(Qa,{size:12}),disabled:p||!l,onClick:function(){l&&(null===r||void 0===r||r(a,l))}})]}),!t&&(0,Gn.jsx)(Yo,{label:"Download",onClick:h,disabled:p||!l,variant:"secondary",icon:(0,Gn.jsx)(ya,{size:12}),ref:d})]}),(0,Gn.jsx)(Ga,{})]})},ei=function(n){var t,r,o=n.mouseOverText,a=n.mouseOverTextDimensions,i=n.mouseUIPosition,l=n.parentDivResizeDetector,s=n.TOPBAR_HEIGHT,u=n.MOUSE_OVER_TEXT_FONT_SIZE,c=n.mouseOverTextSvgTextElementReference,d=(0,e.useMemo)((function(){return 0===o.length?null:(0,Gn.jsxs)(Gn.Fragment,{children:[(0,Gn.jsx)("rect",{x:0,y:0,width:a.width+16,height:a.height+16,fill:"#f8fafc",stroke:"#cbd5e1",rx:8,ry:8,strokeWidth:1.5}),(0,Gn.jsx)("text",{fill:"#1e293b",stroke:"none",x:8,y:8+u,ref:c,xmlSpace:"preserve",fontFamily:"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontSize:u,fontWeight:"500",children:o.split("\n").map((function(e,n){return(0,Gn.jsx)("tspan",{x:8,dy:0===n?0:1.4*u,children:e},n)}))})]})}),[o,a,u,c]),f=Math.max(0,Math.min(i.x+12,Math.max((null!==(t=l.width)&&void 0!==t?t:0)-gi,0)-(a.width+12))),p=Math.max(0,Math.min(i.y+12,Math.max((null!==(r=l.height)&&void 0!==r?r:0)-s,0)-(a.height+12)));return(0,Gn.jsx)("g",{id:"structure-tooltip",style:{display:"inline",filter:"url(#xrTooltipShadow)"},transform:"translate(".concat(f,", ").concat(p,")"),children:d})},ni=function(n){var t=n.settings,r=n.viewportWidth,o=n.viewportHeight,a=n.viewportScale,i=gt().isDarkMode,l=(t[Hn.GRID_ENABLED],t[Hn.GRID_HORIZONTAL_LINES]),s=t[Hn.GRID_VERTICAL_LINES],u=t[Hn.GRID_LEFT_RIGHT_DIAGONAL],c=t[Hn.GRID_RIGHT_LEFT_DIAGONAL],d=t[Hn.GRID_CONCENTRIC_CIRCLES],f=t[Hn.GRID_DOTTED],p=t[Hn.GRID_SPACING],h=t[Hn.GRID_COLOR],v=(0,e.useMemo)((function(){return h||(i?"#E0E0E0":"#404040")}),[h,i]),m=Math.max(10,.5*p),x=Math.max(1,m*a),g=Math.max(.3,Math.max(.1,a)),y=(0,e.useMemo)((function(){if(x<=0)return{left:0,right:0,top:0,bottom:0};var e=.2*Math.max(r,o),n=-e,t=r+e,a=-e,i=o+e;return{left:Math.floor(n/x)*x,right:Math.ceil(t/x)*x,top:Math.floor(a/x)*x,bottom:Math.ceil(i/x)*x}}),[r,o,x]),b=(0,e.useMemo)((function(){if(!l)return[];for(var e=[],n=y.top;n<=y.bottom;n+=x)e.push((0,Gn.jsx)("line",{x1:y.left,y1:n,x2:y.right,y2:n,stroke:v,strokeWidth:g,opacity:.25},"h-".concat(n)));return e}),[l,y,x,v,g]),N=(0,e.useMemo)((function(){if(!s)return[];for(var e=[],n=y.left;n<=y.right;n+=x)e.push((0,Gn.jsx)("line",{x1:n,y1:y.top,x2:n,y2:y.bottom,stroke:v,strokeWidth:g,opacity:.25},"v-".concat(n)));return e}),[s,y,x,v,g]),I=(0,e.useMemo)((function(){if(!u)return[];for(var e=x*Math.sqrt(2),n=Math.max(r,o),t=y.left-n,a=y.right+n,i=[],l=0;l<=a-t;l+=e){var s=t+l,c=y.top,d=s+n,f=y.bottom;i.push((0,Gn.jsx)("line",{x1:s,y1:c,x2:d,y2:f,stroke:v,strokeWidth:g,opacity:.15},"lr-".concat(l)))}return i}),[u,y,x,v,g,r,o]),C=(0,e.useMemo)((function(){if(!c)return[];for(var e=x*Math.sqrt(2),n=Math.max(r,o),t=y.left-n,a=y.right+n,i=[],l=0;l<=a-t;l+=e){var s=t+l,u=y.bottom,d=s+n,f=y.top;i.push((0,Gn.jsx)("line",{x1:s,y1:u,x2:d,y2:f,stroke:v,strokeWidth:g,opacity:.15},"rl-".concat(l)))}return i}),[c,y,x,v,g,r,o]),S=(0,e.useMemo)((function(){if(!d)return[];for(var e=r/2,n=o/2,t=.6*Math.max(r,o),a=[],i=x;i<=t;i+=x)a.push((0,Gn.jsx)("circle",{cx:e,cy:n,r:i,stroke:v,strokeWidth:g,fill:"none",opacity:.15},"c-".concat(i)));return a}),[d,x,v,g,r,o]),E=(0,e.useMemo)((function(){if(!f)return[];for(var e=[],n=2*x,t=1.5*Math.max(r,o),a=-t;a<=t;a+=n){var i=a,l=a+t,s=t;e.push((0,Gn.jsx)("line",{x1:i,y1:0,x2:l,y2:s,stroke:v,strokeWidth:.5*g,opacity:.1},"cross-lr-".concat(a)))}for(var u=-t;u<=t;u+=n){var c=u,d=t,p=u+t;e.push((0,Gn.jsx)("line",{x1:c,y1:d,x2:p,y2:0,stroke:v,strokeWidth:.5*g,opacity:.1},"cross-rl-".concat(u)))}return e}),[f,x,v,g,r,o]);return l||s||u||c||d||f?(0,Gn.jsxs)("g",{id:"canvas-grid","data-theme-ignore":!0,pointerEvents:"none",children:[b,N,I,C,S,E]}):null},ti=Ko("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ri=Ko("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),oi=Ko("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),ai=Ko("route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),ii=Ko("move-horizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]),li=Ko("move-vertical",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]]),si=Ko("move-up-left",[["path",{d:"M5 11V5H11",key:"3q78g9"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]]),ui=Ko("move-up-right",[["path",{d:"M13 5H19V11",key:"1n1gyv"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]]),ci=function(n){var t=n.settings,r=n.setSettings,o=n.onZoomIn,a=n.onZoomOut,i=n.onResetViewport,l=n.position,s=void 0===l?{top:80,right:20}:l,c=gt(),f=c.theme,p=c.isDarkMode,h=y((0,e.useState)(!1),2),v=h[0],m=h[1],x=function(){return m(!v)},g=function(e,n){r(d(d({},t),{},u({},e,n)))},b=function(n){var t=n.currentColor,r=n.onColorChange,o=n.label,a=y((0,e.useState)(!1),2),i=a[0],l=a[1],s=y((0,e.useState)(t||"#808080"),2),u=s[0],c=s[1],d=(0,e.useRef)(null);if((0,e.useEffect)((function(){if(i){var e=function(e){d.current&&(d.current.contains(e.target)||l(!1))};return document.addEventListener("mousedown",e),setTimeout((function(){var e;return null===(e=d.current)||void 0===e?void 0:e.focus()}),0),function(){return document.removeEventListener("mousedown",e)}}}),[i]),"Grid Lines"===o){var h=p?["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA"]:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"];return(0,Gn.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Gn.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,Gn.jsx)("label",{style:{color:f.colors.text,fontSize:"13px"},children:o})}),(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,Gn.jsxs)("div",{style:{position:"relative"},children:[(0,Gn.jsx)("button",{onClick:function(){i?l(!1):(c(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:p?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":f.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:f.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,Gn.jsxs)("div",{ref:d,style:{position:"absolute",top:"32px",left:0,background:f.colors.surface,border:"1px solid ".concat(f.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var n=/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:p?"#E0E0E0":"#404040";r(n),l(!1)}},children:[(0,Gn.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,Gn.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:"#808080",onChange:function(e){return c(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,Gn.jsx)("input",{type:"text",value:u,onChange:function(e){return c(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.border),background:f.colors.surface,color:f.colors.text,fontSize:"12px"}})]}),(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,Gn.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.border),background:f.colors.surface,color:f.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,Gn.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:p?"#E0E0E0":"#404040";r(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.primary),background:f.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),h.map((function(e){return(0,Gn.jsx)("button",{onClick:function(){r(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})}var v=p?["#E0E0E0","#B0B0B0","#808080","#404040"]:["#404040","#606060","#808080","#A0A0A0"];return(0,Gn.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Gn.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,Gn.jsx)("label",{style:{color:f.colors.text,fontSize:"13px"},children:o})}),(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[(0,Gn.jsxs)("div",{style:{position:"relative"},children:[(0,Gn.jsx)("button",{onClick:function(){i?l(!1):(c(t&&/^#([0-9A-Fa-f]{3}){1,2}$/.test(t)?t:p?"#E0E0E0":"#404040"),l(!0))},title:"Pick custom color",style:{width:"24px",height:"24px",borderRadius:"6px",background:t||"transparent",border:"2px solid ".concat(i?"#007AFF":f.colors.border),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:f.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease"},children:t?"":"..."}),i&&(0,Gn.jsxs)("div",{ref:d,style:{position:"absolute",top:"32px",left:0,background:f.colors.surface,border:"1px solid ".concat(f.colors.border),borderRadius:"10px",padding:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.2)",zIndex:2e3,minWidth:"200px"},tabIndex:-1,onKeyDown:function(e){if("Escape"===e.key&&l(!1),"Enter"===e.key){var n=/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:p?"#E0E0E0":"#404040";r(n),l(!1)}},children:[(0,Gn.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[(0,Gn.jsx)("input",{type:"color",value:/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:"#808080",onChange:function(e){return c(e.target.value)},style:{width:"40px",height:"32px",border:"none",padding:0,background:"transparent",cursor:"pointer"}}),(0,Gn.jsx)("input",{type:"text",value:u,onChange:function(e){return c(e.target.value)},placeholder:"#RRGGBB",style:{flex:1,padding:"8px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.border),background:f.colors.surface,color:f.colors.text,fontSize:"12px"}})]}),(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,Gn.jsx)("button",{onClick:function(){return l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.border),background:f.colors.surface,color:f.colors.textSecondary,cursor:"pointer",fontSize:"12px"},children:"Cancel"}),(0,Gn.jsx)("button",{onClick:function(){var e=/^#([0-9A-Fa-f]{3}){1,2}$/.test(u)?u:p?"#E0E0E0":"#404040";r(e),l(!1)},style:{padding:"6px 10px",borderRadius:"8px",border:"1px solid ".concat(f.colors.primary),background:f.colors.primary,color:"#FFFFFF",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"OK"})]})]})]}),v.map((function(e){return(0,Gn.jsx)("button",{onClick:function(){r(e),i&&l(!1)},style:{width:"24px",height:"24px",background:e,border:"2px solid ".concat(t===e?"#007AFF":"transparent"),borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},title:e},e)}))]})]})},N=function(e){var n=e.setting,o=e.icon,a=e.label,i=e.isActive,l=e.onMouseEnter,s=e.onMouseLeave;return(0,Gn.jsxs)("button",{onClick:function(){return function(e){r(d(d({},t),{},u({},e,!t[e])))}(n)},onMouseEnter:l,onMouseLeave:s,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:i?f.colors.primary:"transparent",color:i?"#FFFFFF":f.colors.text,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:a,children:[(0,Gn.jsx)(o,{size:20}),(0,Gn.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:a})]})};return(0,Gn.jsxs)("div",{style:{position:"absolute",top:s.top,right:s.right,zIndex:1e3,display:"flex",flexDirection:"column",gap:"12px",alignItems:"flex-end"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center"},children:[(0,Gn.jsx)("button",{onClick:o,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:f.colors.surface,color:f.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom In",children:(0,Gn.jsx)(ti,{size:20})}),(0,Gn.jsx)("button",{onClick:a,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:f.colors.surface,color:f.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Zoom Out",children:(0,Gn.jsx)(ri,{size:20})}),(0,Gn.jsx)("button",{onClick:i,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:f.colors.surface,color:f.colors.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transition:"all 0.2s ease"},title:"Reset View",children:(0,Gn.jsx)(ta,{size:20})})]}),(0,Gn.jsxs)("div",{style:{position:"relative"},children:[(0,Gn.jsx)("button",{onClick:x,style:{width:"35px",height:"35px",borderRadius:"50%",border:"none",background:f.colors.primary,color:"#FFFFFF",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",transition:"all 0.2s ease",transform:v?"rotate(90deg)":"rotate(0deg)"},title:"View Settings",children:(0,Gn.jsx)(pa,{size:20})}),v&&(0,Gn.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"12px",background:f.colors.surface,border:"1px solid ".concat(f.colors.border),borderRadius:"16px",padding:"20px",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",minWidth:"320px",zIndex:1e3},children:[(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Gn.jsx)("h3",{style:{margin:0,color:f.colors.text,fontSize:"18px",fontWeight:"600"},children:"View Settings"}),(0,Gn.jsx)("button",{onClick:x,style:{background:"none",border:"none",color:f.colors.text,cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Gn.jsx)(xa,{size:20})})]}),(0,Gn.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Gn.jsx)("h4",{style:{margin:"0 0 12px 0",color:f.colors.text,fontSize:"14px",fontWeight:"500"},children:"Layout modes"}),(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",padding:"4px",background:f.colors.backgroundSecondary,borderRadius:"10px"},children:[(0,Gn.jsxs)("button",{onClick:function(){return r(d(d({},t),{},u({},Hn.PATH_MODE,!1)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[Hn.PATH_MODE]?"transparent":f.colors.primary,color:t[Hn.PATH_MODE]?f.colors.text:"#FFFFFF",cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show nucleotide sequence text",children:[(0,Gn.jsx)(oi,{size:16}),"Sequence"]}),(0,Gn.jsxs)("button",{onClick:function(){return r(d(d({},t),{},u({},Hn.PATH_MODE,!0)))},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px 12px",borderRadius:"8px",border:"none",background:t[Hn.PATH_MODE]?f.colors.primary:"transparent",color:t[Hn.PATH_MODE]?"#FFFFFF":f.colors.text,cursor:"pointer",transition:"all 0.2s ease",fontSize:"13px",fontWeight:"600"},title:"Show path lines tracing nucleotide centers",children:[(0,Gn.jsx)(ai,{size:16}),"Path"]})]}),(0,Gn.jsx)("p",{style:{margin:"8px 0 0 0",color:f.colors.textSecondary,fontSize:"11px",lineHeight:"1.4"},children:t[Hn.PATH_MODE]?"Path mode shows lines tracing nucleotide centers for an abstracted view of larger structures.":"Sequence mode displays nucleotide text with full details."})]}),(0,Gn.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Gn.jsx)("h4",{style:{margin:"0 0 12px 0",color:f.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Types"}),(0,Gn.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[(0,Gn.jsx)(N,{setting:Hn.GRID_HORIZONTAL_LINES,icon:ii,label:"Horizontal",isActive:t[Hn.GRID_HORIZONTAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,Gn.jsx)(N,{setting:Hn.GRID_VERTICAL_LINES,icon:li,label:"Vertical",isActive:t[Hn.GRID_VERTICAL_LINES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,Gn.jsx)(N,{setting:Hn.GRID_LEFT_RIGHT_DIAGONAL,icon:si,label:"LR Diagonal",isActive:t[Hn.GRID_LEFT_RIGHT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,Gn.jsx)(N,{setting:Hn.GRID_RIGHT_LEFT_DIAGONAL,icon:ui,label:"RL Diagonal",isActive:t[Hn.GRID_RIGHT_LEFT_DIAGONAL],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,Gn.jsx)(N,{setting:Hn.GRID_CONCENTRIC_CIRCLES,icon:sa,label:"Circles",isActive:t[Hn.GRID_CONCENTRIC_CIRCLES],onMouseEnter:function(){},onMouseLeave:function(){}}),(0,Gn.jsxs)("button",{onClick:function(){var e,n=(u(e={},Hn.GRID_ENABLED,$n[Hn.GRID_ENABLED]),u(e,Hn.GRID_HORIZONTAL_LINES,$n[Hn.GRID_HORIZONTAL_LINES]),u(e,Hn.GRID_VERTICAL_LINES,$n[Hn.GRID_VERTICAL_LINES]),u(e,Hn.GRID_LEFT_RIGHT_DIAGONAL,$n[Hn.GRID_LEFT_RIGHT_DIAGONAL]),u(e,Hn.GRID_RIGHT_LEFT_DIAGONAL,$n[Hn.GRID_RIGHT_LEFT_DIAGONAL]),u(e,Hn.GRID_CONCENTRIC_CIRCLES,$n[Hn.GRID_CONCENTRIC_CIRCLES]),u(e,Hn.GRID_DOTTED,$n[Hn.GRID_DOTTED]),u(e,Hn.GRID_SPACING,$n[Hn.GRID_SPACING]),u(e,Hn.GRID_COLOR,$n[Hn.GRID_COLOR]),u(e,Hn.CANVAS_COLOR,$n[Hn.CANVAS_COLOR]),e);r(d(d({},t),n))},onMouseEnter:function(e){e.currentTarget.style.background=f.colors.surfaceHover,e.currentTarget.style.borderColor=f.colors.borderDark,e.currentTarget.style.color=f.colors.text},onMouseLeave:function(e){e.currentTarget.style.background=f.colors.surface,e.currentTarget.style.borderColor=f.colors.border,e.currentTarget.style.color=f.colors.textSecondary},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px",borderRadius:"8px",border:"none",background:"transparent",color:f.colors.textSecondary,cursor:"pointer",transition:"all 0.2s ease",minWidth:"48px",minHeight:"48px",justifyContent:"center"},title:"Reset all canvas and grid settings to default",children:[(0,Gn.jsx)(ta,{size:20}),(0,Gn.jsx)("span",{style:{fontSize:"10px",textAlign:"center"},children:"Reset"})]})]})]}),(0,Gn.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Gn.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,Gn.jsx)("label",{style:{color:f.colors.text,fontSize:"14px",fontWeight:"500"},children:"Grid Spacing"}),(0,Gn.jsx)("span",{style:{color:f.colors.textSecondary,fontSize:"12px"},children:t[Hn.GRID_SPACING]})]}),(0,Gn.jsx)("input",{type:"range",min:"5",max:"100",step:"2",value:t[Hn.GRID_SPACING],onChange:function(e){return r(d(d({},t),{},u({},Hn.GRID_SPACING,parseInt(e.target.value))))},style:{width:"100%",height:"6px",borderRadius:"3px",background:f.colors.border,outline:"none",cursor:"pointer"}})]}),(0,Gn.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,Gn.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:(0,Gn.jsx)("h4",{style:{margin:0,color:f.colors.text,fontSize:"14px",fontWeight:"500"},children:"Colors"})}),(0,Gn.jsx)(b,{currentColor:t[Hn.CANVAS_COLOR],onColorChange:function(e){return g(Hn.CANVAS_COLOR,e)},label:"Canvas Background"}),(0,Gn.jsx)(b,{currentColor:t[Hn.GRID_COLOR],onColorChange:function(e){return g(Hn.GRID_COLOR,e)},label:"Grid Lines"})]})]})]})]})},di=e.memo(ci),fi={},pi=-50;pi<=50;pi++)fi[pi]=Math.pow(Ye,pi);var hi,vi={top:80,right:17},mi=function(){return function(){var e=(new Date).toISOString().replace(/[:.]/g,"-").replace("T","_").replace("Z","");return"exo_".concat(e)}()},xi=[{shortcut:"Ctrl/cmd + O",action:"Open file picker"},{shortcut:"Ctrl/cmd + S",action:"Save"},{shortcut:"Ctrl/cmd + Shift + S",action:"Export as"},{shortcut:"Ctrl/cmd + 0",action:"Reset viewport"},{shortcut:"Left click",action:"Select constraint"},{shortcut:"Right click",action:"Open constraint menu"},{shortcut:"Ctrl/cmd + Z",action:"Undo change"},{shortcut:"Ctrl/cmd + Y",action:"Redo change"},{shortcut:"Middle click",action:"Freeze selection"},{shortcut:"Ctrl/cmd + click",action:"Break or create pair"},{shortcut:"Ctrl/cmd + Shift + click",action:"Create & reposition pair"},{shortcut:"Shift + R",action:"Recenter constraint"}],gi=420,yi="viewport",bi="testSpace",Ni="mouse_over_text_group",Ii="svg_background",Ci="svg_scene_group",Si="nucleotide",Ei="basePair",wi="label",Ai="noStroke",ki="|",Pi=function(e){return e.URL_PARSING_ERROR="URL parsing error",e.NO_DATA="No data",e.DATA_IS_LOADING="Data is loading",e.DATA_IS_LOADED="Data is loaded",e.DATA_LOADING_FAILED="Data loading failed",e}(Pi||{}),Ti=(u(Wa={},b.EDIT,"red"),u(Wa,b.FORMAT,"blue"),u(Wa,b.ANNOTATE,"rgb(0,110,51)"),Wa);(hi||(hi={})).Component=function(n){var t,r,o,i,s,c,f=n.r2dtLegacyVersionFlag,p=y((0,e.useState)(""),2),h=p[0],x=p[1],g=y((0,e.useState)({}),2),I=g[0],C=g[1],E=y((0,e.useState)(0),2),k=E[0],T=E[1],M=y((0,e.useState)(""),2),_=(M[0],M[1]),j=y((0,e.useState)(""),2),z=j[0],U=j[1],H=y((0,e.useState)(mo.json),2),K=H[0],V=H[1],q=y((0,e.useState)({x:0,y:0,width:1,height:1}),2),Y=q[0],$=q[1],Z=y((0,e.useState)({}),2),J=Z[0],ee=Z[1],ne=y((0,e.useState)(!1),2),te=ne[0],re=(ne[1],y((0,e.useState)({}),2)),oe=re[0],ae=re[1],ie=y((0,e.useState)([]),2),le=ie[0],se=ie[1],ue=y((0,e.useState)([]),2),ce=ue[0],de=ue[1],pe=y((0,e.useState)(b.EDIT),2),ve=pe[0],me=pe[1],xe=(0,e.useRef)(b.EDIT);(0,e.useEffect)((function(){xe.current=ve}),[ve]),(0,e.useEffect)((function(){var e=function(e){if("f"===e.key||"F"===e.key){var n=e.target;if("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable)return;e.preventDefault();var t=Gr.current,r=Ur.current;if(!(Object.keys(t).length>0))return;for(var o=!1,a=0,i=Object.entries(t);a<i.length;a++){var l=y(i[a],2),s=l[0],u=l[1],c=Number.parseInt(s);if(c in r)for(var d=0,f=Object.entries(u);d<f.length;d++){var p=y(f[d],2),h=p[0],x=p[1];if(h in r[c]){var g,b=m(x);try{for(b.s();!(g=b.n()).done;){var N=g.value;if(r[c][h].has(N)){o=!0;break}}}catch(J){b.e(J)}finally{b.f()}}if(o)break}if(o)break}if(o){for(var I=structuredClone(r),C=0,S=Object.entries(t);C<S.length;C++){var E=y(S[C],2),w=E[0],A=E[1],k=Number.parseInt(w);if(k in I){for(var P=0,T=Object.entries(A);P<T.length;P++){var M=y(T[P],2),R=M[0],_=M[1];if(R in I[k]){var j,O=m(_);try{for(O.s();!(j=O.n()).done;){var L=j.value;I[k][R].delete(L)}}catch(J){O.e(J)}finally{O.f()}0===I[k][R].size&&delete I[k][R]}}0===Object.keys(I[k]).length&&delete I[k]}}ae(I)}else{for(var D=structuredClone(r),F=0,B=Object.entries(t);F<B.length;F++){var W=y(B[F],2),z=W[0],U=W[1],G=Number.parseInt(z);G in D||(D[G]={});for(var H=0,K=Object.entries(U);H<K.length;H++){var V=y(K[H],2),q=V[0],Q=V[1];q in D[G]||(D[G][q]=new Set);var X,Y=m(Q);try{for(Y.s();!(X=Y.n()).done;){var $=X.value;D[G][q].add($)}}catch(J){Y.e(J)}finally{Y.f()}}}ae(D)}var Z=Hr.current;se([].concat(v(Z),[structuredClone(r)])),de([])}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]);var ye=y((0,e.useState)(Wr.Enum.SINGLE_NUCLEOTIDE),2),Ne=ye[0],Ie=ye[1],Ce=y((0,e.useState)($n),2),Se=Ce[0],Ee=Ce[1],Ae=y((0,e.useState)((0,Gn.jsx)(Gn.Fragment,{})),2),ke=Ae[0],Pe=Ae[1],Te=y((0,e.useState)({}),2),Me=Te[0],Re=Te[1],_e=y((0,e.useState)({}),2),je=_e[0],Oe=_e[1],Le=y((0,e.useState)(Pi.NO_DATA),2),De=Le[0],Fe=Le[1],Be=y((0,e.useState)(""),2),We=Be[0],ze=Be[1],Ue=y((0,e.useState)({width:0,height:0}),2),Ge=Ue[0],He=Ue[1],Ke=y((0,e.useState)({x:0,y:0}),2),Ve=Ke[0],qe=Ke[1],Xe=y((0,e.useState)({x:0,y:0}),2),$e=Xe[0],Ze=Xe[1],Je=y((0,e.useState)(void 0),2),nn=Je[0],tn=Je[1],rn=y((0,e.useState)({x:0,y:0}),2),on=rn[0],an=rn[1],ln=y((0,e.useState)(null),2),sn=ln[0],un=ln[1],cn=y((0,e.useState)(!1),2),fn=cn[0],pn=cn[1],hn=y((0,e.useState)(""),2),mn=hn[0],xn=hn[1],gn=y((0,e.useState)(""),2),yn=(gn[0],gn[1]),bn=y((0,e.useState)(""),2),Nn=bn[0],In=bn[1],Cn=y((0,e.useState)(""),2),Sn=Cn[0],En=Cn[1],kn=y((0,e.useState)(Wr.DEFAULT_OPTIONS),2),Tn=kn[0],Mn=kn[1],Rn=y((0,e.useState)((0,Gn.jsx)(Gn.Fragment,{})),2),_n=Rn[0],jn=(Rn[1],y((0,e.useState)({}),2)),On=jn[0],Ln=jn[1],Dn=y((0,e.useState)({}),2),Fn=Dn[0],Bn=Dn[1],Wn=y((0,e.useState)({}),2),zn=Wn[0],Un=Wn[1],Kn=y((0,e.useState)({}),2),Vn=Kn[0],qn=Kn[1],Qn=y((0,e.useState)(""),2),Xn=(Qn[0],Qn[1]),Zn=y((0,e.useState)(void 0),2),Jn=Zn[0],nt=Zn[1],tt=y((0,e.useState)(0),2),ot=tt[0],at=tt[1],it=y((0,e.useState)(0),2),lt=it[0],st=it[1],ut=y((0,e.useState)(1),2),ct=ut[0],dt=ut[1],ft=y((0,e.useState)(0),2),pt=ft[0],ht=ft[1],vt=y((0,e.useState)([]),2),mt=vt[0],xt=vt[1],gt=y((0,e.useState)(void 0),2),yt=gt[0],bt=gt[1],Nt=y((0,e.useState)(0),2),It=Nt[0],Ct=Nt[1],St=y((0,e.useState)(0),2),Et=St[0],wt=St[1],At=function(e){return e.NONE="none",e.PROPERTIES="properties",e.BASEPAIR="basepair",e.BASE_PAIR_EDITOR="basePairEditor",e.SETTINGS="settings",e.ABOUT="about",e}({}),kt=y((0,e.useState)(At.NONE),2),Pt=kt[0],Tt=kt[1],Mt=y((0,e.useState)(!1),2),Rt=Mt[0],_t=Mt[1],jt=y((0,e.useState)(""),2),Ot=(jt[0],jt[1]),Lt=y((0,e.useState)(void 0),2),Dt=(Lt[0],Lt[1]),Ft=y((0,e.useState)({}),2),Bt=Ft[0],Wt=Ft[1],zt=y((0,e.useState)([]),2),Ut=zt[0],Gt=zt[1],Ht=(0,e.useRef)(Ut);Ht.current=Ut;var Kt=y((0,e.useState)(void 0),2),Vt=Kt[0],qt=Kt[1],Qt=y((0,e.useState)((function(){return function(e){return e}})),2),Xt=Qt[0],Yt=Qt[1],$t=(0,e.useRef)(Xt);$t.current=Xt;var Zt=y((0,e.useState)(!1),2),Jt=Zt[0],er=Zt[1],nr=(0,e.useRef)(Jt);nr.current=Jt;var tr=y((0,e.useState)(!1),2),rr=tr[0],or=tr[1],ar=(0,e.useRef)(rr);function ir(e,n){null!==e&&an(e.initiateDrag()),un(e),qn(n)}ar.current=rr;var lr=(0,e.useRef)(null),sr=(0,e.createRef)(),ur=function(n){void 0===n&&(n={});var t=n.skipOnMount,r=void 0!==t&&t,o=n.refreshMode,a=n.refreshRate,i=void 0===a?1e3:a,l=n.refreshOptions,s=n.handleWidth,u=void 0===s||s,c=n.handleHeight,d=void 0===c||c,f=n.targetRef,p=n.observerOptions,h=n.onResize,v=(0,e.useRef)(r),m=(0,e.useRef)(null),x=(0,e.useRef)(),g=null!==f&&void 0!==f?f:m,y=(0,e.useState)({width:void 0,height:void 0}),b=y[0],N=y[1];return be((function(){if(u||d){var e=ge(h,N,u,d);x.current=he((function(n){(u||d)&&n.forEach((function(n){var t=n&&n.contentRect||{},r=t.width,o=t.height;!v.current&&e({width:r,height:o}),v.current=!1}))}),o,i,l);var n=new window.ResizeObserver(x.current);return g.current&&n.observe(g.current,p),function(){var e,t;n.disconnect(),null===(t=(e=x.current).cancel)||void 0===t||t.call(e)}}}),[o,i,l,u,d,h,p,g.current]),fe({ref:g},b)}(),cr=(0,e.useRef)(Ne);cr.current=Ne;var dr=(0,e.useRef)();dr.current=ve;var fr=(0,e.useRef)(NaN);fr.current=ot;var pr=(0,e.useRef)(NaN);pr.current=lt;var hr=(0,e.useRef)();hr.current=I;var vr=(0,e.useRef)(),mr=(0,e.useRef)();mr.current=Tn;var xr=(0,e.useRef)();xr.current=On;var gr=(0,e.useRef)();gr.current=Fn;var yr=(0,e.useRef)();yr.current=sn;var br=(0,e.useRef)();br.current=$e;var Nr=(0,e.useRef)();Nr.current=on;var Ir=(0,e.useRef)(),Cr=(0,e.useRef)();Cr.current=ct;var Sr=(0,e.useRef)(),Er=(0,e.useRef)(),wr=(0,e.useRef)();wr.current=pt;var Ar=(0,e.useRef)(),kr=(0,e.useRef)();kr.current=Y;var Pr=(0,e.useRef)();Pr.current=fn,(0,e.useRef)().current=_n;var Tr=(0,e.useRef)();Tr.current=Se;var Mr=(0,e.useRef)();Mr.current=z;var Rr=(0,e.useRef)();Rr.current=K,(0,e.useRef)().current=mn;var _r=(0,e.useRef)(null),jr=(0,e.useRef)(0);jr.current=k;var Or=(0,e.useRef)(),Lr=(0,e.useRef)(),Dr=(0,e.useRef)();Dr.current=nn;var Fr=(0,e.useRef)(),Br=(0,e.useRef)(),Ur=(0,e.useRef)();Ur.current=oe;var Gr=(0,e.useRef)();Gr.current=zn;var Hr=(0,e.useRef)();Hr.current=le;var Vr=(0,e.useRef)();Vr.current=ce;var qr=(0,e.useRef)();qr.current=J;var Qr=(0,e.useRef)();Qr.current=h;var Xr=(0,e.useRef)();Xr.current=yt;var Yr=(0,e.useRef)();Yr.current=Jn,(0,e.useEffect)((function(){if(!R(I)&&""===z){var e=mi();U(e),Mr.current=e}}),[I,z]),(0,e.useEffect)((function(){R(I)||void 0!==K||(V(mo.json),Rr.current=mo.json)}),[I,K]);var $r=f?yo:go,eo=(0,e.useMemo)((function(){return{initiateDrag:function(){return{x:fr.current,y:pr.current}},continueDrag:function(e){at(e.x),st(e.y)}}}),[]),no=(0,e.useMemo)((function(){var e=Object.entries(I);return T(e.length),Fr.current=e,e}),[I]),lo=(0,e.useMemo)((function(){var e;return Math.max((null!==(e=ur.width)&&void 0!==e?e:0)-gi,0)}),[ur.width,gi]),so=(0,e.useMemo)((function(){var e;return Math.max((null!==(e=ur.height)&&void 0!==e?e:0)-Za,0)}),[ur.height,Za]),uo=(0,e.useMemo)((function(){return{width:1/(Y.width+7),height:1/Y.height}}),[Y]),co=(0,e.useMemo)((function(){return window.widthScale=lo,window.heightScale=so,Math.min(lo*uo.width,so*uo.height)}),[lo,so,uo]);Ir.current=co;var fo=(0,e.useMemo)((function(){var e={x:-Y.x,y:-(Y.y+Y.height)},n={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return Or.current=n,n}),[Y]),po=(0,e.useMemo)((function(){var e={x:ot,y:lt},n={asVector:e,asString:"translate(".concat(e.x,", ").concat(e.y,")")};return Lr.current=n,n}),[ot,lt]),ho=(0,e.useMemo)((function(){var e=ct*co;return{positiveScale:e,negativeScale:1/e,asTransform:["scale(".concat(co,")"),"scale(".concat(ct,")")]}}),[ct,co]);Ar.current=ho;var vo=(0,e.useMemo)((function(){if(!Jn)return null;var e=Jn.rnaComplexIndex,n=Jn.rnaMoleculeName,t=Jn.nucleotideIndex,r=hr.current;if(!r||!(e in r))return null;var o=r[e].rnaMoleculeProps[n];if(!o||!(t in o.nucleotideProps))return null;var a=o.nucleotideProps[t],i=Math.max(1.5*Et,6*Qe);return(0,Gn.jsxs)("g",{children:[(0,Gn.jsx)("circle",{cx:a.x,cy:a.y,r:i+1,fill:"rgba(99, 102, 241, 0.12)",stroke:"rgba(99, 102, 241, 0.25)",strokeWidth:1,pointerEvents:"none"}),(0,Gn.jsx)("circle",{cx:a.x,cy:a.y,r:i,fill:"rgba(99, 102, 241, 0.15)",stroke:"none",strokeWidth:0,opacity:.8,pointerEvents:"none"})]})}),[Jn,Et]),xo=(0,e.useMemo)((function(){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr.current;if(dr.current===b.EDIT){if(void 0===n||!Wr.isEnum(n))return void Uo((0,Gn.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{});var t=hr.current,r=mr.current;try{var o=Ur.current,a=new Wr.record[n](t,Re,Oe,xt,ve,o,r,e);Uo((0,Gn.jsx)(Oo.Component,{rnaComplexProps:t,indicesOfAffectedNucleotides:a.indicesOfAffectedNucleotides,setNucleotideKeysToRerender:Re}),a.indicesOfAffectedNucleotides)}catch(i){if("object"!==typeof i||!("errorMessage"in i))throw i;Tt(At.PROPERTIES),Uo((0,Gn.jsx)("b",{style:{color:"red"},children:i.errorMessage}),{})}}}}),[]),bo=(0,e.useMemo)((function(){return function(e,n){var t=n.rnaComplexIndex,r=n.rnaMoleculeName,o=n.nucleotideIndex;if(e.ctrlKey&&e.button===en.Left){e.preventDefault(),e.stopPropagation(),wo();var a=hr.current[t].rnaMoleculeProps[r].nucleotideProps[o],i=!1;return void 0!==a.labelContentProps&&(delete a.labelContentProps,i=!0),void 0!==a.labelLineProps&&(delete a.labelLineProps,i=!0),void(i&&Re(u({},t,u({},r,[o]))))}switch(e.button){case en.Left:var l=eo;if(dr.current===b.EDIT){var s=hr.current[t].rnaMoleculeProps[r].nucleotideProps[o],c=s.labelContentProps;l={initiateDrag:function(){return{x:c.x,y:c.y}},continueDrag:function(e){s.labelContentProps=d(d({},c),e),c.x=e.x,c.y=e.y,Re(u({},t,u({},r,[o])))}}}var f=new Set;f.add(o),ir(l,u({},t,u({},r,f)));break;case en.Right:xo(n)}}}),[]),No=(0,e.useMemo)((function(){return function(e,n,t){var r=n.rnaComplexIndex,o=n.rnaMoleculeName,a=n.nucleotideIndex;if(e.ctrlKey&&e.button===en.Left){e.preventDefault(),e.stopPropagation(),wo();var i=hr.current[r].rnaMoleculeProps[o].nucleotideProps[a],l=!1;return void 0!==i.labelContentProps&&(delete i.labelContentProps,l=!0),void 0!==i.labelLineProps&&(delete i.labelLineProps,l=!0),void(l&&Re(u({},r,u({},o,[a]))))}var s=hr.current[r].rnaMoleculeProps[o].nucleotideProps[a].labelLineProps;switch(e.button){case en.Left:var c=eo;if(dr.current===b.EDIT){var d=s.points[0],f=s.points.map((function(e){return L(e,d)}));c={initiateDrag:function(){return{x:d.x,y:d.y}},continueDrag:function(e){for(var n=0;n<s.points.length;n++){var i=s.points[n],l=O(e,f[n]);i.x=l.x,i.y=l.y}t(),Re(u({},r,u({},o,[a])))}}}var p=new Set;p.add(a),ir(c,u({},r,u({},o,p)));break;case en.Right:xo(n)}}}),[]),Io=(0,e.useMemo)((function(){return function(e,n,t,r){var o=n.rnaComplexIndex,a=n.rnaMoleculeName,i=n.nucleotideIndex;if(e.ctrlKey&&e.button===en.Left){e.preventDefault(),e.stopPropagation(),wo();var l=hr.current[o].rnaMoleculeProps[a].nucleotideProps[i],s=!1;return void 0!==l.labelContentProps&&(delete l.labelContentProps,s=!0),void 0!==l.labelLineProps&&(delete l.labelLineProps,s=!0),void(s&&Re(u({},o,u({},a,[i]))))}var c=hr.current[o].rnaMoleculeProps[a].nucleotideProps[i].labelLineProps;switch(e.button){case en.Left:var d=eo;if(dr.current===b.EDIT){var f=c.points[t];d={initiateDrag:function(){return{x:f.x,y:f.y}},continueDrag:function(e){f.x=e.x,f.y=e.y,r(),Re(u({},o,u({},a,[i])))}}}var p=new Set;p.add(i),ir(d,u({},o,u({},a,p)));break;case en.Right:dr.current===b.EDIT&&xo(n)}}}),[]),Co=(0,e.useMemo)((function(){return function(e,n,t){var r=Ur.current,o=mr.current;try{var a=new Wr.record[n](hr.current,Re,Oe,xt,t,r,o,e);if(t===b.FORMAT)return _t(!0),qt(void 0),void Yt((function(){return function(e){return a.constrainRelevantHelices(e)}}));var i=a.createRightClickMenu(t);pn(!fn),Uo(i,a.indicesOfAffectedNucleotides)}catch(l){if("object"!==typeof l||!("errorMessage"in l))throw l;return void(t===b.FORMAT?(_t(!0),qt(l.errorMessage)):(Tt(At.PROPERTIES),Uo((0,Gn.jsx)("b",{style:{color:"red"},children:l.errorMessage}),{})))}}}),[]),So=(0,e.useCallback)((function(e,n){var t=Ht.current,r=y([e,n].sort(oo),2);e=r[0],n=r[1];for(var o=-1,a=-1,i=[],l=0;l<t.length;l++){var s=t[l],u=s.rnaComplexIndex,c=s.rnaMoleculeName0,d=s.rnaMoleculeName1,f=s.start,p=s.stop;if(u===e.rnaComplexIndex&&c===e.rnaMoleculeName&&d===n.rnaMoleculeName){var h=Math.abs(p[0]-f[0])+1,v=void 0,m=void 0;if(1===h){v=1;var x=n.nucleotideIndex-p[1];if(1!==Math.abs(x))continue;m=x}else v=Math.sign(p[0]-f[0]),m=Math.sign(p[1]-f[1]);var g={lesser:[p[0]+v,p[1]+m],greater:[f[0]-v,f[1]-m]};e.nucleotideIndex!==g.lesser[0]||n.nucleotideIndex!==g.lesser[1]||-1===h&&-1!==o?e.nucleotideIndex!==g.greater[0]||n.nucleotideIndex!==g.greater[1]||-1===h&&-1!==a||(a=l):o=l,i[l]=v*m}}if(-1!==o&&-1!==a&&i[o]*i[a]<0&&(i[o]<0?a=-1:o=-1),-1===o&&-1===a){var b={rnaComplexIndex:e.rnaComplexIndex,rnaMoleculeName0:e.rnaMoleculeName,rnaMoleculeName1:n.rnaMoleculeName,start:{0:e.nucleotideIndex,1:n.nucleotideIndex},stop:{0:e.nucleotideIndex,1:n.nucleotideIndex}};A(t,(function(e){var n=e.rnaComplexIndex,t=e.rnaMoleculeName0,r=e.rnaMoleculeName1,o=e.start;return e.stop,n-b.rnaComplexIndex||t.localeCompare(b.rnaMoleculeName0)||r.localeCompare(b.rnaMoleculeName1)||o[0]-b.start[0]||o[1]-b.start[1]}),0,[b],w.ADD)}else if(-1!==o&&-1!==a){var N=t[o],I=t[a];N.stop=structuredClone(I.stop),t.splice(a,1)}else if(-1!==o){var C=t[o],S=C.start,E=C.stop;if(1===Math.abs(E[0]-S[0])+1){var k=y([S[0],e.nucleotideIndex].sort(P),2),T=k[0],M=k[1],R=y([S[1],n.nucleotideIndex].sort(P),2),_=R[0],j=R[1];C.start=[T,j],C.stop=[M,_]}else C.stop=[e.nucleotideIndex,n.nucleotideIndex]}else{var O=t[a],L=O.start,D=O.stop;if(1===Math.abs(D[0]-L[0])+1){var F=y([L[0],e.nucleotideIndex].sort(P),2),B=F[0],W=F[1],z=y([L[1],n.nucleotideIndex].sort(P),2),U=z[0],G=z[1];O.start=[B,G],O.stop=[W,U]}else O.start=[e.nucleotideIndex,n.nucleotideIndex]}var H=structuredClone(t);Gt(H)}),[]),Eo=(0,e.useCallback)((function(e,n,t,r,o){var a=Ht.current;if(0!==a.length){var i=structuredClone(a),l=i.findIndex((function(a){return a.rnaComplexIndex===e&&a.rnaMoleculeName0===n&&a.rnaMoleculeName1===t&&(r-a.start[0])*(r-a.stop[0])<=0&&(o-a.start[1])*(o-a.stop[1])<=0})),s=i[l];if(1===Math.abs(s.stop[0]-s.start[0])+1)i.splice(l,1);else{var u=Math.sign(s.stop[0]-s.start[0]),c=Math.sign(s.stop[1]-s.start[1]);if(r===s.start[0])s.start[0]+=u,s.start[1]+=c;else if(r===s.stop[0])s.stop[0]-=u,s.stop[1]-=c;else{var d=structuredClone(s),f=structuredClone(s);d.stop={0:r-u,1:o-c},f.start={0:r+u,1:o+c},i.splice(l,1,d,f)}}Gt(i)}}),[]),wo=(0,e.useMemo)((function(){return function(){var e=hr.current,n=Ht.current,t=Hr.current;se([].concat(v(t),[{rnaComplexProps:structuredClone(e),globalHelicesForFormatMenu:structuredClone(n)}])),de([]),er(!0)}}),[]),Ao=(0,e.useMemo)((function(){return function(e,n){var t=Tr.current;if(e.button===en.Left&&e.ctrlKey){e.preventDefault(),e.stopPropagation(),wo();var r=Yr.current;if(!r)return void nt(n);if(r.rnaComplexIndex!==n.rnaComplexIndex)return void nt(n);var o=hr.current[n.rnaComplexIndex];if(!o)return void nt(void 0);if(e.shiftKey)try{var a=Ur.current,i=n.rnaComplexIndex,l=r.rnaMoleculeName,s=n.rnaMoleculeName,c=r.nucleotideIndex,d=n.nucleotideIndex,f=o,p=f.rnaMoleculeProps[l],h=f.rnaMoleculeProps[s];if(p&&h){var m,x,g,N,I,C,S,E=null!==(m=null===(x=a[i])||void 0===x||null===(g=x[l])||void 0===g?void 0:g.has(c))&&void 0!==m&&m,w=null!==(N=null===(I=a[i])||void 0===I||null===(C=I[s])||void 0===C?void 0:C.has(d))&&void 0!==N&&N;E||w||(Do(f,l,s,c,d,1,void 0,Tr.current),Re(u({},i,(u(S={},l,[c]),u(S,s,[d]),S))))}}catch(xe){}ro(o,r.rnaMoleculeName,r.nucleotideIndex,n.rnaMoleculeName,n.nucleotideIndex,to.DELETE_PREVIOUS_MAPPING,{});var A=o.basePairs[r.rnaMoleculeName][r.nucleotideIndex].find((function(e){return e.rnaMoleculeName===n.rnaMoleculeName&&e.nucleotideIndex===n.nucleotideIndex})).basePairType;void 0!==A&&!rt.isCanonicalType(A)&&t[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||So(r,n);var k=y([{rnaMoleculeName:r.rnaMoleculeName,nucleotideIndex:r.nucleotideIndex},{rnaMoleculeName:n.rnaMoleculeName,nucleotideIndex:n.nucleotideIndex}].sort(oo),2),P=k[0],T=k[1];return ee(u({},n.rnaComplexIndex,{add:[{keys0:P,keys1:T}],delete:[]})),void nt(void 0)}var M=cr.current;if(void 0!==M&&Wr.isEnum(M)){var R=Ur.current,_=dr.current,j=mr.current,O={};switch(e.button){case en.Left:var L=eo;if(_===b.EDIT)try{var D=new Wr.record[M](hr.current,Re,Oe,xt,_,R,j,n),F=D.drag();O=D.indicesOfAffectedNucleotides,void 0!=F&&(L=F)}catch(ge){if("object"!==typeof ge||!("errorMessage"in ge))throw ge;return Tt(At.PROPERTIES),void Uo((0,Gn.jsx)("b",{style:{color:"red"},children:ge.errorMessage}),{})}ir(L,O);break;case en.Middle:try{var B=mr.current,W=new Wr.record[M](hr.current,Re,Oe,xt,_,R,B,n).indicesOfAffectedNucleotides,z=Gr.current,U=structuredClone(R),G=!0,H=n.rnaComplexIndex,K=n.rnaMoleculeName,V=n.nucleotideIndex;if(H in R){var q=R[H];K in q&&q[K].has(V)&&(G=!1)}for(var Q=!1,X=0,Y=Object.entries(W);X<Y.length;X++)for(var $=y(Y[X],2),Z=$[0],J=$[1],ne=Number.parseInt(Z),te=0,re=Object.entries(J);te<re.length;te++)for(var oe=y(re[te],2),ie=oe[0],le=oe[1],ue=0,ce=Array.from(le);ue<ce.length;ue++){var fe=ce[ue];ne in U||(U[ne]={});var pe=U[ne];ie in pe||(pe[ie]=new Set);var he=pe[ie];if(G?he.add(fe):he.has(fe)&&he.delete(fe),ne in z){var ve=z[ne];ie in ve&&ve[ie].has(fe)&&(Q=!0)}}ae(U);var me=Hr.current;se([].concat(v(me),[structuredClone(R)])),de([]),Q&&Uo((0,Gn.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to a newly frozen nucleotide"}),{})}catch(ge){if("object"!==typeof ge||!("errorMessage"in ge))throw ge;Tt(At.PROPERTIES),Uo((0,Gn.jsx)("b",{style:{color:"red"},children:ge.errorMessage}),{})}break;case en.Right:Wr.isSupportedTab(_)&&Co(n,M,_)}}else Uo((0,Gn.jsx)("b",{style:{color:"red"},children:"Select a constraint first!"}),{})}}),[So,wo]),Po=(0,e.useMemo)((function(){return function(e,n,t){if(e.ctrlKey&&e.button===en.Left){cr.current;var r=hr.current,o=(dr.current,n.rnaComplexIndex),a=n.rnaMoleculeName,i=n.nucleotideIndex,l=t.rnaMoleculeName,s=t.nucleotideIndex;wo();var c=r[o];if(c){var d=c.basePairs[a];if(d&&i in d){var f=d[i],p=f.findIndex((function(e){return e.rnaMoleculeName===l&&e.nucleotideIndex===s}));-1!==p&&(1===f.length?delete d[i]:f.splice(p,1))}var h=c.basePairs[l];if(h&&s in h){var v=h[s],m=v.findIndex((function(e){return e.rnaMoleculeName===a&&e.nucleotideIndex===i}));-1!==m&&(1===v.length?delete h[s]:v.splice(m,1))}var x=y([{rnaMoleculeName:a,nucleotideIndex:i},{rnaMoleculeName:l,nucleotideIndex:s}].sort(oo),2),g=x[0],N=x[1];ee(u({},o,{add:[],delete:[{keys0:g,keys1:N}]}))}}else{var I=cr.current,C=hr.current,S=Ur.current,E=mr.current,w=dr.current,A=Tr.current;switch(e.button){case en.Left:ir(eo,{});break;case en.Middle:if(e.ctrlKey&&ar.current){var k=new Wr.record[Wr.Enum.RNA_HELIX](C,Re,Oe,xt,w,S,E,n,t).getHelices();ga(k)}else{var P=n.rnaComplexIndex,T=n.rnaMoleculeName,M=n.nucleotideIndex,R=t.rnaMoleculeName,_=t.nucleotideIndex;wo();var j,O=C[P];if(!O)break;var L=O.basePairs[T];if(L&&M in L){var D=L[M],F=D.findIndex((function(e){return e.rnaMoleculeName===R&&e.nucleotideIndex===_}));-1!==F&&(j=D[F].basePairType,1===D.length?delete L[M]:D.splice(F,1))}var B=O.basePairs[R];if(B&&_ in B){var W=B[_],z=W.findIndex((function(e){return e.rnaMoleculeName===T&&e.nucleotideIndex===M}));-1!==z&&(1===W.length?delete B[_]:W.splice(z,1))}var U=y([{rnaMoleculeName:T,nucleotideIndex:M},{rnaMoleculeName:R,nucleotideIndex:_}].sort(oo),2),G=U[0],H=U[1];ee(u({},P,{add:[],delete:[{keys0:G,keys1:H}]})),void 0!==j&&!rt.isCanonicalType(j)&&A[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]||Eo(P,T,R,M,_)}break;case en.Right:if(Wr.isSupportedTab(w))try{var K=Ur.current,V=new Wr.record[I](C,Re,Oe,xt,w,K,E,n,t);if(w===b.FORMAT)return _t(!0),qt(void 0),void Yt((function(){return function(e){return V.constrainRelevantHelices(e)}}));pn(!fn);var q=V.createRightClickMenu(w);Uo(q,V.indicesOfAffectedNucleotides)}catch(Q){if("object"!==typeof Q||!("errorMessage"in Q))throw Q;w===b.FORMAT?(_t(!0),qt(Q.errorMessage)):(Tt(At.PROPERTIES),Uo((0,Gn.jsx)("b",{style:{color:"red"},children:Q.errorMessage}),{}))}}}}}),[]),Fo=(0,e.useMemo)((function(){return function(e,n,t){for(var r=hr.current[e],o=r.basePairs,a=0,i=Object.keys(r.rnaMoleculeProps);a<i.length;a++){var l=i[a];if(l in o)for(var s=o[l],c=0,d=Object.values(s);c<d.length;c++){var f,p=m(d[c]);try{for(p.s();!(f=p.n()).done;){var h=f.value;h.rnaMoleculeName===n&&(h.rnaMoleculeName=t)}}catch(x){p.e(x)}finally{p.f()}}}r.rnaMoleculeProps[t]=r.rnaMoleculeProps[n],delete r.rnaMoleculeProps[n];var v=o[n];delete o[n],o[t]=v,Re(u({},e,{}))}}),[]),Bo=(0,e.useMemo)((function(){return function(e,n){var t=xr.current;Ln(d(d({},t),{},u({},e,n)))}}),[]),Wo=(0,e.useMemo)((function(){return function(e,n,t){var r=gr.current,o=structuredClone(r);e in o||(o[e]={});var a=o[e];a[n]=d(d({},a[n]),t),Bn(o)}}),[]),zo=(0,e.useMemo)((function(){return function(e){Uo((0,Gn.jsx)("b",{style:{color:"red"},children:"The current right-click menu is no longer valid, due to updated interaction-constraint options."}),{}),Mn(d(d({},mr.current),e))}}),[]),Uo=(0,e.useCallback)((function(e,n){var t=hr.current;if(Pe((0,Gn.jsx)("div",{style:{width:"auto",display:"inline-block"},children:e})),Un(n),Object.keys(n).length>0){try{var r=parseInt(Object.keys(n)[0]),o=Object.keys(n[r])[0],a=Array.from(n[r][o]);if(a.length>0){var i={rnaComplexIndex:r,rnaMoleculeName:o,nucleotideIndex:a[0]},l="nucleotide",s=e.toString();(s.includes("basepair")||s.includes("BasePair"))&&(l="basepair");var u=Fa(i,t,l);Dt(u)}}catch(c){console.warn("Error extracting element info:",c),Dt(void 0)}xe.current!==b.FORMAT&&(Ot("Properties"),Tt(At.PROPERTIES))}else Dt(void 0)}),[]),Go=(0,e.useMemo)((function(){var e,n=qr.current;return(0,Gn.jsx)(zr.App.RnaComplexProps.Provider,{value:I,children:(0,Gn.jsx)(zr.Nucleotide.LabelsOnlyFlag.Provider,{value:te&&ve==b.EDIT,children:(0,Gn.jsx)(zr.App.SetMouseOverText.Provider,{value:ze,children:(0,Gn.jsx)(zr.Nucleotide.OnMouseDownHelper.Provider,{value:Ao,children:(0,Gn.jsx)(zr.Label.Content.OnMouseDownHelper.Provider,{value:bo,children:(0,Gn.jsx)(zr.Label.Line.Body.OnMouseDownHelper.Provider,{value:No,children:(0,Gn.jsx)(zr.Label.Line.Endpoint.OnMouseDownHelper.Provider,{value:Io,children:(0,Gn.jsx)("g",d(d({id:Ci},(e={},u(e,vn,dn.SCENE),u(e,wn,h),u(e,An,!0),u(e,Pn,!1),e)),{},{ref:function(e){null!==e&&(vr.current=e)},children:no.map((function(e){var t,r,o,a=y(e,2),i=a[0],l=a[1],s=Number.parseInt(i);return(0,Gn.jsx)(zr.RnaComplex.Index.Provider,{value:s,children:(0,Gn.jsx)(zr.BasePair.DataToEditPerRnaComplex.Provider,{value:n[s],children:(0,Gn.jsx)(Jr.Component,d(d({},l),{},{nucleotideKeysToRerenderPerRnaComplex:null!==(t=Me[s])&&void 0!==t?t:{},basePairKeysToRerenderPerRnaComplex:null!==(r=je[s])&&void 0!==r?r:[],basePairUpdateTrigger:null!==(o=Bt[s])&&void 0!==o?o:0}),s)})},s)}))}))})})})})})})})}),[I,Me,je,te&&ve==b.EDIT,J,Bt]),Ho=(0,e.useMemo)((function(){for(var e=0,n=Object.entries(Vn);e<n.length;e++){var t=y(n[e],2),r=t[0],o=t[1],a=Number.parseInt(r);if(a in zn)for(var i=zn[a],l=0,s=Object.entries(o);l<s.length;l++){var u=y(s[l],2),c=u[0],d=u[1];if(c in i){var f,p=i[c],h=m(d.values());try{for(h.s();!(f=h.n()).done;){var v=f.value;if(p.has(v))return!0}}catch(x){h.e(x)}finally{h.f()}}}}return!1}),[zn,Vn]);Er.current=Ho;var Ko=(0,e.useMemo)((function(){return Se[Hn.AUTOMATICALLY_REPOSITION_ANNOTATIONS]}),[Se]);Sr.current=Ko;var Vo=(0,e.useMemo)((function(){return function(){$(vr.current.getBBox()),at(0),st(0),ht(0),dt(1)}}),[]),qo=(0,e.useMemo)((function(){return function(e,n,t){var r=Tr.current;try{for(var o=(f?Mo:To)[n](e),a=new Set,i=0,l=Object.values(o.rnaComplexProps);i<l.length;i++){var s=l[i],c=s.name,p=s.basePairs;if(a.has(c))throw"RNA complexes must have distinct names.";a.add(c);for(var h=0,v=Object.entries(s.rnaMoleculeProps);h<v.length;h++){var g=y(v[h],2),b=g[0],N=g[1];b in p||(p[b]={});for(var I=0,S=Object.values(N.nucleotideProps);I<S.length;I++){var E=S[I];if(void 0===E.color&&(E.color=structuredClone(we)),void 0!==E.labelContentProps){var w=E.labelContentProps;void 0===w.color&&(w.color=structuredClone(we))}if(void 0!==E.labelLineProps){var A=E.labelLineProps;void 0===A.color&&(A.color=structuredClone(we))}}}}if(void 0===t&&(t=Ro[n]),t){var k,P=m(o.rnaComplexProps);try{for(P.s();!(k=P.n()).done;){var T=k.value;Object.values(T.rnaMoleculeProps).forEach((function(e){Object.values(e.nucleotideProps).forEach((function(e){if(e.y*=-1,void 0!==e.labelLineProps)for(var n=0;n<e.labelLineProps.points.length;n++)e.labelLineProps.points[n].y*=-1;void 0!==e.labelContentProps&&(e.labelContentProps.y*=-1)}))}))}}catch(_){P.e(_)}finally{P.f()}}se([]),de([]),ee({});var M=function(e){var n,t=[],r=[],o=[],a=[],i=m(e);try{for(i.s();!(n=i.n()).done;)for(var l=n.value,s=0,u=Object.entries(l.rnaMoleculeProps);s<u.length;s++)for(var c=y(u[s],2),d=c[0],f=c[1],p=0,h=Object.entries(f.nucleotideProps);p<h.length;p++){var v,x=y(h[p],2),g=x[0],b=x[1],N=null===(v=l.basePairs[d])||void 0===v?void 0:v[parseInt(g)];if(N){var I,C=m(N);try{for(C.s();!(I=C.n()).done;){var S,E=I.value,w=E.rnaMoleculeName,A=E.nucleotideIndex,k=null===(S=l.rnaMoleculeProps[w])||void 0===S?void 0:S.nucleotideProps[A];if(k){var P=Q(b,k);switch(E.basePairType||jo(b.symbol,k.symbol)){case Yn.Type.CANONICAL:case Yn.Type.CIS_WATSON_CRICK_WATSON_CRICK:case Yn.Type.TRANS_WATSON_CRICK_WATSON_CRICK:t.push(P);break;case Yn.Type.WOBBLE:r.push(P);break;case Yn.Type.MISMATCH:default:o.push(P)}}}}catch(_){C.e(_)}finally{C.f()}}}}catch(_){i.e(_)}finally{i.f()}var T,M=m(e);try{for(M.s();!(T=M.n()).done;)for(var R=T.value,j=0,O=Object.entries(R.rnaMoleculeProps);j<O.length;j++)for(var L=y(O[j],2),D=L[0],F=L[1],B=Object.keys(F.nucleotideProps).map(Number).sort((function(e,n){return e-n})),W=0;W<B.length-1;W++){var z,U,G=B[W],H=B[W+1],K=null===(z=R.basePairs[D])||void 0===z?void 0:z[G],V=null===(U=R.basePairs[D])||void 0===U?void 0:U[H];if(K&&K.length>0&&V&&V.length>0){var q=Q(F.nucleotideProps[G],F.nucleotideProps[H]);a.push(q)}}}catch(_){M.e(_)}finally{M.f()}var X=_o(t);return{canonicalDistance:X||1,wobbleDistance:_o(r)||X||1,mismatchDistance:1.2*X||1,contiguousDistance:_o(a)||1}}(o.rnaComplexProps);Ee((function(e){var n;return d(d({},e),{},(u(n={},Hn.CANONICAL_BASE_PAIR_DISTANCE,M.canonicalDistance),u(n,Hn.WOBBLE_BASE_PAIR_DISTANCE,M.wobbleDistance),u(n,Hn.MISMATCH_BASE_PAIR_DISTANCE,M.mismatchDistance),u(n,Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,M.contiguousDistance),n))})),Tt(At.NONE),_t(!1),ee({}),C(o.rnaComplexProps),Aa(o.rnaComplexProps),Object.keys(o.rnaComplexProps).length>0?setTimeout((function(){r[Hn.RESET_VIEWPORT_AFTER_FILE_UPLOAD]&&Vo();for(var e=0,n=0,t=0,o=Array.from(document.querySelectorAll(".".concat(Si)));t<o.length;t++)e+=o[t].getBBox().height,n++;var a=0==n?1:e/n,i=.33*a;Ct(a),wt(i),Ee((function(e){return d(d({},e),{},u({},Hn.BASE_PAIR_RADIUS,i))})),setTimeout((function(){Vo(),Fe(Pi.DATA_IS_LOADED)}),0)}),2e3):Fe(Pi.NO_DATA),x(o.complexDocumentName)}catch(j){if(Tt(At.PROPERTIES),Fe(Pi.DATA_LOADING_FAILED),"string"===typeof j)In(j),En(j);else if(j&&"string"===typeof j.message){var R;In(j.message),En(null!==(R=j.stack)&&void 0!==R?R:String(j))}else In("Failed to load data. The file may be in an unsupported format or contain invalid data."),En(String(null!==j&&void 0!==j?j:""))}}}),[f]),Qo=(0,e.useMemo)((function(){return function(e){fetch(e,{method:"GET"}).then((function(e){e.text().then((function(e){qo(e,ko.json)}))}))}}),[]),Xo=(0,e.useMemo)((function(){return function(e,n,t,r){var o=Ur.current,a=hr.current,i=(Gr.current,Ht.current);if(e.length>0){var l=v(e),s=l.pop();if(t(l),r([].concat(v(n),"rnaComplexProps"in s?[{rnaComplexProps:structuredClone(a),globalHelicesForFormatMenu:structuredClone(i)}]:[structuredClone(o)])),"rnaComplexProps"in s){var u=s.rnaComplexProps,c=s.globalHelicesForFormatMenu;ee({}),C(u),Gt(c)}else ae(s)}}}),[]),Yo=(0,e.useMemo)((function(){return function(){Xo(Hr.current,Vr.current,se,de)}}),[]),$o=(0,e.useMemo)((function(){return function(){Xo(Vr.current,Hr.current,de,se)}}),[]),Zo=(0,e.useMemo)((function(){return Hr.current.length>0}),[Hr.current]),Jo=(0,e.useMemo)((function(){return Vr.current.length>0}),[Vr.current]),ea=(0,e.useMemo)((function(){return function(e){var n=e.currentTarget.getBoundingClientRect();if(qe({x:e.clientX-n.left,y:e.clientY-n.top}),0!==jr.current){var t={x:e.clientX,y:e.clientY},r=yr.current;if(null!==r){var o=br.current,a=Nr.current,i=Cr.current,l=Ir.current,s=Sr.current,u=Er.current,c=Pr.current,d=L(t,o);d.y=-d.y,r.continueDrag(O(a,B(d,i*l)),s),u&&pn(!c)}var f=Dr.current,p=dr.current;if(void 0!==f&&Wr.isSupportedTab(p)){var h=da(t),v=[f.x,h.x].sort(P),m=[f.y,h.y].sort(P),x=v[0],g=m[0];xt([(0,Gn.jsx)("rect",{x:x,y:g,width:v[1]-x,height:m[1]-g,fill:"none",stroke:Ti[p],strokeWidth:Qe},0)])}e.preventDefault()}}}),[]),na=(0,e.useMemo)((function(){return function(e){var n={x:e.clientX,y:e.clientY};switch(e.button){case en.Left:Ze(n);break;case en.Right:var t=da(n);tn(t)}}}),[]),ta=(0,e.useMemo)((function(){return function(e){var n=Tr.current[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED],t=yr.current;null!==t&&(void 0!==t.terminateDrag&&t.terminateDrag(),ir(null,{}));var r=Dr.current,o=dr.current;if(void 0!==r&&Wr.isSupportedTab(o)){xt([]);var a={x:e.clientX,y:e.clientY},i=da(a),l=[r.x,i.x].sort(P),s=[r.y,i.y].sort(P),u=l[0],c=s[0],d=l[1],f=s[1];if(d-u>.5||f-c>.5){for(var p=function(e,n){var t=e.rnaMoleculeName,r=e.nucleotideIndex,o=n.x,a=n.y;if(o<u||o>d||a<c||a>f)return!1;t in v||(v[t]=new Set);var i=v[t];return!i.has(r)&&(i.add(r),!0)},h=new Array,v={},x=new Array,g=hr.current,b=0,N=Object.entries(g);b<N.length;b++)for(var I=y(N[b],2),C=I[0],S=I[1].rnaMoleculeProps,E=Number.parseInt(C),w=0,A=Object.entries(S);w<A.length;w++)for(var k=y(A[w],2),T=k[0],M=k[1].nucleotideProps,R=0,_=Object.entries(M);R<_.length;R++){var j=y(_[R],2),L=j[0],D=j[1],F=D.labelContentProps,B=D.labelLineProps,W={rnaComplexIndex:E,rnaMoleculeName:T,nucleotideIndex:Number.parseInt(L)};if(p(W,D)&&h.push(W),void 0!==F&&p(W,O(D,F))&&x.push(W),void 0!==B){var z,U=m(B.points);try{for(U.s();!(z=U.n()).done;)p(W,O(D,z.value))&&x.push(W)}catch(Y){U.e(Y)}finally{U.f()}}}var G=Zr(h,g,n);if(Xn("Auto-detected"),void 0!==G){var H=G,K=H.fullKeys,V=H.interactionConstraint;Ie(V),Co(K,V,o)}else if(void 0!==(G=Zr(x,g,n))){var q=G,Q=q.fullKeys,X=q.interactionConstraint;Ie(X),xo(Q,X)}}}tn(void 0)}}),[]),ra=(0,e.useMemo)((function(){return function(){ir(null,{}),xt([]),tn(void 0),ze("")}}),[]),oa=(0,e.useMemo)((function(){return function(e){if(0!==jr.current){var n=wr.current,t=Ar.current,r=kr.current,o=fr.current,a=pr.current,i=Ir.current,l=n-S(e.deltaY),s=l in fi?fi[l]:Math.pow(Ye,l);dt(s),ht(l);var u=e.clientX-gi-2,c=e.clientY-Za,d=t.negativeScale,f=u*d+r.x-o,p=c*d-r.y+a-r.height,h=u*(d=1/(s*i))-f+r.x,v=-(c*d-p-r.y-r.height);at(h),st(v)}}}),[]),aa=(0,e.useMemo)((function(){return function(){if(0!==jr.current){var e=wr.current+1,n=e in fi?fi[e]:Math.pow(Ye,e);e<=50&&(dt(n),ht(e))}}}),[]),ia=(0,e.useMemo)((function(){return function(){if(0!==jr.current){var e=wr.current-1,n=e in fi?fi[e]:Math.pow(Ye,e);e>=-50&&(dt(n),ht(e))}}}),[]),la=(0,e.useMemo)((function(){return function(e){switch(e.key.toLowerCase()){case"0":e.ctrlKey&&(e.preventDefault(),Vo());break;case"o":e.ctrlKey&&(e.preventDefault(),_r.current.click());break;case"s":e.ctrlKey&&(e.preventDefault(),""==mn?lr.current.click():In(mn));break;case"y":$o();break;case"z":e.shiftKey?$o():Yo();break;case"escape":_t(!1),Tt(At.NONE);break;case"x":or(!0)}}}),[_r.current,lr.current,mn]),sa=(0,e.useCallback)((function(e){"x"===e.key.toLowerCase()&&or(!1)}),[]),ua=(0,e.useMemo)((function(){return ve===b.EDIT?wi:Ai}),[ve]),ca=(0,e.useMemo)((function(){return ve in Ti?Ei:Ai}),[ve]),da=(0,e.useCallback)((function(e){var n=Ir.current,t=Cr.current,r=Or.current,o=Lr.current,a=structuredClone(e);return a.x-=gi,(a=B(a,n*t)).y-=Za,a.y=-a.y,a=L(a,O(r.asVector,o.asVector))}),[]),fa=(0,e.useMemo)((function(){return function(){var e=Fr.current,n=dr.current,t="";if(0===e.length){var r="You must load a non-empty input file before attempting to ";switch(n){case b.EDIT:t=r+"edit.";break;case b.FORMAT:t=r+"format.";break;case b.ANNOTATE:t=r+"annotate."}}else{var o="Right-click on a nucleotide to begin ";switch(n){case b.EDIT:t=o+"editing.";break;case b.FORMAT:t=o+"formating.";break;case b.ANNOTATE:t=o+"annotating."}}Uo((0,Gn.jsx)("b",{style:{color:"red",width:"100%"},children:t}),{})}}),[]),pa=(0,e.useMemo)((function(){return Se[Hn.DARK_MODE]?"#514646":"#F0F0F0"}),[Se]),ha=(0,e.useMemo)((function(){if("showSaveFilePicker"in window&&"function"===typeof window.showSaveFilePicker){var e=window.showSaveFilePicker;return l(a().mark((function e(){var t,r,o,i,l,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xr.current,r=t,void 0!==t){e.next=7;break}return e.next=5,n();case 5:r=e.sent,bt(r);case 7:return o=Rr.current,i=hr.current,l=Qr.current,e.next=12,r.createWritable();case 12:return s=e.sent,e.next=15,s.write($r[o](i,l));case 15:return e.next=17,s.close();case 17:er(!1);case 18:case"end":return e.stop()}}),e)})))}function n(){return t.apply(this,arguments)}function t(){return t=l(a().mark((function n(){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Mr.current,r=Rr.current,n.next=4,e({suggestedName:"".concat(t,".").concat(r),types:[{description:"",accept:{"text/plain":[".".concat(r)]}}]});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)}))),t.apply(this,arguments)}}),[]),va=(0,e.useCallback)((function(){var e=Mr.current,n=Rr.current,t=hr.current,r=Qr.current,o=new Blob([$r[n](t,r)],{type:"text/plain"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.download="".concat(e,".").concat(n),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),er(!1)}),[]),xa=(0,e.useMemo)((function(){var e,n=Tr.current,t=xr.current;switch(Pt){case At.NONE:e=(0,Gn.jsx)(Gn.Fragment,{});break;case At.PROPERTIES:e=(0,Gn.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Gn.jsx)("div",{style:{padding:"12px 10px",background:"var(--color-surface)",borderBottom:"1px solid var(--color-border)",fontSize:11,fontWeight:700,textTransform:"uppercase",color:"var(--color-text)"},children:"Selected Element"}),(0,Gn.jsx)("div",{style:{flex:1,overflow:"auto",padding:12},children:ke})]});break;case At.SETTINGS:e=(0,Gn.jsx)(ba,{open:!0,onClose:function(){return Tt(At.NONE)},settings:n,setSettings:Ee,getDistanceDefaults:function(){var e=Fr.current;if(e&&e.length>0){var n,r=Number.parseInt(e[0][0]),o=t[r],a=o.helixDistance,i=o.distances;if(null!=a&&i)return u(n={},Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS,a),u(n,Hn.CANONICAL_BASE_PAIR_DISTANCE,i[rt.Type.CANONICAL]),u(n,Hn.MISMATCH_BASE_PAIR_DISTANCE,i[rt.Type.MISMATCH]),u(n,Hn.WOBBLE_BASE_PAIR_DISTANCE,i[rt.Type.WOBBLE]),n}return{}}});break;case At.ABOUT:e=(0,Gn.jsx)(Ca,{open:!0,onClose:function(){return Tt(At.NONE)},renderTabInstructions:function(e){switch(e){case b.INPUT_OUTPUT:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Upload and download RNA structure files in various formats including JSON, SVG, and more."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Upload files to import RNA structures"}),(0,Gn.jsx)("li",{children:"Download files to save your work"}),(0,Gn.jsx)("li",{children:"Support for multiple file formats"})]})]});case b.VIEWPORT:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Control the viewport and navigation of your RNA structure."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Zoom in/out with mouse wheel"}),(0,Gn.jsx)("li",{children:"Pan by dragging the canvas"}),(0,Gn.jsx)("li",{children:"Reset viewport to default position"})]})]});case b.EDIT:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Edit RNA structures by modifying nucleotides, positions, and properties."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Move nucleotides by dragging"}),(0,Gn.jsx)("li",{children:"Edit nucleotide properties"}),(0,Gn.jsx)("li",{children:"Modify labels and annotations"})]})]});case b.FORMAT:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Format RNA structures by adjusting base pairs and structural elements."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Add/remove base pairs"}),(0,Gn.jsx)("li",{children:"Adjust base pair distances"}),(0,Gn.jsx)("li",{children:"Optimize structure layout"})]})]});case b.ANNOTATE:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Add annotations and labels to your RNA structure."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Add text labels"}),(0,Gn.jsx)("li",{children:"Create annotation regions"}),(0,Gn.jsx)("li",{children:"Customize annotation styles"})]})]});case b.SETTINGS:return(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("p",{children:"Configure application preferences and behavior."}),(0,Gn.jsxs)("ul",{children:[(0,Gn.jsx)("li",{children:"Adjust display settings"}),(0,Gn.jsx)("li",{children:"Configure interaction constraints"}),(0,Gn.jsx)("li",{children:"Import/export settings"})]})]});case b.ABOUT:return(0,Gn.jsxs)("div",{className:"quickstart-panel",children:[(0,Gn.jsxs)("section",{className:"quickstart-section",children:[(0,Gn.jsxs)("div",{className:"quickstart-section__header",children:[(0,Gn.jsx)("h4",{className:"quickstart-section__title",children:"Key shortcuts"}),(0,Gn.jsx)("span",{className:"quickstart-section__subtitle",children:"Stay on the keyboard for faster edits."})]}),(0,Gn.jsx)("div",{className:"quickstart-shortcut-grid",children:xi.map((function(e){return(0,Gn.jsxs)("article",{className:"quickstart-shortcut-card",children:[(0,Gn.jsx)("div",{className:"quickstart-shortcut-hotkey",children:e.shortcut}),(0,Gn.jsx)("p",{className:"quickstart-shortcut-behavior",children:e.action})]},e.shortcut)}))}),null]}),(0,Gn.jsxs)("section",{className:"quickstart-section",children:[(0,Gn.jsx)("p",{className:"quickstart-paragraph",children:"Exornata is an interactive web app for editing, formatting, and annotating 2D RNA diagrams."}),(0,Gn.jsx)("h4",{className:"quickstart-section__title",children:"Quickstart checklist"}),(0,Gn.jsxs)("ol",{className:"quickstart-ordered-list",children:[(0,Gn.jsx)("li",{children:"Start in Edit mode on the blank canvas that opens by default."}),(0,Gn.jsxs)("li",{children:["Use ",(0,Gn.jsx)("em",{children:"Load example"})," to pull in the 5S rRNA reference structure."]}),(0,Gn.jsx)("li",{children:"Review the Units/Complex constraint and tighten it if you only need a subset."}),(0,Gn.jsx)("li",{children:"Drag, pan, or zoom to orient the structure before detailed edits."}),(0,Gn.jsx)("li",{children:"Jump to Format mode to refine base pairs and structural geometry."}),(0,Gn.jsx)("li",{children:"Switch into Annotate mode to apply labels or callouts."}),(0,Gn.jsx)("li",{children:"Export your edits as JSON, XRna, SVG, or other supported formats."}),(0,Gn.jsx)("li",{children:"Re-import the exported file later to resume exactly where you stopped."})]})]}),(0,Gn.jsx)("section",{className:"quickstart-section",children:(0,Gn.jsx)("a",{className:"quickstart-link",href:"https://github.com/LDWLab/XRNA-React/issues",target:"_blank",rel:"noopener noreferrer",children:(0,Gn.jsx)("h4",{className:"quickstart-section__title",children:"Something went wrong?"})})})]});default:return(0,Gn.jsx)("div",{children:"No instructions available for this tab."})}}});break;default:throw"Unhandled switch case."}return(0,Gn.jsx)(Da,{open:Pt!==At.NONE,onClose:function(){Tt(At.NONE),Uo((0,Gn.jsx)(Gn.Fragment,{}),{}),Dt(void 0)},children:e})}),[Se,On,Pt,ke]),ga=(0,e.useCallback)((function(e){wo();var n,t=Tr.current,r=hr.current,o=xr.current,a={},i=m(e);try{var l=function(){var e=n.value,i=e.rnaComplexIndex,l=e.rnaMoleculeName0,s=e.rnaMoleculeName1,u=e.start,c=e.stop,d=o[i],f=r[i],p=f.basePairs;i in a||(a[i]={add:[],delete:[]});for(var h=a[i],v=f.rnaMoleculeProps[l],m=p[l],x=f.rnaMoleculeProps[s],g={0:v,1:x},y=v.nucleotideProps[u[0]],b=x.nucleotideProps[u[1]],N=F(O(y,b),.5),I=W(L(y,b)),C=G(I),S={},E=0,w=0,A=[0,1];w<A.length;w++){var k=A[w],P=Math.min(u[k],c[k]),T=Math.max(u[k],c[k]);S[k]={min:P,max:T};for(var M=P;M<=T;M++){var R=g[k].nucleotideProps[M];E+=Math.sign(X(L(R,N),C))}}E<0&&(C=D(C));for(var _=t[Hn.DISTANCE_BETWEEN_CONTIGUOUS_BASE_PAIRS],j=F(C,Number.isNaN(_)?d.helixDistance:_),B=u[0],z=u[1],U=Math.sign(c[0]-u[0]),H=Math.sign(c[1]-u[1]),K=S[0].max-S[0].min+1,V=0;V<K;V++){var q=g[0].nucleotideProps[B],Q=g[1].nucleotideProps[z],Y=m[B].find((function(e){return e.rnaMoleculeName===s&&e.nucleotideIndex===z})).basePairType;if(void 0===Y)try{Y=et(q.symbol,Q.symbol)}catch(ae){Y=void 0}var $=void 0;switch(Y){case rt.Type.CIS_WATSON_CRICK_WATSON_CRICK:case rt.Type.TRANS_WATSON_CRICK_WATSON_CRICK:case rt.Type.CANONICAL:var Z=t[Hn.CANONICAL_BASE_PAIR_DISTANCE];$=Number.isNaN(Z)?d.distances[Y]:Z;break;case rt.Type.WOBBLE:var J=t[Hn.WOBBLE_BASE_PAIR_DISTANCE];$=Number.isNaN(J)?d.distances[Y]:J;break;default:var ee=t[Hn.MISMATCH_BASE_PAIR_DISTANCE];$=Number.isNaN(ee)?d.distances[rt.Type.MISMATCH]:ee}var ne={keys0:{rnaMoleculeName:l,nucleotideIndex:B},keys1:{rnaMoleculeName:s,nucleotideIndex:z}};h.add.push(ne),h.delete.push(ne);var te=F(I,.5*$),re=O(N,te),oe=L(N,te);q.x=re.x,q.y=re.y,Q.x=oe.x,Q.y=oe.y,N=O(N,j),B+=U,z+=H}};for(i.s();!(n=i.n()).done;)l()}catch(d){i.e(d)}finally{i.f()}for(var s=0,u=Object.values(a);s<u.length;s++){var c=u[s];c.add.sort(ao),c.delete.sort(ao)}ee(a)}),[]),ya=(0,e.useMemo)((function(){var e=$t.current;return(0,Gn.jsx)(_a,{open:Rt,onClose:function(){_t(!1)},rnaComplexProps:I,globalHelices:Ut,errorMessage:Vt,constrainRelevantHelices:e,handleNewBasePair:So,removeBasePair:Eo,reformatSelectedHelices:ga})}),[Rt,I,Ut,Vt,Xt]),Na=(0,e.useMemo)((function(){var e;return(0,Gn.jsx)(ni,{settings:Se,viewportWidth:lo,viewportHeight:Math.max((null!==(e=ur.height)&&void 0!==e?e:0)-Za,0),viewportScale:ct})}),[Se,lo,ur.height,Za,ct]),Ia=!R(I),Sa=z||mi(),Ea=(0,e.useMemo)((function(){return(0,Gn.jsx)(Ja,{onOpenFile:function(e){var n=e.target.files;if(null!==n&&0!==n.length){Fe(Pi.DATA_IS_LOADING);var t=n[0].name;Br.current=t,_(t);var r=/^(.*)\.(.+)$/.exec(t),o=r[1],a=r[2];Se[Hn.COPY_FILE_NAME]&&U(o),Se[Hn.COPY_FILE_EXTENSION]&&a in $r&&V(a);var i=new FileReader;i.addEventListener("load",(function(e){qo(e.target.result,a.toLocaleLowerCase())})),i.readAsText(n[0])}},onSave:ha,onExportWithFormat:function(e,n){U(e),V(n),bt(void 0),Mr.current=e,Rr.current=n,setTimeout((function(){var e;null===(e=lr.current)||void 0===e||e.click()}),0)},onDownload:va,fileName:Sa,onFileNameChange:U,exportFormat:K,onExportFormatChange:V,downloadButtonReference:lr,fileNameInputReference:_r,saveButtonsDisabledFlag:!Ia})}),[Sa,K,Ia,I]),wa=(0,e.useMemo)((function(){return 1===no.length}),[no]),Aa=(0,e.useCallback)((function(e){var n,t=[],r=m(Kr(e,Tr.current[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]));try{for(r.s();!(n=r.n()).done;){var o,a=n.value,i=a.rnaComplexIndex,l=m(a.helixDataPerRnaMolecules);try{for(l.s();!(o=l.n()).done;){var s,u=o.value,c=u.rnaMoleculeName0,d=m(u.helixData);try{for(d.s();!(s=d.n()).done;){var f=s.value,p=f.rnaMoleculeName1,h=f.start,v=f.stop;t.push({rnaComplexIndex:i,rnaMoleculeName0:c,rnaMoleculeName1:p,start:h,stop:v})}}catch(x){d.e(x)}finally{d.f()}}}catch(x){l.e(x)}finally{l.f()}}}catch(x){r.e(x)}finally{r.f()}Gt(t)}),[]);return(0,e.useEffect)((function(){function e(){_t(!0)}function n(){var e=document.getElementById("__hidden_reformat_button__");null===e||void 0===e||e.click()}function t(e){var t=e.detail||{};if(void 0!==t.start&&void 0!==t.end){Math.min(t.start,t.end),Math.max(t.start,t.end);var r=document.getElementById("__hidden_reformat_button__");r?r.click():n()}else n()}return window.addEventListener("openBasepairBottomSheet",e),window.addEventListener("triggerReformatAll",n),window.addEventListener("triggerReformatRange",t),function(){window.removeEventListener("openBasepairBottomSheet",e),window.removeEventListener("triggerReformatAll",n),window.removeEventListener("triggerReformatRange",t)}}),[]),(0,e.useEffect)((function(){var e=function(e){var n=Tr.current;if(nr.current&&!n[Hn.DISABLE_NAVIGATE_AWAY_PROMPT])return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[]),(0,e.useEffect)((function(){var e=document.URL,n=e.indexOf("?");if(-1!=n){for(var t={},r=e.substring(n+1,e.length).split("&"),o=0;o<r.length;o++){var a=r[o].split("=");t[a[0]]=a[1]}var i="r2dt_job_id";i in t&&Qo("https://www.ebi.ac.uk/Tools/services/rest/r2dt/result/r2dt-".concat(t[i],"/json"));var l="source_url";if(l in t&&Qo(t[l]),"tab"in t){var s=t.tab,u=s.toLocaleLowerCase(),c=N.find((function(e){return e.toLocaleLowerCase()===u}));void 0===c?(yn('"'.concat(s,'" is not a valid, recognized Tab value.')),Fe(Pi.URL_PARSING_ERROR)):me(c)}}}),[]),(0,e.useEffect)((function(){var e=sr.current,n=null===e?{width:0,height:0}:e.getBBox();He(n)}),[We]),(0,e.useEffect)(fa,[ve,I]),(0,e.useEffect)((function(){if(0!==Object.keys(J).length){for(var e={},n={},t=0,r=Object.entries(J);t<r.length;t++){var o=y(r[t],2),a=o[0],i=o[1],l=Number.parseInt(a);e[l]={},n[l]=[];var s,u=e[l],c=n[l],f=m(i.add);try{for(f.s();!(s=f.n()).done;){var p=s.value,h=p.keys0,v=p.keys1;R(u,h),R(u,v),c.push(h,v)}}catch(_){f.e(_)}finally{f.f()}var x,g=m(i.delete);try{for(g.s();!(x=g.n()).done;){var b=x.value,N=b.keys0,I=b.keys1;R(u,N),R(u,I),c.push(N,I)}}catch(_){g.e(_)}finally{g.f()}for(var C=0,S=Object.values(u);C<S.length;C++)S[C].sort(P);c.sort(oo)}Oe(n);for(var E=d({},Bt),w=0,A=Object.keys(J);w<A.length;w++){var k,T=A[w],M=Number.parseInt(T);E[M]=(null!==(k=E[M])&&void 0!==k?k:0)+1}Wt(E),Re({}),Oe({}),ee({})}function R(e,n){var t=n.rnaMoleculeName,r=n.nucleotideIndex;t in e||(e[t]=[]);var o=e[t];o.includes(r)||o.push(r)}}),[J,Bt]),(0,e.useEffect)((function(){var e="";R(I)?e="Import data to enable downloads.":void 0===K&&(e="Select an export format to enable downloads."),xn(e)}),[I,K]),(0,e.useEffect)((function(){pn((function(e){return!e}))}),[ke]),(0,e.useEffect)((function(){null!==sn&&sn!==eo&&wo()}),[sn]),(0,e.useEffect)((function(){var e=mr.current;Mn(d(d({},e),{},{treatNoncanonicalBasePairsAsUnpairedFlag:Se[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]}))}),[Se[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,e.useEffect)((function(){wt(Se[Hn.BASE_PAIR_RADIUS]);for(var e={},n=0,t=Object.entries(I);n<t.length;n++){var r=y(t[n],2),o=r[0],a=r[1].basePairs,i=Number.parseInt(o);e[i]={add:[],delete:[]};for(var l=e[i],s=0,u=Object.entries(a);s<u.length;s++)for(var c=y(u[s],2),d=c[0],f=c[1],p=0,h=Object.entries(f);p<h.length;p++){var v,x=y(h[p],2),g=x[0],b=x[1],N={rnaMoleculeName:d,nucleotideIndex:Number.parseInt(g)},C=m(b);try{for(C.s();!(v=C.n()).done;){var S=v.value;io(N,S)||(l.delete.push({keys0:N,keys1:S}),l.add.push({keys0:N,keys1:S}))}}catch(k){C.e(k)}finally{C.f()}}}for(var E=0,w=Object.values(e);E<w.length;E++){var A=w[E];A.add.sort(ao),A.delete.sort(ao)}ee(e)}),[Se[Hn.BASE_PAIR_RADIUS]]),(0,e.useEffect)((function(){Tt(At.NONE),_t(!1)}),[dr.current]),(0,e.useEffect)((function(){return _t(!1)}),[Ne]),(0,e.useEffect)((function(){return Aa(hr.current)}),[Se[Hn.TREAT_NON_CANONICAL_BASE_PAIRS_AS_UNPAIRED]]),(0,Gn.jsx)(zr.MemoizedComponent,{settingsRecord:Se,setSettingsRecord:Ee,basePairOnMouseDownHelper:Po,labelClassName:ua,basePairClassName:ca,pushToUndoStack:wo,basePairRadius:Et,indicesOfFrozenNucleotides:oe,labelContentDefaultStyles:Fn,basePairAverageDistances:On,updateBasePairAverageDistances:Bo,updateLabelContentDefaultStyles:Wo,interactionConstraintOptions:Tn,updateInteractionConstraintOptions:zo,setNucleotideKeysToRerender:Re,setBasePairKeysToRerender:Oe,updateRnaMoleculeNameHelper:Fo,setBasePairKeysToEdit:ee,singularRnaComplexFlag:wa,averageNucleotideBoundingRectHeight:It,children:(0,Gn.jsxs)("div",{id:"parent_div",onKeyDown:la,onKeyUp:sa,ref:ur.ref,style:{position:"absolute",display:"block",width:"100%",height:"100%",overflow:"hidden",background:"var(--color-background)",color:"var(--color-text)",marginLeft:"".concat(7,"px"),transition:"var(--transition-default)"},children:[(0,Gn.jsxs)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:gi,zIndex:1e3},children:[(Object.keys(oe).length,Object.keys(zn).length,null),(0,Gn.jsx)(ma,{onUndo:Yo,onRedo:$o,canUndo:Zo,canRedo:Jo,onResetViewport:Vo,mode:ve,onModeChange:me,constraint:Ne,onConstraintChange:Ie,onToggleBasePairEditor:function(){Uo((0,Gn.jsx)(Gn.Fragment,{}),{}),_t((function(e){return!e}))},onTogglePropertiesDrawer:function(){"properties"===Pt?Tt(At.NONE):(Ot("Properties"),Tt(At.PROPERTIES))},onToggleSettingsDrawer:function(){"settings"===Pt?Tt(At.NONE):(Uo((0,Gn.jsx)(Gn.Fragment,{}),{}),Ot("Settings"),Tt(At.SETTINGS))},onToggleAboutDrawer:function(){"about"===Pt?Tt(At.NONE):(Uo((0,Gn.jsx)(Gn.Fragment,{}),{}),Ot("About XRNA"),Tt(At.ABOUT))},onOpenDocs:function(){window.location.hash="#/docs"},onLoadExample:l(a().mark((function e(){var n,t,r,o,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Fe(Pi.DATA_IS_LOADING),e.next=4,fetch("".concat(null!==(n="/XRNA-React")?n:"","/7k00_23_b.json"));case 4:if((t=e.sent).ok){e.next=7;break}throw new Error("Failed to load example (status ".concat(t.status,")"));case 7:return e.next=9,t.text();case 9:r=e.sent,qo(r,ko.json),i="".concat(o="7k00_23_b",".json"),_(i),Br.current=i,Se[Hn.COPY_FILE_NAME]&&(U(o),Mr.current=o),Se[Hn.COPY_FILE_EXTENSION]&&(V("json"),Rr.current="json"),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),l=e.t0 instanceof Error?e.t0.message:String(e.t0),Fe(Pi.DATA_LOADING_FAILED),In(l),En(l);case 25:case"end":return e.stop()}}),e,null,[[0,19]])}))),undoStack:le,redoStack:ce,onJumpToHistory:function(e){var n=Hr.current,t=Vr.current;if(!(e<0||e>n.length+t.length)&&e!==n.length)if(e<n.length){var r=n[e];if(r){if("rnaComplexProps"in r){var o=r.rnaComplexProps,a=r.globalHelicesForFormatMenu;ee({}),C(o),Gt(a)}else ae(r);var i=n.slice(0,e+1),l=[].concat(v(t),v(n.slice(e+1).reverse()));se(i),de(l)}}else{var s=e-n.length,u=t[s];if(u){if("rnaComplexProps"in u){var c=u.rnaComplexProps,d=u.globalHelicesForFormatMenu;ee({}),C(c),Gt(d)}else ae(u);var f=[].concat(v(n),v(t.slice(0,s+1))),p=t.slice(s+1);se(f),de(p)}}},onResetToLastCheckpoint:function(){var e=Hr.current;if(e.length>0){var n=e[0];if(n){if("rnaComplexProps"in n){var t=n.rnaComplexProps,r=n.globalHelicesForFormatMenu;ee({}),C(t),Gt(r)}else ae(n);var o=[].concat(v(Vr.current),v(e.slice(1).reverse()));se([n]),de(o)}}},onFreezeSelected:function(){if(Object.keys(zn).length>0)return function(){for(var e=structuredClone(oe),n=0,t=Object.entries(zn);n<t.length;n++){var r=y(t[n],2),o=r[0],a=r[1],i=Number.parseInt(o);i in e||(e[i]={});for(var l=0,s=Object.entries(a);l<s.length;l++){var u=y(s[l],2),c=u[0],d=u[1];c in e[i]||(e[i][c]=new Set);var f,p=m(d);try{for(p.s();!(f=p.n()).done;){var h=f.value;e[i][c].add(h)}}catch(g){p.e(g)}finally{p.f()}}}ae(e);var x=Hr.current;se([].concat(v(x),[structuredClone(oe)])),de([])}}(),onUnfreezeSelected:function(){if(Object.keys(zn).length>0)return function(){for(var e=structuredClone(oe),n=0,t=Object.entries(zn);n<t.length;n++){var r=y(t[n],2),o=r[0],a=r[1],i=Number.parseInt(o);if(i in e){for(var l=0,s=Object.entries(a);l<s.length;l++){var u=y(s[l],2),c=u[0],d=u[1];if(c in e[i]){var f,p=m(d);try{for(p.s();!(f=p.n()).done;){var h=f.value;e[i][c].delete(h)}}catch(g){p.e(g)}finally{p.f()}0===e[i][c].size&&delete e[i][c]}}0===Object.keys(e[i]).length&&delete e[i]}}ae(e);var x=Hr.current;se([].concat(v(x),[structuredClone(oe)])),de([])}}(),onUnfreezeAll:function(){if(Object.keys(oe).length>0)return function(){if(window.confirm("Are you sure you want to unfreeze all nucleotides?")){var e=Hr.current;se([].concat(v(e),[structuredClone(oe)])),de([]),ae({})}}}(),hasFrozenNucleotides:Object.keys(oe).length>0,hasSelectedNucleotides:Object.keys(zn).length>0})]}),Ea,(0,Gn.jsxs)("svg",{id:yi,style:{top:Za,left:gi,position:"absolute"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Math.max((null!==(t=ur.width)&&void 0!==t?t:0)-gi,0)," ").concat(Math.max((null!==(r=ur.height)&&void 0!==r?r:0)-Za,0)),tabIndex:1,onMouseDown:na,onMouseMove:ea,onMouseUp:ta,onMouseLeave:ra,onContextMenu:function(e){e.preventDefault()},onWheel:oa,fill:pa,stroke:Wr.isSupportedTab(ve)?Ti[ve]:"none",filter:"none",overflow:"hidden",children:[(0,Gn.jsx)("style",{children:"\n              .".concat(Si," { stroke:none; }\n              .").concat(Si,":hover { stroke:inherit; }\n              .").concat(Ei," { stroke:none; }\n              .").concat(Ei,":hover { stroke:inherit; stroke-dasharray:0.5,0.5;}\n              .").concat(wi," { stroke:none; }\n              .").concat(wi,":hover { stroke:inherit; }\n              .").concat(Ai," { stroke:none; }\n            ")}),(0,Gn.jsxs)("defs",{children:[(0,Gn.jsxs)("filter",{id:"xrTooltipShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,Gn.jsx)("feDropShadow",{dx:"0",dy:"4",stdDeviation:"3",floodColor:"#000000",floodOpacity:"0.15"}),(0,Gn.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodColor:"#000000",floodOpacity:"0.05"})]}),(0,Gn.jsxs)("filter",{id:"xrTooltipGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,Gn.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,Gn.jsxs)("feMerge",{children:[(0,Gn.jsx)("feMergeNode",{in:"coloredBlur"}),(0,Gn.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,Gn.jsx)("rect",{id:Ii,width:"100%",height:"100%",stroke:"none",fill:Se[Hn.CANVAS_COLOR]?Se[Hn.CANVAS_COLOR]:void 0,onMouseDown:function(e){e.button===en.Left&&(e.ctrlKey||void 0===Jn||nt(void 0),ir(eo,{}))}}),Na,(0,Gn.jsx)("g",{style:{visibility:De===Pi.DATA_IS_LOADED?"visible":"hidden"},id:"viewport_scale_group_0",transform:ho.asTransform[0],children:(0,Gn.jsx)("g",{id:"viewport_scale_group_1",transform:ho.asTransform[1],children:(0,Gn.jsx)("g",{id:"viewport_translate_group_0",transform:"scale(1, -1) "+fo.asString,children:(0,Gn.jsxs)("g",{id:"viewport_translate_group_1",transform:po.asString,children:[mt,Go,vo]})})})}),(0,Gn.jsx)(ei,{mouseOverText:We,mouseOverTextDimensions:Ge,mouseUIPosition:Ve,parentDivResizeDetector:ur,TOPBAR_HEIGHT:Za,MOUSE_OVER_TEXT_FONT_SIZE:20,mouseOverTextSvgTextElementReference:sr})]}),(0,Gn.jsx)(di,{settings:Se,setSettings:Ee,onZoomIn:aa,onZoomOut:ia,onResetViewport:Vo,position:vi}),De===Pi.DATA_IS_LOADING&&(0,Gn.jsx)("img",{style:{top:.5*(null!==(o=ur.height)&&void 0!==o?o:0)-100,left:.5*(null!==(i=ur.width)&&void 0!==i?i:0)-50,position:"absolute"},src:Lo,alt:"Loading..."}),De===Pi.DATA_LOADING_FAILED&&(0,Gn.jsxs)("div",{style:{position:"absolute",top:.5*(null!==(s=ur.height)&&void 0!==s?s:0)-60,left:.5*(null!==(c=ur.width)&&void 0!==c?c:0)-240,width:480,maxWidth:"90%",padding:"12px 16px",borderRadius:8,border:"1px solid #cc0000",background:"#fff5f5",color:"#7a1212",boxShadow:"0 4px 16px rgba(0,0,0,0.15)",zIndex:2e3,textAlign:"center",fontSize:13,lineHeight:1.4},children:[(0,Gn.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:"Failed to open file"}),(0,Gn.jsx)("div",{children:Nn||"Unsupported file format or invalid file contents."}),(0,Gn.jsx)("div",{style:{marginTop:10},children:(0,Gn.jsx)("button",{onClick:function(){var e=(null===Sn||void 0===Sn?void 0:Sn.trim())||"No additional error details available.";navigator.clipboard.writeText(e).catch((function(){}))},style:{marginTop:6,padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid #b02a2a",background:"#ffe3e3",color:"#7a1212",cursor:"pointer"},children:"Copy error details"})})]}),(0,Gn.jsx)("div",{style:{position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap",background:"inherit"},id:bi}),xa,ya,(0,Gn.jsx)(Oa,{rnaComplexProps:I})]})})};var Mi,Ri=hi,_i=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),o(e),a(e),i(e)}))};function ji(e,n,t){return ji=Fe()?Reflect.construct.bind():function(e,n,t){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(e,r));return t&&Oe(o,t.prototype),o},ji.apply(null,arguments)}function Oi(e){var n="function"===typeof Map?new Map:void 0;return Oi=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return ji(e,arguments,De(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Oe(r,e)},Oi(e)}function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Li.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Mi||(Mi={}));var Di,Fi="popstate";function Bi(e,n){if(!1===e||null===e||"undefined"===typeof e)throw new Error(n)}function Wi(e,n){if(!e){"undefined"!==typeof console&&console.warn(n);try{throw new Error(n)}catch(t){}}}function zi(e,n){return{usr:e.state,key:e.key,idx:n}}function Ui(e,n,t,r){return void 0===t&&(t=null),Li({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof n?Hi(n):n,{state:t,key:n&&n.key||r||Math.random().toString(36).substr(2,8)})}function Gi(e){var n=e.pathname,t=void 0===n?"/":n,r=e.search,o=void 0===r?"":r,a=e.hash,i=void 0===a?"":a;return o&&"?"!==o&&(t+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function Hi(e){var n={};if(e){var t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));var r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}function Ki(e,n,t,r){void 0===r&&(r={});var o=r,a=o.window,i=void 0===a?document.defaultView:a,l=o.v5Compat,s=void 0!==l&&l,u=i.history,c=Mi.Pop,d=null,f=p();function p(){return(u.state||{idx:null}).idx}function h(){c=Mi.Pop;var e=p(),n=null==e?null:e-f;f=e,d&&d({action:c,location:m.location,delta:n})}function v(e){var n="null"!==i.location.origin?i.location.origin:i.location.href,t="string"===typeof e?e:Gi(e);return Bi(n,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,n)}null==f&&(f=0,u.replaceState(Li({},u.state,{idx:f}),""));var m={get action(){return c},get location(){return e(i,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Fi,h),d=e,function(){i.removeEventListener(Fi,h),d=null}},createHref:function(e){return n(i,e)},createURL:v,encodeLocation:function(e){var n=v(e);return{pathname:n.pathname,search:n.search,hash:n.hash}},push:function(e,n){c=Mi.Push;var r=Ui(m.location,e,n);t&&t(r,e);var o=zi(r,f=p()+1),a=m.createHref(r);try{u.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(a)}s&&d&&d({action:c,location:m.location,delta:1})},replace:function(e,n){c=Mi.Replace;var r=Ui(m.location,e,n);t&&t(r,e);var o=zi(r,f=p()),a=m.createHref(r);u.replaceState(o,"",a),s&&d&&d({action:c,location:m.location,delta:0})},go:function(e){return u.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Di||(Di={}));var Vi=new Set(["lazy","caseSensitive","path","id","index","children"]);function qi(e,n,t,r){return void 0===t&&(t=[]),void 0===r&&(r={}),e.map((function(e,o){var a=[].concat(v(t),[o]),i="string"===typeof e.id?e.id:a.join("-");if(Bi(!0!==e.index||!e.children,"Cannot specify children on an index route"),Bi(!r[i],'Found a route id collision on id "'+i+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var l=Li({},e,n(e),{id:i});return r[i]=l,l}var s=Li({},e,n(e),{id:i,children:void 0});return r[i]=s,e.children&&(s.children=qi(e.children,n,a,r)),s}))}function Qi(e,n,t){void 0===t&&(t="/");var r=sl(("string"===typeof n?Hi(n):n).pathname||"/",t);if(null==r)return null;var o=Xi(e);!function(e){e.sort((function(e,n){return e.score!==n.score?n.score-e.score:function(e,n){var t=e.length===n.length&&e.slice(0,-1).every((function(e,t){return e===n[t]}));return t?e[e.length-1]-n[n.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),n.routesMeta.map((function(e){return e.childrenIndex})))}))}(o);for(var a=null,i=0;null==a&&i<o.length;++i)a=al(o[i],ll(r));return a}function Xi(e,n,t,r){void 0===n&&(n=[]),void 0===t&&(t=[]),void 0===r&&(r="");var o=function(e,o,a){var i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(Bi(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var l=fl([r,i.relativePath]),s=t.concat(i);e.children&&e.children.length>0&&(Bi(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),Xi(e.children,n,s,l)),(null!=e.path||e.index)&&n.push({path:l,score:ol(l,e.index),routesMeta:s})};return e.forEach((function(e,n){var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?")){var r,a=m(Yi(e.path));try{for(a.s();!(r=a.n()).done;){var i=r.value;o(e,n,i)}}catch(l){a.e(l)}finally{a.f()}}else o(e,n)})),n}function Yi(e){var n=e.split("/");if(0===n.length)return[];var t,r=x(t=n)||p(t)||h(t)||g(),o=r[0],a=r.slice(1),i=o.endsWith("?"),l=o.replace(/\?$/,"");if(0===a.length)return i?[l,""]:[l];var s=Yi(a.join("/")),u=[];return u.push.apply(u,v(s.map((function(e){return""===e?l:[l,e].join("/")})))),i&&u.push.apply(u,v(s)),u.map((function(n){return e.startsWith("/")&&""===n?"/":n}))}var $i=/^:\w+$/,Zi=3,Ji=2,el=1,nl=10,tl=-2,rl=function(e){return"*"===e};function ol(e,n){var t=e.split("/"),r=t.length;return t.some(rl)&&(r+=tl),n&&(r+=Ji),t.filter((function(e){return!rl(e)})).reduce((function(e,n){return e+($i.test(n)?Zi:""===n?el:nl)}),r)}function al(e,n){for(var t=e.routesMeta,r={},o="/",a=[],i=0;i<t.length;++i){var l=t[i],s=i===t.length-1,u="/"===o?n:n.slice(o.length)||"/",c=il({path:l.relativePath,caseSensitive:l.caseSensitive,end:s},u);if(!c)return null;Object.assign(r,c.params);var d=l.route;a.push({params:r,pathname:fl([o,c.pathname]),pathnameBase:pl(fl([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=fl([o,c.pathnameBase]))}return a}function il(e,n){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var t=function(e,n,t){void 0===n&&(n=!1);void 0===t&&(t=!0);Wi("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(function(e,n,t){return r.push({paramName:n,isOptional:null!=t}),t?"/?([^\\/]+)?":"/([^\\/]+)"}));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");var a=new RegExp(o,n?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=y(t,2),o=r[0],a=r[1],i=n.match(o);if(!i)return null;var l=i[0],s=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:a.reduce((function(e,n,t){var r=n.paramName,o=n.isOptional;if("*"===r){var a=u[t]||"";s=l.slice(0,l.length-a.length).replace(/(.)\/+$/,"$1")}var i=u[t];return e[r]=o&&!i?void 0:function(e,n){try{return decodeURIComponent(e)}catch(t){return Wi(!1,'The value for the URL param "'+n+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(i||"",r),e}),{}),pathname:l,pathnameBase:s,pattern:e}}function ll(e){try{return decodeURI(e)}catch(n){return Wi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}function sl(e,n){if("/"===n)return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;var t=n.endsWith("/")?n.length-1:n.length,r=e.charAt(t);return r&&"/"!==r?null:e.slice(t)||"/"}function ul(e,n,t,r){return"Cannot include a '"+e+"' character in a manually specified `to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function cl(e){return e.filter((function(e,n){return 0===n||e.route.path&&e.route.path.length>0}))}function dl(e,n,t,r){var o;void 0===r&&(r=!1),"string"===typeof e?o=Hi(e):(Bi(!(o=Li({},e)).pathname||!o.pathname.includes("?"),ul("?","pathname","search",o)),Bi(!o.pathname||!o.pathname.includes("#"),ul("#","pathname","hash",o)),Bi(!o.search||!o.search.includes("#"),ul("#","search","hash",o)));var a,i=""===e||""===o.pathname,l=i?"/":o.pathname;if(null==l)a=t;else if(r){var s=0===n.length?[]:n[n.length-1].replace(/^\//,"").split("/");if(l.startsWith("..")){for(var u=l.split("/");".."===u[0];)u.shift(),s.pop();o.pathname=u.join("/")}a="/"+s.join("/")}else{var c=n.length-1;if(l.startsWith("..")){for(var d=l.split("/");".."===d[0];)d.shift(),c-=1;o.pathname=d.join("/")}a=c>=0?n[c]:"/"}var f=function(e,n){void 0===n&&(n="/");var t="string"===typeof e?Hi(e):e,r=t.pathname,o=t.search,a=void 0===o?"":o,i=t.hash,l=void 0===i?"":i,s=r?r.startsWith("/")?r:function(e,n){var t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)})),t.length>1?t.join("/"):"/"}(r,n):n;return{pathname:s,search:hl(a),hash:vl(l)}}(o,a),p=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&t.endsWith("/");return f.pathname.endsWith("/")||!p&&!h||(f.pathname+="/"),f}var fl=function(e){return e.join("/").replace(/\/\/+/g,"/")},pl=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},hl=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},vl=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ml=function(e){Le(t,e);var n=We(t);function t(){return ze(this,t),n.apply(this,arguments)}return Ge(t)}(Oi(Error));var xl=Ge((function e(n,t,r,o){ze(this,e),void 0===o&&(o=!1),this.status=n,this.statusText=t||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function gl(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var yl=["post","put","patch","delete"],bl=new Set(yl),Nl=["get"].concat(yl),Il=new Set(Nl),Cl=new Set([301,302,303,307,308]),Sl=new Set([307,308]),El={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wl={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Al={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},kl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pl=function(e){return{hasErrorBoundary:Boolean(e.hasErrorBoundary)}},Tl="remix-router-transitions";function Ml(e){var n,t=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,o=!r;if(Bi(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)n=e.mapRouteProperties;else if(e.detectErrorBoundary){var i=e.detectErrorBoundary;n=function(e){return{hasErrorBoundary:i(e)}}}else n=Pl;var s,c,d={},f=qi(e.routes,n,void 0,d),p=e.basename||"/",h=Li({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),x=null,g=new Set,b=null,N=null,I=null,C=null!=e.hydrationData,S=Qi(f,e.history.location,p),E=null;if(null==S){var w=Yl(404,{pathname:e.history.location.pathname}),A=Xl(f);S=A.matches,E=u({},A.route.id,w)}var k,P=S.some((function(e){return e.route.lazy})),T=S.some((function(e){return e.route.loader}));if(P)c=!1;else if(T)if(h.v7_partialHydration){var M=e.hydrationData?e.hydrationData.loaderData:null,R=e.hydrationData?e.hydrationData.errors:null;c=S.every((function(e){return e.route.loader&&!0!==e.route.loader.hydrate&&(M&&void 0!==M[e.route.id]||R&&void 0!==R[e.route.id])}))}else c=null!=e.hydrationData;else c=!0;var _,j={historyAction:e.history.action,location:e.history.location,matches:S,initialized:c,navigation:El,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||E,fetchers:new Map,blockers:new Map},O=Mi.Pop,L=!1,D=!1,F=new Map,B=null,W=!1,z=!1,U=[],G=[],H=new Map,K=0,V=-1,q=new Map,Q=new Set,X=new Map,Y=new Map,$=new Set,Z=new Map,J=new Map,ee=!1;function ne(e,n){void 0===n&&(n={}),j=Li({},j,e);var t=[],r=[];h.v7_fetcherPersist&&j.fetchers.forEach((function(e,n){"idle"===e.state&&($.has(n)?r.push(n):t.push(n))})),v(g).forEach((function(e){return e(j,{deletedFetchers:r,unstable_viewTransitionOpts:n.viewTransitionOpts,unstable_flushSync:!0===n.flushSync})})),h.v7_fetcherPersist&&(t.forEach((function(e){return j.fetchers.delete(e)})),r.forEach((function(e){return Ne(e)})))}function te(n,t,r){var o,a,i,l=(void 0===r?{}:r).flushSync,u=null!=j.actionData&&null!=j.navigation.formMethod&&is(j.navigation.formMethod)&&"loading"===j.navigation.state&&!0!==(null==(o=n.state)?void 0:o._isRedirect);i=t.actionData?Object.keys(t.actionData).length>0?t.actionData:null:u?j.actionData:null;var c=t.loaderData?ql(j.loaderData,t.loaderData,t.matches||[],t.errors):j.loaderData,d=j.blockers;d.size>0&&(d=new Map(d)).forEach((function(e,n){return d.set(n,Al)}));var p,h=!0===L||null!=j.navigation.formMethod&&is(j.navigation.formMethod)&&!0!==(null==(a=n.state)?void 0:a._isRedirect);if(s&&(f=s,s=void 0),W||O===Mi.Pop||(O===Mi.Push?e.history.push(n,n.state):O===Mi.Replace&&e.history.replace(n,n.state)),O===Mi.Pop){var v=F.get(j.location.pathname);v&&v.has(n.pathname)?p={currentLocation:j.location,nextLocation:n}:F.has(n.pathname)&&(p={currentLocation:n,nextLocation:j.location})}else if(D){var m=F.get(j.location.pathname);m?m.add(n.pathname):(m=new Set([n.pathname]),F.set(j.location.pathname,m)),p={currentLocation:j.location,nextLocation:n}}ne(Li({},t,{actionData:i,loaderData:c,historyAction:O,location:n,initialized:!0,navigation:El,revalidation:"idle",restoreScrollPosition:Re(n,t.matches||j.matches),preventScrollReset:h,blockers:d}),{viewTransitionOpts:p,flushSync:!0===l}),O=Mi.Pop,L=!1,D=!1,W=!1,z=!1,U=[],G=[]}function re(e,n){return oe.apply(this,arguments)}function oe(){return oe=l(a().mark((function n(t,r){var o,i,l,s,u,c,d,f,v,m,x,g;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("number"!==typeof t){n.next=3;break}return e.history.go(t),n.abrupt("return");case 3:if(o=Rl(j.location,j.matches,p,h.v7_prependBasename,t,h.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),i=_l(h.v7_normalizeFormMethod,!1,o,r),l=i.path,s=i.submission,u=i.error,c=j.location,d=Li({},d=Ui(j.location,l,r&&r.state),e.history.encodeLocation(d)),f=r&&null!=r.replace?r.replace:void 0,v=Mi.Push,!0===f?v=Mi.Replace:!1===f||null!=s&&is(s.formMethod)&&s.formAction===j.location.pathname+j.location.search&&(v=Mi.Replace),m=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,x=!0===(r&&r.unstable_flushSync),!(g=ke({currentLocation:c,nextLocation:d,historyAction:v}))){n.next=17;break}return Ae(g,{state:"blocked",location:d,proceed:function(){Ae(g,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),re(t,r)},reset:function(){var e=new Map(j.blockers);e.set(g,Al),ne({blockers:e})}}),n.abrupt("return");case 17:return n.next=19,ae(v,d,{submission:s,pendingError:u,preventScrollReset:m,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:x});case 19:return n.abrupt("return",n.sent);case 20:case"end":return n.stop()}}),n)}))),oe.apply(this,arguments)}function ae(e,n,t){return ie.apply(this,arguments)}function ie(){return ie=l(a().mark((function n(t,r,o){var i,l,c,d,h,v,m,x,g,y,b,N,I,C,S,E;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_&&_.abort(),_=null,O=t,W=!0===(o&&o.startUninterruptedRevalidation),Me(j.location,j.matches),L=!0===(o&&o.preventScrollReset),D=!0===(o&&o.enableViewTransition),i=s||f,l=o&&o.overrideNavigation,c=Qi(i,r,p),d=!0===(o&&o.flushSync),c){n.next=17;break}return h=Yl(404,{pathname:r.pathname}),v=Xl(i),m=v.matches,x=v.route,Pe(),te(r,{matches:m,loaderData:{},errors:u({},x.id,h)},{flushSync:d}),n.abrupt("return");case 17:if(!j.initialized||z||!Jl(j.location,r)||o&&o.submission&&is(o.submission.formMethod)){n.next=20;break}return te(r,{matches:c},{flushSync:d}),n.abrupt("return");case 20:if(_=new AbortController,g=Ul(e.history,r,_.signal,o&&o.submission),!o||!o.pendingError){n.next=26;break}b=u({},Ql(c).route.id,o.pendingError),n.next=37;break;case 26:if(!(o&&o.submission&&is(o.submission.formMethod))){n.next=37;break}return n.next=29,le(g,r,o.submission,c,{replace:o.replace,flushSync:d});case 29:if(!(N=n.sent).shortCircuited){n.next=32;break}return n.abrupt("return");case 32:y=N.pendingActionData,b=N.pendingActionError,l=hs(r,o.submission),d=!1,g=new Request(g.url,{signal:g.signal});case 37:return n.next=39,ue(g,r,c,l,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,o&&!0===o.initialHydration,d,y,b);case 39:if(I=n.sent,C=I.shortCircuited,S=I.loaderData,E=I.errors,!C){n.next=45;break}return n.abrupt("return");case 45:_=null,te(r,Li({matches:c},y?{actionData:y}:{},{loaderData:S,errors:E}));case 47:case"end":return n.stop()}}),n)}))),ie.apply(this,arguments)}function le(e,n,t,r,o){return se.apply(this,arguments)}function se(){return se=l(a().mark((function e(t,r,o,i,l){var s,c,f,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===l&&(l={}),xe(),ne({navigation:vs(r,o)},{flushSync:!0===l.flushSync}),(c=fs(i,r)).route.action||c.route.lazy){e.next=9;break}s={type:Di.error,error:Yl(405,{method:t.method,pathname:r.pathname,routeId:c.route.id})},e.next=14;break;case 9:return e.next=11,Wl("action",t,c,i,d,n,p,h.v7_relativeSplatPath);case 11:if(s=e.sent,!t.signal.aborted){e.next=14;break}return e.abrupt("return",{shortCircuited:!0});case 14:if(!ts(s)){e.next=19;break}return f=l&&null!=l.replace?l.replace:s.location===j.location.pathname+j.location.search,e.next=18,pe(j,s,{submission:o,replace:f});case 18:return e.abrupt("return",{shortCircuited:!0});case 19:if(!ns(s)){e.next=23;break}return v=Ql(i,c.route.id),!0!==(l&&l.replace)&&(O=Mi.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:u({},v.route.id,s.error)});case 23:if(!es(s)){e.next=25;break}throw Yl(400,{type:"defer-action"});case 25:return e.abrupt("return",{pendingActionData:u({},c.route.id,s.data)});case 26:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ue(e,n,t,r,o,a,i,l,s,u,c){return ce.apply(this,arguments)}function ce(){return ce=l(a().mark((function n(t,r,o,i,l,u,c,d,v,m,x){var g,b,N,I,C,S,E,w,A,k,P,T,M,R,O,L,D,F,B,q,Y,J;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g=i||hs(r,l),b=l||u||ps(g),N=s||f,I=Ol(e.history,j,o,b,r,h.v7_partialHydration&&!0===d,z,U,G,$,X,Q,N,p,m,x),C=y(I,2),S=C[0],E=C[1],Pe((function(e){return!(o&&o.some((function(n){return n.route.id===e})))||S&&S.some((function(n){return n.route.id===e}))})),V=++K,0!==S.length||0!==E.length){n.next=10;break}return w=Se(),te(r,Li({matches:o,loaderData:{},errors:x||null},m?{actionData:m}:{},w?{fetchers:new Map(j.fetchers)}:{}),{flushSync:v}),n.abrupt("return",{shortCircuited:!0});case 10:return W||h.v7_partialHydration&&d||(E.forEach((function(e){var n=j.fetchers.get(e.key),t=ms(void 0,n?n.data:void 0);j.fetchers.set(e.key,t)})),A=m||j.actionData,ne(Li({navigation:g},A?0===Object.keys(A).length?{actionData:null}:{actionData:A}:{},E.length>0?{fetchers:new Map(j.fetchers)}:{}),{flushSync:v})),E.forEach((function(e){H.has(e.key)&&Ie(e.key),e.controller&&H.set(e.key,e.controller)})),k=function(){return E.forEach((function(e){return Ie(e.key)}))},_&&_.signal.addEventListener("abort",k),n.next=16,ve(j.matches,o,S,E,t);case 16:if(P=n.sent,T=P.results,M=P.loaderResults,R=P.fetcherResults,!t.signal.aborted){n.next=22;break}return n.abrupt("return",{shortCircuited:!0});case 22:if(_&&_.signal.removeEventListener("abort",k),E.forEach((function(e){return H.delete(e.key)})),!(O=$l(T))){n.next=30;break}return O.idx>=S.length&&(L=E[O.idx-S.length].key,Q.add(L)),n.next=29,pe(j,O.result,{replace:c});case 29:return n.abrupt("return",{shortCircuited:!0});case 30:return D=Vl(j,o,S,M,x,E,R,Z),F=D.loaderData,B=D.errors,Z.forEach((function(e,n){e.subscribe((function(t){(t||e.done)&&Z.delete(n)}))})),q=Se(),Y=Ee(V),J=q||Y||E.length>0,n.abrupt("return",Li({loaderData:F,errors:B},J?{fetchers:new Map(j.fetchers)}:{}));case 36:case"end":return n.stop()}}),n)}))),ce.apply(this,arguments)}function de(){return de=l(a().mark((function t(r,o,i,l,c,v,m){var x,g,b,N,I,C,S,E,w,A,k,P,T,M,R,L,D,F,B,W,Y,J,ee,re,oe,ae,ie;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(xe(),X.delete(r),l.route.action||l.route.lazy){t.next=6;break}return x=Yl(405,{method:m.formMethod,pathname:i,routeId:o}),ye(r,o,x,{flushSync:v}),t.abrupt("return");case 6:return g=j.fetchers.get(r),ge(r,xs(m,g),{flushSync:v}),b=new AbortController,N=Ul(e.history,i,b.signal,m),H.set(r,b),I=K,t.next=14,Wl("action",N,l,c,d,n,p,h.v7_relativeSplatPath);case 14:if(C=t.sent,!N.signal.aborted){t.next=18;break}return H.get(r)===b&&H.delete(r),t.abrupt("return");case 18:if(!$.has(r)){t.next=21;break}return ge(r,gs(void 0)),t.abrupt("return");case 21:if(!ts(C)){t.next=31;break}if(H.delete(r),!(V>I)){t.next=28;break}return ge(r,gs(void 0)),t.abrupt("return");case 28:return Q.add(r),ge(r,ms(m)),t.abrupt("return",pe(j,C,{fetcherSubmission:m}));case 31:if(!ns(C)){t.next=34;break}return ye(r,o,C.error),t.abrupt("return");case 34:if(!es(C)){t.next=36;break}throw Yl(400,{type:"defer-action"});case 36:return S=j.navigation.location||j.location,E=Ul(e.history,S,b.signal),w=s||f,Bi(A="idle"!==j.navigation.state?Qi(w,j.navigation.location,p):j.matches,"Didn't find any matches after fetcher action"),k=++K,q.set(r,k),P=ms(m,C.data),j.fetchers.set(r,P),T=Ol(e.history,j,A,m,S,!1,z,U,G,$,X,Q,w,p,u({},l.route.id,C.data),void 0),M=y(T,2),R=M[0],(L=M[1]).filter((function(e){return e.key!==r})).forEach((function(e){var n=e.key,t=j.fetchers.get(n),r=ms(void 0,t?t.data:void 0);j.fetchers.set(n,r),H.has(n)&&Ie(n),e.controller&&H.set(n,e.controller)})),ne({fetchers:new Map(j.fetchers)}),D=function(){return L.forEach((function(e){return Ie(e.key)}))},b.signal.addEventListener("abort",D),t.next=52,ve(j.matches,A,R,L,E);case 52:if(F=t.sent,B=F.results,W=F.loaderResults,Y=F.fetcherResults,!b.signal.aborted){t.next=58;break}return t.abrupt("return");case 58:if(b.signal.removeEventListener("abort",D),q.delete(r),H.delete(r),L.forEach((function(e){return H.delete(e.key)})),!(J=$l(B))){t.next=66;break}return J.idx>=R.length&&(ee=L[J.idx-R.length].key,Q.add(ee)),t.abrupt("return",pe(j,J.result));case 66:re=Vl(j,j.matches,R,W,void 0,L,Y,Z),oe=re.loaderData,ae=re.errors,j.fetchers.has(r)&&(ie=gs(C.data),j.fetchers.set(r,ie)),Ee(k),"loading"===j.navigation.state&&k>V?(Bi(O,"Expected pending action"),_&&_.abort(),te(j.navigation.location,{matches:A,loaderData:oe,errors:ae,fetchers:new Map(j.fetchers)})):(ne({errors:ae,loaderData:ql(j.loaderData,oe,A,ae),fetchers:new Map(j.fetchers)}),z=!1);case 70:case"end":return t.stop()}}),t)}))),de.apply(this,arguments)}function fe(){return fe=l(a().mark((function t(r,o,i,l,s,u,c){var f,v,m,x,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=j.fetchers.get(r),ge(r,ms(c,f?f.data:void 0),{flushSync:u}),v=new AbortController,m=Ul(e.history,i,v.signal),H.set(r,v),x=K,t.next=8,Wl("loader",m,l,s,d,n,p,h.v7_relativeSplatPath);case 8:if(!es(g=t.sent)){t.next=16;break}return t.next=12,us(g,m.signal,!0);case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0=g;case 15:g=t.t0;case 16:if(H.get(r)===v&&H.delete(r),!m.signal.aborted){t.next=19;break}return t.abrupt("return");case 19:if(!$.has(r)){t.next=22;break}return ge(r,gs(void 0)),t.abrupt("return");case 22:if(!ts(g)){t.next=32;break}if(!(V>x)){t.next=28;break}return ge(r,gs(void 0)),t.abrupt("return");case 28:return Q.add(r),t.next=31,pe(j,g);case 31:return t.abrupt("return");case 32:if(!ns(g)){t.next=35;break}return ye(r,o,g.error),t.abrupt("return");case 35:Bi(!es(g),"Unhandled fetcher deferred data"),ge(r,gs(g.data));case 37:case"end":return t.stop()}}),t)}))),fe.apply(this,arguments)}function pe(e,n,t){return he.apply(this,arguments)}function he(){return he=l(a().mark((function n(o,i,l){var s,u,c,d,f,h,v,m,x,g,y,b,N,I;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(s=void 0===l?{}:l).submission,c=s.fetcherSubmission,d=s.replace,i.revalidate&&(z=!0),Bi(f=Ui(o.location,i.location,{_isRedirect:!0}),"Expected a location on the redirect navigation"),!r){n.next=10;break}if(h=!1,i.reloadDocument?h=!0:kl.test(i.location)&&(v=e.history.createURL(i.location),h=v.origin!==t.location.origin||null==sl(v.pathname,p)),!h){n.next=10;break}return d?t.location.replace(i.location):t.location.assign(i.location),n.abrupt("return");case 10:if(_=null,m=!0===d?Mi.Replace:Mi.Push,x=o.navigation,g=x.formMethod,y=x.formAction,b=x.formEncType,!u&&!c&&g&&y&&b&&(u=ps(o.navigation)),N=u||c,!(Sl.has(i.status)&&N&&is(N.formMethod))){n.next=20;break}return n.next=18,ae(m,f,{submission:Li({},N,{formAction:i.location}),preventScrollReset:L});case 18:n.next=23;break;case 20:return I=hs(f,u),n.next=23,ae(m,f,{overrideNavigation:I,fetcherSubmission:c,preventScrollReset:L});case 23:case"end":return n.stop()}}),n)}))),he.apply(this,arguments)}function ve(e,n,t,r,o){return me.apply(this,arguments)}function me(){return me=l(a().mark((function t(r,o,i,l,s){var u,c,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([].concat(v(i.map((function(e){return Wl("loader",s,e,o,d,n,p,h.v7_relativeSplatPath)}))),v(l.map((function(t){return t.matches&&t.match&&t.controller?Wl("loader",Ul(e.history,t.path,t.controller.signal),t.match,t.matches,d,n,p,h.v7_relativeSplatPath):{type:Di.error,error:Yl(404,{pathname:t.path})}})))));case 2:return u=t.sent,c=u.slice(0,i.length),f=u.slice(i.length),t.next=7,Promise.all([ls(r,i,c,c.map((function(){return s.signal})),!1,j.loaderData),ls(r,l.map((function(e){return e.match})),f,l.map((function(e){return e.controller?e.controller.signal:null})),!0)]);case 7:return t.abrupt("return",{results:u,loaderResults:c,fetcherResults:f});case 8:case"end":return t.stop()}}),t)}))),me.apply(this,arguments)}function xe(){var e;z=!0,(e=U).push.apply(e,v(Pe())),X.forEach((function(e,n){H.has(n)&&(G.push(n),Ie(n))}))}function ge(e,n,t){void 0===t&&(t={}),j.fetchers.set(e,n),ne({fetchers:new Map(j.fetchers)},{flushSync:!0===(t&&t.flushSync)})}function ye(e,n,t,r){void 0===r&&(r={});var o=Ql(j.matches,n);Ne(e),ne({errors:u({},o.route.id,t),fetchers:new Map(j.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function be(e){return h.v7_fetcherPersist&&(Y.set(e,(Y.get(e)||0)+1),$.has(e)&&$.delete(e)),j.fetchers.get(e)||wl}function Ne(e){var n=j.fetchers.get(e);!H.has(e)||n&&"loading"===n.state&&q.has(e)||Ie(e),X.delete(e),q.delete(e),Q.delete(e),$.delete(e),j.fetchers.delete(e)}function Ie(e){var n=H.get(e);Bi(n,"Expected fetch controller: "+e),n.abort(),H.delete(e)}function Ce(e){var n,t=m(e);try{for(t.s();!(n=t.n()).done;){var r=n.value,o=gs(be(r).data);j.fetchers.set(r,o)}}catch(a){t.e(a)}finally{t.f()}}function Se(){var e,n=[],t=!1,r=m(Q);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=j.fetchers.get(o);Bi(a,"Expected fetcher: "+o),"loading"===a.state&&(Q.delete(o),n.push(o),t=!0)}}catch(i){r.e(i)}finally{r.f()}return Ce(n),t}function Ee(e){var n,t=[],r=m(q);try{for(r.s();!(n=r.n()).done;){var o=y(n.value,2),a=o[0];if(o[1]<e){var i=j.fetchers.get(a);Bi(i,"Expected fetcher: "+a),"loading"===i.state&&(Ie(a),q.delete(a),t.push(a))}}}catch(l){r.e(l)}finally{r.f()}return Ce(t),t.length>0}function we(e){j.blockers.delete(e),J.delete(e)}function Ae(e,n){var t=j.blockers.get(e)||Al;Bi("unblocked"===t.state&&"blocked"===n.state||"blocked"===t.state&&"blocked"===n.state||"blocked"===t.state&&"proceeding"===n.state||"blocked"===t.state&&"unblocked"===n.state||"proceeding"===t.state&&"unblocked"===n.state,"Invalid blocker state transition: "+t.state+" -> "+n.state);var r=new Map(j.blockers);r.set(e,n),ne({blockers:r})}function ke(e){var n=e.currentLocation,t=e.nextLocation,r=e.historyAction;if(0!==J.size){J.size>1&&Wi(!1,"A router only supports one blocker at a time");var o=Array.from(J.entries()),a=y(o[o.length-1],2),i=a[0],l=a[1],s=j.blockers.get(i);if(!s||"proceeding"!==s.state)return l({currentLocation:n,nextLocation:t,historyAction:r})?i:void 0}}function Pe(e){var n=[];return Z.forEach((function(t,r){e&&!e(r)||(t.cancel(),n.push(r),Z.delete(r))})),n}function Te(e,n){if(N){var t=N(e,n.map((function(e){return function(e,n){var t=e.route,r=e.pathname,o=e.params;return{id:t.id,pathname:r,params:o,data:n[t.id],handle:t.handle}}(e,j.loaderData)})));return t||e.key}return e.key}function Me(e,n){if(b&&I){var t=Te(e,n);b[t]=I()}}function Re(e,n){if(b){var t=Te(e,n),r=b[t];if("number"===typeof r)return r}return null}return k={get basename(){return p},get future(){return h},get state(){return j},get routes(){return f},get window(){return t},initialize:function(){if(x=e.history.listen((function(n){var t=n.action,r=n.location,o=n.delta;if(!ee){Wi(0===J.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=ke({currentLocation:j.location,nextLocation:r,historyAction:t});return a&&null!=o?(ee=!0,e.history.go(-1*o),void Ae(a,{state:"blocked",location:r,proceed:function(){Ae(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(o)},reset:function(){var e=new Map(j.blockers);e.set(a,Al),ne({blockers:e})}})):ae(t,r)}ee=!1})),r){!function(e,n){try{var t=e.sessionStorage.getItem(Tl);if(t)for(var r=JSON.parse(t),o=0,a=Object.entries(r||{});o<a.length;o++){var i=y(a[o],2),l=i[0],s=i[1];s&&Array.isArray(s)&&n.set(l,new Set(s||[]))}}catch(u){}}(t,F);var n=function(){return function(e,n){if(n.size>0){var t,r={},o=m(n);try{for(o.s();!(t=o.n()).done;){var a=y(t.value,2),i=a[0],l=a[1];r[i]=v(l)}}catch(s){o.e(s)}finally{o.f()}try{e.sessionStorage.setItem(Tl,JSON.stringify(r))}catch(w){Wi(!1,"Failed to save applied view transitions in sessionStorage ("+w+").")}}}(t,F)};t.addEventListener("pagehide",n),B=function(){return t.removeEventListener("pagehide",n)}}return j.initialized||ae(Mi.Pop,j.location,{initialHydration:!0}),k},subscribe:function(e){return g.add(e),function(){return g.delete(e)}},enableScrollRestoration:function(e,n,t){if(b=e,I=n,N=t||null,!C&&j.navigation===El){C=!0;var r=Re(j.location,j.matches);null!=r&&ne({restoreScrollPosition:r})}return function(){b=null,I=null,N=null}},navigate:re,fetch:function(e,n,t,r){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(e)&&Ie(e);var a=!0===(r&&r.unstable_flushSync),i=s||f,l=Rl(j.location,j.matches,p,h.v7_prependBasename,t,h.v7_relativeSplatPath,n,null==r?void 0:r.relative),u=Qi(i,l,p);if(u){var c=_l(h.v7_normalizeFormMethod,!0,l,r),d=c.path,v=c.submission,m=c.error;if(m)ye(e,n,m,{flushSync:a});else{var x=fs(u,d);L=!0===(r&&r.preventScrollReset),v&&is(v.formMethod)?function(e,n,t,r,o,a,i){de.apply(this,arguments)}(e,n,d,x,u,a,v):(X.set(e,{routeId:n,path:d}),function(e,n,t,r,o,a,i){fe.apply(this,arguments)}(e,n,d,x,u,a,v))}}else ye(e,n,Yl(404,{pathname:l}),{flushSync:a})},revalidate:function(){xe(),ne({revalidation:"loading"}),"submitting"!==j.navigation.state&&("idle"!==j.navigation.state?ae(O||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation}):ae(j.historyAction,j.location,{startUninterruptedRevalidation:!0}))},createHref:function(n){return e.history.createHref(n)},encodeLocation:function(n){return e.history.encodeLocation(n)},getFetcher:be,deleteFetcher:function(e){if(h.v7_fetcherPersist){var n=(Y.get(e)||0)-1;n<=0?(Y.delete(e),$.add(e)):Y.set(e,n)}else Ne(e);ne({fetchers:new Map(j.fetchers)})},dispose:function(){x&&x(),B&&B(),g.clear(),_&&_.abort(),j.fetchers.forEach((function(e,n){return Ne(n)})),j.blockers.forEach((function(e,n){return we(n)}))},getBlocker:function(e,n){var t=j.blockers.get(e)||Al;return J.get(e)!==n&&J.set(e,n),t},deleteBlocker:we,_internalFetchControllers:H,_internalActiveDeferreds:Z,_internalSetRoutes:function(e){s=qi(e,n,void 0,d={})}},k}Symbol("deferred");function Rl(e,n,t,r,o,a,i,l){var s,u;if(i){s=[];var c,d=m(n);try{for(d.s();!(c=d.n()).done;){var f=c.value;if(s.push(f),f.route.id===i){u=f;break}}}catch(h){d.e(h)}finally{d.f()}}else s=n,u=n[n.length-1];var p=dl(o||".",function(e,n){var t=cl(e);return n?t.map((function(n,t){return t===e.length-1?n.pathname:n.pathnameBase})):t.map((function(e){return e.pathnameBase}))}(s,a),sl(e.pathname,t)||e.pathname,"path"===l);return null==o&&(p.search=e.search,p.hash=e.hash),null!=o&&""!==o&&"."!==o||!u||!u.route.index||ds(p.search)||(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==t&&(p.pathname="/"===p.pathname?t:fl([t,p.pathname])),Gi(p)}function _l(e,n,t,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:t};if(r.formMethod&&!as(r.formMethod))return{path:t,error:Yl(405,{method:r.formMethod})};var o,a,i=function(){return{path:t,error:Yl(400,{type:"invalid-body"})}},l=r.formMethod||"get",s=e?l.toUpperCase():l.toLowerCase(),u=Zl(t);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!is(s))return i();var c="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((function(e,n){var t=y(n,2);return""+e+t[0]+"="+t[1]+"\n"}),""):String(r.body);return{path:t,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:c}}}if("application/json"===r.formEncType){if(!is(s))return i();try{var d="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch(h){return i()}}}if(Bi("function"===typeof FormData,"FormData is not available in this environment"),r.formData)o=Gl(r.formData),a=r.formData;else if(r.body instanceof FormData)o=Gl(r.body),a=r.body;else if(r.body instanceof URLSearchParams)a=Hl(o=r.body);else if(null==r.body)o=new URLSearchParams,a=new FormData;else try{a=Hl(o=new URLSearchParams(r.body))}catch(h){return i()}var f={formMethod:s,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:a,json:void 0,text:void 0};if(is(f.formMethod))return{path:t,submission:f};var p=Hi(t);return n&&p.search&&ds(p.search)&&o.append("index",""),p.search="?"+o,{path:Gi(p),submission:f}}function jl(e,n){var t=e;if(n){var r=e.findIndex((function(e){return e.route.id===n}));r>=0&&(t=e.slice(0,r))}return t}function Ol(e,n,t,r,o,a,i,l,s,u,c,d,f,p,h,v){var m=v?Object.values(v)[0]:h?Object.values(h)[0]:void 0,x=e.createURL(n.location),g=e.createURL(o),y=v?Object.keys(v)[0]:void 0,b=jl(t,y).filter((function(e,t){if(a)return function(e,n){if(!n.loader)return!1;if(n.loader.hydrate)return!0;return void 0===e.loaderData[n.id]&&(!e.errors||void 0===e.errors[n.id])}(n,e.route);if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,n,t){var r=!n||t.route.id!==n.route.id,o=void 0===e[t.route.id];return r||o}(n.loaderData,n.matches[t],e)||l.some((function(n){return n===e.route.id})))return!0;var o=n.matches[t],s=e;return Dl(e,Li({currentUrl:x,currentParams:o.params,nextUrl:g,nextParams:s.params},r,{actionResult:m,defaultShouldRevalidate:i||x.pathname+x.search===g.pathname+g.search||x.search!==g.search||Ll(o,s)}))})),N=[];return c.forEach((function(e,o){if(!a&&t.some((function(n){return n.route.id===e.routeId}))&&!u.has(o)){var l=Qi(f,e.path,p);if(l){var c=n.fetchers.get(o),h=fs(l,e.path);!d.has(o)&&(!!s.includes(o)||(c&&"idle"!==c.state&&void 0===c.data?i:Dl(h,Li({currentUrl:x,currentParams:n.matches[n.matches.length-1].params,nextUrl:g,nextParams:t[t.length-1].params},r,{actionResult:m,defaultShouldRevalidate:i}))))&&N.push({key:o,routeId:e.routeId,path:e.path,matches:l,match:h,controller:new AbortController})}else N.push({key:o,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null})}})),[b,N]}function Ll(e,n){var t=e.route.path;return e.pathname!==n.pathname||null!=t&&t.endsWith("*")&&e.params["*"]!==n.params["*"]}function Dl(e,n){if(e.route.shouldRevalidate){var t=e.route.shouldRevalidate(n);if("boolean"===typeof t)return t}return n.defaultShouldRevalidate}function Fl(e,n,t){return Bl.apply(this,arguments)}function Bl(){return Bl=l(a().mark((function e(n,t,r){var o,i,l,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.lazy();case 4:if(o=e.sent,n.lazy){e.next=7;break}return e.abrupt("return");case 7:for(s in Bi(i=r[n.id],"No route found in manifest"),l={},o)u=i[s],Wi(!(c=void 0!==u&&"hasErrorBoundary"!==s),'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+s+'" will be ignored.'),c||Vi.has(s)||(l[s]=o[s]);Object.assign(i,l),Object.assign(i,Li({},t(i),{lazy:void 0}));case 13:case"end":return e.stop()}}),e)}))),Bl.apply(this,arguments)}function Wl(e,n,t,r,o,a,i,l,s){return zl.apply(this,arguments)}function zl(){return zl=l(a().mark((function e(n,t,r,o,i,l,s,u,c){var d,f,p,h,v,m,x,g,y,b,N,I,C,S,E,w,A,k,P;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c&&(c={}),h=function(e){var n,o=new Promise((function(e,t){return n=t}));return p=function(){return n()},t.signal.addEventListener("abort",p),Promise.race([e({request:t,params:r.params,context:c.requestContext}),o])},e.prev=2,v=r.route[n],!r.route.lazy){e.next=32;break}if(!v){e.next=14;break}return e.next=8,Promise.all([h(v).catch((function(e){m=e})),Fl(r.route,l,i)]);case 8:if(x=e.sent,!m){e.next=11;break}throw m;case 11:f=x[0],e.next=30;break;case 14:return e.next=16,Fl(r.route,l,i);case 16:if(!(v=r.route[n])){e.next=23;break}return e.next=20,h(v);case 20:f=e.sent,e.next=30;break;case 23:if("action"!==n){e.next=29;break}throw g=new URL(t.url),y=g.pathname+g.search,Yl(405,{method:t.method,pathname:y,routeId:r.route.id});case 29:return e.abrupt("return",{type:Di.data,data:void 0});case 30:e.next=41;break;case 32:if(v){e.next=38;break}throw b=new URL(t.url),Yl(404,{pathname:b.pathname+b.search});case 38:return e.next=40,h(v);case 40:f=e.sent;case 41:Bi(void 0!==f,"You defined "+("action"===n?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+n+"` function. Please return a value or `null`."),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(2),d=Di.error,f=e.t0;case 48:return e.prev=48,p&&t.signal.removeEventListener("abort",p),e.finish(48);case 51:if(!os(f)){e.next=83;break}if(N=f.status,!Cl.has(N)){e.next=61;break}if(Bi(I=f.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),kl.test(I)?c.isStaticRequest||(C=new URL(t.url),S=I.startsWith("//")?new URL(C.protocol+I):new URL(I),E=null!=sl(S.pathname,s),S.origin===C.origin&&E&&(I=S.pathname+S.search+S.hash)):I=Rl(new URL(t.url),o.slice(0,o.indexOf(r)+1),s,!0,I,u),!c.isStaticRequest){e.next=60;break}throw f.headers.set("Location",I),f;case 60:return e.abrupt("return",{type:Di.redirect,status:N,location:I,revalidate:null!==f.headers.get("X-Remix-Revalidate"),reloadDocument:null!==f.headers.get("X-Remix-Reload-Document")});case 61:if(!c.isRouteRequest){e.next=64;break}throw{type:d===Di.error?Di.error:Di.data,response:f};case 64:if(e.prev=64,!(A=f.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(A)){e.next=72;break}return e.next=69,f.json();case 69:w=e.sent,e.next=75;break;case 72:return e.next=74,f.text();case 74:w=e.sent;case 75:e.next=80;break;case 77:return e.prev=77,e.t1=e.catch(64),e.abrupt("return",{type:Di.error,error:e.t1});case 80:if(d!==Di.error){e.next=82;break}return e.abrupt("return",{type:d,error:new xl(N,f.statusText,w),headers:f.headers});case 82:return e.abrupt("return",{type:Di.data,data:w,statusCode:f.status,headers:f.headers});case 83:if(d!==Di.error){e.next=85;break}return e.abrupt("return",{type:d,error:f});case 85:if(!rs(f)){e.next=87;break}return e.abrupt("return",{type:Di.deferred,deferredData:f,statusCode:null==(k=f.init)?void 0:k.status,headers:(null==(P=f.init)?void 0:P.headers)&&new Headers(f.init.headers)});case 87:return e.abrupt("return",{type:Di.data,data:f});case 88:case"end":return e.stop()}}),e,null,[[2,44,48,51],[64,77]])}))),zl.apply(this,arguments)}function Ul(e,n,t,r){var o=e.createURL(Zl(n)).toString(),a={signal:t};if(r&&is(r.formMethod)){var i=r.formMethod,l=r.formEncType;a.method=i.toUpperCase(),"application/json"===l?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):"text/plain"===l?a.body=r.text:"application/x-www-form-urlencoded"===l&&r.formData?a.body=Gl(r.formData):a.body=r.formData}return new Request(o,a)}function Gl(e){var n,t=new URLSearchParams,r=m(e.entries());try{for(r.s();!(n=r.n()).done;){var o=y(n.value,2),a=o[0],i=o[1];t.append(a,"string"===typeof i?i:i.name)}}catch(l){r.e(l)}finally{r.f()}return t}function Hl(e){var n,t=new FormData,r=m(e.entries());try{for(r.s();!(n=r.n()).done;){var o=y(n.value,2),a=o[0],i=o[1];t.append(a,i)}}catch(l){r.e(l)}finally{r.f()}return t}function Kl(e,n,t,r,o){var a,i={},l=null,s=!1,u={};return t.forEach((function(t,c){var d=n[c].route.id;if(Bi(!ts(t),"Cannot handle redirect results in processLoaderData"),ns(t)){var f=Ql(e,d),p=t.error;r&&(p=Object.values(r)[0],r=void 0),null==(l=l||{})[f.route.id]&&(l[f.route.id]=p),i[d]=void 0,s||(s=!0,a=gl(t.error)?t.error.status:500),t.headers&&(u[d]=t.headers)}else es(t)?(o.set(d,t.deferredData),i[d]=t.deferredData.data):i[d]=t.data,null==t.statusCode||200===t.statusCode||s||(a=t.statusCode),t.headers&&(u[d]=t.headers)})),r&&(l=r,i[Object.keys(r)[0]]=void 0),{loaderData:i,errors:l,statusCode:a||200,loaderHeaders:u}}function Vl(e,n,t,r,o,a,i,l){for(var s=Kl(n,t,r,o,l),c=s.loaderData,d=s.errors,f=0;f<a.length;f++){var p=a[f],h=p.key,v=p.match,m=p.controller;Bi(void 0!==i&&void 0!==i[f],"Did not find corresponding fetcher result");var x=i[f];if(!m||!m.signal.aborted)if(ns(x)){var g=Ql(e.matches,null==v?void 0:v.route.id);d&&d[g.route.id]||(d=Li({},d,u({},g.route.id,x.error))),e.fetchers.delete(h)}else if(ts(x))Bi(!1,"Unhandled fetcher revalidation redirect");else if(es(x))Bi(!1,"Unhandled fetcher deferred data");else{var y=gs(x.data);e.fetchers.set(h,y)}}return{loaderData:c,errors:d}}function ql(e,n,t,r){var o,a=Li({},n),i=m(t);try{for(i.s();!(o=i.n()).done;){var l=o.value,s=l.route.id;if(n.hasOwnProperty(s)?void 0!==n[s]&&(a[s]=n[s]):void 0!==e[s]&&l.route.loader&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(u){i.e(u)}finally{i.f()}return a}function Ql(e,n){return(n?e.slice(0,e.findIndex((function(e){return e.route.id===n}))+1):v(e)).reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function Xl(e){var n=1===e.length?e[0]:e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function Yl(e,n){var t=void 0===n?{}:n,r=t.pathname,o=t.routeId,a=t.method,i=t.type,l="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(l="Bad Request",a&&r&&o?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+o+'", so there is no way to handle the request.':"defer-action"===i?s="defer() is not supported in actions":"invalid-body"===i&&(s="Unable to encode submission body")):403===e?(l="Forbidden",s='Route "'+o+'" does not match URL "'+r+'"'):404===e?(l="Not Found",s='No route matches URL "'+r+'"'):405===e&&(l="Method Not Allowed",a&&r&&o?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+o+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new xl(e||500,l,new Error(s),!0)}function $l(e){for(var n=e.length-1;n>=0;n--){var t=e[n];if(ts(t))return{result:t,idx:n}}}function Zl(e){return Gi(Li({},"string"===typeof e?Hi(e):e,{hash:""}))}function Jl(e,n){return e.pathname===n.pathname&&e.search===n.search&&(""===e.hash?""!==n.hash:e.hash===n.hash||""!==n.hash)}function es(e){return e.type===Di.deferred}function ns(e){return e.type===Di.error}function ts(e){return(e&&e.type)===Di.redirect}function rs(e){var n=e;return n&&"object"===typeof n&&"object"===typeof n.data&&"function"===typeof n.subscribe&&"function"===typeof n.cancel&&"function"===typeof n.resolveData}function os(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function as(e){return Il.has(e.toLowerCase())}function is(e){return bl.has(e.toLowerCase())}function ls(e,n,t,r,o,a){return ss.apply(this,arguments)}function ss(){return(ss=l(a().mark((function e(n,t,r,o,i,l){var s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a().mark((function e(s){var u,c,d,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r[s],c=t[s]){e.next=4;break}return e.abrupt("return","continue");case 4:if(d=n.find((function(e){return e.route.id===c.route.id})),f=null!=d&&!Ll(d,c)&&void 0!==(l&&l[c.route.id]),!es(u)||!i&&!f){e.next=11;break}return Bi(p=o[s],"Expected an AbortSignal for revalidating fetcher deferred result"),e.next=11,us(u,p,i).then((function(e){e&&(r[s]=e||r[s])}));case 11:case"end":return e.stop()}}),e)})),u=0;case 2:if(!(u<r.length)){e.next=10;break}return e.delegateYield(s(u),"t0",4);case 4:if("continue"!==e.t0){e.next=7;break}return e.abrupt("continue",7);case 7:u++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,n,t){return cs.apply(this,arguments)}function cs(){return(cs=l(a().mark((function e(n,t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,n.deferredData.resolveData(t);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:Di.data,data:n.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:Di.error,error:e.t0});case 14:return e.abrupt("return",{type:Di.data,data:n.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])})))).apply(this,arguments)}function ds(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function fs(e,n){var t="string"===typeof n?Hi(n).search:n.search;if(e[e.length-1].route.index&&ds(t||""))return e[e.length-1];var r=cl(e);return r[r.length-1]}function ps(e){var n=e.formMethod,t=e.formAction,r=e.formEncType,o=e.text,a=e.formData,i=e.json;if(n&&t&&r)return null!=o?{formMethod:n,formAction:t,formEncType:r,formData:void 0,json:void 0,text:o}:null!=a?{formMethod:n,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0}:void 0!==i?{formMethod:n,formAction:t,formEncType:r,formData:void 0,json:i,text:void 0}:void 0}function hs(e,n){return n?{state:"loading",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function vs(e,n){return{state:"submitting",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function ms(e,n){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function xs(e,n){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n?n.data:void 0}}function gs(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ys.apply(this,arguments)}var bs=e.createContext(null);var Ns=e.createContext(null);var Is=e.createContext(null);var Cs=e.createContext(null);var Ss=e.createContext(null);var Es=e.createContext({outlet:null,matches:[],isDataRoute:!1});var ws=e.createContext(null);function As(){return null!=e.useContext(Ss)}function ks(){return As()||Bi(!1),e.useContext(Ss).location}function Ps(n,t,r,o){As()||Bi(!1);var a,i=e.useContext(Cs).navigator,l=e.useContext(Es).matches,s=l[l.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),d=(s&&s.route,ks());if(t){var f,p="string"===typeof t?Hi(t):t;"/"===c||(null==(f=p.pathname)?void 0:f.startsWith(c))||Bi(!1),a=p}else a=d;var h=a.pathname||"/",v=Qi(n,{pathname:"/"===c?h:h.slice(c.length)||"/"});var m=js(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:fl([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:fl([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),l,r,o);return t&&m?e.createElement(Ss.Provider,{value:{location:ys({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:Mi.Pop}},m):m}function Ts(){var n=function(){var n,t=e.useContext(ws),r=Ls(Os.UseRouteError),o=Ds(Os.UseRouteError);if(void 0!==t)return t;return null==(n=r.errors)?void 0:n[o]}(),t=gl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},t),r?e.createElement("pre",{style:a},r):null,null)}var Ms=e.createElement(Ts,null),Rs=function(n){Le(r,n);var t=We(r);function r(e){var n;return ze(this,r),(n=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},n}return Ge(r,[{key:"componentDidCatch",value:function(e,n){console.error("React Router caught the following error during render",e,n)}},{key:"render",value:function(){return void 0!==this.state.error?e.createElement(Es.Provider,{value:this.props.routeContext},e.createElement(ws.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,n){return n.location!==e.location||"idle"!==n.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}}]),r}(e.Component);function _s(n){var t=n.routeContext,r=n.match,o=n.children,a=e.useContext(bs);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(Es.Provider,{value:t},o)}function js(n,t,r,o){var a;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==n){var i;if(null==(i=r)||!i.errors)return null;n=r.matches}var l=n,s=null==(a=r)?void 0:a.errors;if(null!=s){var u=l.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||Bi(!1),l=l.slice(0,Math.min(l.length,u+1))}var c=!1,d=-1;if(r&&o&&o.v7_partialHydration)for(var f=0;f<l.length;f++){var p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.loader&&p.route.id&&void 0===r.loaderData[p.route.id]&&(!r.errors||void 0===r.errors[p.route.id])){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}return l.reduceRight((function(n,o,a){var i,u,f=!1,p=null,h=null;r&&(i=s&&o.route.id?s[o.route.id]:void 0,p=o.route.errorElement||Ms,c&&(d<0&&0===a?(u="route-fallback",!1||Fs[u]||(Fs[u]=!0),f=!0,h=null):d===a&&(f=!0,h=o.route.hydrateFallbackElement||null)));var v=t.concat(l.slice(0,a+1)),m=function(){var t;return t=i?p:f?h:o.route.Component?e.createElement(o.route.Component,null):o.route.element?o.route.element:n,e.createElement(_s,{match:o,routeContext:{outlet:n,matches:v,isDataRoute:null!=r},children:t})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===a)?e.createElement(Rs,{location:r.location,revalidation:r.revalidation,component:p,error:i,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()}),null)}var Os=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Os||{});function Ls(n){var t=e.useContext(Ns);return t||Bi(!1),t}function Ds(n){var t=function(n){var t=e.useContext(Es);return t||Bi(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||Bi(!1),r.route.id}var Fs={};n.startTransition;function Bs(n){var t=n.basename,r=void 0===t?"/":t,o=n.children,a=void 0===o?null:o,i=n.location,l=n.navigationType,s=void 0===l?Mi.Pop:l,u=n.navigator,c=n.static,d=void 0!==c&&c,f=n.future;As()&&Bi(!1);var p=r.replace(/^\/*/,"/"),h=e.useMemo((function(){return{basename:p,navigator:u,static:d,future:ys({v7_relativeSplatPath:!1},f)}}),[p,f,u,d]);"string"===typeof i&&(i=Hi(i));var v=i,m=v.pathname,x=void 0===m?"/":m,g=v.search,y=void 0===g?"":g,b=v.hash,N=void 0===b?"":b,I=v.state,C=void 0===I?null:I,S=v.key,E=void 0===S?"default":S,w=e.useMemo((function(){var e=sl(x,p);return null==e?null:{location:{pathname:e,search:y,hash:N,state:C,key:E},navigationType:s}}),[p,x,y,N,C,E,s]);return null==w?null:e.createElement(Cs.Provider,{value:h},e.createElement(Ss.Provider,{children:a,value:w}))}var Ws=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ws||{}),zs=new Promise((function(){}));e.Component;function Us(n){var t={hasErrorBoundary:null!=n.ErrorBoundary||null!=n.errorElement};return n.Component&&Object.assign(t,{element:e.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:e.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(t,{errorElement:e.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),t}function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Gs.apply(this,arguments)}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hs(){var e,n=null==(e=window)?void 0:e.__staticRouterHydrationData;return n&&n.errors&&(n=Gs({},n,{errors:Ks(n.errors)})),n}function Ks(e){if(!e)return null;for(var n={},t=0,r=Object.entries(e);t<r.length;t++){var o=y(r[t],2),a=o[0],i=o[1];if(i&&"RouteErrorResponse"===i.__type)n[a]=new xl(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){var l=window[i.__subType];if("function"===typeof l)try{var s=new l(i.message);s.stack="",n[a]=s}catch(c){}}if(null==n[a]){var u=new Error(i.message);u.stack="",n[a]=u}}else n[a]=i}return n}var Vs=e.createContext({isTransitioning:!1});var qs=e.createContext(new Map);var Qs=n.startTransition,Xs=ae.flushSync;function Ys(e){Xs?Xs(e):e()}var $s=Ge((function e(){var n=this;ze(this,e),this.status="pending",this.promise=new Promise((function(e,t){n.resolve=function(t){"pending"===n.status&&(n.status="resolved",e(t))},n.reject=function(e){"pending"===n.status&&(n.status="rejected",t(e))}}))}));function Zs(n){var t=n.fallbackElement,r=n.router,o=n.future,i=y(e.useState(r.state),2),s=i[0],u=i[1],c=y(e.useState(),2),d=c[0],f=c[1],p=y(e.useState({isTransitioning:!1}),2),h=p[0],v=p[1],m=y(e.useState(),2),x=m[0],g=m[1],b=y(e.useState(),2),N=b[0],I=b[1],C=y(e.useState(),2),S=C[0],E=C[1],w=e.useRef(new Map),A=(o||{}).v7_startTransition,k=e.useCallback((function(e){A?function(e){Qs?Qs(e):e()}(e):e()}),[A]),P=e.useCallback((function(e,n){var t=n.deletedFetchers,o=n.unstable_flushSync,a=n.unstable_viewTransitionOpts;t.forEach((function(e){return w.current.delete(e)})),e.fetchers.forEach((function(e,n){void 0!==e.data&&w.current.set(n,e.data)}));var i=null==r.window||"function"!==typeof r.window.document.startViewTransition;if(a&&!i){if(o){Ys((function(){N&&(x&&x.resolve(),N.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));var l=r.window.document.startViewTransition((function(){Ys((function(){return u(e)}))}));return l.finished.finally((function(){Ys((function(){g(void 0),I(void 0),f(void 0),v({isTransitioning:!1})}))})),void Ys((function(){return I(l)}))}N?(x&&x.resolve(),N.skipTransition(),E({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(f(e),v({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else o?Ys((function(){return u(e)})):k((function(){return u(e)}))}),[r.window,N,x,w,k]);e.useLayoutEffect((function(){return r.subscribe(P)}),[r,P]),e.useEffect((function(){h.isTransitioning&&!h.flushSync&&g(new $s)}),[h]),e.useEffect((function(){if(x&&d&&r.window){var e=d,n=x.promise,t=r.window.document.startViewTransition(l(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k((function(){return u(e)})),t.next=3,n;case 3:case"end":return t.stop()}}),t)}))));t.finished.finally((function(){g(void 0),I(void 0),f(void 0),v({isTransitioning:!1})})),I(t)}}),[k,d,x,r.window]),e.useEffect((function(){x&&d&&s.location.key===d.location.key&&x.resolve()}),[x,N,s.location,d]),e.useEffect((function(){!h.isTransitioning&&S&&(f(S.state),v({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),E(void 0))}),[h.isTransitioning,S]),e.useEffect((function(){}),[]);var T=e.useMemo((function(){return{createHref:r.createHref,encodeLocation:r.encodeLocation,go:function(e){return r.navigate(e)},push:function(e,n,t){return r.navigate(e,{state:n,preventScrollReset:null==t?void 0:t.preventScrollReset})},replace:function(e,n,t){return r.navigate(e,{replace:!0,state:n,preventScrollReset:null==t?void 0:t.preventScrollReset})}}}),[r]),M=r.basename||"/",R=e.useMemo((function(){return{router:r,navigator:T,static:!1,basename:M}}),[r,T,M]);return e.createElement(e.Fragment,null,e.createElement(bs.Provider,{value:R},e.createElement(Ns.Provider,{value:s},e.createElement(qs.Provider,{value:w.current},e.createElement(Vs.Provider,{value:h},e.createElement(Bs,{basename:M,location:s.location,navigationType:s.historyAction,navigator:T,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},s.initialized||r.future.v7_partialHydration?e.createElement(Js,{routes:r.routes,future:r.future,state:s}):t))))),null)}function Js(e){var n=e.routes,t=e.future;return Ps(n,void 0,e.state,t)}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var eu,nu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(eu||(eu={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(nu||(nu={}));var tu;var ru="".concat(null!==(tu="/XRNA-React")?tu:"","/docs/documentation.json"),ou={tip:"Tip",info:"Info",warning:"Warning"},au={tip:"docs-note--tip",info:"docs-note--info",warning:"docs-note--warning"};function iu(n){var t=function(e){for(var n,t=[],r=/(`[^`]+`|\*[^*]+\*)/g,o=0;null!==(n=r.exec(e));){n.index>o&&t.push({kind:"text",value:e.slice(o,n.index)});var a=n[0];a.startsWith("`")?t.push({kind:"code",value:a.slice(1,-1)}):a.startsWith("*")&&t.push({kind:"em",value:a.slice(1,-1)}),o=r.lastIndex}return o<e.length&&t.push({kind:"text",value:e.slice(o)}),t.filter((function(e){return e.value.length>0}))}(n);return 0===t.length?n:t.map((function(n,t){switch(n.kind){case"code":return(0,Gn.jsx)("code",{className:"docs-inline-code",children:n.value},t);case"em":return(0,Gn.jsx)("em",{className:"docs-emphasis",children:n.value},t);default:return(0,Gn.jsx)(e.Fragment,{children:n.value},t)}}))}function lu(e){var n;if(/^(?:[a-z]+:)?\/\//i.test(e)||e.startsWith("data:"))return e;var t=null!==(n="/XRNA-React")?n:"",r=e.startsWith("/")?e:"/".concat(e);if(!t)return r;var o=t.endsWith("/")?"":"/";return"".concat(t).concat(o).concat(r.replace(/^\/+/,""))}function su(e){switch(e){case"sm":return" docs-image--sm";case"md":return" docs-image--md";case"lg":return" docs-image--lg";case"full":return" docs-image--full";default:return""}}function uu(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return e.flatMap((function(e){var r={id:e.id,title:e.title,level:t,ancestors:n},o=[].concat(v(n),[e.id]),a=Math.min(t+1,6),i=e.subsections?uu(e.subsections,o,a):[];return[r].concat(v(i))}))}function cu(e){return e.flatMap((function(e){return[e.id].concat(v(e.subsections?cu(e.subsections):[]))}))}var du,fu=function(){var n,t=y((0,e.useState)({status:"loading"}),2),r=t[0],o=t[1],i=y((0,e.useState)(new Set),2),s=i[0],u=i[1];(0,e.useEffect)((function(){var e=new AbortController;function n(){return(n=l(a().mark((function n(){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(ru,{signal:e.signal});case 3:if((t=n.sent).ok){n.next=6;break}throw new Error("Failed to load documentation (status ".concat(t.status,")"));case 6:return n.next=8,t.json();case 8:r=n.sent,o({status:"ready",docs:r}),n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(0),"AbortError"!==n.t0.name){n.next=16;break}return n.abrupt("return");case 16:o({status:"error",message:n.t0 instanceof Error?n.t0.message:"Unable to load documentation. Please try again later."});case 17:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e.abort()}}),[]),(0,e.useEffect)((function(){"ready"===r.status&&u(new Set(cu(r.docs.sections)))}),[r]),(0,e.useEffect)((function(){"ready"===r.status&&r.docs.title&&(document.title="".concat(r.docs.title," | Documentation"))}),[r]);var c=(0,e.useMemo)((function(){return"ready"!==r.status?[]:uu(r.docs.sections)}),[r]),d=(0,e.useCallback)((function(e){u((function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t}))}),[]),f=(0,e.useCallback)((function(e,n){e.preventDefault(),u((function(e){var t=new Set(e);return n.ancestors.forEach((function(e){return t.add(e)})),t.add(n.id),t}));var t="".concat("#/docs","?section=").concat(n.id);window.location.hash!==t&&(window.location.hash=t);var r,o=document.getElementById(n.id);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),null===(r=o.focus)||void 0===r||r.call(o))}),[]),p=(0,e.useCallback)((function(e){var n,t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,o=s.has(e.id),a=Math.min(r,6),i="h".concat(a),l="".concat(e.id,"-content");return(0,Gn.jsxs)("section",{id:e.id,className:"docs-section".concat(o?"":" docs-section--collapsed"),children:[(0,Gn.jsxs)("header",{className:"docs-section__header",children:[(0,Gn.jsx)(i,{className:"docs-section__heading",children:(0,Gn.jsxs)("button",{type:"button",className:"docs-section__toggle",onClick:function(){return d(e.id)},"aria-expanded":o,"aria-controls":l,children:[(0,Gn.jsx)("span",{className:"docs-section__chevron","aria-hidden":"true",children:"\u25be"}),(0,Gn.jsx)("span",{children:e.title})]})}),e.summary?(0,Gn.jsx)("p",{className:"docs-section__summary",children:iu(e.summary)}):null]}),(0,Gn.jsxs)("div",{className:"docs-section__body",id:l,hidden:!o,children:[null===(n=e.content)||void 0===n?void 0:n.map((function(n,t){return function(e,n){switch(e.type){case"paragraph":return(0,Gn.jsx)("p",{className:"docs-paragraph",children:iu(e.text)},n);case"list":var t="ordered"===e.style?"ol":"ul";return(0,Gn.jsx)(t,{className:"docs-list",children:e.items.map((function(e,n){return(0,Gn.jsx)("li",{children:iu(e)},n)}))},n);case"note":return(0,Gn.jsxs)("div",{className:"docs-note ".concat(au[e.variant]),children:[(0,Gn.jsx)("span",{className:"docs-note__label",children:ou[e.variant]}),(0,Gn.jsx)("span",{className:"docs-note__content",children:iu(e.text)})]},n);case"table":return(0,Gn.jsx)("div",{className:"docs-table-wrapper",children:(0,Gn.jsxs)("table",{className:"docs-table",children:[(0,Gn.jsx)("thead",{children:(0,Gn.jsx)("tr",{children:e.headers.map((function(e,n){return(0,Gn.jsx)("th",{children:iu(e)},n)}))})}),(0,Gn.jsx)("tbody",{children:e.rows.map((function(e,n){return(0,Gn.jsx)("tr",{children:e.map((function(e,n){return(0,Gn.jsx)("td",{children:iu(e)},n)}))},n)}))})]})},n);case"image":return(0,Gn.jsxs)("figure",{className:"docs-image".concat(su(e.width)),children:[(0,Gn.jsx)("img",{src:lu(e.src),alt:e.alt,loading:"lazy"}),e.caption?(0,Gn.jsx)("figcaption",{className:"docs-image__caption",children:iu(e.caption)}):null]},n);default:return null}}(n,"".concat(e.id,"-block-").concat(t))})),null!==(t=e.subsections)&&void 0!==t&&t.length?(0,Gn.jsx)("div",{className:"docs-section__subsections",children:e.subsections.map((function(e){return p(e,r+1)}))}):null]})]},e.id)}),[s,d]);if("loading"===r.status)return(0,Gn.jsx)("main",{className:"docs-page docs-page--centered",children:(0,Gn.jsxs)("div",{className:"docs-status",children:[(0,Gn.jsx)("span",{className:"docs-status__spinner","aria-hidden":!0,children:"\u25cf"}),(0,Gn.jsx)("span",{className:"docs-status__label",children:"Loading documentation\u2026"})]})});if("error"===r.status)return(0,Gn.jsx)("main",{className:"docs-page docs-page--centered",children:(0,Gn.jsx)("div",{className:"docs-status docs-status--error",children:(0,Gn.jsx)("span",{className:"docs-status__label",children:r.message})})});var h=r.docs;return(0,Gn.jsxs)("main",{className:"docs-page",children:[(0,Gn.jsxs)("aside",{className:"docs-page__toc","aria-label":"Table of contents",children:[(0,Gn.jsxs)("div",{className:"docs-page__toc-header",children:[(0,Gn.jsxs)("div",{className:"docs-page__toc-title-row",children:[(0,Gn.jsx)("h1",{children:h.title}),(0,Gn.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Gn.jsx)(Yo,{label:"",variant:"secondary",icon:(0,Gn.jsx)(xa,{size:12}),hint:"Close docs",onClick:function(){window.location.hash="#/"}}),(0,Gn.jsx)(Ha,{className:"docs-theme-toggle"})]})]}),(0,Gn.jsxs)("dl",{className:"docs-meta",children:[h.version?(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("dt",{children:"Version"}),(0,Gn.jsx)("dd",{children:h.version})]}):null,h.lastUpdated?(0,Gn.jsxs)("div",{children:[(0,Gn.jsx)("dt",{children:"Last updated"}),(0,Gn.jsx)("dd",{children:h.lastUpdated})]}):null]})]}),(0,Gn.jsx)("nav",{className:"docs-toc-nav",children:(0,Gn.jsx)("ol",{children:c.map((function(e){return(0,Gn.jsx)("li",{"data-level":e.level,children:(0,Gn.jsx)("a",{href:"#/docs?section=".concat(e.id),onClick:function(n){return f(n,e)},className:"docs-toc-link",style:{paddingLeft:"".concat(12*(e.level-2),"px")},children:e.title})},e.id)}))})})]}),(0,Gn.jsxs)("div",{className:"docs-page__content",children:[h.sections.map((function(e){return p(e)})),null!==(n=h.resources)&&void 0!==n&&n.length?(0,Gn.jsxs)("section",{id:"resources",className:"docs-section docs-section--resources",children:[(0,Gn.jsx)("header",{className:"docs-section__header",children:(0,Gn.jsx)("h2",{children:"Resources"})}),(0,Gn.jsx)("ul",{className:"docs-resources",children:h.resources.map((function(e){return(0,Gn.jsxs)("li",{children:[(0,Gn.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.label}),e.description?(0,Gn.jsx)("p",{children:iu(e.description)}):null]},e.url)}))})]}):null]})]})},pu=function(){return(0,Gn.jsx)(xt,{children:(0,Gn.jsx)(fu,{})})},hu=function(e,n){return Ml({basename:null==n?void 0:n.basename,future:Gs({},null==n?void 0:n.future,{v7_prependBasename:!0}),history:(t={window:null==n?void 0:n.window},void 0===t&&(t={}),Ki((function(e,n){var t=Hi(e.location.hash.substr(1)),r=t.pathname,o=void 0===r?"/":r,a=t.search,i=void 0===a?"":a,l=t.hash,s=void 0===l?"":l;return o.startsWith("/")||o.startsWith(".")||(o="/"+o),Ui("",{pathname:o,search:i,hash:s},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}),(function(e,n){var t=e.document.querySelector("base"),r="";if(t&&t.getAttribute("href")){var o=e.location.href,a=o.indexOf("#");r=-1===a?o:o.slice(0,a)}return r+"#"+("string"===typeof n?n:Gi(n))}),(function(e,n){Wi("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(n)+")")}),t)),hydrationData:(null==n?void 0:n.hydrationData)||Hs(),routes:e,mapRouteProperties:Us,window:null==n?void 0:n.window}).initialize();var t}([{path:"/",element:(0,Gn.jsx)(Ri.Component,{r2dtLegacyVersionFlag:!0})},{path:"/main",element:(0,Gn.jsx)(Ri.Component,{r2dtLegacyVersionFlag:!1})},{path:"/main/*",element:(0,Gn.jsx)(Ri.Component,{r2dtLegacyVersionFlag:!1})},{path:"/docs",element:(0,Gn.jsx)(pu,{})},{path:"/XRNA-React",element:(0,Gn.jsx)(Ri.Component,{r2dtLegacyVersionFlag:!0})},{path:"/XRNA-React/main",element:(0,Gn.jsx)(Ri.Component,{r2dtLegacyVersionFlag:!1})},{path:"/XRNA-React/docs",element:(0,Gn.jsx)(pu,{})}]),vu=r.createRoot(document.getElementById("root")),mu=function(){var e=window.location.pathname;return e.length>1&&e.endsWith("/")?e.slice(0,-1):e||"/"}(),xu=null!==(du="/XRNA-React")?du:"",gu=xu.endsWith("/")?xu.slice(0,-1):xu,yu=new Set(["/docs"]);gu&&yu.add("".concat(gu,"/docs")),vu.render((0,Gn.jsx)(e.StrictMode,{children:yu.has(mu)?(0,Gn.jsx)(pu,{}):(0,Gn.jsx)(Zs,{router:hu})})),_i()}()}();
//# sourceMappingURL=main.5b7e9612.js.map